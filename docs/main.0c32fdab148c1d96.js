"use strict";(self.webpackChunkbt_planning_poker=self.webpackChunkbt_planning_poker||[]).push([[179],{2011:(ut,Se,O)=>{O.d(Se,{Dh:()=>he,GT:()=>de,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>ie,xv:()=>fe});var m=O(4650),J=O(127),P=O(5813);ut=O.hmd(ut);const oe=["ngOnDestroy"],ie=(pe,Xe,st,xe={})=>new Proxy(pe,{get:(ye,Ie)=>st.runOutsideAngular(()=>{var Ve;if(pe[Ie])return!(null===(Ve=xe?.spy)||void 0===Ve)&&Ve.get&&xe.spy.get(Ie,pe[Ie]),pe[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const je=Xe.toPromise().then(V=>{const ge=V&&V[Ie];return"function"==typeof ge?ge.bind(V):ge&&ge.then?ge.then(q=>st.run(()=>q)):st.run(()=>ge)});return new Proxy(()=>{},{get:(V,ge)=>je[ge],apply:(V,ge,q)=>je.then(X=>{var ne;const te=X&&X(...q);return!(null===(ne=xe?.spy)||void 0===ne)&&ne.apply&&xe.spy.apply(Ie,q,te),te})})})}),de=(pe,Xe)=>{Xe.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(xe=>{Object.defineProperty(pe.prototype,xe,Object.getOwnPropertyDescriptor(st.prototype||st,xe))})})};class le{constructor(Xe){return Xe}}const he=new m.OlP("angularfire2.app.options"),fe=new m.OlP("angularfire2.app.name");function B(pe,Xe,st){const ye="object"==typeof st&&st||{};ye.name=ye.name||"string"==typeof st&&st||"[DEFAULT]";const Ve=J.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Xe.runOutsideAngular(()=>J.Z.initializeApp(pe,ye));try{JSON.stringify(pe)!==JSON.stringify(Ve.options)&&j("error",`${Ve.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ve)}const j=(pe,...Xe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[pe](...Xe)},Z={provide:le,useFactory:B,deps:[he,m.R0b,[new m.FiY,fe]]};let Le=(()=>{class pe{constructor(st){J.Z.registerVersion("angularfire",P.q4.full,"core"),J.Z.registerVersion("angularfire",P.q4.full,"app-compat"),J.Z.registerVersion("angular",m.q4F.full,st.toString())}static initializeApp(st,xe){return{ngModule:pe,providers:[{provide:he,useValue:st},{provide:fe,useValue:xe}]}}}return pe.\u0275fac=function(st){return new(st||pe)(m.LFG(m.Lbi))},pe.\u0275mod=m.oAB({type:pe}),pe.\u0275inj=m.cJS({providers:[Z]}),pe})();function Me(pe,Xe,st,xe,ye){const[,Ie,Ve]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===pe)||[];if(Ie)return function we(pe,Xe){try{return pe.toString()===Xe.toString()}catch{return pe===Xe}}(ye,Ve)||(me("error",`${Xe} was already initialized on the ${st} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:ye,was:Ve})),Ie;{const je=xe();return globalThis.\u0275AngularfireInstanceCache.push([pe,je,ye]),je}}const tt=!!ut.hot,me=(pe,...Xe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[pe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Se,O)=>{O.d(Se,{q4:()=>zr,iC:()=>Mi,fc:()=>Uo,HU:()=>Lo,vb:()=>Tt,JM:()=>ai});var m=O(4650),J=O(5867),P=O(5861),oe=O(9681),ie=O(2090),de=O(4859),le=O(1877),he=O(8766);const fe="@firebase/installations",B="0.5.16",Z=`w:${B}`,Le="FIS_v2",Xe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ye(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(D,C){const L=(yield C.json()).error;return Xe.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:C}){const x=je(D);return x.append("Authorization",function ne(D){return`${Le} ${D}`}(C)),x}function ge(D){return q.apply(this,arguments)}function q(){return(q=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function te(D,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const L=xe(D),K=je(D),re=C.getImmediate({optional:!0});if(re){const bt=yield re.getHeartbeatsHeader();bt&&K.append("x-firebase-client",bt)}const Be={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:Z})},Ye=yield ge(()=>fetch(L,Be));if(Ye.ok){const bt=yield Ye.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:ye(bt.authToken)}}throw yield Ie("Create Installation",Ye)})).apply(this,arguments)}function Pe(D){return new Promise(C=>{setTimeout(C,D)})}const Qt=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function on(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Qt.test(x)?x:""}catch{return""}}function gn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Xt(D,C){const x=gn(D);cn(x,C),function Gi(D,C){const x=function kr(){return!di&&"BroadcastChannel"in self&&(di=new BroadcastChannel("[Firebase] FID Change"),di.onmessage=D=>{cn(D.data.key,D.data.fid)}),di}();x&&x.postMessage({key:D,fid:C}),function Vr(){0===Wt.size&&di&&(di.close(),di=null)}()}(x,C)}function cn(D,C){const x=Wt.get(D);if(x)for(const L of x)L(C)}let di=null;const Jr="firebase-installations-store";let ei=null;function ca(){return ei||(ei=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Jr)}})),ei}function Ze(D,C){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,P.Z)(function*(D,C){const x=gn(D),K=(yield ca()).transaction(Jr,"readwrite"),re=K.objectStore(Jr),be=yield re.get(x);return yield re.put(C,x),yield K.done,(!be||be.fid!==C.fid)&&Xt(D,C.fid),C})).apply(this,arguments)}function ms(D){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(D){const C=gn(D),L=(yield ca()).transaction(Jr,"readwrite");yield L.objectStore(Jr).delete(C),yield L.done})).apply(this,arguments)}function ti(D,C){return bi.apply(this,arguments)}function bi(){return(bi=(0,P.Z)(function*(D,C){const x=gn(D),K=(yield ca()).transaction(Jr,"readwrite"),re=K.objectStore(Jr),be=yield re.get(x),Be=C(be);return void 0===Be?yield re.delete(x):yield re.put(Be,x),yield K.done,Be&&(!be||be.fid!==Be.fid)&&Xt(D,Be.fid),Be})).apply(this,arguments)}function kn(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,P.Z)(function*(D){let C;const x=yield ti(D.appConfig,L=>{const K=dn(L),re=yt(D,K);return C=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function dn(D){return kt(D||{fid:We(),registrationStatus:0})}function yt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Xe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function ot(D,C){return rn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:fr(D)}:{installationEntry:C}}function rn(){return(rn=(0,P.Z)(function*(D,C){try{const x=yield te(D,C);return Ze(D.appConfig,x)}catch(x){throw st(x)&&409===x.customData.serverCode?yield ms(D.appConfig):yield Ze(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function fr(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(D){let C=yield Br(D.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield Br(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield kn(D);return L||x}return C})).apply(this,arguments)}function Br(D){return ti(D,C=>{if(!C)throw Xe.create("installation-not-found");return kt(C)})}function kt(D){return function ys(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function en(D,C){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const L=tn(D,x),K=V(D,x),re=C.getImmediate({optional:!0});if(re){const bt=yield re.getHeartbeatsHeader();bt&&K.append("x-firebase-client",bt)}const Be={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},Ye=yield ge(()=>fetch(L,Be));if(Ye.ok)return ye(yield Ye.json());throw yield Ie("Generate Auth Token",Ye)})).apply(this,arguments)}function tn(D,{fid:C}){return`${xe(D)}/${C}/authTokens:generate`}function qn(D){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,P.Z)(function*(D,C=!1){let x;const L=yield ti(D.appConfig,re=>{if(!Ut(re))throw Xe.create("not-registered");const be=re.authToken;if(!C&&$(be))return re;if(1===be.requestStatus)return x=et(D,C),re;{if(!navigator.onLine)throw Xe.create("app-offline");const Be=W(re);return x=Ct(D,Be),Be}});return x?yield x:L.authToken})).apply(this,arguments)}function et(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(D,C){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield Pe(100),x=yield Je(D.appConfig);const L=x.authToken;return 0===L.requestStatus?qn(D,C):L})).apply(this,arguments)}function Je(D){return ti(D,C=>{if(!Ut(C))throw Xe.create("not-registered");return function ve(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(D,C){return Et.apply(this,arguments)}function Et(){return(Et=(0,P.Z)(function*(D,C){try{const x=yield en(D,C),L=Object.assign(Object.assign({},C),{authToken:x});return yield Ze(D.appConfig,L),x}catch(x){if(!st(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ze(D.appConfig,L)}else yield ms(D.appConfig);throw x}})).apply(this,arguments)}function Ut(D){return void 0!==D&&2===D.registrationStatus}function $(D){return 2===D.requestStatus&&!function U(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function W(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Ge(){return(Ge=(0,P.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:L}=yield kn(C);return L?L.catch(console.error):qn(C).catch(console.error),x.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,P.Z)(function*(D,C=!1){const x=D;return yield ln(x),(yield qn(x,C)).token})).apply(this,arguments)}function ln(D){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,P.Z)(function*(D){const{registrationPromise:C}=yield kn(D);C&&(yield C)})).apply(this,arguments)}function _s(D){return Xe.create("missing-app-config-values",{valueName:D})}const vo="installations",vn=D=>{const C=D.getProvider("app").getImmediate(),x=function mn(D){if(!D||!D.options)throw _s("App Configuration");if(!D.name)throw _s("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw _s(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Gs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,vo).getImmediate();return{getId:()=>function Y(D){return Ge.apply(this,arguments)}(x),getToken:K=>function lt(D){return Zt.apply(this,arguments)}(x,K)}};(function pu(){(0,oe._registerComponent)(new de.wA(vo,vn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",Gs,"PRIVATE"))})(),(0,oe.registerVersion)(fe,B),(0,oe.registerVersion)(fe,B,"esm2017");const Ci="@firebase/remote-config",Vn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sf{constructor(C,x,L,K){this.client=C,this.storage=x,this.storageCache=L,this.logger=K}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,K=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var x=this;return(0,P.Z)(function*(){const[L,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(C.cacheMaxAgeMillis,L))return K;C.eTag=K&&K.eTag;const re=yield x.client.fetch(C),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&be.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(be),re})()}}function Vc(D=navigator){return D.languages&&D.languages[0]||D.language}class Bc{constructor(C,x,L,K,re,be){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=L,this.projectId=K,this.apiKey=re,this.appId=be}fetch(C){var x=this;return(0,P.Z)(function*(){var L,K,re;const[be,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},gt={sdk_version:x.sdkVersion,app_instance_id:be,app_instance_id_token:Be,app_id:x.appId,language_code:Vc()},_n={method:"POST",headers:Pt,body:JSON.stringify(gt)},$n=fetch(bt,_n),Ar=new Promise((Ps,Ns)=>{C.signal.addEventListener(()=>{const Md=new Error("The operation was aborted.");Md.name="AbortError",Ns(Md)})});let Rs;try{yield Promise.race([$n,Ar]),Rs=yield $n}catch(Ps){let Ns="fetch-client-network";throw"AbortError"===(null===(L=Ps)||void 0===L?void 0:L.name)&&(Ns="fetch-timeout"),Vn.create(Ns,{originalErrorMessage:null===(K=Ps)||void 0===K?void 0:K.message})}let so=Rs.status;const Bo=Rs.headers.get("ETag")||void 0;let Wr,ks;if(200===Rs.status){let Ps;try{Ps=yield Rs.json()}catch(Ns){throw Vn.create("fetch-client-parse",{originalErrorMessage:null===(re=Ns)||void 0===re?void 0:re.message})}Wr=Ps.entries,ks=Ps.state}if("INSTANCE_STATE_UNSPECIFIED"===ks?so=500:"NO_CHANGE"===ks?so=304:("NO_TEMPLATE"===ks||"EMPTY_CONFIG"===ks)&&(Wr={}),304!==so&&200!==so)throw Vn.create("fetch-status",{httpStatus:so});return{status:so,eTag:Bo,config:Wr}})()}}class Yp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:L}){var K=this;return(0,P.Z)(function*(){yield function Zn(D,C){return new Promise((x,L)=>{const K=Math.max(C-Date.now(),0),re=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(re),L(Vn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const re=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),re}catch(re){if(!function cd(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const be={throttleEndTimeMillis:Date.now()+(0,ie.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(be),K.attemptFetch(C,be)}})()}}class ld{constructor(C,x,L,K,re){this.app=C,this._client=x,this._storageCache=L,this._storage=K,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function jc(D,C){var x;const L=D.target.error||void 0;return Vn.create(C,{originalErrorMessage:L&&(null===(x=L)||void 0===x?void 0:x.message)})}const Es="app_namespace_store";class Jp{constructor(C,x,L,K=function Xp(){return new Promise((D,C)=>{var x;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=K=>{C(jc(K,"storage-open"))},L.onsuccess=K=>{D(K.target.result)},L.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(Es,{keyPath:"compositeKey"})}}catch(L){C(Vn.create("storage-open",{originalErrorMessage:null===(x=L)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((K,re)=>{var be;const Ye=L.transaction([Es],"readonly").objectStore(Es),bt=x.createCompositeKey(C);try{const Pt=Ye.get(bt);Pt.onerror=gt=>{re(jc(gt,"storage-get"))},Pt.onsuccess=gt=>{const _n=gt.target.result;K(_n?_n.value:void 0)}}catch(Pt){re(Vn.create("storage-get",{originalErrorMessage:null===(be=Pt)||void 0===be?void 0:be.message}))}})})()}set(C,x){var L=this;return(0,P.Z)(function*(){const K=yield L.openDbPromise;return new Promise((re,be)=>{var Be;const bt=K.transaction([Es],"readwrite").objectStore(Es),Pt=L.createCompositeKey(C);try{const gt=bt.put({compositeKey:Pt,value:x});gt.onerror=_n=>{be(jc(_n,"storage-set"))},gt.onsuccess=()=>{re()}}catch(gt){be(Vn.create("storage-set",{originalErrorMessage:null===(Be=gt)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((K,re)=>{var be;const Ye=L.transaction([Es],"readwrite").objectStore(Es),bt=x.createCompositeKey(C);try{const Pt=Ye.delete(bt);Pt.onerror=gt=>{re(jc(gt,"storage-delete"))},Pt.onsuccess=()=>{K()}}catch(Pt){re(Vn.create("storage-delete",{originalErrorMessage:null===(be=Pt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class hd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),re=yield x;re&&(C.lastFetchStatus=re);const be=yield L;be&&(C.lastSuccessfulFetchTimestampMillis=be);const Be=yield K;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function yu(){return uf.apply(this,arguments)}function uf(){return(uf=(0,P.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,oe._registerComponent)(new de.wA("remote-config",function D(C,{instanceIdentifier:x}){const L=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vn.create("registration-window");if(!(0,ie.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:re,apiKey:be,appId:Be}=L.options;if(!re)throw Vn.create("registration-project-id");if(!be)throw Vn.create("registration-api-key");if(!Be)throw Vn.create("registration-app-id");const Ye=new Jp(Be,L.name,x=x||"firebase"),bt=new hd(Ye),Pt=new le.Yd(Ci);Pt.logLevel=le.in.ERROR;const gt=new Bc(K,oe.SDK_VERSION,x,re,be,Be),_n=new Yp(gt,Ye),$n=new sf(_n,Ye,bt,Pt),Ar=new ld(L,$n,bt,Ye,Pt);return function Bn(D){const C=(0,ie.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ar),Ar},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ci,"0.3.15"),(0,oe.registerVersion)(Ci,"0.3.15","esm2017")}();const Ti="/firebase-messaging-sw.js",Wi="/firebase-cloud-messaging-push-scope",Zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ha="google.c.a.c_id",_u="google.c.a.c_l",$c="google.c.a.ts",cf="google.c.a.e";var Ki=(()=>{return(D=Ki||(Ki={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ki;var D})();function ni(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $r(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),K=new Uint8Array(L.length);for(let re=0;re<L.length;++re)K[re]=L.charCodeAt(re);return K}const wo="fcm_token_details_db",gr="fcm_token_object_Store";function lf(D){return df.apply(this,arguments)}function df(){return df=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(wo))return null;let C=null;return(yield(0,he.X3)(wo,5,{upgrade:(L=(0,P.Z)(function*(K,re,be,Be){var Ye;if(re<2||!K.objectStoreNames.contains(gr))return;const bt=Be.objectStore(gr),Pt=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),Pt)if(2===re){const gt=Pt;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;C={token:gt.fcmToken,createTime:null!==(Ye=gt.createTime)&&void 0!==Ye?Ye:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:ni(gt.vapidKey)}}}else if(3===re){const gt=Pt;C={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:ni(gt.auth),p256dh:ni(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:ni(gt.vapidKey)}}}else if(4===re){const gt=Pt;C={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:ni(gt.auth),p256dh:ni(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:ni(gt.vapidKey)}}}}),function(re,be,Be,Ye){return L.apply(this,arguments)})})).close(),yield(0,he.Lj)(wo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),bn(C)?C:null;var L}),df.apply(this,arguments)}function bn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ri="firebase-messaging-store";let Tr=null;function wu(){return Tr||(Tr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ri)}})),Tr}function Io(D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(D){const C=pi(D),L=yield(yield wu()).transaction(ri).objectStore(ri).get(C);if(L)return L;{const K=yield lf(D.appConfig.senderId);if(K)return yield Gt(D,K),K}})).apply(this,arguments)}function Gt(D,C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(D,C){const x=pi(D),K=(yield wu()).transaction(ri,"readwrite");return yield K.objectStore(ri).put(C,x),yield K.done,C})).apply(this,arguments)}function Ws(D){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,P.Z)(function*(D){const C=pi(D),L=(yield wu()).transaction(ri,"readwrite");yield L.objectStore(ri).delete(C),yield L.done})).apply(this,arguments)}function pi({appConfig:D}){return D.appId}const wn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(D,C){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(D,C){var x;const L=yield Gc(D),K=De(C),re={method:"POST",headers:L,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(Qi(D.appConfig),re)).json()}catch(Be){throw wn.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(be.error)throw wn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw wn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function ff(D,C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,P.Z)(function*(D,C){var x;const L=yield Gc(D),K=De(C.subscriptionOptions),re={method:"PATCH",headers:L,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(`${Qi(D.appConfig)}/${C.token}`,re)).json()}catch(Be){throw wn.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(be.error)throw wn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw wn.create("token-update-no-token");return be.token})).apply(this,arguments)}function Tu(D,C){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,P.Z)(function*(D,C){var x;const K={method:"DELETE",headers:yield Gc(D)};try{const be=yield(yield fetch(`${Qi(D.appConfig)}/${C}`,K)).json();if(be.error)throw wn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(re){throw wn.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Qi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Gc(D){return pa.apply(this,arguments)}function pa(){return(pa=(0,P.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:D,auth:C,endpoint:x,vapidKey:L}){const K={web:{endpoint:x,auth:C,p256dh:D}};return L!==Zi&&(K.web.applicationPubKey=L),K}const $t=6048e5;function Su(D){return Au.apply(this,arguments)}function Au(){return(Au=(0,P.Z)(function*(D){const C=yield zc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ni(C.getKey("auth")),p256dh:ni(C.getKey("p256dh"))},L=yield Io(D.firebaseDependencies);if(L){if(md(L.subscriptionOptions,x))return Date.now()>=L.createTime+$t?Eo(D,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield Tu(D.firebaseDependencies,L.token)}catch(K){console.warn(K)}return ga(D.firebaseDependencies,x)}return ga(D.firebaseDependencies,x)})).apply(this,arguments)}function Dn(D){return xu.apply(this,arguments)}function xu(){return(xu=(0,P.Z)(function*(D){const C=yield Io(D.firebaseDependencies);C&&(yield Tu(D.firebaseDependencies,C.token),yield Ws(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Eo(D,C){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*(D,C){try{const x=yield ff(D.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Gt(D.firebaseDependencies,L),x}catch(x){throw yield Dn(D),x}})).apply(this,arguments)}function ga(D,C){return ma.apply(this,arguments)}function ma(){return(ma=(0,P.Z)(function*(D,C){const L={token:yield Mt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Gt(D,L),L.token})).apply(this,arguments)}function zc(D,C){return qc.apply(this,arguments)}function qc(){return(qc=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$r(C)})})).apply(this,arguments)}function md(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function ya(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Cn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const L=C.notification.body;L&&(D.notification.body=L);const K=C.notification.image;K&&(D.notification.image=K);const re=C.notification.icon;re&&(D.notification.icon=re)}(C,D),function Si(D,C){!C.data||(D.data=C.data)}(C,D),function Wc(D,C){var x,L,K,re,be;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(K=null===(L=C.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==K?K:null===(re=C.notification)||void 0===re?void 0:re.click_action;Be&&(D.fcmOptions.link=Be);const Ye=null===(be=C.fcmOptions)||void 0===be?void 0:be.analytics_label;Ye&&(D.fcmOptions.analyticsLabel=Ye)}(C,D),C}function Zs(D){return"object"==typeof D&&!!D&&ha in D}function Xi(D,C){const x=[];for(let L=0;L<D.length;L++)x.push(D.charAt(L)),L<C.length&&x.push(C.charAt(L));return x.join("")}function _a(D){return wn.create("missing-app-config-values",{valueName:D})}Xi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tg{constructor(C,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function eg(D){if(!D||!D.options)throw _a("App Configuration Object");if(!D.name)throw _a("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const L of C)if(!x[L])throw _a(L);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Zc(D){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Ti,{scope:Wi}),D.swRegistration.update().catch(()=>{})}catch(x){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function va(D,C){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Zc(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function wa(D,C){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Zi)})).apply(this,arguments)}function ku(){return(ku=(0,P.Z)(function*(D,C){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wn.create("permission-blocked");return yield wa(D,C?.vapidKey),yield va(D,C?.serviceWorkerRegistration),Su(D)})).apply(this,arguments)}function Qc(D,C,x){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,P.Z)(function*(D,C,x){const L=Jc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[ha],message_name:x[_u],message_time:x[$c],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Jc(D){switch(D){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ks(){return(Ks=(0,P.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Ki.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ya(x)):D.onMessageHandler.next(ya(x)));const L=x.data;Zs(L)&&"1"===L[cf]&&(yield Qc(D,x.messageType,L))})).apply(this,arguments)}const Ys="@firebase/messaging",Kn=D=>{const C=new tg(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function yd(D,C){return Ks.apply(this,arguments)}(C,x)),C},Hr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:L=>function Ru(D,C){return ku.apply(this,arguments)}(C,L)}};function _d(){return el.apply(this,arguments)}function el(){return(el=(0,P.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hn(){(0,oe._registerComponent)(new de.wA("messaging",Kn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",Hr,"PRIVATE")),(0,oe.registerVersion)(Ys,"0.11.0"),(0,oe.registerVersion)(Ys,"0.11.0","esm2017")}();const Do="analytics",Id="firebase_id",Xs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lu="https://www.googletagmanager.com/gtag/js",Tn=new le.Yd("@firebase/analytics");function Fu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function Uu(D,C){const x=document.createElement("script");x.src=`${Lu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function gf(D,C,x,L,K,re){return Co.apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(D,C,x,L,K,re){const be=L[K];try{if(be)yield C[be];else{const Ye=(yield Fu(x)).find(bt=>bt.measurementId===K);Ye&&(yield C[Ye.appId])}}catch(Be){Tn.error(Be)}D("config",K,re)})).apply(this,arguments)}function To(D,C,x,L,K){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(D,C,x,L,K){try{let re=[];if(K&&K.send_to){let be=K.send_to;Array.isArray(be)||(be=[be]);const Be=yield Fu(x);for(const Ye of be){const bt=Be.find(gt=>gt.measurementId===Ye),Pt=bt&&C[bt.appId];if(!Pt){re=[];break}re.push(Pt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),D("event",L,K||{})}catch(re){Tn.error(re)}})).apply(this,arguments)}function bd(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Lu)&&x.src.includes(D))return x;return null}const or=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Da=new class Ai{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Cd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ca(D){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(D){var C;const{appId:x,apiKey:L}=D,K={method:"GET",headers:Cd(L)},re=Xs.replace("{app-id}",x),be=yield fetch(re,K);if(200!==be.status&&304!==be.status){let Be="";try{const Ye=yield be.json();null!==(C=Ye.error)&&void 0!==C&&C.message&&(Be=Ye.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Be})}return be.json()})).apply(this,arguments)}function Pn(D){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(D,C=Da,x){const{appId:L,apiKey:K,measurementId:re}=D.options;if(!L)throw or.create("no-app-id");if(!K){if(re)return{measurementId:re,appId:L};throw or.create("no-api-key")}const be=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new $u;return setTimeout((0,P.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),Bu({appId:L,apiKey:K,measurementId:re},be,Be,C)})).apply(this,arguments)}function Bu(D,C,x){return eo.apply(this,arguments)}function eo(){return(eo=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},L,K=Da){var re,be;const{appId:Be,measurementId:Ye}=D;try{yield Ta(L,C)}catch(bt){if(Ye)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${null===(re=bt)||void 0===re?void 0:re.message}]`),{appId:Be,measurementId:Ye};throw bt}try{const bt=yield Ca(D);return K.deleteThrottleMetadata(Be),bt}catch(bt){const Pt=bt;if(!ju(Pt)){if(K.deleteThrottleMetadata(Be),Ye)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Be,measurementId:Ye};throw bt}const gt=503===Number(null===(be=Pt?.customData)||void 0===be?void 0:be.httpStatus)?(0,ie.$s)(x,K.intervalMillis,30):(0,ie.$s)(x,K.intervalMillis),_n={throttleEndTimeMillis:Date.now()+gt,backoffCount:x+1};return K.setThrottleMetadata(Be,_n),Tn.debug(`Calling attemptFetch again in ${gt} millis`),Bu(D,_n,L,K)}})).apply(this,arguments)}function Ta(D,C){return new Promise((x,L)=>{const K=Math.max(C-Date.now(),0),re=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(re),L(or.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function ju(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class $u{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ts,Aa;function Ss(){return(Ss=(0,P.Z)(function*(D,C,x,L,K){if(K&&K.global)D("event",x,L);else{const re=yield C;D("event",x,Object.assign(Object.assign({},L),{send_to:re}))}})).apply(this,arguments)}function no(D){Aa=D}function sl(D){Ts=D}function As(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,P.Z)(function*(){var D;if(!(0,ie.hl)())return Tn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return Tn.warn(or.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(D,C,x,L,K,re,be){var Be;const Ye=Pn(D);Ye.then($n=>{x[$n.measurementId]=$n.appId,D.options.measurementId&&$n.measurementId!==D.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${$n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($n=>Tn.error($n)),C.push(Ye);const bt=As().then($n=>{if($n)return L.getId()}),[Pt,gt]=yield Promise.all([Ye,bt]);bd(re)||Uu(re,Pt.measurementId),Aa&&(K("consent","default",Aa),no(void 0)),K("js",new Date);const _n=null!==(Be=be?.config)&&void 0!==Be?Be:{};return _n.origin="firebase",_n.update=!0,null!=gt&&(_n[Id]=gt),K("config",Pt.measurementId,_n),Ts&&(K("set",Ts),sl(void 0)),Pt.measurementId})).apply(this,arguments)}class zu{constructor(C){this.app=C}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},xs=[];const Mo={};let ko,ro,Ro="dataLayer",xa=!1;function Ey(D,C,x){!function ng(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((L,K)=>`(${K+1}) ${L}`).join(" "),x=or.create("invalid-analytics-context",{errorInfo:C});Tn.warn(x.message)}}();const L=D.options.appId;if(!L)throw or.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw or.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[L])throw or.create("already-exists",{id:L});if(!xa){!function Ed(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ro);const{wrappedGtag:re,gtagCore:be}=function Ia(D,C,x,L,K){let re=function(...be){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(re=window[K]),window[K]=function Vu(D,C,x,L){function re(){return(re=(0,P.Z)(function*(be,Be,Ye){try{"event"===be?yield To(D,C,x,Be,Ye):"config"===be?yield gf(D,C,x,L,Be,Ye):"consent"===be?D("consent","update",Ye):D("set",Be)}catch(bt){Tn.error(bt)}})).apply(this,arguments)}return function K(be,Be,Ye){return re.apply(this,arguments)}}(re,D,C,x),{gtagCore:re,wrappedGtag:window[K]}}(Gr,xs,Mo,Ro,"gtag");ro=re,ko=be,xa=!0}return Gr[L]=function Ao(D,C,x,L,K,re,be){return xo.apply(this,arguments)}(D,xs,Mo,C,ko,Ro,x),new zu(D)}function Dy(){return mf.apply(this,arguments)}function mf(){return(mf=(0,P.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const es="@firebase/analytics";!function cr(){(0,oe._registerComponent)(new de.wA(Do,(C,{options:x})=>Ey(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function D(C){try{const x=C.getProvider(Do).getImmediate();return{logEvent:(L,K,re)=>function ur(D,C,x,L){D=(0,ie.m9)(D),function Td(D,C,x,L,K){return Ss.apply(this,arguments)}(ro,Gr[D.app.options.appId],C,x,L).catch(K=>Tn.error(K))}(x,L,K,re)}}catch(x){throw or.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(es,"0.8.4"),(0,oe.registerVersion)(es,"0.8.4","esm2017")}();var Ke=O(4408),xi=O(7565);const Po=new class Ms extends xi.v{}(class yn extends Ke.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,x,L):(C.flush(this),0)}});var No=O(4986),jn=O(8505),ts=O(5363),dt=O(9468);const zr=new m.GfV("7.5.0"),ns="__angularfire_symbol__analyticsIsSupportedValue",si="__angularfire_symbol__analyticsIsSupported",Wu="__angularfire_symbol__remoteConfigIsSupportedValue",Ma="__angularfire_symbol__remoteConfigIsSupported",qr="__angularfire_symbol__messagingIsSupportedValue",Ad="__angularfire_symbol__messagingIsSupported";function ai(D,C,x){if(C){if(1===C.length)return C[0];const re=C.filter(be=>be.app===x);if(1===re.length)return re[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[si]||(globalThis[si]=Dy().then(D=>globalThis[ns]=D).catch(()=>globalThis[ns]=!1)),globalThis[Ad]||(globalThis[Ad]=_d().then(D=>globalThis[qr]=D).catch(()=>globalThis[qr]=!1)),globalThis[Ma]||(globalThis[Ma]=yu().then(D=>globalThis[Wu]=D).catch(()=>globalThis[Wu]=!1));const Tt=(D,C)=>{const x=C?[C]:(0,J.C6)(),L=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(be=>{L.includes(be)||L.push(be)})}),L};function ka(){}class Yn{constructor(C,x=Po){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,L){const K=this.zone;return this.delegate.schedule(function(be){K.runGuarded(()=>{C.apply(this,[be])})},x,L)}}class nt{constructor(C){this.zone=C,this.task=null}call(C,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ka,{},ka,ka)),x.pipe((0,jn.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lo=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Yn(Zone.current)),this.insideAngular=x.run(()=>new Yn(Zone.current,No.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function _t(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Uo(D){return D.pipe((0,ts.Q)(_t().outsideAngular))}function Mi(D){return _t(),function xd(D){return function(x){return(x=x.lift(new nt(D.ngZone))).pipe((0,dt.R)(D.outsideAngular),(0,ts.Q)(D.insideAngular))}}(_t())(D)}},2090:(ut,Se,O)=>{O.d(Se,{$s:()=>Je,BH:()=>Bt,G6:()=>Ie,L:()=>he,LL:()=>Wt,Pz:()=>Qt,Sg:()=>We,UG:()=>we,US:()=>de,ZB:()=>j,ZR:()=>gn,aH:()=>ct,b$:()=>pe,eu:()=>je,hl:()=>Ve,jU:()=>tt,m9:()=>Ut,ne:()=>Ln,pd:()=>bi,r3:()=>hi,ru:()=>me,tV:()=>fe,uI:()=>Me,vZ:()=>Ze,w1:()=>st,xO:()=>zn,xb:()=>ei,z$:()=>Le,zI:()=>V,zd:()=>ti});const oe=function($){const U=[];let W=0;for(let ve=0;ve<$.length;ve++){let Y=$.charCodeAt(ve);Y<128?U[W++]=Y:Y<2048?(U[W++]=Y>>6|192,U[W++]=63&Y|128):55296==(64512&Y)&&ve+1<$.length&&56320==(64512&$.charCodeAt(ve+1))?(Y=65536+((1023&Y)<<10)+(1023&$.charCodeAt(++ve)),U[W++]=Y>>18|240,U[W++]=Y>>12&63|128,U[W++]=Y>>6&63|128,U[W++]=63&Y|128):(U[W++]=Y>>12|224,U[W++]=Y>>6&63|128,U[W++]=63&Y|128)}return U},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,U){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Y=0;Y<$.length;Y+=3){const Ge=$[Y],lt=Y+1<$.length,Zt=lt?$[Y+1]:0,ln=Y+2<$.length,Ht=ln?$[Y+2]:0;let Vt=(15&Zt)<<2|Ht>>6,ir=63&Ht;ln||(ir=64,lt||(Vt=64)),ve.push(W[Ge>>2],W[(3&Ge)<<4|Zt>>4],W[Vt],W[ir])}return ve.join("")},encodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa($):this.encodeByteArray(oe($),U)},decodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?atob($):function($){const U=[];let W=0,ve=0;for(;W<$.length;){const Y=$[W++];if(Y<128)U[ve++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ge=$[W++];U[ve++]=String.fromCharCode((31&Y)<<6|63&Ge)}else if(Y>239&&Y<365){const ln=((7&Y)<<18|(63&$[W++])<<12|(63&$[W++])<<6|63&$[W++])-65536;U[ve++]=String.fromCharCode(55296+(ln>>10)),U[ve++]=String.fromCharCode(56320+(1023&ln))}else{const Ge=$[W++],lt=$[W++];U[ve++]=String.fromCharCode((15&Y)<<12|(63&Ge)<<6|63&lt)}}return U.join("")}(this.decodeStringToByteArray($,U))},decodeStringToByteArray($,U){this.init_();const W=U?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Y=0;Y<$.length;){const Ge=W[$.charAt(Y++)],Zt=Y<$.length?W[$.charAt(Y)]:0;++Y;const Ht=Y<$.length?W[$.charAt(Y)]:64;++Y;const He=Y<$.length?W[$.charAt(Y)]:64;if(++Y,null==Ge||null==Zt||null==Ht||null==He)throw Error();ve.push(Ge<<2|Zt>>4),64!==Ht&&(ve.push(Zt<<4&240|Ht>>2),64!==He&&ve.push(Ht<<6&192|He))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},he=function($){return function($){const U=oe($);return de.encodeByteArray(U,!0)}($).replace(/\./g,"")},fe=function($){try{return de.decodeString($,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function j($,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return U}for(const W in U)!U.hasOwnProperty(W)||!Z(W)||($[W]=j($[W],U[W]));return $}function Z($){return"__proto__"!==$}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function me(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){const $=Le();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){return"object"==typeof indexedDB}function je(){return new Promise(($,U)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ve);Y.onsuccess=()=>{Y.result.close(),W||self.indexedDB.deleteDatabase(ve),$(!0)},Y.onupgradeneeded=()=>{W=!1},Y.onerror=()=>{var Ge;U((null===(Ge=Y.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(W){U(W)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=$&&fe($[1]);return U&&JSON.parse(U)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ct=()=>{var $;return null===($=te())||void 0===$?void 0:$.config},Qt=$=>{var U;return null===(U=te())||void 0===U?void 0:U[`_${$}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,W)=>{this.resolve=U,this.reject=W})}wrapCallback(U){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(W):U(W,ve))}}}function We($,U){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=U||"demo-project",Y=$.iat||0,Ge=$.sub||$.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Y,exp:Y+3600,auth_time:Y,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},$);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(lt)),""].join(".")}class gn extends Error{constructor(U,W,ve){super(W),this.code=U,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(U,W,ve){this.service=U,this.serviceName=W,this.errors=ve}create(U,...W){const ve=W[0]||{},Y=`${this.service}/${U}`,Ge=this.errors[U],lt=Ge?function Xt($,U){return $.replace(Rr,(W,ve)=>{const Y=U[ve];return null!=Y?String(Y):`<${ve}?>`})}(Ge,ve):"Error";return new gn(Y,`${this.serviceName}: ${lt} (${Y}).`,ve)}}const Rr=/\{\$([^}]+)}/g;function hi($,U){return Object.prototype.hasOwnProperty.call($,U)}function ei($){for(const U in $)if(Object.prototype.hasOwnProperty.call($,U))return!1;return!0}function Ze($,U){if($===U)return!0;const W=Object.keys($),ve=Object.keys(U);for(const Y of W){if(!ve.includes(Y))return!1;const Ge=$[Y],lt=U[Y];if(Dr(Ge)&&Dr(lt)){if(!Ze(Ge,lt))return!1}else if(Ge!==lt)return!1}for(const Y of ve)if(!W.includes(Y))return!1;return!0}function Dr($){return null!==$&&"object"==typeof $}function zn($){const U=[];for(const[W,ve]of Object.entries($))Array.isArray(ve)?ve.forEach(Y=>{U.push(encodeURIComponent(W)+"="+encodeURIComponent(Y))}):U.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return U.length?"&"+U.join("&"):""}function ti($){const U={};return $.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Y,Ge]=ve.split("=");U[decodeURIComponent(Y)]=decodeURIComponent(Ge)}}),U}function bi($){const U=$.indexOf("?");if(!U)return"";const W=$.indexOf("#",U);return $.substring(U,W>0?W:void 0)}function Ln($,U){const W=new dn($,U);return W.subscribe.bind(W)}class dn{constructor(U,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{U(this)}).catch(ve=>{this.error(ve)})}next(U){this.forEachObserver(W=>{W.next(U)})}error(U){this.forEachObserver(W=>{W.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,W,ve){let Y;if(void 0===U&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");Y=function ot($,U){if("object"!=typeof $||null===$)return!1;for(const W of U)if(W in $&&"function"==typeof $[W])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:W,complete:ve},void 0===Y.next&&(Y.next=rn),void 0===Y.error&&(Y.error=rn),void 0===Y.complete&&(Y.complete=rn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ge}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,U)}sendOne(U,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{W(this.observers[U])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function Je($,U=1e3,W=2){const ve=U*Math.pow(W,$),Y=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Y)}function Ut($){return $&&$._delegate?$._delegate:$}},3459:(ut,Se,O)=>{var m=O(4650);let J=null;function P(){return J}const le=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function fe(){return(0,m.LFG)(j)}()},providedIn:"platform"}),n})();const B=new m.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Le(){return new j((0,m.LFG)(le))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Xe)},providedIn:"root"}),n})();const pe=new m.OlP("appBaseHref");let Xe=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+tt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+tt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+tt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+tt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ve(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ye(){return new xe((0,m.LFG)(me))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}let sn=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class la{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new la(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Is(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Is(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Is(n,e){n.context.$implicit=e.item}let Bn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Fc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Fc{constructor(){this.$implicit=null,this.ngIf=null}}function sr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}const Es=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let af=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function Zn(n,e){return new m.vHH(2100,!1)}();return t.replace(Es,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),fa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function gr(n){return"server"===n}let vu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new hf((0,m.LFG)(le),window)}),n})();class hf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ri(this.window.history)||ri(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ri(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ks extends class yd extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){J||(J=n)}(new Ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pu(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}();return null==t?null:function Hr(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function gu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Kn,Ys=null;const hn=new m.OlP("TRANSITION_ID"),el=[{provide:m.ip1,useFactory:function _d(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[hn,le,m.zs3],multi:!0}];let tl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=new m.OlP("EventManagerPlugins");let vd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Nu),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ou{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Qs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),bo=(()=>{class n extends Qs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(wd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wd))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function wd(n){P().remove(n)}const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Id=/%COMP%/g;function Uu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Uu(n,o,t):(o=o.replace(Id,n),t.push(o))}return t}function Ed(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Co=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new bd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Dd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Uu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vd),m.LFG(bo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Do[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ia(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ia(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Do[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Do[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ed(r)):this.eventManager.addEventListener(e,t,Ed(r))}}function Ia(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bd extends To{constructor(e,t,r,o){super(e),this.component=r;const u=Uu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tn(n){return"_ngcontent-%COMP%".replace(Id,n)}(o+"-"+r.id),this.hostAttr=function Fu(n){return"_nghost-%COMP%".replace(Id,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dd extends To{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Uu(o.id,o.styles,[]);for(let l=0;l<u.length;l++){const g=document.createElement("style");g.textContent=u[l],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=["alt","control","meta","shift"],ba={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Da=(()=>{class n extends Ou{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Ea.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let o=ba[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ea.forEach(l=>{l!==o&&(0,Ai[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Bu(){Ks.makeCurrent()},multi:!0},{provide:le,useFactory:function Ta(){return(0,m.RDi)(document),document},deps:[]}]),Ts=new m.OlP(""),Td=[{provide:m.rWj,useClass:class pf{addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const g=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Ss=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function eo(){return new m.qLn},deps:[]},{provide:Nu,useClass:or,multi:!0,deps:[le,m.R0b,m.Lbi]},{provide:Nu,useClass:Da,multi:!0,deps:[le]},{provide:Co,useClass:Co,deps:[vd,bo,m.AFp]},{provide:m.FYo,useExisting:Co},{provide:Qs,useExisting:bo},{provide:bo,useClass:bo,deps:[le]},{provide:vd,useClass:vd,deps:[Nu,m.R0b]},{provide:class Io{},useClass:tl,deps:[]},[]];let rl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:hn,useExisting:m.AFp},el]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ts,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Ss,...Td],imports:[fa,m.hGG]}),n})(),Ji=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function So(){return new Ji((0,m.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ur=O(2011),io=O(4986),es=O(9751),Jt=O(8996),cr=O(7669);function Ke(...n){const e=(0,cr.yG)(n);return(0,Jt.D)(n,e)}var yn=O(5813),xi=O(8189);function Po(...n){return function Ms(){return(0,xi.J)(1)}()((0,Jt.D)(n,(0,cr.yG)(n)))}var Sr=O(4482);function No(...n){const e=(0,cr.yG)(n);return(0,Sr.e)((t,r)=>{(e?Po(n,t,e):Po(n,t)).subscribe(r)})}var jn=O(5403);function ts(){return(0,Sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,jn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var dt=O(4004);function zr(n,e,t,r,o){return(u,l)=>{let g=t,v=e,b=0;u.subscribe((0,jn.x)(l,A=>{const M=b++;v=g?n(v,A,M):(g=!0,A),r&&l.next(v)},o&&(()=>{g&&l.next(v),l.complete()})))}}function ns(n,e){return(0,Sr.e)(zr(n,e,arguments.length>=2,!0))}var si=O(4671);function Ma(n,e){return n===e}function qr(n,e){return(0,Sr.e)((t,r)=>{let o=0;t.subscribe((0,jn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}O(1277);var nt,Oo=O(3942),ae=O(5861),oi=O(9681),Ra=O(4859),ai=O(1877),Tt=O(2090),ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={},Lo=Lo||{},_t=ka||self;function Fo(){}function ui(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Uo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mi="closure_uid_"+(1e9*Math.random()>>>0),xd=0;function Nn(n,e,t){return n.call.apply(n.bind,arguments)}function yf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function D(n,e,t){return(D=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nn:yf).apply(null,arguments)}function C(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function x(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[o].apply(r,l)}}function L(){this.s=this.s,this.o=this.o}L.prototype.s=!1,L.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Vo(n){Object.prototype.hasOwnProperty.call(n,Mi)&&n[Mi]||(n[Mi]=++xd)}(this)},L.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const re=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function be(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Be(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ui(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function Ye(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_t.addEventListener("test",Fo,e),_t.removeEventListener("test",Fo,e)}catch{}return n}();function Pt(n){return/^[\s\xa0]*$/.test(n)}var gt=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _n(n,e){return n<e?-1:n>e?1:0}function $n(){var n=_t.navigator;return n&&(n=n.userAgent)?n:""}function Ar(n){return-1!=$n().indexOf(n)}function Rs(n){return Rs[" "](n),n}Rs[" "]=Fo;var Rd,n,Bo=Ar("Opera"),Wr=Ar("Trident")||Ar("MSIE"),ks=Ar("Edge"),Ps=ks||Wr,Ns=Ar("Gecko")&&!(-1!=$n().toLowerCase().indexOf("webkit")&&!Ar("Edge"))&&!(Ar("Trident")||Ar("MSIE"))&&!Ar("Edge"),Md=-1!=$n().toLowerCase().indexOf("webkit")&&!Ar("Edge");function _f(){var n=_t.document;return n?n.documentMode:void 0}e:{var vf="",kd=(n=$n(),Ns?/rv:([^\);]+)(\)|;)/.exec(n):ks?/Edge\/([\d\.]+)/.exec(n):Wr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Md?/WebKit\/(\S+)/.exec(n):Bo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kd&&(vf=kd?kd[1]:""),Wr){var Zu=_f();if(null!=Zu&&Zu>parseFloat(vf)){Rd=String(Zu);break e}}Rd=vf}var al={};var ig=_t.document&&Wr&&(_f()||parseInt(Rd,10))||void 0;function Nd(n,e){if(Ye.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ns){e:{try{Rs(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nd.X.h.call(this)}}x(Nd,Ye);var xy={2:"touch",3:"pen",4:"mouse"};Nd.prototype.h=function(){Nd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ul="closure_listenable_"+(1e6*Math.random()|0),wf=0;function sg(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++wf,this.ba=this.ea=!1}function If(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function cl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function My(n){const e={};for(const t in n)e[t]=n[t];return e}const Ry="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ky(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Ry.length;u++)t=Ry[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Od(n){this.src=n,this.g={},this.h=0}function og(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=re(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(If(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ef(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Od.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Ef(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new sg(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var Ld="closure_lm_"+(1e6*Math.random()|0),ll={};function dl(n,e,t,r,o){if(r&&r.once)return rs(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)dl(n,e[u],t,r,o);return null}return t=Tf(t),n&&n[ul]?n.N(e,t,Uo(r)?!!r.capture:!!r,o):bf(n,e,t,!1,r,o)}function bf(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Uo(o)?!!o.capture:!!o,g=Ku(n);if(g||(n[Ld]=g=new Od(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function Fd(){const e=ag;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)bt||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ud(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rs(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)rs(n,e[u],t,r,o);return null}return t=Tf(t),n&&n[ul]?n.O(e,t,Uo(r)?!!r.capture:!!r,o):bf(n,e,t,!0,r,o)}function Df(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Df(n,e[u],t,r,o);else r=Uo(r)?!!r.capture:!!r,t=Tf(t),n&&n[ul]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ef(u=n.g[e],t,r,o))&&(If(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ku(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ef(e,t,r,o)),(t=-1<n?e[n]:null)&&Cf(t))}function Cf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ul])og(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ud(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ku(e))?(og(t,n),0==t.h&&(t.src=null,e[Ld]=null)):If(n)}}}function Ud(n){return n in ll?ll[n]:ll[n]="on"+n}function ag(n,e){if(n.ba)n=!0;else{e=new Nd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Cf(n),n=t.call(r,e)}return n}function Ku(n){return(n=n[Ld])instanceof Od?n:null}var Vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tf(n){return"function"==typeof n?n:(n[Vd]||(n[Vd]=function(e){return n.handleEvent(e)}),n[Vd])}function mr(){L.call(this),this.i=new Od(this),this.P=this,this.I=null}function yr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ye(e,n);else if(e instanceof Ye)e.target=e.target||n;else{var o=e;ky(e=new Ye(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Bd(l,r,!0,e)&&o}if(o=Bd(l=e.g=n,r,!0,e)&&o,o=Bd(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Bd(l=e.g=t[u],r,!1,e)&&o}function Bd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var g=l.listener,v=l.ha||l.src;l.ea&&og(n.i,l),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}x(mr,L),mr.prototype[ul]=!0,mr.prototype.removeEventListener=function(n,e,t,r){Df(this,n,e,t,r)},mr.prototype.M=function(){if(mr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)If(t[r]);delete n.g[e],n.h--}}this.I=null},mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Sf=_t.JSON.stringify;function Or(){var n=xf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qu,ug=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new oo,n=>n.reset());class oo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lr(n){_t.setTimeout(()=>{throw n},0)}function Yu(n,e){Qu||function Py(){var n=_t.Promise.resolve(void 0);Qu=function(){n.then(Ny)}}(),hl||(Qu(),hl=!0),xf.add(n,e)}var hl=!1,xf=new class Af{constructor(){this.h=this.g=null}add(e,t){const r=ug.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ny(){for(var n;n=Or();){try{n.h.call(n.g)}catch(t){Lr(t)}var e=ug;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hl=!1}function Pa(n,e){mr.call(this),this.h=n||1,this.g=e||_t,this.j=D(this.lb,this),this.l=Date.now()}function Mf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function jd(n,e,t){if("function"==typeof n)t&&(n=D(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=D(n.handleEvent,n)}return 2147483647<Number(e)?-1:_t.setTimeout(n,e||0)}function $d(n){n.g=jd(()=>{n.g=null,n.i&&(n.i=!1,$d(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}x(Pa,mr),(nt=Pa.prototype).ca=!1,nt.R=null,nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),yr(this,"tick"),this.ca&&(Mf(this),this.start()))}},nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Pa.X.M.call(this),Mf(this),delete this.g};class Oy extends L{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$d(this)}M(){super.M(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(n){L.call(this),this.h=n,this.g={}}x(Na,L);var Hd=[];function cg(n,e,t,r){Array.isArray(t)||(t&&(Hd[0]=t.toString()),t=Hd);for(var o=0;o<t.length;o++){var u=dl(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Rf(n){cl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Cf(e)},n),n.g={}}function fl(){this.g=!0}function Xu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gl(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Sf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Na.prototype.M=function(){Na.X.M.call(this),Rf(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fl.prototype.Aa=function(){this.g=!1},fl.prototype.info=function(){};var jo={},Fy=null;function Ri(){return Fy=Fy||new mr}function Gd(n){Ye.call(this,jo.Pa,n)}function Ju(n){const e=Ri();yr(e,new Gd(e))}function lg(n,e){Ye.call(this,jo.STAT_EVENT,n),this.stat=e}function _r(n){const e=Ri();yr(e,new lg(e,n))}function dg(n,e){Ye.call(this,jo.Qa,n),this.size=e}function ml(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _t.setTimeout(function(){n()},e)}jo.Pa="serverreachability",x(Gd,Ye),jo.STAT_EVENT="statevent",x(lg,Ye),jo.Qa="timingevent",x(dg,Ye);var zd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},hg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function La(){}function qd(){}La.prototype.h=null;var kf,Fa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Wd(){Ye.call(this,"d")}function yl(){Ye.call(this,"c")}function _l(){}function $o(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Na(this),this.O=Ho,this.T=new Pa(n=Ps?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}x(Wd,Ye),x(yl,Ye),x(_l,La),_l.prototype.g=function(){return new XMLHttpRequest},_l.prototype.i=function(){return{}},kf=new _l;var Ho=45e3,Zd={},Ua={};function Pf(n,e,t){n.K=1,n.v=zo(ki(e)),n.s=t,n.P=!0,mi(n,null)}function mi(n,e){n.F=Date.now(),Go(n),n.A=ki(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),k(t.i,"t",r),n.C=0,t=n.l.H,n.h=new vl,n.g=Zy(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Oy(D(n.La,n,n.g),n.N)),cg(n.S,n.g,"readystatechange",n.ib),e=n.H?My(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ju(),function Oa(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),v=0;v<g.length;v++){var b=g[v].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");l=2<=M.length&&"type"==M[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ao(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Nf(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=pg(n,t),o==Ua){4==e&&(n.o=4,_r(14),r=!1),Xu(n.j,n.m,null,"[Incomplete Response]");break}if(o==Zd){n.o=4,_r(15),Xu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xu(n.j,n.m,o,null),yi(n,o)}ao(n)&&o!=Ua&&o!=Zd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_r(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wy(e),e.K=!0,_r(11))):(Xu(n.j,n.m,t,"[Invalid Chunked Response]"),Os(n),Va(n))}function pg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ua:(t=Number(e.substring(t,r)),isNaN(t)?Zd:(r+=1)+t>e.length?Ua:(e=e.substr(r,t),n.C=r+t,e))}function Go(n){n.V=Date.now()+n.O,wl(n,n.O)}function wl(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ml(D(n.gb,n),e)}function ec(n){n.B&&(_t.clearTimeout(n.B),n.B=null)}function Va(n){0==n.l.G||n.I||uw(n.l,n)}function Os(n){ec(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mf(n.T),Rf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function yi(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Jn(t.h,n)))if(!n.J&&Jn(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;bg(t),vg(t)}qy(t),_r(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=ml(D(t.cb,t),6e3));if(1>=Xn(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else eh(t,11)}else if((n.J||t.g==n)&&bg(t),!Pt(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=b[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.J=r=1.5*F,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const Q=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.h;u.g||-1==Q.indexOf("spdy")&&-1==Q.indexOf("quic")&&-1==Q.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Ls(u,u.h),u.h=null))}if(r.D){const Ae=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.za=Ae,an(r.F,r.D,Ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Dg(r,r.H?r.ka:null,r.V),l.J){Vf(r.h,l);var g=l,v=r.J;v&&g.setTimeout(v),g.B&&(ec(g),Go(g)),r.g=l}else zy(r);0<t.i.length&&Ig(t)}else"stop"!=b[0]&&"close"!=b[0]||eh(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?eh(t,7):Jd(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Ju()}catch{}}function Kd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ui(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Lf(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ui(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Of(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ui(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(nt=$o.prototype).setTimeout=function(n){this.O=n},nt.ib=function(n){n=n.target;const e=this.L;e&&3==Wo(n)?e.l():this.La(n)},nt.La=function(n){try{if(n==this.g)e:{const A=Wo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Ps||this.g&&(this.h.h||this.g.fa()||iw(this.g)))){this.I||4!=A||7==e||Ju(),ec(this);var t=this.g.aa();this.Y=t;t:if(ao(this)){var r=iw(this.g);n="";var o=r.length,u=4==Wo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),Va(this);var l="";break t}this.h.i=new _t.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Ly(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pt(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,_r(12),Os(this),Va(this);break e}Xu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yi(this,t)}this.P?(Nf(this,A,l),Ps&&this.i&&3==A&&(cg(this.S,this.T,"tick",this.hb),this.T.start())):(Xu(this.j,this.m,l,null),yi(this,l)),4==A&&Os(this),this.i&&!this.I&&(4==A?uw(this.l,this):(this.i=!1,Go(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,_r(12)):(this.o=0,_r(13)),Os(this),Va(this)}}}catch{}},nt.hb=function(){if(this.g){var n=Wo(this.g),e=this.g.fa();this.C<e.length&&(ec(this),Nf(this,n,e),this.i&&4!=n&&Go(this))}},nt.cancel=function(){this.I=!0,Os(this)},nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function pl(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ju(),_r(17)),Os(this),this.o=2,Va(this)):wl(this,this.V-n)};var Yd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Qn){this.h=void 0!==e?e:n.h,nc(this,n.j),this.s=n.s,this.g=n.g,Qd(this,n.m),this.l=n.l,e=n.i;var t=new h;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),is(this,t),this.o=n.o}else n&&(t=String(n).match(Yd))?(this.h=!!e,nc(this,t[1]||"",!0),this.s=qo(t[2]||""),this.g=qo(t[3]||"",!0),Qd(this,t[4]),this.l=qo(t[5]||"",!0),is(this,t[6]||"",!0),this.o=qo(t[7]||"")):(this.h=!!e,this.i=new h(null,this.h))}function ki(n){return new Qn(n)}function nc(n,e,t){n.j=t?qo(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function is(n,e,t){e instanceof h?(n.i=e,function ue(n,e){e&&!n.j&&(p(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(w(this,r),k(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ss(e,Uf)),n.i=new h(e,n.h))}function an(n,e,t){n.i.set(e,t)}function zo(n){return an(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qo(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ss(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ff),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ff(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ss(e,gg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ss(e,gg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ss(t,"/"==t.charAt(0)?Uy:nw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ss(t,y)),n.join("")};var gg=/[#\/\?@]/g,nw=/[#\?:]/g,Uy=/[#\?]/g,Uf=/[#\?@]/g,y=/#/g;function h(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function p(n){n.g||(n.g=new Map,n.h=0,n.i&&function tc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w(n,e){p(n),e=G(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function S(n,e){return p(n),e=G(n,e),n.g.has(e)}function k(n,e,t){w(n,e),0<t.length&&(n.i=null,n.g.set(G(n,e),be(t)),n.h+=t.length)}function G(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Qe(n){this.l=n||Dt,n=_t.PerformanceNavigationTiming?0<(n=_t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_t.g&&_t.g.Ga&&_t.g.Ga()&&_t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=h.prototype).add=function(n,e){p(this),this.i=null,n=G(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){p(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},nt.oa=function(){p(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},nt.W=function(n){p(this);let e=[];if("string"==typeof n)S(this,n)&&(e=e.concat(this.g.get(G(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return p(this),this.i=null,S(this,n=G(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var Dt=10;function mt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Xn(n){return n.h?1:n.g?n.g.size:0}function Jn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ls(n,e){n.g?n.g.add(e):n.h=e}function Vf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Bf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return be(n.i)}function jf(){}function Vy(){this.g=new jf}function mg(n,e,t){const r=t||"";try{Kd(n,function(o,u){let l=o;Uo(o)&&(l=Sf(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function rc(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Ba(n){this.l=n.ac||null,this.j=n.jb||!1}function Il(n,e){mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qe.prototype.cancel=function(){if(this.i=Bf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jf.prototype.stringify=function(n){return _t.JSON.stringify(n,void 0)},jf.prototype.parse=function(n){return _t.JSON.parse(n,void 0)},x(Ba,La),Ba.prototype.g=function(){return new Il(this.l,this.j)},Ba.prototype.i=function(n){return function(){return n}}({}),x(Il,mr);var $f=0;function Xd(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ja(n){n.readyState=4,n.l=null,n.j=null,n.A=null,os(n)}function os(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=Il.prototype).open=function(n,e){if(this.readyState!=$f)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,os(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||_t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ja(this)),this.readyState=$f},nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof _t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xd(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ja(this):os(this),3==this.readyState&&Xd(this)}},nt.Va=function(n){this.g&&(this.response=this.responseText=n,ja(this))},nt.Ua=function(n){this.g&&(this.response=n,ja(this))},nt.ga=function(){this.g&&ja(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Hf=_t.JSON.parse;function Hn(n){mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jy,this.K=this.L=!1}x(Hn,mr);var jy="",rw=/^https?$/i,HT=["POST","PUT"];function _b(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,yg(n),$y(n)}function yg(n){n.D||(n.D=!0,yr(n,"complete"),yr(n,"error"))}function _g(n){if(n.h&&typeof Lo<"u"&&(!n.C[1]||4!=Wo(n)||2!=n.aa()))if(n.v&&4==Wo(n))jd(n.Ha,0,n);else if(yr(n,"readystatechange"),4==Wo(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Yd)[1]||null;if(!o&&_t.self&&_t.self.location){var u=_t.self.location.protocol;o=u.substr(0,u.length-1)}r=!rw.test(o?o.toLowerCase():"")}t=r}if(t)yr(n,"complete"),yr(n,"success");else{n.m=6;try{var l=2<Wo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",yg(n)}}finally{$y(n)}}}function $y(n,e){if(n.g){vb(n);const t=n.g,r=n.C[0]?Fo:null;n.g=null,n.C=null,e||yr(n,"ready");try{t.onreadystatechange=r}catch{}}}function vb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(_t.clearTimeout(n.A),n.A=null)}function Wo(n){return n.g?n.g.readyState:0}function iw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sw(n){let e="";return cl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=sw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):an(n,e,t))}function Gf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gy(n){this.Ca=0,this.i=[],this.j=new fl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Gf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Gf("baseRetryDelayMs",5e3,n),this.bb=Gf("retryDelaySeedMs",1e4,n),this.$a=Gf("forwardChannelMaxRetries",2,n),this.ta=Gf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Qe(n&&n.concurrentRequestLimit),this.Fa=new Vy,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Jd(n){if(wg(n),3==n.G){var e=n.U++,t=ki(n.F);an(t,"SID",n.I),an(t,"RID",e),an(t,"TYPE","terminate"),zf(n,t),(e=new $o(n,n.j,e,void 0)).K=2,e.v=zo(ki(t)),t=!1,_t.navigator&&_t.navigator.sendBeacon&&(t=_t.navigator.sendBeacon(e.v.toString(),"")),!t&&_t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Zy(e.l,null),e.g.da(e.v)),e.F=Date.now(),Go(e)}th(n)}function vg(n){n.g&&(Wy(n),n.g.cancel(),n.g=null)}function wg(n){vg(n),n.u&&(_t.clearTimeout(n.u),n.u=null),bg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&_t.clearTimeout(n.m),n.m=null)}function Ig(n){mt(n.h)||n.m||(n.m=!0,Yu(n.Ja,n),n.C=0)}function ow(n,e){var t;t=e?e.m:n.U++;const r=ki(n.F);an(r,"SID",n.I),an(r,"RID",t),an(r,"AID",n.T),zf(n,r),n.o&&n.s&&Hy(r,n.o,n.s),t=new $o(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Eg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ls(n.h,t),Pf(t,r,e)}function zf(n,e){n.ia&&cl(n.ia,function(t,r){an(e,r,t)}),n.l&&Kd({},function(t,r){an(e,r,t)})}function Eg(n,e,t){t=Math.min(n.i.length,t);var r=n.l?D(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let b=o[v].h;const A=o[v].g;if(b-=u,0>b)u=Math.max(0,o[v].h-100),g=!1;else try{mg(A,l,"req"+b+"_")}catch{r&&r(A)}}if(g){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function zy(n){n.g||n.u||(n.Z=1,Yu(n.Ia,n),n.A=0)}function qy(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ml(D(n.Ia,n),wb(n,n.A)),n.A++,0))}function Wy(n){null!=n.B&&(_t.clearTimeout(n.B),n.B=null)}function aw(n){n.g=new $o(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ki(n.sa);an(e,"RID","rpc"),an(e,"SID",n.I),an(e,"CI",n.L?"0":"1"),an(e,"AID",n.T),an(e,"TYPE","xmlhttp"),zf(n,e),n.o&&n.s&&Hy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=zo(ki(e)),t.s=null,t.P=!0,mi(t,n)}function bg(n){null!=n.v&&(_t.clearTimeout(n.v),n.v=null)}function uw(n,e){var t=null;if(n.g==e){bg(n),Wy(n),n.g=null;var r=2}else{if(!Jn(n.h,e))return;t=e.D,Vf(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;yr(r=Ri(),new dg(r,t)),Ig(n)}else zy(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function vr(n,e){return!(Xn(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=ml(D(n.Ja,n,e),wb(n,n.C)),n.C++,0)))}(n,e)||2==r&&qy(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:eh(n,5);break;case 4:eh(n,10);break;case 3:eh(n,6);break;default:eh(n,2)}}function wb(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function eh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=D(n.kb,n);t||(t=new Qn("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||nc(t,"https"),zo(t)),function By(n,e){const t=new fl;if(_t.Image){const r=new Image;r.onload=C(rc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=C(rc,t,r,"TestLoadImage: error",!1,e),r.onabort=C(rc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=C(rc,t,r,"TestLoadImage: timeout",!1,e),_t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _r(2);n.G=0,n.l&&n.l.va(e),th(n),wg(n)}function th(n){if(n.G=0,n.la=[],n.l){const e=Bf(n.h);(0!=e.length||0!=n.i.length)&&(Be(n.la,e),Be(n.la,n.i),n.h.i.length=0,be(n.i),n.i.length=0),n.l.ua()}}function Dg(n,e,t){var r=t instanceof Qn?ki(t):new Qn(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Qd(r,r.m);else{var o=_t.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Qn(null,void 0);r&&nc(u,r),e&&(u.g=e),o&&Qd(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&an(r,t,e),an(r,"VER",n.ma),zf(n,r),r}function Zy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(t&&n.Da&&!n.ra?new Ba({jb:!0}):n.ra)).Ka(n.H),e}function Ky(){}function qf(){if(Wr&&!(10<=Number(ig)))throw Error("Environmental error: no available transport.")}function as(n,e){mr.call(this),this.g=new Gy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Pt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pt(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ic(this)}function Yy(n){Wd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qy(){yl.call(this),this.status=1}function ic(n){this.g=n}(nt=Hn.prototype).Ka=function(n){this.L=n},nt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kf.g(),this.C=function fg(n){return n.h||(n.h=n.i())}(this.u?this.u:kf),this.g.onreadystatechange=D(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void _b(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=_t.FormData&&n instanceof _t.FormData,!(0<=re(HT,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vb(this),0<this.B&&((this.K=function GT(n){return Wr&&function Sy(){return function so(n){var e=al;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=gt(String(Rd)).split("."),t=gt("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=_n(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||_n(0==o[2].length,0==u[2].length)||_n(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=D(this.qa,this)):this.A=jd(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){_b(this,u)}},nt.qa=function(){typeof Lo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,yr(this,"complete"),yr(this,"abort"),$y(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$y(this,!0)),Hn.X.M.call(this)},nt.Ha=function(){this.s||(this.F||this.v||this.l?_g(this):this.fb())},nt.fb=function(){_g(this)},nt.aa=function(){try{return 2<Wo(this)?this.g.status:-1}catch{return-1}},nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Hf(e)}},nt.Ea=function(){return this.m},nt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Gy.prototype).ma=8,nt.G=1,nt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new $o(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=My(u),ky(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Eg(this,o,e),an(t=ki(this.F),"RID",n),an(t,"CVER",22),this.D&&an(t,"X-HTTP-Session-Id",this.D),zf(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(sw(u)))+"&"+e:this.o&&Hy(t,this.o,u)),Ls(this.h,o),this.Ya&&an(t,"TYPE","init"),this.O?(an(t,"$req",e),an(t,"SID","null"),o.Z=!0,Pf(o,t,null)):Pf(o,t,e),this.G=2}}else 3==this.G&&(n?ow(this,n):0==this.i.length||mt(this.h)||ow(this))},nt.Ia=function(){if(this.u=null,aw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ml(D(this.eb,this),n)}},nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_r(10),vg(this),aw(this))},nt.cb=function(){null!=this.v&&(this.v=null,vg(this),qy(this),_r(19))},nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),_r(2)):(this.j.info("Failed to ping google.com"),_r(1))},(nt=Ky.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Ra=function(){},qf.prototype.g=function(n,e){return new as(n,e)},x(as,mr),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;_r(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Dg(n,null,n.V),Ig(n)},as.prototype.close=function(){Jd(this.g)},as.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Sf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ig(e)},as.prototype.M=function(){this.g.l=null,delete this.j,Jd(this.g),delete this.g,as.X.M.call(this)},x(Yy,Wd),x(Qy,yl),x(ic,Ky),ic.prototype.xa=function(){yr(this.g,"a")},ic.prototype.wa=function(n){yr(this.g,new Yy(n))},ic.prototype.va=function(n){yr(this.g,new Qy)},ic.prototype.ua=function(){yr(this.g,"b")},qf.prototype.createWebChannel=qf.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,zd.NO_ERROR=0,zd.TIMEOUT=8,zd.HTTP_ERROR=6,hg.COMPLETE="complete",qd.EventType=Fa,Fa.OPEN="a",Fa.CLOSE="b",Fa.ERROR="c",Fa.MESSAGE="d",mr.prototype.listen=mr.prototype.N,Hn.prototype.listenOnce=Hn.prototype.O,Hn.prototype.getLastError=Hn.prototype.Oa,Hn.prototype.getLastErrorCode=Hn.prototype.Ea,Hn.prototype.getStatus=Hn.prototype.aa,Hn.prototype.getResponseJson=Hn.prototype.Sa,Hn.prototype.getResponseText=Hn.prototype.fa,Hn.prototype.send=Hn.prototype.da,Hn.prototype.setWithCredentials=Hn.prototype.Ka;var zT=Yn.createWebChannelTransport=function(){return new qf},Ib=Yn.getStatEventTarget=function(){return Ri()},Wf=Yn.ErrorCode=zd,cw=Yn.EventType=hg,lw=Yn.Event=jo,sc=Yn.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Eb=Yn.FetchXmlHttpFactory=Ba,nh=Yn.WebChannel=qd,Cg=Yn.XhrIo=Hn;const dw="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let $a="9.14.0";const Pi=new ai.Yd("@firebase/firestore");function Tg(){return Pi.logLevel}function ke(n,...e){if(Pi.logLevel<=ai.in.DEBUG){const t=e.map(ac);Pi.debug(`Firestore (${$a}): ${n}`,...t)}}function lr(n,...e){if(Pi.logLevel<=ai.in.ERROR){const t=e.map(ac);Pi.error(`Firestore (${$a}): ${n}`,...t)}}function oc(n,...e){if(Pi.logLevel<=ai.in.WARN){const t=e.map(ac);Pi.warn(`Firestore (${$a}): ${n}`,...t)}}function ac(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function Rt(n,e){n||rt()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wr.UNAUTHENTICATED))}shutdown(){}}class qT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Db{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ir,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=l;e.enqueueRetryable((0,ae.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ir)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new hw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new wr(e)}}class Zf{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Cb{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new Zf(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class El{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kf{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.A=t.token,new El(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ZT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Jy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=ZT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function pw(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Sn(0,0))}static max(){return new St(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bl{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends bl{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const Tb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends bl{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return Tb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new On(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(l=!l,o++):"."!==g||l?(r+=g,o++):(u(),o++)}if(u(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Kt.fromString(e))}static fromName(e){return new $e(Kt.fromString(e).popFirst(5))}static empty(){return new $e(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Kt(e.slice()))}}class Sg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function e_(n){return n.fields.find(e=>2===e.kind)}function Dl(n){return n.fields.filter(e=>2!==e.kind)}Sg.UNKNOWN_ID=-1;class Ag{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yf(0,us.min())}}function Cl(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=St.fromTimestamp(1e9===r?new Sn(t+1,0):new Sn(t,r));return new us(o,$e.empty(),e)}function Zo(n){return new us(n.readTime,n.key,-1)}class us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new us(St.min(),$e.empty(),-1)}static max(){return new us(St.max(),$e.empty(),-1)}}function t_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ha(n){return gw.apply(this,arguments)}function gw(){return gw=(0,ae.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==xb)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),gw.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,l=!1;e.forEach(g=>{++o,g.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,l=new Array(u);let g=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(A=>{l[b]=A,++g,g===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class n_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ih(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=xg(r.target.error);this.P.reject(new ih(e,o))}}static open(e,t,r,o){try{return new n_(t,e.transaction(o,r))}catch(u){throw new ih(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kb(t)}}class Fs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Fs.D((0,Tt.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Zr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Tt.hl)())return!1;if(Fs.N())return!0;const e=(0,Tt.z$)(),t=Fs.D(e),r=0<t&&t<10,o=Fs.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;o("VersionError"===g.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new ih(e,g))},u.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ae.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const v=n_.open(u.db,e,l?"readonly":"readwrite",r),b=o(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),se.reject(A))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,A="FirebaseError"!==b.name&&g<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Zr(this.U.delete())}}class ih extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function uc(n){return"IndexedDbTransactionError"===n.name}class kb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zr(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Zr(this.store.add(e))}get(e){return Zr(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Zr(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Zr(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const l=xg(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void o();const v=new Rb(g),b=t(g.primaryKey,g.value,v);if(b instanceof se){const A=b.catch(M=>(v.done(),se.reject(M)));r.push(A)}v.isDone?o():null===v.G?g.continue():g.continue(v.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zr(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=xg(r.target.error);t(o)}})}let mw=!1;function xg(n){const e=Fs.D((0,Tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mw||(mw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Pb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){uc(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ha(r)}yield t.nt(6e4)}))}}class Nb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(g=>{o-=g,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(g=>(ke("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Zo(u);t_(l,r)>0&&(r=l)}),new us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ni{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function yw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _w(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ni.at=-1;class er{constructor(e,t){this.comparator=e,this.root=t||ht.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mg(this.root,e,this.comparator,!0)}}class Mg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ht.RED,this.left=o??ht.EMPTY,this.right=u??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ht(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ht.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1,ht.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ht(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(n){return n.hasNext()?n.getNext():void 0}class cs{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new cs([])}unionWith(e){let t=new pn(On.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Er(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const Lb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=Lb.exec(n);if(Rt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sl(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function vw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function i_(n){const e=n.mapValue.fields.__previous_value__;return vw(e)?i_(e):e}function sh(n){const e=Ga(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class Al{constructor(e,t,r,o,u,l,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class lc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}function xl(n){return null==n}function Ml(n){return 0===n&&1/n==-1/0}function ww(n){return"number"==typeof n&&Number.isInteger(n)&&!Ml(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},s_={nullValue:"NULL_VALUE"};function oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vw(n)?4:bw(n)?9007199254740991:10:rt()}function Ko(n,e){if(n===e)return!0;const t=oh(n);if(t!==oh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ga(r.timestampValue),l=Ga(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Sl(n.bytesValue).isEqual(Sl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return tr(r.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(r.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return tr(r.integerValue)===tr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=tr(r.doubleValue),l=tr(o.doubleValue);return u===l?Ml(u)===Ml(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(yw(u)!==yw(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Ko(u[g],l[g])))return!1;return!0}(n,e);default:return rt()}var o}function ah(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function kl(n,e){if(n===e)return 0;const t=oh(n),r=oh(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=tr(o.integerValue||o.doubleValue),g=tr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return Iw(n.timestampValue,e.timestampValue);case 4:return Iw(sh(n),sh(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Sl(o),g=Sl(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),g=u.split("/");for(let v=0;v<l.length&&v<g.length;v++){const b=Lt(l[v],g[v]);if(0!==b)return b}return Lt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Lt(tr(o.latitude),tr(u.latitude));return 0!==l?l:Lt(tr(o.longitude),tr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],g=u.values||[];for(let v=0;v<l.length&&v<g.length;++v){const b=kl(l[v],g[v]);if(b)return b}return Lt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Rl.mapValue&&u===Rl.mapValue)return 0;if(o===Rl.mapValue)return 1;if(u===Rl.mapValue)return-1;const l=o.fields||{},g=Object.keys(l),v=u.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const M=Lt(g[A],b[A]);if(0!==M)return M;const F=kl(l[g[A]],v[b[A]]);if(0!==F)return F}return Lt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Iw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Ga(n),r=Ga(e),o=Lt(t.seconds,r.seconds);return 0!==o?o:Lt(t.nanos,r.nanos)}function uo(n){return o_(n)}function o_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ga(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sl(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=o_(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${o_(r.fields[g])}`;return u+"}"}(n.mapValue):rt();var e}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uh(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function a_(n){return!!n&&"nullValue"in n}function Ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rg(n){return!!n&&"mapValue"in n}function Xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fb(n){return"nullValue"in n?s_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(lc.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function Dw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(lc.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Rl:rt()}function Cw(n,e){const t=kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function u_(n,e){const t=kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fr{constructor(e){this.value=e}static empty(){return new Fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(t)}setAll(e){let t=On.emptyPath(),r={},o=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}l?r[g.lastSegment()]=Xf(l):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Rg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){cc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Fr(Xf(this.value))}}function kg(n){const e=[];return cc(n.fields,(t,r)=>{const o=new On([t]);if(Rg(r)){const u=kg(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new cs(e)}class An{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new An(e,0,St.min(),St.min(),Fr.empty(),0)}static newFoundDocument(e,t,r){return new An(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new An(e,2,t,St.min(),Fr.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,St.min(),Fr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class c_{constructor(e,t=null,r=[],o=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=g,this.ht=null}}function Tw(n,e=null,t=[],r=[],o=null,u=null,l=null){return new c_(n,e,t,r,o,u,l)}function ch(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+uo(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),xl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uo(r)).join(",")),e.ht=t}return e.ht}function dh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!g_(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ng(n.startAt,e.startAt)&&Ng(n.endAt,e.endAt)}function Jf(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Pl(n,e){return n.filters.filter(t=>t instanceof Kr&&t.field.isEqual(e))}function Us(n,e,t){let r=s_,o=!0;for(const u of Pl(n,e)){let l=s_,g=!0;switch(u.op){case"<":case"<=":l=Fb(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=s_}Cw({value:r,inclusive:o},{value:l,inclusive:g})<0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Cw({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function l_(n,e,t){let r=Rl,o=!0;for(const u of Pl(n,e)){let l=Rl,g=!0;switch(u.op){case">=":case">":l=Dw(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Rl}u_({value:r,inclusive:o},{value:l,inclusive:g})>0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];u_({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Kr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new d_(e,t,r):"array-contains"===t?new p_(e,r):"in"===t?new KT(e,r):"not-in"===t?new Sw(e,r):"array-contains-any"===t?new YT(e,r):new Kr(e,t,r)}static lt(e,t,r){return"in"===t?new za(e,r):new h_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(kl(t,this.value)):null!==t&&oh(this.value)===oh(t)&&this.ft(kl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class d_ extends Kr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.ft(t)}}class za extends Kr{constructor(e,t){super(e,"in",t),this.keys=f_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class h_ extends Kr{constructor(e,t){super(e,"not-in",t),this.keys=f_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function f_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class p_ extends Kr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&ah(t.arrayValue,this.value)}}class KT extends Kr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ah(this.value.arrayValue,t)}}class Sw extends Kr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ah(this.value.arrayValue,t)}}class YT extends Kr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}class co{constructor(e,t){this.position=e,this.inclusive=t}}class qa{constructor(e,t="asc"){this.field=e,this.dir=t}}function g_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Pg(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(l.referenceValue),t.key):kl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Ng(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class hc{constructor(e,t=null,r=[],o=[],u=null,l="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=v,this._t=null,this.wt=null}}function Aw(n,e,t,r,o,u,l,g){return new hc(n,e,t,r,o,u,l,g)}function hh(n){return new hc(n)}function xw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function m_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Og(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Mw(n){return null!==n.collectionGroup}function fh(n){const e=qe(n);if(null===e._t){e._t=[];const t=Og(e),r=m_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new qa(t)),e._t.push(new qa(On.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new qa(On.keyField(),u))}}}return e._t}function Oi(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Tw(e.path,e.collectionGroup,fh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of fh(e))t.push(new qa(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new co(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new co(e.startAt.position,e.startAt.inclusive):null;e.wt=Tw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function ep(n,e,t){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ph(n,e){return dh(Oi(n),Oi(e))&&n.limitType===e.limitType}function Rw(n){return`${ch(Oi(n))}|lt:${n.limitType}`}function tp(n){return`Query(target=${function lh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uo(r.value)}`;var r}).join(", ")}]`),xl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>uo(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>uo(t)).join(",")),`Target(${e})`}(Oi(n))}; limitType=${n.limitType})`}function kw(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const g=Pg(o,u,l);return o.inclusive?g<=0:g<0}(t.startAt,fh(t),r)||t.endAt&&!function(o,u,l){const g=Pg(o,u,l);return o.inclusive?g>=0:g>0}(t.endAt,fh(t),r)));var t,r}function Ub(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vb(n){return(e,t)=>{let r=!1;for(const o of fh(n)){const u=QT(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function QT(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,l){const g=u.data.field(o),v=l.data.field(o);return null!==g&&null!==v?kl(g,v):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Bb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function jb(n){return{integerValue:""+n}}function $b(n,e){return ww(e)?jb(e):Bb(n,e)}class y_{constructor(){this._=void 0}}function XT(n,e,t){return n instanceof fc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Nl?__(n,e):n instanceof Za?v_(n,e):function(r,o){const u=Wa(r,o),l=Pw(u)+Pw(r.yt);return uh(u)&&uh(r.yt)?jb(l):Bb(r.It,l)}(n,e)}function JT(n,e,t){return n instanceof Nl?__(n,e):n instanceof Za?v_(n,e):t}function Wa(n,e){return n instanceof pc?uh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class fc extends y_{}class Nl extends y_{constructor(e){super(),this.elements=e}}function __(n,e){const t=Ka(e);for(const r of n.elements)t.some(o=>Ko(o,r))||t.push(r);return{arrayValue:{values:t}}}class Za extends y_{constructor(e){super(),this.elements=e}}function v_(n,e){let t=Ka(e);for(const r of n.elements)t=t.filter(o=>!Ko(o,r));return{arrayValue:{values:t}}}class pc extends y_{constructor(e,t){super(),this.It=e,this.yt=t}}function Pw(n){return tr(n.integerValue||n.doubleValue)}function Ka(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gh{constructor(e,t){this.field=e,this.transform=t}}class Gb{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fg{}function np(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ll(n.key,xn.none()):new Ya(n.key,n.data,xn.none());{const t=n.data,r=Fr.empty();let o=new pn(On.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Yo(n.key,r,new cs(o.toArray()),xn.none())}}function mh(n,e,t){n instanceof Ya?function(r,o,u){const l=r.value.clone(),g=Vg(r.fieldTransforms,o,u.transformResults);l.setAll(g),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(r,o,u){if(!Lg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=Vg(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(w_(r)),g.setAll(l),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ol(n,e,t,r){return n instanceof Ya?function(o,u,l,g){if(!Lg(o.precondition,u))return l;const v=o.value.clone(),b=Bg(o.fieldTransforms,g,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(o,u,l,g){if(!Lg(o.precondition,u))return l;const v=Bg(o.fieldTransforms,g,u),b=u.data;return b.setAll(w_(o)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Lg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function yh(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Wa(r.transform,o||null);null!=u&&(null===t&&(t=Fr.empty()),t.set(r.field,u))}return t||null}function Ug(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(o,u)=>function Hb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Nl&&r instanceof Nl||t instanceof Za&&r instanceof Za?rh(t.elements,r.elements,Ko):t instanceof pc&&r instanceof pc?Ko(t.yt,r.yt):t instanceof fc&&r instanceof fc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ya extends Fg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yo extends Fg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function w_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Vg(n,e,t){const r=new Map;Rt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,g=e.data.field(u.field);r.set(u.field,JT(l,g,t[o]))}return r}function Bg(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,XT(u,l,e))}return r}class Ll extends Fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rp extends Fg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zb{constructor(e){this.count=e}}var xr,nn;function I_(n){switch(n){default:return rt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Nw(n){if(void 0===n)return lr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case xr.OK:return ce.OK;case xr.CANCELLED:return ce.CANCELLED;case xr.UNKNOWN:return ce.UNKNOWN;case xr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xr.INTERNAL:return ce.INTERNAL;case xr.UNAVAILABLE:return ce.UNAVAILABLE;case xr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xr.NOT_FOUND:return ce.NOT_FOUND;case xr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xr.ABORTED:return ce.ABORTED;case xr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xr.DATA_LOSS:return ce.DATA_LOSS;default:return rt()}}(nn=xr||(xr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return _w(this.inner)}size(){return this.innerSize}}const Ow=new er($e.comparator);function Li(){return Ow}const Fi=new er($e.comparator);function _h(...n){let e=Fi;for(const t of n)e=e.insert(t.key,t);return e}function Lw(n){let e=Fi;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xa(){return Fl()}function Fw(){return Fl()}function Fl(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Uw=new er($e.comparator),qb=new pn($e.comparator);function jt(...n){let e=qb;for(const t of n)e=e.add(t);return e}const Wb=new pn(Lt);function ip(){return Wb}class sp{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,vh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sp(St.min(),o,ip(),Li(),jt())}}class vh{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vh(r,t,jt(),jt(),jt())}}class jg{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class Vw{constructor(e,t){this.targetId=e,this.At=t}}class E_{constructor(e,t,r=Er.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class b_{constructor(){this.Rt=0,this.bt=$g(),this.Pt=Er.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new vh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=$g()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Zb{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Li(),this.qt=lo(),this.Kt=new pn(Lt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Jf(u))if(0===r){const l=new $e(u.path);this.jt(t,l,An.newNoDocument(l,St.min()))}else Rt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const g=this.Xt(l);if(g){if(u.current&&Jf(g.target)){const v=new $e(g.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,An.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=jt();this.qt.forEach((u,l)=>{let g=!0;l.forEachWhile(v=>{const b=this.Xt(v);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const o=new sp(e,t,this.Kt,this.Ut,r);return this.Ut=Li(),this.qt=lo(),this.Kt=new pn(Lt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new b_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new pn(Lt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new b_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function lo(){return new er($e.comparator)}function $g(){return new er($e.comparator)}const Kb={asc:"ASCENDING",desc:"DESCENDING"},Yb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class eS{constructor(e,t){this.databaseId=e,this.gt=t}}function wh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Qb(n,e){return wh(n,e.toTimestamp())}function Ur(n){return Rt(!!n),St.fromTimestamp(function(e){const t=Ga(e);return new Sn(t.seconds,t.nanos)}(n))}function op(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jw(n){const e=Kt.fromString(n);return Rt(rD(e)),e}function ap(n,e){return op(n.databaseId,e.path)}function ls(n,e){const t=jw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Gg(t))}function up(n,e){return op(n.databaseId,e)}function cp(n){const e=jw(n);return 4===e.length?Kt.emptyPath():Gg(e)}function Hg(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gg(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Xb(n,e,t){return{name:ap(n,e),fields:t.value.mapValue.fields}}function D_(n,e,t){const r=ls(n,e.name),o=Ur(e.updateTime),u=new Fr({mapValue:{fields:e.fields}}),l=An.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Ih(n,e){let t;if(e instanceof Ya)t={update:Xb(n,e.key,e.value)};else if(e instanceof Ll)t={delete:ap(n,e.key)};else if(e instanceof Yo)t={update:Xb(n,e.key,e.data),updateMask:nD(e.fieldMask)};else{if(!(e instanceof rp))return rt();t={verify:ap(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof fc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Nl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Za)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pc)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Qb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function lp(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?xn.updateTime(Ur(o.updateTime)):void 0!==o.exists?xn.exists(o.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let g=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),g=new fc):"appendMissingElements"in l?g=new Nl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Za(l.removeAllFromArray.values||[]):"increment"in l?g=new pc(u,l.increment):rt();const v=On.fromServerFormat(l.fieldPath);return new gh(v,g)}(n,o)):[];var o;if(e.update){const o=ls(n,e.update.name),u=new Fr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new cs((e.updateMask.fieldPaths||[]).map(b=>On.fromServerFormat(b)));return new Yo(o,u,l,t,r)}return new Ya(o,u,t,r)}if(e.delete){const o=ls(n,e.delete);return new Ll(o,t)}if(e.verify){const o=ls(n,e.verify);return new rp(o,t)}return rt()}function dp(n,e){return{documents:[up(n,e.path)]}}function Eh(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=up(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=up(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const b=v.map(A=>function(M){if("=="===M.op){if(Ew(M.value))return{unaryFilter:{field:Dh(M.field),op:"IS_NAN"}};if(a_(M.value))return{unaryFilter:{field:Dh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Ew(M.value))return{unaryFilter:{field:Dh(M.field),op:"IS_NOT_NAN"}};if(a_(M.value))return{unaryFilter:{field:Dh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dh(M.field),op:eD(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:Dh((A=b).field),direction:Gw(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.gt||xl(b)?b:{value:b});var b,g,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function bh(n){let e=cp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Rt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=zg(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new qa(Qo((M=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(A){let M;return M="object"==typeof A?A.value:A,xl(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new co((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new co(A.values||[],!A.before)}(t.endAt)),Aw(e,o,l,u,g,"F",v,b)}function zg(n){return n?void 0!==n.unaryFilter?[tS(n)]:void 0!==n.fieldFilter?[tD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>zg(e)).reduce((e,t)=>e.concat(t)):rt():[]}function Gw(n){return Kb[n]}function eD(n){return Yb[n]}function Dh(n){return{fieldPath:n.canonicalString()}}function Qo(n){return On.fromServerFormat(n.fieldPath)}function tD(n){return Kr.create(Qo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function tS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Qo(n.unaryFilter.field);return Kr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Qo(n.unaryFilter.field);return Kr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qo(n.unaryFilter.field);return Kr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qo(n.unaryFilter.field);return Kr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function nD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zw(e)),e=iD(n.get(t),e);return zw(e)}function iD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function zw(n){return n+"\x01\x01"}function ho(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:rt()}u=l+2}return new Kt(r)}const C_=["userId","batchId"];function qg(n,e){return[n,_i(e)]}function Wg(n,e,t){return[n,_i(e),t]}const sD={},oD=["prefixPath","collectionGroup","readTime","documentId"],aD=["prefixPath","collectionGroup","documentId"],uD=["collectionGroup","readTime","prefixPath","documentId"],cD=["canonicalId","targetId"],lD=["targetId","path"],Zg=["path","targetId"],Ul=["collectionId","parent"],nS=["indexId","uid"],hp=["uid","sequenceNumber"],dD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hD=["indexId","uid","orderedDocumentKey"],T_=["userId","collectionPath","documentId"],fD=["userId","collectionPath","largestBatchId"],Xo=["userId","collectionGroup","largestBatchId"],Ch=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ci=[...Ch,"documentOverlays"],gc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fp=gc,Vs=[...fp,"indexConfiguration","indexState","indexEntries"];class pp extends Mb{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Gn(n,e){const t=qe(n);return Fs.M(t.ie,e)}class mc{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mh(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ol(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ol(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fw();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(o.key)?null:g;const v=np(l,g);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>Ug(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>Ug(t,r))}}class yc{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Rt(e.mutations.length===r.length);let o=Uw;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new yc(e,t,r,o)}}class _c{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ds{constructor(e,t,r,o,u=St.min(),l=St.min(),g=Er.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vl{constructor(e){this.re=e}}function Bl(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ap(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wh(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vc(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:vc(e.version)}}var o,u;return r}function eu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wc(n){const e=new Sn(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Ic(n,e){const t=(e.baseMutations||[]).map(u=>lp(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>lp(n.re,u)),o=Sn.fromMillis(e.localWriteTimeMs);return new mc(e.batchId,o,t,r)}function Sh(n){const e=wc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wc(n.lastLimboFreeSnapshotVersion):St.min();let r;var o;return void 0!==n.query.documents?(Rt(1===(o=n.query).documents.length),r=Oi(hh(cp(o.documents[0])))):r=Oi(bh(n.query)),new ds(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function S_(n,e){const t=vc(e.snapshotVersion),r=vc(e.lastLimboFreeSnapshotVersion);let o;o=Jf(e.target)?dp(n.re,e.target):Eh(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ch(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Kg(n){const e=bh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ep(e,e.limit,"L"):e}function Yg(n,e){return new _c(e.largestBatchId,lp(n.re,e.overlayMutation))}function A_(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}function x_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:vc(r.readTime),documentKey:_i(r.documentKey.path),largestBatchId:r.largestBatchId}}class pD{getBundleMetadata(e,t){return qw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:wc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return qw(e).put({bundleId:(r=t).id,createTime:vc(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return M_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Kg(o.bundledQuery),readTime:wc(o.readTime)};var o})}saveNamedQuery(e,t){return M_(e).put({name:(r=t).name,readTime:vc(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qw(n){return Gn(n,"bundles")}function M_(n){return Gn(n,"namedQueries")}class Qg{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Qg(e,t.uid||"")}getOverlay(e,t){return Ah(e).get(A_(this.userId,t)).next(r=>r?Yg(this.It,r):null)}getOverlays(e,t){const r=Xa();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const g=new _c(t,l);o.push(this.ue(e,g))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(_i(l.getCollectionPath())));const u=[];return o.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Ah(e).Y("collectionPathOverlayIndex",g))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Xa(),u=_i(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ah(e).W("collectionPathOverlayIndex",l).next(g=>{for(const v of g){const b=Yg(this.It,v);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Xa();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ah(e).Z({index:"collectionGroupOverlayIndex",range:g},(v,b,A)=>{const M=Yg(this.It,b);u.size()<o||M.largestBatchId===l?(u.set(M.getKey(),M),l=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Ah(e).put(function(r,o,u){const[l,g,v]=A_(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ih(r.re,u.mutation)}}(this.It,this.userId,t))}}function Ah(n){return Gn(n,"documentOverlays")}class tu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Ml(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Sl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?bw(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):rt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),$e.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function R_(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ww(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=R_(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}tu.Te=new tu;class Xg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=Ww(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=Ww(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Jg{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class k_{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class gp{constructor(){this.Be=new Xg,this.Le=new Jg(this.Be),this.Ue=new k_(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Jo{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jo(this.indexId,this.documentKey,this.arrayValue,r)}}function ea(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=P_(n.arrayValue,e.arrayValue),0!==t?t:(t=P_(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function P_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Zw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=e_(e);if(void 0!==t&&!this.ze(t))return!1;const r=Dl(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const l=r[o];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class N_{constructor(){this.Ye=new em}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(us.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class em{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pn(Kt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pn(Kt.comparator)).toArray()}}const mp=new Uint8Array(0);class O_{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new em,this.Ze=new Qa(r=>ch(r),(r,o)=>dh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:_i(o)};return L_(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[pw(t),""],!1,!0);return L_(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ho(l.parent))}return r})}addFieldIndex(e,t){const r=_p(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=xh(e);return u.next(g=>{l.put(x_(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=_p(e),o=xh(e),u=yp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=yp(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),l=>this.en(e,l).next(g=>{o&&(o=!!g),u.set(l,g)})).next(()=>{if(o){let l=jt();const g=[];return se.forEach(u,(v,b)=>{var A;ke("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${ch(t)}`);const M=function(pt,at){const xt=e_(at);if(void 0===xt)return null;for(const Ft of Pl(pt,xt.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(b,v),F=function(pt,at){const xt=new Map;for(const Ft of Dl(at))for(const hr of Pl(pt,Ft.fieldPath))switch(hr.op){case"==":case"in":xt.set(Ft.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return xt.set(Ft.fieldPath.canonicalString(),hr.value),Array.from(xt.values())}return null}(b,v),z=function(pt,at){const xt=[];let Ft=!0;for(const hr of Dl(at)){const fu=0===hr.kind?Us(pt,hr.fieldPath,pt.startAt):l_(pt,hr.fieldPath,pt.startAt);xt.push(fu.value),Ft&&(Ft=fu.inclusive)}return new co(xt,Ft)}(b,v),Q=function(pt,at){const xt=[];let Ft=!0;for(const hr of Dl(at)){const fu=0===hr.kind?l_(pt,hr.fieldPath,pt.endAt):Us(pt,hr.fieldPath,pt.endAt);xt.push(fu.value),Ft&&(Ft=fu.inclusive)}return new co(xt,Ft)}(b,v),Ae=this.nn(v,b,z),Ee=this.nn(v,b,Q),vt=this.sn(v,b,F),It=this.rn(v.indexId,M,Ae,z.inclusive,Ee,Q.inclusive,vt);return se.forEach(It,pt=>r.J(pt,t.limit).next(at=>{at.forEach(xt=>{const Ft=$e.fromSegments(xt.documentKey);l.has(Ft)||(l=l.add(Ft),g.push(Ft))})}))}).next(()=>g)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,l,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const F=t?this.on(t[M/b]):mp,z=this.un(e,F,r[M%b],o),Q=this.cn(e,F,u[M%b],l),Ae=g.map(Ee=>this.un(e,F,Ee,!0));A.push(...this.createRange(z,Q,Ae))}return A}un(e,t,r,o){const u=new Jo(e,$e.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new Jo(e,$e.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new Zw(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const g of u)r.We(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let g=new pn(On.comparator),v=!1;for(const b of l.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:g=g.add(A.field))}for(const b of l.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new gp;for(const o of Dl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);tu.Te.ce(u,l)}return r.$e()}on(e){const t=new gp;return tu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new gp;return tu.Te.ce(dc(this.databaseId,t),r.qe(function(o){const u=Dl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new gp);let u=0;for(const l of Dl(e)){const g=r[u++];for(const v of o)if(this.ln(t,l.fieldPath)&&Qf(g))o=this.fn(o,l,g);else{const b=v.qe(l.kind);tu.Te.ce(g,b)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of o){const v=new gp;v.seed(g.$e()),tu.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Kr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=_p(e),o=xh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return se.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{l.push(function(b,A){const M=A?new Yf(A.sequenceNumber,new us(wc(A.readTime),new $e(ho(A.documentKey)),A.largestBatchId)):Yf.empty(),F=b.fields.map(([z,Q])=>new Ag(On.fromServerFormat(z),Q));return new Sg(b.indexId,b.collectionGroup,F,M)}(g,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=_p(e),u=xh(e);return this._n(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>se.forEach(g,v=>u.put(x_(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),se.forEach(g,v=>this.wn(e,o,v).next(b=>{const A=this.mn(u,v);return b.isEqual(A)?se.resolve():this.gn(e,u,v,b,A)}))))})}yn(e,t,r,o){return yp(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return yp(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=yp(e);let u=new pn(ea);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,g)=>{u=u.add(new Jo(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new pn(ea);const o=this.an(t,e);if(null==o)return r;const u=e_(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Qf(l))for(const g of l.arrayValue.values||[])r=r.add(new Jo(t.indexId,e.key,this.on(g),o))}else r=r.add(new Jo(t.indexId,e.key,mp,o));return r}gn(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,v,b,A,M){const F=g.getIterator(),z=v.getIterator();let Q=Tl(F),Ae=Tl(z);for(;Q||Ae;){let Ee=!1,vt=!1;if(Q&&Ae){const It=b(Q,Ae);It<0?vt=!0:It>0&&(Ee=!0)}else null!=Q?vt=!0:Ee=!0;Ee?(A(Ae),Ae=Tl(z)):vt?(M(Q),Q=Tl(F)):(Q=Tl(F),Ae=Tl(z))}}(o,u,ea,g=>{l.push(this.yn(e,t,r,g))},g=>{l.push(this.pn(e,t,r,g))}),se.waitFor(l)}_n(e){let t=1;return xh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>ea(l,g)).filter((l,g,v)=>!g||0!==ea(l,v[g-1]));const o=[];o.push(e);for(const l of r){const g=ea(l,e),v=ea(l,t);if(0===g)o[0]=e.Ke();else if(g>0&&v<0)o.push(l),o.push(l.Ke());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,mp,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,mp,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(F_)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||rt())).next(F_)}}function L_(n){return Gn(n,"collectionParents")}function yp(n){return Gn(n,"indexEntries")}function _p(n){return Gn(n,"indexConfiguration")}function xh(n){return Gn(n,"indexState")}function F_(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;t_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new us(e.readTime,e.documentKey,t)}const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Kw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const v=r.Z({range:l},(A,M,F)=>(g++,F.delete()));u.push(v.next(()=>{Rt(1===g)}));const b=[];for(const A of t.mutations){const M=Wg(e,A.key.path,t.batchId);u.push(o.delete(M)),b.push(A.key)}return se.waitFor(u).next(()=>b)}function tm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class vp{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new vp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=jl(e),l=nu(e);return l.add({}).next(g=>{Rt("number"==typeof g);const v=new mc(g,t,r,o),b=function(F,z,Q){const Ae=Q.baseMutations.map(vt=>Ih(F.re,vt)),Ee=Q.mutations.map(vt=>Ih(F.re,vt));return{userId:z,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:Ae,mutations:Ee}}(this.It,this.userId,v),A=[];let M=new pn((F,z)=>Lt(F.canonicalString(),z.canonicalString()));for(const F of o){const z=Wg(this.userId,F.key.path,g);M=M.add(F.key.path.popLast()),A.push(l.put(b)),A.push(u.put(z,sD))}return M.forEach(F=>{A.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[g]=v.keys()}),se.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return nu(e).get(t).next(r=>r?(Rt(r.userId===this.userId),Ic(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return nu(e).Z({index:"userMutationsIndex",range:o},(l,g,v)=>{g.userId===this.userId&&(Rt(g.batchId>=r),u=Ic(this.It,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return nu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).W("userMutationsIndex",t).next(r=>r.map(o=>Ic(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return jl(e).Z({range:o},(l,g,v)=>{const[b,A,M]=l,F=ho(A);if(b===this.userId&&t.path.isEqual(F))return nu(e).get(M).next(z=>{if(!z)throw rt();Rt(z.userId===this.userId),u.push(Ic(this.It,z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Lt);const o=[];return t.forEach(u=>{const l=qg(this.userId,u.path),g=IDBKeyRange.lowerBound(l),v=jl(e).Z({range:g},(b,A,M)=>{const[F,z,Q]=b,Ae=ho(z);F===this.userId&&u.path.isEqual(Ae)?r=r.add(Q):M.done()});o.push(v)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=qg(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new pn(Lt);return jl(e).Z({range:l},(v,b,A)=>{const[M,F,z]=v,Q=ho(F);M===this.userId&&r.isPrefixOf(Q)?Q.length===o&&(g=g.add(z)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(nu(e).get(u).next(l=>{if(null===l)throw rt();Rt(l.userId===this.userId),r.push(Ic(this.It,l))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Kw(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return jl(e).Z({range:r},(u,l,g)=>{if(u[0]===this.userId){const v=ho(u[1]);o.push(v)}else g.done()}).next(()=>{Rt(0===o.length)})})}containsKey(e,t){return nm(e,this.userId,t)}Rn(e){return V_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nm(n,e,t){const r=qg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return jl(n).Z({range:u,X:!0},(g,v,b)=>{const[A,M,F]=g;A===e&&M===o&&(l=!0),b.done()}).next(()=>l)}function nu(n){return Gn(n,"mutations")}function jl(n){return Gn(n,"documentMutations")}function V_(n){return Gn(n,"mutationQueues")}class Ec{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ec(0)}static vn(){return new Ec(-1)}}class Yw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ec(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>St.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$l(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return $l(e).Z((l,g)=>{const v=Sh(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return $l(e).Z((r,o)=>{const u=Sh(o);t(u)})}Vn(e){return B_(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Sn(e,t){return B_(e).put("targetGlobalKey",t)}Dn(e,t){return $l(e).put(S_(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ch(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $l(e).Z({range:o,index:"queryTargetsIndex"},(l,g,v)=>{const b=Sh(g);dh(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ru(e);return t.forEach(l=>{const g=_i(l.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=ru(e);return se.forEach(t,u=>{const l=_i(u.path);return se.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ru(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ru(e);let u=jt();return o.Z({range:r,X:!0},(l,g,v)=>{const b=ho(l[1]),A=new $e(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),o=IDBKeyRange.bound([r],[pw(r)],!1,!0);let u=0;return ru(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,g],v,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}se(e,t){return $l(e).get(t).next(r=>r?Sh(r):null)}}function $l(n){return Gn(n,"targets")}function B_(n){return Gn(n,"targetGlobal")}function ru(n){return Gn(n,"targetDocuments")}function gD([n,e],[t,r]){const o=Lt(n,t);return 0===o?Lt(e,r):o}class mD{constructor(e){this.xn=e,this.buffer=new pn(gD),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){uc(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ha(r)}yield t.Fn(3e5)}))}}class Qw{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ni.at);const r=new mD(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(U_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,l,g,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),o=this.params.maximumSequenceNumbersToCollect):o=M,l=Date.now(),this.nthSequenceNumber(e,o))).next(M=>(r=M,g=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Tg()<=ai.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${M} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:M})))}}class _D{constructor(e,t){this.db=e,this.garbageCollector=new Qw(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return nr(e,r)}removeReference(e,t,r){return nr(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nr(e,t)}Gn(e,t){return function(r,o){let u=!1;return V_(r).tt(l=>nm(r,l,o).next(g=>(g&&(u=!0),se.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,g)=>{if(g<=t){const v=this.Gn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),ru(e).delete([0,_i(l.path)])))});o.push(v)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nr(e,t)}Kn(e,t){const r=ru(e);let o,u=Ni.at;return r.Z({index:"documentTargetsIndex"},([l,g],{path:v,sequenceNumber:b})=>{0===l?(u!==Ni.at&&t(new $e(ho(o)),u),u=b,o=v):u=Ni.at}).next(()=>{u!==Ni.at&&t(new $e(ho(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nr(n,e){return ru(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class j_{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bc(e).put(r)}removeEntry(e,t,r){return bc(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],eu(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=An.newInvalidDocument(t);return bc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:An.newInvalidDocument(t)};return bc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(o,u)=>{r={document:this.jn(t,u),size:tm(u)}}).next(()=>r)}getEntries(e,t){let r=Li();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=Li(),o=new er($e.comparator);return this.zn(e,t,(u,l)=>{const g=this.jn(u,l);r=r.insert(u,g),o=o.insert(u,tm(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new pn(tI);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Mh(o.first()),Mh(o.last())),l=o.getIterator();let g=l.getNext();return bc(e).Z({index:"documentKeyIndex",range:u},(v,b,A)=>{const M=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&tI(g,M)<0;)r(g,null),g=l.getNext();g&&g.isEqual(M)&&(r(g,b),g=l.hasNext()?l.getNext():null),g?A.j(Mh(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),eu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bc(e).W(IDBKeyRange.bound(o,u,!0)).next(l=>{let g=Li();for(const v of l){const b=this.jn($e.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Li();const l=Hl(t,r),g=Hl(t,us.max());return bc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(v,b,A)=>{const M=this.jn($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new Jw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eI(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Qn(e,t){return eI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Th(n,e){let t;if(e.document)t=D_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=wc(e.noDocument.readTime);t=An.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=$e.fromSegments(e.unknownDocument.path),o=wc(e.unknownDocument.version);t=An.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Sn(r[0],r[1]);return St.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return An.newInvalidDocument(e)}}function Xw(n){return new vD(n)}class Jw extends j_{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Qa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pn((u,l)=>Lt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),l.isValidDocument()){const v=Bl(this.Yn.It,l);o=o.add(u.path.popLast()),r+=tm(v)-g.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=Bl(this.Yn.It,l.convertToNoDocument(St.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function eI(n){return Gn(n,"remoteDocumentGlobal")}function bc(n){return Gn(n,"remoteDocumentsV14")}function Mh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Hl(n,e){const t=e.documentKey.path.toArray();return[n,eu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tI(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Lt(t[u],r[u]),o)return o;return o=Lt(t.length,r.length),o||(o=Lt(t[t.length-2],r[r.length-2]),o||Lt(t[t.length-1],r[r.length-1]))}class wD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Ol(r.mutation,o,cs.empty(),Sn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const o=Xa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=_h();return u.forEach((g,v)=>{l=l.insert(g,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,o){let u=Li();const l=Fl(),g=Fl();return t.forEach((v,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof Yo)?u=u.insert(b.key,b):void 0!==A&&(l.set(b.key,A.mutation.getFieldMask()),Ol(A.mutation,b,A.mutation.getFieldMask(),Sn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var M;return g.set(b,new wD(A,null!==(M=l.get(b))&&void 0!==M?M:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Fl();let o=new er((l,g)=>l-g),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let A=r.get(v)||cs.empty();A=g.applyToLocalView(b,A),r.set(v,A);const M=(o.get(g.batchId)||jt()).add(v);o=o.insert(g.batchId,M)})}).next(()=>{const l=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),b=v.key,A=v.value,M=Fw();A.forEach(F=>{if(!u.has(F)){const z=np(t.get(F),r.get(F));null!==z&&M.set(F,z),u=u.add(F)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,M))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Xa());let g=-1,v=u;return l.next(b=>se.forEach(b,(A,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,M).next(F=>{v=v.insert(A,F)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,jt())).next(A=>({batchId:g,changes:Lw(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let o=_h();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=_h();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,g=>{const v=(b=t,A=g.child(o),new hc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,v)=>{const b=v.getKey();null===o.get(b)&&(o=o.insert(b,An.newInvalidDocument(b)))});let l=_h();return o.forEach((g,v)=>{const b=u.get(g);void 0!==b&&Ol(b.mutation,v,cs.empty(),Sn.now()),kw(t,v)&&(l=l.insert(g,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(An.newInvalidDocument(t))}}class ID{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Kg(r.bundledQuery),readTime:Ur(r.readTime)}),se.resolve();var r}}class nI{constructor(){this.overlays=new er($e.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xa();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Xa(),u=t.length+1,l=new $e(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const v=g.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new er((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Xa(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=Xa(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return se.resolve(g)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new _c(t,r));let u=this.es.get(t);void 0===u&&(u=jt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class rI{constructor(){this.ns=new pn(Mr.ss),this.rs=new pn(Mr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Mr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Mr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new $e(new Kt([])),r=new Mr(t,e),o=new Mr(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new $e(new Kt([])),r=new Mr(t,e),o=new Mr(t,e+1);let u=jt();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Mr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return $e.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||$e.comparator(e.key,t.key)}}class iI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new pn(Mr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new mc(u,t,r,o);this.mutationQueue.push(l);for(const g of o)this.gs=this.gs.add(new Mr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mr(t,0),o=new Mr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const g=this.ys(l._s);u.push(g)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Lt);return t.forEach(o=>{const u=new Mr(o,0),l=new Mr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],g=>{r=r.add(g._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const l=new Mr(new $e(u),0);let g=new pn(Lt);return this.gs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(v._s)),!0)},l),se.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new Mr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Mr(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ta{constructor(e){this.Es=e,this.docs=new er($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=Li();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():An.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=Li();const u=new $e(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:g,value:{document:v}}=l.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||t_(Zo(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){rt()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ED(this)}getSize(e){return se.resolve(this.size)}}class ED extends j_{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class bD{constructor(e){this.persistence=e,this.Rs=new Qa(t=>ch(t),dh),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rI,this.targetCount=0,this.vs=Ec.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ec(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class fo{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ni(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new bD(this),this.indexManager=new N_,this.remoteDocumentCache=new ta(r=>this.referenceDelegate.xs(r)),this.It=new Vl(t),this.Ns=new ID(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new iI(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new po(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class po extends Mb{constructor(e){super(),this.currentSequenceNumber=e}}class Vi{constructor(e){this.persistence=e,this.Fs=new rI,this.$s=null}static Bs(e){return new Vi(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=$e.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,St.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class sI{constructor(e){this.It=e}$(e,t,r,o){const u=new n_("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C_,{unique:!0}),g.createObjectStore("documentMutations"),H_(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),H_(e)),l=l.next(()=>function(g){const v=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(g,v){return v.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C_,{unique:!0});const A=v.store("mutations"),M=b.map(F=>A.put(F));return se.waitFor(M)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.qs(u))),r<6&&o>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:T_});v.createIndex("collectionPathOverlayIndex",fD,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Xo,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:oD});v.createIndex("documentKeyIndex",aD),v.createIndex("collectionGroupIndex",uD)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:nS}).createIndex("sequenceNumberIndex",hp,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:dD}).createIndex("documentKeyIndex",hD,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=tm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(g=>se.forEach(g,v=>{Rt(v.userId===u.userId);const b=Ic(this.It,v);return Kw(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,g)=>{const v=new Kt(l),b=[0,_i(v)];u.push(t.get(b).next(A=>A?se.resolve():t.put({targetId:0,path:_i(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ul});const r=t.store("collectionParents"),o=new em,u=l=>{if(o.add(l)){const g=l.lastSegment(),v=l.popLast();return r.put({collectionId:g,parent:_i(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,g)=>{const v=new Kt(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,g,v],b)=>{const A=ho(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Sh(o),l=S_(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const g=t.store("remoteDocumentsV14"),v=(b=l,b.document?new $e(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(g.put(A))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=Xw(this.It),u=new fo(Vi.Bs,this.It.re);return r.W().next(l=>{const g=new Map;return l.forEach(v=>{var b;let A=null!==(b=g.get(v.userId))&&void 0!==b?b:jt();Ic(this.It,v).keys().forEach(M=>A=A.add(M)),g.set(v.userId,A)}),se.forEach(g,(v,b)=>{const A=new wr(b),M=Qg.oe(this.It,A),F=u.getIndexManager(A),z=vp.oe(A,this.It,F,u.referenceDelegate);return new $_(o,z,M,F).recalculateAndSaveOverlaysForDocumentKeys(new pp(t,Ni.at),v).next()})})}}function H_(n){n.createObjectStore("targetDocuments",{keyPath:lD}).createIndex("documentTargetsIndex",Zg,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cD,{unique:!0}),n.createObjectStore("targetGlobal")}const G_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class z_{constructor(e,t,r,o,u,l,g,v,b,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=g,this.Js=b,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!z_.C())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _D(this,o),this.ii=t+"main",this.It=new Vl(v),this.ri=new Fs(this.ii,this.Xs,new sI(this.It)),this.Cs=new Yw(this.referenceDelegate,this.It),this.remoteDocumentCache=Xw(this.It),this.Ns=new pD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,G_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ni(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(uc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return wp(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return rm(e).delete(this.clientId)}yi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Gn(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),g=u.filter(v=>-1===l.indexOf(v));return se.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):wp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,G_);return!1}}return!(!this.networkEnabled||!this.inForeground)||rm(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pp(t,Ni.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>rm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return vp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O_(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Qg.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?Vs:14===l?fp:13===l?gc:12===l?ci:11===l?Ch:void rt();var l;let g;return this.ri.runTransaction(e,o,u,v=>(g=new pp(v,this.Ss?this.Ss.next():Ni.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ce.FAILED_PRECONDITION,xb);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Vi(e){return wp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,G_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wp(e).put("owner",t)}static C(){return Fs.C()}_i(e){const t=wp(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Tt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wp(n){return Gn(n,"owner")}function rm(n){return Gn(n,"clientMetadata")}function Ip(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gl{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=jt(),o=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gl(e,t.fromCache,r,o)}}class oI{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(xw(t))return se.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=ep(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=jt(...u);return this.Ni.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Fi(t,g);return this.$i(t,b,l,v.readTime)?this.ki(e,ep(t,null,"F")):this.Bi(e,b,t,v)}))})))}Oi(e,t,r,o){return xw(t)||o.isEqual(St.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(Tg()<=ai.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),tp(t)),this.Bi(e,l,t,Cl(o,-1)))})}Fi(e,t){let r=new pn(Vb(e));return t.forEach((o,u)=>{kw(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Tg()<=ai.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",tp(t)),this.Ni.getDocumentsMatchingQuery(e,t,us.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class aI{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new er(Lt),this.qi=new Qa(u=>ch(u),dh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function uI(n,e,t,r){return new aI(n,e,t,r)}function q_(n,e){return im.apply(this,arguments)}function im(){return im=(0,ae.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let v=jt();for(const b of o){l.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(b=>({ji:b,removedBatchIds:l,addedBatchIds:g}))})})}),im.apply(this,arguments)}function sm(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,g,v,b){const A=v.batch,M=A.keys();let F=se.resolve();return M.forEach(z=>{F=F.next(()=>b.getEntry(g,z)).next(Q=>{const Ae=v.docVersions.get(z);Rt(null!==Ae),Q.version.compareTo(Ae)<0&&(A.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),b.addEntry(Q)))})}),F.next(()=>l.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=jt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(g=g.add(l.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function cI(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function lI(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const g=[];e.targetChanges.forEach((A,M)=>{const F=o.get(M);if(!F)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let z=F.withSequenceNumber(u.currentSequenceNumber);var Q,Ae,Ee;e.targetMismatches.has(M)?z=z.withResumeToken(Er.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,r)),o=o.insert(M,z),Ae=z,Ee=A,(0===(Q=F).resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,z))});let v=Li(),b=jt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(W_(u,l,e.documentUpdates).next(A=>{v=A.Wi,b=A.zi})),!r.isEqual(St.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return se.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Ui=o,u))}function W_(n,e,t){let r=jt(),o=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Li();return t.forEach((g,v)=>{const b=u.get(g);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(St.min())?(e.removeEntry(g,v.readTime),l=l.insert(g,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),l=l.insert(g,v)):ke("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",v.version)}),{Wi:l,zi:o}})}function Z_(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dc(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new ds(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function zl(n,e,t){return om.apply(this,arguments)}function om(){return om=(0,ae.Z)(function*(n,e,t){const r=qe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!uc(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),om.apply(this,arguments)}function Ep(n,e,t){const r=qe(n);let o=St.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,v,b){const A=qe(g),M=A.qi.get(b);return void 0!==M?se.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,b)}(r,l,Oi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,g.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:St.min(),t?u:jt())).next(g=>(Q_(r,Ub(e),g),{documents:g,Hi:u})))}function K_(n,e){const t=qe(n),r=qe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function Y_(n,e){const t=qe(n),r=t.Ki.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Cl(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Q_(t,e,o),o))}function Q_(n,e,t){let r=n.Ki.get(e)||St.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function am(){return am=(0,ae.Z)(function*(n,e,t,r){const o=qe(n);let u=jt(),l=Li();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),l=l.insert(A,M)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield Dc(o,(b=r,Oi(hh(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>W_(b,g,l).next(A=>(g.apply(b),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>o.Cs.addMatchingKeys(b,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),am.apply(this,arguments)}function DD(n,e){return X_.apply(this,arguments)}function X_(){return X_=(0,ae.Z)(function*(n,e,t=jt()){const r=yield Dc(n,Oi(Kg(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Er.EMPTY_BYTE_STRING,l);return o.Ui=o.Ui.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),X_.apply(this,arguments)}function hI(n,e){return`firestore_clients_${n}_${e}`}function fI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function J_(n,e){return`firestore_targets_${n}_${e}`}class um{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Re(o.error.code,o.error.message))),l?new um(e,t,o.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new bp(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=ip();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=ww(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new cm(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ev{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ev(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tv{constructor(){this.activeTargetIds=ip()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nv{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new er(Lt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=hI(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tv),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(hI(e.persistenceKey,o));if(u){const l=cm.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(J_(this.persistenceKey,e));if(r){const o=bp.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(J_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Ni.at;if(null!=u)try{const g=JSON.parse(u);Rt("number"==typeof g),l=g}catch(g){lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);o!==Ni.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new um(this.currentUser,e,t,r),u=fI(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=fI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=J_(this.persistenceKey,e),u=new bp(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return cm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return um.Zi(new wr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return bp.Zi(o,t)}yr(e){return ev.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],g=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Br(l,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ip();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class pI{constructor(){this.Lr=new tv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CD{qr(e){}shutdown(){}}class gI{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SD{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class AD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const g={};return this.lo(g,o,u),this.fo(e,l,g,r).then(v=>(ke("RestConnection","Received: ",v),v),v=>{throw oc("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$a,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${TD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const g=new Cg;g.setWithCredentials(!0),g.listenOnce(cw.COMPLETE,()=>{var b;try{switch(g.getLastErrorCode()){case Wf.NO_ERROR:const A=g.getResponseJson();ke("Connection","XHR received:",JSON.stringify(A)),u(A);break;case Wf.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const M=g.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',M,"response text:",g.getResponseText()),M>0){let F=g.getResponseJson();Array.isArray(F)&&(F=F[0]);const z=null===(b=F)||void 0===b?void 0:b.error;if(z&&z.status&&z.message){const Q=function(Ae){const Ee=Ae.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Ee)>=0?Ee:ce.UNKNOWN}(z.status);l(new Re(Q,z.message))}else l(new Re(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else l(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zT(),l=Ib(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Eb({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=o.join("");ke("Connection","Creating WebChannel: "+v,g);const b=u.createWebChannel(v,g);let A=!1,M=!1;const F=new SD({Hr:Q=>{M?ke("Connection","Not sending because WebChannel is closed:",Q):(A||(ke("Connection","Opening WebChannel transport."),b.open(),A=!0),ke("Connection","WebChannel sending:",Q),b.send(Q))},Jr:()=>b.close()}),z=(Q,Ae,Ee)=>{Q.listen(Ae,vt=>{try{Ee(vt)}catch(It){setTimeout(()=>{throw It},0)}})};return z(b,nh.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),z(b,nh.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),F.io())}),z(b,nh.EventType.ERROR,Q=>{M||(M=!0,oc("Connection","WebChannel transport errored:",Q),F.io(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),z(b,nh.EventType.MESSAGE,Q=>{var Ae;if(!M){const Ee=Q.data[0];Rt(!!Ee);const vt=Ee,It=vt.error||(null===(Ae=vt[0])||void 0===Ae?void 0:Ae.error);if(It){ke("Connection","WebChannel received error:",It);const pt=It.status;let at=function(Ft){const hr=xr[Ft];if(void 0!==hr)return Nw(hr)}(pt),xt=It.message;void 0===at&&(at=ce.INTERNAL,xt="Unknown error status: "+pt+" with message "+It.message),M=!0,F.io(new Re(at,xt)),b.close()}else ke("Connection","WebChannel received:",Ee),F.ro(Ee)}}),z(l,lw.STAT_EVENT,Q=>{Q.stat===sc.PROXY?ke("Connection","Detected buffering proxy"):Q.stat===sc.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function mI(){return typeof window<"u"?window:null}function Dp(){return typeof document<"u"?document:null}function Rh(n){return new eS(n,!0)}class lm{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class rv{constructor(e,t,r,o,u,l,g,v){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new lm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ae.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ae.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ae.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yI extends rv{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Hw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:rt(),o=e.targetChange.targetIds||[],u=function(v,b){return v.gt?(Rt(void 0===b||"string"==typeof b),Er.fromBase64String(b||"")):(Rt(void 0===b||b instanceof Uint8Array),Er.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(v){const b=void 0===v.code?ce.UNKNOWN:Nw(v.code);return new Re(b,v.message||"")}(l);t=new E_(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=ls(n,r.document.name),u=Ur(r.document.updateTime),l=new Fr({mapValue:{fields:r.document.fields}}),g=An.newFoundDocument(o,u,l);t=new jg(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=ls(n,r.document),u=r.readTime?Ur(r.readTime):St.min(),l=An.newNoDocument(o,u);t=new jg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=ls(n,r.document);t=new jg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new zb(r.count||0);t=new Vw(r.targetId,u)}}var v;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return St.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?Ur(u.readTime):St.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Hg(this.It),t.addTarget=function(o,u){let l;const g=u.target;return l=Jf(g)?{documents:dp(o,g)}:{query:Eh(o,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Bw(o,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(l.readTime=wh(o,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Jb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Hg(this.It),t.removeTarget=e,this.Bo(t)}}class _I extends rv{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Ja(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,o){let u=Ur(r.updateTime?r.updateTime:o);return u.isEqual(St.min())&&(u=Ur(o)),new Gb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hg(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ih(this.It,r))};this.Bo(t)}}class vI extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class II{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(lr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class EI{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,ae.Z)(function*(){var v;ft(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ae.Z)(function*(b){const A=qe(b);A._u.add(4),yield kh(A),A.gu.set("Unknown"),A._u.delete(4),yield go(A)}),function(b){return v.apply(this,arguments)})(l))}))}),this.gu=new II(r,o)}}function go(n){return iv.apply(this,arguments)}function iv(){return iv=(0,ae.Z)(function*(n){if(ft(n))for(const e of n.wu)yield e(!0)}),iv.apply(this,arguments)}function kh(n){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ae.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Cc.apply(this,arguments)}function sv(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),DI(t)?hm(t):na(t).ko()&&bI(t,e))}function ql(n,e){const t=qe(n),r=na(t);t.du.delete(e),r.ko()&&ov(t,e),0===t.du.size&&(r.ko()?r.Fo():ft(t)&&t.gu.set("Unknown"))}function bI(n,e){n.yu.Mt(e.targetId),na(n).zo(e)}function ov(n,e){n.yu.Mt(e),na(n).Ho(e)}function hm(n){n.yu=new Zb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),na(n).start(),n.gu.uu()}function DI(n){return ft(n)&&!na(n).No()&&n.du.size>0}function ft(n){return 0===qe(n)._u.size}function CI(n){n.yu=void 0}function xD(n){return av.apply(this,arguments)}function av(){return av=(0,ae.Z)(function*(n){n.du.forEach((e,t)=>{bI(n,e)})}),av.apply(this,arguments)}function Ph(n,e){return uv.apply(this,arguments)}function uv(){return uv=(0,ae.Z)(function*(n,e){CI(n),DI(n)?(n.gu.hu(e),hm(n)):n.gu.set("Unknown")}),uv.apply(this,arguments)}function fm(n,e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,ae.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof E_&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(o,u){const l=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,l),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mn(n,r)}else if(e instanceof jg?n.yu.Gt(e):e instanceof Vw?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(St.min()))try{const r=yield cI(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.te(u);return l.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.du.get(v);b&&o.du.set(v,b.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach(g=>{const v=o.du.get(g);if(!v)return;o.du.set(g,v.withResumeToken(Er.EMPTY_BYTE_STRING,v.snapshotVersion)),ov(o,g);const b=new ds(v.target,g,1,v.sequenceNumber);bI(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Mn(n,r)}var r}),Nh.apply(this,arguments)}function Mn(n,e,t){return TI.apply(this,arguments)}function TI(){return TI=(0,ae.Z)(function*(n,e,t){if(!uc(e))throw e;n._u.add(1),yield kh(n),n.gu.set("Offline"),t||(t=()=>cI(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield go(n)}))}),TI.apply(this,arguments)}function cv(n,e){return e().catch(t=>Mn(n,t,e))}function Wl(n){return lv.apply(this,arguments)}function lv(){return lv=(0,ae.Z)(function*(n){const e=qe(n),t=Bs(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;SI(e);)try{const o=yield Z_(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,AI(e,o)}catch(o){yield Mn(e,o)}dv(e)&&hv(e)}),lv.apply(this,arguments)}function SI(n){return ft(n)&&n.fu.length<10}function AI(n,e){n.fu.push(e);const t=Bs(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function dv(n){return ft(n)&&!Bs(n).No()&&n.fu.length>0}function hv(n){Bs(n).start()}function MD(n){return fv.apply(this,arguments)}function fv(){return fv=(0,ae.Z)(function*(n){Bs(n).eu()}),fv.apply(this,arguments)}function RD(n){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,ae.Z)(function*(n){const e=Bs(n);for(const t of n.fu)e.Xo(t.mutations)}),Zl.apply(this,arguments)}function kD(n,e,t){return pv.apply(this,arguments)}function pv(){return pv=(0,ae.Z)(function*(n,e,t){const r=n.fu.shift(),o=yc.from(r,e,t);yield cv(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Wl(n)}),pv.apply(this,arguments)}function PD(n,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ae.Z)(function*(n,e){var t;e&&Bs(n).Yo&&(yield(t=(0,ae.Z)(function*(r,o){if(I_(u=o.code)&&u!==ce.ABORTED){const l=r.fu.shift();Bs(r).Mo(),yield cv(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Wl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),dv(n)&&hv(n)}),Oh.apply(this,arguments)}function gv(n,e){return pm.apply(this,arguments)}function pm(){return pm=(0,ae.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ft(t);t._u.add(3),yield kh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield go(t)}),pm.apply(this,arguments)}function gm(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,ae.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield go(t)):e||(t._u.add(2),yield kh(t),t.gu.set("Unknown"))}),mv.apply(this,arguments)}function na(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new yI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:xD.bind(null,n),Zr:Ph.bind(null,n),Wo:fm.bind(null,n)}),n.wu.push(function(){var e=(0,ae.Z)(function*(t){t?(n.pu.Mo(),DI(n)?hm(n):n.gu.set("Unknown")):(yield n.pu.stop(),CI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Bs(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new _I(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:MD.bind(null,n),Zr:PD.bind(null,n),tu:RD.bind(null,n),Zo:kD.bind(null,n)}),n.wu.push(function(){var e=(0,ae.Z)(function*(t){t?(n.Iu.Mo(),yield Wl(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class yv{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,g=new yv(e,t,l,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(n,e){if(lr("AsyncQueue",`${e}: ${n}`),uc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Fh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=_h(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Fh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _v{constructor(){this.Tu=new er($e.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kl{constructor(e,t,r,o,u,l,g,v,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Kl(e,t,Fh.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class xI{constructor(){this.Au=void 0,this.listeners=[]}}class ND{constructor(){this.queries=new Qa(e=>Rw(e),ph),this.onlineState="Unknown",this.Ru=new Set}}function mm(n,e){return vv.apply(this,arguments)}function vv(){return vv=(0,ae.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new xI),o)try{u.Au=yield t.onListen(r)}catch(l){const g=Lh(l,`Initialization of query '${tp(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&RI(t)}),vv.apply(this,arguments)}function wv(n,e){return MI.apply(this,arguments)}function MI(){return MI=(0,ae.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),MI.apply(this,arguments)}function rS(n,e){const t=qe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const g of l.listeners)g.Pu(o)&&(r=!0);l.Au=o}}r&&RI(t)}function iS(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function RI(n){n.Ru.forEach(e=>{e.next()})}class ym{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class _m{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class kI{constructor(e){this.It=e}Ji(e){return ls(this.It,e)}Yi(e){return e.metadata.exists?D_(this.It,e.document,!1):An.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class OD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Iv(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Kt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new kI(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const g=(t.get(l)||jt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function dI(n,e,t,r){return am.apply(this,arguments)}(e.localStore,new kI(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield DD(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Iv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Uh{constructor(e){this.key=e}}class PI{constructor(e){this.key=e}}class NI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=Vb(e),this.Qu=new Fh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new _v,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,g=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,M)=>{const F=o.get(A),z=kw(this.query,M)?M:null,Q=!!F&&this.mutatedKeys.has(F.key),Ae=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Ee=!1;F&&z?F.data.isEqual(z.data)?Q!==Ae&&(r.track({type:3,doc:z}),Ee=!0):this.Hu(F,z)||(r.track({type:2,doc:z}),Ee=!0,(v&&this.Gu(z,v)>0||b&&this.Gu(z,b)<0)&&(g=!0)):!F&&z?(r.track({type:0,doc:z}),Ee=!0):F&&!z&&(r.track({type:1,doc:F}),Ee=!0,(v||b)&&(g=!0)),Ee&&(z?(l=l.add(z),u=Ae?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,A)=>function(M,F){const z=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return z(M)-z(F)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,v=g!==this.qu;return this.qu=g,0!==u.length||v?{snapshot:new Kl(this.query,e.Qu,o,u,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _v,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new PI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Uh(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Kl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class LD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class FD{constructor(e){this.key=e,this.nc=!1}}class UD{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Qa(g=>Rw(g),ph),this.rc=new Map,this.oc=new Set,this.uc=new er($e.comparator),this.cc=new Map,this.ac=new rI,this.hc={},this.lc=new Map,this.fc=Ec.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function OI(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,ae.Z)(function*(n,e){const t=Cm(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield Dc(t.localStore,Oi(e));t.isPrimaryClient&&sv(t.remoteStore,l);const g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield bv(t,e,r,"current"===g,l.resumeToken)}return o}),Ev.apply(this,arguments)}function bv(n,e,t,r,o){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,ae.Z)(function*(n,e,t,r,o){n._c=(M,F,z)=>{return(Q=(0,ae.Z)(function*(Ae,Ee,vt,It){let pt=Ee.view.Wu(vt);pt.$i&&(pt=yield Ep(Ae.localStore,Ee.query,!1).then(({documents:Ft})=>Ee.view.Wu(Ft,pt)));const at=It&&It.targetChanges.get(Ee.targetId),xt=Ee.view.applyChanges(pt,Ae.isPrimaryClient,at);return Av(Ae,Ee.targetId,xt.Xu),xt.snapshot}),function(Ae,Ee,vt,It){return Q.apply(this,arguments)})(n,M,F,z);var Q};const u=yield Ep(n.localStore,e,!0),l=new NI(e,u.Hi),g=l.Wu(u.documents),v=vh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(g,n.isPrimaryClient,v);Av(n,t,b.Xu);const A=new LD(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),Yl.apply(this,arguments)}function VD(n,e){return vm.apply(this,arguments)}function vm(){return vm=(0,ae.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!ph(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ql(t.remoteStore,r.targetId),Vh(t,r.targetId)}).catch(Ha))):(Vh(t,r.targetId),yield zl(t.localStore,r.targetId,!0))}),vm.apply(this,arguments)}function wm(){return wm=(0,ae.Z)(function*(n,e,t){const r=Uv(n);try{const o=yield function(u,l){const g=qe(u),v=Sn.now(),b=l.reduce((F,z)=>F.add(z.key),jt());let A,M;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let z=Li(),Q=jt();return g.Gi.getEntries(F,b).next(Ae=>{z=Ae,z.forEach((Ee,vt)=>{vt.isValidDocument()||(Q=Q.add(Ee))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,z)).next(Ae=>{A=Ae;const Ee=[];for(const vt of l){const It=yh(vt,A.get(vt.key).overlayedDocument);null!=It&&Ee.push(new Yo(vt.key,It,kg(It.value.mapValue),xn.exists(!0)))}return g.mutationQueue.addMutationBatch(F,v,Ee,l)}).next(Ae=>{M=Ae;const Ee=Ae.applyToLocalDocumentSet(A,Q);return g.documentOverlayCache.saveOverlays(F,Ae.batchId,Ee)})}).then(()=>({batchId:M.batchId,changes:Lw(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,g){let v=u.hc[u.currentUser.toKey()];v||(v=new er(Lt)),v=v.insert(l,g),u.hc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield iu(r,o.changes),yield Wl(r.remoteStore)}catch(o){const u=Lh(o,"Failed to persist write");t.reject(u)}}),wm.apply(this,arguments)}function LI(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,ae.Z)(function*(n,e){const t=qe(n);try{const r=yield lI(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(Rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?Rt(l.nc):o.removedDocuments.size>0&&(Rt(l.nc),l.nc=!1))}),yield iu(t,r,e)}catch(r){yield Ha(r)}}),Im.apply(this,arguments)}function FI(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const g=l.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,l){const g=qe(u);g.onlineState=l;let v=!1;g.queries.forEach((b,A)=>{for(const M of A.listeners)M.bu(l)&&(v=!0)}),v&&RI(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Dv(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ae.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new er($e.comparator);l=l.insert(u,An.newNoDocument(u,St.min()));const g=jt().add(u),v=new sp(St.min(),new Map,new pn(Lt),l,g);yield LI(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),xv(r)}else yield zl(r.localStore,e,!1).then(()=>Vh(r,e,t)).catch(Ha)}),Cv.apply(this,arguments)}function UI(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,ae.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield sm(t.localStore,e);bm(t,r,null),Sv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield iu(t,o)}catch(o){yield Ha(o)}}),Em.apply(this,arguments)}function jD(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ae.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,l){const g=qe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return g.mutationQueue.lookupMutationBatch(v,l).next(A=>(Rt(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,b,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>g.localDocuments.getDocuments(v,b))})}(r.localStore,e);bm(r,e,t),Sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield iu(r,o)}catch(o){yield Ha(o)}}),Tv.apply(this,arguments)}function Cp(){return Cp=(0,ae.Z)(function*(n,e){const t=qe(n);ft(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Lh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Cp.apply(this,arguments)}function Sv(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function bm(n,e,t){const r=qe(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Vh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||VI(n,r)})}function VI(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ql(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),xv(n))}function Av(n,e,t){for(const r of t)r instanceof Uh?(n.ac.addReference(r.key,e),HD(n,r)):r instanceof PI?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||VI(n,r.key)):rt()}function HD(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),xv(n))}function xv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new $e(Kt.fromString(e)),r=n.fc.next();n.cc.set(r,new FD(t)),n.uc=n.uc.insert(t,r),sv(n.remoteStore,new ds(Oi(hh(t.path)),r,2,Ni.at))}}function iu(n,e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,ae.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],l=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,v)=>{l.push(r._c(v,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const A=Gl.Ci(v.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(g=(0,ae.Z)(function*(v,b){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(b,F=>se.forEach(F.Si,z=>A.persistence.referenceDelegate.addReference(M,F.targetId,z)).next(()=>se.forEach(F.Di,z=>A.persistence.referenceDelegate.removeReference(M,F.targetId,z)))))}catch(M){if(!uc(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const z=A.Ui.get(F),Ae=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);A.Ui=A.Ui.insert(F,Ae)}}}),function(v,b){return g.apply(this,arguments)})(r.localStore,u))}),Mv.apply(this,arguments)}function GD(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,ae.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield q_(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(g=>{g.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield iu(t,r.ji)}var o}),Dm.apply(this,arguments)}function BI(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let o=jt();const u=t.rc.get(e);if(!u)return o;for(const l of u){const g=t.ic.get(l);o=o.unionWith(g.view.ju)}return o}}function zD(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ae.Z)(function*(n,e){const t=qe(n),r=yield Ep(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&Av(t,e.targetId,o.Xu),o}),Rv.apply(this,arguments)}function jI(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,ae.Z)(function*(n,e){const t=qe(n);return Y_(t.localStore,e).then(r=>iu(t,r))}),kv.apply(this,arguments)}function qD(n,e,t,r){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ae.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(l,g){const v=qe(l),b=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,g).next(M=>M?v.localDocuments.getDocuments(A,M):se.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Wl(o.remoteStore):"acknowledged"===t||"rejected"===t?(bm(o,e,r||null),Sv(o,e),g=e,qe(qe(o.localStore).mutationQueue).An(g)):rt(),yield iu(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pv.apply(this,arguments)}function Tp(){return Tp=(0,ae.Z)(function*(n,e){const t=qe(n);if(Cm(t),Uv(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Ov(t,r.toArray());t.dc=!0,yield gm(t.remoteStore,!0);for(const u of o)sv(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Vh(t,l),zl(t.localStore,l,!0))),ql(t.remoteStore,l)}),yield o,yield Ov(t,r),function(u){const l=qe(u);l.cc.forEach((g,v)=>{ql(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new er($e.comparator)}(t),t.dc=!1,yield gm(t.remoteStore,!1)}}),Tp.apply(this,arguments)}function Ov(n,e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ae.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const l of e){let g;const v=r.rc.get(l);if(v&&0!==v.length){g=yield Dc(r.localStore,Oi(v[0]));for(const b of v){const A=r.ic.get(b),M=yield zD(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield K_(r.localStore,l);g=yield Dc(r.localStore,b),yield bv(r,$I(b),l,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),Sp.apply(this,arguments)}function $I(n){return Aw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WD(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Lv(n,e,t,r){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ae.Z)(function*(n,e,t,r){const o=qe(n);if(o.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Y_(o.localStore,Ub(u[0])),g=sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Er.EMPTY_BYTE_STRING);yield iu(o,l,g);break}case"rejected":yield zl(o.localStore,e,!0),Vh(o,e,r);break;default:rt()}}),Fv.apply(this,arguments)}function ZD(n,e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,ae.Z)(function*(n,e,t){const r=Cm(n);if(r.dc){for(const o of e){if(r.rc.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield K_(r.localStore,o),l=yield Dc(r.localStore,u);yield bv(r,$I(u),l.targetId,!1,l.resumeToken),sv(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield zl(r.localStore,o,!1).then(()=>{ql(r.remoteStore,o),Vh(r,o)}).catch(Ha))}}),Tc.apply(this,arguments)}function Cm(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dv.bind(null,e),e.sc.Wo=rS.bind(null,e.eventManager),e.sc.wc=iS.bind(null,e.eventManager),e}function Uv(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jD.bind(null,e),e}class Vv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.It=Rh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return uI(this.persistence,new oI,e.initialUser,this.It)}yc(e){return new fo(Vi.Bs,this.It)}gc(e){return new pI}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tm extends Vv{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Uv(r.Ac.syncEngine),yield Wl(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return uI(this.persistence,new oI,e.initialUser,this.It)}Tc(e,t){return new yD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Nb(t,this.persistence);return new Pb(e.asyncQueue,r)}yc(e){const t=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new z_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mI(),Dp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new pI}}class KD extends Tm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof nv&&(r.sharedClientState.syncEngine={Fr:qD.bind(null,o),$r:Lv.bind(null,o),Br:ZD.bind(null,o),vi:WD.bind(null,o),Mr:jI.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ae.Z)(function*(l){yield function Nv(n,e){return Tp.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=mI();if(!nv.C(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ap{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>FI(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=GD.bind(null,r.syncEngine),yield gm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ND}createDatastore(e){const t=Rh(e.databaseInfo.databaseId),r=new AD(e.databaseInfo);return new vI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>FI(this.syncEngine,g,0),l=gI.C()?new gI:new CD,new EI(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,g,v,b){const A=new UD(r,o,u,l,g,v);return b&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield kh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Bv(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jv(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sm(n){if(!$e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $v(n){if($e.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xp(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hv(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const HI=new Map;class GI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mp{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fw;switch(t.type){case"gapi":return new Cb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HI.get(e);t&&(ke("ComponentProvider","Removing Datastore"),HI.delete(e),t.terminate())}(this),Promise.resolve()}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class mo extends vi{constructor(e,t,r){super(e,t,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new $e(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function qI(n,e,...t){if(n=(0,Tt.m9)(n),Bv("collection","path",e),n instanceof Mp){const r=Kt.fromString(e,...t);return $v(r),new mo(n,null,r)}{if(!(n instanceof In||n instanceof mo))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return $v(r),new mo(n.firestore,null,r)}}function Gv(n,e,...t){if(n=(0,Tt.m9)(n),1===arguments.length&&(e=Jy.R()),Bv("doc","path",e),n instanceof Mp){const r=Kt.fromString(e,...t);return Sm(r),new In(n,null,new $e(r))}{if(!(n instanceof In||n instanceof mo))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return Sm(r),new In(n.firestore,n instanceof mo?n.converter:null,new $e(r))}}function QD(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),(n instanceof In||n instanceof mo)&&(e instanceof In||e instanceof mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zv(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),n instanceof vi&&e instanceof vi&&n.firestore===e.firestore&&ph(n._query,e._query)&&n.converter===e.converter}function WI(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZI{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new _m(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ae.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ae.Z)(function*(u,l){const g=qe(u),v=Hg(g.It)+"/documents",b={documents:l.map(z=>ap(g.It,z))},A=yield g._o("BatchGetDocuments",v,b,l.length),M=new Map;A.forEach(z=>{const Q=function $w(n,e){return"found"in e?function(t,r){Rt(!!r.found);const o=ls(t,r.found.name),u=Ur(r.found.updateTime),l=new Fr({mapValue:{fields:r.found.fields}});return An.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const o=ls(t,r.missing),u=Ur(r.readTime);return An.newNoDocument(o,u)}(n,e):rt()}(g.It,z);M.set(Q.key.toString(),Q)});const F=[];return l.forEach(z=>{const Q=M.get(z.toString());Rt(!!Q),F.push(Q)}),F}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ll(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new rp(u,e.precondition(u)))}),yield(r=(0,ae.Z)(function*(o,u){const l=qe(o),g=Hg(l.It)+"/documents",v={writes:u.map(b=>Ih(l.It,b))};yield l.ao("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tC{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new lm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ae.Z)(function*(){const t=new eC(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!xl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!I_(t)}return!1}}class nC{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=wr.UNAUTHENTICATED,this.clientId=Jy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ae.Z)(function*(g){ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Lh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function KI(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ae.Z)(function*(u){r.isEqual(u)||(yield q_(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),qv.apply(this,arguments)}function Bh(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xm(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gv(e.remoteStore,u)),n.onlineComponents=e}),Am.apply(this,arguments)}function xm(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,ae.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield KI(n,new Vv)),n.offlineComponents}),Mm.apply(this,arguments)}function kp(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ae.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield Bh(n,new Ap)),n.onlineComponents}),Rm.apply(this,arguments)}function Wv(n){return xm(n).then(e=>e.persistence)}function km(n){return xm(n).then(e=>e.localStore)}function YI(n){return kp(n).then(e=>e.remoteStore)}function Pm(n){return kp(n).then(e=>e.syncEngine)}function jh(n){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,ae.Z)(function*(n){const e=yield kp(n),t=e.eventManager;return t.onListen=OI.bind(null,e.syncEngine),t.onUnlisten=VD.bind(null,e.syncEngine),t}),Zv.apply(this,arguments)}function Nm(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(o,u,l,g,v){const b=new Rp({next:M=>{u.enqueueAndForget(()=>wv(o,A));const F=M.docs.has(l);!F&&M.fromCache?v.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&g&&"server"===g.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new ym(hh(l.path),b,{includeMetadataChanges:!0,Nu:!0});return mm(o,A)}(yield jh(n),n.asyncQueue,e,t,r)})),r.promise}function XI(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(o,u,l,g,v){const b=new Rp({next:M=>{u.enqueueAndForget(()=>wv(o,A)),M.fromCache&&"server"===g.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new ym(l,b,{includeMetadataChanges:!0,Nu:!0});return mm(o,A)}(yield jh(n),n.asyncQueue,e,t,r)})),r.promise}class oC{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new lm(this,"async_queue_retry"),this.Wc=()=>{const t=Dp();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ir;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!uc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=yv.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Yv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Om{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends Mp{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new oC,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fm(this),this._firestoreClient.terminate()}}function rr(n){return n._firestoreClient||Fm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Fm(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Al(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new nC(n._authCredentials,n._appCheckCredentials,n._queue,r)}function eE(n,e,t){const r=new Ir;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield KI(n,t),yield Bh(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;oc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function rE(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Er.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ia(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ou{constructor(e){this._methodName=e}}class Op{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const dC=/^__.*__$/;class iE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ya(e,this.data,t,this.fieldTransforms)}}class e0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class Lp{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $m(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(sE(this.sa)&&dC.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class oE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Rh(e)}da(e,t,r,o=!1){return new Lp({sa:e,methodName:t,fa:r,path:On.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ql(n){const e=n._freezeSettings(),t=Rh(n._databaseId);return new oE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fp(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);n0("Data must be an object, but it was:",l,r);const g=uE(r,l);let v,b;if(u.merge)v=new cs(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const F=Bm(e,M,t);if(!l.contains(F))throw new Re(ce.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Hm(A,F)||A.push(F)}v=new cs(A),b=l.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,b=l.fieldTransforms;return new iE(new Fr(g),v,b)}class $h extends ou{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function li(n,e,t){return new Lp({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Sc extends ou{_toFieldTransform(e){return new gh(e.path,new fc)}isEqual(e){return e instanceof Sc}}class hC extends ou{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=li(this,e,!0),r=this._a.map(u=>yo(u,t)),o=new Nl(r);return new gh(e.path,o)}isEqual(e){return this===e}}class fC extends ou{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=li(this,e,!0),r=this._a.map(u=>yo(u,t)),o=new Za(r);return new gh(e.path,o)}isEqual(e){return this===e}}class cS extends ou{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new pc(e.It,$b(e.It,this.wa));return new gh(e.path,t)}isEqual(e){return this===e}}function aE(n,e,t,r){const o=n.da(1,e,t);n0("Data must be an object, but it was:",o,r);const u=[],l=Fr.empty();cc(r,(v,b)=>{const A=jm(e,v,t);b=(0,Tt.m9)(b);const M=o.ca(A);if(b instanceof $h)u.push(A);else{const F=yo(b,M);null!=F&&(u.push(A),l.set(A,F))}});const g=new cs(u);return new e0(l,g,o.fieldTransforms)}function Um(n,e,t,r,o,u){const l=n.da(1,e,t),g=[Bm(e,r,t)],v=[o];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)g.push(Bm(e,u[F])),v.push(u[F+1]);const b=[],A=Fr.empty();for(let F=g.length-1;F>=0;--F)if(!Hm(b,g[F])){const z=g[F];let Q=v[F];Q=(0,Tt.m9)(Q);const Ae=l.ca(z);if(Q instanceof $h)b.push(z);else{const Ee=yo(Q,Ae);null!=Ee&&(b.push(z),A.set(z,Ee))}}const M=new cs(b);return new e0(A,M,l.fieldTransforms)}function t0(n,e,t,r=!1){return yo(t,n.da(r?4:3,e))}function yo(n,e){if(Vm(n=(0,Tt.m9)(n)))return n0("Unsupported field value:",e,n),uE(n,e);if(n instanceof ou)return function(t,r){if(!sE(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let g=yo(l,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $b(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Sn.fromDate(t);return{timestampValue:wh(r.It,o)}}if(t instanceof Sn){const o=new Sn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wh(r.It,o)}}if(t instanceof Op)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ia)return{bytesValue:Bw(r.It,t._byteString)};if(t instanceof In){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:op(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${xp(t)}`)}(n,e)}function uE(n,e){const t={};return _w(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(n,(r,o)=>{const u=yo(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Vm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof Op||n instanceof ia||n instanceof In||n instanceof ou)}function n0(n,e,t){if(!Vm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Bm(n,e,t){if((e=(0,Tt.m9)(e))instanceof su)return e._internalPath;if("string"==typeof e)return jm(n,e);throw $m("Field path arguments must be of type string or ",n,!1,void 0,t)}const pC=new RegExp("[~\\*/\\[\\]]");function jm(n,e,t){if(e.search(pC)>=0)throw $m(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw $m(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $m(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new Re(ce.INVALID_ARGUMENT,g+n+v)}function Hm(n,e){return n.some(t=>t.isEqual(e))}class Hh{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cE extends Hh{data(){return super.data()}}function Xl(n,e){return"string"==typeof e?jm(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}function Gm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zm{}function au(n,...e){for(const t of e)n=t._apply(n);return n}class gC extends zm{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ql(e.firestore),r=function(o,u,l,g,v,b,A){let M;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){a0(A,b);const z=[];for(const Q of A)z.push(pE(g,o,Q));M={arrayValue:{values:z}}}else M=pE(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||a0(A,b),M=t0(l,"where",A,"in"===b||"not-in"===b);const F=Kr.create(v,b,M);return function(z,Q){if(Q.dt()){const Ee=Og(z);if(null!==Ee&&!Ee.isEqual(Q.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${Q.field.toString()}'`);const vt=m_(z);null!==vt&&u0(0,Q.field,vt)}const Ae=function(Ee,vt){for(const It of Ee.filters)if(vt.indexOf(It.op)>=0)return It.op;return null}(z,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==Ae)throw new Re(ce.INVALID_ARGUMENT,Ae===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${Ae.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new vi(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new hc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Gh extends zm{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new qa(o,u);return function(g,v){if(null===m_(g)){const b=Og(g);null!==b&&u0(0,b,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new vi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new hc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class r0 extends zm{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new vi(e.firestore,e.converter,ep(e._query,this.Ia,this.Ta))}}class dE extends zm{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=o0(e,this.type,this.Ea,this.Aa);return new vi(e.firestore,e.converter,(o=t,new hc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class hE extends zm{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=o0(e,this.type,this.Ea,this.Aa);return new vi(e.firestore,e.converter,(o=t,new hc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function o0(n,e,t,r){if(t[0]=(0,Tt.m9)(t[0]),t[0]instanceof Hh)return function(o,u,l,g,v){if(!g)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of fh(o))if(A.field.isKeyField())b.push(dc(u,g.key));else{const M=g.data.field(A.field);if(vw(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=A.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new co(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ql(n.firestore);return function(u,l,g,v,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let z=0;z<b.length;z++){const Q=b[z];if(M[z].field.isKeyField()){if("string"!=typeof Q)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!Mw(u)&&-1!==Q.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const Ae=u.path.child(Kt.fromString(Q));if(!$e.isDocumentKey(Ae))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const Ee=new $e(Ae);F.push(dc(l,Ee))}else{const Ae=t0(g,v,Q);F.push(Ae)}}return new co(F,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function pE(n,e,t){if("string"==typeof(t=(0,Tt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!$e.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new $e(r))}if(t instanceof In)return dc(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(t)}.`)}function a0(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function u0(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class c0{convertValue(e,t="none"){switch(oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return cc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Op(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=i_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=Ga(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);Rt(rD(r));const o=new lc(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function qm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gE extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends Hh{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xl("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zh extends sa{data(e={}){return super.data(e)}}class uu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zh(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new zh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Jl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const g=new zh(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Jl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:mE(l.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function yE(n,e){return n instanceof sa&&e instanceof sa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof uu&&e instanceof uu&&n._firestore===e._firestore&&zv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ed extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function wC(n,e,t){n=zt(n,In);const r=zt(n.firestore,Rn),o=qm(n.converter,e,t);return td(r,[Fp(Ql(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,xn.none())])}function IC(n,e,t,...r){n=zt(n,In);const o=zt(n.firestore,Rn),u=Ql(o);let l;return l="string"==typeof(e=(0,Tt.m9)(e))||e instanceof su?Um(u,"updateDoc",n._key,e,t,r):aE(u,"updateDoc",n._key,e),td(o,[l.toMutation(n._key,xn.exists(!0))])}function Up(n,...e){var t,r,o;n=(0,Tt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Yv(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(Yv(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(o=M.complete)||void 0===o?void 0:o.bind(M)}let v,b,A;if(n instanceof In)b=zt(n.firestore,Rn),A=hh(n._key.path),v={next:M=>{e[l]&&e[l](qh(b,n,M))},error:e[l+1],complete:e[l+2]};else{const M=zt(n,vi);b=zt(M.firestore,Rn),A=M._query;const F=new ed(b);v={next:z=>{e[l]&&e[l](new uu(b,F,M,z))},error:e[l+1],complete:e[l+2]},Gm(n._query)}return function(M,F,z,Q){const Ae=new Rp(Q),Ee=new ym(F,Ae,z);return M.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return mm(yield jh(M),Ee)})),()=>{Ae.bc(),M.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return wv(yield jh(M),Ee)}))}}(rr(b),A,g,v)}function td(n,e){return function(t,r){const o=new Ir;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function BD(n,e,t){return wm.apply(this,arguments)}(yield Pm(t),r,o)})),o.promise}(rr(n),e)}function qh(n,e,t){const r=t.docs.get(e._key),o=new ed(n);return new sa(n,o,e._key,r,new Jl(t.hasPendingWrites,t.fromCache),e.converter)}const vS={maxAttempts:5};class Wm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ql(e)}set(e,t,r){this._verifyNotCommitted();const o=cu(e,this._firestore),u=qm(o.converter,t,r),l=Fp(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=cu(e,this._firestore);let l;return l="string"==typeof(t=(0,Tt.m9)(t))||t instanceof su?Um(this._dataReader,"WriteBatch.update",u._key,t,r,o):aE(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cu(e,this._firestore);return this._mutations=this._mutations.concat(new Ll(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cu(n,e){if((n=(0,Tt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class DC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ql(e)}get(e){const t=cu(e,this._firestore),r=new gE(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new Hh(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Hh(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=cu(e,this._firestore),u=qm(o.converter,t,r),l=Fp(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=cu(e,this._firestore);let l;return l="string"==typeof(t=(0,Tt.m9)(t))||t instanceof su?Um(this._dataReader,"Transaction.update",u._key,t,r,o):aE(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=cu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cu(e,this._firestore),r=new ed(this._firestore);return super.get(e).then(o=>new sa(this._firestore,r,t._key,o._document,new Jl(!1,!1),t.converter))}}function l0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wE(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function xC(){if(!function Ob(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$a=oi.SDK_VERSION,(0,oi._registerComponent)(new Ra.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Rn(new Db(t.getProvider("auth-internal")),new Kf(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(g.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(dw,"3.7.3",n),(0,oi.registerVersion)(dw,"3.7.3","esm2017")}();class Vp{constructor(e){this._delegate=e}static fromBase64String(e){return xC(),new Vp(ia.fromBase64String(e))}static fromUint8Array(e){return wE(),new Vp(ia.fromUint8Array(e))}toBase64(){return xC(),this._delegate.toBase64()}toUint8Array(){return wE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Km(n){return function IE(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class DS{enableIndexedDbPersistence(e,t){return function JI(n,e){rE(n=zt(n,Rn));const t=rr(n),r=n._freezeSettings(),o=new Ap;return eE(t,o,new Tm(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function uC(n){rE(n=zt(n,Rn));const e=rr(n),t=n._freezeSettings(),r=new Ap;return eE(e,r,new KD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uS(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(r){if(!Fs.C())return Promise.resolve();const o=r+"main";yield Fs.delete(o)}),function(r){return t.apply(this,arguments)})(Ip(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class js{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof lc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zI(n,e,t,r={}){var o;const u=(n=zt(n,Mp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&oc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=wr.MOCK_USER;else{l=(0,Tt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new wr(v)}n._authCredentials=new qT(new hw(l,g))}}(this._delegate,e,t,r)}enableNetwork(){return function Xv(n){return function rC(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Wv(n),t=yield YI(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),go(o)}(t)}))}(rr(n=zt(n,Rn)))}(this._delegate)}disableNetwork(){return function tE(n){return function Pp(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Wv(n),t=yield YI(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(o){const u=qe(o);u._u.add(0),yield kh(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(rr(n=zt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Qv(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function $D(n,e){return Cp.apply(this,arguments)}(yield Pm(e),t)})),t.promise}(rr(n=zt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function _S(n,e){return function Kv(n,e){const t=new Rp(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield jh(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield jh(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(rr(n=zt(n,Rn)),Yv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Kh(this,qI(this._delegate,e))}catch(t){throw wi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bi(this,Gv(this._delegate,e))}catch(t){throw wi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ii(this,function YD(n,e){if(n=zt(n,Mp),Bv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vi(n,null,(t=e,new hc(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw wi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function vE(n,e,t){n=zt(n,Rn);const r=Object.assign(Object.assign({},vS),t);return function(o){if(o.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const g=new Ir;return o.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const v=yield function QI(n){return kp(n).then(e=>e.datastore)}(o);new tC(o.asyncQueue,v,l,u,g).run()})),g.promise}(rr(n),o=>e(new DC(n,o)),r)}(this._delegate,t=>e(new EE(this,t)))}batch(){return rr(this._delegate),new hs(new Wm(this._delegate,e=>td(this._delegate,e)))}loadBundle(e){return function Jv(n,e){const t=rr(n=zt(n,Rn)),r=new Om;return function Np(n,e,t,r){const o=function(u,l){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return WI(v,b);if(v instanceof ArrayBuffer)return WI(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new ZI(v,l);var v}(t,Rh(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function sS(n,e,t){const r=qe(n);var o;(o=(0,ae.Z)(function*(u,l,g){try{const v=yield l.getMetadata();if(yield function(F,z){const Q=qe(F),Ae=Ur(z.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",Ee=>Q.Ns.getBundleMetadata(Ee,z.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(Ae)>=0)}(u.localStore,v))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(F=v).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);g._updateProgress(Iv(v));const b=new OD(v,u.localStore,l.It);let A=yield l.mc();for(;A;){const F=yield b.Fu(A);F&&g._updateProgress(F),A=yield l.mc()}const M=yield b.complete();return yield iu(u,M.Lu,void 0),yield function(F,z){const Q=qe(F);return Q.persistence.runTransaction("Save bundle","readwrite",Ae=>Q.Ns.saveBundleMetadata(Ae,z))}(u.localStore,v),g._completeWith(M.progress),Promise.resolve(M.Bu)}catch(v){return oc("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var F}),function(u,l,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Pm(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function cC(n,e){return function sC(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield km(n),e)}))}(rr(n=zt(n,Rn)),e).then(t=>t?new vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ii(this,t):null)}}class Ym extends c0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vp(new ia(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bi.forKey(t,this.firestore,null)}}class EE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}get(e){const t=Ac(e);return this._delegate.get(t).then(r=>new Wh(this._firestore,new sa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Ac(e);return r?(l0("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ac(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}}class hs{constructor(e){this._delegate=e}set(e,t,r){const o=Ac(e);return r?(l0("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ac(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=nd.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new nd(e,new Ym(e),t),o.set(t,u)),u}}nd.INSTANCES=new WeakMap;class Bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bi(t,new In(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Bi(t,new In(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Kh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Kh(this.firestore,qI(this._delegate,e))}catch(t){throw wi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tt.m9)(e))instanceof In&&QD(this._delegate,e)}set(e,t){t=l0("DocumentReference.set",t);try{return t?wC(this._delegate,e,t):wC(this._delegate,e)}catch(r){throw wi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IC(this._delegate,e):IC(this._delegate,e,t,...r)}catch(o){throw wi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function mS(n){return td(zt(n.firestore,Rn),[new Ll(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=bE(e),r=Qm(e,o=>new Wh(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Up(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _E(n){n=zt(n,In);const e=zt(n.firestore,Rn),t=rr(e),r=new ed(e);return function iC(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(o,u,l){try{const g=yield function(v,b){const A=qe(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,b))}(o,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=Lh(g,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield km(n),e,t);var r})),t.promise}(t,n._key).then(o=>new sa(e,r,n._key,o,new Jl(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hS(n){n=zt(n,In);const e=zt(n.firestore,Rn);return Nm(rr(e),n._key,{source:"server"}).then(t=>qh(e,n,t))}(this._delegate):function vC(n){n=zt(n,In);const e=zt(n.firestore,Rn);return Nm(rr(e),n._key).then(t=>qh(e,n,t))}(this._delegate),t.then(r=>new Wh(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bi(this.firestore,this._delegate.withConverter(e?nd.getInstance(this.firestore,e):null))}}function wi(n,e,t){return n.message=n.message.replace(e,t),n}function bE(n){for(const e of n)if("object"==typeof e&&!Km(e))return e;return{}}function Qm(n,e){var t,r;let o;return o=Km(n[0])?n[0]:Km(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Wh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yE(this._delegate,e._delegate)}}class Zh extends Wh{data(e){const t=this._delegate.data(e);return function bb(n,e){n||rt()}(void 0!==t),t}}class Ii{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}where(e,t,r){try{return new Ii(this.firestore,au(this._delegate,function lE(n,e,t){const r=e,o=Xl("where",n);return new gC(o,r,t)}(e,t,r)))}catch(o){throw wi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ii(this.firestore,au(this._delegate,function mC(n,e="asc"){const t=e,r=Xl("orderBy",n);return new Gh(r,t)}(e,t)))}catch(r){throw wi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ii(this.firestore,au(this._delegate,function s0(n){return Hv("limit",n),new r0("limit",n,"F")}(e)))}catch(t){throw wi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ii(this.firestore,au(this._delegate,function lS(n){return Hv("limitToLast",n),new r0("limitToLast",n,"L")}(e)))}catch(t){throw wi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ii(this.firestore,au(this._delegate,function dS(...n){return new dE("startAt",n,!0)}(...e)))}catch(t){throw wi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ii(this.firestore,au(this._delegate,function yC(...n){return new dE("startAfter",n,!1)}(...e)))}catch(t){throw wi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ii(this.firestore,au(this._delegate,function _C(...n){return new hE("endBefore",n,!1)}(...e)))}catch(t){throw wi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ii(this.firestore,au(this._delegate,function fE(...n){return new hE("endAt",n,!0)}(...e)))}catch(t){throw wi(t,"endAt()","Query.endAt()")}}isEqual(e){return zv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function pS(n){n=zt(n,vi);const e=zt(n.firestore,Rn),t=rr(e),r=new ed(e);return function ra(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(o,u,l){try{const g=yield Ep(o,u,!0),v=new NI(u,g.Hi),b=v.Wu(g.documents),A=v.applyChanges(b,!1);l.resolve(A.snapshot)}catch(g){const v=Lh(g,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield km(n),e,t);var r})),t.promise}(t,n._query).then(o=>new uu(e,r,n,o))}(this._delegate):"server"===e?.source?function gS(n){n=zt(n,vi);const e=zt(n.firestore,Rn),t=rr(e),r=new ed(e);return XI(t,n._query,{source:"server"}).then(o=>new uu(e,r,n,o))}(this._delegate):function fS(n){n=zt(n,vi);const e=zt(n.firestore,Rn),t=rr(e),r=new ed(e);return Gm(n._query),XI(t,n._query).then(o=>new uu(e,r,n,o))}(this._delegate),t.then(r=>new Xm(this.firestore,new uu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bE(e),r=Qm(e,o=>new Xm(this.firestore,new uu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Up(this._delegate,t,r)}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?nd.getInstance(this.firestore,e):null))}}class DE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ii(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zh(this._firestore,r))})}isEqual(e){return yE(this._delegate,e._delegate)}}class Kh extends Ii{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bi(this.firestore,e):null}doc(e){try{return new Bi(this.firestore,void 0===e?Gv(this._delegate):Gv(this._delegate,e))}catch(t){throw wi(t,"doc()","CollectionReference.doc()")}}add(e){return function yS(n,e){const t=zt(n.firestore,Rn),r=Gv(n),o=qm(n.converter,e);return td(t,[Fp(Ql(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Bi(this.firestore,t))}isEqual(e){return QD(this._delegate,e._delegate)}withConverter(e){return new Kh(this.firestore,this._delegate.withConverter(e?nd.getInstance(this.firestore,e):null))}}function Ac(n){return zt(n,In)}class h0{constructor(...e){this._delegate=new su(...e)}static documentId(){return new h0(On.keyField().canonicalString())}isEqual(e){return(e=(0,Tt.m9)(e))instanceof su&&this._delegate._internalPath.isEqual(e._internalPath)}}class lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function IS(){return new Sc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lu(e)}static delete(){const e=function wS(){return new $h("deleteField")}();return e._methodName="FieldValue.delete",new lu(e)}static arrayUnion(...e){const t=function CC(...n){return new hC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lu(t)}static arrayRemove(...e){const t=function TC(...n){return new fC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lu(t)}static increment(e){const t=function Zm(n){return new cS("increment",n)}(e);return t._methodName="FieldValue.increment",new lu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const xc={Firestore:js,GeoPoint:Op,Timestamp:Sn,Blob:Vp,Transaction:EE,WriteBatch:hs,DocumentReference:Bi,DocumentSnapshot:Wh,Query:Ii,QueryDocumentSnapshot:Zh,QuerySnapshot:Xm,CollectionReference:Kh,FieldPath:h0,FieldValue:lu,setLogLevel:function d0(n){!function Xy(n){Pi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function f0(n){(function CE(n,e){n.INTERNAL.registerComponent(new Ra.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},xc)))})(n,(e,t)=>new js(e,t,new DS)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Oo.Z);var Yr=O(7579),MC=O(6451),p0=O(5363),g0=O(8421);function br(n,e){return(0,Sr.e)((t,r)=>{let o=null,u=0,l=!1;const g=()=>l&&!o&&r.complete();t.subscribe((0,jn.x)(r,v=>{o?.unsubscribe();let b=0;const A=u++;(0,g0.Xf)(n(v,A)).subscribe(o=(0,jn.x)(r,M=>r.next(e?e(v,M,A,b++):M),()=>{o=null,g()}))},()=>{l=!0,g()}))})}var RC=O(6063);class kC extends Yr.x{constructor(e=1/0,t=1/0,r=RC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)g=v;g&&r.splice(0,g+1)}}}var TE=O(3099);function PC(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,TE.B)({connector:()=>new kC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Bp=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mc=O(515);function Jm(n){return n<=0?()=>Mc.E:(0,Sr.e)((e,t)=>{let r=0;e.subscribe((0,jn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Yh(n){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function m0(n=AE){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function AE(){return new Bp}function oa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qr((o,u)=>n(o,u,r)):si.y,Jm(1),t?Yh(e):m0(()=>new Bp))}var ey=O(576);function y0(n,e){return(0,ey.m)(e)?br(()=>n,e):br(()=>n)}var Qh=O(9468);O(5867);const v0=new Map,Hp={activated:!1,tokenObservers:[]},LC={initialized:!1,enabled:!1};function Qr(n){return v0.get(n)||Object.assign({},Hp)}function aa(){return LC}class ry{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ae.Z)(function*(){t.stop();try{t.pending=new Tt.BH,yield function MS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ji=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function D0(n){if(!Qr(n).activated)throw ji.create("use-before-activation",{appName:n.name})}function T0(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,ae.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const z=yield l.getHeartbeatsHeader();z&&(u["X-Firebase-Client"]=z)}const g={method:"POST",body:JSON.stringify(e),headers:u};let v,b;try{v=yield fetch(n,g)}catch(z){throw ji.create("fetch-network-error",{originalErrorMessage:null===(r=z)||void 0===r?void 0:r.message})}if(200!==v.status)throw ji.create("fetch-status-error",{httpStatus:v.status});try{b=yield v.json()}catch(z){throw ji.create("fetch-parse-error",{originalErrorMessage:null===(o=z)||void 0===o?void 0:o.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(A[1]),F=Date.now();return{token:b.token,expireTimeMillis:F+M,issuedAtTimeMillis:F}}),S0.apply(this,arguments)}function NE(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Xh="firebase-app-check-store";let A0=null;function x0(){return A0||(A0=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ji.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Xh,{keyPath:"compositeKey"})}}catch(r){e(ji.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),A0)}function R0(){return R0=(0,ae.Z)(function*(n,e){const r=(yield x0()).transaction(Xh,"readwrite"),u=r.objectStore(Xh).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var b;g(ji.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})}),R0.apply(this,arguments)}const oy=new ai.Yd("@firebase/app-check");function FE(n,e){return(0,Tt.hl)()?function BC(n,e){return function $C(n,e){return R0.apply(this,arguments)}(function HC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{oy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zC(){return aa().enabled}function qC(){return VE.apply(this,arguments)}function VE(){return VE=(0,ae.Z)(function*(){const n=aa();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),VE.apply(this,arguments)}const OS={error:"UNKNOWN_ERROR"};function i(n){return Tt.US.encodeString(JSON.stringify(n),!1)}function s(n){return a.apply(this,arguments)}function a(){return a=(0,ae.Z)(function*(n,e=!1){const t=n.app;D0(t);const r=Qr(t);let u,o=r.token;if(o&&!E(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(E(v)?o=v:yield FE(t,void 0))}if(!e&&o&&E(o))return{token:o.token};let g,l=!1;if(zC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=T0(NE(t,yield qC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield FE(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Qr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?oy.warn(v.message):oy.error(v),u=v}return o?u?g=E(o)?{token:o.token,internalError:u}:T(u):(g={token:o.token},r.token=o,yield FE(t,o)):g=T(u),l&&I(t,g),g}),a.apply(this,arguments)}function d(n,e){const t=Qr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function f(n){const{app:e}=n,t=Qr(e);let r=t.tokenRefresher;r||(r=function _(n){const{app:e}=n;return new ry((0,ae.Z)(function*(){let r;if(r=Qr(e).token?yield s(n,!0):yield s(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function I(n,e){const t=Qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function E(n){return n.expireTimeMillis-Date.now()>0}function T(n){return{token:i(OS),error:n}}class R{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qr(this.app);for(const t of e)d(this.app,t.next);return Promise.resolve()}}const LS="app-check-internal";!function lM(){(0,oi._registerComponent)(new Ra.wA("app-check",n=>function N(n,e){return new R(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LS).initialize()})),(0,oi._registerComponent)(new Ra.wA(LS,n=>function H(n){return{getToken:e=>s(n,e),addTokenListener:e=>function c(n,e,t,r){const{app:o}=n,u=Qr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&E(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),f(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>f(n))}(n,"INTERNAL",e),removeTokenListener:e=>d(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,oi.registerVersion)("@firebase/app-check","0.5.17")}();class jE{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var US=O(127);const VS=new m.OlP("angularfire2.auth.use-emulator"),BS=new m.OlP("angularfire2.auth.settings"),jS=new m.OlP("angularfire2.auth.tenant-id"),$S=new m.OlP("angularfire2.auth.langugage-code"),HS=new m.OlP("angularfire2.auth.use-device-language"),GS=new m.OlP("angularfire.auth.persistence"),zS=(n,e,t,r,o,u,l,g)=>(0,ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))v.settings[b]=A;return g&&v.setPersistence(g),v},[t,r,o,u,l,g]);let qS=(()=>{class n{constructor(t,r,o,u,l,g,v,b,A,M,F,z){const Q=new Yr.x,Ae=Ke(void 0).pipe((0,p0.Q)(l.outsideAngular),br(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,1277)))),(0,dt.U)(()=>(0,ur.on)(t,u,r)),(0,dt.U)(Ee=>zS(Ee,u,g,b,A,M,v,F)),PC({bufferSize:1,refCount:!1}));if(gr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{Ae.pipe(oa()).subscribe();const vt=Ae.pipe(br(at=>at.getRedirectResult().then(xt=>xt,()=>null)),yn.iC,PC({bufferSize:1,refCount:!1})),It=Ae.pipe(br(at=>new es.y(xt=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Ft=>xt.next(Ft),Ft=>xt.error(Ft),()=>xt.complete()))})))),pt=Ae.pipe(br(at=>new es.y(xt=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Ft=>xt.next(Ft),Ft=>xt.error(Ft),()=>xt.complete()))}))));this.authState=vt.pipe(y0(It),(0,Qh.R)(l.outsideAngular),(0,p0.Q)(l.insideAngular)),this.user=vt.pipe(y0(pt),(0,Qh.R)(l.outsideAngular),(0,p0.Q)(l.insideAngular)),this.idToken=this.user.pipe(br(at=>at?(0,Jt.D)(at.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(br(at=>at?(0,Jt.D)(at.getIdTokenResult()):Ke(null))),this.credential=(0,MC.T)(vt,Q,this.authState.pipe(qr(at=>!at))).pipe((0,dt.U)(at=>at?.user?at:null),(0,Qh.R)(l.outsideAngular),(0,p0.Q)(l.insideAngular))}return(0,ur.pX)(this,Ae,u,{spy:{apply:(Ee,vt,It)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&It.then(pt=>Q.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ur.Dh),m.LFG(ur.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(yn.HU),m.LFG(VS,8),m.LFG(BS,8),m.LFG(jS,8),m.LFG($S,8),m.LFG(HS,8),m.LFG(GS,8),m.LFG(jE,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function WS(n,e){return function mM(n,e=io.z){return new es.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function YC(n,e){return WS(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function $E(n,e){return YC(n,e).pipe(No(void 0),ts(),(0,dt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const v=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function ZS(n,e,t){return $E(n,t).pipe(ns((r,o)=>function _M(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Wu(n,e=si.y){return n=n??Ma,(0,Sr.e)((t,r)=>{let o,u=!0;t.subscribe((0,jn.x)(r,l=>{const g=e(l);(u||!n(o,g))&&(u=!1,o=g,r.next(l))}))})}(),(0,dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function QC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function KS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class YS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$E(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(No(void 0),ts(),qr(([r,o])=>o.length>0||!r),(0,dt.U)(([r,o])=>o),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ns((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new QS(this.ref.doc(e),this.afs)}}class QS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=eA(r,t);return new YS(o,u,this.afs)}snapshotChanges(){return function yM(n,e){return WS(n,e).pipe(No(void 0),ts(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(yn.iC)}}class wM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$E(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qr(t=>t.length>0),yn.iC):$E(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ns((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),yn.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(yn.iC)}}const XS=new m.OlP("angularfire2.enableFirestorePersistence"),JS=new m.OlP("angularfire2.firestore.persistenceSettings"),IM=new m.OlP("angularfire2.firestore.settings"),EM=new m.OlP("angularfire2.firestore.use-emulator");function eA(n,e=(t=>t)){return{query:e(n),ref:n}}let tA=(()=>{class n{constructor(t,r,o,u,l,g,v,b,A,M,F,z,Q,Ae,Ee,vt,It){this.schedulers=v;const pt=(0,ur.on)(t,g,r),at=A;M&&zS(pt,g,F,Q,Ae,Ee,z,vt),[this.firestore,this.persistenceEnabled$]=(0,ur.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const xt=g.runOutsideAngular(()=>pt.firestore());if(u&&xt.settings(u),at&&xt.useEmulator(...at),o&&!gr(l)){const Ft=()=>{try{return(0,Jt.D)(xt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(hr){return typeof console<"u"&&console.warn(hr),Ke(!1)}};return[xt,g.runOutsideAngular(Ft)]}return[xt,Ke(!1)]},[u,at,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=eA(o,r),g=this.schedulers.ngZone.run(()=>u);return new YS(g,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new wM(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new QS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ur.Dh),m.LFG(ur.xv,8),m.LFG(XS,8),m.LFG(IM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(yn.HU),m.LFG(JS,8),m.LFG(EM,8),m.LFG(qS,8),m.LFG(VS,8),m.LFG(BS,8),m.LFG(jS,8),m.LFG($S,8),m.LFG(HS,8),m.LFG(GS,8),m.LFG(jE,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bM=(()=>{class n{constructor(){US.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XS,useValue:!0},{provide:JS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tA]}),n})();const nA="firebasestorage.googleapis.com",rA="storageBucket";class dr extends Tt.ZR{constructor(e,t,r=0){super(XC(e),`Firebase Storage: ${t} (${XC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return XC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function XC(n){return"storage/"+n}function JC(){return new dr("unknown","An unknown error occurred, please check the error payload for server response.")}function iA(){return new dr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function sA(){return new dr("canceled","User canceled the upload/download.")}function oA(){return new dr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hy(n){return new dr("invalid-argument",n)}function aA(){return new dr("app-deleted","The Firebase app was deleted.")}function uA(n){return new dr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function L0(n,e){return new dr("invalid-format","String does not match format '"+n+"': "+e)}function F0(n){throw new dr("internal-error","Internal error: "+n)}class $i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$i.makeFromUrl(e,t)}catch{return new $i(e,"")}if(""===r.path)return r;throw function NM(n){return new dr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+o+"(/(.*))?$","i");function b(at){at.path_=decodeURIComponent(at.path)}const M=t.replace(/[.]/g,"\\."),pt=[{regex:g,indices:{bucket:1,path:3},postModify:function u(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===nA?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let at=0;at<pt.length;at++){const xt=pt[at],Ft=xt.regex.exec(e);if(Ft){let fu=Ft[xt.indices.path];fu||(fu=""),r=new $i(Ft[xt.indices.bucket],fu),xt.postModify(r);break}}if(null==r)throw function PM(n){return new dr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class VM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function HE(n){return"string"==typeof n||n instanceof String}function cA(n){return eT()&&n instanceof Blob}function eT(){return typeof Blob<"u"&&!(0,Tt.UG)()}function tT(n,e,t,r){if(r<e)throw hy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hy(`Invalid value for '${n}'. Expected ${t} or less.`)}function id(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function lA(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();function dA(n,e){const t=n>=500&&n<600,o=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||o||u}class zM{constructor(e,t,r,o,u,l,g,v,b,A,M,F=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=g,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.retry=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,Q)=>{this.resolve_=z,this.reject_=Q,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,l=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(g,g.getResponse());!function $M(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==g){const v=JC();v.serverResponse=g.getErrorText(),l(this.errorCallback_?this.errorCallback_(g,v):v)}else l(o.canceled?this.appDelete_?aA():sA():iA())};this.canceled_?t(0,new GE(!1,null,!0)):this.backoffId_=function BM(n,e,t){let r=1,o=null,u=null,l=!1,g=0;function v(){return 2===g}let b=!1;function A(...Ee){b||(b=!0,e.apply(null,Ee))}function M(Ee){o=setTimeout(()=>{o=null,n(z,v())},Ee)}function F(){u&&clearTimeout(u)}function z(Ee,...vt){if(b)return void F();if(Ee)return F(),void A.call(null,Ee,...vt);if(v()||l)return F(),void A.call(null,Ee,...vt);let pt;r<64&&(r*=2),1===g?(g=2,pt=0):pt=1e3*(r+Math.random()),M(pt)}let Q=!1;function Ae(Ee){Q||(Q=!0,F(),!b&&(null!==o?(Ee||(g=2),clearTimeout(o),M(0)):Ee||(g=1)))}return M(0),u=setTimeout(()=>{l=!0,Ae(!0)},t),Ae}((r,o)=>{if(o)return void r(!1,new GE(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const g=u.getErrorCode()===Jh.NO_ERROR,v=u.getStatus();if((!g||dA(v,this.additionalRetryCodes_))&&this.retry){const A=u.getErrorCode()===Jh.ABORT;return void r(!1,new GE(!1,null,A))}const b=-1!==this.successCodes_.indexOf(v);r(!0,new GE(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function jM(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class GE{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function XM(...n){const e=function QM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(eT())return new Blob(n);throw new dr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const _o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nT{constructor(e,t){this.data=e,this.contentType=t||null}}function rT(n,e){switch(n){case _o.RAW:return new nT(hA(e));case _o.BASE64:case _o.BASE64URL:return new nT(fA(n,e));case _o.DATA_URL:return new nT(function nR(n){const e=new pA(n);return e.base64?fA(_o.BASE64,e.rest):function tR(n){let e;try{e=decodeURIComponent(n)}catch{throw L0(_o.DATA_URL,"Malformed data URL.")}return hA(e)}(e.rest)}(e),function rR(n){return new pA(n).contentType}(e))}throw JC()}function hA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fA(n,e){switch(n){case _o.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw L0(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case _o.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw L0(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function eR(n){if(typeof atob>"u")throw function UM(n){return new dr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(o){throw o.message.includes("polyfill")?o:L0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class pA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw L0(_o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function iR(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Rc{constructor(e,t){let r=0,o="";cA(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(cA(this.data_)){const o=function JM(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Rc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Rc(r,!0)}}static getBlob(...e){if(eT()){const t=e.map(r=>r instanceof Rc?r.data_:r);return new Rc(XM.apply(null,t))}{const t=e.map(l=>HE(l)?rT(_o.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let g=0;g<l.length;g++)o[u++]=l[g]}),new Rc(o,!0)}}uploadData(){return this.data_}}function iT(n){let e;try{e=JSON.parse(n)}catch{return null}return function GM(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function gA(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function aR(n,e){return e}class fs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||aR}}let zE=null;function U0(){if(zE)return zE;const n=[];n.push(new fs("bucket")),n.push(new fs("generation")),n.push(new fs("metageneration")),n.push(new fs("name","fullPath",!0));const t=new fs("name");t.xform=function e(u,l){return function uR(n){return!HE(n)||n.length<2?n:gA(n)}(l)},n.push(t);const o=new fs("size");return o.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(o),n.push(new fs("timeCreated")),n.push(new fs("updated")),n.push(new fs("md5Hash",null,!0)),n.push(new fs("cacheControl",null,!0)),n.push(new fs("contentDisposition",null,!0)),n.push(new fs("contentEncoding",null,!0)),n.push(new fs("contentLanguage",null,!0)),n.push(new fs("contentType",null,!0)),n.push(new fs("metadata","customMetadata",!0)),zE=n,zE}function mA(n,e,t){const r=iT(e);return null===r?null:function lR(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function cR(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new $i(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function sT(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const yA="prefixes";class kc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pc(n){if(!n)throw JC()}function qE(n,e){return function t(r,o){const u=mA(n,o,e);return Pc(null!==u),u}}function fy(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function RM(){return new dr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function MM(){return new dr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function xM(n){return new dr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function kM(n){return new dr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}}function V0(n){const e=fy(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function AM(n){return new dr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function vA(n,e,t){const o=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new kc(o,"GET",qE(n,t),l);return g.errorHandler=V0(e),g}function mR(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const g=id(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new kc(g,"GET",function pR(n,e){return function t(r,o){const u=function fR(n,e,t){const r=iT(t);return null===r?null:function hR(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[yA])for(const o of t[yA]){const u=o.replace(/\/$/,""),l=n._makeStorageReference(new $i(e,u));r.prefixes.push(l)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new $i(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Pc(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=fy(e),A}function IA(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function wR(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class WE{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function oT(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Pc(!1)}return Pc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const DR={STATE_CHANGED:"state_changed"},ps={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function aT(n){switch(n){case"running":case"pausing":case"canceling":return ps.RUNNING;case"paused":return ps.PAUSED;case"success":return ps.SUCCESS;case"canceled":return ps.CANCELED;default:return ps.ERROR}}class CR{constructor(e,t,r){if(function HM(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function py(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class SR extends class TR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw F0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw F0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw F0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw F0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw F0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function du(){return new SR}class CA{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=U0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(dA(o.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=iA()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function IR(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l=IA(e,r,o),g={name:l.fullPath},v=id(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},M=sT(l,t),Q=new kc(v,"POST",function z(Ae){let Ee;oT(Ae);try{Ee=Ae.getResponseHeader("X-Goog-Upload-URL")}catch{Pc(!1)}return Pc(HE(Ee)),Ee},n.maxUploadRetryTime);return Q.urlParams=g,Q.headers=A,Q.body=M,Q.errorHandler=fy(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,du,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function ER(n,e,t,r){const v=new kc(t,"POST",function u(b){const A=oT(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pc(!1)}M||Pc(!1);const F=Number(M);return Pc(!isNaN(F)),new WE(F,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=fy(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,du,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new WE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let l;try{l=function bR(n,e,t,r,o,u,l,g){const v=new WE(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function LM(){return new dr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=v.total-v.current;let A=b;o>0&&(A=Math.min(A,o));const M=v.current;let z="";z=0===A?"finalize":b===A?"upload, finalize":"upload";const Q={"X-Goog-Upload-Command":z,"X-Goog-Upload-Offset":`${v.current}`},Ae=r.slice(M,M+A);if(null===Ae)throw oA();const pt=new kc(t,"POST",function Ee(at,xt){const Ft=oT(at,["active","final"]),hr=v.current+A,fu=r.size();let $T;return $T="final"===Ft?qE(e,u)(at,xt):null,new WE(hr,fu,"final"===Ft,$T)},e.maxUploadRetryTime);return pt.headers=Q,pt.body=Ae.uploadData(),pt.progressCallback=g||null,pt.errorHandler=fy(n),pt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const g=this._ref.storage._makeRequest(l,du,o,u,!1);this._request=g,g.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=vA(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,du,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function EA(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function g(){let pt="";for(let at=0;at<2;at++)pt+=Math.random().toString().slice(2);return pt}();l["Content-Type"]="multipart/related; boundary="+v;const b=IA(e,r,o),A=sT(b,t),z=Rc.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===z)throw oA();const Q={name:b.fullPath},Ae=id(u,n.host,n._protocol),vt=n.maxUploadRetryTime,It=new kc(Ae,"POST",qE(n,t),vt);return It.urlParams=Q,It.headers=l,It.body=z.uploadData(),It.errorHandler=fy(e),It}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,du,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=sA(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=aT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new CR(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(aT(this._state)){case ps.SUCCESS:py(this._resolve.bind(null,this.snapshot))();break;case ps.CANCELED:case ps.ERROR:py(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(aT(this._state)){case ps.RUNNING:case ps.PAUSED:e.next&&py(e.next.bind(e,this.snapshot))();break;case ps.SUCCESS:e.complete&&py(e.complete.bind(e))();break;default:e.error&&py(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gp{constructor(e,t){this._service=e,this._location=t instanceof $i?t:$i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gp(e,t)}get root(){const e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gA(this._location.path)}get storage(){return this._service}get parent(){const e=function sR(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $i(this._location.bucket,e);return new Gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw uA(e)}}function SA(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,ae.Z)(function*(n,e,t){const o=yield AA(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield SA(n,e,o.nextPageToken))}),uT.apply(this,arguments)}function AA(n,e){null!=e&&"number"==typeof e.maxResults&&tT("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mR(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,du)}function VR(n){n._throwIfRoot("getDownloadURL");const e=function yR(n,e,t){const o=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new kc(o,"GET",function gR(n,e){return function t(r,o){const u=mA(n,o,e);return Pc(null!==u),function dR(n,e,t,r){const o=iT(e);if(null===o||!HE(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return id("/b/"+l(n.bucket)+"/o/"+l(M),t,r)+lA({alt:"media",token:b})})[0]}(u,o,n.host,n._protocol)}}(n,t),l);return g.errorHandler=V0(e),g}(n.storage,n._location,U0());return n.storage.makeRequestWithTokens(e,du).then(t=>{if(null===t)throw function FM(){return new dr("no-download-url","The given file does not have any download URLs.")}();return t})}function xA(n,e){const t=function oR(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new $i(n._location.bucket,t);return new Gp(n.storage,r)}function MA(n,e){if(n instanceof cT){const t=n;if(null==t._bucket)throw function OM(){return new dr("no-default-bucket","No default bucket found. Did you set the '"+rA+"' property when initializing the app?")}();const r=new Gp(t,t._bucket);return null!=e?MA(r,e):r}return void 0!==e?xA(n,e):n}function HR(n,e){if(e&&function jR(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cT)return function $R(n,e){return new Gp(n,e)}(n,e);throw hy("To use ref(service, url), the first argument must be a Storage instance.")}return MA(n,e)}function RA(n,e){const t=e?.[rA];return null==t?null:$i.makeFromBucketSpec(t,n)}class cT{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=nA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?$i.makeFromBucketSpec(o,this._host):RA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$i.makeFromBucketSpec(this._url,e):RA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gp(this,e)}_makeRequest(e,t,r,o,u=!0){if(this._deleted)return new VM(aA());{const l=function YM(n,e,t,r,o,u,l=!0){const g=lA(n.urlParams),v=n.url+g,b=Object.assign({},n.headers);return function ZM(n,e){e&&(n["X-Firebase-GMPID"]=e)}(b,e),function qM(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(b,t),function WM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,u),function KM(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(b,r),new zM(v,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,l)}(e,this._appId,r,o,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const kA="@firebase/storage";function OA(n,e){return HR(n=(0,Tt.m9)(n),e)}function JR(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new cT(t,r,o,e,oi.SDK_VERSION)}!function ek(){(0,oi._registerComponent)(new Ra.wA("storage",JR,"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(kA,"0.9.14",""),(0,oi.registerVersion)(kA,"0.9.14","esm2017")}();class ZE{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class FA{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ZE(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?l=>t(new ZE(l,this,this._ref)):{next:t.next?l=>t.next(new ZE(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class UA{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sd(e,this._service))}get items(){return this._delegate.items.map(e=>new sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function XR(n,e){return xA(n,e)}(this._delegate,e);return new sd(t,this.storage)}get root(){return new sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new FA(function zR(n,e,t){return function NR(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new CA(n,new Rc(e),t)}(n=(0,Tt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=_o.RAW,r){this._throwIfRoot("putString");const o=rT(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new FA(new CA(this._delegate,new Rc(o.data,!0),u),this)}listAll(){return function KR(n){return function LR(n){const e={prefixes:[],items:[]};return SA(n,e).then(()=>e)}(n=(0,Tt.m9)(n))}(this._delegate).then(e=>new UA(e,this.storage))}list(e){return function ZR(n,e){return AA(n=(0,Tt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new UA(t,this.storage))}getMetadata(){return function qR(n){return function FR(n){n._throwIfRoot("getMetadata");const e=vA(n.storage,n._location,U0());return n.storage.makeRequestWithTokens(e,du)}(n=(0,Tt.m9)(n))}(this._delegate)}updateMetadata(e){return function WR(n,e){return function UR(n,e){n._throwIfRoot("updateMetadata");const t=function _R(n,e,t,r){const u=id(e.fullServerUrl(),n.host,n._protocol),g=sT(t,r),b=n.maxOperationRetryTime,A=new kc(u,"PATCH",qE(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=g,A.errorHandler=V0(e),A}(n.storage,n._location,e,U0());return n.storage.makeRequestWithTokens(t,du)}(n=(0,Tt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function YR(n){return VR(n=(0,Tt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QR(n){return function BR(n){n._throwIfRoot("deleteObject");const e=function vR(n,e){const r=id(e.fullServerUrl(),n.host,n._protocol),g=new kc(r,"DELETE",function l(v,b){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=V0(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,du)}(n=(0,Tt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw uA(e)}}class VA{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(BA(e))throw hy("ref() expected a child path but got a URL, use refFromURL instead.");return new sd(OA(this._delegate,e),this)}refFromURL(e){if(!BA(e))throw hy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$i.makeFromUrl(e,this._delegate.host)}catch{throw hy("refFromUrl() expected a valid full URL but got an invalid one.")}return new sd(OA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LA(n,e,t,r={}){!function GR(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,Tt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function BA(n){return/^[A-Za-z]+:\/\//.test(n)}function ik(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new VA(t,r)}function jA(n){const e=function ok(n){return new es.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function DM(n,e=io.z){return(0,Sr.e)((t,r)=>{let o=null,u=null,l=null;const g=()=>{if(o){o.unsubscribe(),o=null;const b=u;u=null,r.next(b)}};function v(){const b=l+n,A=e.now();if(A<b)return o=this.schedule(void 0,b-A),void r.add(o);g()}t.subscribe((0,jn.x)(r,b=>{u=b,l=e.now(),o||(o=e.schedule(v,n),r.add(o))},()=>{g(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function KE(n){return{getDownloadURL:()=>Ke(void 0).pipe(yn.fc,br(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>Ke(void 0).pipe(yn.fc,br(()=>n.getMetadata()),yn.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>KE(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>jA(n.put(e,t)),putString:(e,t,r)=>jA(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function sk(n){const e={TaskState:ps,TaskEvent:DR,StringFormat:_o,Storage:VA,Reference:sd};n.INTERNAL.registerComponent(new Ra.wA("storage-compat",ik,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Oo.Z);const ak=new m.OlP("angularfire2.storageBucket"),uk=new m.OlP("angularfire2.storage.maxUploadRetryTime"),ck=new m.OlP("angularfire2.storage.maxOperationRetryTime"),lk=new m.OlP("angularfire2.storage.use-emulator");let dk=(()=>{class n{constructor(t,r,o,u,l,g,v,b,A,M){const F=(0,ur.on)(t,l,r);this.storage=(0,ur.cc)(`${F.name}.storage.${o}`,"AngularFireStorage",F.name,()=>{const z=l.runOutsideAngular(()=>F.storage(o||void 0)),Q=A;return Q&&z.useEmulator(...Q),v&&z.setMaxUploadRetryTime(v),b&&z.setMaxOperationRetryTime(b),z},[v,b])}ref(t){return KE(this.storage.ref(t))}refFromURL(t){return KE(this.storage.refFromURL(t))}upload(t,r,o){return KE(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ur.Dh),m.LFG(ur.xv,8),m.LFG(ak,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(yn.HU),m.LFG(uk,8),m.LFG(ck,8),m.LFG(lk,8),m.LFG(jE,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),fk=(()=>{class n{constructor(){US.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[dk],imports:[hk]}),n})();const $A_firebaseConfig={apiKey:"AIzaSyBQujecS6EtrN0HG8TCyW9DurdU5jgFKsk",authDomain:"planning-poker-bbt.firebaseapp.com",databaseURL:"https://planning-poker-bbt-default-rtdb.firebaseio.com",projectId:"planning-poker-bbt",storageBucket:"planning-poker-bbt.appspot.com",messagingSenderId:"851619405106",appId:"1:851619405106:web:57c50f725eb9bf7ba64b2b",measurementId:"G-RW1DGDDRN4"};var YE=O(727);class hu extends Yr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:pk}=Array,{getPrototypeOf:gk,prototype:mk,keys:yk}=Object;const{isArray:wk}=Array;var Dk=O(9672);function HA(...n){const e=(0,cr.yG)(n),t=(0,cr.jO)(n),{args:r,keys:o}=function _k(n){if(1===n.length){const e=n[0];if(pk(e))return{args:e,keys:null};if(function vk(n){return n&&"object"==typeof n&&gk(n)===mk}(e)){const t=yk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Jt.D)([],e);const u=new es.y(function Ck(n,e,t=si.y){return r=>{GA(e,()=>{const{length:o}=n,u=new Array(o);let l=o,g=o;for(let v=0;v<o;v++)GA(e,()=>{const b=(0,Jt.D)(n[v],e);let A=!1;b.subscribe((0,jn.x)(r,M=>{u[v]=M,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function bk(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):si.y));return t?u.pipe(function Ek(n){return(0,dt.U)(e=>function Ik(n,e){return wk(e)?n(...e):n(e)}(n,e))}(t)):u}function GA(n,e,t){n?(0,Dk.f)(t,n,e):e()}function zA(n){return new es.y(e=>{(0,g0.Xf)(n()).subscribe(e)})}var Tk=O(9635);function B0(n,e){const t=(0,ey.m)(n)?n:()=>n,r=o=>o.error(t());return new es.y(e?o=>e.schedule(r,0,o):r)}function lT(){return(0,Sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qA extends es.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new YE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=YE.w0.EMPTY)}return e}refCount(){return lT()(this)}}var gs=O(5577);function zp(n,e){return(0,ey.m)(e)?(0,gs.z)(n,e,1):(0,gs.z)(n,1)}var Hi=O(8505);function ef(n){return(0,Sr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,jn.x)(t,void 0,void 0,l=>{u=(0,g0.Xf)(n(l,ef(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function dT(n){return n<=0?()=>Mc.E:(0,Sr.e)((e,t)=>{let r=[];e.subscribe((0,jn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function WA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qr((o,u)=>n(o,u,r)):si.y,dT(1),t?Yh(e):m0(()=>new Bp))}function hT(n){return(0,Sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",j0=Symbol("RouteTitle");class xk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gy(n){return new xk(n)}function Mk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))o[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Nc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ZA(n[o],e[o]))return!1;return!0}function ZA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function KA(n){return Array.prototype.concat.apply([],n)}function YA(n){return n.length>0?n[n.length-1]:null}function Ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function tf(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):Ke(n)}const Pk={exact:function JA(n,e,t){if(!Wp(n.segments,e.segments)||!QE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!JA(n.children[r],e.children[r],t))return!1;return!0},subset:ex},QA={exact:function Nk(n,e){return Nc(n,e)},subset:function Ok(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZA(n[t],e[t]))},ignored:()=>!0};function XA(n,e,t){return Pk[t.paths](n.root,e.root,t.matrixParams)&&QA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ex(n,e,t){return tx(n,e,e.segments,t)}function tx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Wp(o,t)||e.hasChildren()||!QE(o,t,r))}if(n.segments.length===t.length){if(!Wp(n.segments,t)||!QE(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ex(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Wp(n.segments,o)&&QE(n.segments,o,r)&&n.children[qt])&&tx(n.children[qt],e,u,r)}}function QE(n,e,t){return e.every((r,o)=>QA[t](n[o].parameters,r.parameters))}class qp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gy(this.queryParams)),this._queryParamMap}toString(){return Uk.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ei(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XE(this)}}class $0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gy(this.parameters)),this._parameterMap}toString(){return sx(this)}}function Wp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let nx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new pT},providedIn:"root"}),n})();class pT{parse(e){const t=new Wk(e);return new qp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${H0(e.root,!0)}`,r=function jk(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${JE(t)}=${JE(o)}`).join("&"):`${JE(t)}=${JE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function Vk(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const Uk=new pT;function XE(n){return n.segments.map(e=>sx(e)).join("/")}function H0(n,e){if(!n.hasChildren())return XE(n);if(e){const t=n.children[qt]?H0(n.children[qt],!1):"",r=[];return Ei(n.children,(o,u)=>{u!==qt&&r.push(`${u}:${H0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Fk(n,e){let t=[];return Ei(n.children,(r,o)=>{o===qt&&(t=t.concat(e(r,o)))}),Ei(n.children,(r,o)=>{o!==qt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===qt?[H0(n.children[qt],!1)]:[`${o}:${H0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${XE(n)}/${t[0]}`:`${XE(n)}/(${t.join("//")})`}}function rx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function JE(n){return rx(n).replace(/%3B/gi,";")}function gT(n){return rx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eb(n){return decodeURIComponent(n)}function ix(n){return eb(n.replace(/\+/g,"%20"))}function sx(n){return`${gT(n.path)}${function Bk(n){return Object.keys(n).map(e=>`;${gT(e)}=${gT(n[e])}`).join("")}(n.parameters)}`}const $k=/^[^\/()?;=#]+/;function tb(n){const e=n.match($k);return e?e[0]:""}const Hk=/^[^=?&#]+/,zk=/^[^&#]+/;class Wk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Yt(e,t)),r}parseSegment(){const e=tb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new $0(eb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=tb(this.remaining);o&&(r=o,this.capture(r))}e[eb(t)]=eb(r)}parseQueryParam(e){const t=function Gk(n){const e=n.match(Hk);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function qk(n){const e=n.match(zk);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=ix(t),u=ix(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tb(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[qt]:new Yt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function mT(n){return n.segments.length>0?new Yt([],{[qt]:n}):n}function nb(n){const e={};for(const r of Object.keys(n.children)){const u=nb(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Zk(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function Zp(n){return n instanceof qp}function Qk(n,e,t,r,o){if(0===t.length)return my(e.root,e.root,e.root,r,o);const u=function ux(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ax(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Ei(u.outlets,(v,b)=>{g[b]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new ax(t,e,r)}(t);return u.toRoot()?my(e.root,e.root,new Yt([],{}),r,o):function l(v){const b=function Jk(n,e,t,r){if(n.isAbsolute)return new yy(e.root,!0,0);if(-1===r)return new yy(t,t===e.root,0);return function cx(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new m.vHH(4005,!1);o=r.segments.length}return new yy(r,!1,o-u)}(t,r+(G0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=b.processChildren?q0(b.segmentGroup,b.index,u.commands):_T(b.segmentGroup,b.index,u.commands);return my(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function G0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function z0(n){return"object"==typeof n&&null!=n&&n.outlets}function my(n,e,t,r,o){let l,u={};r&&Ei(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),l=n===e?t:ox(n,e,t);const g=mT(nb(l));return new qp(g,u,o)}function ox(n,e,t){const r={};return Ei(n.children,(o,u)=>{r[u]=o===e?t:ox(o,e,t)}),new Yt(n.segments,r)}class ax{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&G0(r[0]))throw new m.vHH(4003,!1);const o=r.find(z0);if(o&&o!==YA(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _T(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return q0(n,e,t);const r=function tP(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],g=t[r];if(z0(g))break;const v=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!dx(v,b,l))return u;r+=2}else{if(!dx(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Yt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new Yt(n.segments.slice(r.pathIndex),n.children),q0(u,0,o)}return r.match&&0===o.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?vT(n,e,t):r.match?q0(n,0,o):vT(n,e,t)}function q0(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function eP(n){return z0(n[0])?n[0].outlets:{[qt]:n}}(t),o={};return Ei(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=_T(n.children[l],e,u))}),Ei(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Yt(n.segments,o)}}function vT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(z0(u)){const v=nP(u.outlets);return new Yt(r,v)}if(0===o&&G0(t[0])){r.push(new $0(n.segments[e].path,lx(t[0]))),o++;continue}const l=z0(u)?u.outlets[qt]:`${u}`,g=o<t.length-1?t[o+1]:null;l&&g&&G0(g)?(r.push(new $0(l,lx(g))),o+=2):(r.push(new $0(l,{})),o++)}return new Yt(r,{})}function nP(n){const e={};return Ei(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=vT(new Yt([],{}),0,t))}),e}function lx(n){const e={};return Ei(n,(t,r)=>e[r]=`${t}`),e}function dx(n,e,t){return n==t.path&&Nc(e,t.parameters)}class od{constructor(e,t){this.id=e,this.url=t}}class wT extends od{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kp extends od{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rb extends od{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hx extends od{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rP extends od{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iP extends od{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sP extends od{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oP extends od{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aP extends od{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uP{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hP{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class px{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=IT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=IT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ET(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ET(e,this._root).map(t=>t.value)}}function IT(n,e){if(n===e.value)return e;for(const t of e.children){const r=IT(n,t);if(r)return r}return null}function ET(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ET(n,t);if(r.length)return r.unshift(e),r}return[]}class ad{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _y(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gx extends px{constructor(e,t){super(e),this.snapshot=t,bT(this,e)}toString(){return this.snapshot.toString()}}function mx(n,e){const t=function gP(n,e){const l=new ib([],{},{},"",{},qt,e,null,n.root,-1,{});return new _x("",new ad(l,[]))}(n,e),r=new hu([new $0("",{})]),o=new hu({}),u=new hu({}),l=new hu({}),g=new hu(""),v=new nf(r,o,l,g,u,qt,e,t.root);return v.snapshot=t.root,new gx(new ad(v,[]),t)}class nf{constructor(e,t,r,o,u,l,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,dt.U)(b=>b[j0]))??Ke(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>gy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>gy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function mP(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ib{constructor(e,t,r,o,u,l,g,v,b,A,M,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.[j0],this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=F??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _x extends px{constructor(e,t){super(t),this.url=e,bT(this,t)}toString(){return vx(this._root)}}function bT(n,e){e.value._routerState=n,e.children.forEach(t=>bT(n,t))}function vx(n){const e=n.children.length>0?` { ${n.children.map(vx).join(", ")} } `:"";return`${n.value}${e}`}function DT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Nc(e.params,t.params)||n.params.next(t.params),function Rk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Nc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function CT(n,e){const t=Nc(n.params,e.params)&&function Lk(n,e){return Wp(n,e)&&n.every((t,r)=>Nc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||CT(n.parent,e.parent))}function W0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function _P(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return W0(n,r,o);return W0(n,r)})}(n,e,t);return new ad(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>W0(n,g)),l}}const r=function vP(n){return new nf(new hu(n.url),new hu(n.params),new hu(n.queryParams),new hu(n.fragment),new hu(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>W0(n,u));return new ad(r,o)}}const TT="ngNavigationCancelingError";function wx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Ix(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Ix(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[TT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ex(n){return bx(n)&&Zp(n.url)}function bx(n){return n&&n[TT]}class wP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Z0,this.attachRef=null}}let Z0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sb=!1;let ST=(()=>{class n{constructor(t,r,o,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=o||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,sb);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,sb);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,sb);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,sb);this._activatedRoute=t;const o=this.location,l=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new IP(t,g,o.injector);if(r&&function EP(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,v)}else this.activated=o.createComponent(l,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Z0),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class IP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===nf?this.route:e===Z0?this.childContexts:this.parent.get(e,t)}}let AT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[ST],encapsulation:2}),n})();function Dx(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function MT(n){const e=n.children&&n.children.map(MT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=AT),t}function ua(n){return n.outlet||qt}function Cx(n,e){const t=n.filter(r=>ua(r)===e);return t.push(...n.filter(r=>ua(r)!==e)),t}function K0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class SP{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=_y(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Ei(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=_y(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=_y(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=_y(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new fP(u.value.snapshot))}),e.children.length&&this.forwardEvent(new dP(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(DT(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),DT(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=K0(o.snapshot),v=g?.get(m._Vd)??null;l.attachRef=null,l.route=o,l.resolver=v,l.injector=g,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Tx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ob{constructor(e,t){this.component=e,this.route=t}}function AP(n,e,t){const r=n._root;return Y0(r,e?e._root:null,t,[r.value])}function vy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Y0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=_y(e);return n.children.forEach(l=>{(function MP(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function RP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wp(n.url,e.url)||!Nc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!CT(n,e)||!Nc(n.queryParams,e.queryParams);default:return!CT(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new Tx(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Y0(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new ob(g.outlet.component,l))}else l&&Q0(e,g,o),o.canActivateChecks.push(new Tx(r)),Y0(n,null,u.component?g?g.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Ei(u,(l,g)=>Q0(l,t.getContext(g),o)),o}function Q0(n,e,t){const r=_y(n),o=n.value;Ei(r,(u,l)=>{Q0(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ob(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function X0(n){return"function"==typeof n}function RT(n){return n instanceof Bp||"EmptyError"===n?.name}const ab=Symbol("INITIAL_VALUE");function wy(){return br(n=>HA(n.map(e=>e.pipe(Jm(1),No(ab)))).pipe((0,dt.U)(e=>{for(const t of e)if(!0!==t){if(t===ab)return ab;if(!1===t||t instanceof qp)return t}return!0}),qr(e=>e!==ab),Jm(1)))}function Sx(n){return(0,Tk.z)((0,Hi.b)(e=>{if(Zp(e))throw wx(0,e)}),(0,dt.U)(e=>!0===e))}const kT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ax(n,e,t,r,o){const u=PT(n,e,t);return u.matched?function ZP(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Ke(o.map(l=>{const g=vy(l,n);return tf(function FP(n){return n&&X0(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(wy(),Sx()):Ke(!0)}(r=Dx(e,r),e,t).pipe((0,dt.U)(l=>!0===l?u:{...kT})):Ke(u)}function PT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Mk)(t,n,e);if(!o)return{...kT};const u={};Ei(o.posParams,(g,v)=>{u[v]=g.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function ub(n,e,t,r,o="corrected"){if(t.length>0&&function QP(n,e,t){return t.some(r=>cb(n,e,r)&&ua(r)!==qt)}(n,t,r)){const l=new Yt(e,function YP(n,e,t,r){const o={};o[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ua(u)!==qt){const l=new Yt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[ua(u)]=l}return o}(n,e,r,new Yt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function XP(n,e,t){return t.some(r=>cb(n,e,r))}(n,t,r)){const l=new Yt(n.segments,function KP(n,e,t,r,o,u){const l={};for(const g of r)if(cb(n,t,g)&&!o[ua(g)]){const v=new Yt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[ua(g)]=v}return{...o,...l}}(n,e,t,r,n.children,o));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Yt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function cb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function xx(n,e,t,r){return!!(ua(n)===r||r!==qt&&cb(e,t,n))&&("**"===n.path||PT(e,n,t).matched)}function Mx(n,e,t){return 0===e.length&&!n.children[t]}const lb=!1;class db{constructor(e){this.segmentGroup=e||null}}class Rx{constructor(e){this.urlTree=e}}function J0(n){return B0(new db(n))}function kx(n){return B0(new Rx(n))}class nN{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=ub(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,dt.U)(u=>this.createUrlTree(nb(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ef(u=>{if(u instanceof Rx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof db?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,dt.U)(o=>this.createUrlTree(nb(o),e.queryParams,e.fragment))).pipe(ef(o=>{throw o instanceof db?this.noMatchError(o):o}))}noMatchError(e){return new m.vHH(4002,lb)}createUrlTree(e,t,r){const o=mT(e);return new qp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(u=>new Yt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Jt.D)(o).pipe(zp(u=>{const l=r.children[u],g=Cx(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,dt.U)(v=>({segment:v,outlet:u})))}),ns((u,l)=>(u[l.outlet]=l.segment,u),{}),WA())}expandSegment(e,t,r,o,u,l){return(0,Jt.D)(r).pipe(zp(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,l).pipe(ef(b=>{if(b instanceof db)return Ke(null);throw b}))),oa(g=>!!g),ef((g,v)=>{if(RT(g))return Mx(t,o,u)?Ke(new Yt([],{})):J0(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,l,g){return xx(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):J0(t):J0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?kx(u):this.lineralizeSegments(r,u).pipe((0,gs.z)(l=>{const g=new Yt(l,{});return this.expandSegment(e,g,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:g,consumedSegments:v,remainingSegments:b,positionalParamSegments:A}=PT(t,o,u);if(!g)return J0(t);const M=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?kx(M):this.lineralizeSegments(o,M).pipe((0,gs.z)(F=>this.expandSegment(e,t,r,F.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=Dx(r,e),r.loadChildren?(r._loadedRoutes?Ke({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Yt(o,{})))):Ke(new Yt(o,{}))):Ax(t,r,o,e).pipe(br(({matched:l,consumedSegments:g,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,gs.z)(A=>{const M=A.injector??e,F=A.routes,{segmentGroup:z,slicedSegments:Q}=ub(t,g,v,F),Ae=new Yt(z.segments,z.children);if(0===Q.length&&Ae.hasChildren())return this.expandChildren(M,F,Ae).pipe((0,dt.U)(pt=>new Yt(g,pt)));if(0===F.length&&0===Q.length)return Ke(new Yt(g,{}));const Ee=ua(r)===u;return this.expandSegment(M,Ae,F,Q,Ee?qt:u,!0).pipe((0,dt.U)(It=>new Yt(g.concat(It.segments),It.children)))})):J0(t)))}getChildConfig(e,t,r){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):function WP(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Ke(!0):Ke(o.map(l=>{const g=vy(l,n);return tf(function PP(n){return n&&X0(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(wy(),Sx())}(e,t,r).pipe((0,gs.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Hi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function eN(n){return B0(Ix(lb,3))}())):Ke({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Ke(r);if(o.numberOfChildren>1||!o.children[qt])return B0(new m.vHH(4e3,lb));o=o.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new qp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ei(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Ei(t.children,(g,v)=>{l[v]=this.createSegmentGroup(e,g,r,o)}),new Yt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new m.vHH(4001,lb);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class iN{}class aN{constructor(e,t,r,o,u,l,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=ub(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,dt.U)(t=>{if(null===t)return null;const r=new ib([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ad(r,t),u=new _x(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=yx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(zp(o=>{const u=r.children[o],l=Cx(t,o);return this.processSegmentGroup(e,l,u,o)}),ns((o,u)=>o&&u?(o.push(...u),o):null),function Sk(n,e=!1){return(0,Sr.e)((t,r)=>{let o=0;t.subscribe((0,jn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),Yh(null),WA(),(0,dt.U)(o=>{if(null===o)return null;const u=Px(o);return function uN(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Jt.D)(t).pipe(zp(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),oa(l=>!!l),ef(l=>{if(RT(l))return Mx(r,o,u)?Ke([]):Ke(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!xx(t,r,o,u))return Ke(null);let l;if("**"===t.path){const g=o.length>0?YA(o).parameters:{},v=Ox(r)+o.length;l=Ke({snapshot:new ib(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Fx(t),ua(t),t.component??t._loadedComponent??null,t,Nx(r),v,Ux(t),v),consumedSegments:[],remainingSegments:[]})}else l=Ax(r,t,o,e).pipe((0,dt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:A})=>{if(!g)return null;const M=Ox(r)+v.length;return{snapshot:new ib(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Fx(t),ua(t),t.component??t._loadedComponent??null,t,Nx(r),M,Ux(t),M),consumedSegments:v,remainingSegments:b}}));return l.pipe(br(g=>{if(null===g)return Ke(null);const{snapshot:v,consumedSegments:b,remainingSegments:A}=g;e=t._injector??e;const M=t._loadedInjector??e,F=function cN(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:Q}=ub(r,b,A,F.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===Q.length&&z.hasChildren())return this.processChildren(M,F,z).pipe((0,dt.U)(Ee=>null===Ee?null:[new ad(v,Ee)]));if(0===F.length&&0===Q.length)return Ke([new ad(v,[])]);const Ae=ua(t)===u;return this.processSegment(M,F,z,Q,Ae?qt:u).pipe((0,dt.U)(Ee=>null===Ee?null:[new ad(v,Ee)]))}))}}function lN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Px(n){const e=[],t=new Set;for(const r of n){if(!lN(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Px(r.children);e.push(new ad(r.value,o))}return e.filter(r=>!t.has(r))}function Nx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ox(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Fx(n){return n.data||{}}function Ux(n){return n.resolve||{}}function Vx(n){return"string"==typeof n.title||null===n.title}function NT(n){return br(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,dt.U)(()=>e)):Ke(e)})}let Bx=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[j0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(jx)},providedIn:"root"}),n})(),jx=(()=>{class n extends Bx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ji))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _N{}class wN extends class vN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fb=new m.OlP("",{providedIn:"root",factory:()=>({})}),OT=new m.OlP("ROUTES");let LT=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ke(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=tf(t.loadComponent()).pipe((0,Hi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),hT(()=>{this.componentLoaders.delete(t)})),o=new qA(r,()=>new Yr.x).pipe(lT());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,A=!1;Array.isArray(g)?b=g:(v=g.create(t).injector,b=KA(v.get(OT,[],m.XFs.Self|m.XFs.Optional)));return{routes:b.map(MT),injector:v}}),hT(()=>{this.childrenLoaders.delete(r)})),l=new qA(u,()=>new Yr.x).pipe(lT());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return tf(t()).pipe((0,gs.z)(r=>r instanceof m.YKP||Array.isArray(r)?Ke(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class EN{}class bN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function DN(n){throw n}function CN(n,e,t){return e.parse("/")}const TN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Hx(){const n=(0,m.f3M)(nx),e=(0,m.f3M)(Z0),t=(0,m.f3M)(xe),r=(0,m.f3M)(m.zs3),o=(0,m.f3M)(m.Sil),u=(0,m.f3M)(OT,{optional:!0})??[],l=(0,m.f3M)(fb,{optional:!0})??{},g=(0,m.f3M)(jx),v=(0,m.f3M)(Bx,{optional:!0}),b=(0,m.f3M)(EN,{optional:!0}),A=(0,m.f3M)(_N,{optional:!0}),M=new Xr(null,n,e,t,r,o,KA(u));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??g,function AN(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,M),M}let Xr=(()=>{class n{constructor(t,r,o,u,l,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yr.x,this.errorHandler=DN,this.malformedUriErrorHandler=CN,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ke(void 0),this.urlHandlingStrategy=new bN,this.routeReuseStrategy=new wN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(LT),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new cP(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new uP(F)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const M=l.get(m.R0b);this.isNgZoneEnabled=M instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function kk(){return new qp(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mx(this.currentUrlTree,this.rootComponentType),this.transitions=new hu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qr(o=>0!==o.id),(0,dt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),br(o=>{let u=!1,l=!1;return Ke(o).pipe((0,Hi.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),br(g=>{const v=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Gx(g.source)&&(this.browserUrlTree=g.extractedUrl),Ke(g).pipe(br(M=>{const F=this.transitions.getValue();return r.next(new wT(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Mc.E:Promise.resolve(M)}),function rN(n,e,t,r){return br(o=>function tN(n,e,t,r,o){return new nN(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,dt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hi.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},o.urlAfterRedirects=M.urlAfterRedirects}),function hN(n,e,t,r,o,u){return(0,gs.z)(l=>function oN(n,e,t,r,o,u,l="emptyOnly",g="legacy"){return new aN(n,e,t,r,o,l,g,u).recognize().pipe(br(v=>null===v?function sN(n){return new es.y(e=>e.error(n))}(new iN):Ke(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,o,u).pipe((0,dt.U)(g=>({...l,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hi.b)(M=>{if(o.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(z,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new rP(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:z,source:Q,restoredState:Ae,extras:Ee}=g,vt=new wT(F,this.serializeUrl(z),Q,Ae);r.next(vt);const It=mx(z,this.rootComponentType).snapshot;return Ke(o={...g,targetSnapshot:It,urlAfterRedirects:z,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Mc.E}),(0,Hi.b)(g=>{const v=new iP(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,dt.U)(g=>o={...g,guards:AP(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function VP(n,e){return(0,gs.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Ke({...t,guardsResult:!0}):function BP(n,e,t,r){return(0,Jt.D)(n).pipe((0,gs.z)(o=>function qP(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ke(u.map(g=>{const v=K0(e)??o,b=vy(g,v);return tf(function LP(n){return n&&X0(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(oa())})).pipe(wy()):Ke(!0)}(o.component,o.route,t,e,r)),oa(o=>!0!==o,!0))}(l,r,o,n).pipe((0,gs.z)(g=>g&&function kP(n){return"boolean"==typeof n}(g)?function jP(n,e,t,r){return(0,Jt.D)(e).pipe(zp(o=>Po(function HP(n,e){return null!==n&&e&&e(new lP(n)),Ke(!0)}(o.route.parent,r),function $P(n,e){return null!==n&&e&&e(new hP(n)),Ke(!0)}(o.route,r),function zP(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function xP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>zA(()=>Ke(l.guards.map(v=>{const b=K0(l.node)??t,A=vy(v,b);return tf(function OP(n){return n&&X0(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(oa())})).pipe(wy())));return Ke(u).pipe(wy())}(n,o.path,t),function GP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const o=r.map(u=>zA(()=>{const l=K0(e)??t,g=vy(u,l);return tf(function NP(n){return n&&X0(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(oa())}));return Ke(o).pipe(wy())}(n,o.route,t))),oa(o=>!0!==o,!0))}(r,u,n,e):Ke(g)),(0,dt.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Hi.b)(g=>{if(o.guardsResult=g.guardsResult,Zp(g.guardsResult))throw wx(0,g.guardsResult);const v=new sP(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),qr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),NT(g=>{if(g.guards.canActivateChecks.length)return Ke(g).pipe((0,Hi.b)(v=>{const b=new oP(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),br(v=>{let b=!1;return Ke(v).pipe(function fN(n,e){return(0,gs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Ke(t);let u=0;return(0,Jt.D)(o).pipe(zp(l=>function pN(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Vx(o)&&(u[j0]=o.title),function gN(n,e,t,r){const o=function mN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Ke({});const u={};return(0,Jt.D)(o).pipe((0,gs.z)(l=>function yN(n,e,t,r){const o=K0(e)??r,u=vy(n,o);return tf(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(oa(),(0,Hi.b)(g=>{u[l]=g}))),dT(1),function Ak(n){return(0,dt.U)(()=>n)}(u),ef(l=>RT(l)?Mc.E:B0(l)))}(u,n,e,r).pipe((0,dt.U)(l=>(n._resolvedData=l,n.data=yx(n,t).resolve,o&&Vx(o)&&(n.data[j0]=o.title),null)))}(l.route,r,n,e)),(0,Hi.b)(()=>u++),dT(1),(0,gs.z)(l=>u===o.length?Ke(t):Mc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Hi.b)(v=>{const b=new aP(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),NT(g=>{const v=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Hi.b)(M=>{b.component=M}),(0,dt.U)(()=>{})));for(const M of b.children)A.push(...v(M));return A};return HA(v(g.targetSnapshot.root)).pipe(Yh(),Jm(1))}),NT(()=>this.afterPreactivation()),(0,dt.U)(g=>{const v=function yP(n,e,t){const r=W0(n,e._root,t?t._root:void 0);return new gx(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:v}}),(0,Hi.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new SP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Hi.b)({next(){u=!0},complete(){u=!0}}),hT(()=>{u||l||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ef(g=>{if(l=!0,bx(g)){Ex(g)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new rb(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(v),Ex(g)){const b=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Gx(o.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new hx(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return Mc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(MT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:v}=r,b=o||this.routerState.root,A=v?this.currentUrlTree.fragment:l;let M=null;switch(g){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),Qk(b,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Zp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function xN(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...TN}:!1===r?{...SN}:r,Zp(t))return XA(this.currentUrlTree,t,o);const u=this.parseUrl(t);return XA(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Kp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let g,v,b;l?(g=l.resolve,v=l.reject,b=l.promise):b=new Promise((F,z)=>{g=F,v=z});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),M=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new rb(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return Hx()},providedIn:"root"}),n})();function Gx(n){return"imperative"!==n}let gb=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Yr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Xr),m.Y36(nf),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class zx{}let kN=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(qr(t=>t instanceof Kp),zp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,Jt.D)(o).pipe((0,xi.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ke(null);const u=o.pipe((0,gs.z)(l=>null===l?Ke(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([u,l]).pipe((0,xi.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Xr),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(zx),m.LFG(LT))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UT=new m.OlP("");let qx=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Iy(n,e){return{\u0275kind:n,\u0275providers:e}}function VT(n){return[{provide:OT,multi:!0,useValue:n}]}function Zx(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Xr),o=n.get(Kx);1===n.get(BT)&&r.initialNavigation(),n.get(Yx,null,m.XFs.Optional)?.setUpPreloading(),n.get(UT,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const Kx=new m.OlP("",{factory:()=>new Yr.x}),BT=new m.OlP("",{providedIn:"root",factory:()=>1});const Yx=new m.OlP("");function LN(n){return Iy(0,[{provide:Yx,useExisting:kN},{provide:zx,useExisting:n}])}const Qx=new m.OlP("ROUTER_FORROOT_GUARD"),FN=[xe,{provide:nx,useClass:pT},{provide:Xr,useFactory:Hx},Z0,{provide:nf,useFactory:function Wx(n){return n.routerState.root},deps:[Xr]},LT];function UN(){return new m.PXZ("Router",Xr)}let Xx=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[FN,[],VT(t),{provide:Qx,useFactory:$N,deps:[[Xr,new m.FiY,new m.tp0]]},{provide:fb,useValue:r||{}},r?.useHash?{provide:me,useClass:st}:{provide:me,useClass:Xe},{provide:UT,useFactory:()=>{const n=(0,m.f3M)(Xr),e=(0,m.f3M)(vu),t=(0,m.f3M)(fb);return t.scrollOffset&&e.setOffset(t.scrollOffset),new qx(n,e,t)}},r?.preloadingStrategy?LN(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:UN},r?.initialNavigation?HN(r):[],[{provide:Jx,useFactory:Zx},{provide:m.tb,multi:!0,useExisting:Jx}]]}}static forChild(t){return{ngModule:n,providers:[VT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qx,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[AT]}),n})();function $N(n){return"guarded"}function HN(n){return["disabled"===n.initialNavigation?Iy(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Xr);return()=>{e.setUpLocationChangeListener()}}},{provide:BT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Iy(2,[{provide:BT,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(Xr),g=e.get(Kx);(function o(u){e.get(Xr).events.pipe(qr(g=>g instanceof Kp||g instanceof rb||g instanceof hx),(0,dt.U)(g=>g instanceof Kp||g instanceof rb&&(0===g.code||1===g.code)&&null),qr(g=>null!==g),Jm(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||g.closed?Ke(void 0):g),l.initialNavigation()}))}}]).\u0275providers:[]]}const Jx=new m.OlP("");var zN=O(2961);function ew(n,e){const t="object"==typeof e;return new Promise((r,o)=>{const u=new zN.Hp({next:l=>{r(l),u.unsubscribe()},error:o,complete:()=>{t?r(e.defaultValue):o(new Bp)}});n.subscribe(u)})}let jT=(()=>{class n{constructor(t){this.firestore=t,this.mainCollectionName="rooms"}newRoom(t){t.name=t.name.toLocaleLowerCase(),this.firestore.collection(this.mainCollectionName).doc().set(t)}getRoomAsync(t){var r=this;return(0,ae.Z)(function*(){let o=r.firestore.collection(r.mainCollectionName,u=>u.where("name","==",t)).valueChanges().pipe((0,dt.U)(u=>u.length>0?u[0]:null));return yield ew(o)})()}userExists(t){return this.firestore.collection(this.mainCollectionName).get().pipe((0,dt.U)(r=>{let u=!1;return r.docs.forEach(l=>{l.data().users.forEach(v=>{console.log(v),u||(u=v.name==t)})}),u}))}updateUserAsync(t,r){var o=this;return(0,ae.Z)(function*(){let u=o.firestore.collection(o.mainCollectionName).get().pipe((0,dt.U)(l=>{let v=!1;return l.docs.forEach(function(){var b=(0,ae.Z)(function*(A){let M=A.id,F=A.data();if(t==F.name){let z=F.users.findIndex(Q=>Q.name==r.name);F.users.splice(z,1),F.users.push(r),yield o.updateRoomByIdAsync(M,F),v=!0}});return function(A){return b.apply(this,arguments)}}()),v}));return yield ew(u)})()}removeUserAsync(t,r){var o=this;return(0,ae.Z)(function*(){let u=o.firestore.collection(o.mainCollectionName).get().pipe((0,dt.U)(l=>{let v=!1;return l.docs.forEach(function(){var b=(0,ae.Z)(function*(A){let M=A.id,F=A.data();if(t==F.name){let z=F.users.findIndex(Q=>Q.name==r);F.users.splice(z,1),yield o.updateRoomByIdAsync(M,F),v=!0}});return function(A){return b.apply(this,arguments)}}()),v}));return yield ew(u)})()}AddUserAsync(t,r){var o=this;return(0,ae.Z)(function*(){let u=o.firestore.collection(o.mainCollectionName).get().pipe((0,dt.U)(l=>{let v=!1;return l.docs.forEach(function(){var b=(0,ae.Z)(function*(A){let M=A.id,F=A.data();if(t==F.name){let z=F.users.findIndex(Q=>Q.name==r.name);z>=0&&F.users.splice(z,1),F.users.push(r),yield o.updateRoomByIdAsync(M,F),v=!0}});return function(A){return b.apply(this,arguments)}}()),v}));return yield ew(u)})()}updateRoomByIdAsync(t,r){var o=this;return(0,ae.Z)(function*(){return yield o.firestore.collection(o.mainCollectionName).doc(t).update(r)})()}revealCardAsync(t,r){var o=this;return(0,ae.Z)(function*(){let u=o.firestore.collection(o.mainCollectionName).get().pipe((0,dt.U)(l=>{let v=!1;return l.docs.forEach(function(){var b=(0,ae.Z)(function*(A){let M=A.id,F=A.data();t==F.name&&(F.revealCards=r,yield o.updateRoomByIdAsync(M,F),v=!0)});return function(A){return b.apply(this,arguments)}}()),v}));return yield ew(u)})()}getAllRooms(){return this.firestore.collection(this.mainCollectionName).valueChanges()}listenRoomChanges(t){return this.firestore.collection(this.mainCollectionName).valueChanges().pipe((0,dt.U)(r=>{for(const o of r)if(o.name==t)return o;return{}}))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(tA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eM=(()=>{class n{constructor(){this.storage=window.localStorage}set(t,r){return!!this.storage&&(this.storage.setItem(t,JSON.stringify(r)),!0)}get(t){if(this.storage){let r=this.storage.getItem(t)||JSON.stringify({});return JSON.parse(r)}return null}remove(t){return!!this.storage&&(this.storage.removeItem(t),!0)}clear(){return!!this.storage&&(this.storage.clear(),!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qN(n,e){if(1&n&&(m.ynx(0),m.TgZ(1,"div",5),m._UZ(2,"div",6),m.qZA(),m.TgZ(3,"div",7),m._UZ(4,"div",8),m.qZA(),m.TgZ(5,"div",9),m._UZ(6,"div",6),m.qZA(),m.BQk()),2&n){const t=m.oxw().$implicit;m.xp6(1),m.uIk("data-content",t)}}const WN=function(n){return{active:n}},ZN=function(){return{"hide-card":!1}};function KN(n,e){if(1&n){const t=m.EpF();m.ynx(0),m.TgZ(1,"div",2),m.NdJ("click",function(){const u=m.CHM(t).$implicit,l=m.oxw();return m.KtG(l.onCardSelect(u))}),m.TgZ(2,"div",3),m.YNc(3,qN,7,1,"ng-container",4),m.qZA()(),m.BQk()}if(2&n){const t=e.$implicit,r=m.oxw();m.xp6(1),m.Q6J("ngClass",m.VKq(3,WN,r.cardSelected.value==t)),m.xp6(1),m.Q6J("ngClass",m.DdM(5,ZN)),m.xp6(1),m.Q6J("ngIf",!0)}}let YN=(()=>{class n{constructor(t){this.firestoreService=t,this.cardTypes=["club","diamond","heart","spade"],this.randomCardTypes=[],this.cardSelected={},this.cardValues=["0","\xbd","1","2","3","5","8","9","20","40","100"]}ngOnInit(){this.generateRandomCardTypes()}generateRandomCardTypes(){this.cardValues.forEach(t=>{let r=Math.floor(Math.random()*this.cardTypes.length);this.randomCardTypes.push(this.cardTypes[r])})}onCardSelect(t){t!=this.cardSelected.value?(this.cardSelected={value:t},this.user.selectedCard=t,this.firestoreService.updateUserAsync(this.roomName,this.user)):this.cardSelected={}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(jT))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-poker-card"]],inputs:{cardValues:"cardValues",roomName:"roomName",user:"user"},decls:2,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"card",3,"ngClass","click"],[1,"playing-card","spade",3,"ngClass"],[4,"ngIf"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,KN,4,6,"ng-container",1),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",r.cardValues))},dependencies:[sn,zi,Bn],styles:['.cards[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:absolute;left:46%;bottom:120px;height:200px;background-color:brown}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;position:absolute;transform:translateZ(0);transform-origin:50% 200%;transition:all .35s ease-in}.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{animation:move .35s cubic-bezier(0,-.5,.5,1) forwards 1}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-27.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-22.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-17.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(4){transform:rotate(-12.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(5){transform:rotate(-7.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(6){transform:rotate(-2.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(7){transform:rotate(2.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(8){transform:rotate(7.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(9){transform:rotate(12.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(10){transform:rotate(17.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(11){transform:rotate(22.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(12){transform:rotate(27.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(13){transform:rotate(32.5deg)}@keyframes move{to{transform:translateY(-290px)}}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:absolute;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:absolute}.bottom[_ngcontent-%COMP%]{bottom:0;right:0;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}']}),n})();const QN=function(n){return{"active-flip-card":n}};let XN=(()=>{class n{constructor(){this.revealCardEvent=new m.vpe,this.user={name:"",selectedCard:"0"},this.revealCard=!1}ngOnInit(){this.revealCardEvent.subscribe(t=>this.revealCard=t)}ngOnDestroy(){this.revealCardEvent.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["single-card"]],inputs:{revealCardEvent:"revealCardEvent",user:"user"},decls:16,vars:4,consts:[[1,"flip-card",3,"ngClass"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"cards"],[1,"card"],[1,"playing-card","spade","hide-card"],[1,"flip-card-back"],[1,"playing-card","spade"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"div",5),m.qZA()()(),m.TgZ(6,"div",6)(7,"div",3)(8,"div",4)(9,"div",7)(10,"div",8),m._UZ(11,"div",9),m.qZA(),m.TgZ(12,"div",10),m._UZ(13,"div",11),m.qZA(),m.TgZ(14,"div",12),m._UZ(15,"div",9),m.qZA()()()()()()()),2&t&&(m.Q6J("ngClass",m.VKq(2,QN,r.revealCard)),m.xp6(10),m.uIk("data-content",r.user.selectedCard))},dependencies:[sn],styles:['.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:relative;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:relative}.bottom[_ngcontent-%COMP%]{top:85%;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:150px;height:230px;perspective:1000px}.flip-card-inner[_ngcontent-%COMP%]{text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.active-flip-card[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{border-radius:5%;z-index:2}.flip-card-back[_ngcontent-%COMP%]{border-radius:5%;transform:rotateY(180deg);z-index:1}']}),n})(),JN=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-loading"]],decls:16,vars:0,consts:[[1,"loading"],[1,"loading-text"],[1,"loading-text-words"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"span",2),m._uU(3,"L"),m.qZA(),m.TgZ(4,"span",2),m._uU(5,"O"),m.qZA(),m.TgZ(6,"span",2),m._uU(7,"A"),m.qZA(),m.TgZ(8,"span",2),m._uU(9,"D"),m.qZA(),m.TgZ(10,"span",2),m._uU(11,"I"),m.qZA(),m.TgZ(12,"span",2),m._uU(13,"N"),m.qZA(),m.TgZ(14,"span",2),m._uU(15,"G"),m.qZA()()())},styles:['@import"https://fonts.googleapis.com/css?family=Quattrocento+Sans";.loading[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999}.loading-text[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;text-align:center;width:100%;height:100px;line-height:100px}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;color:#fff;font-family:Quattrocento Sans,sans-serif}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){filter:blur(0px);animation:blur-text 1.5s 0s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){filter:blur(0px);animation:blur-text 1.5s .2s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){filter:blur(0px);animation:blur-text 1.5s .4s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){filter:blur(0px);animation:blur-text 1.5s .6s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){filter:blur(0px);animation:blur-text 1.5s .8s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){filter:blur(0px);animation:blur-text 1.5s 1s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){filter:blur(0px);animation:blur-text 1.5s 1.2s infinite linear alternate}@keyframes blur-text{0%{filter:blur(0px)}to{filter:blur(4px)}}']}),n})();function e1(n,e){1&n&&(m.ynx(0),m._UZ(1,"app-loading"),m.BQk())}function t1(n,e){if(1&n&&(m.ynx(0),m.TgZ(1,"div",7),m._UZ(2,"single-card",8),m.qZA(),m.BQk()),2&n){const t=e.$implicit,r=m.oxw(2);m.xp6(2),m.Q6J("revealCardEvent",r.revealCard)("user",t)}}function n1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"div",2),m.YNc(2,t1,3,2,"ng-container",3),m.qZA(),m.TgZ(3,"div",4),m._UZ(4,"app-poker-card",5),m.qZA()(),m._UZ(5,"br")(6,"br"),m.TgZ(7,"button",6),m.NdJ("click",function(){m.CHM(t);const o=m.oxw();return m.KtG(o.revealCards())}),m._uU(8,"Virar"),m.qZA(),m.TgZ(9,"button",6),m.NdJ("click",function(){m.CHM(t);const o=m.oxw();return m.KtG(o.hideCards())}),m._uU(10,"Desvirar"),m.qZA()}if(2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngForOf",t.users),m.xp6(2),m.Q6J("roomName",t.roomName)("user",t.user)}}let r1=(()=>{class n{constructor(t,r,o,u){this.router=t,this.activatedroute=r,this.firestoreService=o,this.locaStorageService=u,this.roomChanges=new YE.w0,this.loading=!0,this.roomName="",this.users=[],this.revealCard=new m.vpe}ngOnInit(){this.roomName=this.activatedroute.snapshot.paramMap.get("roomName"),this.checkIfRoomExists()}ngOnDestroy(){this.handleUserExiting()}checkIfRoomExists(){var t=this;return(0,ae.Z)(function*(){let r=yield t.firestoreService.getRoomAsync(t.roomName);t.user=t.locaStorageService.get("user-data"),null!=r?(r.users.findIndex(o=>o.name==t.user?.name)<0&&(yield t.firestoreService.AddUserAsync(t.roomName,t.user)),t.roomChanges=t.firestoreService.listenRoomChanges(t.roomName).subscribe({next:o=>{for(const u of o.users)if(u.name!=t.user?.name){let l=t.users.find(g=>g.name==u.name);l?l.selectedCard=u.selectedCard:t.users.push(u)}t.revealCard.emit(o.revealCards)}}),t.loading=!1):t.router.navigate(["home"])})()}handleUserExiting(){var t=this;return(0,ae.Z)(function*(){let r=t.locaStorageService.get("user-data");t.roomChanges.unsubscribe(),yield t.firestoreService.removeUserAsync(t.roomName,r.name)})()}revealCards(){this.firestoreService.revealCardAsync(this.roomName,!0)}hideCards(){this.firestoreService.revealCardAsync(this.roomName,!1)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Xr),m.Y36(nf),m.Y36(jT),m.Y36(eM))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-room"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showRoom",""],[1,"grid-container"],[4,"ngFor","ngForOf"],[1,"current-player"],[3,"roomName","user"],[3,"click"],[1,"grid-item"],[3,"revealCardEvent","user"]],template:function(t,r){if(1&t&&(m.YNc(0,e1,2,0,"ng-container",0),m.YNc(1,n1,11,3,"ng-template",null,1,m.W1O)),2&t){const o=m.MAs(2);m.Q6J("ngIf",r.loading)("ngIfElse",o)}},dependencies:[zi,Bn,YN,XN,JN]}),n})();const i1=function(n){return[n]};function s1(n,e){if(1&n&&(m.ynx(0),m.TgZ(1,"li",6)(2,"h3"),m._uU(3),m.ALo(4,"titlecase"),m.qZA()(),m.BQk()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(4,i1,"room/"+t)),m.xp6(2),m.Oqu(m.lcZ(4,2,t))}}function o1(n,e){if(1&n){const t=m.EpF();m.ynx(0),m.TgZ(1,"div")(2,"h1"),m._uU(3,"Salas"),m.qZA(),m.TgZ(4,"ul"),m.YNc(5,s1,5,6,"ng-container",2),m.qZA(),m._UZ(6,"br")(7,"hr")(8,"br"),m.TgZ(9,"div")(10,"label",3),m._uU(11,"Nova sala"),m.qZA(),m._UZ(12,"br")(13,"input",4),m.TgZ(14,"button",5),m.NdJ("click",function(){m.CHM(t);const o=m.oxw();return m.KtG(o.createNewRoom())}),m._uU(15,"Criar"),m.qZA()()(),m.BQk()}if(2&n){const t=m.oxw();m.xp6(5),m.Q6J("ngForOf",t.rooms)}}function a1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"label",7),m._uU(2,"Informe um nome de usu\xe1rio"),m.qZA(),m._UZ(3,"br")(4,"input",8),m.TgZ(5,"button",5),m.NdJ("click",function(){m.CHM(t);const o=m.oxw();return m.KtG(o.saveUserName())}),m._uU(6,"Salvar"),m.qZA()()}}let tM=(()=>{class n{constructor(t,r,o){this.router=t,this.localStorage=r,this.firestoreService=o,this.rooms=[],this.getAllRooms=new YE.w0}ngOnInit(){this.getAllRooms=this.firestoreService.getAllRooms().subscribe(t=>this.rooms=t.map(r=>r.name)),this.userData=this.localStorage.get("user-data")}ngOnDestroy(){this.getAllRooms.unsubscribe()}createNewRoom(){let t=document.getElementById("new-room").value;if(this.rooms.includes(t.toLowerCase()))confirm(`Uma sala com o nome ${t}, j\xe1 existe. Deseja ser redirecionado?`)&&this.router.navigate([`room/${t}`]);else{let r=this.localStorage.get("user-data");this.firestoreService.newRoom({name:t,revealCards:!1,calc:0,users:[{name:r.name||"",selectedCard:"0"}]})}}saveUserName(){let t=document.getElementById("user-name").value;this.firestoreService.userExists(t).subscribe(r=>{r?alert("Nome de usu\xe1rio j\xe1 cadastrado, escolha outro!"):(this.userData={name:t,selectedCard:"0"},this.localStorage.set("user-data",this.userData))})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Xr),m.Y36(eM),m.Y36(jT))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["setUserName",""],[4,"ngFor","ngForOf"],["for","new-room"],["type","text","name","","id","new-room"],[3,"click"],[2,"cursor","pointer",3,"routerLink"],["for","user-name"],["type","text","name","","id","user-name"]],template:function(t,r){if(1&t&&(m.YNc(0,o1,16,1,"ng-container",0),m.YNc(1,a1,7,0,"ng-template",null,1,m.W1O)),2&t){const o=m.MAs(2);m.Q6J("ngIf",null==r.userData?null:r.userData.name)("ngIfElse",o)}},dependencies:[zi,Bn,gb,af]}),n})();const u1=[{path:"",component:tM},{path:"home",component:tM},{path:"room/:roomName",component:r1}];let c1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Xx.forRoot(u1),Xx]}),n})(),l1=(()=>{class n{constructor(){this.title="Planning Poker"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[ST]}),n})(),d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[l1]}),n.\u0275inj=m.cJS({imports:[ur.hO.initializeApp($A_firebaseConfig),bM.enablePersistence(),fk,rl,c1]}),n})();(0,m.G48)(),$u().bootstrapModule(d1).catch(n=>console.error(n))},5867:(ut,Se,O)=>{O.d(Se,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=O(9681);(0,m.registerVersion)("firebase","9.14.0","app")},127:(ut,Se,O)=>{O.d(Se,{Z:()=>m.Z});var m=O(3942);m.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ut,Se,O)=>{O.r(Se);var m=O(5861),J=O(3942),P=O(2090),oe=O(9681),ie=O(1877),de=O(655),le=O(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new ie.Yd("@firebase/auth");function st(y,...h){Xe.logLevel<=ie.in.ERROR&&Xe.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw je(y,...h)}function ye(y,...h){return je(y,...h)}function Ie(y,h,p){const w=Object.assign(Object.assign({},tt()),{[h]:p});return new P.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ve(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&xe(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return me.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw st(h),new Error(h)}function q(y,h){y||ge(h)}const X=new Map;function ne(y){q(y instanceof Function,"Expected a class definition");let h=X.get(y);return h?(q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,X.set(y,h),h)}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(h,p){this.shortDelay=h,this.longDelay=p,q(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gn(y,h){q(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wt{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rr=new on(3e4,6e4);function Nt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function cn(y,h,p,w){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(y,h,p,w,S={}){return di(y,S,(0,m.Z)(function*(){let k={},G={};w&&("GET"===h?G=w:k={body:JSON.stringify(w)});const ue=(0,P.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(hi(y,y.config.apiHost,p,ue),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function di(y,h,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Xt),h);try{const S=new Jr(y),k=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const G=yield k.json();if("needConfirmation"in G)throw ei(y,"account-exists-with-different-credential",G);if(k.ok&&!("errorMessage"in G))return G;{const ue=k.ok?G.errorMessage:G.error.message,[Ue,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw ei(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ue)throw ei(y,"email-already-in-use",G);if("USER_DISABLED"===Ue)throw ei(y,"user-disabled",G);const Dt=w[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,Dt,Qe);xe(y,Dt)}}catch(S){if(S instanceof P.ZR)throw S;xe(y,"network-request-failed")}})).apply(this,arguments)}function Vr(y,h,p,w){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(y,h,p,w,S={}){const k=yield cn(y,h,p,w,S);return"mfaPendingCredential"in k&&xe(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function hi(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?gn(y.config,S):`${y.config.apiScheme}://${S}`}class Jr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(ye(this.auth,"network-request-failed")),Rr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ei(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=ye(y,h,w);return S.customData._tokenResponse=p,S}function Ze(){return(Ze=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Dr(y,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zn(y,h){return ti.apply(this,arguments)}function ti(){return(ti=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function bi(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function dn(){return(dn=(0,m.Z)(function*(y,h=!1){const p=(0,P.m9)(y),w=yield p.getIdToken(h),S=ot(w);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const k="object"==typeof S.firebase?S.firebase:void 0,G=k?.sign_in_provider;return{claims:S,token:w,authTime:bi(yt(S.auth_time)),issuedAtTime:bi(yt(S.iat)),expirationTime:bi(yt(S.exp)),signInProvider:G||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(y){return 1e3*Number(y)}function ot(y){var h;const[p,w,S]=y.split(".");if(void 0===p||void 0===w||void 0===S)return st("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,P.tV)(w);return k?JSON.parse(k):(st("Failed to decode base64 JWT payload"),null)}catch(k){return st("Caught error parsing JWT payload as JSON",null===(h=k)||void 0===h?void 0:h.toString()),null}}function fr(y,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof P.ZR&&Br(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Br({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class kt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class ys{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return Di.apply(this,arguments)}function Di(){return(Di=(0,m.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield fr(y,zn(p,{idToken:w}));V(S?.users.length,p,"internal-error");const k=S.users[0];y._notifyReloadListener(k);const G=null!==(h=k.providerUserInfo)&&void 0!==h&&h.length?et(k.providerUserInfo):[],ue=Pr(y.providerData,G),Dt=!!y.isAnonymous&&!(y.email&&k.passwordHash||ue?.length),mt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ue,metadata:new ys(k.createdAt,k.lastLoginAt),isAnonymous:Dt};Object.assign(y,mt)})).apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(y){const h=(0,P.m9)(y);yield en(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Pr(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function et(y){return y.map(h=>{var{providerId:p}=h,w=(0,de._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Je(){return(Je=(0,m.Z)(function*(y,h){const p=yield di(y,{},(0,m.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:k}=y.config,G=hi(y,S,"/v1/token",`key=${k}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(G,{method:"POST",headers:ue,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=ot(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,m.Z)(function*(){return V(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:k,expiresIn:G}=yield function Ce(y,h){return Je.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,k,Number(G))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:k}=p,G=new Ct;return w&&(V("string"==typeof w,"internal-error",{appName:h}),G.refreshToken=w),S&&(V("string"==typeof S,"internal-error",{appName:h}),G.accessToken=S),k&&(V("number"==typeof k,"internal-error",{appName:h}),G.expirationTime=k),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Et(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Ut{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,k=(0,de._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ys(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const w=yield fr(p,p.stsTokenManager.getToken(p.auth,h));return V(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function Ln(y){return dn.apply(this,arguments)}(this,h)}reload(){return function tn(y){return qn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Ut(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield fr(h,function ca(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,k,G,ue,Ue,Qe,Dt;const mt=null!==(w=p.displayName)&&void 0!==w?w:void 0,Xn=null!==(S=p.email)&&void 0!==S?S:void 0,Jn=null!==(k=p.phoneNumber)&&void 0!==k?k:void 0,Ls=null!==(G=p.photoURL)&&void 0!==G?G:void 0,Vf=null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,Bf=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,jf=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,Vy=null!==(Dt=p.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:mg,emailVerified:By,isAnonymous:rc,providerData:Ba,stsTokenManager:Il}=p;V(mg&&Il,h,"internal-error");const $f=Ct.fromJSON(this.name,Il);V("string"==typeof mg,h,"internal-error"),Et(mt,h.name),Et(Xn,h.name),V("boolean"==typeof By,h,"internal-error"),V("boolean"==typeof rc,h,"internal-error"),Et(Jn,h.name),Et(Ls,h.name),Et(Vf,h.name),Et(Bf,h.name),Et(jf,h.name),Et(Vy,h.name);const Xd=new Ut({uid:mg,auth:h,email:Xn,emailVerified:By,displayName:mt,isAnonymous:rc,photoURL:Ls,phoneNumber:Jn,tenantId:Vf,stsTokenManager:$f,createdAt:jf,lastLoginAt:Vy});return Ba&&Array.isArray(Ba)&&(Xd.providerData=Ba.map(ja=>Object.assign({},ja))),Bf&&(Xd._redirectEventId=Bf),Xd}static _fromIdTokenResponse(h,p,w=!1){return(0,m.Z)(function*(){const S=new Ct;S.updateFromServerResponse(p);const k=new Ut({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield en(k),k})()}}const U=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,m.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,m.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function W(y,h,p){return`firebase:${y}:${h}:${p}`}class ve{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:k}=this.auth;this.fullUserKey=W(this.userKey,S.apiKey,k),this.fullPersistenceKey=W("persistence",S.apiKey,k),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Ut._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,m.Z)(function*(){if(!p.length)return new ve(ne(U),h,w);const S=(yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let k=S[0]||ne(U);const G=W(w,h.config.apiKey,h.name);let ue=null;for(const Qe of p)try{const Dt=yield Qe._get(G);if(Dt){const mt=Ut._fromJSON(h,Dt);Qe!==k&&(ue=mt),k=Qe;break}}catch{}const Ue=S.filter(Qe=>Qe._shouldAllowMigration);return k._shouldAllowMigration&&Ue.length?(k=Ue[0],ue&&(yield k._set(G,ue.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(Dt){if(Dt!==k)try{yield Dt._remove(G)}catch{}});return function(Dt){return Qe.apply(this,arguments)}}())),new ve(k,h,w)):new ve(k,h,w)})()}}function Y(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ln(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Fe(h))return"Blackberry";if(He(h))return"Webos";if(lt(h))return"Safari";if((h.includes("chrome/")||Zt(h))&&!h.includes("edge/"))return"Chrome";if(Ht(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ge(y=(0,P.z$)()){return/firefox\//i.test(y)}function lt(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Zt(y=(0,P.z$)()){return/crios\//i.test(y)}function ln(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ht(y=(0,P.z$)()){return/android/i.test(y)}function Fe(y=(0,P.z$)()){return/blackberry/i.test(y)}function He(y=(0,P.z$)()){return/webos/i.test(y)}function Vt(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Hs(y=(0,P.z$)()){return Vt(y)||Ht(y)||He(y)||Fe(y)||/windows phone/i.test(y)||ln(y)}function _s(y,h=[]){let p;switch(y){case"Browser":p=Y((0,P.z$)());break;case"Worker":p=`${Y((0,P.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${w}`}class vo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=k=>new Promise((G,ue)=>{try{G(h(k))}catch(Ue){ue(Ue)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){var w;if(p.auth.currentUser===h)return;const S=[];try{for(const k of p.queue)yield k(h),k.onAbort&&S.push(k.onAbort)}catch(k){S.reverse();for(const G of S)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=k)||void 0===w?void 0:w.message})}})()}}class Ot{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new vo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,k;if(!w._deleted&&(w.persistenceManager=yield ve.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let k=S,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ue=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Ue=k?._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ue||ue===Ue)&&Qe?.user&&(k=Qe.user,G=!0)}if(!k)return p.directlySetCurrentUser(null);if(!k._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(k)}catch(ue){k=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ue))}return k?p.reloadAndSetCurrentUserOrClear(k):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===k._redirectEventId?p.directlySetCurrentUser(k):p.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){var w;try{yield en(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const w=h?(0,P.m9)(h):null;return w&&V(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&V(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,m.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&ne(h)||p._popupRedirectResolver;V(w,p,"argument-error"),p.redirectPersistenceManager=yield ve.create(p,[ne(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const k="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>k(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_s(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function vn(y){return(0,P.m9)(y)}class Gs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function vs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class pr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Vn(y,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:resetPassword",Nt(y,h))})).apply(this,arguments)}function sn(y,h){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Lc(y,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",Nt(y,h))})).apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPassword",Nt(y,h))})).apply(this,arguments)}function Is(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:sendOobCode",Nt(y,h))})).apply(this,arguments)}function Bn(y,h){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function sr(y,h){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function mu(y,h){return da.apply(this,arguments)}function da(){return(da=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function Uc(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function ud(){return(ud=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}function Vc(){return(Vc=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithEmailLink",Nt(y,h))})).apply(this,arguments)}class Bc extends pr{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new Bc(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new Bc(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function la(y,h){return zi.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function rf(y,h){return ud.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return sn(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function sf(y,h){return Vc.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Zn(y,h){return cd.apply(this,arguments)}function cd(){return(cd=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithIdp",Nt(y,h))})).apply(this,arguments)}class qi extends pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new qi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):xe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,k=(0,de._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const G=new qi(w,S);return G.idToken=k.idToken||void 0,G.accessToken=k.accessToken||void 0,G.secret=k.secret,G.nonce=k.nonce,G.pendingToken=k.pendingToken||null,G}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Zn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Qp(y,h){return ld.apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:sendVerificationCode",Nt(y,h))})).apply(this,arguments)}function Es(){return(Es=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h))})).apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(y,h){const p=yield Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,h));if(p.temporaryProof)throw ei(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Xp={USER_NOT_FOUND:"user-not-found"};function hd(){return(hd=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Nt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Xp)})).apply(this,arguments)}class bs extends pr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new bs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new bs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function jc(y,h){return Es.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function af(y,h){return dd.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Jp(y,h){return hd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:k}=h;return w||p||S||k?new bs({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:k}):null}}class yu{constructor(h){var p,w,S,k,G,ue;const Ue=(0,P.zd)((0,P.pd)(h)),Qe=null!==(p=Ue.apiKey)&&void 0!==p?p:null,Dt=null!==(w=Ue.oobCode)&&void 0!==w?w:null,mt=function fd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ue.mode)&&void 0!==S?S:null);V(Qe&&Dt&&mt,"argument-error"),this.apiKey=Qe,this.operation=mt,this.code=Dt,this.continueUrl=null!==(k=Ue.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(G=Ue.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ue=Ue.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const p=function pd(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||p||h||y}(h);try{return new yu(p)}catch{return null}}}let Ti=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return Bc._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=yu.parseLink(w);return V(S,"argument-error"),Bc._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Zi extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qs extends Zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),qi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:k,nonce:G,providerId:ue}=h;if(!w&&!S&&!p&&!k||!ue)return null;try{return new qs(ue)._credential({idToken:p,accessToken:w,nonce:G,pendingToken:k})}catch{return null}}}let ha=(()=>{class y extends Zi{constructor(){super("facebook.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),_u=(()=>{class y extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),$c=(()=>{class y extends Zi{constructor(){super("github.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class fa extends pr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Zn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:k}=p;return w&&S&&k&&w===S?new fa(w,k):null}static _create(h,p){return new fa(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ni extends Wi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ni.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ni.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=fa.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return fa._create(w,p)}catch{return null}}}let $r=(()=>{class y extends Zi{constructor(){super("twitter.com")}static credential(p,w){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wo(y,h){return gd.apply(this,arguments)}function gd(){return(gd=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signUp",Nt(y,h))})).apply(this,arguments)}class gr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,m.Z)(function*(){const k=yield Ut._fromIdTokenResponse(h,w,S),G=lf(w);return new gr({user:k,providerId:G,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=lf(w);return new gr({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function lf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function bn(){return(bn=(0,m.Z)(function*(y){var h;const p=vn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new gr({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield wo(p,{returnSecureToken:!0}),S=yield gr._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class vu extends P.ZR{constructor(h,p,w,S){var k;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,vu.prototype),this.customData={appName:h.name,tenantId:null!==(k=h.tenantId)&&void 0!==k?k:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new vu(h,p,w,S)}}function hf(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?vu._fromErrorAndOperation(y,k,h,w):k})}function ri(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function wu(){return(wu=(0,m.Z)(function*(y,h){const p=(0,P.m9)(y);yield Gt(!0,p,h);const{providerUserInfo:w}=yield Dr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ri(w||[]);return p.providerData=p.providerData.filter(k=>S.has(k.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Io(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,m.Z)(function*(y,h,p=!1){const w=yield fr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return gr._forOperation(y,"link",w)})).apply(this,arguments)}function Gt(y,h,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,m.Z)(function*(y,h,p){yield en(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(ri(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Ws(y,h){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,m.Z)(function*(y,h,p=!1){var w;const{auth:S}=y,k="reauthenticate";try{const G=yield fr(y,hf(S,k,h,y),p);V(G.idToken,S,"internal-error");const ue=ot(G.idToken);V(ue,S,"internal-error");const{sub:Ue}=ue;return V(y.uid===Ue,S,"user-mismatch"),gr._forOperation(y,k,G)}catch(G){throw"auth/user-not-found"===(null===(w=G)||void 0===w?void 0:w.code)&&xe(S,"user-mismatch"),G}})).apply(this,arguments)}function pi(y,h){return bu.apply(this,arguments)}function bu(){return(bu=(0,m.Z)(function*(y,h,p=!1){const w="signIn",S=yield hf(y,w,h),k=yield gr._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function wn(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,m.Z)(function*(y,h){return pi(vn(y),h)})).apply(this,arguments)}function Du(y,h){return ff.apply(this,arguments)}function ff(){return(ff=(0,m.Z)(function*(y,h){const p=(0,P.m9)(y);return yield Gt(!1,p,h.providerId),Io(p,h)})).apply(this,arguments)}function Cu(y,h){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(y,h){return Ws((0,P.m9)(y),h)})).apply(this,arguments)}function Hc(y,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithCustomToken",Nt(y,h))})).apply(this,arguments)}function pa(){return(pa=(0,m.Z)(function*(y,h){const p=vn(y),w=yield Hc(p,{token:h,returnSecureToken:!0}),S=yield gr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class De{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?$t._fromServerResponse(h,p):xe(h,"internal-error")}}class $t extends De{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new $t(p)}}function Su(y,h,p){var w;V((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Dn(){return(Dn=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&Su(w,S,p),yield sr(w,S)})).apply(this,arguments)}function Eo(){return(Eo=(0,m.Z)(function*(y,h,p){yield Vn((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ga(){return(ga=(0,m.Z)(function*(y,h){yield Lc((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function ma(y,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,m.Z)(function*(y,h){const p=(0,P.m9)(y),w=yield Vn(p,{oobCode:h}),S=w.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(w.mfaInfo,p,"internal-error");default:V(w.email,p,"internal-error")}let k=null;return w.mfaInfo&&(k=De._fromServerResponse(vn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:S}})).apply(this,arguments)}function md(){return(md=(0,m.Z)(function*(y,h){const{data:p}=yield ma((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function Cn(){return(Cn=(0,m.Z)(function*(y,h,p){const w=vn(y),S=yield wo(w,{returnSecureToken:!0,email:h,password:p}),k=yield gr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Zs(){return(Zs=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,w,"argument-error"),p&&Su(w,S,p),yield mu(w,S)})).apply(this,arguments)}function _a(){return(_a=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y),S=Ti.credentialWithLink(h,p||Pe());return V(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),wn(w,S)})).apply(this,arguments)}function tg(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:createAuthUri",Nt(y,h))})).apply(this,arguments)}function va(){return(va=(0,m.Z)(function*(y,h){const w={identifier:h,continueUri:ct()?Pe():"http://localhost"},{signinMethods:S}=yield tg((0,P.m9)(y),w);return S||[]})).apply(this,arguments)}function wa(){return(wa=(0,m.Z)(function*(y,h){const p=(0,P.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Su(p.auth,S,h);const{email:k}=yield Bn(p.auth,S);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Su(w.auth,k,p);const{email:G}=yield Uc(w.auth,k);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function ku(y,h){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,m.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Jc(){return(Jc=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,P.m9)(y),k={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield fr(w,ku(w.auth,k));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ue=w.providerData.find(({providerId:Ue})=>"password"===Ue);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)})).apply(this,arguments)}function Ys(y,h,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,m.Z)(function*(y,h,p){const{auth:w}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(k.email=h),p&&(k.password=p);const G=yield fr(y,sn(w,k));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Hr{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class hn extends Hr{constructor(h,p,w,S){super(h,p,w),this.username=S}}class _d extends Hr{constructor(h,p){super(h,"facebook.com",p)}}class el extends hn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class pf extends Hr{constructor(h,p){super(h,"google.com",p)}}class tl extends hn{constructor(h,p,w){super(h,"twitter.com",p,w)}}function Nu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Kn(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const G=null===(p=null===(h=ot(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Hr(k,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new _d(k,S);case"github.com":return new el(k,S);case"google.com":return new pf(k,S);case"twitter.com":return new tl(k,S,y.screenName||null);case"custom":case"anonymous":return new Hr(k,null);default:return new Hr(k,w,S)}}(p)}class Xs{constructor(h,p,w){this.type=h,this.credential=p,this.auth=w}static _fromIdtoken(h,p){return new Xs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Xs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Xs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Xs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Lu{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=vn(h),S=p.customData._serverResponse,k=(S.mfaInfo||[]).map(ue=>De._fromServerResponse(w,ue));V(S.mfaPendingCredential,w,"internal-error");const G=Xs._fromMfaPendingCredential(S.mfaPendingCredential);return new Lu(G,k,function(){var ue=(0,m.Z)(function*(Ue){const Qe=yield Ue._process(w,G);delete S.mfaInfo,delete S.mfaPendingCredential;const Dt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const mt=yield gr._fromIdTokenResponse(w,p.operationType,Dt);return yield w._updateCurrentUser(mt.user),mt;case"reauthenticate":return V(p.user,w,"internal-error"),gr._forOperation(p.user,p.operationType,Dt);default:xe(w,"internal-error")}});return function(Ue){return ue.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function Fu(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:start",Nt(y,h))}class gf{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>De._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new gf(h)}getSession(){var h=this;return(0,m.Z)(function*(){return Xs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var w=this;return(0,m.Z)(function*(){const S=h,k=yield w.getSession(),G=yield fr(w.user,S._process(w.user.auth,k,p));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,k=yield p.user.getIdToken(),G=yield fr(p.user,function Ed(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(y,h))}(p.user.auth,{idToken:k,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ue})=>ue!==S),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const Co=new WeakMap,Js="__sak";class Vu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Js,"1"),this.storage.removeItem(Js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ea=(()=>{class y extends Vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ia(){const y=(0,P.z$)();return lt(y)||Vt(y)}()&&function mn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),k=this.localCache[w];S!==k&&p(w,k,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ue,Ue,Qe)=>{this.notifyListeners(ue,Qe)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(p.newValue!==ue)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const k=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},G=this.storage.getItem(S);!function Wn(){return(0,P.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?k():setTimeout(k,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const k of Array.from(S))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,k=this;return(0,m.Z)(function*(){yield S().call(k,p,w),k.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,m.Z)(function*(){const k=yield w().call(S,p);return S.localCache[p]=JSON.stringify(k),k})()}_remove(p){var w=()=>super._remove,S=this;return(0,m.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Ai=(()=>{class y extends Vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let Cd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(k=>k.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,m.Z)(function*(){const S=p,{eventId:k,eventType:G,data:ue}=S.data,Ue=w.handlersMap[G];if(!Ue?.size)return;S.ports[0].postMessage({status:"ack",eventId:k,eventType:G});const Qe=Array.from(Ue).map(function(){var mt=(0,m.Z)(function*(Xn){return Xn(S.origin,ue)});return function(Xn){return mt.apply(this,arguments)}}()),Dt=yield function Da(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:k,eventType:G,response:Dt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ca(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class nl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,m.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let G,ue;return new Promise((Ue,Qe)=>{const Dt=Ca("",20);k.port1.start();const mt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ue={messageChannel:k,onMessage(Xn){const Jn=Xn;if(Jn.data.eventId===Dt)switch(Jn.data.status){case"ack":clearTimeout(mt),G=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ue(Jn.data.response);break;default:clearTimeout(mt),clearTimeout(G),Qe(new Error("invalid_response"))}}},S.handlers.add(ue),k.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:h,eventId:Dt,data:p},[k.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function Pn(){return window}function Bu(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function Ta(){return(Ta=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ts="firebaseLocalStorageDb",Ss="firebaseLocalStorage",rl="fbase_key";class to{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Sa(y,h){return y.transaction([Ss],h?"readwrite":"readonly").objectStore(Ss)}function So(){const y=indexedDB.open(Ts,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ss,{keyPath:rl})}catch(S){p(S)}}),y.addEventListener("success",(0,m.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ss)?h(w):(w.close(),yield function Sd(){const y=indexedDB.deleteDatabase(Ts);return new to(y).toPromise()}(),h(yield So()))}))})}function Ji(y,h,p){return il.apply(this,arguments)}function il(){return(il=(0,m.Z)(function*(y,h,p){const w=Sa(y,!0).put({[rl]:h,value:p});return new to(w).toPromise()})).apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(y,h){const p=Sa(y,!1).get(h),w=yield new to(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function no(y,h){const p=Sa(y,!0).delete(h);return new to(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield So()),p.db})()}_withRetries(p){var w=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const k=yield w._openDb();return yield p(k)}catch(k){if(S++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Bu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Cd._getInstance(function $u(){return Bu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(S,k){return{keyProcessed:(yield p._poll()).includes(k.key)}});return function(S,k){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(S,k){return["keyChanged"]});return function(S,k){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function eo(){return Ta.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new nl(p.activeServiceWorker);const k=yield p.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=k[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ju(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield So();return yield Ji(p,Js,"1"),yield no(p,Js),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(k=>Ji(k,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=yield w._withRetries(k=>function Hu(y,h){return Aa.apply(this,arguments)}(k,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(S=>no(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const w=yield p._withRetries(G=>{const ue=Sa(G,!1).getAll();return new to(ue).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],k=new Set;for(const{fbase_key:G,value:ue}of w)k.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ue)&&(p.notifyListeners(G,ue),S.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!k.has(G)&&(p.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const k of Array.from(S))k(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xo(y,h){return cn(y,"POST","/v2/accounts/mfaSignIn:start",Nt(y,h))}function xs(){return(xs=(0,m.Z)(function*(y){return(yield cn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ro(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const k=ye("internal-error");k.customData=S,p(k)},w.type="text/javascript",w.charset="UTF-8",function Mo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function qu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const xa=1e12;class fn{constructor(h){this.auth=h,this.counter=xa,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new ng(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||xa;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||xa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var w;return null===(w=p._widgets.get(h||xa))||void 0===w||w.execute(),""})()}}class ng{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ey(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rg=qu("rcb"),by=new on(3e4,6e4);class mf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Pn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function tw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Pn().grecaptcha):new Promise((w,S)=>{const k=Pn().setTimeout(()=>{S(ye(h,"network-request-failed"))},by.get());Pn()[rg]=()=>{Pn().clearTimeout(k),delete Pn()[rg];const ue=Pn().grecaptcha;if(!ue)return void S(ye(h,"internal-error"));const Ue=ue.render;ue.render=(Qe,Dt)=>{const mt=Ue(Qe,Dt);return this.counter++,mt},this.hostLanguage=p,w(ue)},Ro(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:rg,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(k),S(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Pn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ol{load(h){return(0,m.Z)(function*(){return new fn(h)})()}clearedOneInstance(){}}const Cy="recaptcha",Ty={theme:"light",type:"image"};class ar{constructor(h,p=Object.assign({},Ty),w){this.parameters=p,this.type=Cy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(w),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ol:new mf,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(k=>{const G=ue=>{!ue||(h.tokenChangeListeners.delete(G),k(ue))};h.tokenChangeListeners.add(G),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=Pn()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){V(ct()&&!Bu(),h.auth,"internal-error"),yield function ur(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Gr(y){return xs.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class io{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=bs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Jt(){return(Jt=(0,m.Z)(function*(y,h,p){const w=vn(y),S=yield Ms(w,h,(0,P.m9)(p));return new io(S,k=>wn(w,k))})).apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y);yield Gt(!1,w,"phone");const S=yield Ms(w.auth,h,(0,P.m9)(p));return new io(S,k=>Du(w,k))})).apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y),S=yield Ms(w.auth,h,(0,P.m9)(p));return new io(S,k=>Cu(w,k))})).apply(this,arguments)}function Ms(y,h,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let k;if(V("string"==typeof S,y,"argument-error"),V(p.type===Cy,y,"argument-error"),k="string"==typeof h?{phoneNumber:h}:h,"session"in k){const G=k.session;if("phoneNumber"in k)return V("enroll"===G.type,y,"internal-error"),(yield Fu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ue=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return V(ue,y,"missing-multi-factor-info"),(yield xo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Qp(y,{phoneNumber:k.phoneNumber,recaptchaToken:S});return G}}finally{p._reset()}})).apply(this,arguments)}function No(){return(No=(0,m.Z)(function*(y,h){yield Io((0,P.m9)(y),h)})).apply(this,arguments)}let jn=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=vn(p)}verifyPhoneNumber(p,w){return Ms(this.auth,p,(0,P.m9)(w))}static credential(p,w){return bs._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?bs._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ts(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class dt extends pr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Zn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Zn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Zn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function zr(y){return pi(y.auth,new dt(y),y.bypassAuthState)}function ns(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),Ws(p,new dt(y),y.bypassAuthState)}function si(y){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),Io(p,new dt(y),y.bypassAuthState)})).apply(this,arguments)}class Ma{constructor(h,p,w,S,k=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(k){h.reject(k)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:k,tenantId:G,error:ue,type:Ue}=h;if(ue)return void p.reject(ue);const Qe={auth:p.auth,requestUri:w,sessionId:S,tenantId:G||void 0,postBody:k||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(Qe))}catch(Dt){p.reject(Dt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return zr;case"linkViaPopup":case"linkViaRedirect":return si;case"reauthViaPopup":case"reauthViaRedirect":return ns;default:xe(this.auth,"internal-error")}}resolve(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qr=new on(2e3,1e4);function Oo(){return(Oo=(0,m.Z)(function*(y,h,p){const w=vn(y);Ve(y,h,Wi);const S=ts(w,p);return new Tt(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y);Ve(w.auth,h,Wi);const S=ts(w.auth,p);return new Tt(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function ai(){return(ai=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y);Ve(w.auth,h,Wi);const S=ts(w.auth,p);return new Tt(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Tt=(()=>{class y extends Ma{constructor(p,w,S,k,G){super(p,w,k,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const w=yield p.execute();return V(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,m.Z)(function*(){q(1===p.filter.length,"Popup operations only handle one event");const w=Ca();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,qr.get())};p()}}return y.currentPopupAction=null,y})();const Yn=new Map;class nt extends Ma{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let w=Yn.get(p.auth._key());if(!w){try{const k=(yield function Lo(y,h){return _t.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(k)}catch(S){w=()=>Promise.reject(S)}Yn.set(p.auth._key(),w)}return p.bypassAuthState||Yn.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function _t(){return(_t=(0,m.Z)(function*(y,h){const p=xd(h),w=Mi(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function Fo(y,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(y,h){return Mi(y)._set(xd(h),"true")})).apply(this,arguments)}function Vo(y,h){Yn.set(y._key(),h)}function Mi(y){return ne(y._redirectPersistence)}function xd(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,m.Z)(function*(y,h,p){const w=vn(y);Ve(y,h,Wi);const S=ts(w,p);return yield Fo(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y);Ve(w.auth,h,Wi);const S=ts(w.auth,p);yield Fo(S,w.auth);const k=yield gt(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",k)})).apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(y,h,p){const w=(0,P.m9)(y);Ve(w.auth,h,Wi);const S=ts(w.auth,p);yield Gt(!1,w,h.providerId),yield Fo(S,w.auth);const k=yield gt(w);return S._openRedirect(w.auth,h,"linkViaRedirect",k)})).apply(this,arguments)}function Ye(){return(Ye=(0,m.Z)(function*(y,h){return yield vn(y)._initializationPromise,bt(y,h,!1)})).apply(this,arguments)}function bt(y,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(y,h,p=!1){const w=vn(y),S=ts(w,h),G=yield new nt(w,S,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,h)),G})).apply(this,arguments)}function gt(y){return _n.apply(this,arguments)}function _n(){return(_n=(0,m.Z)(function*(y){const h=Ca(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ar{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Bo(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return so(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!so(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rs(h))}saveEventToCache(h){this.cachedEventUids.add(Rs(h)),this.lastProcessedEventTime=Date.now()}}function Rs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function so({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Wr(y){return ks.apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(y,h={}){return cn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Ps=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ns=/^https?/;function _f(){return(_f=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Wr(y);for(const p of h)try{if(Rd(p))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function Rd(y){const h=Pe(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===w}if(!Ns.test(p))return!1;if(Ps.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const vf=new on(3e4,6e4);function kd(){const y=Pn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let al=null;function Sy(y){return al=al||function Zu(y){return new Promise((h,p)=>{var w,S,k;function G(){kd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{kd(),p(ye(y,"network-request-failed"))},timeout:vf.get()})}if(null!==(S=null===(w=Pn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(k=Pn().gapi)||void 0===k||!k.load){const ue=qu("iframefcb");return Pn()[ue]=()=>{gapi.load?G():p(ye(y,"network-request-failed"))},Ro(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Ue=>p(Ue))}G()}}).catch(h=>{throw al=null,h})}(y),al}const Pd=new on(5e3,15e3),Nd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ul(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?gn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},S=xy.get(y.config.apiHost);S&&(w.eid=S);const k=y._getFrameworks();return k.length&&(w.fw=k.join(",")),`${p}?${(0,P.xO)(w).slice(1)}`}function sg(){return sg=(0,m.Z)(function*(y){const h=yield Sy(y),p=Pn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:ul(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nd,dontclear:!0},w=>new Promise(function(){var S=(0,m.Z)(function*(k,G){yield w.restyle({setHideOnLeave:!1});const ue=ye(y,"network-request-failed"),Ue=Pn().setTimeout(()=>{G(ue)},Pd.get());function Qe(){Pn().clearTimeout(Ue),k(w)}w.ping(Qe).then(Qe,()=>{G(ue)})});return function(k,G){return S.apply(this,arguments)}}()))}),sg.apply(this,arguments)}const If={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Od{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dl(y,h,p,w,S,k){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:oe.SDK_VERSION,eventId:S};if(h instanceof Wi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Qe]of Object.entries(k||{}))G[Ue]=Qe}if(h instanceof Zi){const Ue=h.getScopes().filter(Qe=>""!==Qe);Ue.length>0&&(G.scopes=Ue.join(","))}y.tenantId&&(G.tid=y.tenantId);const ue=G;for(const Ue of Object.keys(ue))void 0===ue[Ue]&&delete ue[Ue];return`${function bf({config:y}){return y.emulator?gn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ue).slice(1)}`}const Fd="webStorageSupport";class Ud extends class Cf{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ud(h)}_finalizeEnroll(h,p,w){return function Uu(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function zu(y,h){return cn(y,"POST","/v2/accounts/mfaSignIn:finalize",Nt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ag=(()=>{class y{constructor(){}static assertion(p){return Ud._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Ku="@firebase/auth",Vd="0.20.11";class Tf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oo(){return window}function Qu(){return(Qu=(0,m.Z)(function*(y,h,p){var w;const{BuildInfo:S}=oo();q(h.sessionId,"AuthEvent did not contain a session ID");const k=yield jd(h.sessionId),G={};return Vt()?G.ibi=S.packageName:Ht()?G.apn=S.packageName:xe(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=k,dl(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,G)})).apply(this,arguments)}function hl(){return(hl=(0,m.Z)(function*(y){const{BuildInfo:h}=oo(),p={};Vt()?p.iosBundleId=h.packageName:Ht()?p.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Wr(y,p)})).apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(y,h,p){const{cordova:w}=oo();let S=()=>{};try{yield new Promise((k,G)=>{let ue=null;function Ue(){var mt;k();const Xn=null===(mt=w.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Xn&&Xn(),"function"==typeof p?.close&&p.close()}function Qe(){ue||(ue=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Ue),document.addEventListener("resume",Qe,!1),Ht()&&document.addEventListener("visibilitychange",Dt,!1),S=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",Dt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function jd(y){return $d.apply(this,arguments)}function $d(){return($d=(0,m.Z)(function*(y){const h=Oy(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oy(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}(0,P.Pz)("authIdTokenMaxAge"),function yr(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:k,authDomain:G}=w.options;return((ue,Ue)=>{V(k&&!k.includes(":"),"invalid-api-key",{appName:ue.name}),V(!G?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:k,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_s(y)},Dt=new Ot(ue,Ue,Qe);return function Ne(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(Dt,p),Dt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const p=vn(h.getProvider("auth").getImmediate());return new Tf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Ku,Vd,function mr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Ku,Vd,"esm2017")}("Browser");class Hd extends Ar{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function fl(y){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y){const h=yield pl()._get(gl(y));return h&&(yield pl()._remove(gl(y))),h})).apply(this,arguments)}function Xu(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function pl(){return ne(Ea)}function gl(y){return W("authEvent",y.config.apiKey,y.name)}function Ri(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function _r(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function La(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function qd(y=(0,P.z$)()){return!("file:"!==La()&&"ionic:"!==La()&&"capacitor:"!==La()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function _l(){try{const y=self.localStorage,h=Ca();if(y)return y.setItem(h,"1"),y.removeItem(h),!function kf(y=(0,P.z$)()){return function Wd(){return(0,P.w1)()&&11===document?.documentMode}()||function yl(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return $o()&&(0,P.hl)()}return!1}function $o(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vl(){return(function fg(){return"http:"===La()||"https:"===La()}()||(0,P.ru)()||qd())&&!function Fa(){return(0,P.b$)()||(0,P.UG)()}()&&_l()&&!$o()}function Ho(){return qd()&&typeof document<"u"}function Ua(){return(Ua=(0,m.Z)(function*(){return!!Ho()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const mi={LOCAL:"local",NONE:"none",SESSION:"session"},ao=V,Nf="persistence";function Go(y){return wl.apply(this,arguments)}function wl(){return(wl=(0,m.Z)(function*(y){yield y._initializationPromise;const h=Va(),p=W(Nf,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Va(){var y;try{return(null===(y=function Pf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Os=V;class yi{constructor(){this.browserResolver=ne(class rs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ai,this._completeRedirectFn=bt,this._overrideRedirectResult=Vo}_openPopup(h,p,w,S){var k=this;return(0,m.Z)(function*(){var G;q(null===(G=k.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ue=dl(h,p,w,Pe(),S);return function og(y,h,p,w=500,S=600){const k=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Ue=Object.assign(Object.assign({},If),{width:w.toString(),height:S.toString(),top:k,left:G}),Qe=(0,P.z$)().toLowerCase();p&&(ue=Zt(Qe)?"_blank":p),Ge(Qe)&&(h=h||"http://localhost",Ue.scrollbars="yes");const Dt=Object.entries(Ue).reduce((Xn,[Jn,Ls])=>`${Xn}${Jn}=${Ls},`,"");if(function jr(y=(0,P.z$)()){var h;return Vt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function Ef(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ue),new Od(null);const mt=window.open(h||"",ue,Dt);V(mt,y,"popup-blocked");try{mt.focus()}catch{}return new Od(mt)}(h,ue,Ca())})()}_openRedirect(h,p,w,S){var k=this;return(0,m.Z)(function*(){return yield k._originValidation(h),function gi(y){Pn().location.href=y}(dl(h,p,w,Pe(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:k}=this.eventManagers[p];return S?Promise.resolve(S):(q(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const w=yield function wf(y){return sg.apply(this,arguments)}(h),S=new Ar(h);return w.register("authEvent",k=>(V(k?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Fd,{type:Fd},S=>{var k;const G=null===(k=S?.[0])||void 0===k?void 0:k[Fd];void 0!==G&&p(!!G),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Md(y){return _f.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Hs()||lt()||Vt()}}),this.cordovaResolver=ne(class Ju{constructor(){this._redirectPersistence=Ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bt,this._overrideRedirectResult=Vo}_initialize(h){var p=this;return(0,m.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new Hd(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var k=this;return(0,m.Z)(function*(){!function Mf(y){var h,p,w,S,k,G,ue,Ue,Qe,Dt;const mt=oo();V("function"==typeof(null===(h=mt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=mt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(k=null===(S=null===(w=mt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ue=null===(ue=null===(G=mt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Dt=null===(Qe=mt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===Dt?void 0:Dt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield k._initialize(h);yield G.initialized(),G.resetRedirect(),function Uo(){Yn.clear()}(),yield k._originValidation(h);const ue=function cg(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Xu(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,w,S);yield function Rf(y,h){return pl()._set(gl(y),h)}(h,ue);const Ue=yield function Yu(y,h,p){return Qu.apply(this,arguments)}(h,ue,p),Qe=yield function xf(y){const{cordova:h}=oo();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ir(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Ue);return function Ny(y,h,p){return Pa.apply(this,arguments)}(h,G,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Py(y){return hl.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:k}=oo(),G=setTimeout((0,m.Z)(function*(){yield fl(h),p.onEvent(_r())}),500),ue=function(){var Dt=(0,m.Z)(function*(mt){clearTimeout(G);const Xn=yield fl(h);let Jn=null;Xn&&mt?.url&&(Jn=function Ly(y,h){var p,w;const S=function Fy(y){const h=Ri(y),p=h.link?decodeURIComponent(h.link):void 0,w=Ri(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ri(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const k=Ri(S),G=k.firebaseError?function jo(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,ue=null===(w=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Ue=ue?ye(ue):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Xn,mt.url)),p.onEvent(Jn||_r())});return function(Xn){return Dt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Ue=S,Qe=`${k.packageName.toLowerCase()}://`;oo().handleOpenURL=function(){var Dt=(0,m.Z)(function*(mt){if(mt.toLowerCase().startsWith(Qe)&&ue({url:mt}),"function"==typeof Ue)try{Ue(mt)}catch(Xn){console.error(Xn)}});return function(mt){return Dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ai,this._completeRedirectFn=bt,this._overrideRedirectResult=Vo}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var k=this;return(0,m.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var k=this;return(0,m.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Ho()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Os(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Zd(){return Ua.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Of(y){return y.unwrap()}function Kd(y){return tc(y)}function tc(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return jn.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=_u;break;case"facebook.com":w=ha;break;case"github.com":w=$c;break;case"twitter.com":w=$r;break;default:const{oauthIdToken:S,oauthAccessToken:k,oauthTokenSecret:G,pendingToken:ue,nonce:Ue}=h;return k||G||S||ue?ue?p.startsWith("saml.")?fa._create(p,ue):qi._fromParams({providerId:p,signInMethod:p,pendingToken:ue,idToken:S,accessToken:k}):new qs(p).credential({idToken:S,accessToken:k,rawNonce:Ue}):null}return y instanceof P.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Qn(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function Yd(y,h){var p,w;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new Qd(y,function Tn(y,h){var p;const w=(0,P.m9)(y),S=h;return V(h.customData.operationType,w,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),Lu._fromError(w,S)}(y,h));else if(S){const k=tc(h),G=h;k&&(G.credential=k,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Kd(p),additionalUserInfo:Nu(p),user:is.getOrCreate(S)}})}function ki(y,h){return nc.apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>Qn(y,p.confirm(w))}})).apply(this,arguments)}class Qd{constructor(h,p){this.resolver=p,this.auth=function Lf(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Qn(Of(this.auth),this.resolver.resolveSignIn(h))}}class is{constructor(h){this._delegate=h,this.multiFactor=function To(y){const h=(0,P.m9)(y);return Co.has(h)||Co.set(h,gf._fromUser(h)),Co.get(h)}(h)}static getOrCreate(h){return is.USER_MAP.has(h)||is.USER_MAP.set(h,new is(h)),is.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return Qn(p.auth,Du(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,m.Z)(function*(){return ki(w.auth,function cr(y,h,p){return Ke.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return Qn(p.auth,function Ra(y,h,p){return ai.apply(this,arguments)}(p._delegate,h,yi))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Go(vn(p.auth)),function K(y,h,p){return function re(y,h,p){return be.apply(this,arguments)}(y,h,p)}(p._delegate,h,yi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return Qn(p.auth,Cu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return ki(this.auth,function yn(y,h,p){return xi.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Qn(this.auth,function ae(y,h,p){return oi.apply(this,arguments)}(this._delegate,h,yi))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Go(vn(p.auth)),function C(y,h,p){return function x(y,h,p){return L.apply(this,arguments)}(y,h,p)}(p._delegate,h,yi)})()}sendEmailVerification(h){return function Kc(y,h){return wa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function Tr(y,h){return wu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function yd(y,h){return Ys((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ks(y,h){return Ys((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Sr(y,h){return No.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Xc(y,h){return Jc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Yc(y,h,p){return Ru.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}is.USER_MAP=new WeakMap;const an=V;let zo=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;an(S,"invalid-api-key",{appName:p.name}),an(S,"invalid-api-key",{appName:p.name});const k=typeof window<"u"?yi:void 0;this._delegate=w.initialize({options:{persistence:ss(S,p.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function pu(y,h,p){const w=vn(y);V(w._canInitEmulator,w,"emulator-config-failed"),V(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,k=Ci(h),{host:G,port:ue}=function Un(y){const h=Ci(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const k=S[1];return{host:k,port:vs(w.substr(k.length+1))}}{const[k,G]=w.split(":");return{host:k,port:vs(G)}}}(h);w.config.emulator={url:`${k}//${G}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ue,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ws(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function ii(y,h){return ga.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ma(this._delegate,p)}confirmPasswordReset(p,w){return function xu(y,h,p){return Eo.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,m.Z)(function*(){return Qn(S._delegate,function ya(y,h,p){return Cn.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Mu(y,h){return va.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Xi(y,h){return"EMAIL_SIGNIN"===yu.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){an(vl(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(y,h){return Ye.apply(this,arguments)}(p._delegate,yi);return w?Qn(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function dg(y,h){vn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:k,error:G,complete:ue}=qo(p,w,S);return this._delegate.onAuthStateChanged(k,G,ue)}onIdTokenChanged(p,w,S){const{next:k,error:G,complete:ue}=qo(p,w,S);return this._delegate.onIdTokenChanged(k,G,ue)}sendSignInLinkToEmail(p,w){return function Wc(y,h,p){return Zs.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function Au(y,h,p){return Dn.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,m.Z)(function*(){let S;switch(function pg(y,h){ao(Object.values(mi).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?ao(h!==mi.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?ao(h===mi.NONE,y,"unsupported-persistence-type"):$o()?ao(h===mi.NONE||h===mi.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):ao(h===mi.NONE||_l(),y,"unsupported-persistence-type")}(w._delegate,p),p){case mi.SESSION:S=Ai;break;case mi.LOCAL:S=(yield ne(Ao)._isAvailable())?Ao:Ea;break;case mi.NONE:S=U;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Qn(this._delegate,function df(y){return bn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Qn(this._delegate,wn(this._delegate,p))}signInWithCustomToken(p){return Qn(this._delegate,function Gc(y,h){return pa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Qn(this._delegate,function Si(y,h,p){return wn((0,P.m9)(y),Ti.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Qn(this._delegate,function eg(y,h,p){return _a.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return ki(this._delegate,function es(y,h,p){return Jt.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,m.Z)(function*(){return an(vl(),w._delegate,"operation-not-supported-in-this-environment"),Qn(w._delegate,function Ad(y,h,p){return Oo.apply(this,arguments)}(w._delegate,p,yi))})()}signInWithRedirect(p){var w=this;return(0,m.Z)(function*(){return an(vl(),w._delegate,"operation-not-supported-in-this-environment"),yield Go(w._delegate),function Nn(y,h,p){return function yf(y,h,p){return D.apply(this,arguments)}(y,h,p)}(w._delegate,p,yi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function qc(y,h){return md.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=mi,y})();function qo(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:G=>S(G&&is.getOrCreate(G)),error:h,complete:p}}function ss(y,h){const p=function ec(y,h){const p=Va();if(!p)return[];const w=W(Nf,y,h);switch(p.getItem(w)){case mi.NONE:return[U];case mi.LOCAL:return[Ao,Ai];case mi.SESSION:return[Ai];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const w of[Ea,Ai])p.includes(w)||p.push(w);return p.includes(U)||p.push(U),p}class Ff{constructor(){this.providerId="phone",this._delegate=new jn(Of(J.Z.auth()))}static credential(h,p){return jn.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ff.PHONE_SIGN_IN_METHOD=jn.PHONE_SIGN_IN_METHOD,Ff.PROVIDER_ID=jn.PROVIDER_ID;const gg=V;class nw{constructor(h,p,w=J.Z.app()){var S;gg(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ar(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Uf(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new zo(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ti,FacebookAuthProvider:ha,GithubAuthProvider:$c,GoogleAuthProvider:_u,OAuthProvider:qs,SAMLAuthProvider:ni,PhoneAuthProvider:Ff,PhoneMultiFactorGenerator:ag,RecaptchaVerifier:nw,TwitterAuthProvider:$r,Auth:zo,AuthCredential:pr,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(ut,Se,O)=>{O.d(Se,{y:()=>he});var m=O(2961),J=O(727),P=O(8822),oe=O(9635),ie=O(2416),de=O(576),le=O(2806);let he=(()=>{class Z{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new Z;return we.source=this,we.operator=Me,we}subscribe(Me,we,tt){const me=function j(Z){return Z&&Z instanceof m.Lv||function B(Z){return Z&&(0,de.m)(Z.next)&&(0,de.m)(Z.error)&&(0,de.m)(Z.complete)}(Z)&&(0,J.Nn)(Z)}(Me)?Me:new m.Hp(Me,we,tt);return(0,le.x)(()=>{const{operator:pe,source:Xe}=this;me.add(pe?pe.call(me,Xe):Xe?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=fe(we))((tt,me)=>{const pe=new m.Hp({next:Xe=>{try{Me(Xe)}catch(st){me(st),pe.unsubscribe()}},error:me,complete:tt});this.subscribe(pe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[P.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=fe(Me))((we,tt)=>{let me;this.subscribe(pe=>me=pe,pe=>tt(pe),()=>we(me))})}}return Z.create=Le=>new Z(Le),Z})();function fe(Z){var Le;return null!==(Le=Z??ie.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ut,Se,O)=>{O.d(Se,{x:()=>le});var m=O(9751),J=O(727);const oe=(0,O(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(8737),de=O(2806);let le=(()=>{class fe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new he(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:Le,observers:Me}=this;return Z||Le?J.Lc:(this.currentObservers=null,Me.push(j),new J.w0(()=>{this.currentObservers=null,(0,ie.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:Le,isStopped:Me}=this;Z?j.error(Le):Me&&j.complete()}asObservable(){const j=new m.y;return j.source=this,j}}return fe.create=(B,j)=>new he(B,j),fe})();class he extends le{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,B)}error(B){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Z?Z:J.Lc}}},2961:(ut,Se,O)=>{O.d(Se,{Hp:()=>tt,Lv:()=>Z});var m=O(576),J=O(727),P=O(2416),oe=O(7849);function ie(){}const de=fe("C",void 0,void 0);function fe(xe,ye,Ie){return{kind:xe,value:ye,error:Ie}}var B=O(3410),j=O(2806);class Z extends J.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,J.Nn)(ye)&&ye.add(this)):this.destination=st}static create(ye,Ie,Ve){return new tt(ye,Ie,Ve)}next(ye){this.isStopped?Xe(function he(xe){return fe("N",xe,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Xe(function le(xe){return fe("E",void 0,xe)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Xe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(xe,ye){return Le.call(xe,ye)}class we{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ye)}catch(Ve){me(Ve)}}error(ye){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ye)}catch(Ve){me(Ve)}else me(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ie){me(Ie)}}}class tt extends Z{constructor(ye,Ie,Ve){let je;if(super(),(0,m.m)(ye)||!ye)je={next:ye??void 0,error:Ie??void 0,complete:Ve??void 0};else{let V;this&&P.v.useDeprecatedNextContext?(V=Object.create(ye),V.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Me(ye.next,V),error:ye.error&&Me(ye.error,V),complete:ye.complete&&Me(ye.complete,V)}):je=ye}this.destination=new we(je)}}function me(xe){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(xe):(0,oe.h)(xe)}function Xe(xe,ye){const{onStoppedNotification:Ie}=P.v;Ie&&B.z.setTimeout(()=>Ie(xe,ye))}const st={closed:!0,next:ie,error:function pe(xe){throw xe},complete:ie}},727:(ut,Se,O)=>{O.d(Se,{Lc:()=>de,w0:()=>ie,Nn:()=>le});var m=O(576);const P=(0,O(3888).d)(fe=>function(j){fe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,Le)=>`${Le+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=O(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,m.m)(Z))try{Z()}catch(Me){B=Me instanceof P?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{he(Me)}catch(we){B=B??[],we instanceof P?B=[...B,...we.errors]:B.push(we)}}if(B)throw new P(B)}}add(B){var j;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const fe=new ie;return fe.closed=!0,fe})();const de=ie.EMPTY;function le(fe){return fe instanceof ie||fe&&"closed"in fe&&(0,m.m)(fe.remove)&&(0,m.m)(fe.add)&&(0,m.m)(fe.unsubscribe)}function he(fe){(0,m.m)(fe)?fe():fe.unsubscribe()}},2416:(ut,Se,O)=>{O.d(Se,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Se,O)=>{O.d(Se,{E:()=>J});const J=new(O(9751).y)(ie=>ie.complete())},8996:(ut,Se,O)=>{O.d(Se,{D:()=>ye});var m=O(8421),J=O(5363),P=O(9468),de=O(9751),he=O(2202),fe=O(576),B=O(9672);function Z(Ie,Ve){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,B.f)(je,Ve,()=>{const V=Ie[Symbol.asyncIterator]();(0,B.f)(je,Ve,()=>{V.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=O(3670),Me=O(8239),we=O(1144),tt=O(6495),me=O(2206),pe=O(4532),Xe=O(3260);function ye(Ie,Ve){return Ve?function xe(Ie,Ve){if(null!=Ie){if((0,Le.c)(Ie))return function oe(Ie,Ve){return(0,m.Xf)(Ie).pipe((0,P.R)(Ve),(0,J.Q)(Ve))}(Ie,Ve);if((0,we.z)(Ie))return function le(Ie,Ve){return new de.y(je=>{let V=0;return Ve.schedule(function(){V===Ie.length?je.complete():(je.next(Ie[V++]),je.closed||this.schedule())})})}(Ie,Ve);if((0,Me.t)(Ie))return function ie(Ie,Ve){return(0,m.Xf)(Ie).pipe((0,P.R)(Ve),(0,J.Q)(Ve))}(Ie,Ve);if((0,me.D)(Ie))return Z(Ie,Ve);if((0,tt.T)(Ie))return function j(Ie,Ve){return new de.y(je=>{let V;return(0,B.f)(je,Ve,()=>{V=Ie[he.h](),(0,B.f)(je,Ve,()=>{let ge,q;try{({value:ge,done:q}=V.next())}catch(X){return void je.error(X)}q?je.complete():je.next(ge)},0,!0)}),()=>(0,fe.m)(V?.return)&&V.return()})}(Ie,Ve);if((0,Xe.L)(Ie))return function st(Ie,Ve){return Z((0,Xe.Q)(Ie),Ve)}(Ie,Ve)}throw(0,pe.z)(Ie)}(Ie,Ve):(0,m.Xf)(Ie)}},8421:(ut,Se,O)=>{O.d(Se,{Xf:()=>Le});var m=O(655),J=O(1144),P=O(8239),oe=O(9751),ie=O(3670),de=O(2206),le=O(4532),he=O(6495),fe=O(3260),B=O(576),j=O(7849),Z=O(8822);function Le(xe){if(xe instanceof oe.y)return xe;if(null!=xe){if((0,ie.c)(xe))return function Me(xe){return new oe.y(ye=>{const Ie=xe[Z.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,J.z)(xe))return function we(xe){return new oe.y(ye=>{for(let Ie=0;Ie<xe.length&&!ye.closed;Ie++)ye.next(xe[Ie]);ye.complete()})}(xe);if((0,P.t)(xe))return function tt(xe){return new oe.y(ye=>{xe.then(Ie=>{ye.closed||(ye.next(Ie),ye.complete())},Ie=>ye.error(Ie)).then(null,j.h)})}(xe);if((0,de.D)(xe))return pe(xe);if((0,he.T)(xe))return function me(xe){return new oe.y(ye=>{for(const Ie of xe)if(ye.next(Ie),ye.closed)return;ye.complete()})}(xe);if((0,fe.L)(xe))return function Xe(xe){return pe((0,fe.Q)(xe))}(xe)}throw(0,le.z)(xe)}function pe(xe){return new oe.y(ye=>{(function st(xe,ye){var Ie,Ve,je,V;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,m.KL)(xe);!(Ve=yield Ie.next()).done;)if(ye.next(Ve.value),ye.closed)return}catch(ge){je={error:ge}}finally{try{Ve&&!Ve.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(je)throw je.error}}ye.complete()})})(xe,ye).catch(Ie=>ye.error(Ie))})}},6451:(ut,Se,O)=>{O.d(Se,{T:()=>de});var m=O(8189),J=O(8421),P=O(515),oe=O(7669),ie=O(8996);function de(...le){const he=(0,oe.yG)(le),fe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,m.J)(fe)((0,ie.D)(B,he)):P.E}},5403:(ut,Se,O)=>{O.d(Se,{x:()=>J});var m=O(2961);function J(oe,ie,de,le,he){return new P(oe,ie,de,le,he)}class P extends m.Lv{constructor(ie,de,le,he,fe,B){super(ie),this.onFinalize=fe,this.shouldUnsubscribe=B,this._next=de?function(j){try{de(j)}catch(Z){ie.error(Z)}}:super._next,this._error=he?function(j){try{he(j)}catch(Z){ie.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(j){ie.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(ut,Se,O)=>{O.d(Se,{U:()=>P});var m=O(4482),J=O(5403);function P(oe,ie){return(0,m.e)((de,le)=>{let he=0;de.subscribe((0,J.x)(le,fe=>{le.next(oe.call(ie,fe,he++))}))})}},8189:(ut,Se,O)=>{O.d(Se,{J:()=>P});var m=O(5577),J=O(4671);function P(oe=1/0){return(0,m.z)(J.y,oe)}},5577:(ut,Se,O)=>{O.d(Se,{z:()=>he});var m=O(4004),J=O(8421),P=O(4482),oe=O(9672),ie=O(5403),le=O(576);function he(fe,B,j=1/0){return(0,le.m)(B)?he((Z,Le)=>(0,m.U)((Me,we)=>B(Z,Me,Le,we))((0,J.Xf)(fe(Z,Le))),j):("number"==typeof B&&(j=B),(0,P.e)((Z,Le)=>function de(fe,B,j,Z,Le,Me,we,tt){const me=[];let pe=0,Xe=0,st=!1;const xe=()=>{st&&!me.length&&!pe&&B.complete()},ye=Ve=>pe<Z?Ie(Ve):me.push(Ve),Ie=Ve=>{Me&&B.next(Ve),pe++;let je=!1;(0,J.Xf)(j(Ve,Xe++)).subscribe((0,ie.x)(B,V=>{Le?.(V),Me?ye(V):B.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(pe--;me.length&&pe<Z;){const V=me.shift();we?(0,oe.f)(B,we,()=>Ie(V)):Ie(V)}xe()}catch(V){B.error(V)}}))};return fe.subscribe((0,ie.x)(B,ye,()=>{st=!0,xe()})),()=>{tt?.()}}(Z,Le,fe,j)))}},5363:(ut,Se,O)=>{O.d(Se,{Q:()=>oe});var m=O(9672),J=O(4482),P=O(5403);function oe(ie,de=0){return(0,J.e)((le,he)=>{le.subscribe((0,P.x)(he,fe=>(0,m.f)(he,ie,()=>he.next(fe),de),()=>(0,m.f)(he,ie,()=>he.complete(),de),fe=>(0,m.f)(he,ie,()=>he.error(fe),de)))})}},3099:(ut,Se,O)=>{O.d(Se,{B:()=>ie});var m=O(8421),J=O(7579),P=O(2961),oe=O(4482);function ie(le={}){const{connector:he=(()=>new J.x),resetOnError:fe=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=le;return Z=>{let Le,Me,we,tt=0,me=!1,pe=!1;const Xe=()=>{Me?.unsubscribe(),Me=void 0},st=()=>{Xe(),Le=we=void 0,me=pe=!1},xe=()=>{const ye=Le;st(),ye?.unsubscribe()};return(0,oe.e)((ye,Ie)=>{tt++,!pe&&!me&&Xe();const Ve=we=we??he();Ie.add(()=>{tt--,0===tt&&!pe&&!me&&(Me=de(xe,j))}),Ve.subscribe(Ie),!Le&&tt>0&&(Le=new P.Hp({next:je=>Ve.next(je),error:je=>{pe=!0,Xe(),Me=de(st,fe,je),Ve.error(je)},complete:()=>{me=!0,Xe(),Me=de(st,B),Ve.complete()}}),(0,m.Xf)(ye).subscribe(Le))})(Z)}}function de(le,he,...fe){if(!0===he)return void le();if(!1===he)return;const B=new P.Hp({next:()=>{B.unsubscribe(),le()}});return he(...fe).subscribe(B)}},9468:(ut,Se,O)=>{O.d(Se,{R:()=>J});var m=O(4482);function J(P,oe=0){return(0,m.e)((ie,de)=>{de.add(P.schedule(()=>ie.subscribe(de),oe))})}},8505:(ut,Se,O)=>{O.d(Se,{b:()=>ie});var m=O(576),J=O(4482),P=O(5403),oe=O(4671);function ie(de,le,he){const fe=(0,m.m)(de)||le||he?{next:de,error:le,complete:he}:de;return fe?(0,J.e)((B,j)=>{var Z;null===(Z=fe.subscribe)||void 0===Z||Z.call(fe);let Le=!0;B.subscribe((0,P.x)(j,Me=>{var we;null===(we=fe.next)||void 0===we||we.call(fe,Me),j.next(Me)},()=>{var Me;Le=!1,null===(Me=fe.complete)||void 0===Me||Me.call(fe),j.complete()},Me=>{var we;Le=!1,null===(we=fe.error)||void 0===we||we.call(fe,Me),j.error(Me)},()=>{var Me,we;Le&&(null===(Me=fe.unsubscribe)||void 0===Me||Me.call(fe)),null===(we=fe.finalize)||void 0===we||we.call(fe)}))}):oe.y}},4408:(ut,Se,O)=>{O.d(Se,{o:()=>ie});var m=O(727);class J extends m.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const P={setInterval(de,le,...he){const{delegate:fe}=P;return fe?.setInterval?fe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=P;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=O(8737);class ie extends J{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){var fe;if(this.closed)return this;this.state=le;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,he)),this.pending=!0,this.delay=he,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(j,this.id,he),this}requestAsyncId(le,he,fe=0){return P.setInterval(le.flush.bind(le,this),fe)}recycleAsyncId(le,he,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return he;null!=he&&P.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(le,he);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,fe=!1;try{this.work(le)}catch(j){fe=!0,B=j||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:fe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(fe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Se,O)=>{O.d(Se,{v:()=>P});var m=O(6063);class J{constructor(ie,de=J.now){this.schedulerActionCtor=ie,this.now=de}schedule(ie,de=0,le){return new this.schedulerActionCtor(this,ie).schedule(le,de)}}J.now=m.l.now;class P extends J{constructor(ie,de=J.now){super(ie,de),this.actions=[],this._active=!1}flush(ie){const{actions:de}=this;if(this._active)return void de.push(ie);let le;this._active=!0;do{if(le=ie.execute(ie.state,ie.delay))break}while(ie=de.shift());if(this._active=!1,le){for(;ie=de.shift();)ie.unsubscribe();throw le}}}},4986:(ut,Se,O)=>{O.d(Se,{z:()=>P});var m=O(4408);const P=new(O(7565).v)(m.o)},6063:(ut,Se,O)=>{O.d(Se,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ut,Se,O)=>{O.d(Se,{z:()=>m});const m={setTimeout(J,P,...oe){const{delegate:ie}=m;return ie?.setTimeout?ie.setTimeout(J,P,...oe):setTimeout(J,P,...oe)},clearTimeout(J){const{delegate:P}=m;return(P?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(ut,Se,O)=>{O.d(Se,{h:()=>J});const J=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Se,O)=>{O.d(Se,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Se,O)=>{O.d(Se,{_6:()=>de,jO:()=>oe,yG:()=>ie});var m=O(576);function P(le){return le[le.length-1]}function oe(le){return(0,m.m)(P(le))?le.pop():void 0}function ie(le){return function J(le){return le&&(0,m.m)(le.schedule)}(P(le))?le.pop():void 0}function de(le,he){return"number"==typeof P(le)?le.pop():he}},8737:(ut,Se,O)=>{function m(J,P){if(J){const oe=J.indexOf(P);0<=oe&&J.splice(oe,1)}}O.d(Se,{P:()=>m})},3888:(ut,Se,O)=>{function m(J){const oe=J(ie=>{Error.call(ie),ie.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Se,{d:()=>m})},2806:(ut,Se,O)=>{O.d(Se,{O:()=>oe,x:()=>P});var m=O(2416);let J=null;function P(ie){if(m.v.useDeprecatedSynchronousErrorHandling){const de=!J;if(de&&(J={errorThrown:!1,error:null}),ie(),de){const{errorThrown:le,error:he}=J;if(J=null,le)throw he}}else ie()}function oe(ie){m.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ie)}},9672:(ut,Se,O)=>{function m(J,P,oe,ie=0,de=!1){const le=P.schedule(function(){oe(),de?J.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(J.add(le),!de)return le}O.d(Se,{f:()=>m})},4671:(ut,Se,O)=>{function m(J){return J}O.d(Se,{y:()=>m})},1144:(ut,Se,O)=>{O.d(Se,{z:()=>m});const m=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ut,Se,O)=>{O.d(Se,{D:()=>J});var m=O(576);function J(P){return Symbol.asyncIterator&&(0,m.m)(P?.[Symbol.asyncIterator])}},576:(ut,Se,O)=>{function m(J){return"function"==typeof J}O.d(Se,{m:()=>m})},3670:(ut,Se,O)=>{O.d(Se,{c:()=>P});var m=O(8822),J=O(576);function P(oe){return(0,J.m)(oe[m.L])}},6495:(ut,Se,O)=>{O.d(Se,{T:()=>P});var m=O(2202),J=O(576);function P(oe){return(0,J.m)(oe?.[m.h])}},8239:(ut,Se,O)=>{O.d(Se,{t:()=>J});var m=O(576);function J(P){return(0,m.m)(P?.then)}},3260:(ut,Se,O)=>{O.d(Se,{L:()=>oe,Q:()=>P});var m=O(655),J=O(576);function P(ie){return(0,m.FC)(this,arguments,function*(){const le=ie.getReader();try{for(;;){const{value:he,done:fe}=yield(0,m.qq)(le.read());if(fe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{le.releaseLock()}})}function oe(ie){return(0,J.m)(ie?.getReader)}},4482:(ut,Se,O)=>{O.d(Se,{A:()=>J,e:()=>P});var m=O(576);function J(oe){return(0,m.m)(oe?.lift)}function P(oe){return ie=>{if(J(ie))return ie.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ut,Se,O)=>{O.d(Se,{U:()=>P,z:()=>J});var m=O(4671);function J(...oe){return P(oe)}function P(oe){return 0===oe.length?m.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(ut,Se,O)=>{O.d(Se,{h:()=>P});var m=O(2416),J=O(3410);function P(oe){J.z.setTimeout(()=>{const{onUnhandledError:ie}=m.v;if(!ie)throw oe;ie(oe)})}},4532:(ut,Se,O)=>{function m(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>m})},655:(ut,Se,O)=>{function oe(q,X){var ne={};for(var te in q)Object.prototype.hasOwnProperty.call(q,te)&&X.indexOf(te)<0&&(ne[te]=q[te]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(te=Object.getOwnPropertySymbols(q);Ne<te.length;Ne++)X.indexOf(te[Ne])<0&&Object.prototype.propertyIsEnumerable.call(q,te[Ne])&&(ne[te[Ne]]=q[te[Ne]])}return ne}function he(q,X,ne,te){return new(ne||(ne=Promise))(function(Pe,ct){function Qt(on){try{We(te.next(on))}catch(gn){ct(gn)}}function Bt(on){try{We(te.throw(on))}catch(gn){ct(gn)}}function We(on){on.done?Pe(on.value):function Ne(Pe){return Pe instanceof ne?Pe:new ne(function(ct){ct(Pe)})}(on.value).then(Qt,Bt)}We((te=te.apply(q,X||[])).next())})}function me(q){return this instanceof me?(this.v=q,this):new me(q)}function pe(q,X,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,te=ne.apply(q,X||[]),Pe=[];return Ne={},ct("next"),ct("throw"),ct("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ct(Wt){te[Wt]&&(Ne[Wt]=function(Xt){return new Promise(function(Rr,Nt){Pe.push([Wt,Xt,Rr,Nt])>1||Qt(Wt,Xt)})})}function Qt(Wt,Xt){try{!function Bt(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(We,on):gn(Pe[0][2],Wt)}(te[Wt](Xt))}catch(Rr){gn(Pe[0][3],Rr)}}function We(Wt){Qt("next",Wt)}function on(Wt){Qt("throw",Wt)}function gn(Wt,Xt){Wt(Xt),Pe.shift(),Pe.length&&Qt(Pe[0][0],Pe[0][1])}}function st(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,X=q[Symbol.asyncIterator];return X?X.call(q):(q=function Z(q){var X="function"==typeof Symbol&&Symbol.iterator,ne=X&&q[X],te=0;if(ne)return ne.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&te>=q.length&&(q=void 0),{value:q&&q[te++],done:!q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Pe){ne[Pe]=q[Pe]&&function(ct){return new Promise(function(Qt,Bt){!function Ne(Pe,ct,Qt,Bt){Promise.resolve(Bt).then(function(We){Pe({value:We,done:Qt})},ct)}(Qt,Bt,(ct=q[Pe](ct)).done,ct.value)})}}}O.d(Se,{FC:()=>pe,KL:()=>st,_T:()=>oe,mG:()=>he,qq:()=>me})},4650:(ut,Se,O)=>{O.d(Se,{$8M:()=>zu,$Z:()=>dh,AFp:()=>EC,ALo:()=>Wv,AaK:()=>he,BQk:()=>ea,CHM:()=>Su,CRH:()=>e0,CZH:()=>qh,CqO:()=>mp,D6c:()=>k0,DdM:()=>Rp,EJc:()=>ES,EpF:()=>Zw,F4k:()=>em,FYo:()=>Jy,FiY:()=>Be,G48:()=>CS,GfV:()=>Sn,JOm:()=>rs,KtG:()=>Au,LFG:()=>Nn,LSH:()=>Eg,Lbi:()=>DC,Lck:()=>Uv,MAs:()=>Ah,MMx:()=>Ap,NdJ:()=>O_,OlP:()=>fn,Oqu:()=>Z_,PXZ:()=>br,Q6J:()=>tu,QGY:()=>N_,QP$:()=>Zt,Qsj:()=>Lt,R0b:()=>hs,RDi:()=>y,Rgc:()=>Np,SBq:()=>Kf,Sil:()=>l0,Suo:()=>iE,TTD:()=>Zi,TgZ:()=>Xg,VKq:()=>ZI,W1O:()=>$h,X6Q:()=>_0,XFs:()=>Ze,Xpm:()=>Ce,Xts:()=>Dg,Y36:()=>lh,YKP:()=>Cm,YNc:()=>M_,Yjl:()=>ve,Yz7:()=>Xt,Z0I:()=>Gi,ZZ4:()=>sy,_UZ:()=>k_,_Vd:()=>Zf,_c5:()=>R0,_uU:()=>W_,aQg:()=>M0,c2e:()=>CC,cJS:()=>Nt,cg1:()=>ql,dDg:()=>Kh,dqk:()=>rn,eFA:()=>SE,eoX:()=>Ac,f3M:()=>D,g9A:()=>cu,h0i:()=>Tc,hGG:()=>OE,iGM:()=>Op,ifc:()=>ot,ip1:()=>td,jDz:()=>jv,kL8:()=>ov,lG2:()=>W,lcZ:()=>Pm,lqb:()=>Pi,lri:()=>DE,oAB:()=>Ut,oxw:()=>U_,q4F:()=>St,qLn:()=>$e,qZA:()=>Jg,rWj:()=>Xm,sBO:()=>SS,sIi:()=>hp,s_b:()=>Lm,soG:()=>Zm,tb:()=>vE,tp0:()=>bt,uIk:()=>pp,vHH:()=>we,vpe:()=>ra,wAp:()=>ft,xp6:()=>pn,ynx:()=>Jo,z2F:()=>Qh,zSh:()=>nh,zs3:()=>Al});var m=O(7579),J=O(727),P=O(9751),oe=O(6451),ie=O(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function Z(i){return function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}(i)?i():i}class we extends Error{constructor(s,a){super(function tt(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i,s){throw new we(-201,!1)}function Bt(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function cn(i){return di(i,hi)||di(i,ei)}function Gi(i){return null!==cn(i)}function di(i,s){return i.hasOwnProperty(s)?i[s]:null}function $s(i){return i&&(i.hasOwnProperty(Jr)||i.hasOwnProperty(ca))?i[Jr]:null}const hi=de({\u0275prov:de}),Jr=de({\u0275inj:de}),ei=de({ngInjectableDef:de}),ca=de({ngInjectorDef:de});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Dr;function zn(i){const s=Dr;return Dr=i,s}function ti(i,s,a){const c=cn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==s?s:void ye(he(i))}function kn(i){return{toString:i}.toString()}var Ln=(()=>((Ln=Ln||{})[Ln.OnPush=0]="OnPush",Ln[Ln.Default=1]="Default",Ln))(),ot=(()=>{return(i=ot||(ot={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ot;var i})();const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Br={},kt=[],ys=de({\u0275cmp:de}),en=de({\u0275dir:de}),Di=de({\u0275pipe:de}),tn=de({\u0275mod:de}),qn=de({\u0275fac:de}),Pr=de({__NG_ELEMENT_ID__:de});let et=0;function Ce(i){return kn(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ln.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||kt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,id:"c"+et++,styles:i.styles||kt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=U(i.inputs,c),d.outputs=U(i.outputs),_&&_.forEach(I=>I(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ct).filter(Et):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(lt).filter(Et):null,d})}function Ct(i){return Y(i)||Ge(i)}function Et(i){return null!==i}function Ut(i){return kn(()=>({type:i.type,bootstrap:i.bootstrap||kt,declarations:i.declarations||kt,imports:i.imports||kt,exports:i.exports||kt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function U(i,s){if(null==i)return Br;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const W=Ce;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Y(i){return i[ys]||null}function Ge(i){return i[en]||null}function lt(i){return i[Di]||null}function Zt(i){const s=Y(i)||Ge(i)||lt(i);return null!==s&&s.standalone}function ln(i,s){const a=i[tn]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function sr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Nr(i){return Array.isArray(i)&&!0===i[1]}function mu(i){return 0!=(8&i.flags)}function da(i){return 2==(2&i.flags)}function Uc(i){return 1==(1&i.flags)}function Cr(i){return null!==i.template}function rf(i){return 0!=(256&i[2])}function Ti(i,s){return i.hasOwnProperty(qn)?i[qn]:null}class Wi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Zi(){return qs}function qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=_u),ha}function ha(){const i=cf(this),s=i?.current;if(s){const a=i.previous;if(a===Br)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function _u(i,s,a,c){const d=cf(i)||function fa(i,s){return i[$c]=s}(i,{previous:Br,current:null}),f=d.current||(d.current={}),_=d.previous,I=this.declaredInputs[a],E=_[I];f[I]=new Wi(E&&E.currentValue,s,_===Br),i[c]=s}Zi.ngInherit=!0;const $c="__ngSimpleChanges__";function cf(i){return i[$c]||null}function bn(i){for(;Array.isArray(i);)i=i[0];return i}function Tr(i,s){return bn(s[i.index])}function Io(i,s){return i.data[s]}function Yi(i,s){return i[s]}function Gt(i,s){const a=s[i];return sr(a)?a:a[0]}function Ws(i){return 64==(64&i[2])}function pi(i,s){return null==s?null:i[s]}function bu(i){i[18]=0}function wn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Mt={lFrame:Xc(null),bindingsEnabled:!0};function Qi(){return Mt.bindingsEnabled}function De(){return Mt.lFrame.lView}function $t(){return Mt.lFrame.tView}function Su(i){return Mt.lFrame.contextLView=i,i[8]}function Au(i){return Mt.lFrame.contextLView=null,i}function Dn(){let i=xu();for(;null!==i&&64===i.type;)i=i.parent;return i}function xu(){return Mt.lFrame.currentTNode}function ii(i,s){const a=Mt.lFrame;a.currentTNode=i,a.isParent=s}function ga(){return Mt.lFrame.isParent}function ma(){Mt.lFrame.isParent=!1}function Cn(){const i=Mt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Zs(){return Mt.lFrame.bindingIndex++}function tg(i,s){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Mu(s)}function Mu(i){Mt.lFrame.currentDirectiveIndex=i}function Kc(){return Mt.lFrame.currentQueryIndex}function wa(i){Mt.lFrame.currentQueryIndex=i}function Yc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ru(i,s,a){if(a&Ze.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=Yc(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Mt.lFrame=Qc();return c.currentTNode=s,c.lView=i,!0}function ku(i){const s=Qc(),a=i[1];Mt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Qc(){const i=Mt.lFrame,s=null===i?null:i.child;return null===s?Xc(i):s}function Xc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Jc(){const i=Mt.lFrame;return Mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yd=Jc;function Ks(){const i=Jc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return Mt.lFrame.selectedIndex}function Hr(i){Mt.lFrame.selectedIndex=i}function hn(){const i=Mt.lFrame;return Io(i.tView,i.selectedIndex)}function Ou(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Qs(i,s,a){Do(i,s,3,a)}function bo(i,s,a,c){(3&i[2])===a&&Do(i,s,a,c)}function wd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Do(i,s,a,c){const f=c??-1,_=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Id(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Id(i,s,a,c){const d=a[c]<0,f=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class Cs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function To(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(s,_,I,f)}else{const f=d,_=a[++c];Vu(f)?i.setProperty(s,f,_):i.setAttribute(s,f,_),c++}}return c}function Js(i){return 3===i||4===i||6===i}function Vu(i){return 64===i.charCodeAt(0)}function Ia(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||bd(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function bd(i,s,a,c,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function Dd(i){return-1!==i}function or(i){return 32767&i}function ba(i,s){let a=function Ea(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ai=!0;function Da(i){const s=Ai;return Ai=i,s}let Pn=0;const gi={};function eo(i,s){const a=ju(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Ta(c.data,i),Ta(s,null),Ta(c.blueprint,null));const d=$u(i,s),f=i.injectorIndex;if(Dd(d)){const _=or(d),I=ba(d,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[_+T]|E[_+T]}return s[f+8]=d,f}function Ta(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ju(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function $u(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=xo(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ts(i,s,a){!function Bu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Pr)&&(c=a[Pr]),null==c&&(c=a[Pr]=Pn++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ss(i,s,a){if(a&Ze.Optional||void 0!==i)return i;ye()}function rl(i,s,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const d=i[9],f=zn(void 0);try{return d?d.get(s,c,a&Ze.Optional):ti(s,c,a&Ze.Optional)}finally{zn(f)}}return Ss(c,0,a)}function to(i,s,a,c=Ze.Default,d){if(null!==i){if(1024&s[2]){const _=function Ao(i,s,a,c,d){let f=i,_=s;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=Sa(f,_,a,c|Ze.Self,gi);if(I!==gi)return I;let E=f.parent;if(!E){const T=_[21];if(T){const R=T.get(a,gi,c);if(R!==gi)return R}E=xo(_),_=_[15]}f=E}return d}(i,s,a,c,gi);if(_!==gi)return _}const f=Sa(i,s,a,c,gi);if(f!==gi)return f}return rl(s,a,c,d)}function Sa(i,s,a,c,d){const f=function il(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Pr)?i[Pr]:void 0;return"number"==typeof s?s>=0?255&s:sl:s}(a);if("function"==typeof f){if(!Ru(s,i,c))return c&Ze.Host?Ss(d,0,c):rl(s,a,c,d);try{const _=f(c);if(null!=_||c&Ze.Optional)return _;ye()}finally{yd()}}else if("number"==typeof f){let _=null,I=ju(i,s),E=-1,T=c&Ze.Host?s[16][6]:null;for((-1===I||c&Ze.SkipSelf)&&(E=-1===I?$u(i,s):s[I+8],-1!==E&&Aa(c,!1)?(_=s[1],I=or(E),s=ba(E,s)):I=-1);-1!==I;){const R=s[1];if(Hu(f,I,R.data)){const N=Sd(I,s,a,_,c,T);if(N!==gi)return N}E=s[I+8],-1!==E&&Aa(c,s[1].data[I+8]===T)&&Hu(f,I,s)?(_=R,I=or(E),s=ba(E,s)):I=-1}}return d}function Sd(i,s,a,c,d,f){const _=s[1],I=_.data[i+8],R=So(I,_,a,null==c?da(I)&&Ai:c!=_&&0!=(3&I.type),d&Ze.Host&&f===I);return null!==R?Ji(s,_,R,I):gi}function So(i,s,a,c,d){const f=i.providerIndexes,_=s.data,I=1048575&f,E=i.directiveStart,R=f>>20,H=d?I+R:i.directiveEnd;for(let ee=c?I:I+R;ee<H;ee++){const _e=_[ee];if(ee<E&&a===_e||ee>=E&&_e.type===a)return ee}if(d){const ee=_[E];if(ee&&Cr(ee)&&ee.type===a)return E}return null}function Ji(i,s,a,c){let d=i[a];const f=s.data;if(function Xs(i){return i instanceof Cs}(d)){const _=d;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const I=Da(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?zn(_.injectImpl):null;Ru(i,c,Ze.Default);try{d=i[a]=_.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function vd(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const _=qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&zn(E),Da(I),_.resolving=!1,yd()}}return d}function Hu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Aa(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class no{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return to(this._tNode,this._lView,s,c,a)}}function sl(){return new no(Dn(),De())}function xo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function zu(i){return function Td(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Js(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(Dn(),i)}const xs="__parameters__";function ko(i,s,a){return kn(()=>{const c=function qu(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return I.annotation=_,I;function I(E,T,R){const N=E.hasOwnProperty(xs)?E[xs]:Object.defineProperty(E,xs,{value:[]})[xs];for(;N.length<=R;)N.push(null);return(N[R]=N[R]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class fn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),cr(c,s)):s!==i&&s.push(c)}return s}function Ke(i,s){i.forEach(a=>Array.isArray(a)?Ke(a,s):s(a))}function yn(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function xi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Yn={},nt="__NG_DI_FLAG__",Lo="ngTempTokenPath",Fo=/\n/gm,Uo="__source";let Vo;function Mi(i){const s=Vo;return Vo=i,s}function xd(i,s=Ze.Default){if(void 0===Vo)throw new we(-203,!1);return null===Vo?ti(i,void 0,s):Vo.get(i,s&Ze.Optional?null:void 0,s)}function Nn(i,s=Ze.Default){return(function ms(){return Dr}()||xd)(Z(i),s)}function D(i,s=Ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Nn(i,s)}function C(i){const s=[];for(let a=0;a<i.length;a++){const c=Z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let d,f=Ze.Default;for(let _=0;_<c.length;_++){const I=c[_],E=L(I);"number"==typeof E?-1===E?d=I.token:f|=E:d=I}s.push(Nn(d,f))}else s.push(Nn(c))}return s}function x(i,s){return i[nt]=s,i.prototype[nt]=s,i}function L(i){return i[nt]}const Be=x(ko("Optional"),8),bt=x(ko("SkipSelf"),4);var rs=(()=>((rs=rs||{})[rs.Important=1]="Important",rs[rs.DashCase=2]="DashCase",rs))();const Ku=new Map;let Vd=0;const oo="__ngContext__";function Lr(i,s){sr(s)?(i[oo]=s[20],function mr(i){Ku.set(i[20],i)}(s)):i[oo]=s}function Hd(i,s){return undefined(i,s)}function Oa(i){const s=i[3];return Nr(s)?s[3]:s}function pl(i){return jo(i[13])}function gl(i){return jo(i[4])}function jo(i){for(;null!==i&&!Nr(i);)i=i[4];return i}function Ri(i,s,a,c,d){if(null!=c){let f,_=!1;Nr(c)?f=c:sr(c)&&(_=!0,c=c[0]);const I=bn(c);0===i&&null!==a?null==d?Zd(s,a,I):Ho(s,a,I,d||null,!0):1===i&&null!==a?Ho(s,a,I,d||null,!0):2===i?function Kd(i,s,a){const c=ao(i,s);c&&function Pf(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=f&&function nc(i,s,a,c,d){const f=a[7];f!==bn(a)&&Ri(s,i,c,f,d);for(let I=10;I<a.length;I++){const E=a[I];tc(E[1],E,i,s,c,f)}}(s,i,f,a,d)}}function _r(i,s,a){return i.createElement(s,a)}function qd(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,wn(d,-1)),a.splice(c,1)}function Fa(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&qd(d,c),s>0&&(i[a-1][4]=c[4]);const f=xi(i,10+s);!function dg(i,s){tc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Wd(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&tc(i,s,a,3,null,null),function hg(i){let s=i[13];if(!s)return yl(i[1],i);for(;s;){let a=null;if(sr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)sr(s)&&yl(s[1],s),s=s[3];null===s&&(s=i),sr(s)&&yl(s[1],s),a=s&&s[4]}s=a}}(s)}}function yl(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function _l(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Cs)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=d[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function kf(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],I="function"==typeof _?_(s):bn(s[_]),E=c[d=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),f+=2}else{const _=c[d=a[f+1]];a[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Nr(s[3])){a!==s[3]&&qd(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Bd(i){Ku.delete(i[20])}(s)}}function $o(i,s,a){return function vl(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===ot.None||d===ot.Emulated)return null}return Tr(c,a)}(i,s.parent,a)}function Ho(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Zd(i,s,a){i.appendChild(s,a)}function Ua(i,s,a,c,d){null!==c?Ho(i,s,a,c,d):Zd(i,s,a)}function ao(i,s){return i.parentNode(s)}let Uf,wl=function Go(i,s,a){return 40&i.type?Tr(i,a):null};function Os(i,s,a,c){const d=$o(i,c,s),f=s[11],I=function pg(i,s,a){return wl(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Ua(f,d,a[E],I,!1);else Ua(f,d,a,I,!1)}function yi(i,s){if(null!==s){const a=s.type;if(3&a)return Tr(s,i);if(4&a)return Lf(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return yi(i,c);{const d=i[s.index];return Nr(d)?Lf(-1,d):bn(d)}}if(32&a)return Hd(s,i)()||bn(i[s.index]);{const c=Of(i,s);return null!==c?Array.isArray(c)?c[0]:yi(Oa(i[16]),c):yi(i,s.next)}}return null}function Of(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Lf(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return yi(c,d)}return s[7]}function Yd(i,s,a,c,d,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===s&&(I&&Lr(bn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)Yd(i,s,a.child,c,d,f,!1),Ri(s,i,d,I,f);else if(32&E){const T=Hd(a,c);let R;for(;R=T();)Ri(s,i,d,R,f);Ri(s,i,d,I,f)}else 16&E?ki(i,s,c,a,d,f):Ri(s,i,d,I,f);a=_?a.projectionNext:a.next}}function tc(i,s,a,c,d,f){Yd(a,c,i.firstChild,s,d,f,!1)}function ki(i,s,a,c,d,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ri(s,i,d,E[T],f);else Yd(i,s,E,_[3],d,f,!0)}function is(i,s,a){i.setAttribute(s,"style",a)}function an(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function y(i){Uf=i}class ue{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Xd=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var vr=(()=>((vr=vr||{})[vr.NONE=0]="NONE",vr[vr.HTML=1]="HTML",vr[vr.STYLE=2]="STYLE",vr[vr.SCRIPT=3]="SCRIPT",vr[vr.URL=4]="URL",vr[vr.RESOURCE_URL=5]="RESOURCE_URL",vr))();function Eg(i){const s=function th(){const i=De();return i&&i[12]}();return s?s.sanitize(vr.URL,i)||"":function Ls(i,s){const a=function Vf(i){return i instanceof ue&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function Jn(i){return i instanceof ue?i.changingThisBreaksApplicationSecurity:i}(i):function ja(i){return(i=String(i)).match(Xd)?i:"unsafe:"+i}(me(i))}const Dg=new fn("ENVIRONMENT_INITIALIZER"),Zy=new fn("INJECTOR",-1),Ky=new fn("INJECTOR_DEF_TYPES");class qf{get(s,a=Yn){if(a===Yn){const c=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw c.name="NullInjectorError",c}return a}}function as(...i){return{\u0275providers:Yy(0,i)}}function Yy(i,...s){const a=[],c=new Set;let d;return Ke(s,f=>{const _=f;ic(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&Qy(d,a),a}function Qy(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ke(d,f=>{s.push(f)})}}function ic(i,s,a,c){if(!(i=Z(i)))return!1;let d=null,f=$s(i);const _=!f&&Y(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(f=$s(E),!f)return!1;d=E}const I=c.has(d);if(_){if(I)return!1;if(c.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of E)ic(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(d);try{Ke(f.imports,R=>{ic(R,s,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&Qy(T,s)}if(!I){const T=Ti(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:kt},{provide:Ky,useValue:d,multi:!0},{provide:Dg,useValue:()=>Nn(d),multi:!0})}const E=f.providers;null==E||I||Ke(E,R=>{s.push(R)})}}return d!==i&&void 0!==i.providers}const Ib=de({provide:String,useValue:de});function Wf(i){return null!==i&&"object"==typeof i&&Ib in i}function sc(i){return"function"==typeof i}const nh=new fn("Set Injector scope."),Cg={},dw={};let wr;function $a(){return void 0===wr&&(wr=new qf),wr}class Pi{}class Tg extends Pi{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ce(s,_=>this.processProvider(_)),this.records.set(Zy,ac(void 0,this)),d.has("environment")&&this.records.set(Pi,ac(void 0,this));const f=this.records.get(nh);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Ky.multi,kt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Mi(this),c=zn(void 0);try{return s()}finally{Mi(a),zn(c)}}get(s,a=Yn,c=Ze.Default){this.assertNotDestroyed();const d=Mi(this),f=zn(void 0);try{if(!(c&Ze.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function bb(i){return"function"==typeof i||"object"==typeof i&&i instanceof fn}(s)&&cn(s);I=E&&this.injectableDefInScope(E)?ac(Xy(s),Cg):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ze.Self?$a():this.parent).get(s,a=c&Ze.Optional&&a===Yn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Lo]=_[Lo]||[]).unshift(he(s)),d)throw _;return function K(i,s,a,c){const d=i[Lo];throw s[Uo]&&d.unshift(s[Uo]),i.message=function re(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(s);if(Array.isArray(s))d=s.map(he).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):he(I)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Fo,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Lo]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{zn(f),Mi(d)}}resolveInjectorInitializers(){const s=Mi(this),a=zn(void 0);try{const c=this.get(Dg.multi,kt,Ze.Self);for(const d of c)d()}finally{Mi(s),zn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(he(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=sc(s=Z(s))?s:Z(s&&s.provide);const c=function lr(i){return Wf(i)?ac(void 0,i.useValue):ac(function oc(i,s,a){let c;if(sc(i)){const d=Z(i);return Ti(d)||Xy(d)}if(Wf(i))c=()=>Z(i.useValue);else if(function lw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...C(i.deps||[]));else if(function cw(i){return!(!i||!i.useExisting)}(i))c=()=>Nn(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function rt(i){return!!i.deps}(i))return Ti(d)||Xy(d);c=()=>new d(...C(i.deps))}return c}(i),Cg)}(s);if(sc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ac(void 0,Cg,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Cg&&(a.value=dw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Rt(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Xy(i){const s=cn(i),a=null!==s?s.factory:Ti(i);if(null!==a)return a;if(i instanceof fn)throw new we(204,!1);if(i instanceof Function)return function ke(i){const s=i.length;if(s>0)throw function Ms(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function kr(i){const s=i&&(i[hi]||i[ei]);if(s){const a=function Vr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function ac(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function qe(i){return!!i.\u0275providers}function ce(i,s){for(const a of i)Array.isArray(a)?ce(a,s):qe(a)?ce(a.\u0275providers,s):s(a)}class Ir{}class Db{resolveComponentFactory(s){throw function hw(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Zf=(()=>{class i{}return i.NULL=new Db,i})();function Cb(){return El(Dn(),De())}function El(i,s){return new Kf(Tr(i,s))}let Kf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Cb,i})();function WT(i){return i instanceof Kf?i.nativeElement:i}class Jy{}let Lt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function rh(){const i=De(),a=Gt(Dn().index,i);return(sr(a)?a:i)[11]}(),i})(),pw=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class Sn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const St=new Sn("14.2.12"),bl={};function On(i){return i.ngOriginalError}class $e{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&On(s);for(;a&&On(a);)a=On(a);return a||null}}function Zo(i){return i instanceof Function?i():i}function se(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const Fs="ng-template";function Rb(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==se(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function ih(i){return 4===i.type&&i.value!==Fs}function uc(i,s,a){return s===(4!==i.type||a?i.value:Fs)}function kb(i,s,a){let c=4;const d=i.attrs||[],f=function Nb(i){for(let s=0;s<i.length;s++)if(Js(i[s]))return s;return i.length}(d);let _=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!uc(i,E,a)||""===E&&1===s.length){if(Zr(c))return!1;_=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Rb(i.attrs,T,a)){if(Zr(c))return!1;_=!0}continue}const N=mw(8&c?"class":E,d,ih(i),a);if(-1===N){if(Zr(c))return!1;_=!0;continue}if(""!==T){let H;H=N>f?"":d[N+1].toLowerCase();const ee=8&c?H:null;if(ee&&-1!==se(ee,T,0)||2&c&&T!==H){if(Zr(c))return!1;_=!0}}}}else{if(!_&&!Zr(c)&&!Zr(E))return!1;if(_&&Zr(E))continue;_=!1,c=E|1&c}}return Zr(c)||_}function Zr(i){return 0==(1&i)}function mw(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function Ni(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function xg(i,s,a=!1){for(let c=0;c<s.length;c++)if(kb(i,s[c],a))return!0;return!1}function cc(i,s){return i?":not("+s.trim()+")":s}function _w(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Zr(_)&&(s+=cc(f,d),d=""),c=_,f=f||!Zr(c);a++}return""!==d&&(s+=cc(f,d)),s}const ht={};function pn(i){r_($t(),De(),Kn()+i,!1)}function r_(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Qs(s,f,a)}else{const f=i.preOrderHooks;null!==f&&bo(s,f,0,a)}Hr(a)}function i_(i,s=null,a=null,c){const d=sh(i,s,a,c);return d.resolveInjectorInitializers(),d}function sh(i,s=null,a=null,c,d=new Set){const f=[a||kt,as(i)];return c=c||("object"==typeof i?void 0:he(i)),new Tg(f,s||$a(),c||null,d)}let Al=(()=>{class i{static create(a,c){if(Array.isArray(a))return i_({name:""},c,a,"");{const d=a.name??"";return i_({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Yn,i.NULL=new qf,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Nn(Zy)}),i.__NG_ELEMENT_ID__=-1,i})();function lh(i,s=Ze.Default){const a=De();return null===a?Nn(i,s):to(Dn(),a,Z(i),s)}function dh(){throw new Error("invalid")}function xn(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],f=a[c+1];if(-1!==f){const _=i.data[f];wa(d),_.contentQueries(2,s[f],f)}}}function np(i,s,a,c,d,f,_,I,E,T,R){const N=s.blueprint.slice();return N[0]=d,N[2]=76|c,(null!==R||i&&1024&i[2])&&(N[2]|=1024),bu(N),N[3]=N[15]=i,N[8]=a,N[10]=_||i&&i[10],N[11]=I||i&&i[11],N[12]=E||i&&i[12]||null,N[9]=T||i&&i[9]||null,N[6]=f,N[20]=function Tf(){return Vd++}(),N[21]=R,N[16]=2==s.type?i[16]:N,N}function mh(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Ol(i,s,a,c,d){const f=xu(),_=ga(),E=i.data[s]=function Nw(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,d),function eg(){return Mt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const _=function Eo(){const i=Mt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ii(f,!0),f}function yh(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Ug(i,s,a){ku(s);try{const c=i.viewQuery;null!==c&&Gg(1,c,a);const d=i.template;null!==d&&Yo(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&xn(i,s),i.staticViewQueries&&Gg(2,i.viewQuery,a);const f=i.components;null!==f&&function Fg(i,s){for(let a=0;a<s.length;a++)jw(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Ks()}}function Ya(i,s,a,c){const d=s[2];if(128!=(128&d)){ku(s);try{bu(s),function Wc(i){return Mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Yo(i,s,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Qs(s,T,null)}else{const T=i.preOrderHooks;null!==T&&bo(s,T,0,null),wd(s,0)}if(function Qb(i){for(let s=pl(i);null!==s;s=gl(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],f=d[3];0==(512&d[2])&&wn(f,1),d[2]|=512}}}(s),function Bw(i){for(let s=pl(i);null!==s;s=gl(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];Ws(c)&&Ya(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&xn(i,s),_){const T=i.contentCheckHooks;null!==T&&Qs(s,T)}else{const T=i.contentHooks;null!==T&&bo(s,T,1),wd(s,1)}!function Gb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Hr(~d);else{const f=d,_=a[++c],I=a[++c];tg(_,f),I(2,s[f])}}}finally{Hr(-1)}}(i,s);const I=i.components;null!==I&&function Lg(i,s){for(let a=0;a<s.length;a++)Ur(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Gg(2,E,c),_){const T=i.viewCheckHooks;null!==T&&Qs(s,T)}else{const T=i.viewHooks;null!==T&&bo(s,T,2),wd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,wn(s[3],-1))}finally{Ks()}}}function Yo(i,s,a,c,d){const f=Kn(),_=2&c;try{Hr(-1),_&&s.length>22&&r_(i,s,22,!1),a(c,d)}finally{Hr(f)}}function w_(i,s,a){if(mu(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}function Vg(i,s,a){!Qi()||(function jt(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||eo(a,s),Lr(c,s);const _=a.initialInputs;for(let I=d;I<f;I++){const E=i.data[I],T=Cr(E);T&&Zb(s,a,E);const R=Ji(s,i,I,a);Lr(R,s),null!==_&&Kb(0,I-d,R,E,0,_),T&&(Gt(a.index,s)[8]=R)}}(i,s,a,Tr(a,s)),128==(128&a.flags)&&function Wb(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,_=function Zc(){return Mt.lFrame.currentDirectiveIndex}();try{Hr(f);for(let I=c;I<d;I++){const E=i.data[I],T=s[I];Mu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&ip(E,T)}}finally{Hr(-1),Mu(_)}}(i,s,a))}function Bg(i,s,a=Tr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(s,i):i[_];i[d++]=I}}}function Ll(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=rp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function rp(i,s,a,c,d,f,_,I,E,T){const R=22+c,N=R+d,H=function zb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:ht);return a}(R,N),ee="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:ee,incompleteFirstPass:!1}}function I_(i,s,a,c){const d=D_(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&$w(i).push(c,d.length-1))}function Qa(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function Ow(i,s){const c=s.directiveEnd,d=i.data,f=s.attrs,_=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const R=d[T],N=R.inputs,H=null===f||ih(s)?null:Yb(N,f);_.push(H),I=Qa(N,T,I),E=Qa(R.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=E}function _h(i,s){const a=Gt(s,i);16&a[2]||(a[2]|=32)}function Fl(i,s,a,c){let d=!1;if(Qi()){const f=function sp(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];xg(a,_.selectors,!1)&&(d||(d=[]),Ts(eo(a,s),i,_.type),Cr(_)?(vh(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===c?null:{"":-1};if(null!==f){d=!0,E_(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const N=f[R];N.providersResolver&&N.providersResolver(N)}let I=!1,E=!1,T=yh(i,s,f.length,null);for(let R=0;R<f.length;R++){const N=f[R];a.mergedAttrs=Ia(a.mergedAttrs,N.hostAttrs),b_(i,a,s,T,N),Vw(T,N,_),null!==N.contentQueries&&(a.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=128);const H=N.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}Ow(i,a)}_&&function jg(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new we(-301,!1);c.push(s[d],f)}}}(a,c,_)}return a.mergedAttrs=Ia(a.mergedAttrs,a.attrs),d}function Uw(i,s,a,c,d,f){const _=f.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function qb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,d,_)}}function ip(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function vh(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Vw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Cr(s)&&(a[""]=i)}}function E_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function b_(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Ti(d.type)),_=new Cs(f,Cr(d),lh);i.blueprint[c]=_,a[c]=_,Uw(i,s,0,c,yh(i,a,d.hostVars,ht),d)}function Zb(i,s,a){const c=Tr(s,i),d=Ll(a),f=i[10],_=ls(i,np(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=_}function lo(i,s,a,c,d,f){const _=Tr(i,s);!function $g(i,s,a,c,d,f,_){if(null==f)i.removeAttribute(s,d,a);else{const I=null==_?me(f):_(f,c||"",d);i.setAttribute(s,d,I,a)}}(s[11],_,f,i.value,a,c,d)}function Kb(i,s,a,c,d,f){const _=f[s];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const T=_[E++],R=_[E++],N=_[E++];null!==I?c.setInput(a,N,T,R):a[R]=N}}}function Yb(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function wh(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Ur(i,s){const a=Gt(s,i);if(Ws(a)){const c=a[1];48&a[2]?Ya(c,a,c.template,a[8]):a[5]>0&&op(a)}}function op(i){for(let c=pl(i);null!==c;c=gl(c))for(let d=10;d<c.length;d++){const f=c[d];if(Ws(f))if(512&f[2]){const _=f[1];Ya(_,f,_.template,f[8])}else f[5]>0&&op(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Gt(a[c],i);Ws(d)&&d[5]>0&&op(d)}}function jw(i,s){const a=Gt(s,i),c=a[1];(function ap(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ug(c,a,a[8])}function ls(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function up(i){for(;i;){i[2]|=32;const s=Oa(i);if(rf(i)&&!s)return i;i=s}return null}function cp(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{Ya(i,s,i.template,a)}catch(_){throw c&&Ih(s,_),_}finally{d.end&&d.end()}}function Gg(i,s,a){wa(0),s(i,a)}function D_(i){return i[7]||(i[7]=[])}function $w(i){return i.cleanup||(i.cleanup=[])}function Ih(i,s){const a=i[9],c=a?a.get($e,null):null;c&&c.handleError(s)}function lp(i,s,a,c,d){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=s[_],T=i.data[_];null!==T.setInput?T.setInput(E,d,c,I):E[I]=d}}function Ja(i,s,a){const c=function ri(i,s){return bn(s[i])}(s,i);!function Ju(i,s,a){i.setValue(s,a)}(i[11],c,a)}function dp(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?f=I:1==f?d=fe(d,I):2==f&&(c=fe(c,I+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Eh(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(bn(f)),Nr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Eh(E[1],E,T,c)}const _=a.type;if(8&_)Eh(i,s,a.child,c);else if(32&_){const I=Hd(a,s);let E;for(;E=I();)c.push(E)}else if(16&_){const I=Of(s,a);if(Array.isArray(I))c.push(...I);else{const E=Oa(s[16]);Eh(E[1],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class bh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Eh(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Nr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Fa(s,c),xi(a,c))}this._attachedToViewContainer=!1}Wd(this._lView[1],this._lView)}onDestroy(s){I_(this._lView[1],this._lView,null,s)}markForCheck(){up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zd(i,s){tc(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class Jb extends bh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;cp(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class zg extends Zf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Y(s);return new Qo(a,this.ngModule)}}function Gw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Dh{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const d=this.injector.get(s,bl,c);return d!==bl||a===bl?d:this.parentInjector.get(s,a,c)}}class Qo extends Ir{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function er(i){return i.map(_w).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Gw(this.componentDef.inputs)}get outputs(){return Gw(this.componentDef.outputs)}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Pi?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new Dh(s,f):s,I=_.get(Jy,null);if(null===I)throw new we(407,!1);const E=_.get(pw,null),T=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",N=c?function nn(i,s,a){return i.selectRootElement(s,a===ot.ShadowDom)}(T,c,this.componentDef.encapsulation):_r(T,R,function eD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),H=this.componentDef.onPush?288:272,ee=rp(0,null,null,1,0,null,null,null,null,null),_e=np(null,ee,null,H,null,null,I,T,E,_,null);let Oe,ze;ku(_e);try{const it=function _i(i,s,a,c,d,f){const _=a[1];a[22]=i;const E=mh(_,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(dp(E,T,!0),null!==i&&(To(d,i,T),null!==E.classes&&an(d,i,E.classes),null!==E.styles&&is(d,i,E.styles)));const R=c.createRenderer(i,s),N=np(a,Ll(s),null,s.onPush?32:16,a[22],E,c,R,f||null,null,null);return _.firstCreatePass&&(Ts(eo(E,a),_,s.type),vh(_,E),E_(E,a.length,1)),ls(a,N),a[22]=N}(N,this.componentDef,_e,I,T);if(N)if(c)To(T,N,["ng-version",St.full]);else{const{attrs:wt,classes:Te}=function Mg(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Zr(d))break;d=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);wt&&To(T,N,wt),Te&&Te.length>0&&an(T,N,Te.join(" "))}if(ze=Io(ee,22),void 0!==a){const wt=ze.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const At=a[Te];wt.push(null!=At?Array.from(At):null)}}Oe=function iD(i,s,a,c){const d=a[1],f=function Fw(i,s,a){const c=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),b_(i,c,s,yh(i,s,1,null),a),Ow(i,c));const d=Ji(s,i,c.directiveStart,c);Lr(d,s);const f=Tr(c,s);return f&&Lr(f,s),d}(d,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Dn();s.contentQueries(1,f,I.directiveStart)}const _=Dn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Hr(_.index),Uw(a[1],_,0,_.directiveStart,_.directiveEnd,s),ip(s,f)),f}(it,this.componentDef,_e,[zw]),Ug(ee,_e,null)}finally{Ks()}return new nD(this.componentType,Oe,El(ze,_e),_e,ze)}}class nD extends class Re{}{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Jb(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;lp(f[1],f,d,s,a),_h(f,this._tNode.index)}}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function zw(){const i=Dn();Ou(De()[1],i)}let Zg=null;function Ul(){if(!Zg){const i=rn.Symbol;if(i&&i.iterator)Zg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Zg=c)}}}return Zg}function hp(i){return!!T_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ul()in i)}function T_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xo(i,s,a){return i[s]=a}function ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function pp(i,s,a,c){const d=De();return ci(d,Zs(),s)&&($t(),lo(hn(),d,i,s,a,c)),pp}function M_(i,s,a,c,d,f,_,I){const E=De(),T=$t(),R=i+22,N=T.firstCreatePass?function qw(i,s,a,c,d,f,_,I,E){const T=s.consts,R=mh(s,i,4,_||null,pi(T,I));Fl(s,a,R,pi(T,E)),Ou(s,R);const N=R.tViews=rp(2,R,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),N.queries=s.queries.embeddedTView(R)),R}(R,T,E,s,a,c,d,f,_):T.data[R];ii(N,!1);const H=E[11].createComment("");Os(T,E,H,N),Lr(H,E),ls(E,E[R]=wh(H,E,H,N)),Uc(N)&&Vg(T,E,N),null!=_&&Bg(E,N,I)}function Ah(i){return Yi(function qc(){return Mt.lFrame.contextLView}(),22+i)}function tu(i,s,a){const c=De();return ci(c,Zs(),s)&&function Fi(i,s,a,c,d,f,_,I){const E=Tr(s,a);let R,T=s.inputs;!I&&null!=T&&(R=T[c])?(lp(i,a,R,c,d),da(s)&&_h(a,s.index)):3&s.type&&(c=function Li(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,s.value||"",c):d,f.setProperty(E,c,d))}($t(),hn(),c,i,s,c[11],a,!1),tu}function R_(i,s,a,c,d){const _=d?"class":"style";lp(i,a,s.inputs[_],_,c)}function Xg(i,s,a,c){const d=De(),f=$t(),_=22+i,I=d[11],E=d[_]=_r(I,s,function Nu(){return Mt.lFrame.currentNamespace}()),T=f.firstCreatePass?function Ww(i,s,a,c,d,f,_){const I=s.consts,T=mh(s,i,2,d,pi(I,f));return Fl(s,a,T,pi(I,_)),null!==T.attrs&&dp(T,T.attrs,!1),null!==T.mergedAttrs&&dp(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,d,0,s,a,c):f.data[_];ii(T,!0);const R=T.mergedAttrs;null!==R&&To(I,E,R);const N=T.classes;null!==N&&an(I,E,N);const H=T.styles;return null!==H&&is(I,E,H),64!=(64&T.flags)&&Os(f,d,E,T),0===function Cu(){return Mt.lFrame.elementDepthCount}()&&Lr(E,d),function Tu(){Mt.lFrame.elementDepthCount++}(),Uc(T)&&(Vg(f,d,T),w_(f,T,d)),null!==c&&Bg(d,T),Xg}function Jg(){let i=Dn();ga()?ma():(i=i.parent,ii(i,!1));const s=i;!function Hc(){Mt.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Ou(a,i),mu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Uu(i){return 0!=(16&i.flags)}(s)&&R_(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ed(i){return 0!=(32&i.flags)}(s)&&R_(a,s,De(),s.stylesWithoutHost,!1),Jg}function k_(i,s,a,c){return Xg(i,s,a,c),Jg(),k_}function Jo(i,s,a){const c=De(),d=$t(),f=i+22,_=d.firstCreatePass?function gp(i,s,a,c,d){const f=s.consts,_=pi(f,c),I=mh(s,i,8,"ng-container",_);return null!==_&&dp(I,_,!0),Fl(s,a,I,pi(f,d)),null!==s.queries&&s.queries.elementStart(s,I),I}(f,d,c,s,a):d.data[f];ii(_,!0);const I=c[f]=c[11].createComment("");return Os(d,c,I,_),Lr(I,c),Uc(_)&&(Vg(d,c,_),w_(d,_,c)),null!=a&&Bg(c,_),Jo}function ea(){let i=Dn();const s=$t();return ga()?ma():(i=i.parent,ii(i,!1)),s.firstCreatePass&&(Ou(s,i),mu(i)&&s.queries.elementEnd(i)),ea}function Zw(){return De()}function N_(i){return!!i&&"function"==typeof i.then}function em(i){return!!i&&"function"==typeof i.subscribe}const mp=em;function O_(i,s,a,c){const d=De(),f=$t(),_=Dn();return function _p(i,s,a,c,d,f,_,I){const E=Uc(c),R=i.firstCreatePass&&$w(i),N=s[8],H=D_(s);let ee=!0;if(3&c.type||I){const ze=Tr(c,s),it=I?I(ze):ze,wt=H.length,Te=I?un=>I(bn(un[c.index])):c.index;let At=null;if(!I&&E&&(At=function yp(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===c){const I=s[7],E=d[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=f,At.__ngLastListenerFn__=f,ee=!1;else{f=F_(c,s,N,f,!1);const un=a.listen(it,d,f);H.push(f,un),R&&R.push(d,Te,wt,wt+1)}}else f=F_(c,s,N,f,!1);const _e=c.outputs;let Oe;if(ee&&null!==_e&&(Oe=_e[d])){const ze=Oe.length;if(ze)for(let it=0;it<ze;it+=2){const En=s[Oe[it]][Oe[it+1]].subscribe(f),rd=H.length;H.push(f,En),R&&R.push(d,c.index,rd,-(rd+1))}}}(f,d,d[11],_,i,s,0,c),O_}function xh(i,s,a,c){try{return!1!==a(c)}catch(d){return Ih(i,d),!1}}function F_(i,s,a,c,d){return function f(_){if(_===Function)return c;up(2&i.flags?Gt(i.index,s):s);let E=xh(s,0,c,_),T=f.__ngNextListenerFn__;for(;T;)E=xh(s,0,T,_)&&E,T=T.__ngNextListenerFn__;return d&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function U_(i=1){return function Ys(i){return(Mt.lFrame.contextLView=function Pu(i,s){for(;i>0;)s=s[15],i--;return s}(i,Mt.lFrame.contextLView))[8]}(i)}function W_(i,s=""){const a=De(),c=$t(),d=i+22,f=c.firstCreatePass?mh(c,d,1,s,null):c.data[d],_=a[d]=function Gd(i,s){return i.createText(s)}(a[11],s);Os(c,a,_,f),ii(f,!1)}function Z_(i){return Dc("",i,""),Z_}function Dc(i,s,a){const c=De(),d=function mc(i,s,a,c){return ci(i,Zs(),a)?s+me(a)+c:ht}(c,i,s,a);return d!==ht&&Ja(c,Kn(),d),Dc}const go=void 0;var kh=["en",[["a","p"],["AM","PM"],go],[["AM","PM"],go,go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",go,"{1} 'at' {0}",go],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iv(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Cc={};function ql(i){const s=function CI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=hm(s);if(a)return a;const c=s.split("-")[0];if(a=hm(c),a)return a;if("en"===c)return kh;throw new we(701,!1)}function ov(i){return ql(i)[ft.PluralCase]}function hm(i){return i in Cc||(Cc[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),Cc[i]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const Ph="en-US";let cv=Ph;class Tc{}class Cm{}function Uv(i,s){return new Vv(i,s??null)}class Vv extends Tc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zg(this);const c=ln(s);this._bootstrapComponents=Zo(c.bootstrap),this._r3Injector=sh(s,a,[{provide:Tc,useValue:this},{provide:Zf,useValue:this.componentFactoryResolver}],he(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Tm extends Cm{constructor(s){super(),this.moduleType=s}create(s){return new Vv(this.moduleType,s)}}class KD extends Tc{constructor(s,a,c){super(),this.componentFactoryResolver=new zg(this),this.instance=null;const d=new Tg([...s,{provide:Tc,useValue:this},{provide:Zf,useValue:this.componentFactoryResolver}],a||$a(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Ap(i,s,a=null){return new KD(i,s,a).injector}let Bv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Yy(0,a.type),d=c.length>0?Ap([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Xt({token:i,providedIn:"environment",factory:()=>new i(Nn(Pi))}),i})();function jv(i){i.getStandaloneInjector=s=>s.get(Bv).getOrCreateStandaloneInjector(i)}function Rp(i,s,a){const c=Cn()+i,d=De();return d[c]===ht?Xo(d,c,a?s.call(a):s()):function Ch(i,s){return i[s]}(d,c)}function ZI(i,s,a,c){return Am(De(),Cn(),i,s,a,c)}function Am(i,s,a,c,d,f){const _=s+a;return ci(i,_,d)?Xo(i,_+1,f?c.call(f,d):c(d)):function Bh(i,s){const a=i[s];return a===ht?void 0:a}(i,_+1)}function Wv(i,s){const a=$t();let c;const d=i+22;a.firstCreatePass?(c=function km(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=Ti(c.type)),_=zn(lh);try{const I=Da(!1),E=f();return Da(I),function Qg(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,De(),d,E),E}finally{zn(_)}}function Pm(i,s,a){const c=i+22,d=De(),f=Yi(d,c);return function Pp(i,s){return i[1].data[s].pure}(d,c)?Am(d,Cn(),s,f.transform,a,f):f.transform(a)}function Nm(i){return s=>{setTimeout(i,void 0,s)}}const ra=class iC extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),_=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=Nm(f),d&&(d=Nm(d)),_&&(_=Nm(_)));const I=super.subscribe({next:d,error:f,complete:_});return s instanceof J.w0&&s.add(I),I}};function XI(){return this._results[Ul()]()}class Kv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ul(),c=Kv.prototype;c[a]||(c[a]=XI)}get changes(){return this._changes||(this._changes=new ra)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=cr(s);(this._changesDetected=!function Jt(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Np=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yv,i})();const sC=Np,oC=class extends sC{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=np(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),Ug(c,d,s),new bh(d)}};function Yv(){return Om(Dn(),De())}function Om(i,s){return 4&i.type?new oC(s,i,El(i,s)):null}let Lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Rn,i})();function Rn(){return JI(Dn(),De())}const aS=Lm,aC=class extends aS{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return El(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){const s=$u(this._hostTNode,this._hostLView);if(Dd(s)){const a=ba(s,this._hostLView),c=or(s);return new no(a[1].data[c+8],a)}return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=rr(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=s.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(s,a,c,d,f){const _=s&&!function io(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const N=a||{};I=N.index,c=N.injector,d=N.projectableNodes,f=N.environmentInjector||N.ngModuleRef}const E=_?s:new Qo(Y(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(_?T:this.parentInjector).get(Pi,null);H&&(f=H)}const R=E.create(T,d,void 0,f);return this.insert(R.hostView,I),R}insert(s,a){const c=s._lView,d=c[1];if(function Eu(i){return Nr(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const N=c[3],H=new aC(N,N[6],N[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function La(i,s,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=s),c<f-10?(s[4]=a[d],yn(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function fg(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(d,c,_,f);const I=Lf(f,_),E=c[11],T=ao(E,_[7]);return null!==T&&function ml(i,s,a,c,d,f){c[0]=d,c[6]=s,tc(i,c,a,1,d,f)}(d,_[6],E,c,T,I),s.attachToViewContainerRef(),yn(Fm(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=rr(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Fa(this._lContainer,a);c&&(xi(Fm(this._lContainer),a),Wd(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Fa(this._lContainer,a);return c&&null!=xi(Fm(this._lContainer),a)?new bh(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function rr(i){return i[8]}function Fm(i){return i[8]||(i[8]=[])}function JI(i,s){let a;const c=s[i.index];if(Nr(c))a=c;else{let d;if(8&i.type)d=bn(c);else{const f=s[11];d=f.createComment("");const _=Tr(i,s);Ho(f,ao(f,_),d,function Nf(i,s){return i.nextSibling(s)}(f,_),!1)}s[i.index]=a=wh(c,s,d,i),ls(s,a)}return new aC(a,i,s)}class Qv{constructor(s){this.queryList=s,this.matches=null}clone(){return new Qv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Xv(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Fp(s,a).matches&&this.queries[a].setDirty()}}class tE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class nE{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new nE(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Jv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Jv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,cC(a,f)),this.matchTNodeWithReadOption(s,a,So(a,s,f,!1,!1))}else c===Np?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,So(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Kf||d===Lm||d===Np&&4&a.type)this.addMatch(a.index,-2);else{const f=So(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function cC(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function ia(i,s,a,c){return-1===a?function rE(i,s){return 11&i.type?El(i,s):4&i.type?Om(i,s):null}(s,i):-2===a?function su(i,s,a){return a===Kf?El(s,i):a===Np?Om(s,i):a===Lm?JI(s,i):void 0}(i,s,c):Ji(i,i[1],a,s)}function lC(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const T=_[E];I.push(T<0?null:ia(s,f[T],_[E+1],a.metadata.read))}d.matches=I}return d.matches}function ou(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=lC(i,s,d,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const T=f[I+1],R=s[-E];for(let N=10;N<R.length;N++){const H=R[N];H[17]===H[3]&&ou(H[1],H,T,c)}if(null!==R[9]){const N=R[9];for(let H=0;H<N.length;H++){const ee=N[H];ou(ee[1],ee,T,c)}}}}}return c}function Op(i){const s=De(),a=$t(),c=Kc();wa(c+1);const d=Fp(a,c);if(i.dirty&&function Iu(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?ou(a,s,c,[]):lC(a,s,d,c);i.reset(f,WT),i.notifyOnChanges()}return!0}return!1}function iE(i,s,a,c){const d=$t();if(d.firstCreatePass){const f=Dn();(function oE(i,s,a){null===i.queries&&(i.queries=new nE),i.queries.track(new Jv(s,a))})(d,new tE(s,a,c),f.index),function Ql(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Lp(i,s,a){const c=new Kv(4==(4&a));I_(i,s,c,c.destroy),null===s[19]&&(s[19]=new Xv),s[19].queries.push(new Qv(c))}(d,De(),a)}function e0(){return function sE(i,s){return i[19].queries[s].queryList}(De(),Kc())}function Fp(i,s){return i.queries.getByIndex(s)}function $h(i,s){return Om(i,s)}function Up(...i){}const td=new fn("Application Initializer");let qh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Up,this.reject=Up,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(N_(f))a.push(f);else if(mp(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Nn(td,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const EC=new fn("AppId",{providedIn:"root",factory:function bC(){return`${Wm()}${Wm()}${Wm()}`}});function Wm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cu=new fn("Platform Initializer"),DC=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vE=new fn("appBootstrapListener");let CC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Zm=new fn("LocaleId",{providedIn:"root",factory:()=>D(Zm,Ze.Optional|Ze.SkipSelf)||function TC(){return typeof $localize<"u"&&$localize.locale||Ph}()}),ES=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class AC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let l0=(()=>{class i{compileModuleSync(a){return new Tm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Zo(ln(a).declarations).reduce((_,I)=>{const E=Y(I);return E&&_.push(new Qo(E)),_},[]);return new AC(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ym=(()=>Promise.resolve(0))();function d0(i){typeof Zone>"u"?Ym.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class hs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ra(!1),this.onMicrotaskEmpty=new ra(!1),this.onStable=new ra(!1),this.onError=new ra(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function EE(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function bE(i){const s=()=>{!function wi(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Qm(i),i.isCheckStableRunning=!0,Bi(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Qm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,_,I)=>{try{return Wh(i),a.invokeTask(d,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Zh(i)}},onInvoke:(a,c,d,f,_,I,E)=>{try{return Wh(i),a.invoke(d,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Zh(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Qm(i),Bi(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,nd,Up,Up);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const nd={};function Bi(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Qm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Wh(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Zh(i){i._nesting--,Bi(i)}class Ii{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ra,this.onMicrotaskEmpty=new ra,this.onStable=new ra,this.onError=new ra}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const DE=new fn(""),Xm=new fn("");let lu,Kh=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lu||(function h0(i){lu=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),d0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())d0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Nn(hs),Nn(Ac),Nn(Xm))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),Ac=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return lu?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),xc=null;const CE=new fn("AllowMultipleToken"),f0=new fn("PlatformDestroyListeners");class br{constructor(s,a){this.name=s,this.token=a}}function SE(i,s,a=[]){const c=`Platform: ${s}`,d=new fn(c);return(f=[])=>{let _=Yh();if(!_||_.injector.get(CE,!1)){const I=[...a,...f,{provide:d,useValue:!0}];i?i(I):function RC(i){if(xc&&!xc.get(CE,!1))throw new we(400,!1);xc=i;const s=i.get(m0);(function TE(i){const s=i.get(cu,null);s&&s.forEach(a=>a())})(i)}(function Mc(i=[],s){return Al.create({name:s,providers:[{provide:nh,useValue:"platform"},{provide:f0,useValue:new Set([()=>xc=null])},...i]})}(I,c))}return function Bp(i){const s=Yh();if(!s)throw new we(401,!1);return s}()}}function Yh(){return xc?.get(m0)??null}let m0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function oa(i,s){let a;return a="noop"===i?new Ii:("zone.js"===i?void 0:i)||new hs(s),a}(c?.ngZone,function AE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:hs,useValue:d}];return d.run(()=>{const _=Al.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get($e,null);if(!E)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{E.handleError(R)}});I.onDestroy(()=>{jp(this._modules,I),T.unsubscribe()})}),function ey(i,s,a){try{const c=a();return N_(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const T=I.injector.get(qh);return T.runInitializers(),T.donePromise.then(()=>(function Wl(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(cv=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Zm,Ph)||Ph),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=y0({},c);return function MC(i,s,a){const c=new Tm(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Qh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(f0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Nn(Al))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function y0(i,s){return Array.isArray(s)?s.reduce(y0,i):{...i,...s}}let Qh=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new P.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),d0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,_.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Ir;if(!this._injector.get(qh).done)throw!d&&Zt(a),new we(405,false);let _;_=d?a:this._injector.get(Zf).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function g0(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Tc),T=_.create(Al.NULL,[],c||_.selector,I),R=T.location.nativeElement,N=T.injector.get(DE,null);return N?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),jp(this.components,T),N?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;jp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(vE,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>jp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Nn(hs),Nn(Pi),Nn($e))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function jp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let OC=!0,xE=!1;function _0(){return xE=!0,OC}function CS(){if(xE)throw new Error("Cannot enable prod mode after platform setup.");OC=!1}let SS=(()=>{class i{}return i.__NG_ELEMENT_ID__=AS,i})();function AS(i){return function xS(i,s,a){if(da(i)&&!a){const c=Gt(i.index,s);return new bh(c,c)}return 47&i.type?new bh(s[16],s):null}(Dn(),De(),16==(16&i))}class D0{constructor(){}supports(s){return hp(s)}create(s){return new iy(s)}}const C0=(i,s)=>s;class iy{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||C0}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<PE(c,d,f)?a:c,I=PE(_,d,f),E=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=I-d,R=E-d;if(T!=R){for(let H=0;H<T;H++){const ee=H<f.length?f[H]:f[H]=0,_e=ee+H;R<=_e&&_e<T&&(f[H]=ee+1)}f[_.previousIndex]=R-T}}I!==E&&s(_,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!hp(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else d=0,function hD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Ul()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new T0(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class T0{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class S0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class kE{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new S0,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PE(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class NE{constructor(){}supports(s){return s instanceof Map||T_(s)}create(){return new UC}}class UC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||T_(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new VC(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class VC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xh(){return new sy([new D0])}let sy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Xh()),deps:[[i,new bt,new Be]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Xh}),i})();function x0(){return new M0([new NE])}let M0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||x0()),deps:[[i,new bt,new Be]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:x0}),i})();const R0=SE(null,"core",[]);let OE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Nn(Qh))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})();function k0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ut,Se,O)=>{O.d(Se,{Z:()=>we});var m=O(2090),J=O(4859),P=O(9681),oe=O(1877);class ie{constructor(me,pe){this._delegate=me,this.firebase=pe,(0,P._addComponent)(me,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,pe=P._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(me);return!st.isInitialized()&&"EXPLICIT"===(null===(Xe=st.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&st.initialize(),st.getImmediate({identifier:pe})}_removeServiceInstance(me,pe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(pe)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function fe(){const tt=function he(tt){const me={},pe={__esModule:!0,initializeApp:function xe(je,V={}){const ge=P.initializeApp(je,V);if((0,m.r3)(me,ge.name))return me[ge.name];const q=new tt(ge,pe);return me[ge.name]=q,q},app:st,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const V=je.name,ge=V.replace("-compat","");if(P._registerComponent(je)&&"PUBLIC"===je.type){const q=(X=st())=>{if("function"!=typeof X[ge])throw le.create("invalid-app-argument",{appName:V});return X[ge]()};void 0!==je.serviceProps&&(0,m.ZB)(q,je.serviceProps),pe[ge]=q,tt.prototype[ge]=function(...X){return this._getService.bind(this,V).apply(this,je.multipleInstances?X:[])}}return"PUBLIC"===je.type?pe[ge]:null},removeApp:function Xe(je){delete me[je]},useAsService:function Ve(je,V){return"serverAuth"===V?null:V},modularAPIs:P}};function st(je){if(!(0,m.r3)(me,je=je||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:je});return me[je]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function ye(){return Object.keys(me).map(je=>me[je])}}),st.App=tt,pe}(ie);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function me(pe){(0,m.ZB)(tt,pe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),tt}(),j=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(tt){(0,P.registerVersion)("@firebase/app-compat","0.1.39",tt)}()},9681:(ut,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>$s,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Xt,_apps:()=>on,_clearComponents:()=>Gi,_components:()=>gn,_getProvider:()=>Nt,_registerComponent:()=>Rr,_removeServiceInstance:()=>cn,deleteApp:()=>ca,getApp:()=>Jr,getApps:()=>ei,initializeApp:()=>hi,onLog:()=>ms,registerVersion:()=>Dr,setLogLevel:()=>zn});var m=O(5861),J=O(4859),P=O(1877),oe=O(2090),ie=O(8766);class de{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function le(et){return"VERSION"===et.getComponent()?.type}(Je)){const Ct=Je.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(Je=>Je).join(" ")}}const he="@firebase/app",B=new P.Yd("@firebase/app"),Bt="[DEFAULT]",We={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,gn=new Map;function Wt(et,Ce){try{et.container.addComponent(Ce)}catch(Je){B.debug(`Component ${Ce.name} failed to register with FirebaseApp ${et.name}`,Je)}}function Xt(et,Ce){et.container.addOrOverwriteComponent(Ce)}function Rr(et){const Ce=et.name;if(gn.has(Ce))return B.debug(`There were multiple attempts to register component ${Ce}.`),!1;gn.set(Ce,et);for(const Je of on.values())Wt(Je,et);return!0}function Nt(et,Ce){const Je=et.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),et.container.getProvider(Ce)}function cn(et,Ce,Je=Bt){Nt(et,Ce).clearInstance(Je)}function Gi(){gn.clear()}const kr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vr{constructor(Ce,Je,Ct){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}const $s="9.14.0";function hi(et,Ce={}){let Je=et;"object"!=typeof Ce&&(Ce={name:Ce});const Ct=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Ce),Et=Ct.name;if("string"!=typeof Et||!Et)throw kr.create("bad-app-name",{appName:String(Et)});if(Je||(Je=(0,oe.aH)()),!Je)throw kr.create("no-options");const Ut=on.get(Et);if(Ut){if((0,oe.vZ)(Je,Ut.options)&&(0,oe.vZ)(Ct,Ut.config))return Ut;throw kr.create("duplicate-app",{appName:Et})}const $=new J.H0(Et);for(const W of gn.values())$.addComponent(W);const U=new Vr(Je,Ct,$);return on.set(Et,U),U}function Jr(et=Bt){const Ce=on.get(et);if(!Ce&&et===Bt)return hi();if(!Ce)throw kr.create("no-app",{appName:et});return Ce}function ei(){return Array.from(on.values())}function ca(et){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(et){const Ce=et.name;on.has(Ce)&&(on.delete(Ce),yield Promise.all(et.container.getProviders().map(Je=>Je.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Dr(et,Ce,Je){var Ct;let Et=null!==(Ct=We[et])&&void 0!==Ct?Ct:et;Je&&(Et+=`-${Je}`);const Ut=Et.match(/\s|\//),$=Ce.match(/\s|\//);if(Ut||$){const U=[`Unable to register library "${Et}" with version "${Ce}":`];return Ut&&U.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Ut&&$&&U.push("and"),$&&U.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void B.warn(U.join(" "))}Rr(new J.wA(`${Et}-version`,()=>({library:Et,version:Ce}),"VERSION"))}function ms(et,Ce){if(null!==et&&"function"!=typeof et)throw kr.create("invalid-log-argument");(0,P.Am)(et,Ce)}function zn(et){(0,P.Ub)(et)}const kn="firebase-heartbeat-store";let Ln=null;function dn(){return Ln||(Ln=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(et,Ce)=>{0===Ce&&et.createObjectStore(kn)}}).catch(et=>{throw kr.create("idb-open",{originalErrorMessage:et.message})})),Ln}function ot(){return(ot=(0,m.Z)(function*(et){var Ce;try{return(yield dn()).transaction(kn).objectStore(kn).get(Fn(et))}catch(Je){if(Je instanceof oe.ZR)B.warn(Je.message);else{const Ct=kr.create("idb-get",{originalErrorMessage:null===(Ce=Je)||void 0===Ce?void 0:Ce.message});B.warn(Ct.message)}}})).apply(this,arguments)}function rn(et,Ce){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(et,Ce){var Je;try{const Et=(yield dn()).transaction(kn,"readwrite");return yield Et.objectStore(kn).put(Ce,Fn(et)),Et.done}catch(Ct){if(Ct instanceof oe.ZR)B.warn(Ct.message);else{const Et=kr.create("idb-set",{originalErrorMessage:null===(Je=Ct)||void 0===Je?void 0:Je.message});B.warn(Et.message)}}})).apply(this,arguments)}function Fn(et){return`${et.name}!${et.options.appId}`}class ys{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new tn(Je),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ce=this;return(0,m.Z)(function*(){const Ct=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=en();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Et&&!Ce._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Et))return Ce._heartbeatsCache.heartbeats.push({date:Et,agent:Ct}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ut=>{const $=new Date(Ut.date).valueOf();return Date.now()-$<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,m.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Je=en(),{heartbeatsToSend:Ct,unsentEntries:Et}=function Di(et,Ce=1024){const Je=[];let Ct=et.slice();for(const Et of et){const Ut=Je.find($=>$.agent===Et.agent);if(Ut){if(Ut.dates.push(Et.date),qn(Je)>Ce){Ut.dates.pop();break}}else if(Je.push({agent:Et.agent,dates:[Et.date]}),qn(Je)>Ce){Je.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:Je,unsentEntries:Ct}}(Ce._heartbeatsCache.heartbeats),Ut=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Je,Et.length>0?(Ce._heartbeatsCache.heartbeats=Et,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ut})()}}function en(){return(new Date).toISOString().substring(0,10)}class tn{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,m.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function yt(et){return ot.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Je=this;return(0,m.Z)(function*(){var Ct;if(yield Je._canUseIndexedDBPromise){const Ut=yield Je.read();return rn(Je.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ut.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Je=this;return(0,m.Z)(function*(){var Ct;if(yield Je._canUseIndexedDBPromise){const Ut=yield Je.read();return rn(Je.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ce.heartbeats]})}})()}}function qn(et){return(0,oe.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Pr(et){Rr(new J.wA("platform-logger",Ce=>new de(Ce),"PRIVATE")),Rr(new J.wA("heartbeat",Ce=>new ys(Ce),"PRIVATE")),Dr(he,"0.8.4",et),Dr(he,"0.8.4","esm2017"),Dr("fire-js","")}("")},4859:(ut,Se,O)=>{O.d(Se,{H0:()=>he,wA:()=>P});var m=O(5861),J=O(2090);class P{constructor(B,j,Z){this.name=B,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class ie{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Z=new J.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&Z.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Z=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(fe){return"EAGER"===fe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,Z]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});Z.resolve(Me)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,m.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Z=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[Me,we]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Me)&&we.resolve(Le);return Le}onInit(B,j){var Z;const Le=this.normalizeInstanceIdentifier(j),Me=null!==(Z=this.onInitCallbacks.get(Le))&&void 0!==Z?Z:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const Le of Z)try{Le(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Z=this.instances.get(B);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=B,fe===oe?void 0:fe),options:j}),this.instances.set(B,Z),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Z,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Z)}catch{}var fe;return Z||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new ie(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Se,O)=>{O.d(Se,{Am:()=>fe,Ub:()=>he,Yd:()=>le,in:()=>J});const m=[];var J=(()=>{return(B=J||(J={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",J;var B})();const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},oe=J.INFO,ie={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},de=(B,j,...Z)=>{if(j<B.logLevel)return;const Le=(new Date).toISOString(),Me=ie[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${Le}]  ${B.name}:`,...Z)};class le{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function he(B){m.forEach(j=>{j.setLogLevel(B)})}function fe(B,j){for(const Z of m){let Le=null;j&&j.level&&(Le=P[j.level]),Z.userLogHandler=null===B?null:(Me,we,...tt)=>{const me=tt.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");we>=(Le??Me.logLevel)&&B({level:J[we].toLowerCase(),message:me,args:tt,type:Me.name})}}}},8766:(ut,Se,O)=>{O.d(Se,{Lj:()=>xe,X3:()=>st});var m=O(5861);let P,oe;const le=new WeakMap,he=new WeakMap,fe=new WeakMap,B=new WeakMap,j=new WeakMap;let Me={get(V,ge,q){if(V instanceof IDBTransaction){if("done"===ge)return he.get(V);if("objectStoreNames"===ge)return V.objectStoreNames||fe.get(V);if("store"===ge)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return pe(V[ge])},set:(V,ge,q)=>(V[ge]=q,!0),has:(V,ge)=>V instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in V};function me(V){return"function"==typeof V?function tt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ge){return V.apply(Xe(this),ge),pe(le.get(this))}:function(...ge){return pe(V.apply(Xe(this),ge))}:function(ge,...q){const X=V.call(Xe(this),ge,...q);return fe.set(X,ge.sort?ge.sort():[ge]),pe(X)}}(V):(V instanceof IDBTransaction&&function Le(V){if(he.has(V))return;const ge=new Promise((q,X)=>{const ne=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Ne),V.removeEventListener("abort",Ne)},te=()=>{q(),ne()},Ne=()=>{X(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",te),V.addEventListener("error",Ne),V.addEventListener("abort",Ne)});he.set(V,ge)}(V),((V,ge)=>ge.some(q=>V instanceof q))(V,function ie(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Me):V)}function pe(V){if(V instanceof IDBRequest)return function Z(V){const ge=new Promise((q,X)=>{const ne=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Ne)},te=()=>{q(pe(V.result)),ne()},Ne=()=>{X(V.error),ne()};V.addEventListener("success",te),V.addEventListener("error",Ne)});return ge.then(q=>{q instanceof IDBCursor&&le.set(q,V)}).catch(()=>{}),j.set(ge,V),ge}(V);if(B.has(V))return B.get(V);const ge=me(V);return ge!==V&&(B.set(V,ge),j.set(ge,V)),ge}const Xe=V=>j.get(V);function st(V,ge,{blocked:q,upgrade:X,blocking:ne,terminated:te}={}){const Ne=indexedDB.open(V,ge),Pe=pe(Ne);return X&&Ne.addEventListener("upgradeneeded",ct=>{X(pe(Ne.result),ct.oldVersion,ct.newVersion,pe(Ne.transaction))}),q&&Ne.addEventListener("blocked",()=>q()),Pe.then(ct=>{te&&ct.addEventListener("close",()=>te()),ne&&ct.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Pe}function xe(V,{blocked:ge}={}){const q=indexedDB.deleteDatabase(V);return ge&&q.addEventListener("blocked",()=>ge()),pe(q).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ve=new Map;function je(V,ge){if(!(V instanceof IDBDatabase)||ge in V||"string"!=typeof ge)return;if(Ve.get(ge))return Ve.get(ge);const q=ge.replace(/FromIndex$/,""),X=ge!==q,ne=Ie.includes(q);if(!(q in(X?IDBIndex:IDBObjectStore).prototype)||!ne&&!ye.includes(q))return;const te=function(){var Ne=(0,m.Z)(function*(Pe,...ct){const Qt=this.transaction(Pe,ne?"readwrite":"readonly");let Bt=Qt.store;return X&&(Bt=Bt.index(ct.shift())),(yield Promise.all([Bt[q](...ct),ne&&Qt.done]))[0]});return function(ct){return Ne.apply(this,arguments)}}();return Ve.set(ge,te),te}!function we(V){Me=V(Me)}(V=>({...V,get:(ge,q,X)=>je(ge,q)||V.get(ge,q,X),has:(ge,q)=>!!je(ge,q)||V.has(ge,q)}))},5861:(ut,Se,O)=>{function m(P,oe,ie,de,le,he,fe){try{var B=P[he](fe),j=B.value}catch(Z){return void ie(Z)}B.done?oe(j):Promise.resolve(j).then(de,le)}function J(P){return function(){var oe=this,ie=arguments;return new Promise(function(de,le){var he=P.apply(oe,ie);function fe(j){m(he,de,le,fe,B,"next",j)}function B(j){m(he,de,le,fe,B,"throw",j)}fe(void 0)})}}O.d(Se,{Z:()=>J})}},ut=>{ut(ut.s=3459)}]);