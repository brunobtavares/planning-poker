(self.webpackChunkbt_planning_poker=self.webpackChunkbt_planning_poker||[]).push([[179],{2011:(lt,Se,L)=>{"use strict";L.d(Se,{Dh:()=>_e,GT:()=>ye,cc:()=>ke,hO:()=>Fe,on:()=>$,pX:()=>re,xv:()=>pe});var p=L(4650),ee=L(127),N=L(5813);lt=L.hmd(lt);const ue=["ngOnDestroy"],re=(ve,nt,ct,Me={})=>new Proxy(ve,{get:(Ie,we)=>ct.runOutsideAngular(()=>{var J;if(ve[we])return!(null===(J=Me?.spy)||void 0===J)&&J.get&&Me.spy.get(we,ve[we]),ve[we];if(ue.indexOf(we)>-1)return()=>{};const ce=nt.toPromise().then(U=>{const oe=U&&U[we];return"function"==typeof oe?oe.bind(U):oe&&oe.then?oe.then(W=>ct.run(()=>W)):ct.run(()=>oe)});return new Proxy(()=>{},{get:(U,oe)=>ce[oe],apply:(U,oe,W)=>ce.then(X=>{var ie;const ne=X&&X(...W);return!(null===(ie=Me?.spy)||void 0===ie)&&ie.apply&&Me.spy.apply(we,W,ne),ne})})})}),ye=(ve,nt)=>{nt.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(Me=>{Object.defineProperty(ve.prototype,Me,Object.getOwnPropertyDescriptor(ct.prototype||ct,Me))})})};class he{constructor(nt){return nt}}const _e=new p.OlP("angularfire2.app.options"),pe=new p.OlP("angularfire2.app.name");function $(ve,nt,ct){const Ie="object"==typeof ct&&ct||{};Ie.name=Ie.name||"string"==typeof ct&&ct||"[DEFAULT]";const J=ee.Z.apps.filter(ce=>ce&&ce.name===Ie.name)[0]||nt.runOutsideAngular(()=>ee.Z.initializeApp(ve,Ie));try{JSON.stringify(ve)!==JSON.stringify(J.options)&&j("error",`${J.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(J)}const j=(ve,...nt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ve](...nt)},Z={provide:he,useFactory:$,deps:[_e,p.R0b,[new p.FiY,pe]]};let Fe=(()=>{class ve{constructor(ct){ee.Z.registerVersion("angularfire",N.q4.full,"core"),ee.Z.registerVersion("angularfire",N.q4.full,"app-compat"),ee.Z.registerVersion("angular",p.q4F.full,ct.toString())}static initializeApp(ct,Me){return{ngModule:ve,providers:[{provide:_e,useValue:ct},{provide:pe,useValue:Me}]}}}return ve.\u0275fac=function(ct){return new(ct||ve)(p.LFG(p.Lbi))},ve.\u0275mod=p.oAB({type:ve}),ve.\u0275inj=p.cJS({providers:[Z]}),ve})();function ke(ve,nt,ct,Me,Ie){const[,we,J]=globalThis.\u0275AngularfireInstanceCache.find(ce=>ce[0]===ve)||[];if(we)return function be(ve,nt){try{return ve.toString()===nt.toString()}catch{return ve===nt}}(Ie,J)||(Ee("error",`${nt} was already initialized on the ${ct} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ie,was:J})),we;{const ce=Me();return globalThis.\u0275AngularfireInstanceCache.push([ve,ce,Ie]),ce}}const it=!!lt.hot,Ee=(ve,...nt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ve](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Se,L)=>{"use strict";L.d(Se,{q4:()=>ei,iC:()=>Ui,fc:()=>Yo,HU:()=>Zo,vb:()=>Ot,JM:()=>gi});var p=L(4650),ee=L(5867),N=L(5861),ue=L(9681),re=L(2090),ye=L(4859),he=L(1877),_e=L(8766);const pe="@firebase/installations",$="0.5.16",Z=`w:${$}`,Fe="FIS_v2",nt=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Me({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ie(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function we(D,T){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(D,T){const F=(yield T.json()).error;return nt.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ce({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:T}){const M=ce(D);return M.append("Authorization",function ie(D){return`${Fe} ${D}`}(T)),M}function oe(D){return W.apply(this,arguments)}function W(){return(W=(0,N.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ne(D,T){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:M}){const F=Me(D),Q=ce(D),ae=T.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&Q.append("x-firebase-client",kt)}const $e={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:Fe,appId:D.appId,sdkVersion:Z})},et=yield oe(()=>fetch(F,$e));if(et.ok){const kt=yield et.json();return{fid:kt.fid||M,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Ie(kt.authToken)}}throw yield we("Create Installation",et)})).apply(this,arguments)}function Ne(D){return new Promise(T=>{setTimeout(T,D)})}const Jt=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Xe(D){return function ht(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Jt.test(M)?M:""}catch{return""}}function Et(D){return`${D.appName}!${D.appId}`}const pt=new Map;function at(D,T){const M=Et(D);It(M,T),function yn(D,T){const M=function Tn(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=D=>{It(D.data.key,D.data.fid)}),Xn}();M&&M.postMessage({key:D,fid:T}),function Pr(){0===pt.size&&Xn&&(Xn.close(),Xn=null)}()}(M,T)}function It(D,T){const M=pt.get(D);if(M)for(const F of M)F(T)}let Xn=null;const ai="firebase-installations-store";let ui=null;function Ca(){return ui||(ui=(0,_e.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(ai)}})),ui}function Ye(D,T){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,N.Z)(function*(D,T){const M=Et(D),Q=(yield Ca()).transaction(ai,"readwrite"),ae=Q.objectStore(ai),Te=yield ae.get(M);return yield ae.put(T,M),yield Q.done,(!Te||Te.fid!==T.fid)&&at(D,T.fid),T})).apply(this,arguments)}function Cs(D){return er.apply(this,arguments)}function er(){return(er=(0,N.Z)(function*(D){const T=Et(D),F=(yield Ca()).transaction(ai,"readwrite");yield F.objectStore(ai).delete(T),yield F.done})).apply(this,arguments)}function li(D,T){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,N.Z)(function*(D,T){const M=Et(D),Q=(yield Ca()).transaction(ai,"readwrite"),ae=Q.objectStore(ai),Te=yield ae.get(M),$e=T(Te);return void 0===$e?yield ae.delete(M):yield ae.put($e,M),yield Q.done,$e&&(!Te||Te.fid!==$e.fid)&&at(D,$e.fid),$e})).apply(this,arguments)}function $n(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(D){let T;const M=yield li(D.appConfig,F=>{const Q=vn(F),ae=Tt(D,Q);return T=ae.registrationPromise,ae.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function vn(D){return $t(D||{fid:We(),registrationStatus:0})}function Tt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(nt.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function gt(D,T){return hn.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ir(D)}:{installationEntry:T}}function hn(){return(hn=(0,N.Z)(function*(D,T){try{const M=yield ne(D,T);return Ye(D.appConfig,M)}catch(M){throw ct(M)&&409===M.customData.serverCode?yield Cs(D.appConfig):yield Ye(D.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Ir(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,N.Z)(function*(D){let T=yield Zr(D.appConfig);for(;1===T.registrationStatus;)yield Ne(100),T=yield Zr(D.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield $n(D);return F||M}return T})).apply(this,arguments)}function Zr(D){return li(D,T=>{if(!T)throw nt.create("installation-not-found");return $t(T)})}function $t(D){return function Ts(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ln(D,T){return ki.apply(this,arguments)}function ki(){return(ki=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},M){const F=cn(D,M),Q=U(D,M),ae=T.getImmediate({optional:!0});if(ae){const kt=yield ae.getHeartbeatsHeader();kt&&Q.append("x-firebase-client",kt)}const $e={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},et=yield oe(()=>fetch(F,$e));if(et.ok)return Ie(yield et.json());throw yield we("Generate Auth Token",et)})).apply(this,arguments)}function cn(D,{fid:T}){return`${Me(D)}/${T}/authTokens:generate`}function tr(D){return jr.apply(this,arguments)}function jr(){return(jr=(0,N.Z)(function*(D,T=!1){let M;const F=yield li(D.appConfig,ae=>{if(!Wt(ae))throw nt.create("not-registered");const Te=ae.authToken;if(!T&&z(Te))return ae;if(1===Te.requestStatus)return M=ot(D,T),ae;{if(!navigator.onLine)throw nt.create("app-offline");const $e=K(ae);return M=Nt(D,$e),$e}});return M?yield M:F.authToken})).apply(this,arguments)}function ot(D,T){return xe.apply(this,arguments)}function xe(){return(xe=(0,N.Z)(function*(D,T){let M=yield st(D.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield st(D.appConfig);const F=M.authToken;return 0===F.requestStatus?tr(D,T):F})).apply(this,arguments)}function st(D){return li(D,T=>{if(!Wt(T))throw nt.create("not-registered");return function Ce(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Nt(D,T){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,N.Z)(function*(D,T){try{const M=yield ln(D,T),F=Object.assign(Object.assign({},T),{authToken:M});return yield Ye(D.appConfig,F),M}catch(M){if(!ct(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Ye(D.appConfig,F)}else yield Cs(D.appConfig);throw M}})).apply(this,arguments)}function Wt(D){return void 0!==D&&2===D.registrationStatus}function z(D){return 2===D.requestStatus&&!function B(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function K(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function Ge(){return(Ge=(0,N.Z)(function*(D){const T=D,{installationEntry:M,registrationPromise:F}=yield $n(T);return F?F.catch(console.error):tr(T).catch(console.error),M.fid})).apply(this,arguments)}function sn(){return(sn=(0,N.Z)(function*(D,T=!1){const M=D;return yield _n(M),(yield tr(M,T)).token})).apply(this,arguments)}function _n(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,N.Z)(function*(D){const{registrationPromise:T}=yield $n(D);T&&(yield T)})).apply(this,arguments)}function Ss(D){return nt.create("missing-app-config-values",{valueName:D})}const ko="installations",Sn=D=>{const T=D.getProvider("app").getImmediate(),M=function bn(D){if(!D||!D.options)throw Ss("App Configuration");if(!D.name)throw Ss("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!D.options[M])throw Ss(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Js=D=>{const T=D.getProvider("app").getImmediate(),M=(0,ue._getProvider)(T,ko).getImmediate();return{getId:()=>function Y(D){return Ge.apply(this,arguments)}(M),getToken:Q=>function yt(D){return sn.apply(this,arguments)}(M,Q)}};(function xu(){(0,ue._registerComponent)(new ye.wA(ko,Sn,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("installations-internal",Js,"PRIVATE"))})(),(0,ue.registerVersion)(pe,$),(0,ue.registerVersion)(pe,$,"esm2017");const Pi="@firebase/remote-config",Kn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Af{constructor(T,M,F,Q){this.client=T,this.storage=M,this.storageCache=F,this.logger=Q}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Q=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var M=this;return(0,N.Z)(function*(){const[F,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(T.cacheMaxAgeMillis,F))return Q;T.eTag=Q&&Q.eTag;const ae=yield M.client.fetch(T),Te=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Te.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Te),ae})()}}function rc(D=navigator){return D.languages&&D.languages[0]||D.language}class ic{constructor(T,M,F,Q,ae,Te){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=F,this.projectId=Q,this.apiKey=ae,this.appId=Te}fetch(T){var M=this;return(0,N.Z)(function*(){var F,Q,ae;const[Te,$e]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),kt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},bt={sdk_version:M.sdkVersion,app_instance_id:Te,app_instance_id_token:$e,app_id:M.appId,language_code:rc()},Cn={method:"POST",headers:jt,body:JSON.stringify(bt)},Qn=fetch(kt,Cn),Ur=new Promise((js,Hs)=>{T.signal.addEventListener(()=>{const Zd=new Error("The operation was aborted.");Zd.name="AbortError",Hs(Zd)})});let Bs;try{yield Promise.race([Qn,Ur]),Bs=yield Qn}catch(js){let Hs="fetch-client-network";throw"AbortError"===(null===(F=js)||void 0===F?void 0:F.name)&&(Hs="fetch-timeout"),Kn.create(Hs,{originalErrorMessage:null===(Q=js)||void 0===Q?void 0:Q.message})}let go=Bs.status;const Xo=Bs.headers.get("ETag")||void 0;let ni,$s;if(200===Bs.status){let js;try{js=yield Bs.json()}catch(Hs){throw Kn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Hs)||void 0===ae?void 0:ae.message})}ni=js.entries,$s=js.state}if("INSTANCE_STATE_UNSPECIFIED"===$s?go=500:"NO_CHANGE"===$s?go=304:("NO_TEMPLATE"===$s||"EMPTY_CONFIG"===$s)&&(ni={}),304!==go&&200!==go)throw Kn.create("fetch-status",{httpStatus:go});return{status:go,eTag:Xo,config:ni}})()}}class Dg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:F}){var Q=this;return(0,N.Z)(function*(){yield function rr(D,T){return new Promise((M,F)=>{const Q=Math.max(T-Date.now(),0),ae=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(ae),F(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ae=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Ad(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const Te={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Q.storage.setThrottleMetadata(Te),Q.attemptFetch(T,Te)}})()}}class xd{constructor(T,M,F,Q,ae){this.app=T,this._client=M,this._storageCache=F,this._storage=Q,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sc(D,T){var M;const F=D.target.error||void 0;return Kn.create(T,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const Rs="app_namespace_store";class Sg{constructor(T,M,F,Q=function Tg(){return new Promise((D,T)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Q=>{T(sc(Q,"storage-open"))},F.onsuccess=Q=>{D(Q.target.result)},F.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Rs,{keyPath:"compositeKey"})}}catch(F){T(Kn.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=F,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Q,ae)=>{var Te;const et=F.transaction([Rs],"readonly").objectStore(Rs),kt=M.createCompositeKey(T);try{const jt=et.get(kt);jt.onerror=bt=>{ae(sc(bt,"storage-get"))},jt.onsuccess=bt=>{const Cn=bt.target.result;Q(Cn?Cn.value:void 0)}}catch(jt){ae(Kn.create("storage-get",{originalErrorMessage:null===(Te=jt)||void 0===Te?void 0:Te.message}))}})})()}set(T,M){var F=this;return(0,N.Z)(function*(){const Q=yield F.openDbPromise;return new Promise((ae,Te)=>{var $e;const kt=Q.transaction([Rs],"readwrite").objectStore(Rs),jt=F.createCompositeKey(T);try{const bt=kt.put({compositeKey:jt,value:M});bt.onerror=Cn=>{Te(sc(Cn,"storage-set"))},bt.onsuccess=()=>{ae()}}catch(bt){Te(Kn.create("storage-set",{originalErrorMessage:null===($e=bt)||void 0===$e?void 0:$e.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Q,ae)=>{var Te;const et=F.transaction([Rs],"readwrite").objectStore(Rs),kt=M.createCompositeKey(T);try{const jt=et.delete(kt);jt.onerror=bt=>{ae(sc(bt,"storage-delete"))},jt.onsuccess=()=>{Q()}}catch(jt){ae(Kn.create("storage-delete",{originalErrorMessage:null===(Te=jt)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Rd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),ae=yield M;ae&&(T.lastFetchStatus=ae);const Te=yield F;Te&&(T.lastSuccessfulFetchTimestampMillis=Te);const $e=yield Q;$e&&(T.activeConfig=$e)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ku(){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ks(){(0,ue._registerComponent)(new ye.wA("remote-config",function D(T,{instanceIdentifier:M}){const F=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,re.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:ae,apiKey:Te,appId:$e}=F.options;if(!ae)throw Kn.create("registration-project-id");if(!Te)throw Kn.create("registration-api-key");if(!$e)throw Kn.create("registration-app-id");const et=new Sg($e,F.name,M=M||"firebase"),kt=new Rd(et),jt=new he.Yd(Pi);jt.logLevel=he.in.ERROR;const bt=new ic(Q,ue.SDK_VERSION,M,ae,Te,$e),Cn=new Dg(bt,et),Qn=new Af(Cn,et,kt,jt),Ur=new xd(F,Qn,kt,et,jt);return function Rn(D){const T=(0,re.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ur),Ur},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Pi,"0.3.15"),(0,ue.registerVersion)(Pi,"0.3.15","esm2017")}();const Ni="/firebase-messaging-sw.js",ns="/firebase-cloud-messaging-push-scope",rs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Aa="google.c.a.c_id",Pu="google.c.a.c_l",oc="google.c.a.ts",Rf="google.c.a.e";var is=(()=>{return(D=is||(is={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",is;var D})();function ci(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yr(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Q=new Uint8Array(F.length);for(let ae=0;ae<F.length;++ae)Q[ae]=F.charCodeAt(ae);return Q}const No="fcm_token_details_db",Dr="fcm_token_object_Store";function kf(D){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(No))return null;let T=null;return(yield(0,_e.X3)(No,5,{upgrade:(F=(0,N.Z)(function*(Q,ae,Te,$e){var et;if(ae<2||!Q.objectStoreNames.contains(Dr))return;const kt=$e.objectStore(Dr),jt=yield kt.index("fcmSenderId").get(D);if(yield kt.clear(),jt)if(2===ae){const bt=jt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;T={token:bt.fcmToken,createTime:null!==(et=bt.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:ci(bt.vapidKey)}}}else if(3===ae){const bt=jt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ci(bt.auth),p256dh:ci(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ci(bt.vapidKey)}}}else if(4===ae){const bt=jt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ci(bt.auth),p256dh:ci(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ci(bt.vapidKey)}}}}),function(ae,Te,$e,et){return F.apply(this,arguments)})})).close(),yield(0,_e.Lj)(No),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),kn(T)?T:null;var F}),Pf.apply(this,arguments)}function kn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const di="firebase-messaging-store";let Lr=null;function Ou(){return Lr||(Lr=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(di)}})),Lr}function Oo(D){return ss.apply(this,arguments)}function ss(){return(ss=(0,N.Z)(function*(D){const T=Ii(D),F=yield(yield Ou()).transaction(di).objectStore(di).get(T);if(F)return F;{const Q=yield kf(D.appConfig.senderId);if(Q)return yield en(D,Q),Q}})).apply(this,arguments)}function en(D,T){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,N.Z)(function*(D,T){const M=Ii(D),Q=(yield Ou()).transaction(di,"readwrite");return yield Q.objectStore(di).put(T,M),yield Q.done,T})).apply(this,arguments)}function to(D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,N.Z)(function*(D){const T=Ii(D),F=(yield Ou()).transaction(di,"readwrite");yield F.objectStore(di).delete(T),yield F.done})).apply(this,arguments)}function Ii({appConfig:D}){return D.appId}const An=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vt(D,T){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,N.Z)(function*(D,T){var M;const F=yield uc(D),Q=Ae(T),ae={method:"POST",headers:F,body:JSON.stringify(Q)};let Te;try{Te=yield(yield fetch(os(D.appConfig),ae)).json()}catch($e){throw An.create("token-subscribe-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(Te.error)throw An.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw An.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function Of(D,T){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,N.Z)(function*(D,T){var M;const F=yield uc(D),Q=Ae(T.subscriptionOptions),ae={method:"PATCH",headers:F,body:JSON.stringify(Q)};let Te;try{Te=yield(yield fetch(`${os(D.appConfig)}/${T.token}`,ae)).json()}catch($e){throw An.create("token-update-failed",{errorInfo:null===(M=$e)||void 0===M?void 0:M.toString()})}if(Te.error)throw An.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw An.create("token-update-no-token");return Te.token})).apply(this,arguments)}function $u(D,T){return ac.apply(this,arguments)}function ac(){return(ac=(0,N.Z)(function*(D,T){var M;const Q={method:"DELETE",headers:yield uc(D)};try{const Te=yield(yield fetch(`${os(D.appConfig)}/${T}`,Q)).json();if(Te.error)throw An.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(ae){throw An.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function os({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function uc(D){return xa.apply(this,arguments)}function xa(){return(xa=(0,N.Z)(function*({appConfig:D,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ae({p256dh:D,auth:T,endpoint:M,vapidKey:F}){const Q={web:{endpoint:M,auth:T,p256dh:D}};return F!==rs&&(Q.web.applicationPubKey=F),Q}const Yt=6048e5;function ju(D){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,N.Z)(function*(D){const T=yield lc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:ci(T.getKey("auth")),p256dh:ci(T.getKey("p256dh"))},F=yield Oo(D.firebaseDependencies);if(F){if(Od(F.subscriptionOptions,M))return Date.now()>=F.createTime+Yt?Lo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield $u(D.firebaseDependencies,F.token)}catch(Q){console.warn(Q)}return Ma(D.firebaseDependencies,M)}return Ma(D.firebaseDependencies,M)})).apply(this,arguments)}function Pn(D){return zu.apply(this,arguments)}function zu(){return(zu=(0,N.Z)(function*(D){const T=yield Oo(D.firebaseDependencies);T&&(yield $u(D.firebaseDependencies,T.token),yield to(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Lo(D,T){return hi.apply(this,arguments)}function hi(){return(hi=(0,N.Z)(function*(D,T){try{const M=yield Of(D.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield en(D.firebaseDependencies,F),M}catch(M){throw yield Pn(D),M}})).apply(this,arguments)}function Ma(D,T){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(D,T){const F={token:yield Vt(D,T),createTime:Date.now(),subscriptionOptions:T};return yield en(D,F),F.token})).apply(this,arguments)}function lc(D,T){return cc.apply(this,arguments)}function cc(){return(cc=(0,N.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yr(T)})})).apply(this,arguments)}function Od(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function ka(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Nn(D,T){if(!T.notification)return;D.notification={};const M=T.notification.title;M&&(D.notification.title=M);const F=T.notification.body;F&&(D.notification.body=F);const Q=T.notification.image;Q&&(D.notification.image=Q);const ae=T.notification.icon;ae&&(D.notification.icon=ae)}(T,D),function Oi(D,T){!T.data||(D.data=T.data)}(T,D),function dc(D,T){var M,F,Q,ae,Te;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const $e=null!==(Q=null===(F=T.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Q?Q:null===(ae=T.notification)||void 0===ae?void 0:ae.click_action;$e&&(D.fcmOptions.link=$e);const et=null===(Te=T.fcmOptions)||void 0===Te?void 0:Te.analytics_label;et&&(D.fcmOptions.analyticsLabel=et)}(T,D),T}function no(D){return"object"==typeof D&&!!D&&Aa in D}function as(D,T){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<T.length&&M.push(T.charAt(F));return M.join("")}function Pa(D){return An.create("missing-app-config-values",{valueName:D})}as("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),as("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xg{constructor(T,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Ag(D){if(!D||!D.options)throw Pa("App Configuration Object");if(!D.name)throw Pa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of T)if(!M[F])throw Pa(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function hc(D){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,N.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:ns}),D.swRegistration.update().catch(()=>{})}catch(M){throw An.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Na(D,T){return fc.apply(this,arguments)}function fc(){return(fc=(0,N.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield hc(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Oa(D,T){return pc.apply(this,arguments)}function pc(){return(pc=(0,N.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=rs)})).apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(D,T){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield Oa(D,T?.vapidKey),yield Na(D,T?.serviceWorkerRegistration),ju(D)})).apply(this,arguments)}function gc(D,T,M){return mc.apply(this,arguments)}function mc(){return(mc=(0,N.Z)(function*(D,T,M){const F=yc(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Aa],message_name:M[Pu],message_time:M[oc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yc(D){switch(D){case is.NOTIFICATION_CLICKED:return"notification_open";case is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ro(){return(ro=(0,N.Z)(function*(D,T){const M=T.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===is.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ka(M)):D.onMessageHandler.next(ka(M)));const F=M.data;no(F)&&"1"===F[Rf]&&(yield gc(D,M.messageType,F))})).apply(this,arguments)}const io="@firebase/messaging",ir=D=>{const T=new xg(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ld(D,T){return ro.apply(this,arguments)}(T,M)),T},Jr=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:F=>function qu(D,T){return Wu.apply(this,arguments)}(T,F)}};function Fd(){return _c.apply(this,arguments)}function _c(){return(_c=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wn(){(0,ue._registerComponent)(new ye.wA("messaging",ir,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("messaging-internal",Jr,"PRIVATE")),(0,ue.registerVersion)(io,"0.11.0"),(0,ue.registerVersion)(io,"0.11.0","esm2017")}();const Uo="analytics",Bd="firebase_id",oo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yu="https://www.googletagmanager.com/gtag/js",On=new he.Yd("@firebase/analytics");function Ju(D){return Promise.all(D.map(T=>T.catch(M=>M)))}function Xu(D,T){const M=document.createElement("script");M.src=`${Yu}?l=${D}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Ff(D,T,M,F,Q,ae){return ao.apply(this,arguments)}function ao(){return(ao=(0,N.Z)(function*(D,T,M,F,Q,ae){const Te=F[Q];try{if(Te)yield T[Te];else{const et=(yield Ju(M)).find(kt=>kt.measurementId===Q);et&&(yield T[et.appId])}}catch($e){On.error($e)}D("config",Q,ae)})).apply(this,arguments)}function Vo(D,T,M,F,Q){return uo.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(D,T,M,F,Q){try{let ae=[];if(Q&&Q.send_to){let Te=Q.send_to;Array.isArray(Te)||(Te=[Te]);const $e=yield Ju(M);for(const et of Te){const kt=$e.find(bt=>bt.measurementId===et),jt=kt&&T[kt.appId];if(!jt){ae=[];break}ae.push(jt)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),D("event",F,Q||{})}catch(ae){On.error(ae)}})).apply(this,arguments)}function jd(D){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Yu)&&M.src.includes(D))return M;return null}const gr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Va=new class Li{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function zd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ba(D){return wc.apply(this,arguments)}function wc(){return(wc=(0,N.Z)(function*(D){var T;const{appId:M,apiKey:F}=D,Q={method:"GET",headers:zd(F)},ae=oo.replace("{app-id}",M),Te=yield fetch(ae,Q);if(200!==Te.status&&304!==Te.status){let $e="";try{const et=yield Te.json();null!==(T=et.error)&&void 0!==T&&T.message&&($e=et.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:$e})}return Te.json()})).apply(this,arguments)}function jn(D){return bi.apply(this,arguments)}function bi(){return(bi=(0,N.Z)(function*(D,T=Va,M){const{appId:F,apiKey:Q,measurementId:ae}=D.options;if(!F)throw gr.create("no-app-id");if(!Q){if(ae)return{measurementId:ae,appId:F};throw gr.create("no-api-key")}const Te=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new rl;return setTimeout((0,N.Z)(function*(){$e.abort()}),void 0!==M?M:6e4),tl({appId:F,apiKey:Q,measurementId:ae},Te,$e,T)})).apply(this,arguments)}function tl(D,T,M){return lo.apply(this,arguments)}function lo(){return(lo=(0,N.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:M},F,Q=Va){var ae,Te;const{appId:$e,measurementId:et}=D;try{yield $a(F,T)}catch(kt){if(et)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null===(ae=kt)||void 0===ae?void 0:ae.message}]`),{appId:$e,measurementId:et};throw kt}try{const kt=yield Ba(D);return Q.deleteThrottleMetadata($e),kt}catch(kt){const jt=kt;if(!nl(jt)){if(Q.deleteThrottleMetadata($e),et)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${jt?.message}]`),{appId:$e,measurementId:et};throw kt}const bt=503===Number(null===(Te=jt?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,re.$s)(M,Q.intervalMillis,30):(0,re.$s)(M,Q.intervalMillis),Cn={throttleEndTimeMillis:Date.now()+bt,backoffCount:M+1};return Q.setThrottleMetadata($e,Cn),On.debug(`Calling attemptFetch again in ${bt} millis`),tl(D,Cn,F,Q)}})).apply(this,arguments)}function $a(D,T){return new Promise((M,F)=>{const Q=Math.max(T-Date.now(),0),ae=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(ae),F(gr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function nl(D){if(!(D instanceof re.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class rl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Os,Ha;function Ls(){return(Ls=(0,N.Z)(function*(D,T,M,F,Q){if(Q&&Q.global)D("event",M,F);else{const ae=yield T;D("event",M,Object.assign(Object.assign({},F),{send_to:ae}))}})).apply(this,arguments)}function ho(D){Ha=D}function Ic(D){Os=D}function Fs(){return ol.apply(this,arguments)}function ol(){return(ol=(0,N.Z)(function*(){var D;if(!(0,re.hl)())return On.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(T){return On.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function jo(){return(jo=(0,N.Z)(function*(D,T,M,F,Q,ae,Te){var $e;const et=jn(D);et.then(Qn=>{M[Qn.measurementId]=Qn.appId,D.options.measurementId&&Qn.measurementId!==D.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qn=>On.error(Qn)),T.push(et);const kt=Fs().then(Qn=>{if(Qn)return F.getId()}),[jt,bt]=yield Promise.all([et,kt]);jd(ae)||Xu(ae,jt.measurementId),Ha&&(Q("consent","default",Ha),ho(void 0)),Q("js",new Date);const Cn=null!==($e=Te?.config)&&void 0!==$e?$e:{};return Cn.origin="firebase",Cn.update=!0,null!=bt&&(Cn[Bd]=bt),Q("config",jt.measurementId,Cn),Os&&(Q("set",Os),Ic(void 0)),jt.measurementId})).apply(this,arguments)}class al{constructor(T){this.app=T}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},Us=[];const Ho={};let Go,fo,zo="dataLayer",za=!1;function Jy(D,T,M){!function Mg(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((F,Q)=>`(${Q+1}) ${F}`).join(" "),M=gr.create("invalid-analytics-context",{errorInfo:T});On.warn(M.message)}}();const F=D.options.appId;if(!F)throw gr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw gr.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[F])throw gr.create("already-exists",{id:F});if(!za){!function $d(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(zo);const{wrappedGtag:ae,gtagCore:Te}=function La(D,T,M,F,Q){let ae=function(...Te){window[F].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ae=window[Q]),window[Q]=function el(D,T,M,F){function ae(){return(ae=(0,N.Z)(function*(Te,$e,et){try{"event"===Te?yield Vo(D,T,M,$e,et):"config"===Te?yield Ff(D,T,M,F,$e,et):"consent"===Te?D("consent","update",et):D("set",$e)}catch(kt){On.error(kt)}})).apply(this,arguments)}return function Q(Te,$e,et){return ae.apply(this,arguments)}}(ae,D,T,M),{gtagCore:ae,wrappedGtag:window[Q]}}(Xr,Us,Ho,zo,"gtag");fo=ae,Go=Te,za=!0}return Xr[F]=function $o(D,T,M,F,Q,ae,Te){return jo.apply(this,arguments)}(D,Us,Ho,T,Go,zo,M),new al(D)}function e_(){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const ls="@firebase/analytics";!function _r(){(0,ue._registerComponent)(new ye.wA(Uo,(T,{options:M})=>Jy(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new ye.wA("analytics-internal",function D(T){try{const M=T.getProvider(Uo).getImmediate();return{logEvent:(F,Q,ae)=>function yr(D,T,M,F){D=(0,re.m9)(D),function Gd(D,T,M,F,Q){return Ls.apply(this,arguments)}(fo,Xr[D.app.options.appId],T,M,F).catch(Q=>On.error(Q))}(M,F,Q,ae)}}catch(M){throw gr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(ls,"0.8.4"),(0,ue.registerVersion)(ls,"0.8.4","esm2017")}();var Je=L(4408),Fi=L(7565);const qo=new class Vs extends Fi.v{}(class Dn extends Je.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,M,F):(T.flush(this),0)}});var Wo=L(4986),Zn=L(8505),cs=L(5363),mt=L(9468);const ei=new p.GfV("7.5.0"),ds="__angularfire_symbol__analyticsIsSupportedValue",fi="__angularfire_symbol__analyticsIsSupported",ll="__angularfire_symbol__remoteConfigIsSupportedValue",Ga="__angularfire_symbol__remoteConfigIsSupported",ti="__angularfire_symbol__messagingIsSupportedValue",Wd="__angularfire_symbol__messagingIsSupported";function gi(D,T,M){if(T){if(1===T.length)return T[0];const ae=T.filter(Te=>Te.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[fi]||(globalThis[fi]=e_().then(D=>globalThis[ds]=D).catch(()=>globalThis[ds]=!1)),globalThis[Wd]||(globalThis[Wd]=Fd().then(D=>globalThis[ti]=D).catch(()=>globalThis[ti]=!1)),globalThis[Ga]||(globalThis[Ga]=ku().then(D=>globalThis[ll]=D).catch(()=>globalThis[ll]=!1));const Ot=(D,T)=>{const M=T?[T]:(0,ee.C6)(),F=[];return M.forEach(Q=>{Q.container.getProvider(D).instances.forEach(Te=>{F.includes(Te)||F.push(Te)})}),F};function Wa(){}class sr{constructor(T,M=qo){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,F){const Q=this.zone;return this.delegate.schedule(function(Te){Q.runGuarded(()=>{T.apply(this,[Te])})},M,F)}}class ut{constructor(T){this.zone=T,this.task=null}call(T,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),M.pipe((0,Zn.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zo=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new sr(Zone.current)),this.insideAngular=M.run(()=>new sr(Zone.current,Wo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function St(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Yo(D){return D.pipe((0,cs.Q)(St().outsideAngular))}function Ui(D){return St(),function Kd(D){return function(M){return(M=M.lift(new ut(D.ngZone))).pipe((0,mt.R)(D.outsideAngular),(0,cs.Q)(D.insideAngular))}}(St())(D)}},2090:(lt,Se,L)=>{"use strict";L.d(Se,{$s:()=>st,BH:()=>qt,G6:()=>we,L:()=>_e,LL:()=>pt,Pz:()=>Jt,Sg:()=>We,UG:()=>be,US:()=>ye,ZB:()=>j,ZR:()=>Et,aH:()=>ht,b$:()=>ve,eu:()=>ce,hl:()=>J,jU:()=>it,m9:()=>Wt,ne:()=>Gn,pd:()=>Ri,r3:()=>wi,ru:()=>Ee,tV:()=>pe,uI:()=>ke,vZ:()=>Ye,w1:()=>ct,xO:()=>er,xb:()=>ui,z$:()=>Fe,zI:()=>U,zd:()=>li});const ue=function(z){const B=[];let K=0;for(let Ce=0;Ce<z.length;Ce++){let Y=z.charCodeAt(Ce);Y<128?B[K++]=Y:Y<2048?(B[K++]=Y>>6|192,B[K++]=63&Y|128):55296==(64512&Y)&&Ce+1<z.length&&56320==(64512&z.charCodeAt(Ce+1))?(Y=65536+((1023&Y)<<10)+(1023&z.charCodeAt(++Ce)),B[K++]=Y>>18|240,B[K++]=Y>>12&63|128,B[K++]=Y>>6&63|128,B[K++]=63&Y|128):(B[K++]=Y>>12|224,B[K++]=Y>>6&63|128,B[K++]=63&Y|128)}return B},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,B){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let Y=0;Y<z.length;Y+=3){const Ge=z[Y],yt=Y+1<z.length,sn=yt?z[Y+1]:0,_n=Y+2<z.length,Xt=_n?z[Y+2]:0;let Kt=(15&sn)<<2|Xt>>6,fr=63&Xt;_n||(fr=64,yt||(Kt=64)),Ce.push(K[Ge>>2],K[(3&Ge)<<4|sn>>4],K[Kt],K[fr])}return Ce.join("")},encodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(z):this.encodeByteArray(ue(z),B)},decodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(z):function(z){const B=[];let K=0,Ce=0;for(;K<z.length;){const Y=z[K++];if(Y<128)B[Ce++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ge=z[K++];B[Ce++]=String.fromCharCode((31&Y)<<6|63&Ge)}else if(Y>239&&Y<365){const _n=((7&Y)<<18|(63&z[K++])<<12|(63&z[K++])<<6|63&z[K++])-65536;B[Ce++]=String.fromCharCode(55296+(_n>>10)),B[Ce++]=String.fromCharCode(56320+(1023&_n))}else{const Ge=z[K++],yt=z[K++];B[Ce++]=String.fromCharCode((15&Y)<<12|(63&Ge)<<6|63&yt)}}return B.join("")}(this.decodeStringToByteArray(z,B))},decodeStringToByteArray(z,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let Y=0;Y<z.length;){const Ge=K[z.charAt(Y++)],sn=Y<z.length?K[z.charAt(Y)]:0;++Y;const Xt=Y<z.length?K[z.charAt(Y)]:64;++Y;const ze=Y<z.length?K[z.charAt(Y)]:64;if(++Y,null==Ge||null==sn||null==Xt||null==ze)throw Error();Ce.push(Ge<<2|sn>>4),64!==Xt&&(Ce.push(sn<<4&240|Xt>>2),64!==ze&&Ce.push(Xt<<6&192|ze))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},_e=function(z){return function(z){const B=ue(z);return ye.encodeByteArray(B,!0)}(z).replace(/\./g,"")},pe=function(z){try{return ye.decodeString(z,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function j(z,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!Z(K)||(z[K]=j(z[K],B[K]));return z}function Z(z){return"__proto__"!==z}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function Ee(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){const z=Fe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){return"object"==typeof indexedDB}function ce(){return new Promise((z,B)=>{try{let K=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(Ce);Y.onsuccess=()=>{Y.result.close(),K||self.indexedDB.deleteDatabase(Ce),z(!0)},Y.onupgradeneeded=()=>{K=!1},Y.onerror=()=>{var Ge;B((null===(Ge=Y.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(K){B(K)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=z&&pe(z[1]);return B&&JSON.parse(B)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},ht=()=>{var z;return null===(z=ne())||void 0===z?void 0:z.config},Jt=z=>{var B;return null===(B=ne())||void 0===B?void 0:B[`_${z}`]};class qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,Ce)=>{K?this.reject(K):this.resolve(Ce),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,Ce))}}}function We(z,B){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=B||"demo-project",Y=z.iat||0,Ge=z.sub||z.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:Y,exp:Y+3600,auth_time:Y,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},z);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(yt)),""].join(".")}class Et extends Error{constructor(B,K,Ce){super(K),this.code=B,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}}class pt{constructor(B,K,Ce){this.service=B,this.serviceName=K,this.errors=Ce}create(B,...K){const Ce=K[0]||{},Y=`${this.service}/${B}`,Ge=this.errors[B],yt=Ge?function at(z,B){return z.replace(Zt,(K,Ce)=>{const Y=B[Ce];return null!=Y?String(Y):`<${Ce}?>`})}(Ge,Ce):"Error";return new Et(Y,`${this.serviceName}: ${yt} (${Y}).`,Ce)}}const Zt=/\{\$([^}]+)}/g;function wi(z,B){return Object.prototype.hasOwnProperty.call(z,B)}function ui(z){for(const B in z)if(Object.prototype.hasOwnProperty.call(z,B))return!1;return!0}function Ye(z,B){if(z===B)return!0;const K=Object.keys(z),Ce=Object.keys(B);for(const Y of K){if(!Ce.includes(Y))return!1;const Ge=z[Y],yt=B[Y];if(Nr(Ge)&&Nr(yt)){if(!Ye(Ge,yt))return!1}else if(Ge!==yt)return!1}for(const Y of Ce)if(!K.includes(Y))return!1;return!0}function Nr(z){return null!==z&&"object"==typeof z}function er(z){const B=[];for(const[K,Ce]of Object.entries(z))Array.isArray(Ce)?Ce.forEach(Y=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(Y))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(Ce));return B.length?"&"+B.join("&"):""}function li(z){const B={};return z.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[Y,Ge]=Ce.split("=");B[decodeURIComponent(Y)]=decodeURIComponent(Ge)}}),B}function Ri(z){const B=z.indexOf("?");if(!B)return"";const K=z.indexOf("#",B);return z.substring(B,K>0?K:void 0)}function Gn(z,B){const K=new vn(z,B);return K.subscribe.bind(K)}class vn{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(Ce=>{this.error(Ce)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,Ce){let Y;if(void 0===B&&void 0===K&&void 0===Ce)throw new Error("Missing Observer.");Y=function gt(z,B){if("object"!=typeof z||null===z)return!1;for(const K of B)if(K in z&&"function"==typeof z[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:Ce},void 0===Y.next&&(Y.next=hn),void 0===Y.error&&(Y.error=hn),void 0===Y.complete&&(Y.complete=hn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ge}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}function st(z,B=1e3,K=2){const Ce=B*Math.pow(K,z),Y=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+Y)}function Wt(z){return z&&z._delegate?z._delegate:z}},6403:(lt,Se,L)=>{"use strict";var p=L(4650);let ee=null;function N(){return ee}const he=new p.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function pe(){return(0,p.LFG)(j)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let j=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Fe(){return new j((0,p.LFG)(he))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(nt)},providedIn:"root"}),n})();const ve=new p.OlP("appBaseHref");let nt=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+it(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+it(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e),p.LFG(ve,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ct=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+it(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+it(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e),p.LFG(ve,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(J(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,J(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=ke,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(p.LFG(Ee))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ie(){return new Me((0,p.LFG)(Ee))}()},providedIn:"root"}),n})();function J(n){return n.replace(/\/index.html$/,"")}let fn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ta{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let es=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ta(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const h=r.get(u);r.move(h,c),Ms(h,i)}});for(let i=0,u=r.length;i<u;i++){const h=r.get(i).context;h.index=i,h.count=u,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ms(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ms(n,e){n.context.$implicit=e.item}let Rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class tc{constructor(){this.$implicit=null,this.ngIf=null}}function pr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}const Rs=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let xf=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function rr(n,e){return new p.vHH(2100,!1)}();return t.replace(Rs,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=p.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),Po=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Dr(n){return"server"===n}let Nu=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Nf((0,p.LFG)(he),window)}),n})();class Nf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=di(this.window.history)||di(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function di(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro extends class Ld extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new ro)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ku(){return io=io||document.querySelector("base"),io?io.getAttribute("href"):null}();return null==t?null:function Jr(n){ir=ir||document.createElement("a"),ir.setAttribute("href",n);const e=ir.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Mu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ir,io=null;const wn=new p.OlP("TRANSITION_ID"),_c=[{provide:p.ip1,useFactory:function Fd(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[wn,he,p.zs3],multi:!0}];let vc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=new p.OlP("EventManagerPlugins");let Ud=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Zu),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Qu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let so=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Fo=(()=>{class n extends so{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vd))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Vd(n){N().remove(n)}const Uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bd=/%COMP%/g;function Xu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xu(n,i,t):(i=i.replace(Bd,n),t.push(i))}return t}function $d(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ao=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Vo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new jd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Hd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Xu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ud),p.LFG(Fo),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Vo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(La(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(La(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Uo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Uo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$d(r)):this.eventManager.addEventListener(e,t,$d(r))}}function La(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jd extends Vo{constructor(e,t,r,i){super(e),this.component=r;const u=Xu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function On(n){return"_ngcontent-%COMP%".replace(Bd,n)}(i+"-"+r.id),this.hostAttr=function Ju(n){return"_nghost-%COMP%".replace(Bd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hd extends Vo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Xu(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const h=document.createElement("style");h.textContent=u[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gr=(()=>{class n extends Qu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=["alt","control","meta","shift"],Ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Li={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends Qu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),Fa.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),c+=E+".")}),c+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=Ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fa.forEach(c=>{c!==i&&(0,Li[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const rl=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function tl(){ro.makeCurrent()},multi:!0},{provide:he,useFactory:function $a(){return(0,p.RDi)(document),document},deps:[]}]),Os=new p.OlP(""),Gd=[{provide:p.rWj,useClass:class Lf{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const h=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Ls=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function lo(){return new p.qLn},deps:[]},{provide:Zu,useClass:gr,multi:!0,deps:[he,p.R0b,p.Lbi]},{provide:Zu,useClass:Va,multi:!0,deps:[he]},{provide:ao,useClass:ao,deps:[Ud,Fo,p.AFp]},{provide:p.FYo,useExisting:ao},{provide:so,useExisting:Fo},{provide:Fo,useClass:Fo,deps:[he]},{provide:Ud,useClass:Ud,deps:[Zu,p.R0b]},{provide:class Oo{},useClass:vc,deps:[]},[]];let il=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:wn,useExisting:p.AFp},_c]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Os,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Ls,...Gd],imports:[Po,p.hGG]}),n})(),us=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Bo(){return new us((0,p.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var yr=L(2011),po=L(4986),ls=L(9751),un=L(8996),_r=L(7669);function Je(...n){const e=(0,_r.yG)(n);return(0,un.D)(n,e)}var Dn=L(5813),Fi=L(8189);function qo(...n){return function Vs(){return(0,Fi.J)(1)}()((0,un.D)(n,(0,_r.yG)(n)))}var Fr=L(4482);function Wo(...n){const e=(0,_r.yG)(n);return(0,Fr.e)((t,r)=>{(e?qo(n,t,e):qo(n,t)).subscribe(r)})}var Zn=L(5403);function cs(){return(0,Fr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var mt=L(4004);function ei(n,e,t,r,i){return(u,c)=>{let h=t,y=e,E=0;u.subscribe((0,Zn.x)(c,C=>{const x=E++;y=h?n(y,C,x):(h=!0,C),r&&c.next(y)},i&&(()=>{h&&c.next(y),c.complete()})))}}function ds(n,e){return(0,Fr.e)(ei(n,e,arguments.length>=2,!0))}var fi=L(4671);function Ga(n,e){return n===e}function ti(n,e){return(0,Fr.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}L(1277);var ut,Ko=L(3942),fe=L(5861),pi=L(9681),qa=L(4859),gi=L(1877),Ot=L(2090),Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={},Zo=Zo||{},St=Wa||self;function Qo(){}function mi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ui="closure_uid_"+(1e9*Math.random()>>>0),Kd=0;function Hn(n,e,t){return n.call.apply(n.bind,arguments)}function Vf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function D(n,e,t){return(D=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hn:Vf).apply(null,arguments)}function T(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function M(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function F(){this.s=this.s,this.o=this.o}F.prototype.s=!1,F.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Jo(n){Object.prototype.hasOwnProperty.call(n,Ui)&&n[Ui]||(n[Ui]=++Kd)}(this)},F.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ae=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Te(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $e(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(mi(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function et(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var kt=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Qo,e),St.removeEventListener("test",Qo,e)}catch{}return n}();function jt(n){return/^[\s\xa0]*$/.test(n)}var bt=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Cn(n,e){return n<e?-1:n>e?1:0}function Qn(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function Ur(n){return-1!=Qn().indexOf(n)}function Bs(n){return Bs[" "](n),n}Bs[" "]=Qo;var Qd,n,Xo=Ur("Opera"),ni=Ur("Trident")||Ur("MSIE"),$s=Ur("Edge"),js=$s||ni,Hs=Ur("Gecko")&&!(-1!=Qn().toLowerCase().indexOf("webkit")&&!Ur("Edge"))&&!(Ur("Trident")||Ur("MSIE"))&&!Ur("Edge"),Zd=-1!=Qn().toLowerCase().indexOf("webkit")&&!Ur("Edge");function Bf(){var n=St.document;return n?n.documentMode:void 0}e:{var $f="",Yd=(n=Qn(),Hs?/rv:([^\);]+)(\)|;)/.exec(n):$s?/Edge\/([\d\.]+)/.exec(n):ni?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Zd?/WebKit\/(\S+)/.exec(n):Xo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yd&&($f=Yd?Yd[1]:""),ni){var cl=Bf();if(null!=cl&&cl>parseFloat($f)){Qd=String(cl);break e}}Qd=$f}var Dc={};var kg=St.document&&ni&&(Bf()||parseInt(Qd,10))||void 0;function Xd(n,e){if(et.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Hs){e:{try{Bs(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:s_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xd.X.h.call(this)}}M(Xd,et);var s_={2:"touch",3:"pen",4:"mouse"};Xd.prototype.h=function(){Xd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),jf=0;function Pg(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++jf,this.ba=this.ea=!1}function Hf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Tc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function o_(n){const e={};for(const t in n)e[t]=n[t];return e}const a_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<a_.length;u++)t=a_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eh(n){this.src=n,this.g={},this.h=0}function Ng(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=ae(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Hf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zf(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}eh.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=zf(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Pg(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var th="closure_lm_"+(1e6*Math.random()|0),Sc={};function Ac(n,e,t,r,i){if(r&&r.once)return hs(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ac(n,e[u],t,r,i);return null}return t=Kf(t),n&&n[Cc]?n.N(e,t,Yo(r)?!!r.capture:!!r,i):Gf(n,e,t,!1,r,i)}function Gf(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Yo(i)?!!i.capture:!!i,h=dl(n);if(h||(n[th]=h=new eh(n)),(t=h.add(e,t,r,c,u)).proxy)return t;if(r=function nh(){const e=Og;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)kt||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(rh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hs(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)hs(n,e[u],t,r,i);return null}return t=Kf(t),n&&n[Cc]?n.O(e,t,Yo(r)?!!r.capture:!!r,i):Gf(n,e,t,!0,r,i)}function qf(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)qf(n,e[u],t,r,i);else r=Yo(r)?!!r.capture:!!r,t=Kf(t),n&&n[Cc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zf(u=n.g[e],t,r,i))&&(Hf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=dl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zf(e,t,r,i)),(t=-1<n?e[n]:null)&&Wf(t))}function Wf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Cc])Ng(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(rh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=dl(e))?(Ng(t,n),0==t.h&&(t.src=null,e[th]=null)):Hf(n)}}}function rh(n){return n in Sc?Sc[n]:Sc[n]="on"+n}function Og(n,e){if(n.ba)n=!0;else{e=new Xd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Wf(n),n=t.call(r,e)}return n}function dl(n){return(n=n[th])instanceof eh?n:null}var ih="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kf(n){return"function"==typeof n?n:(n[ih]||(n[ih]=function(e){return n.handleEvent(e)}),n[ih])}function Cr(){F.call(this),this.i=new eh(this),this.P=this,this.I=null}function Tr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new et(e,n);else if(e instanceof et)e.target=e.target||n;else{var i=e;u_(e=new et(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=sh(c,r,!0,e)&&i}if(i=sh(c=e.g=n,r,!0,e)&&i,i=sh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=sh(c=e.g=t[u],r,!1,e)&&i}function sh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var h=c.listener,y=c.ha||c.src;c.ea&&Ng(n.i,c),i=!1!==h.call(y,r)&&i}}return i&&!r.defaultPrevented}M(Cr,F),Cr.prototype[Cc]=!0,Cr.prototype.removeEventListener=function(n,e,t,r){qf(this,n,e,t,r)},Cr.prototype.M=function(){if(Cr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hf(t[r]);delete n.g[e],n.h--}}this.I=null},Cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Zf=St.JSON.stringify;function zr(){var n=Yf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var fl,Lg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mo,n=>n.reset());class mo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gr(n){St.setTimeout(()=>{throw n},0)}function hl(n,e){fl||function l_(){var n=St.Promise.resolve(void 0);fl=function(){n.then(c_)}}(),xc||(fl(),xc=!0),Yf.add(n,e)}var xc=!1,Yf=new class Qf{constructor(){this.h=this.g=null}add(e,t){const r=Lg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function c_(){for(var n;n=zr();){try{n.h.call(n.g)}catch(t){Gr(t)}var e=Lg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xc=!1}function Ka(n,e){Cr.call(this),this.h=n||1,this.g=e||St,this.j=D(this.lb,this),this.l=Date.now()}function Jf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function oh(n,e,t){if("function"==typeof n)t&&(n=D(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=D(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function ah(n){n.g=oh(()=>{n.g=null,n.i&&(n.i=!1,ah(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}M(Ka,Cr),(ut=Ka.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tr(this,"tick"),this.ca&&(Jf(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Ka.X.M.call(this),Jf(this),delete this.g};class d_ extends F{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ah(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(n){F.call(this),this.h=n,this.g={}}M(Za,F);var uh=[];function Fg(n,e,t,r){Array.isArray(t)||(t&&(uh[0]=t.toString()),t=uh);for(var i=0;i<t.length;i++){var u=Ac(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Xf(n){Tc(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wf(e)},n),n.g={}}function Mc(){this.g=!0}function pl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Zf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Za.prototype.M=function(){Za.X.M.call(this),Xf(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mc.prototype.Aa=function(){this.g=!1},Mc.prototype.info=function(){};var ea={},f_=null;function Vi(){return f_=f_||new Cr}function lh(n){et.call(this,ea.Pa,n)}function gl(n){const e=Vi();Tr(e,new lh(e))}function Ug(n,e){et.call(this,ea.STAT_EVENT,n),this.stat=e}function Sr(n){const e=Vi();Tr(e,new Ug(e,n))}function Vg(n,e){et.call(this,ea.Qa,n),this.size=e}function Pc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}ea.Pa="serverreachability",M(lh,et),ea.STAT_EVENT="statevent",M(Ug,et),ea.Qa="timingevent",M(Vg,et);var ch={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Bg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ya(){}function dh(){}Ya.prototype.h=null;var ep,Ja={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function hh(){et.call(this,"d")}function Nc(){et.call(this,"c")}function Oc(){}function ta(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Za(this),this.O=na,this.T=new Ka(n=js?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Lc}function Lc(){this.i=null,this.g="",this.h=!1}M(hh,et),M(Nc,et),M(Oc,Ya),Oc.prototype.g=function(){return new XMLHttpRequest},Oc.prototype.i=function(){return{}},ep=new Oc;var na=45e3,fh={},Xa={};function tp(n,e,t){n.K=1,n.v=ia(Bi(e)),n.s=t,n.P=!0,Di(n,null)}function Di(n,e){n.F=Date.now(),ra(n),n.A=Bi(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),k(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Lc,n.g=D_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new d_(D(n.La,n,n.g),n.N)),Fg(n.S,n.g,"readystatechange",n.ib),e=n.H?o_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),gl(),function Qa(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",h=u.split("&"),y=0;y<h.length;y++){var E=h[y].split("=");if(1<E.length){var C=E[0];E=E[1];var x=C.split("_");c=2<=x.length&&"type"==x[1]?c+(C+"=")+E+"&":c+(C+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function yo(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function np(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=jg(n,t),i==Xa){4==e&&(n.o=4,Sr(14),r=!1),pl(n.j,n.m,null,"[Incomplete Response]");break}if(i==fh){n.o=4,Sr(15),pl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}pl(n.j,n.m,i,null),Ci(n,i)}yo(n)&&i!=Xa&&i!=fh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Sr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),b_(e),e.K=!0,Sr(11))):(pl(n.j,n.m,t,"[Invalid Chunked Response]"),zs(n),eu(n))}function jg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xa:(t=Number(e.substring(t,r)),isNaN(t)?fh:(r+=1)+t>e.length?Xa:(e=e.substr(r,t),n.C=r+t,e))}function ra(n){n.V=Date.now()+n.O,Fc(n,n.O)}function Fc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pc(D(n.gb,n),e)}function ml(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function eu(n){0==n.l.G||n.I||zw(n.l,n)}function zs(n){ml(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jf(n.T),Xf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ci(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ur(t.h,n)))if(!n.J&&ur(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Yg(t),Wg(t)}I_(t),Sr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pc(D(t.cb,t),6e3));if(1>=ar(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else vh(t,11)}else if((n.J||t.g==n)&&Yg(t),!jt(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const C=E[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const x=E[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const H=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var u=r.h;u.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Gs(u,u.h),u.h=null))}if(r.D){const se=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.za=se,pn(r.F,r.D,se))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Jg(r,r.H?r.ka:null,r.V),c.J){ap(r.h,c);var h=c,y=r.J;y&&h.setTimeout(y),h.B&&(ml(h),ra(h)),r.g=c}else E_(r);0<t.i.length&&Zg(t)}else"stop"!=E[0]&&"close"!=E[0]||vh(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?vh(t,7):_h(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}gl()}catch{}}function ph(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ip(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function rp(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(mi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=ta.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==oa(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const C=oa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||js||this.g&&(this.h.h||this.g.fa()||Bw(this.g)))){this.I||4!=C||7==e||gl(),ml(this);var t=this.g.aa();this.Y=t;t:if(yo(this)){var r=Bw(this.g);n="";var i=r.length,u=4==oa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),eu(this);var c="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function h_(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(h)){var E=h;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Sr(12),zs(this),eu(this);break e}pl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ci(this,t)}this.P?(np(this,C,c),js&&this.i&&3==C&&(Fg(this.S,this.T,"tick",this.hb),this.T.start())):(pl(this.j,this.m,c,null),Ci(this,c)),4==C&&zs(this),this.i&&!this.I&&(4==C?zw(this.l,this):(this.i=!1,ra(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Sr(12)):(this.o=0,Sr(13)),zs(this),eu(this)}}}catch{}},ut.hb=function(){if(this.g){var n=oa(this.g),e=this.g.fa();this.C<e.length&&(ml(this),np(this,n,e),this.i&&4!=n&&ra(this))}},ut.cancel=function(){this.I=!0,zs(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Rc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(gl(),Sr(17)),zs(this),this.o=2,eu(this)):Fc(this,this.V-n)};var gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function or(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof or){this.h=void 0!==e?e:n.h,_l(this,n.j),this.s=n.s,this.g=n.g,mh(this,n.m),this.l=n.l,e=n.i;var t=new f;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fs(this,t),this.o=n.o}else n&&(t=String(n).match(gh))?(this.h=!!e,_l(this,t[1]||"",!0),this.s=sa(t[2]||""),this.g=sa(t[3]||"",!0),mh(this,t[4]),this.l=sa(t[5]||"",!0),fs(this,t[6]||"",!0),this.o=sa(t[7]||"")):(this.h=!!e,this.i=new f(null,this.h))}function Bi(n){return new or(n)}function _l(n,e,t){n.j=t?sa(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fs(n,e,t){e instanceof f?(n.i=e,function ge(n,e){e&&!n.j&&(m(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(w(this,r),k(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ps(e,op)),n.i=new f(e,n.h))}function pn(n,e,t){n.i.set(e,t)}function ia(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sa(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ps(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}or.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ps(e,Hg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ps(e,Hg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ps(t,"/"==t.charAt(0)?p_:Uw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ps(t,_)),n.join("")};var Hg=/[#\/\?@]/g,Uw=/[#\?:]/g,p_=/[#\?]/g,op=/[#\?@]/g,_=/#/g;function f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function m(n){n.g||(n.g=new Map,n.h=0,n.i&&function yl(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w(n,e){m(n),e=q(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function A(n,e){return m(n),e=q(n,e),n.g.has(e)}function k(n,e,t){w(n,e),0<t.length&&(n.i=null,n.g.set(q(n,e),Te(t)),n.h+=t.length)}function q(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rt(n){this.l=n||Pt,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ga&&St.g.Ga()&&St.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=f.prototype).add=function(n,e){m(this),this.i=null,n=q(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){m(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.oa=function(){m(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ut.W=function(n){m(this);let e=[];if("string"==typeof n)A(this,n)&&(e=e.concat(this.g.get(q(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return m(this),this.i=null,A(this,n=q(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Pt=10;function Dt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ar(n){return n.h?1:n.g?n.g.size:0}function ur(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gs(n,e){n.g?n.g.add(e):n.h=e}function ap(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function up(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Te(n.i)}function lp(){}function g_(){this.g=new lp}function zg(n,e,t){const r=t||"";try{ph(n,function(i,u){let c=i;Yo(i)&&(c=Zf(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vl(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tu(n){this.l=n.ac||null,this.j=n.jb||!1}function Uc(n,e){Cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt.prototype.cancel=function(){if(this.i=up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lp.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},lp.prototype.parse=function(n){return St.JSON.parse(n,void 0)},M(tu,Ya),tu.prototype.g=function(){return new Uc(this.l,this.j)},tu.prototype.i=function(n){return function(){return n}}({}),M(Uc,Cr);var cp=0;function yh(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function nu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gs(n)}function gs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Uc.prototype).open=function(n,e){if(this.readyState!=cp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gs(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nu(this)),this.readyState=cp},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof St.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yh(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nu(this):gs(this),3==this.readyState&&yh(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,nu(this))},ut.Ua=function(n){this.g&&(this.response=n,nu(this))},ut.ga=function(){this.g&&nu(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dp=St.JSON.parse;function Yn(n){Cr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=y_,this.K=this.L=!1}M(Yn,Cr);var y_="",Vw=/^https?$/i,vA=["POST","PUT"];function wD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Gg(n),__(n)}function Gg(n){n.D||(n.D=!0,Tr(n,"complete"),Tr(n,"error"))}function qg(n){if(n.h&&typeof Zo<"u"&&(!n.C[1]||4!=oa(n)||2!=n.aa()))if(n.v&&4==oa(n))oh(n.Ha,0,n);else if(Tr(n,"readystatechange"),4==oa(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(gh)[1]||null;if(!i&&St.self&&St.self.location){var u=St.self.location.protocol;i=u.substr(0,u.length-1)}r=!Vw.test(i?i.toLowerCase():"")}t=r}if(t)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var c=2<oa(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",Gg(n)}}finally{__(n)}}}function __(n,e){if(n.g){ED(n);const t=n.g,r=n.C[0]?Qo:null;n.g=null,n.C=null,e||Tr(n,"ready");try{t.onreadystatechange=r}catch{}}}function ED(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function oa(n){return n.g?n.g.readyState:0}function Bw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case y_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $w(n){let e="";return Tc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function v_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$w(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function hp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function w_(n){this.Ca=0,this.i=[],this.j=new Mc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=hp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=hp("baseRetryDelayMs",5e3,n),this.bb=hp("retryDelaySeedMs",1e4,n),this.$a=hp("forwardChannelMaxRetries",2,n),this.ta=hp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rt(n&&n.concurrentRequestLimit),this.Fa=new g_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function _h(n){if(Kg(n),3==n.G){var e=n.U++,t=Bi(n.F);pn(t,"SID",n.I),pn(t,"RID",e),pn(t,"TYPE","terminate"),fp(n,t),(e=new ta(n,n.j,e,void 0)).K=2,e.v=ia(Bi(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=D_(e.l,null),e.g.da(e.v)),e.F=Date.now(),ra(e)}wh(n)}function Wg(n){n.g&&(b_(n),n.g.cancel(),n.g=null)}function Kg(n){Wg(n),n.u&&(St.clearTimeout(n.u),n.u=null),Yg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function Zg(n){Dt(n.h)||n.m||(n.m=!0,hl(n.Ja,n),n.C=0)}function jw(n,e){var t;t=e?e.m:n.U++;const r=Bi(n.F);pn(r,"SID",n.I),pn(r,"RID",t),pn(r,"AID",n.T),fp(n,r),n.o&&n.s&&v_(r,n.o,n.s),t=new ta(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Qg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Gs(n.h,t),tp(t,r,e)}function fp(n,e){n.ia&&Tc(n.ia,function(t,r){pn(e,r,t)}),n.l&&ph({},function(t,r){pn(e,r,t)})}function Qg(n,e,t){t=Math.min(n.i.length,t);var r=n.l?D(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let h=!0;for(let y=0;y<t;y++){let E=i[y].h;const C=i[y].g;if(E-=u,0>E)u=Math.max(0,i[y].h-100),h=!1;else try{zg(C,c,"req"+E+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function E_(n){n.g||n.u||(n.Z=1,hl(n.Ia,n),n.A=0)}function I_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Pc(D(n.Ia,n),ID(n,n.A)),n.A++,0))}function b_(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function Hw(n){n.g=new ta(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Bi(n.sa);pn(e,"RID","rpc"),pn(e,"SID",n.I),pn(e,"CI",n.L?"0":"1"),pn(e,"AID",n.T),pn(e,"TYPE","xmlhttp"),fp(n,e),n.o&&n.s&&v_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ia(Bi(e)),t.s=null,t.P=!0,Di(t,n)}function Yg(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function zw(n,e){var t=null;if(n.g==e){Yg(n),b_(n),n.g=null;var r=2}else{if(!ur(n.h,e))return;t=e.D,ap(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Tr(r=Vi(),new Vg(r,t)),Zg(n)}else E_(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Ar(n,e){return!(ar(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Pc(D(n.Ja,n,e),ID(n,n.C)),n.C++,0)))}(n,e)||2==r&&I_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:vh(n,5);break;case 4:vh(n,10);break;case 3:vh(n,6);break;default:vh(n,2)}}function ID(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function vh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=D(n.kb,n);t||(t=new or("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||_l(t,"https"),ia(t)),function m_(n,e){const t=new Mc;if(St.Image){const r=new Image;r.onload=T(vl,t,r,"TestLoadImage: loaded",!0,e),r.onerror=T(vl,t,r,"TestLoadImage: error",!1,e),r.onabort=T(vl,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=T(vl,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Sr(2);n.G=0,n.l&&n.l.va(e),wh(n),Kg(n)}function wh(n){if(n.G=0,n.la=[],n.l){const e=up(n.h);(0!=e.length||0!=n.i.length)&&($e(n.la,e),$e(n.la,n.i),n.h.i.length=0,Te(n.i),n.i.length=0),n.l.ua()}}function Jg(n,e,t){var r=t instanceof or?Bi(t):new or(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mh(r,r.m);else{var i=St.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new or(null,void 0);r&&_l(u,r),e&&(u.g=e),i&&mh(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&pn(r,t,e),pn(r,"VER",n.ma),fp(n,r),r}function D_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Da&&!n.ra?new tu({jb:!0}):n.ra)).Ka(n.H),e}function C_(){}function pp(){if(ni&&!(10<=Number(kg)))throw Error("Environmental error: no available transport.")}function ms(n,e){Cr.call(this),this.g=new w_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!jt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new wl(this)}function T_(n){hh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function S_(){Nc.call(this),this.status=1}function wl(n){this.g=n}(ut=Yn.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ep.g(),this.C=function $g(n){return n.h||(n.h=n.i())}(this.u?this.u:ep),this.g.onreadystatechange=D(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void wD(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=St.FormData&&n instanceof St.FormData,!(0<=ae(vA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ED(this),0<this.B&&((this.K=function wA(n){return ni&&function r_(){return function go(n){var e=Dc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bt(String(Qd)).split("."),t=bt("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Cn(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Cn(0==i[2].length,0==u[2].length)||Cn(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=D(this.qa,this)):this.A=oh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){wD(this,u)}},ut.qa=function(){typeof Zo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),__(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),__(this,!0)),Yn.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?qg(this):this.fb())},ut.fb=function(){qg(this)},ut.aa=function(){try{return 2<oa(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dp(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=w_.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ta(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=o_(u),u_(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qg(this,i,e),pn(t=Bi(this.F),"RID",n),pn(t,"CVER",22),this.D&&pn(t,"X-HTTP-Session-Id",this.D),fp(this,t),u&&(this.N?e="headers="+encodeURIComponent(String($w(u)))+"&"+e:this.o&&v_(t,this.o,u)),Gs(this.h,i),this.Ya&&pn(t,"TYPE","init"),this.O?(pn(t,"$req",e),pn(t,"SID","null"),i.Z=!0,tp(i,t,null)):tp(i,t,e),this.G=2}}else 3==this.G&&(n?jw(this,n):0==this.i.length||Dt(this.h)||jw(this))},ut.Ia=function(){if(this.u=null,Hw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Pc(D(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Sr(10),Wg(this),Hw(this))},ut.cb=function(){null!=this.v&&(this.v=null,Wg(this),I_(this),Sr(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Sr(2)):(this.j.info("Failed to ping google.com"),Sr(1))},(ut=C_.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},pp.prototype.g=function(n,e){return new ms(n,e)},M(ms,Cr),ms.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Sr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Jg(n,null,n.V),Zg(n)},ms.prototype.close=function(){_h(this.g)},ms.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Zf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Zg(e)},ms.prototype.M=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,ms.X.M.call(this)},M(T_,hh),M(S_,Nc),M(wl,C_),wl.prototype.xa=function(){Tr(this.g,"a")},wl.prototype.wa=function(n){Tr(this.g,new T_(n))},wl.prototype.va=function(n){Tr(this.g,new S_)},wl.prototype.ua=function(){Tr(this.g,"b")},pp.prototype.createWebChannel=pp.prototype.g,ms.prototype.send=ms.prototype.u,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,ch.NO_ERROR=0,ch.TIMEOUT=8,ch.HTTP_ERROR=6,Bg.COMPLETE="complete",dh.EventType=Ja,Ja.OPEN="a",Ja.CLOSE="b",Ja.ERROR="c",Ja.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.Oa,Yn.prototype.getLastErrorCode=Yn.prototype.Ea,Yn.prototype.getStatus=Yn.prototype.aa,Yn.prototype.getResponseJson=Yn.prototype.Sa,Yn.prototype.getResponseText=Yn.prototype.fa,Yn.prototype.send=Yn.prototype.da,Yn.prototype.setWithCredentials=Yn.prototype.Ka;var EA=sr.createWebChannelTransport=function(){return new pp},bD=sr.getStatEventTarget=function(){return Vi()},gp=sr.ErrorCode=ch,Gw=sr.EventType=Bg,qw=sr.Event=ea,El=sr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},DD=sr.FetchXmlHttpFactory=tu,Eh=sr.WebChannel=dh,Xg=sr.XhrIo=Yn;const Ww="@firebase/firestore";class xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let ru="9.14.0";const $i=new gi.Yd("@firebase/firestore");function em(){return $i.logLevel}function Le(n,...e){if($i.logLevel<=gi.in.DEBUG){const t=e.map(bl);$i.debug(`Firestore (${ru}): ${n}`,...t)}}function vr(n,...e){if($i.logLevel<=gi.in.ERROR){const t=e.map(bl);$i.error(`Firestore (${ru}): ${n}`,...t)}}function Il(n,...e){if($i.logLevel<=gi.in.WARN){const t=e.map(bl);$i.warn(`Firestore (${ru}): ${n}`,...t)}}function bl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function Bt(n,e){n||dt()}function Ze(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Kw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class IA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TD{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Mr,e.enqueueRetryable(()=>u(this.currentUser))};const h=()=>{const E=c;e.enqueueRetryable((0,fe.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},y=E=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Mr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt("string"==typeof r.accessToken),new Kw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new xr(e)}}class mp{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class SD{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new mp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yp{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bt("string"==typeof t.token),this.A=t.token,new Vc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function DA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class x_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=DA(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Qw(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Ln(0,0))}static max(){return new Lt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bc{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends Bc{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new on(t)}static emptyPath(){return new on([])}}const AD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Bc{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return AD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(u(),i++)}if(u(),c)throw new Pe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(on.fromString(e))}static fromName(e){return new He(on.fromString(e).popFirst(5))}static empty(){return new He(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new on(e.slice()))}}class tm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function M_(n){return n.fields.find(e=>2===e.kind)}function $c(n){return n.fields.filter(e=>2!==e.kind)}tm.UNKNOWN_ID=-1;class _p{constructor(e,t){this.fieldPath=e,this.kind=t}}class vp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vp(0,ys.min())}}function jc(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new ys(i,He.empty(),e)}function aa(n){return new ys(n.readTime,n.key,-1)}class ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ys(Lt.min(),He.empty(),-1)}static max(){return new ys(Lt.max(),He.empty(),-1)}}function R_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const RD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function iu(n){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,fe.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==RD)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),Yw.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,u=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const u=e.length,c=new Array(u);let h=0;for(let y=0;y<u;y++){const E=y;t(e[E]).next(C=>{c[E]=C,++h,h===u&&r(c)},C=>i(C))}})}static doWhile(e,t){return new le((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class k_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Mr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new bh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=nm(r.target.error);this.P.reject(new bh(e,i))}}static open(e,t,r,i){try{return new k_(t,e.transaction(i,r))}catch(u){throw new bh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ND(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===qs.D((0,Ot.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),ri(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ot.hl)())return!1;if(qs.N())return!0;const e=(0,Ot.z$)(),t=qs.D(e),r=0<t&&t<10,i=qs.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new bh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Pe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new bh(e,h))},u.onupgradeneeded=c=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,fe.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{u.db=yield u.F(e);const y=k_.open(u.db,e,c?"readonly":"readwrite",r),E=i(y).next(C=>(y.V(),C)).catch(C=>(y.abort(C),le.reject(C))).toPromise();return E.catch(()=>{}),yield y.v,E}catch(y){const E=y,C="FirebaseError"!==E.name&&h<3;if(Le("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class PD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ri(this.U.delete())}}class bh extends Pe{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class ND{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ri(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),ri(this.store.add(e))}get(e){return ri(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),ri(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),ri(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,h)=>{u.push(h)}).next(()=>u)}{const i=this.store.getAll(r.range);return new le((u,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{u(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=u=>{const c=nm(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new le((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const y=new PD(h),E=t(h.primaryKey,h.value,y);if(E instanceof le){const C=E.catch(x=>(y.done(),le.reject(x)));r.push(C)}y.isDone?i():null===y.G?h.continue():h.continue(y.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ri(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=nm(r.target.error);t(i)}})}let Jw=!1;function nm(n){const e=qs.D((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jw||(Jw=!0,setTimeout(()=>{throw r},0)),r}}return n}class OD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dl(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield iu(r)}yield t.nt(6e4)}))}}class LD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return le.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Le("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(h=>(Le("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=aa(u);R_(c,r)>0&&(r=c)}),new ys(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Xw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ji.at=-1;class lr{constructor(e,t){this.comparator=e,this.root=t||_t.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rm(this.root,e,this.comparator,!0)}}class rm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=u??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new _t(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1,_t.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new _t(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hc(n){return n.hasNext()?n.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new _s([])}unionWith(e){let t=new In(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const UD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(n){if(Bt(!!n),"string"==typeof n){let e=0;const t=UD.exec(n);if(Bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zc(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function tE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function N_(n){const e=n.mapValue.fields.__previous_value__;return tE(e)?N_(e):e}function Dh(n){const e=su(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class Gc{constructor(e,t,r,i,u,c,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=y}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}function qc(n){return null==n}function Wc(n){return 0===n&&1/n==-1/0}function nE(n){return"number"==typeof n&&Number.isInteger(n)&&!Wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},O_={nullValue:"NULL_VALUE"};function Ch(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tE(n)?4:sE(n)?9007199254740991:10:dt()}function ua(n,e){if(n===e)return!0;const t=Ch(n);if(t!==Ch(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dh(n).isEqual(Dh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=su(r.timestampValue),c=su(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,zc(n.bytesValue).isEqual(zc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return cr(r.geoPointValue.latitude)===cr(i.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return cr(r.integerValue)===cr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=cr(r.doubleValue),c=cr(i.doubleValue);return u===c?Wc(u)===Wc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Ih(n.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Xw(u)!==Xw(c))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(void 0===c[h]||!ua(u[h],c[h])))return!1;return!0}(n,e);default:return dt()}var i}function Th(n,e){return void 0!==(n.values||[]).find(t=>ua(t,e))}function Zc(n,e){if(n===e)return 0;const t=Ch(n),r=Ch(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=cr(i.integerValue||i.doubleValue),h=cr(u.integerValue||u.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return rE(n.timestampValue,e.timestampValue);case 4:return rE(Dh(n),Dh(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=zc(i),h=zc(u);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),h=u.split("/");for(let y=0;y<c.length&&y<h.length;y++){const E=Gt(c[y],h[y]);if(0!==E)return E}return Gt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Gt(cr(i.latitude),cr(u.latitude));return 0!==c?c:Gt(cr(i.longitude),cr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],h=u.values||[];for(let y=0;y<c.length&&y<h.length;++y){const E=Zc(c[y],h[y]);if(E)return E}return Gt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Kc.mapValue&&u===Kc.mapValue)return 0;if(i===Kc.mapValue)return 1;if(u===Kc.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),y=u.fields||{},E=Object.keys(y);h.sort(),E.sort();for(let C=0;C<h.length&&C<E.length;++C){const x=Gt(h[C],E[C]);if(0!==x)return x;const P=Zc(c[h[C]],y[E[C]]);if(0!==P)return P}return Gt(h.length,E.length)}(n.mapValue,e.mapValue);default:throw dt()}}function rE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=su(n),r=su(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function _o(n){return L_(n)}function L_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=su(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=L_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const h of i)c?c=!1:u+=",",u+=`${h}:${L_(r.fields[h])}`;return u+"}"}(n.mapValue):dt();var e}function Sl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sh(n){return!!n&&"integerValue"in n}function wp(n){return!!n&&"arrayValue"in n}function F_(n){return!!n&&"nullValue"in n}function iE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function im(n){return!!n&&"mapValue"in n}function Ep(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ep(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ep(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function VD(n){return"nullValue"in n?O_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sl(Tl.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function oE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sl(Tl.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Kc:dt()}function aE(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function U_(n,e){const t=Zc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!im(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ep(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Ep(c):i.push(h.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());im(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];im(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new qr(Ep(this.value))}}function sm(n){const e=[];return Cl(n.fields,(t,r)=>{const i=new zn([t]);if(im(r)){const u=sm(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new _s(e)}class Fn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Fn(e,0,Lt.min(),Lt.min(),qr.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Lt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Lt.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Lt.min(),qr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class V_{constructor(e,t=null,r=[],i=[],u=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=h,this.ht=null}}function uE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new V_(n,e,t,r,i,u,c)}function Ah(n){const e=Ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+_o(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_o(r)).join(",")),e.ht=t}return e.ht}function Mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!G_(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ua(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!am(n.startAt,e.startAt)&&am(n.endAt,e.endAt)}function Ip(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Qc(n,e){return n.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}function Ws(n,e,t){let r=O_,i=!0;for(const u of Qc(n,e)){let c=O_,h=!0;switch(u.op){case"<":case"<=":c=VD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,h=!1;break;case"!=":case"not-in":c=O_}aE({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];aE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function B_(n,e,t){let r=Kc,i=!0;for(const u of Qc(n,e)){let c=Kc,h=!0;switch(u.op){case">=":case">":c=oE(u.value),h=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,h=!1;break;case"!=":case"not-in":c=Kc}U_({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];U_({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new $_(e,t,r):"array-contains"===t?new z_(e,r):"in"===t?new CA(e,r):"not-in"===t?new lE(e,r):"array-contains-any"===t?new TA(e,r):new ii(e,t,r)}static lt(e,t,r){return"in"===t?new ou(e,r):new j_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Zc(t,this.value)):null!==t&&Ch(this.value)===Ch(t)&&this.ft(Zc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $_ extends ii{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.ft(t)}}class ou extends ii{constructor(e,t){super(e,"in",t),this.keys=H_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class j_ extends ii{constructor(e,t){super(e,"not-in",t),this.keys=H_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function H_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class z_ extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wp(t)&&Th(t.arrayValue,this.value)}}class CA extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Th(this.value.arrayValue,t)}}class lE extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Th(this.value.arrayValue,t)}}class TA extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Th(this.value.arrayValue,r))}}class vo{constructor(e,t){this.position=e,this.inclusive=t}}class au{constructor(e,t="asc"){this.field=e,this.dir=t}}function G_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function om(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):Zc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function am(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ua(n.position[t],e.position[t]))return!1;return!0}class Al{constructor(e,t=null,r=[],i=[],u=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=h,this.endAt=y,this._t=null,this.wt=null}}function cE(n,e,t,r,i,u,c,h){return new Al(n,e,t,r,i,u,c,h)}function Rh(n){return new Al(n)}function dE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function q_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function um(n){for(const e of n.filters)if(e.dt())return e.field;return null}function hE(n){return null!==n.collectionGroup}function kh(n){const e=Ze(n);if(null===e._t){e._t=[];const t=um(e),r=q_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new au(t)),e._t.push(new au(zn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new au(zn.keyField(),u))}}}return e._t}function Hi(n){const e=Ze(n);if(!e.wt)if("F"===e.limitType)e.wt=uE(e.path,e.collectionGroup,kh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of kh(e))t.push(new au(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vo(e.startAt.position,e.startAt.inclusive):null;e.wt=uE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function bp(n,e,t){return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ph(n,e){return Mh(Hi(n),Hi(e))&&n.limitType===e.limitType}function fE(n){return`${Ah(Hi(n))}|lt:${n.limitType}`}function Dp(n){return`Query(target=${function xh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${_o(r.value)}`;var r}).join(", ")}]`),qc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>_o(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>_o(t)).join(",")),`Target(${e})`}(Hi(n))}; limitType=${n.limitType})`}function pE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const h=om(i,u,c);return i.inclusive?h<=0:h<0}(t.startAt,kh(t),r)||t.endAt&&!function(i,u,c){const h=om(i,u,c);return i.inclusive?h>=0:h>0}(t.endAt,kh(t),r)));var t,r}function BD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $D(n){return(e,t)=>{let r=!1;for(const i of kh(n)){const u=SA(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function SA(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,u,c){const h=u.data.field(i),y=c.data.field(i);return null!==h&&null!==y?Zc(h,y):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function jD(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function HD(n){return{integerValue:""+n}}function zD(n,e){return nE(e)?HD(e):jD(n,e)}class W_{constructor(){this._=void 0}}function AA(n,e,t){return n instanceof xl?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Yc?K_(n,e):n instanceof lu?Z_(n,e):function(r,i){const u=uu(r,i),c=gE(u)+gE(r.yt);return Sh(u)&&Sh(r.yt)?HD(c):jD(r.It,c)}(n,e)}function xA(n,e,t){return n instanceof Yc?K_(n,e):n instanceof lu?Z_(n,e):t}function uu(n,e){return n instanceof Ml?Sh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xl extends W_{}class Yc extends W_{constructor(e){super(),this.elements=e}}function K_(n,e){const t=cu(e);for(const r of n.elements)t.some(i=>ua(i,r))||t.push(r);return{arrayValue:{values:t}}}class lu extends W_{constructor(e){super(),this.elements=e}}function Z_(n,e){let t=cu(e);for(const r of n.elements)t=t.filter(i=>!ua(i,r));return{arrayValue:{values:t}}}class Ml extends W_{constructor(e,t){super(),this.It=e,this.yt=t}}function gE(n){return cr(n.integerValue||n.doubleValue)}function cu(n){return wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nh{constructor(e,t){this.field=e,this.transform=t}}class qD{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cm{}function Cp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Xc(n.key,Un.none()):new du(n.key,n.data,Un.none());{const t=n.data,r=qr.empty();let i=new In(zn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new la(n.key,r,new _s(i.toArray()),Un.none())}}function Oh(n,e,t){n instanceof du?function(r,i,u){const c=r.value.clone(),h=hm(r.fieldTransforms,i,u.transformResults);c.setAll(h),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof la?function(r,i,u){if(!lm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=hm(r.fieldTransforms,i,u.transformResults),h=i.data;h.setAll(Q_(r)),h.setAll(c),i.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jc(n,e,t,r){return n instanceof du?function(i,u,c,h){if(!lm(i.precondition,u))return c;const y=i.value.clone(),E=fm(i.fieldTransforms,h,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof la?function(i,u,c,h){if(!lm(i.precondition,u))return c;const y=fm(i.fieldTransforms,h,u),E=u.data;return E.setAll(Q_(i)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,lm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function Lh(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=uu(r.transform,i||null);null!=u&&(null===t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function dm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ih(t,r,(i,u)=>function GD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Yc&&r instanceof Yc||t instanceof lu&&r instanceof lu?Ih(t.elements,r.elements,ua):t instanceof Ml&&r instanceof Ml?ua(t.yt,r.yt):t instanceof xl&&r instanceof xl);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class du extends cm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class la extends cm{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Q_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hm(n,e,t){const r=new Map;Bt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,h=e.data.field(u.field);r.set(u.field,xA(c,h,t[i]))}return r}function fm(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,AA(u,c,e))}return r}class Xc extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tp extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WD{constructor(e){this.count=e}}var Vr,dn;function Y_(n){switch(n){default:return dt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function mE(n){if(void 0===n)return vr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Vr.OK:return me.OK;case Vr.CANCELLED:return me.CANCELLED;case Vr.UNKNOWN:return me.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return me.INTERNAL;case Vr.UNAVAILABLE:return me.UNAVAILABLE;case Vr.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Vr.NOT_FOUND:return me.NOT_FOUND;case Vr.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Vr.ABORTED:return me.ABORTED;case Vr.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Vr.DATA_LOSS:return me.DATA_LOSS;default:return dt()}}(dn=Vr||(Vr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return eE(this.inner)}size(){return this.innerSize}}const yE=new lr(He.comparator);function zi(){return yE}const Gi=new lr(He.comparator);function Fh(...n){let e=Gi;for(const t of n)e=e.insert(t.key,t);return e}function _E(n){let e=Gi;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fu(){return ed()}function vE(){return ed()}function ed(){return new hu(n=>n.toString(),(n,e)=>n.isEqual(e))}const wE=new lr(He.comparator),KD=new In(He.comparator);function Qt(...n){let e=KD;for(const t of n)e=e.add(t);return e}const ZD=new In(Gt);function Sp(){return ZD}class Ap{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ap(Lt.min(),i,Sp(),zi(),Qt())}}class Uh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uh(r,t,Qt(),Qt(),Qt())}}class pm{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class EE{constructor(e,t){this.targetId=e,this.At=t}}class J_{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class X_{constructor(){this.Rt=0,this.bt=gm(),this.Pt=Rr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Qt(),t=Qt(),r=Qt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Uh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=gm()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class QD{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=zi(),this.qt=wo(),this.Kt=new In(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Ip(u))if(0===r){const c=new He(u.path);this.jt(t,c,Fn.newNoDocument(c,Lt.min()))}else Bt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const h=this.Xt(c);if(h){if(u.current&&Ip(h.target)){const y=new He(h.target.path);null!==this.Ut.get(y)||this.ee(c,y)||this.jt(c,y,Fn.newNoDocument(y,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Qt();this.qt.forEach((u,c)=>{let h=!0;c.forEachWhile(y=>{const E=this.Xt(y);return!E||2===E.purpose||(h=!1,!1)}),h&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Ap(e,t,this.Kt,this.Ut,r);return this.Ut=zi(),this.qt=wo(),this.Kt=new In(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new X_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new In(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new X_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function wo(){return new lr(He.comparator)}function gm(){return new lr(He.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},JD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class MA{constructor(e,t){this.databaseId=e,this.gt=t}}function Vh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function XD(n,e){return Vh(n,e.toTimestamp())}function Wr(n){return Bt(!!n),Lt.fromTimestamp(function(e){const t=su(e);return new Ln(t.seconds,t.nanos)}(n))}function xp(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bE(n){const e=on.fromString(n);return Bt(sC(e)),e}function Mp(n,e){return xp(n.databaseId,e.path)}function vs(n,e){const t=bE(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(ym(t))}function Rp(n,e){return xp(n.databaseId,e)}function kp(n){const e=bE(n);return 4===e.length?on.emptyPath():ym(e)}function mm(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ym(n){return Bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function eC(n,e,t){return{name:Mp(n,e),fields:t.value.mapValue.fields}}function ev(n,e,t){const r=vs(n,e.name),i=Wr(e.updateTime),u=new qr({mapValue:{fields:e.fields}}),c=Fn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Bh(n,e){let t;if(e instanceof du)t={update:eC(n,e.key,e.value)};else if(e instanceof Xc)t={delete:Mp(n,e.key)};else if(e instanceof la)t={update:eC(n,e.key,e.data),updateMask:iC(e.fieldMask)};else{if(!(e instanceof Tp))return dt();t={verify:Mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ml)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:XD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function Pp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Un.updateTime(Wr(i.updateTime)):void 0!==i.exists?Un.exists(i.exists):Un.none():Un.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let h=null;"setToServerValue"in c?(Bt("REQUEST_TIME"===c.setToServerValue),h=new xl):"appendMissingElements"in c?h=new Yc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new lu(c.removeAllFromArray.values||[]):"increment"in c?h=new Ml(u,c.increment):dt();const y=zn.fromServerFormat(c.fieldPath);return new Nh(y,h)}(n,i)):[];var i;if(e.update){const i=vs(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new _s((e.updateMask.fieldPaths||[]).map(E=>zn.fromServerFormat(E)));return new la(i,u,c,t,r)}return new du(i,u,t,r)}if(e.delete){const i=vs(n,e.delete);return new Xc(i,t)}if(e.verify){const i=vs(n,e.verify);return new Tp(i,t)}return dt()}function Np(n,e){return{documents:[Rp(n,e.path)]}}function $h(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Rp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const E=y.map(C=>function(x){if("=="===x.op){if(iE(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NAN"}};if(F_(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(iE(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NOT_NAN"}};if(F_(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh(x.field),op:nC(x.op),value:x.value}}}(C));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(E=>{return{field:Hh((C=E).field),direction:TE(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(E=e.limit,n.gt||qc(E)?E:{value:E});var E,h,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function jh(n){let e=kp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Bt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=_m(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new au(ca((x=C).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(C){let x;return x="object"==typeof C?C.value:C,qc(x)?null:x}(t.limit));let y=null;var C;t.startAt&&(y=new vo((C=t.startAt).values||[],!!C.before));let E=null;return t.endAt&&(E=function(C){return new vo(C.values||[],!C.before)}(t.endAt)),cE(e,i,c,u,h,"F",y,E)}function _m(n){return n?void 0!==n.unaryFilter?[RA(n)]:void 0!==n.fieldFilter?[rC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>_m(e)).reduce((e,t)=>e.concat(t)):dt():[]}function TE(n){return YD[n]}function nC(n){return JD[n]}function Hh(n){return{fieldPath:n.canonicalString()}}function ca(n){return zn.fromServerFormat(n.fieldPath)}function rC(n){return ii.create(ca(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function RA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ca(n.unaryFilter.field);return ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ca(n.unaryFilter.field);return ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ca(n.unaryFilter.field);return ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ca(n.unaryFilter.field);return ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function iC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SE(e)),e=oC(n.get(t),e);return SE(e)}function oC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function SE(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(Bt(e>=2),2===e)return Bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const h=n.substring(u,c);let y;0===i.length?y=h:(i+=h,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:dt()}u=c+2}return new on(r)}const tv=["userId","batchId"];function vm(n,e){return[n,Ti(e)]}function wm(n,e,t){return[n,Ti(e),t]}const aC={},uC=["prefixPath","collectionGroup","readTime","documentId"],lC=["prefixPath","collectionGroup","documentId"],cC=["collectionGroup","readTime","prefixPath","documentId"],dC=["canonicalId","targetId"],hC=["targetId","path"],Em=["path","targetId"],td=["collectionId","parent"],kA=["indexId","uid"],Op=["uid","sequenceNumber"],fC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pC=["indexId","uid","orderedDocumentKey"],nv=["userId","collectionPath","documentId"],gC=["userId","collectionPath","largestBatchId"],da=["userId","collectionGroup","largestBatchId"],zh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yi=[...zh,"documentOverlays"],Rl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lp=Rl,Ks=[...Lp,"indexConfiguration","indexState","indexEntries"];class Fp extends kD{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Jn(n,e){const t=Ze(n);return qs.M(t.ie,e)}class kl{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Oh(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Jc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vE();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let h=this.applyToLocalView(c,u.mutatedFields);h=t.has(i.key)?null:h;const y=Cp(c,h);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(Lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Ih(this.mutations,e.mutations,(t,r)=>dm(t,r))&&Ih(this.baseMutations,e.baseMutations,(t,r)=>dm(t,r))}}class Pl{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Bt(e.mutations.length===r.length);let i=wE;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Pl(e,t,r,i)}}class Nl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ws{constructor(e,t,r,i,u=Lt.min(),c=Lt.min(),h=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nd{constructor(e){this.re=e}}function rd(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mp(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ol(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Ol(e.version)}}var i,u;return r}function gu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ol(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ll(n){const e=new Ln(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function Fl(n,e){const t=(e.baseMutations||[]).map(u=>Pp(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Pp(n.re,u)),i=Ln.fromMillis(e.localWriteTimeMs);return new kl(e.batchId,i,t,r)}function qh(n){const e=Ll(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ll(n.lastLimboFreeSnapshotVersion):Lt.min();let r;var i;return void 0!==n.query.documents?(Bt(1===(i=n.query).documents.length),r=Hi(Rh(kp(i.documents[0])))):r=Hi(jh(n.query)),new ws(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function rv(n,e){const t=Ol(e.snapshotVersion),r=Ol(e.lastLimboFreeSnapshotVersion);let i;i=Ip(e.target)?Np(n.re,e.target):$h(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ah(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Im(n){const e=jh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bp(e,e.limit,"L"):e}function bm(n,e){return new Nl(e.largestBatchId,Pp(n.re,e.overlayMutation))}function iv(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function sv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ol(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class mC{getBundleMetadata(e,t){return AE(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ll(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return AE(e).put({bundleId:(r=t).id,createTime:Ol(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ov(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Im(i.bundledQuery),readTime:Ll(i.readTime)};var i})}saveNamedQuery(e,t){return ov(e).put({name:(r=t).name,readTime:Ol(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AE(n){return Jn(n,"bundles")}function ov(n){return Jn(n,"namedQueries")}class Dm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Dm(e,t.uid||"")}getOverlay(e,t){return Wh(e).get(iv(this.userId,t)).next(r=>r?bm(this.It,r):null)}getOverlays(e,t){const r=fu();return le.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const h=new Nl(t,c);i.push(this.ue(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ti(c.getCollectionPath())));const u=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Wh(e).Y("collectionPathOverlayIndex",h))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const i=fu(),u=Ti(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wh(e).W("collectionPathOverlayIndex",c).next(h=>{for(const y of h){const E=bm(this.It,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=fu();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wh(e).Z({index:"collectionGroupOverlayIndex",range:h},(y,E,C)=>{const x=bm(this.It,E);u.size()<i||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):C.done()}).next(()=>u)}ue(e,t){return Wh(e).put(function(r,i,u){const[c,h,y]=iv(i,u.mutation.key);return{userId:i,collectionPath:h,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Bh(r.re,u.mutation)}}(this.It,this.userId,t))}}function Wh(n){return Jn(n,"documentOverlays")}class mu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Wc(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(zc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?sE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),He.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function av(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=av(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}mu.Te=new mu;class Cm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=xE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=xE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Tm{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class uv{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Up{constructor(){this.Be=new Cm,this.Le=new Tm(this.Be),this.Ue=new uv(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ha{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ha(this.indexId,this.documentKey,this.arrayValue,r)}}function fa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lv(n.arrayValue,e.arrayValue),0!==t?t:(t=lv(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function lv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ME{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=M_(e);if(void 0!==t&&!this.ze(t))return!1;const r=$c(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class cv{constructor(){this.Ye=new Sm}addToCollectionParentIndex(e,t){return this.Ye.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ys.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class Sm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(on.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(on.comparator)).toArray()}}const Vp=new Uint8Array(0);class dv{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Sm,this.Ze=new hu(r=>Ah(r),(r,i)=>Mh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ti(i)};return hv(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Qw(t),""],!1,!0);return hv(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Eo(c.parent))}return r})}addFieldIndex(e,t){const r=$p(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Kh(e);return u.next(h=>{c.put(sv(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=$p(e),i=Kh(e),u=Bp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Bp(e);let i=!0;const u=new Map;return le.forEach(this.tn(t),c=>this.en(e,c).next(h=>{i&&(i=!!h),u.set(c,h)})).next(()=>{if(i){let c=Qt();const h=[];return le.forEach(u,(y,E)=>{var C;Le("IndexedDbIndexManager",`Using index ${C=y,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Ah(t)}`);const x=function(Qe,Ke){const Ct=M_(Ke);if(void 0===Ct)return null;for(const At of Qc(Qe,Ct.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(E,y),P=function(Qe,Ke){const Ct=new Map;for(const At of $c(Ke))for(const rn of Qc(Qe,At.fieldPath))switch(rn.op){case"==":case"in":Ct.set(At.fieldPath.canonicalString(),rn.value);break;case"not-in":case"!=":return Ct.set(At.fieldPath.canonicalString(),rn.value),Array.from(Ct.values())}return null}(E,y),V=function(Qe,Ke){const Ct=[];let At=!0;for(const rn of $c(Ke)){const $r=0===rn.kind?Ws(Qe,rn.fieldPath,Qe.startAt):B_(Qe,rn.fieldPath,Qe.startAt);Ct.push($r.value),At&&(At=$r.inclusive)}return new vo(Ct,At)}(E,y),H=function(Qe,Ke){const Ct=[];let At=!0;for(const rn of $c(Ke)){const $r=0===rn.kind?B_(Qe,rn.fieldPath,Qe.endAt):Ws(Qe,rn.fieldPath,Qe.endAt);Ct.push($r.value),At&&(At=$r.inclusive)}return new vo(Ct,At)}(E,y),se=this.nn(y,E,V),de=this.nn(y,E,H),je=this.sn(y,E,P),tt=this.rn(y.indexId,x,se,V.inclusive,de,H.inclusive,je);return le.forEach(tt,Qe=>r.J(Qe,t.limit).next(Ke=>{Ke.forEach(Ct=>{const At=He.fromSegments(Ct.documentKey);c.has(At)||(c=c.add(At),h.push(At))})}))}).next(()=>h)}return le.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,h){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),E=y/(null!=t?t.length:1),C=[];for(let x=0;x<y;++x){const P=t?this.on(t[x/E]):Vp,V=this.un(e,P,r[x%E],i),H=this.cn(e,P,u[x%E],c),se=h.map(de=>this.un(e,P,de,!0));C.push(...this.createRange(V,H,se))}return C}un(e,t,r,i){const u=new ha(e,He.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new ha(e,He.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new ME(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const h of u)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return le.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let h=new In(zn.comparator),y=!1;for(const E of c.filters){const C=E;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?y=!0:h=h.add(C.field))}for(const E of c.orderBy)E.field.isKeyField()||(h=h.add(E.field));return h.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Up;for(const i of $c(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);mu.Te.ce(u,c)}return r.$e()}on(e){const t=new Up;return mu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Up;return mu.Te.ce(Sl(this.databaseId,t),r.qe(function(i){const u=$c(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Up);let u=0;for(const c of $c(e)){const h=r[u++];for(const y of i)if(this.ln(t,c.fieldPath)&&wp(h))i=this.fn(i,c,h);else{const E=y.qe(c.kind);mu.Te.ce(h,E)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const h of i){const y=new Up;y.seed(h.$e()),mu.Te.ce(c,y.qe(t.kind)),u.push(y)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ii&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$p(e),i=Kh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return le.forEach(u,h=>i.get([h.indexId,this.uid]).next(y=>{c.push(function(E,C){const x=C?new vp(C.sequenceNumber,new ys(Ll(C.readTime),new He(Eo(C.documentKey)),C.largestBatchId)):vp.empty(),P=E.fields.map(([V,H])=>new _p(zn.fromServerFormat(V),H));return new tm(E.indexId,E.collectionGroup,P,x)}(h,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=$p(e),u=Kh(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,y=>u.put(sv(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,y=>this.wn(e,i,y).next(E=>{const C=this.mn(u,y);return E.isEqual(C)?le.resolve():this.gn(e,u,y,E,C)}))))})}yn(e,t,r,i){return Bp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Bp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Bp(e);let u=new In(fa);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,h)=>{u=u.add(new ha(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>u)}mn(e,t){let r=new In(fa);const i=this.an(t,e);if(null==i)return r;const u=M_(t);if(null!=u){const c=e.data.field(u.fieldPath);if(wp(c))for(const h of c.arrayValue.values||[])r=r.add(new ha(t.indexId,e.key,this.on(h),i))}else r=r.add(new ha(t.indexId,e.key,Vp,i));return r}gn(e,t,r,i,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,y,E,C,x){const P=h.getIterator(),V=y.getIterator();let H=Hc(P),se=Hc(V);for(;H||se;){let de=!1,je=!1;if(H&&se){const tt=E(H,se);tt<0?je=!0:tt>0&&(de=!0)}else null!=H?je=!0:de=!0;de?(C(se),se=Hc(V)):je?(x(H),H=Hc(P)):(H=Hc(P),se=Hc(V))}}(i,u,fa,h=>{c.push(this.yn(e,t,r,h))},h=>{c.push(this.pn(e,t,r,h))}),le.waitFor(c)}_n(e){let t=1;return Kh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>fa(c,h)).filter((c,h,y)=>!h||0!==fa(c,y[h-1]));const i=[];i.push(e);for(const c of r){const h=fa(c,e),y=fa(c,t);if(0===h)i[0]=e.Ke();else if(h>0&&y<0)i.push(c),i.push(c.Ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Vp,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Vp,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fv)}getMinOffset(e,t){return le.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||dt())).next(fv)}}function hv(n){return Jn(n,"collectionParents")}function Bp(n){return Jn(n,"indexEntries")}function $p(n){return Jn(n,"indexConfiguration")}function Kh(n){return Jn(n,"indexState")}function fv(n){Bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;R_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ys(e.readTime,e.documentKey,t)}const pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function RE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let h=0;const y=r.Z({range:c},(C,x,P)=>(h++,P.delete()));u.push(y.next(()=>{Bt(1===h)}));const E=[];for(const C of t.mutations){const x=wm(e,C.key.path,t.batchId);u.push(i.delete(x)),E.push(C.key)}return le.waitFor(u).next(()=>E)}function Am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(41943040,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);class jp{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jp(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=id(e),c=yu(e);return c.add({}).next(h=>{Bt("number"==typeof h);const y=new kl(h,t,r,i),E=function(P,V,H){const se=H.baseMutations.map(je=>Bh(P.re,je)),de=H.mutations.map(je=>Bh(P.re,je));return{userId:V,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:se,mutations:de}}(this.It,this.userId,y),C=[];let x=new In((P,V)=>Gt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=wm(this.userId,P.key.path,h);x=x.add(P.key.path.popLast()),C.push(c.put(E)),C.push(u.put(V,aC))}return x.forEach(P=>{C.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[h]=y.keys()}),le.waitFor(C).next(()=>y)})}lookupMutationBatch(e,t){return yu(e).get(t).next(r=>r?(Bt(r.userId===this.userId),Fl(this.It,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yu(e).Z({index:"userMutationsIndex",range:i},(c,h,y)=>{h.userId===this.userId&&(Bt(h.batchId>=r),u=Fl(this.It,h)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return id(e).Z({range:i},(c,h,y)=>{const[E,C,x]=c,P=Eo(C);if(E===this.userId&&t.path.isEqual(P))return yu(e).get(x).next(V=>{if(!V)throw dt();Bt(V.userId===this.userId),u.push(Fl(this.It,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Gt);const i=[];return t.forEach(u=>{const c=vm(this.userId,u.path),h=IDBKeyRange.lowerBound(c),y=id(e).Z({range:h},(E,C,x)=>{const[P,V,H]=E,se=Eo(V);P===this.userId&&u.path.isEqual(se)?r=r.add(H):x.done()});i.push(y)}),le.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=vm(this.userId,r),c=IDBKeyRange.lowerBound(u);let h=new In(Gt);return id(e).Z({range:c},(y,E,C)=>{const[x,P,V]=y,H=Eo(P);x===this.userId&&r.isPrefixOf(H)?H.length===i&&(h=h.add(V)):C.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(yu(e).get(u).next(c=>{if(null===c)throw dt();Bt(c.userId===this.userId),r.push(Fl(this.It,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return RE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return id(e).Z({range:r},(u,c,h)=>{if(u[0]===this.userId){const y=Eo(u[1]);i.push(y)}else h.done()}).next(()=>{Bt(0===i.length)})})}containsKey(e,t){return xm(e,this.userId,t)}Rn(e){return gv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xm(n,e,t){const r=vm(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return id(n).Z({range:u,X:!0},(h,y,E)=>{const[C,x,P]=h;C===e&&x===i&&(c=!0),E.done()}).next(()=>c)}function yu(n){return Jn(n,"mutations")}function id(n){return Jn(n,"documentMutations")}function gv(n){return Jn(n,"mutationQueues")}class Ul{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ul(0)}static vn(){return new Ul(-1)}}class kE{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ul(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Lt.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Bt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return sd(e).Z((c,h)=>{const y=qh(h);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>le.waitFor(u)).next(()=>i)}forEachTarget(e,t){return sd(e).Z((r,i)=>{const u=qh(i);t(u)})}Vn(e){return mv(e).get("targetGlobalKey").next(t=>(Bt(null!==t),t))}Sn(e,t){return mv(e).put("targetGlobalKey",t)}Dn(e,t){return sd(e).put(rv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ah(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return sd(e).Z({range:i,index:"queryTargetsIndex"},(c,h,y)=>{const E=qh(h);Mh(t,E.target)&&(u=E,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=_u(e);return t.forEach(c=>{const h=Ti(c.path);i.push(u.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=_u(e);return le.forEach(t,u=>{const c=Ti(u.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_u(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_u(e);let u=Qt();return i.Z({range:r,X:!0},(c,h,y)=>{const E=Eo(c[1]),C=new He(E);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),i=IDBKeyRange.bound([r],[Qw(r)],!1,!0);let u=0;return _u(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,h],y,E)=>{0!==c&&(u++,E.done())}).next(()=>u>0)}se(e,t){return sd(e).get(t).next(r=>r?qh(r):null)}}function sd(n){return Jn(n,"targets")}function mv(n){return Jn(n,"targetGlobal")}function _u(n){return Jn(n,"targetDocuments")}function yC([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class _C{constructor(e){this.xn=e,this.buffer=new In(yC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dl(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield iu(r)}yield t.Fn(3e5)}))}}class PE{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ji.at);const r=new _C(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(pv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,h,y,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),em()<=gi.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${u} targets in `+(y-h)+`ms\n\tRemoved ${x} documents in `+(E-y)+`ms\nTotal Duration: ${E-C}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class wC{constructor(e,t){this.db=e,this.garbageCollector=new PE(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return dr(e,r)}removeReference(e,t,r){return dr(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dr(e,t)}Gn(e,t){return function(r,i){let u=!1;return gv(r).tt(c=>xm(r,c,i).next(h=>(h&&(u=!0),le.resolve(!h)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,h)=>{if(h<=t){const y=this.Gn(e,c).next(E=>{if(!E)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Lt.min()),_u(e).delete([0,Ti(c.path)])))});i.push(y)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dr(e,t)}Kn(e,t){const r=_u(e);let i,u=ji.at;return r.Z({index:"documentTargetsIndex"},([c,h],{path:y,sequenceNumber:E})=>{0===c?(u!==ji.at&&t(new He(Eo(i)),u),u=E,i=y):u=ji.at}).next(()=>{u!==ji.at&&t(new He(Eo(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dr(n,e){return _u(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class yv{constructor(){this.changes=new hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vl(e).put(r)}removeEntry(e,t,r){return Vl(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],gu(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Vl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Vl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,u)=>{r={document:this.jn(t,u),size:Am(u)}}).next(()=>r)}getEntries(e,t){let r=zi();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=zi(),i=new lr(He.comparator);return this.zn(e,t,(u,c)=>{const h=this.jn(u,c);r=r.insert(u,h),i=i.insert(u,Am(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let i=new In(FE);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Zh(i.first()),Zh(i.last())),c=i.getIterator();let h=c.getNext();return Vl(e).Z({index:"documentKeyIndex",range:u},(y,E,C)=>{const x=He.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;h&&FE(h,x)<0;)r(h,null),h=c.getNext();h&&h.isEqual(x)&&(r(h,E),h=c.hasNext()?c.getNext():null),h?C.j(Zh(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),gu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vl(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let h=zi();for(const y of c){const E=this.jn(He.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);h=h.insert(E.key,E)}return h})}getAllFromCollectionGroup(e,t,r,i){let u=zi();const c=od(t,r),h=od(t,ys.max());return Vl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(y,E,C)=>{const x=this.jn(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(x.key,x),u.size===i&&C.done()}).next(()=>u)}newChangeBuffer(e){return new OE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LE(e).get("remoteDocumentGlobalKey").next(t=>(Bt(!!t),t))}Qn(e,t){return LE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Gh(n,e){let t;if(e.document)t=ev(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=Ll(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=He.fromSegments(e.unknownDocument.path),i=Ll(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return Lt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Lt.min()))return r}return Fn.newInvalidDocument(e)}}function NE(n){return new EC(n)}class OE extends yv{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new hu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const h=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,h.readTime)),c.isValidDocument()){const y=rd(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Am(y)-h.size,t.push(this.Yn.addEntry(e,u,y))}else if(r-=h.size,this.trackRemovals){const y=rd(this.Yn.It,c.convertToNoDocument(Lt.min()));t.push(this.Yn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function LE(n){return Jn(n,"remoteDocumentGlobal")}function Vl(n){return Jn(n,"remoteDocumentsV14")}function Zh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function od(n,e){const t=e.documentKey.path.toArray();return[n,gu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Gt(t[u],r[u]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class IC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _v{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Jc(r.mutation,i,_s.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=fu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Fh();return u.forEach((h,y)=>{c=c.insert(h,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=fu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let u=zi();const c=ed(),h=ed();return t.forEach((y,E)=>{const C=r.get(E.key);i.has(E.key)&&(void 0===C||C.mutation instanceof la)?u=u.insert(E.key,E):void 0!==C&&(c.set(E.key,C.mutation.getFieldMask()),Jc(C.mutation,E,C.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((E,C)=>c.set(E,C)),t.forEach((E,C)=>{var x;return h.set(E,new IC(C,null!==(x=c.get(E))&&void 0!==x?x:null))}),h))}recalculateAndSaveOverlays(e,t){const r=ed();let i=new lr((c,h)=>c-h),u=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let C=r.get(y)||_s.empty();C=h.applyToLocalView(E,C),r.set(y,C);const x=(i.get(h.batchId)||Qt()).add(y);i=i.insert(h.batchId,x)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),E=y.key,C=y.value,x=vE();C.forEach(P=>{if(!u.has(P)){const V=Cp(t.get(P),r.get(P));null!==V&&x.set(P,V),u=u.add(P)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,x))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):le.resolve(fu());let h=-1,y=u;return c.next(E=>le.forEach(E,(C,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),u.get(C)?le.resolve():this.getBaseDocument(e,C,x).next(P=>{y=y.insert(C,P)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,y,E,Qt())).next(C=>({batchId:h,changes:_E(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let i=Fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Fh();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,h=>{const y=(E=t,C=h.child(i),new Al(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,C;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((C,x)=>{u=u.insert(C,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((h,y)=>{const E=y.getKey();null===i.get(E)&&(i=i.insert(E,Fn.newInvalidDocument(E)))});let c=Fh();return i.forEach((h,y)=>{const E=u.get(h);void 0!==E&&Jc(E.mutation,y,_s.empty(),Ln.now()),pE(t,y)&&(c=c.insert(h,y))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):le.resolve(Fn.newInvalidDocument(t))}}class bC{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Im(r.bundledQuery),readTime:Wr(r.readTime)}),le.resolve();var r}}class UE{constructor(){this.overlays=new lr(He.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fu();return le.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=fu(),u=t.length+1,c=new He(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new lr((E,C)=>E-C);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let C=u.get(E.largestBatchId);null===C&&(C=fu(),u=u.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const h=fu(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,C)=>h.set(E,C)),!(h.size()>=i)););return le.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Nl(t,r));let u=this.es.get(t);void 0===u&&(u=Qt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class VE{constructor(){this.ns=new In(Br.ss),this.rs=new In(Br.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Br(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Br(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new He(new on([])),r=new Br(t,e),i=new Br(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new He(new on([])),r=new Br(t,e),i=new Br(t,e+1);let u=Qt();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Br(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Br{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return He.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||He.comparator(e.key,t.key)}}class BE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(Br.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new kl(u,t,r,i);this.mutationQueue.push(c);for(const h of i)this.gs=this.gs.add(new Br(h.key,u)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Br(t,0),i=new Br(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const h=this.ys(c._s);u.push(h)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Gt);return t.forEach(i=>{const u=new Br(i,0),c=new Br(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],h=>{r=r.add(h._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Br(new He(u),0);let h=new In(Gt);return this.gs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(h=h.add(y._s)),!0)},c),le.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,i=>{const u=new Br(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Br(t,0),i=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pa{constructor(e){this.Es=e,this.docs=new lr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=zi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Fn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=zi();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:y}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||R_(aa(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DC(this)}getSize(e){return le.resolve(this.size)}}class DC extends yv{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CC{constructor(e){this.persistence=e,this.Rs=new hu(t=>Ah(t),Mh),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new VE,this.targetCount=0,this.vs=Ul.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ul(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(u).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class Io{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ji(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CC(this),this.indexManager=new cv,this.remoteDocumentCache=new pa(r=>this.referenceDelegate.xs(r)),this.It=new nd(t),this.Ns=new bC(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new BE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new bo(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class bo extends kD{constructor(e){super(),this.currentSequenceNumber=e}}class Wi{constructor(e){this.persistence=e,this.Fs=new VE,this.$s=null}static Bs(e){return new Wi(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const i=He.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Lt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class $E{constructor(e){this.It=e}$(e,t,r,i){const u=new k_("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tv,{unique:!0}),h.createObjectStore("documentMutations"),vv(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),vv(e)),c=c.next(()=>function(h){const y=h.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,y){return y.store("mutations").W().next(E=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tv,{unique:!0});const C=y.store("mutations"),x=E.map(P=>C.put(P));return le.waitFor(x)})}(e,u))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const y=h.createObjectStore("documentOverlays",{keyPath:nv});y.createIndex("collectionPathOverlayIndex",gC,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",da,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const y=h.createObjectStore("remoteDocumentsV14",{keyPath:uC});y.createIndex("documentKeyIndex",lC),y.createIndex("collectionGroupIndex",cC)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:kA}).createIndex("sequenceNumberIndex",Op,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:fC}).createIndex("documentKeyIndex",pC,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Am(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>le.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>le.forEach(h,y=>{Bt(y.userId===u.userId);const E=Fl(this.It,y);return RE(e,u.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,h)=>{const y=new on(c),E=[0,Ti(y)];u.push(t.get(E).next(C=>C?le.resolve():t.put({targetId:0,path:Ti(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:td});const r=t.store("collectionParents"),i=new Sm,u=c=>{if(i.add(c)){const h=c.lastSegment(),y=c.popLast();return r.put({collectionId:h,parent:Ti(y)})}};return t.store("remoteDocuments").Z({X:!0},(c,h)=>{const y=new on(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,h,y],E)=>{const C=Eo(h);return u(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=qh(i),c=rv(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const h=t.store("remoteDocumentsV14"),y=(E=c,E.document?new He(on.fromString(E.document.name).popFirst(5)):E.noDocument?He.fromSegments(E.noDocument.path):E.unknownDocument?He.fromSegments(E.unknownDocument.path):dt()).path.toArray();var E;const C={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>le.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=NE(this.It),u=new Io(Wi.Bs,this.It.re);return r.W().next(c=>{const h=new Map;return c.forEach(y=>{var E;let C=null!==(E=h.get(y.userId))&&void 0!==E?E:Qt();Fl(this.It,y).keys().forEach(x=>C=C.add(x)),h.set(y.userId,C)}),le.forEach(h,(y,E)=>{const C=new xr(E),x=Dm.oe(this.It,C),P=u.getIndexManager(C),V=jp.oe(C,this.It,P,u.referenceDelegate);return new _v(i,V,x,P).recalculateAndSaveOverlaysForDocumentKeys(new Fp(t,ji.at),y).next()})})}}function vv(n){n.createObjectStore("targetDocuments",{keyPath:hC}).createIndex("documentTargetsIndex",Em,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dC,{unique:!0}),n.createObjectStore("targetGlobal")}const wv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ev{constructor(e,t,r,i,u,c,h,y,E,C,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=h,this.Js=E,this.Ys=C,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!Ev.C())throw new Pe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wC(this,i),this.ii=t+"main",this.It=new nd(y),this.ri=new qs(this.ii,this.Xs,new $E(this.It)),this.Cs=new kE(this.referenceDelegate,this.It),this.remoteDocumentCache=NE(this.It),this.Ns=new mC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,wv);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ji(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dl(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Hp(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return Mm(e).delete(this.clientId)}yi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Jn(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),h=u.filter(y=>-1===c.indexOf(y));return le.forEach(h,y=>i.delete(y.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):Hp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,wv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mm(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Fp(t,ji.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Mm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return jp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dv(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Dm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?Ks:14===c?Lp:13===c?Rl:12===c?yi:11===c?zh:void dt();var c;let h;return this.ri.runTransaction(e,i,u,y=>(h=new Fp(y,this.Ss?this.Ss.next():ji.at),"readwrite-primary"===t?this.fi(h).next(E=>!!E||this.di(h)).next(E=>{if(!E)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Pe(me.FAILED_PRECONDITION,RD);return r(h)}).next(E=>this.wi(h).next(()=>E)):this.Vi(h).next(()=>r(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}Vi(e){return Hp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(me.FAILED_PRECONDITION,wv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hp(e).put("owner",t)}static C(){return qs.C()}_i(e){const t=Hp(e);return t.get("owner").next(r=>this.mi(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hp(n){return Jn(n,"owner")}function Mm(n){return Jn(n,"clientMetadata")}function zp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ad{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Qt(),i=Qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new ad(e,t.fromCache,r,i)}}class jE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(dE(t))return le.resolve(null);let r=Hi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=bp(t,null,"F"),r=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Qt(...u);return this.Ni.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.Fi(t,h);return this.$i(t,E,c,y.readTime)?this.ki(e,bp(t,null,"F")):this.Bi(e,E,t,y)}))})))}Oi(e,t,r,i){return dE(t)||i.isEqual(Lt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):(em()<=gi.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dp(t)),this.Bi(e,c,t,jc(i,-1)))})}Fi(e,t){let r=new In($D(e));return t.forEach((i,u)=>{pE(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return em()<=gi.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Dp(t)),this.Ni.getDocumentsMatchingQuery(e,t,ys.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class HE{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new lr(Gt),this.qi=new hu(u=>Ah(u),Mh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _v(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function zE(n,e,t,r){return new HE(n,e,t,r)}function Iv(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,fe.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],h=[];let y=Qt();for(const E of i){c.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}for(const E of u){h.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}return t.localDocuments.getDocuments(r,y).next(E=>({ji:E,removedBatchIds:c,addedBatchIds:h}))})})}),Rm.apply(this,arguments)}function km(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,y,E){const C=y.batch,x=C.keys();let P=le.resolve();return x.forEach(V=>{P=P.next(()=>E.getEntry(h,V)).next(H=>{const se=y.docVersions.get(V);Bt(null!==se),H.version.compareTo(se)<0&&(C.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),E.addEntry(H)))})}),P.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Qt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(h=h.add(c.batch.mutations[y].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function GE(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function qE(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((C,x)=>{const P=i.get(x);if(!P)return;h.push(t.Cs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,C.addedDocuments,x)));let V=P.withSequenceNumber(u.currentSequenceNumber);var H,se,de;e.targetMismatches.has(x)?V=V.withResumeToken(Rr.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),i=i.insert(x,V),se=V,de=C,(0===(H=P).resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(u,V))});let y=zi(),E=Qt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),h.push(bv(u,c,e.documentUpdates).next(C=>{y=C.Wi,E=C.zi})),!r.isEqual(Lt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));h.push(C)}return le.waitFor(h).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,E)).next(()=>y)}).then(u=>(t.Ui=i,u))}function bv(n,e,t){let r=Qt(),i=Qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=zi();return t.forEach((h,y)=>{const E=u.get(h);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(h)),y.isNoDocument()&&y.version.isEqual(Lt.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):Le("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",y.version)}),{Wi:c,zi:i}})}function Dv(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vu(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,le.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new ws(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Bl(n,e,t){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,fe.Z)(function*(n,e,t){const r=Ze(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dl(c))throw c;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Pm.apply(this,arguments)}function Gp(n,e,t){const r=Ze(n);let i=Lt.min(),u=Qt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,y,E){const C=Ze(h),x=C.qi.get(E);return void 0!==x?le.resolve(C.Ui.get(x)):C.Cs.getTargetData(y,E)}(r,c,Hi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,h.targetId).next(y=>{u=y})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Lt.min(),t?u:Qt())).next(h=>(Sv(r,BD(e),h),{documents:h,Hi:u})))}function Cv(n,e){const t=Ze(n),r=Ze(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Tv(n,e){const t=Ze(n),r=t.Ki.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,jc(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Sv(t,e,i),i))}function Sv(n,e,t){let r=n.Ki.get(e)||Lt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Nm(){return Nm=(0,fe.Z)(function*(n,e,t,r){const i=Ze(n);let u=Qt(),c=zi();for(const E of t){const C=e.Ji(E.metadata.name);E.document&&(u=u.add(C));const x=e.Yi(E);x.setReadTime(e.Xi(E.metadata.readTime)),c=c.insert(C,x)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield vu(i,(E=r,Hi(Rh(on.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>bv(E,h,c).next(C=>(h.apply(E),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Cs.addMatchingKeys(E,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,C.Wi,C.zi)).next(()=>C.Wi)))}),Nm.apply(this,arguments)}function TC(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,fe.Z)(function*(n,e,t=Qt()){const r=yield vu(n,Hi(Im(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const h=r.withResumeToken(Rr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(u,h).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),Av.apply(this,arguments)}function KE(n,e){return`firestore_clients_${n}_${e}`}function ZE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xv(n,e){return`firestore_targets_${n}_${e}`}class Om{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Pe(i.error.code,i.error.message))),c?new Om(e,t,i.state,u):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Pe(r.error.code,r.error.message))),u?new qp(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Sp();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=nE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Lm(e,u):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mv(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rv{constructor(){this.activeTargetIds=Sp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kv{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new lr(Gt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=KE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Rv),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(KE(e.persistenceKey,i));if(u){const c=Lm.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xv(this.persistenceKey,e));if(r){const i=qp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=ji.at;if(null!=u)try{const h=JSON.parse(u);Bt("number"==typeof h),c=h}catch(h){vr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==ji.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Om(this.currentUser,e,t,r),u=ZE(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=ZE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=xv(this.persistenceKey,e),u=new qp(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Lm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Om.Zi(new xr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return qp.Zi(i,t)}yr(e){return Mv.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],h=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||h.push(y)}),this.syncEngine.Br(c,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Sp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class QE{constructor(){this.Lr=new Rv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Rv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SC{qr(e){}shutdown(){}}class YE{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xC{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class MC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);Le("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,u),this.fo(e,c,h,r).then(y=>(Le("RestConnection","Received: ",y),y),y=>{throw Il("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ru,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${AC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const h=new Xg;h.setWithCredentials(!0),h.listenOnce(Gw.COMPLETE,()=>{var E;try{switch(h.getLastErrorCode()){case gp.NO_ERROR:const C=h.getResponseJson();Le("Connection","XHR received:",JSON.stringify(C)),u(C);break;case gp.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),c(new Pe(me.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:const x=h.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',x,"response text:",h.getResponseText()),x>0){let P=h.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=null===(E=P)||void 0===E?void 0:E.error;if(V&&V.status&&V.message){const H=function(se){const de=se.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(de)>=0?de:me.UNKNOWN}(V.status);c(new Pe(H,V.message))}else c(new Pe(me.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Pe(me.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);h.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=EA(),c=bD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new DD({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=i.join("");Le("Connection","Creating WebChannel: "+y,h);const E=u.createWebChannel(y,h);let C=!1,x=!1;const P=new xC({Hr:H=>{x?Le("Connection","Not sending because WebChannel is closed:",H):(C||(Le("Connection","Opening WebChannel transport."),E.open(),C=!0),Le("Connection","WebChannel sending:",H),E.send(H))},Jr:()=>E.close()}),V=(H,se,de)=>{H.listen(se,je=>{try{de(je)}catch(tt){setTimeout(()=>{throw tt},0)}})};return V(E,Eh.EventType.OPEN,()=>{x||Le("Connection","WebChannel transport opened.")}),V(E,Eh.EventType.CLOSE,()=>{x||(x=!0,Le("Connection","WebChannel transport closed"),P.io())}),V(E,Eh.EventType.ERROR,H=>{x||(x=!0,Il("Connection","WebChannel transport errored:",H),P.io(new Pe(me.UNAVAILABLE,"The operation could not be completed")))}),V(E,Eh.EventType.MESSAGE,H=>{var se;if(!x){const de=H.data[0];Bt(!!de);const je=de,tt=je.error||(null===(se=je[0])||void 0===se?void 0:se.error);if(tt){Le("Connection","WebChannel received error:",tt);const Qe=tt.status;let Ke=function(At){const rn=Vr[At];if(void 0!==rn)return mE(rn)}(Qe),Ct=tt.message;void 0===Ke&&(Ke=me.INTERNAL,Ct="Unknown error status: "+Qe+" with message "+tt.message),x=!0,P.io(new Pe(Ke,Ct)),E.close()}else Le("Connection","WebChannel received:",de),P.ro(de)}}),V(c,qw.STAT_EVENT,H=>{H.stat===El.PROXY?Le("Connection","Detected buffering proxy"):H.stat===El.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function JE(){return typeof window<"u"?window:null}function Wp(){return typeof document<"u"?document:null}function Qh(n){return new MA(n,!0)}class Fm{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Pv{constructor(e,t,r,i,u,c,h,y){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Fm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,fe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,fe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Pe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,fe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XE extends Pv{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function CE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:dt(),i=e.targetChange.targetIds||[],u=function(y,E){return y.gt?(Bt(void 0===E||"string"==typeof E),Rr.fromBase64String(E||"")):(Bt(void 0===E||E instanceof Uint8Array),Rr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(y){const E=void 0===y.code?me.UNKNOWN:mE(y.code);return new Pe(E,y.message||"")}(c);t=new J_(r,i,u,h||null)}else if("documentChange"in e){const r=e.documentChange,i=vs(n,r.document.name),u=Wr(r.document.updateTime),c=new qr({mapValue:{fields:r.document.fields}}),h=Fn.newFoundDocument(i,u,c);t=new pm(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=vs(n,r.document),u=r.readTime?Wr(r.readTime):Lt.min(),c=Fn.newNoDocument(i,u);t=new pm([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=vs(n,r.document);t=new pm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new WD(r.count||0);t=new EE(r.targetId,u)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Lt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Lt.min():u.readTime?Wr(u.readTime):Lt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=mm(this.It),t.addTarget=function(i,u){let c;const h=u.target;return c=Ip(h)?{documents:Np(i,h)}:{query:$h(i,h)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=IE(i,u.resumeToken):u.snapshotVersion.compareTo(Lt.min())>0&&(c.readTime=Vh(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function tC(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=mm(this.It),t.removeTarget=e,this.Bo(t)}}class eI extends Pv{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function pu(n,e){return n&&n.length>0?(Bt(void 0!==e),n.map(t=>function(r,i){let u=Wr(r.updateTime?r.updateTime:i);return u.isEqual(Lt.min())&&(u=Wr(i)),new qD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.Zo(r,t)}return Bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=mm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bh(this.It,r))};this.Bo(t)}}class tI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Pe(me.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class rI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vr(t),this.ou=!1):Le("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class iI{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(h=>{r.enqueueAndForget((0,fe.Z)(function*(){var y;vt(c)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,fe.Z)(function*(E){const C=Ze(E);C._u.add(4),yield Yh(C),C.gu.set("Unknown"),C._u.delete(4),yield Do(C)}),function(E){return y.apply(this,arguments)})(c))}))}),this.gu=new rI(r,i)}}function Do(n){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,fe.Z)(function*(n){if(vt(n))for(const e of n.wu)yield e(!0)}),Nv.apply(this,arguments)}function Yh(n){return $l.apply(this,arguments)}function $l(){return $l=(0,fe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),$l.apply(this,arguments)}function Ov(n,e){const t=Ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),oI(t)?Vm(t):ga(t).ko()&&sI(t,e))}function ud(n,e){const t=Ze(n),r=ga(t);t.du.delete(e),r.ko()&&Lv(t,e),0===t.du.size&&(r.ko()?r.Fo():vt(t)&&t.gu.set("Unknown"))}function sI(n,e){n.yu.Mt(e.targetId),ga(n).zo(e)}function Lv(n,e){n.yu.Mt(e),ga(n).Ho(e)}function Vm(n){n.yu=new QD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),ga(n).start(),n.gu.uu()}function oI(n){return vt(n)&&!ga(n).No()&&n.du.size>0}function vt(n){return 0===Ze(n)._u.size}function aI(n){n.yu=void 0}function RC(n){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,fe.Z)(function*(n){n.du.forEach((e,t)=>{sI(n,e)})}),Fv.apply(this,arguments)}function Jh(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,fe.Z)(function*(n,e){aI(n),oI(n)?(n.gu.hu(e),Vm(n)):n.gu.set("Unknown")}),Uv.apply(this,arguments)}function Bm(n,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,fe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof J_&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,u){const c=u.cause;for(const h of u.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.du.delete(h),i.yu.removeTarget(h))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vn(n,r)}else if(e instanceof pm?n.yu.Gt(e):e instanceof EE?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Lt.min()))try{const r=yield GE(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const E=i.du.get(y);E&&i.du.set(y,E.withResumeToken(h.resumeToken,u))}}),c.targetMismatches.forEach(h=>{const y=i.du.get(h);if(!y)return;i.du.set(h,y.withResumeToken(Rr.EMPTY_BYTE_STRING,y.snapshotVersion)),Lv(i,h);const E=new ws(y.target,h,1,y.sequenceNumber);sI(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield Vn(n,r)}var r}),Xh.apply(this,arguments)}function Vn(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,fe.Z)(function*(n,e,t){if(!Dl(e))throw e;n._u.add(1),yield Yh(n),n.gu.set("Offline"),t||(t=()=>GE(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Do(n)}))}),uI.apply(this,arguments)}function Vv(n,e){return e().catch(t=>Vn(n,t,e))}function ld(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,fe.Z)(function*(n){const e=Ze(n),t=Zs(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;lI(e);)try{const i=yield Dv(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,cI(e,i)}catch(i){yield Vn(e,i)}$v(e)&&jv(e)}),Bv.apply(this,arguments)}function lI(n){return vt(n)&&n.fu.length<10}function cI(n,e){n.fu.push(e);const t=Zs(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function $v(n){return vt(n)&&!Zs(n).No()&&n.fu.length>0}function jv(n){Zs(n).start()}function kC(n){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,fe.Z)(function*(n){Zs(n).eu()}),Hv.apply(this,arguments)}function PC(n){return cd.apply(this,arguments)}function cd(){return cd=(0,fe.Z)(function*(n){const e=Zs(n);for(const t of n.fu)e.Xo(t.mutations)}),cd.apply(this,arguments)}function NC(n,e,t){return zv.apply(this,arguments)}function zv(){return zv=(0,fe.Z)(function*(n,e,t){const r=n.fu.shift(),i=Pl.from(r,e,t);yield Vv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ld(n)}),zv.apply(this,arguments)}function OC(n,e){return ef.apply(this,arguments)}function ef(){return ef=(0,fe.Z)(function*(n,e){var t;e&&Zs(n).Yo&&(yield(t=(0,fe.Z)(function*(r,i){if(Y_(u=i.code)&&u!==me.ABORTED){const c=r.fu.shift();Zs(r).Mo(),yield Vv(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ld(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),$v(n)&&jv(n)}),ef.apply(this,arguments)}function Gv(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,fe.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=vt(t);t._u.add(3),yield Yh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Do(t)}),$m.apply(this,arguments)}function jm(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,fe.Z)(function*(n,e){const t=Ze(n);e?(t._u.delete(2),yield Do(t)):e||(t._u.add(2),yield Yh(t),t.gu.set("Unknown"))}),qv.apply(this,arguments)}function ga(n){return n.pu||(n.pu=function(e,t,r){const i=Ze(e);return i.su(),new XE(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:RC.bind(null,n),Zr:Jh.bind(null,n),Wo:Bm.bind(null,n)}),n.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.pu.Mo(),oI(n)?Vm(n):n.gu.set("Unknown")):(yield n.pu.stop(),aI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Zs(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.su(),new eI(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:kC.bind(null,n),Zr:OC.bind(null,n),tu:PC.bind(null,n),Zo:NC.bind(null,n)}),n.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Iu.Mo(),yield ld(n)):(yield n.Iu.stop(),n.fu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Wv{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,h=new Wv(e,t,c,i,u);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(n,e){if(vr("AsyncQueue",`${e}: ${n}`),Dl(n))return new Pe(me.UNAVAILABLE,`${e}: ${n}`);throw n}class nf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Fh(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new nf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Kv{constructor(){this.Tu=new lr(He.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dd{constructor(e,t,r,i,u,c,h,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new dd(e,t,nf.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class dI{constructor(){this.Au=void 0,this.listeners=[]}}class LC{constructor(){this.queries=new hu(e=>fE(e),Ph),this.onlineState="Unknown",this.Ru=new Set}}function Hm(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,fe.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new dI),i)try{u.Au=yield t.onListen(r)}catch(c){const h=tf(c,`Initialization of query '${Dp(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&fI(t)}),Zv.apply(this,arguments)}function Qv(n,e){return hI.apply(this,arguments)}function hI(){return hI=(0,fe.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),hI.apply(this,arguments)}function PA(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Pu(i)&&(r=!0);c.Au=i}}r&&fI(t)}function NA(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function fI(n){n.Ru.forEach(e=>{e.next()})}class zm{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Gm{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class pI{constructor(e){this.It=e}Ji(e){return vs(this.It,e)}Yi(e){return e.metadata.exists?ev(this.It,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Wr(e)}}class FC{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yv(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=on.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new pI(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Qt()).add(u);t.set(c,h)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function WE(n,e,t,r){return Nm.apply(this,arguments)}(e.localStore,new pI(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield TC(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Yv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rf{constructor(e){this.key=e}}class gI{constructor(e){this.key=e}}class mI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=$D(e),this.Qu=new nf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Kv,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,x)=>{const P=i.get(C),V=pE(this.query,x)?x:null,H=!!P&&this.mutatedKeys.has(P.key),se=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let de=!1;P&&V?P.data.isEqual(V.data)?H!==se&&(r.track({type:3,doc:V}),de=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),de=!0,(y&&this.Gu(V,y)>0||E&&this.Gu(V,E)<0)&&(h=!0)):!P&&V?(r.track({type:0,doc:V}),de=!0):P&&!V&&(r.track({type:1,doc:P}),de=!0,(y||E)&&(h=!0)),de&&(V?(c=c.add(V),u=se?u.add(C):u.delete(C)):(c=c.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{Qu:c,zu:r,$i:h,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((E,C)=>function(x,P){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return V(x)-V(P)}(E.type,C.type)||this.Gu(E.doc,C.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,y=h!==this.qu;return this.qu=h,0!==u.length||y?{snapshot:new dd(this.query,e.Qu,i,u,e.mutatedKeys,0===h,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Kv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new gI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new rf(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return dd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class UC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VC{constructor(e){this.key=e,this.nc=!1}}class BC{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new hu(h=>fE(h),Ph),this.rc=new Map,this.oc=new Set,this.uc=new lr(He.comparator),this.cc=new Map,this.ac=new VE,this.hc={},this.lc=new Map,this.fc=Ul.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function yI(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,fe.Z)(function*(n,e){const t=Jm(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield vu(t.localStore,Hi(e));t.isPrimaryClient&&Ov(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Xv(t,e,r,"current"===h,c.resumeToken)}return i}),Jv.apply(this,arguments)}function Xv(n,e,t,r,i){return hd.apply(this,arguments)}function hd(){return hd=(0,fe.Z)(function*(n,e,t,r,i){n._c=(x,P,V)=>{return(H=(0,fe.Z)(function*(se,de,je,tt){let Qe=de.view.Wu(je);Qe.$i&&(Qe=yield Gp(se.localStore,de.query,!1).then(({documents:At})=>de.view.Wu(At,Qe)));const Ke=tt&&tt.targetChanges.get(de.targetId),Ct=de.view.applyChanges(Qe,se.isPrimaryClient,Ke);return s0(se,de.targetId,Ct.Xu),Ct.snapshot}),function(se,de,je,tt){return H.apply(this,arguments)})(n,x,P,V);var H};const u=yield Gp(n.localStore,e,!0),c=new mI(e,u.Hi),h=c.Wu(u.documents),y=Uh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=c.applyChanges(h,n.isPrimaryClient,y);s0(n,t,E.Xu);const C=new UC(e,t,c);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),hd.apply(this,arguments)}function $C(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,fe.Z)(function*(n,e){const t=Ze(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Ph(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Bl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ud(t.remoteStore,r.targetId),sf(t,r.targetId)}).catch(iu))):(sf(t,r.targetId),yield Bl(t.localStore,r.targetId,!0))}),qm.apply(this,arguments)}function Wm(){return Wm=(0,fe.Z)(function*(n,e,t){const r=g0(n);try{const i=yield function(u,c){const h=Ze(u),y=Ln.now(),E=c.reduce((P,V)=>P.add(V.key),Qt());let C,x;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=zi(),H=Qt();return h.Gi.getEntries(P,E).next(se=>{V=se,V.forEach((de,je)=>{je.isValidDocument()||(H=H.add(de))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,V)).next(se=>{C=se;const de=[];for(const je of c){const tt=Lh(je,C.get(je.key).overlayedDocument);null!=tt&&de.push(new la(je.key,tt,sm(tt.value.mapValue),Un.exists(!0)))}return h.mutationQueue.addMutationBatch(P,y,de,c)}).next(se=>{x=se;const de=se.applyToLocalDocumentSet(C,H);return h.documentOverlayCache.saveOverlays(P,se.batchId,de)})}).then(()=>({batchId:x.batchId,changes:_E(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,h){let y=u.hc[u.currentUser.toKey()];y||(y=new lr(Gt)),y=y.insert(c,h),u.hc[u.currentUser.toKey()]=y}(r,i.batchId,t),yield wu(r,i.changes),yield ld(r.remoteStore)}catch(i){const u=tf(i,"Failed to persist write");t.reject(u)}}),Wm.apply(this,arguments)}function _I(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,fe.Z)(function*(n,e){const t=Ze(n);try{const r=yield qE(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?Bt(c.nc):i.removedDocuments.size>0&&(Bt(c.nc),c.nc=!1))}),yield wu(t,r,e)}catch(r){yield iu(r)}}),Km.apply(this,arguments)}function vI(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(u,c){const h=Ze(u);h.onlineState=c;let y=!1;h.queries.forEach((E,C)=>{for(const x of C.listeners)x.bu(c)&&(y=!0)}),y&&fI(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function e0(n,e,t){return t0.apply(this,arguments)}function t0(){return t0=(0,fe.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new lr(He.comparator);c=c.insert(u,Fn.newNoDocument(u,Lt.min()));const h=Qt().add(u),y=new Ap(Lt.min(),new Map,new In(Gt),c,h);yield _I(r,y),r.uc=r.uc.remove(u),r.cc.delete(e),o0(r)}else yield Bl(r.localStore,e,!1).then(()=>sf(r,e,t)).catch(iu)}),t0.apply(this,arguments)}function wI(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,fe.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield km(t.localStore,e);Qm(t,r,null),r0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wu(t,i)}catch(i){yield iu(i)}}),Zm.apply(this,arguments)}function HC(n,e,t){return n0.apply(this,arguments)}function n0(){return n0=(0,fe.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,c){const h=Ze(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return h.mutationQueue.lookupMutationBatch(y,c).next(C=>(Bt(null!==C),E=C.keys(),h.mutationQueue.removeMutationBatch(y,C))).next(()=>h.mutationQueue.performConsistencyCheck(y)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(y,E,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>h.localDocuments.getDocuments(y,E))})}(r.localStore,e);Qm(r,e,t),r0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wu(r,i)}catch(i){yield iu(i)}}),n0.apply(this,arguments)}function Kp(){return Kp=(0,fe.Z)(function*(n,e){const t=Ze(n);vt(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=tf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Kp.apply(this,arguments)}function r0(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Qm(n,e,t){const r=Ze(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||EI(n,r)})}function EI(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ud(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),o0(n))}function s0(n,e,t){for(const r of t)r instanceof rf?(n.ac.addReference(r.key,e),GC(n,r)):r instanceof gI?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||EI(n,r.key)):dt()}function GC(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.oc.add(r),o0(n))}function o0(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new He(on.fromString(e)),r=n.fc.next();n.cc.set(r,new VC(t)),n.uc=n.uc.insert(t,r),Ov(n.remoteStore,new ws(Hi(Rh(t.path)),r,2,ji.at))}}function wu(n,e,t){return a0.apply(this,arguments)}function a0(){return a0=(0,fe.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],c=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,y)=>{c.push(r._c(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const C=ad.Ci(y.targetId,E);u.push(C)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(h=(0,fe.Z)(function*(y,E){const C=Ze(y);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>le.forEach(E,P=>le.forEach(P.Si,V=>C.persistence.referenceDelegate.addReference(x,P.targetId,V)).next(()=>le.forEach(P.Di,V=>C.persistence.referenceDelegate.removeReference(x,P.targetId,V)))))}catch(x){if(!Dl(x))throw x;Le("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const P=x.targetId;if(!x.fromCache){const V=C.Ui.get(P),se=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);C.Ui=C.Ui.insert(P,se)}}}),function(y,E){return h.apply(this,arguments)})(r.localStore,u))}),a0.apply(this,arguments)}function qC(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,fe.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield Iv(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(h=>{h.reject(new Pe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wu(t,r.ji)}var i}),Ym.apply(this,arguments)}function II(n,e){const t=Ze(n),r=t.cc.get(e);if(r&&r.nc)return Qt().add(r.key);{let i=Qt();const u=t.rc.get(e);if(!u)return i;for(const c of u){const h=t.ic.get(c);i=i.unionWith(h.view.ju)}return i}}function WC(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,fe.Z)(function*(n,e){const t=Ze(n),r=yield Gp(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&s0(t,e.targetId,i.Xu),i}),u0.apply(this,arguments)}function bI(n,e){return l0.apply(this,arguments)}function l0(){return l0=(0,fe.Z)(function*(n,e){const t=Ze(n);return Tv(t.localStore,e).then(r=>wu(t,r))}),l0.apply(this,arguments)}function KC(n,e,t,r){return c0.apply(this,arguments)}function c0(){return c0=(0,fe.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(c,h){const y=Ze(c),E=Ze(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",C=>E.Tn(C,h).next(x=>x?y.localDocuments.getDocuments(C,x):le.resolve(null)))}(i.localStore,e);var h;null!==u?("pending"===t?yield ld(i.remoteStore):"acknowledged"===t||"rejected"===t?(Qm(i,e,r||null),r0(i,e),h=e,Ze(Ze(i.localStore).mutationQueue).An(h)):dt(),yield wu(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),c0.apply(this,arguments)}function Zp(){return Zp=(0,fe.Z)(function*(n,e){const t=Ze(n);if(Jm(t),g0(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield h0(t,r.toArray());t.dc=!0,yield jm(t.remoteStore,!0);for(const u of i)Ov(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(sf(t,c),Bl(t.localStore,c,!0))),ud(t.remoteStore,c)}),yield i,yield h0(t,r),function(u){const c=Ze(u);c.cc.forEach((h,y)=>{ud(c.remoteStore,y)}),c.ac.fs(),c.cc=new Map,c.uc=new lr(He.comparator)}(t),t.dc=!1,yield jm(t.remoteStore,!1)}}),Zp.apply(this,arguments)}function h0(n,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,fe.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const c of e){let h;const y=r.rc.get(c);if(y&&0!==y.length){h=yield vu(r.localStore,Hi(y[0]));for(const E of y){const C=r.ic.get(E),x=yield WC(r,C);x.snapshot&&u.push(x.snapshot)}}else{const E=yield Cv(r.localStore,c);h=yield vu(r.localStore,E),yield Xv(r,DI(E),c,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(u),i}),Qp.apply(this,arguments)}function DI(n){return cE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ZC(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).vi()}function f0(n,e,t,r){return p0.apply(this,arguments)}function p0(){return p0=(0,fe.Z)(function*(n,e,t,r){const i=Ze(n);if(i.dc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Tv(i.localStore,BD(u[0])),h=Ap.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Rr.EMPTY_BYTE_STRING);yield wu(i,c,h);break}case"rejected":yield Bl(i.localStore,e,!0),sf(i,e,r);break;default:dt()}}),p0.apply(this,arguments)}function QC(n,e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,fe.Z)(function*(n,e,t){const r=Jm(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield Cv(r.localStore,i),c=yield vu(r.localStore,u);yield Xv(r,DI(u),c.targetId,!1,c.resumeToken),Ov(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Bl(r.localStore,i,!1).then(()=>{ud(r.remoteStore,i),sf(r,i)}).catch(iu))}}),jl.apply(this,arguments)}function Jm(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_I.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=II.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e0.bind(null,e),e.sc.Wo=PA.bind(null,e.eventManager),e.sc.wc=NA.bind(null,e.eventManager),e}function g0(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,e),e}class m0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.It=Qh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return zE(this.persistence,new jE,e.initialUser,this.It)}yc(e){return new Io(Wi.Bs,this.It)}gc(e){return new QE}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xm extends m0{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield g0(r.Ac.syncEngine),yield ld(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return zE(this.persistence,new jE,e.initialUser,this.It)}Tc(e,t){return new vC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new LD(t,this.persistence);return new OD(e.asyncQueue,r)}yc(e){const t=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new Ev(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JE(),Wp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new QE}}class YC extends Xm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof kv&&(r.sharedClientState.syncEngine={Fr:KC.bind(null,i),$r:f0.bind(null,i),Br:QC.bind(null,i),vi:ZC.bind(null,i),Mr:bI.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,fe.Z)(function*(c){yield function d0(n,e){return Zp.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=JE();if(!kv.C(t))throw new Pe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yp{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>vI(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=qC.bind(null,r.syncEngine),yield jm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LC}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),r=new MC(e.databaseInfo);return new tI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=h=>vI(this.syncEngine,h,0),c=YE.C()?new YE:new SC,new iI(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,h,y,E){const C=new BC(r,i,u,c,h,y);return E&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Ze(t);Le("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Yh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function y0(n,e,t){if(!t)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _0(n,e,t,r){if(!0===e&&!0===r)throw new Pe(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ey(n){if(!He.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function v0(n){if(He.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jp(n);throw new Pe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function w0(n,e){if(e<=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const CI=new Map;class TI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zw;switch(t.type){case"gapi":return new SD(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=CI.get(e);t&&(Le("ComponentProvider","Removing Datastore"),CI.delete(e),t.terminate())}(this),Promise.resolve()}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Co extends Si{constructor(e,t,r){super(e,t,Rh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new He(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function AI(n,e,...t){if(n=(0,Ot.m9)(n),y0("collection","path",e),n instanceof Xp){const r=on.fromString(e,...t);return v0(r),new Co(n,null,r)}{if(!(n instanceof xn||n instanceof Co))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return v0(r),new Co(n.firestore,null,r)}}function E0(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=x_.R()),y0("doc","path",e),n instanceof Xp){const r=on.fromString(e,...t);return ey(r),new xn(n,null,new He(r))}{if(!(n instanceof xn||n instanceof Co))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return ey(r),new xn(n.firestore,n instanceof Co?n.converter:null,new He(r))}}function XC(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof xn||n instanceof Co)&&(e instanceof xn||e instanceof Co)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function I0(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&Ph(n._query,e._query)&&n.converter===e.converter}function xI(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class MI{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new Gm(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,fe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(u,c){const h=Ze(u),y=mm(h.It)+"/documents",E={documents:c.map(V=>Mp(h.It,V))},C=yield h._o("BatchGetDocuments",y,E,c.length),x=new Map;C.forEach(V=>{const H=function DE(n,e){return"found"in e?function(t,r){Bt(!!r.found);const i=vs(t,r.found.name),u=Wr(r.found.updateTime),c=new qr({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Bt(!!r.missing),Bt(!!r.readTime);const i=vs(t,r.missing),u=Wr(r.readTime);return Fn.newNoDocument(i,u)}(n,e):dt()}(h.It,V);x.set(H.key.toString(),H)});const P=[];return c.forEach(V=>{const H=x.get(V.toString());Bt(!!H),P.push(H)}),P}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=He.fromPath(i);e.mutations.push(new Tp(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(i,u){const c=Ze(i),h=mm(c.It)+"/documents",y={writes:u.map(E=>Bh(c.It,E))};yield c.ao("Commit",h,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lt.min())?Un.exists(!1):Un.updateTime(t):Un.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new Pe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Un.updateTime(t)}return Un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rT{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Fm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,fe.Z)(function*(){const t=new nT(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!qc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Y_(t)}return!1}}class iT{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xr.UNAUTHENTICATED,this.clientId=x_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,fe.Z)(function*(h){Le("FirestoreClient","Received user=",h.uid),yield u.authCredentialListener(h),u.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Le("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=tf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RI(n,e){return b0.apply(this,arguments)}function b0(){return b0=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(u){r.isEqual(u)||(yield Iv(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),b0.apply(this,arguments)}function af(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ny(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Gv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Gv(e.remoteStore,u)),n.onlineComponents=e}),ty.apply(this,arguments)}function ny(n){return ry.apply(this,arguments)}function ry(){return ry=(0,fe.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield RI(n,new m0)),n.offlineComponents}),ry.apply(this,arguments)}function tg(n){return iy.apply(this,arguments)}function iy(){return iy=(0,fe.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield af(n,new Yp)),n.onlineComponents}),iy.apply(this,arguments)}function D0(n){return ny(n).then(e=>e.persistence)}function sy(n){return ny(n).then(e=>e.localStore)}function kI(n){return tg(n).then(e=>e.remoteStore)}function oy(n){return tg(n).then(e=>e.syncEngine)}function uf(n){return C0.apply(this,arguments)}function C0(){return C0=(0,fe.Z)(function*(n){const e=yield tg(n),t=e.eventManager;return t.onListen=yI.bind(null,e.syncEngine),t.onUnlisten=$C.bind(null,e.syncEngine),t}),C0.apply(this,arguments)}function ay(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,u,c,h,y){const E=new eg({next:x=>{u.enqueueAndForget(()=>Qv(i,C));const P=x.docs.has(c);!P&&x.fromCache?y.reject(new Pe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&h&&"server"===h.source?y.reject(new Pe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),C=new zm(Rh(c.path),E,{includeMetadataChanges:!0,Nu:!0});return Hm(i,C)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}function NI(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,u,c,h,y){const E=new eg({next:x=>{u.enqueueAndForget(()=>Qv(i,C)),x.fromCache&&"server"===h.source?y.reject(new Pe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),C=new zm(c,E,{includeMetadataChanges:!0,Nu:!0});return Hm(i,C)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}class uT{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Fm(this,"async_queue_retry"),this.Wc=()=>{const t=Wp();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Mr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Dl(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Wv.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&dt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function S0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Xp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uT,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cy(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||cy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cy(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Gc(n._databaseId,u,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var u,h;n._firestoreClient=new iT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function LI(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield RI(n,t),yield af(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===me.FAILED_PRECONDITION||c.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Il("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function VI(n){if(n._initialized||n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Rr.fromBase64String(e))}catch(t){throw new Pe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ya(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Iu{constructor(e){this._methodName=e}}class ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const fT=/^__.*__$/;class BI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new la(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class R0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new la(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $I(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class sg{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return gy(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($I(this.sa)&&fT.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class jI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Qh(e)}da(e,t,r,i=!1){return new sg({sa:e,methodName:t,fa:r,path:zn.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function fd(n){const e=n._freezeSettings(),t=Qh(n._databaseId);return new jI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function og(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);P0("Data must be an object, but it was:",c,r);const h=zI(r,c);let y,E;if(u.merge)y=new _s(c.fieldMask),E=c.fieldTransforms;else if(u.mergeFields){const C=[];for(const x of u.mergeFields){const P=fy(e,x,t);if(!c.contains(P))throw new Pe(me.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);my(C,P)||C.push(P)}y=new _s(C),E=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,E=c.fieldTransforms;return new BI(new qr(h),y,E)}class lf extends Iu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function _i(n,e,t){return new sg({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Hl extends Iu{_toFieldTransform(e){return new Nh(e.path,new xl)}isEqual(e){return e instanceof Hl}}class pT extends Iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_i(this,e,!0),r=this._a.map(u=>To(u,t)),i=new Yc(r);return new Nh(e.path,i)}isEqual(e){return this===e}}class gT extends Iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_i(this,e,!0),r=this._a.map(u=>To(u,t)),i=new lu(r);return new Nh(e.path,i)}isEqual(e){return this===e}}class VA extends Iu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ml(e.It,zD(e.It,this.wa));return new Nh(e.path,t)}isEqual(e){return this===e}}function HI(n,e,t,r){const i=n.da(1,e,t);P0("Data must be an object, but it was:",i,r);const u=[],c=qr.empty();Cl(r,(y,E)=>{const C=py(e,y,t);E=(0,Ot.m9)(E);const x=i.ca(C);if(E instanceof lf)u.push(C);else{const P=To(E,x);null!=P&&(u.push(C),c.set(C,P))}});const h=new _s(u);return new R0(c,h,i.fieldTransforms)}function dy(n,e,t,r,i,u){const c=n.da(1,e,t),h=[fy(e,r,t)],y=[i];if(u.length%2!=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)h.push(fy(e,u[P])),y.push(u[P+1]);const E=[],C=qr.empty();for(let P=h.length-1;P>=0;--P)if(!my(E,h[P])){const V=h[P];let H=y[P];H=(0,Ot.m9)(H);const se=c.ca(V);if(H instanceof lf)E.push(V);else{const de=To(H,se);null!=de&&(E.push(V),C.set(V,de))}}const x=new _s(E);return new R0(C,x,c.fieldTransforms)}function k0(n,e,t,r=!1){return To(t,n.da(r?4:3,e))}function To(n,e){if(hy(n=(0,Ot.m9)(n)))return P0("Unsupported field value:",e,n),zI(n,e);if(n instanceof Iu)return function(t,r){if(!$I(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let h=To(c,r.aa(u));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zD(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Vh(r.It,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vh(r.It,i)}}if(t instanceof ig)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ya)return{bytesValue:IE(r.It,t._byteString)};if(t instanceof xn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Jp(t)}`)}(n,e)}function zI(n,e){const t={};return eE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cl(n,(r,i)=>{const u=To(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function hy(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof ig||n instanceof ya||n instanceof xn||n instanceof Iu)}function P0(n,e,t){if(!hy(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Jp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function fy(n,e,t){if((e=(0,Ot.m9)(e))instanceof Eu)return e._internalPath;if("string"==typeof e)return py(n,e);throw gy("Field path arguments must be of type string or ",n,!1,void 0,t)}const mT=new RegExp("[~\\*/\\[\\]]");function py(n,e,t){if(e.search(mT)>=0)throw gy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Eu(...e.split("."))._internalPath}catch{throw gy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gy(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Pe(me.INVALID_ARGUMENT,h+n+y)}function my(n,e){return n.some(t=>t.isEqual(e))}class cf{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GI extends cf{data(){return super.data()}}function pd(n,e){return"string"==typeof e?py(n,e):e instanceof Eu?e._internalPath:e._delegate._internalPath}function yy(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}function bu(n,...e){for(const t of e)n=t._apply(n);return n}class yT extends _y{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=fd(e.firestore),r=function(i,u,c,h,y,E,C){let x;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){F0(C,E);const V=[];for(const H of C)V.push(QI(h,i,H));x={arrayValue:{values:V}}}else x=QI(h,i,C)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||F0(C,E),x=k0(c,"where",C,"in"===E||"not-in"===E);const P=ii.create(y,E,x);return function(V,H){if(H.dt()){const de=um(V);if(null!==de&&!de.isEqual(H.field))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${H.field.toString()}'`);const je=q_(V);null!==je&&U0(0,H.field,je)}const se=function(de,je){for(const tt of de.filters)if(je.indexOf(tt.op)>=0)return tt.op;return null}(V,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==se)throw new Pe(me.INVALID_ARGUMENT,se===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${se.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Si(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class df extends _y{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new au(i,u);return function(h,y){if(null===q_(h)){const E=um(h);null!==E&&U0(0,E,y.field)}}(r,c),c}(e._query,this.ma,this.pa);return new Si(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Al(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class N0 extends _y{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Si(e.firestore,e.converter,bp(e._query,this.Ia,this.Ta))}}class WI extends _y{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=L0(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KI extends _y{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=L0(e,this.type,this.Ea,this.Aa);return new Si(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function L0(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof cf)return function(i,u,c,h,y){if(!h)throw new Pe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const C of kh(i))if(C.field.isKeyField())E.push(Sl(u,h.key));else{const x=h.data.field(C.field);if(tE(x))throw new Pe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=C.field.canonicalString();throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(x)}return new vo(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=fd(n.firestore);return function(u,c,h,y,E,C){const x=u.explicitOrderBy;if(E.length>x.length)throw new Pe(me.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<E.length;V++){const H=E[V];if(x[V].field.isKeyField()){if("string"!=typeof H)throw new Pe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof H}`);if(!hE(u)&&-1!==H.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${H}' contains a slash.`);const se=u.path.child(on.fromString(H));if(!He.isDocumentKey(se))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const de=new He(se);P.push(Sl(c,de))}else{const se=k0(h,y,H);P.push(se)}}return new vo(P,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QI(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&-1!==t.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!He.isDocumentKey(r))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sl(n,new He(r))}if(t instanceof xn)return Sl(n,t._key);throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(t)}.`)}function F0(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function U0(n,e,t){if(!t.isEqual(e))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class V0{convertValue(e,t="none"){switch(Ch(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Cl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ig(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=N_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){const t=su(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);Bt(sC(r));const i=new Tl(r.get(1),r.get(3)),u=new He(r.popFirst(5));return i.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function vy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YI extends V0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}class gd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends cf{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hf extends _a{data(e={}){return super.data(e)}}class Du{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hf(this._firestore,this._userDataWriter,r.key,r,new gd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new hf(r._firestore,r._userDataWriter,c.doc.key,c.doc,new gd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new hf(r._firestore,r._userDataWriter,c.doc.key,c.doc,new gd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),E=u.indexOf(c.doc.key)),{type:JI(c.type),doc:h,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function XI(n,e){return n instanceof _a&&e instanceof _a?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Du&&e instanceof Du&&n._firestore===e._firestore&&I0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class md extends V0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function IT(n,e,t){n=tn(n,xn);const r=tn(n.firestore,Bn),i=vy(n.converter,e,t);return yd(r,[og(fd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Un.none())])}function bT(n,e,t,...r){n=tn(n,xn);const i=tn(n.firestore,Bn),u=fd(i);let c;return c="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Eu?dy(u,"updateDoc",n._key,e,t,r):HI(u,"updateDoc",n._key,e),yd(i,[c.toMutation(n._key,Un.exists(!0))])}function ag(n,...e){var t,r,i;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||S0(e[c])||(u=e[c],c++);const h={includeMetadataChanges:u.includeMetadataChanges};if(S0(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,E,C;if(n instanceof xn)E=tn(n.firestore,Bn),C=Rh(n._key.path),y={next:x=>{e[c]&&e[c](ff(E,n,x))},error:e[c+1],complete:e[c+2]};else{const x=tn(n,Si);E=tn(x.firestore,Bn),C=x._query;const P=new md(E);y={next:V=>{e[c]&&e[c](new Du(E,P,x,V))},error:e[c+1],complete:e[c+2]},yy(n._query)}return function(x,P,V,H){const se=new eg(H),de=new zm(P,se,V);return x.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Hm(yield uf(x),de)})),()=>{se.bc(),x.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Qv(yield uf(x),de)}))}}(hr(E),C,h,y)}function yd(n,e){return function(t,r){const i=new Mr;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function jC(n,e,t){return Wm.apply(this,arguments)}(yield oy(t),r,i)})),i.promise}(hr(n),e)}function ff(n,e,t){const r=t.docs.get(e._key),i=new md(n);return new _a(n,i,e._key,r,new gd(t.hasPendingWrites,t.fromCache),e.converter)}const ZA={maxAttempts:5};class wy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fd(e)}set(e,t,r){this._verifyNotCommitted();const i=Cu(e,this._firestore),u=vy(i.converter,t,r),c=og(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Un.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Cu(e,this._firestore);let c;return c="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Eu?dy(this._dataReader,"WriteBatch.update",u._key,t,r,i):HI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cu(e,this._firestore);return this._mutations=this._mutations.concat(new Xc(t._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cu(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new Pe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class TT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fd(e)}get(e){const t=Cu(e,this._firestore),r=new YI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const u=i[0];if(u.isFoundDocument())return new cf(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new cf(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Cu(e,this._firestore),u=vy(i.converter,t,r),c=og(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Cu(e,this._firestore);let c;return c="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Eu?dy(this._dataReader,"Transaction.update",u._key,t,r,i):HI(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Cu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cu(e,this._firestore),r=new md(this._firestore);return super.get(e).then(i=>new _a(this._firestore,r,t._key,i._document,new gd(!1,!1),t.converter))}}function B0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nb(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function kT(){if(!function FD(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ru=pi.SDK_VERSION,(0,pi._registerComponent)(new qa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Bn(new TD(t.getProvider("auth-internal")),new yp(t.getProvider("app-check-internal")),function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Pe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(h.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(Ww,"3.7.3",n),(0,pi.registerVersion)(Ww,"3.7.3","esm2017")}();class ug{constructor(e){this._delegate=e}static fromBase64String(e){return kT(),new ug(ya.fromBase64String(e))}static fromUint8Array(e){return nb(),new ug(ya.fromUint8Array(e))}toBase64(){return kT(),this._delegate.toBase64()}toUint8Array(){return nb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Iy(n){return function rb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XA{enableIndexedDbPersistence(e,t){return function OI(n,e){VI(n=tn(n,Bn));const t=hr(n),r=n._freezeSettings(),i=new Yp;return LI(t,i,new Xm(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cT(n){VI(n=tn(n,Bn));const e=hr(n),t=n._freezeSettings(),r=new Yp;return LI(e,r,new YC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UA(n){if(n._initialized&&!n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!qs.C())return Promise.resolve();const i=r+"main";yield qs.delete(i)}),function(r){return t.apply(this,arguments)})(zp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Qs{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Il("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function SI(n,e,t,r={}){var i;const u=(n=tn(n,Xp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Il("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=xr.MOCK_USER;else{c=(0,Ot.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xr(y)}n._authCredentials=new IA(new Kw(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function x0(n){return function sT(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield D0(n),t=yield kI(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i._u.delete(0),Do(i)}(t)}))}(hr(n=tn(n,Bn)))}(this._delegate)}disableNetwork(){return function FI(n){return function ng(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield D0(n),t=yield kI(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const u=Ze(i);u._u.add(0),yield Yh(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(hr(n=tn(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function A0(n){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function zC(n,e){return Kp.apply(this,arguments)}(yield oy(e),t)})),t.promise}(hr(n=tn(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function KA(n,e){return function T0(n,e){const t=new eg(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield uf(n),i=t,Ze(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield uf(n),i=t,void Ze(r).Ru.delete(i);var r,i}))}}(hr(n=tn(n,Bn)),S0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mf(this,AI(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ki(this,E0(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xi(this,function JC(n,e){if(n=tn(n,Xp),y0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new Al(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tb(n,e,t){n=tn(n,Bn);const r=Object.assign(Object.assign({},ZA),t);return function(i){if(i.maxAttempts<1)throw new Pe(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const h=new Mr;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const y=yield function PI(n){return tg(n).then(e=>e.datastore)}(i);new rT(i.asyncQueue,y,c,u,h).run()})),h.promise}(hr(n),i=>e(new TT(n,i)),r)}(this._delegate,t=>e(new ib(this,t)))}batch(){return hr(this._delegate),new Es(new wy(this._delegate,e=>yd(this._delegate,e)))}loadBundle(e){return function M0(n,e){const t=hr(n=tn(n,Bn)),r=new uy;return function rg(n,e,t,r){const i=function(u,c){let h;return h="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,E){if(y instanceof Uint8Array)return xI(y,E);if(y instanceof ArrayBuffer)return xI(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new MI(y,c);var y}(t,Qh(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function OA(n,e,t){const r=Ze(n);var i;(i=(0,fe.Z)(function*(u,c,h){try{const y=yield c.getMetadata();if(yield function(P,V){const H=Ze(P),se=Wr(V.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",de=>H.Ns.getBundleMetadata(de,V.id)).then(de=>!!de&&de.createTime.compareTo(se)>=0)}(u.localStore,y))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(Yv(y));const E=new FC(y,u.localStore,c.It);let C=yield c.mc();for(;C;){const P=yield E.Fu(C);P&&h._updateProgress(P),C=yield c.mc()}const x=yield E.complete();return yield wu(u,x.Lu,void 0),yield function(P,V){const H=Ze(P);return H.persistence.runTransaction("Save bundle","readwrite",se=>H.Ns.saveBundleMetadata(se,V))}(u.localStore,y),h._completeWith(x.progress),Promise.resolve(x.Bu)}catch(y){return Il("SyncEngine",`Loading bundle failed with ${y}`),h._failWith(y),Promise.resolve(new Set)}var P}),function(u,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oy(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dT(n,e){return function aT(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield sy(n),e)}))}(hr(n=tn(n,Bn)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xi(this,t):null)}}class by extends V0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ug(new ya(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ki.forKey(t,this.firestore,null)}}class ib{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new by(e)}get(e){const t=zl(e);return this._delegate.get(t).then(r=>new pf(this._firestore,new _a(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zl(e);return r?(B0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=zl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=zl(e);return this._delegate.delete(t),this}}class Es{constructor(e){this._delegate=e}set(e,t,r){const i=zl(e);return r?(B0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=zl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=zl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _d{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_d.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new _d(e,new by(e),t),i.set(t,u)),u}}_d.INSTANCES=new WeakMap;class Ki{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new by(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ki(t,new xn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Ki(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mf(this.firestore,AI(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof xn&&XC(this._delegate,e)}set(e,t){t=B0("DocumentReference.set",t);try{return t?IT(this._delegate,e,t):IT(this._delegate,e)}catch(r){throw Ai(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bT(this._delegate,e):bT(this._delegate,e,t,...r)}catch(i){throw Ai(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qA(n){return yd(tn(n.firestore,Bn),[new Xc(n._key,Un.none())])}(this._delegate)}onSnapshot(...e){const t=sb(e),r=Dy(e,i=>new pf(this.firestore,new _a(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ag(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function eb(n){n=tn(n,xn);const e=tn(n.firestore,Bn),t=hr(e),r=new md(e);return function oT(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,u,c){try{const h=yield function(y,E){const C=Ze(y);return C.persistence.runTransaction("read document","readonly",x=>C.localDocuments.getDocument(x,E))}(i,u);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Pe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const y=tf(h,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield sy(n),e,t);var r})),t.promise}(t,n._key).then(i=>new _a(e,r,n._key,i,new gd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function jA(n){n=tn(n,xn);const e=tn(n.firestore,Bn);return ay(hr(e),n._key,{source:"server"}).then(t=>ff(e,n,t))}(this._delegate):function ET(n){n=tn(n,xn);const e=tn(n.firestore,Bn);return ay(hr(e),n._key).then(t=>ff(e,n,t))}(this._delegate),t.then(r=>new pf(this.firestore,new _a(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ki(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function Ai(n,e,t){return n.message=n.message.replace(e,t),n}function sb(n){for(const e of n)if("object"==typeof e&&!Iy(e))return e;return{}}function Dy(n,e){var t,r;let i;return i=Iy(n[0])?n[0]:Iy(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return XI(this._delegate,e._delegate)}}class gf extends pf{data(e){const t=this._delegate.data(e);return function CD(n,e){n||dt()}(void 0!==t),t}}class xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new by(e)}where(e,t,r){try{return new xi(this.firestore,bu(this._delegate,function qI(n,e,t){const r=e,i=pd("where",n);return new yT(i,r,t)}(e,t,r)))}catch(i){throw Ai(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xi(this.firestore,bu(this._delegate,function _T(n,e="asc"){const t=e,r=pd("orderBy",n);return new df(r,t)}(e,t)))}catch(r){throw Ai(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xi(this.firestore,bu(this._delegate,function O0(n){return w0("limit",n),new N0("limit",n,"F")}(e)))}catch(t){throw Ai(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xi(this.firestore,bu(this._delegate,function BA(n){return w0("limitToLast",n),new N0("limitToLast",n,"L")}(e)))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xi(this.firestore,bu(this._delegate,function $A(...n){return new WI("startAt",n,!0)}(...e)))}catch(t){throw Ai(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xi(this.firestore,bu(this._delegate,function vT(...n){return new WI("startAfter",n,!1)}(...e)))}catch(t){throw Ai(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xi(this.firestore,bu(this._delegate,function wT(...n){return new KI("endBefore",n,!1)}(...e)))}catch(t){throw Ai(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xi(this.firestore,bu(this._delegate,function ZI(...n){return new KI("endAt",n,!0)}(...e)))}catch(t){throw Ai(t,"endAt()","Query.endAt()")}}isEqual(e){return I0(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zA(n){n=tn(n,Si);const e=tn(n.firestore,Bn),t=hr(e),r=new md(e);return function ma(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,u,c){try{const h=yield Gp(i,u,!0),y=new mI(u,h.Hi),E=y.Wu(h.documents),C=y.applyChanges(E,!1);c.resolve(C.snapshot)}catch(h){const y=tf(h,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield sy(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Du(e,r,n,i))}(this._delegate):"server"===e?.source?function GA(n){n=tn(n,Si);const e=tn(n.firestore,Bn),t=hr(e),r=new md(e);return NI(t,n._query,{source:"server"}).then(i=>new Du(e,r,n,i))}(this._delegate):function HA(n){n=tn(n,Si);const e=tn(n.firestore,Bn),t=hr(e),r=new md(e);return yy(n._query),NI(t,n._query).then(i=>new Du(e,r,n,i))}(this._delegate),t.then(r=>new Cy(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sb(e),r=Dy(e,i=>new Cy(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ag(this._delegate,t,r)}withConverter(e){return new xi(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}class ob{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ob(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gf(this._firestore,r))})}isEqual(e){return XI(this._delegate,e._delegate)}}class mf extends xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ki(this.firestore,e):null}doc(e){try{return new Ki(this.firestore,void 0===e?E0(this._delegate):E0(this._delegate,e))}catch(t){throw Ai(t,"doc()","CollectionReference.doc()")}}add(e){return function WA(n,e){const t=tn(n.firestore,Bn),r=E0(n),i=vy(n.converter,e);return yd(t,[og(fd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ki(this.firestore,t))}isEqual(e){return XC(this._delegate,e._delegate)}withConverter(e){return new mf(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function zl(n){return tn(n,xn)}class j0{constructor(...e){this._delegate=new Eu(...e)}static documentId(){return new j0(zn.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ST(){return new Hl("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tu(e)}static delete(){const e=function QA(){return new lf("deleteField")}();return e._methodName="FieldValue.delete",new Tu(e)}static arrayUnion(...e){const t=function AT(...n){return new pT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tu(t)}static arrayRemove(...e){const t=function xT(...n){return new gT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tu(t)}static increment(e){const t=function Ey(n){return new VA("increment",n)}(e);return t._methodName="FieldValue.increment",new Tu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gl={Firestore:Qs,GeoPoint:ig,Timestamp:Ln,Blob:ug,Transaction:ib,WriteBatch:Es,DocumentReference:Ki,DocumentSnapshot:pf,Query:xi,QueryDocumentSnapshot:gf,QuerySnapshot:Cy,CollectionReference:mf,FieldPath:j0,FieldValue:Tu,setLogLevel:function $0(n){!function A_(n){$i.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function H0(n){(function ab(n,e){n.INTERNAL.registerComponent(new qa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Gl)))})(n,(e,t)=>new Qs(e,t,new XA)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Ko.Z);var Kr=L(7579),PT=L(6451),z0=L(5363),G0=L(8421);function kr(n,e){return(0,Fr.e)((t,r)=>{let i=null,u=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Zn.x)(r,y=>{i?.unsubscribe();let E=0;const C=u++;(0,G0.Xf)(n(y,C)).subscribe(i=(0,Zn.x)(r,x=>r.next(e?e(y,x,C,E++):x),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var NT=L(6063);class OT extends Kr.x{constructor(e=1/0,t=1/0,r=NT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let h=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)h=y;h&&r.splice(0,h+1)}}}var ub=L(3099);function LT(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ub.B)({connector:()=>new OT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const lg=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ql=L(515);function Ty(n){return n<=0?()=>ql.E:(0,Fr.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yf(n){return(0,Fr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function q0(n=cb){return(0,Fr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cb(){return new lg}function va(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((i,u)=>n(i,u,r)):fi.y,Ty(1),t?yf(e):q0(()=>new lg))}var Sy=L(576);function W0(n,e){return(0,Sy.m)(e)?kr(()=>n,e):kr(()=>n)}var _f=L(9468);L(5867);const Z0=new Map,hg={activated:!1,tokenObservers:[]},VT={initialized:!1,enabled:!1};function si(n){return Z0.get(n)||Object.assign({},hg)}function wa(){return VT}class My{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function sx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Zi=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ew(n){if(!si(n).activated)throw Zi.create("use-before-activation",{appName:n.name})}function nw(n,e){return rw.apply(this,arguments)}function rw(){return rw=(0,fe.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const V=yield c.getHeartbeatsHeader();V&&(u["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:u};let y,E;try{y=yield fetch(n,h)}catch(V){throw Zi.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==y.status)throw Zi.create("fetch-status-error",{httpStatus:y.status});try{E=yield y.json()}catch(V){throw Zi.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const C=E.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw Zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const x=1e3*Number(C[1]),P=Date.now();return{token:E.token,expireTimeMillis:P+x,issuedAtTimeMillis:P}}),rw.apply(this,arguments)}function mb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vf="firebase-app-check-store";let iw=null;function sw(){return iw||(iw=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(Zi.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(vf,{keyPath:"compositeKey"})}}catch(r){e(Zi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),iw)}function aw(){return aw=(0,fe.Z)(function*(n,e){const r=(yield sw()).transaction(vf,"readwrite"),u=r.objectStore(vf).put({compositeKey:n,value:e});return new Promise((c,h)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var E;h(Zi.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})}),aw.apply(this,arguments)}const Py=new gi.Yd("@firebase/app-check");function vb(n,e){return(0,Ot.hl)()?function HT(n,e){return function GT(n,e){return aw.apply(this,arguments)}(function qT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Py.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function KT(){return wa().enabled}function ZT(){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,fe.Z)(function*(){const n=wa();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Eb.apply(this,arguments)}const cx={error:"UNKNOWN_ERROR"};function s(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function o(n){return a.apply(this,arguments)}function a(){return a=(0,fe.Z)(function*(n,e=!1){const t=n.app;ew(t);const r=si(t);let u,i=r.token;if(i&&!b(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(b(y)?i=y:yield vb(t,void 0))}if(!e&&i&&b(i))return{token:i.token};let h,c=!1;if(KT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nw(mb(t,yield ZT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield vb(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield si(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Py.warn(y.message):Py.error(y),u=y}return i?u?h=b(i)?{token:i.token,internalError:u}:S(u):(h={token:i.token},r.token=i,yield vb(t,i)):h=S(u),c&&I(t,h),h}),a.apply(this,arguments)}function d(n,e){const t=si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function g(n){const{app:e}=n,t=si(e);let r=t.tokenRefresher;r||(r=function v(n){const{app:e}=n;return new My((0,fe.Z)(function*(){let r;if(r=si(e).token?yield o(n,!0):yield o(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function I(n,e){const t=si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function b(n){return n.expireTimeMillis-Date.now()>0}function S(n){return{token:s(cx),error:n}}class R{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=si(this.app);for(const t of e)d(this.app,t.next);return Promise.resolve()}}const dx="app-check-internal";!function Pk(){(0,pi._registerComponent)(new qa.wA("app-check",n=>function O(n,e){return new R(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(dx).initialize()})),(0,pi._registerComponent)(new qa.wA(dx,n=>function G(n){return{getToken:e=>o(n,e),addTokenListener:e=>function l(n,e,t,r){const{app:i}=n,u=si(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&b(u.token)){const h=u.token;Promise.resolve().then(()=>{t({token:h.token}),g(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>g(n))}(n,"INTERNAL",e),removeTokenListener:e=>d(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pi.registerVersion)("@firebase/app-check","0.5.17")}();class bb{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var fx=L(127);const px=new p.OlP("angularfire2.auth.use-emulator"),gx=new p.OlP("angularfire2.auth.settings"),mx=new p.OlP("angularfire2.auth.tenant-id"),yx=new p.OlP("angularfire2.auth.langugage-code"),_x=new p.OlP("angularfire2.auth.use-device-language"),vx=new p.OlP("angularfire.auth.persistence"),wx=(n,e,t,r,i,u,c,h)=>(0,yr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[E,C]of Object.entries(c))y.settings[E]=C;return h&&y.setPersistence(h),y},[t,r,i,u,c,h]);let Ex=(()=>{class n{constructor(t,r,i,u,c,h,y,E,C,x,P,V){const H=new Kr.x,se=Je(void 0).pipe((0,z0.Q)(c.outsideAngular),kr(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1277)))),(0,mt.U)(()=>(0,yr.on)(t,u,r)),(0,mt.U)(de=>wx(de,u,h,E,C,x,y,P)),LT({bufferSize:1,refCount:!1}));if(Dr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{se.pipe(va()).subscribe();const je=se.pipe(kr(Ke=>Ke.getRedirectResult().then(Ct=>Ct,()=>null)),Dn.iC,LT({bufferSize:1,refCount:!1})),tt=se.pipe(kr(Ke=>new ls.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Ke.onAuthStateChanged(At=>Ct.next(At),At=>Ct.error(At),()=>Ct.complete()))})))),Qe=se.pipe(kr(Ke=>new ls.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Ke.onIdTokenChanged(At=>Ct.next(At),At=>Ct.error(At),()=>Ct.complete()))}))));this.authState=je.pipe(W0(tt),(0,_f.R)(c.outsideAngular),(0,z0.Q)(c.insideAngular)),this.user=je.pipe(W0(Qe),(0,_f.R)(c.outsideAngular),(0,z0.Q)(c.insideAngular)),this.idToken=this.user.pipe(kr(Ke=>Ke?(0,un.D)(Ke.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(kr(Ke=>Ke?(0,un.D)(Ke.getIdTokenResult()):Je(null))),this.credential=(0,PT.T)(je,H,this.authState.pipe(ti(Ke=>!Ke))).pipe((0,mt.U)(Ke=>Ke?.user?Ke:null),(0,_f.R)(c.outsideAngular),(0,z0.Q)(c.insideAngular))}return(0,yr.pX)(this,se,u,{spy:{apply:(de,je,tt)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&tt.then(Qe=>H.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yr.Dh),p.LFG(yr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Dn.HU),p.LFG(px,8),p.LFG(gx,8),p.LFG(mx,8),p.LFG(yx,8),p.LFG(_x,8),p.LFG(vx,8),p.LFG(bb,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ix(n,e){return function Vk(n,e=po.z){return new ls.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function XT(n,e){return Ix(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function Db(n,e){return XT(n,e).pipe(Wo(void 0),cs(),(0,mt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const y=i.find(C=>C.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),u}))}function bx(n,e,t){return Db(n,t).pipe(ds((r,i)=>function $k(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function ll(n,e=fi.y){return n=n??Ga,(0,Fr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Zn.x)(r,c=>{const h=e(c);(u||!n(i,h))&&(u=!1,i=h,r.next(c))}))})}(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function eS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Dx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Cx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Db(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wo(void 0),cs(),ti(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ds((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return XT(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new Tx(this.ref.doc(e),this.afs)}}class Tx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=xx(r,t);return new Cx(i,u,this.afs)}snapshotChanges(){return function Bk(n,e){return Ix(n,e).pipe(Wo(void 0),cs(),(0,mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(Dn.iC)}}class Hk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Db(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ti(t=>t.length>0),Dn.iC):Db(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ds((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return XT(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Dn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Dn.iC)}}const Sx=new p.OlP("angularfire2.enableFirestorePersistence"),Ax=new p.OlP("angularfire2.firestore.persistenceSettings"),zk=new p.OlP("angularfire2.firestore.settings"),Gk=new p.OlP("angularfire2.firestore.use-emulator");function xx(n,e=(t=>t)){return{query:e(n),ref:n}}let Mx=(()=>{class n{constructor(t,r,i,u,c,h,y,E,C,x,P,V,H,se,de,je,tt){this.schedulers=y;const Qe=(0,yr.on)(t,h,r),Ke=C;x&&wx(Qe,h,P,H,se,de,V,je),[this.firestore,this.persistenceEnabled$]=(0,yr.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Ct=h.runOutsideAngular(()=>Qe.firestore());if(u&&Ct.settings(u),Ke&&Ct.useEmulator(...Ke),i&&!Dr(c)){const At=()=>{try{return(0,un.D)(Ct.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(rn){return typeof console<"u"&&console.warn(rn),Je(!1)}};return[Ct,h.runOutsideAngular(At)]}return[Ct,Je(!1)]},[u,Ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=xx(i,r),h=this.schedulers.ngZone.run(()=>u);return new Cx(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new Hk(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Tx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yr.Dh),p.LFG(yr.xv,8),p.LFG(Sx,8),p.LFG(zk,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Dn.HU),p.LFG(Ax,8),p.LFG(Gk,8),p.LFG(Ex,8),p.LFG(px,8),p.LFG(gx,8),p.LFG(mx,8),p.LFG(yx,8),p.LFG(_x,8),p.LFG(vx,8),p.LFG(bb,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qk=(()=>{class n{constructor(){fx.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:Ax,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Mx]}),n})();const Rx="firebasestorage.googleapis.com",kx="storageBucket";class wr extends Ot.ZR{constructor(e,t,r=0){super(tS(e),`Firebase Storage: ${t} (${tS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function tS(n){return"storage/"+n}function nS(){return new wr("unknown","An unknown error occurred, please check the error payload for server response.")}function Px(){return new wr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Nx(){return new wr("canceled","User canceled the upload/download.")}function Ox(){return new wr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vy(n){return new wr("invalid-argument",n)}function Lx(){return new wr("app-deleted","The Firebase app was deleted.")}function Fx(n){return new wr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hw(n,e){return new wr("invalid-format","String does not match format '"+n+"': "+e)}function fw(n){throw new wr("internal-error","Internal error: "+n)}class Qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qi.makeFromUrl(e,t)}catch{return new Qi(e,"")}if(""===r.path)return r;throw function rP(n){return new wr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Ke){Ke.path_=decodeURIComponent(Ke.path)}const x=t.replace(/[.]/g,"\\."),Qe=[{regex:h,indices:{bucket:1,path:3},postModify:function u(Ke){"/"===Ke.path.charAt(Ke.path.length-1)&&(Ke.path_=Ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===Rx?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Ke=0;Ke<Qe.length;Ke++){const Ct=Qe[Ke],At=Ct.regex.exec(e);if(At){let $r=At[Ct.indices.path];$r||($r=""),r=new Qi(At[Ct.indices.bucket],$r),Ct.postModify(r);break}}if(null==r)throw function nP(n){return new wr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class uP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Cb(n){return"string"==typeof n||n instanceof String}function Ux(n){return rS()&&n instanceof Blob}function rS(){return typeof Blob<"u"&&!(0,Ot.UG)()}function iS(n,e,t,r){if(r<e)throw Vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vy(`Invalid value for '${n}'. Expected ${t} or less.`)}function wd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Vx(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(wf||(wf={})),wf))();function Bx(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class pP{constructor(e,t,r,i,u,c,h,y,E,C,x,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=C,this.connectionFactory_=x,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,H)=>{this.resolve_=V,this.reject_=H,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(h,h.getResponse());!function dP(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==h){const y=nS();y.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,y):y)}else c(i.canceled?this.appDelete_?Lx():Nx():Px())};this.canceled_?t(0,new Tb(!1,null,!0)):this.backoffId_=function lP(n,e,t){let r=1,i=null,u=null,c=!1,h=0;function y(){return 2===h}let E=!1;function C(...de){E||(E=!0,e.apply(null,de))}function x(de){i=setTimeout(()=>{i=null,n(V,y())},de)}function P(){u&&clearTimeout(u)}function V(de,...je){if(E)return void P();if(de)return P(),void C.call(null,de,...je);if(y()||c)return P(),void C.call(null,de,...je);let Qe;r<64&&(r*=2),1===h?(h=2,Qe=0):Qe=1e3*(r+Math.random()),x(Qe)}let H=!1;function se(de){H||(H=!0,P(),!E&&(null!==i?(de||(h=2),clearTimeout(i),x(0)):de||(h=1)))}return x(0),u=setTimeout(()=>{c=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new Tb(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const h=u.getErrorCode()===wf.NO_ERROR,y=u.getStatus();if((!h||Bx(y,this.additionalRetryCodes_))&&this.retry){const C=u.getErrorCode()===wf.ABORT;return void r(!1,new Tb(!1,null,C))}const E=-1!==this.successCodes_.indexOf(y);r(!0,new Tb(E,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function cP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Tb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function EP(...n){const e=function wP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(rS())return new Blob(n);throw new wr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const So={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sS{constructor(e,t){this.data=e,this.contentType=t||null}}function oS(n,e){switch(n){case So.RAW:return new sS($x(e));case So.BASE64:case So.BASE64URL:return new sS(jx(n,e));case So.DATA_URL:return new sS(function CP(n){const e=new Hx(n);return e.base64?jx(So.BASE64,e.rest):function DP(n){let e;try{e=decodeURIComponent(n)}catch{throw hw(So.DATA_URL,"Malformed data URL.")}return $x(e)}(e.rest)}(e),function TP(n){return new Hx(n).contentType}(e))}throw nS()}function $x(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function jx(n,e){switch(n){case So.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw hw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case So.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw hw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function bP(n){if(typeof atob>"u")throw function aP(n){return new wr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:hw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Hx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw hw(So.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function SP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Wl{constructor(e,t){let r=0,i="";Ux(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ux(this.data_)){const i=function IP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Wl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Wl(r,!0)}}static getBlob(...e){if(rS()){const t=e.map(r=>r instanceof Wl?r.data_:r);return new Wl(EP.apply(null,t))}{const t=e.map(c=>Cb(c)?oS(So.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[u++]=c[h]}),new Wl(i,!0)}}uploadData(){return this.data_}}function aS(n){let e;try{e=JSON.parse(n)}catch{return null}return function fP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function zx(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function MP(n,e){return e}class Is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||MP}}let Sb=null;function pw(){if(Sb)return Sb;const n=[];n.push(new Is("bucket")),n.push(new Is("generation")),n.push(new Is("metageneration")),n.push(new Is("name","fullPath",!0));const t=new Is("name");t.xform=function e(u,c){return function RP(n){return!Cb(n)||n.length<2?n:zx(n)}(c)},n.push(t);const i=new Is("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Is("timeCreated")),n.push(new Is("updated")),n.push(new Is("md5Hash",null,!0)),n.push(new Is("cacheControl",null,!0)),n.push(new Is("contentDisposition",null,!0)),n.push(new Is("contentEncoding",null,!0)),n.push(new Is("contentLanguage",null,!0)),n.push(new Is("contentType",null,!0)),n.push(new Is("metadata","customMetadata",!0)),Sb=n,Sb}function Gx(n,e,t){const r=aS(e);return null===r?null:function PP(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function kP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Qi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function uS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const qx="prefixes";class Kl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zl(n){if(!n)throw nS()}function Ab(n,e){return function t(r,i){const u=Gx(n,i,e);return Zl(null!==u),u}}function By(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function eP(){return new wr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Xk(){return new wr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Jk(n){return new wr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function tP(n){return new wr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function gw(n){const e=By(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function Yk(n){return new wr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function Kx(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Kl(i,"GET",Ab(n,t),c);return h.errorHandler=gw(e),h}function VP(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const h=wd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,C=new Kl(h,"GET",function FP(n,e){return function t(r,i){const u=function LP(n,e,t){const r=aS(t);return null===r?null:function OP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[qx])for(const i of t[qx]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Qi(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Qi(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Zl(null!==u),u}}(n,e.bucket),E);return C.urlParams=u,C.errorHandler=By(e),C}function Qx(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function HP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function lS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zl(!1)}return Zl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const WP={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cS(n){switch(n){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class KP{constructor(e,t,r){if(function hP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function $y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class QP extends class ZP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw fw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Su(){return new QP}class eM{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=pw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(Bx(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Px()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function zP(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=Qx(e,r,i),h={name:c.fullPath},y=wd(u,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=uS(c,t),H=new Kl(y,"POST",function V(se){let de;lS(se);try{de=se.getResponseHeader("X-Goog-Upload-URL")}catch{Zl(!1)}return Zl(Cb(de)),de},n.maxUploadRetryTime);return H.urlParams=h,H.headers=C,H.body=x,H.errorHandler=By(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function GP(n,e,t,r){const y=new Kl(t,"POST",function u(E){const C=lS(E,["active","final"]);let x=null;try{x=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zl(!1)}x||Zl(!1);const P=Number(x);return Zl(!isNaN(P)),new xb(P,r.size(),"final"===C)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=By(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Su,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function qP(n,e,t,r,i,u,c,h){const y=new xb(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function sP(){return new wr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=y.total-y.current;let C=E;i>0&&(C=Math.min(C,i));const x=y.current;let V="";V=0===C?"finalize":E===C?"upload, finalize":"upload";const H={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${y.current}`},se=r.slice(x,x+C);if(null===se)throw Ox();const Qe=new Kl(t,"POST",function de(Ke,Ct){const At=lS(Ke,["active","final"]),rn=y.current+C,$r=r.size();let Mo;return Mo="final"===At?Ab(e,u)(Ke,Ct):null,new xb(rn,$r,"final"===At,Mo)},e.maxUploadRetryTime);return Qe.headers=H,Qe.body=se.uploadData(),Qe.progressCallback=h||null,Qe.errorHandler=By(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Su,i,u,!1);this._request=h,h.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Kx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Yx(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function h(){let Qe="";for(let Ke=0;Ke<2;Ke++)Qe+=Math.random().toString().slice(2);return Qe}();c["Content-Type"]="multipart/related; boundary="+y;const E=Qx(e,r,i),C=uS(E,t),V=Wl.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+y+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===V)throw Ox();const H={name:E.fullPath},se=wd(u,n.host,n._protocol),je=n.maxUploadRetryTime,tt=new Kl(se,"POST",Ab(n,t),je);return tt.urlParams=H,tt.headers=c,tt.body=V.uploadData(),tt.errorHandler=By(e),tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Nx(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new KP(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cS(this._state)){case bs.SUCCESS:$y(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:$y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cS(this._state)){case bs.RUNNING:case bs.PAUSED:e.next&&$y(e.next.bind(e,this.snapshot))();break;case bs.SUCCESS:e.complete&&$y(e.complete.bind(e))();break;default:e.error&&$y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fg{constructor(e,t){this._service=e,this._location=t instanceof Qi?t:Qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fg(e,t)}get root(){const e=new Qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zx(this._location.path)}get storage(){return this._service}get parent(){const e=function AP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Qi(this._location.bucket,e);return new fg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Fx(e)}}function nM(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,fe.Z)(function*(n,e,t){const i=yield rM(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield nM(n,e,i.nextPageToken))}),dS.apply(this,arguments)}function rM(n,e){null!=e&&"number"==typeof e.maxResults&&iS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=VP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Su)}function u1(n){n._throwIfRoot("getDownloadURL");const e=function BP(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Kl(i,"GET",function UP(n,e){return function t(r,i){const u=Gx(n,i,e);return Zl(null!==u),function NP(n,e,t,r){const i=aS(e);if(null===i||!Cb(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(E=>{const x=n.fullPath;return wd("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+Vx({alt:"media",token:E})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=gw(e),h}(n.storage,n._location,pw());return n.storage.makeRequestWithTokens(e,Su).then(t=>{if(null===t)throw function oP(){return new wr("no-download-url","The given file does not have any download URLs.")}();return t})}function iM(n,e){const t=function xP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Qi(n._location.bucket,t);return new fg(n.storage,r)}function sM(n,e){if(n instanceof hS){const t=n;if(null==t._bucket)throw function iP(){return new wr("no-default-bucket","No default bucket found. Did you set the '"+kx+"' property when initializing the app?")}();const r=new fg(t,t._bucket);return null!=e?sM(r,e):r}return void 0!==e?iM(n,e):n}function h1(n,e){if(e&&function c1(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hS)return function d1(n,e){return new fg(n,e)}(n,e);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}return sM(n,e)}function oM(n,e){const t=e?.[kx];return null==t?null:Qi.makeFromBucketSpec(t,n)}class hS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=Rx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Qi.makeFromBucketSpec(i,this._host):oM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Qi.makeFromBucketSpec(this._url,e):oM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new uP(Lx());{const c=function vP(n,e,t,r,i,u,c=!0){const h=Vx(n.urlParams),y=n.url+h,E=Object.assign({},n.headers);return function yP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function gP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function mP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,u),function _P(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new pP(y,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const aM="@firebase/storage";function cM(n,e){return h1(n=(0,Ot.m9)(n),e)}function I1(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hS(t,r,i,e,pi.SDK_VERSION)}!function b1(){(0,pi._registerComponent)(new qa.wA("storage",I1,"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(aM,"0.9.14",""),(0,pi.registerVersion)(aM,"0.9.14","esm2017")}();class Mb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Mb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Mb(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new Mb(c,this,this._ref)):{next:t.next?c=>t.next(new Mb(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class fM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ed(e,this._service))}get items(){return this._delegate.items.map(e=>new Ed(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ed{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function E1(n,e){return iM(n,e)}(this._delegate,e);return new Ed(t,this.storage)}get root(){return new Ed(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ed(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new hM(function p1(n,e,t){return function r1(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eM(n,new Wl(e),t)}(n=(0,Ot.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=So.RAW,r){this._throwIfRoot("putString");const i=oS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new hM(new eM(this._delegate,new Wl(i.data,!0),u),this)}listAll(){return function _1(n){return function s1(n){const e={prefixes:[],items:[]};return nM(n,e).then(()=>e)}(n=(0,Ot.m9)(n))}(this._delegate).then(e=>new fM(e,this.storage))}list(e){return function y1(n,e){return rM(n=(0,Ot.m9)(n),e)}(this._delegate,e||void 0).then(t=>new fM(t,this.storage))}getMetadata(){return function g1(n){return function o1(n){n._throwIfRoot("getMetadata");const e=Kx(n.storage,n._location,pw());return n.storage.makeRequestWithTokens(e,Su)}(n=(0,Ot.m9)(n))}(this._delegate)}updateMetadata(e){return function m1(n,e){return function a1(n,e){n._throwIfRoot("updateMetadata");const t=function $P(n,e,t,r){const u=wd(e.fullServerUrl(),n.host,n._protocol),h=uS(t,r),E=n.maxOperationRetryTime,C=new Kl(u,"PATCH",Ab(n,r),E);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=gw(e),C}(n.storage,n._location,e,pw());return n.storage.makeRequestWithTokens(t,Su)}(n=(0,Ot.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function v1(n){return u1(n=(0,Ot.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function w1(n){return function l1(n){n._throwIfRoot("deleteObject");const e=function jP(n,e){const r=wd(e.fullServerUrl(),n.host,n._protocol),h=new Kl(r,"DELETE",function c(y,E){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=gw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Su)}(n=(0,Ot.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Fx(e)}}class pM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gM(e))throw Vy("ref() expected a child path but got a URL, use refFromURL instead.");return new Ed(cM(this._delegate,e),this)}refFromURL(e){if(!gM(e))throw Vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qi.makeFromUrl(e,this._delegate.host)}catch{throw Vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ed(cM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function dM(n,e,t,r={}){!function f1(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Ot.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function gM(n){return/^[A-Za-z]+:\/\//.test(n)}function S1(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new pM(t,r)}function mM(n){const e=function x1(n){return new ls.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function Wk(n,e=po.z){return(0,Fr.e)((t,r)=>{let i=null,u=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const E=u;u=null,r.next(E)}};function y(){const E=c+n,C=e.now();if(C<E)return i=this.schedule(void 0,E-C),void r.add(i);h()}t.subscribe((0,Zn.x)(r,E=>{u=E,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Rb(n){return{getDownloadURL:()=>Je(void 0).pipe(Dn.fc,kr(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>Je(void 0).pipe(Dn.fc,kr(()=>n.getMetadata()),Dn.iC),delete:()=>(0,un.D)(n.delete()),child:e=>Rb(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>mM(n.put(e,t)),putString:(e,t,r)=>mM(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}!function A1(n){const e={TaskState:bs,TaskEvent:WP,StringFormat:So,Storage:pM,Reference:Ed};n.INTERNAL.registerComponent(new qa.wA("storage-compat",S1,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Ko.Z);const M1=new p.OlP("angularfire2.storageBucket"),R1=new p.OlP("angularfire2.storage.maxUploadRetryTime"),k1=new p.OlP("angularfire2.storage.maxOperationRetryTime"),P1=new p.OlP("angularfire2.storage.use-emulator");let N1=(()=>{class n{constructor(t,r,i,u,c,h,y,E,C,x){const P=(0,yr.on)(t,c,r);this.storage=(0,yr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=c.runOutsideAngular(()=>P.storage(i||void 0)),H=C;return H&&V.useEmulator(...H),y&&V.setMaxUploadRetryTime(y),E&&V.setMaxOperationRetryTime(E),V},[y,E])}ref(t){return Rb(this.storage.ref(t))}refFromURL(t){return Rb(this.storage.refFromURL(t))}upload(t,r,i){return Rb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yr.Dh),p.LFG(yr.xv,8),p.LFG(M1,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Dn.HU),p.LFG(R1,8),p.LFG(k1,8),p.LFG(P1,8),p.LFG(bb,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),O1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),L1=(()=>{class n{constructor(){fx.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[N1],imports:[O1]}),n})();class yM{}const Id="*";function _M(n,e){return{type:7,name:n,definitions:e,options:{}}}function kb(n,e=null){return{type:4,styles:e,timings:n}}function vM(n,e=null){return{type:2,steps:n,options:e}}function jy(n){return{type:6,styles:n,offset:null}}function Pb(n,e,t){return{type:0,name:n,styles:e,options:t}}function Nb(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function wM(n){Promise.resolve().then(n)}class mw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?wM(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function IM(n){return new p.vHH(3e3,!1)}function _N(){return typeof window<"u"&&typeof window.document<"u"}function pS(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ef(n){switch(n.length){case 0:return new mw;case 1:return n[0];default:return new EM(n)}}function bM(n,e,t,r,i=new Map,u=new Map){const c=[],h=[];let y=-1,E=null;if(r.forEach(C=>{const x=C.get("offset"),P=x==y,V=P&&E||new Map;C.forEach((H,se)=>{let de=se,je=H;if("offset"!==se)switch(de=e.normalizePropertyName(de,c),je){case"!":je=i.get(se);break;case Id:je=u.get(se);break;default:je=e.normalizeStyleValue(se,de,je,c)}V.set(de,je)}),P||h.push(V),E=V,y=x}),c.length)throw function oN(n){return new p.vHH(3502,!1)}();return h}function gS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&mS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&mS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&mS(t,"destroy",n)))}}function mS(n,e,t){const u=yS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function yS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Ao(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function DM(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let _S=(n,e)=>!1,CM=(n,e,t)=>[],TM=null;function vS(n){const e=n.parentNode||n.host;return e===TM?null:e}(pS()||typeof Element<"u")&&(_N()?(TM=(()=>document.documentElement)(),_S=(n,e)=>{for(;e;){if(e===n)return!0;e=vS(e)}return!1}):_S=(n,e)=>n.contains(e),CM=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let pg=null,SM=!1;const AM=_S,xM=CM;let MM=(()=>{class n{validateStyleProperty(t){return function wN(n){pg||(pg=function EN(){return typeof document<"u"?document.body:null}()||{},SM=!!pg.style&&"WebkitAppearance"in pg.style);let e=!0;return pg.style&&!function vN(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pg.style,!e&&SM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in pg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return AM(t,r)}getParentElement(t){return vS(t)}query(t,r,i){return xM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,h=[],y){return new mw(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),wS=(()=>{class n{}return n.NOOP=new MM,n})();const ES="ng-enter",Ob="ng-leave",Lb="ng-trigger",Fb=".ng-trigger",kM="ng-animating",IS=".ng-animating";function bd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bS(parseFloat(e[1]),e[2])}function bS(n,e){return"s"===e?1e3*n:n}function Ub(n,e,t){return n.hasOwnProperty("duration")?n:function DN(n,e,t){let i,u=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(IM()),{duration:0,delay:0,easing:""};i=bS(parseFloat(h[1]),h[2]);const y=h[3];null!=y&&(u=bS(parseFloat(y),h[4]));const E=h[5];E&&(c=E)}else i=n;if(!t){let h=!1,y=e.length;i<0&&(e.push(function U1(){return new p.vHH(3100,!1)}()),h=!0),u<0&&(e.push(function V1(){return new p.vHH(3101,!1)}()),h=!0),h&&e.splice(y,0,IM())}return{duration:i,delay:u,easing:c}}(n,e,t)}function yw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function PM(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function If(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function OM(n,e,t){return t?e+":"+t+";":""}function LM(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=OM(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=OM(0,AN(t),n.style[t]));n.setAttribute("style",e)}function Ql(n,e,t){n.style&&(e.forEach((r,i)=>{const u=CS(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),pS()&&LM(n))}function gg(n,e){n.style&&(e.forEach((t,r)=>{const i=CS(r);n.style[i]=""}),pS()&&LM(n))}function _w(n){return Array.isArray(n)?1==n.length?n[0]:vM(n):n}const DS=new RegExp("{{\\s*(.+?)\\s*}}","g");function FM(n){let e=[];if("string"==typeof n){let t;for(;t=DS.exec(n);)e.push(t[1]);DS.lastIndex=0}return e}function vw(n,e,t){const r=n.toString(),i=r.replace(DS,(u,c)=>{let h=e[c];return null==h&&(t.push(function $1(n){return new p.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function Vb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const SN=/-+([a-z0-9])/g;function CS(n){return n.replace(SN,(...e)=>e[1].toUpperCase())}function AN(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function j1(n){return new p.vHH(3004,!1)}()}}function UM(n,e){return window.getComputedStyle(n)[e]}function NN(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ON(n,e,t){if(":"==n[0]){const y=function LN(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function nN(n){return new p.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function tN(n){return new p.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(VM(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(VM(c,i))}(r,t,e)):t.push(n),t}const Hb=new Set(["true","1"]),zb=new Set(["false","0"]);function VM(n,e){const t=Hb.has(n)||zb.has(n),r=Hb.has(e)||zb.has(e);return(i,u)=>{let c="*"==n||n==i,h="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?Hb.has(n):zb.has(n)),!h&&r&&"boolean"==typeof u&&(h=u?Hb.has(e):zb.has(e)),c&&h}}const FN=new RegExp("s*:selfs*,?","g");function TS(n,e,t,r){return new UN(n).build(e,t,r)}class UN{constructor(e){this._driver=e}build(e,t,r){const i=new $N(t);return this._resetContextStyleTimingState(i),xo(this,_w(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function z1(){return new p.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const y=h,E=y.name;E.toString().split(/\s*,\s*/).forEach(C=>{y.name=C,u.push(this.visitState(y,t))}),y.name=E}else if(1==h.type){const y=this.visitTransition(h,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function G1(){return new p.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(y=>{FM(y).forEach(E=>{c.hasOwnProperty(E)||u.add(E)})})}),u.size&&(Vb(u.values()),t.errors.push(function q1(n,e){return new p.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=xo(this,_w(e.animation),t);return{type:1,matchers:NN(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:mg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>xo(this,r,t)),options:mg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const h=xo(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:u,options:mg(e.options)}}visitAnimate(e,t){const r=function HN(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return SS(Ub(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=SS(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=Ub(t,e);return SS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:jy({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,h=!1;if(!c){h=!0;const E={};r.easing&&(E.easing=r.easing),c=jy(E)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=h,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Id?r.push(h):t.errors.push(new p.vHH(3002,!1)):r.push(PM(h));let u=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!u))for(let y of h.values())if(y.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),C=E.get(y);let x=!0;C&&(u!=i&&u>=C.startTime&&i<=C.endTime&&(t.errors.push(function K1(n,e,t,r,i){return new p.vHH(3010,!1)}()),x=!1),u=C.startTime),x&&E.set(y,{startTime:u,endTime:i}),t.options&&function TN(n,e,t){const r=e.params||{},i=FM(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function B1(n){return new p.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Z1(){return new p.vHH(3011,!1)}()),r;let u=0;const c=[];let h=!1,y=!1,E=0;const C=e.steps.map(je=>{const tt=this._makeStyleAst(je,t);let Qe=null!=tt.offset?tt.offset:function jN(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(tt.styles),Ke=0;return null!=Qe&&(u++,Ke=tt.offset=Qe),y=y||Ke<0||Ke>1,h=h||Ke<E,E=Ke,c.push(Ke),tt});y&&t.errors.push(function Q1(){return new p.vHH(3012,!1)}()),h&&t.errors.push(function Y1(){return new p.vHH(3200,!1)}());const x=e.steps.length;let P=0;u>0&&u<x?t.errors.push(function J1(){return new p.vHH(3202,!1)}()):0==u&&(P=1/(x-1));const V=x-1,H=t.currentTime,se=t.currentAnimateTimings,de=se.duration;return C.forEach((je,tt)=>{const Qe=P>0?tt==V?1:P*tt:c[tt],Ke=Qe*de;t.currentTime=H+se.delay+Ke,se.duration=Ke,this._validateStyleAst(je,t),je.offset=Qe,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:xo(this,_w(e.animation),t),options:mg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:mg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:mg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function VN(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(FN,"")),n=n.replace(/@\*/g,Fb).replace(/@\w+/g,t=>Fb+"-"+t.slice(1)).replace(/:animating/g,IS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Ao(t.collectedStyles,t.currentQuerySelector,new Map);const h=xo(this,_w(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:mg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function X1(){return new p.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ub(e.timings,t.errors,!0);return{type:12,animation:xo(this,_w(e.animation),t),timings:r,options:null}}}class $N{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mg(n){return n?(n=yw(n)).params&&(n.params=function BN(n){return n?yw(n):null}(n.params)):n={},n}function SS(n,e,t){return{duration:n,delay:e,easing:t}}function AS(n,e,t,r,i,u,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:h}}class Gb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const qN=new RegExp(":enter","g"),KN=new RegExp(":leave","g");function xS(n,e,t,r,i,u=new Map,c=new Map,h,y,E=[]){return(new ZN).buildKeyframes(n,e,t,r,i,u,c,h,y,E)}class ZN{buildKeyframes(e,t,r,i,u,c,h,y,E,C=[]){E=E||new Gb;const x=new MS(e,t,E,i,u,C,[]);x.options=y;const P=y.delay?bd(y.delay):0;x.currentTimeline.delayNextStep(P),x.currentTimeline.setStyles([c],null,x.errors,y),xo(this,r,x);const V=x.timelines.filter(H=>H.containsAnimation());if(V.length&&h.size){let H;for(let se=V.length-1;se>=0;se--){const de=V[se];if(de.element===t){H=de;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([h],null,x.errors,y)}return V.length?V.map(H=>H.buildKeyframes()):[AS(t,[],[],[],0,P,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:bd(vw(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?bd(r.duration):null,h=null!=r.delay?bd(r.delay):null;return 0!==c&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,c,h);u=Math.max(u,E.duration+E.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=qb);const c=bd(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>xo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?bd(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);u&&h.delayNextStep(u),xo(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Ub(t.params?vw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(y=>{h.forwardTime((y.offset||0)*u),h.setStyles(y.styles,y.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?bd(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qb);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let y=null;h.forEach((E,C)=>{t.currentQueryIndex=C;const x=t.createSubContext(e.options,E);u&&x.delayNextStep(u),E===t.element&&(y=x.currentTimeline),xo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),h=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=h-y;break;case"full":y=r.currentStaggerTime}const C=t.currentTimeline;y&&C.delayNextStep(y);const x=C.currentTime;xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const qb={};class MS{constructor(e,t,r,i,u,c,h,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new Wb(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=bd(r.duration)),null!=r.delay&&(i.delay=bd(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=vw(u[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new MS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=qb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new QN(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(qN,"."+this._enterClassName)).replace(KN,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),h.push(...E)}return!u&&0==h.length&&c.push(function eN(n){return new p.vHH(3014,!1)}()),h}}class Wb{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Wb(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Id),this._currentKeyframe.set(t,Id);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function YN(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Id)}else If(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,y]of c){const E=vw(y,u,r);this._pendingStyles.set(h,E),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Id),this._updateStyle(h,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,y)=>{const E=If(h,new Map,this._backFill);E.forEach((C,x)=>{"!"===C?e.add(x):C===Id&&t.add(x)}),r||E.set("offset",y/this.duration),i.push(E)});const u=e.size?Vb(e.values()):[],c=t.size?Vb(t.values()):[];if(r){const h=i[0],y=new Map(h);h.set("offset",0),y.set("offset",1),i=[h,y]}return AS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class QN extends Wb{constructor(e,t,r,i,u,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,h=t/c,y=If(e[0]);y.set("offset",0),u.push(y);const E=If(e[0]);E.set("offset",jM(h)),u.push(E);const C=e.length-1;for(let x=1;x<=C;x++){let P=If(e[x]);const V=P.get("offset");P.set("offset",jM((t+V*r)/c)),u.push(P)}r=c,t=0,i="",e=u}return AS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function jM(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class RS{}const JN=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class XN extends RS{normalizePropertyName(e,t){return CS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(JN.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function H1(n,e){return new p.vHH(3005,!1)}())}return c+u}}function HM(n,e,t,r,i,u,c,h,y,E,C,x,P){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:h,queriedElements:y,preStyleProps:E,postStyleProps:C,totalTime:x,errors:P}}const kS={};class zM{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function eO(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,h,y,E,C){const x=[],P=this.ast.options&&this.ast.options.params||kS,H=this.buildStyles(r,h&&h.params||kS,x),se=y&&y.params||kS,de=this.buildStyles(i,se,x),je=new Set,tt=new Map,Qe=new Map,Ke="void"===i,Ct={params:tO(se,P),delay:this.ast.options?.delay},At=C?[]:xS(e,t,this.ast.animation,u,c,H,de,Ct,E,x);let rn=0;if(At.forEach(Mo=>{rn=Math.max(Mo.duration+Mo.delay,rn)}),x.length)return HM(t,this._triggerName,r,i,Ke,H,de,[],[],tt,Qe,rn,x);At.forEach(Mo=>{const Td=Mo.element,Ek=Ao(tt,Td,new Set);Mo.preStyleProps.forEach(Ig=>Ek.add(Ig));const Lw=Ao(Qe,Td,new Set);Mo.postStyleProps.forEach(Ig=>Lw.add(Ig)),Td!==t&&je.add(Td)});const $r=Vb(je.values());return HM(t,this._triggerName,r,i,Ke,H,de,At,$r,tt,Qe,rn)}}function tO(n,e){const t=yw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class nO{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=yw(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,h)=>{c&&(c=vw(c,i,t));const y=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,y,c,t),r.set(y,c)})}),r}}class iO{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new nO(i.style,i.options&&i.options.params||{},r))}),GM(this.states,"true","1"),GM(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new zM(e,i,this.states))}),this.fallbackTransition=function sO(n,e,t){return new zM(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function GM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const oO=new Gb;class aO{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=TS(this._driver,t,r,[]);if(r.length)throw function aN(n){return new p.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=bM(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const h=new Map;if(u?(c=xS(this._driver,t,u,ES,Ob,new Map,new Map,r,oO,i),c.forEach(C=>{const x=Ao(h,C.element,new Map);C.postStyleProps.forEach(P=>x.set(P,null))})):(i.push(function uN(){return new p.vHH(3300,!1)}()),c=[]),i.length)throw function lN(n){return new p.vHH(3504,!1)}();h.forEach((C,x)=>{C.forEach((P,V)=>{C.set(V,this._driver.computeStyle(x,V,Id))})});const E=Ef(c.map(C=>{const x=h.get(C.element);return this._buildPlayer(C,new Map,x)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function cN(n){return new p.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=yS(t,"","","");return gS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const qM="ng-animate-queued",PS="ng-animate-disabled",hO=[],WM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fO={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed";class NS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function yO(n){return n??null}(r?e.value:e),r){const u=yw(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ww="void",OS=new NS(ww);class pO{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ia(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function dN(n,e){return new p.vHH(3302,!1)}();if(null==r||0==r.length)throw function hN(n){return new p.vHH(3303,!1)}();if(!function _O(n){return"start"==n||"done"==n}(r))throw function fN(n,e){return new p.vHH(3400,!1)}();const u=Ao(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const h=Ao(this._engine.statesByElement,e,new Map);return h.has(t)||(Ia(e,Lb),Ia(e,Lb+"-"+t),h.set(t,OS)),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function pN(n){return new p.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new LS(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ia(e,Lb),Ia(e,Lb+"-"+t),this._engine.statesByElement.set(e,h=new Map));let y=h.get(t);const E=new NS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),h.set(t,E),y||(y=OS),E.value!==ww&&y.value===E.value){if(!function EO(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,E.params)){const se=[],de=u.matchStyles(y.value,y.params,se),je=u.matchStyles(E.value,E.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{gg(e,de),Ql(e,je)})}return}const P=Ao(this._engine.playersByElement,e,[]);P.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let V=u.matchTransition(y.value,E.value,e,E.params),H=!1;if(!V){if(!i)return;V=u.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:y,toState:E,player:c,isFallbackTransition:H}),H||(Ia(e,qM),c.onStart(()=>{Hy(e,qM)})),c.onDone(()=>{let se=this.players.indexOf(c);se>=0&&this.players.splice(se,1);const de=this._engine.playersByElement.get(e);if(de){let je=de.indexOf(c);je>=0&&de.splice(je,1)}}),this.players.push(c),P.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Fb,!0);r.forEach(i=>{if(i[Ea])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const h=[];if(u.forEach((y,E)=>{if(c.set(E,y.value),this._triggers.has(E)){const C=this.trigger(e,E,ww,i);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Ef(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers.get(c).fallbackTransition,E=r.get(c)||OS,C=new NS(ww),x=new LS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:E,toState:C,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Ea];(!u||u===WM)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ia(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(h=>{if(h.name==r.triggerName){const y=yS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,gS(r.player,h.phase,y,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class gO{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new pO(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const y=i.get(h);if(y){const E=r.indexOf(y);r.splice(E+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(Kb(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Kb(t))return;const u=t[Ea];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ia(e,PS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hy(e,PS))}removeNode(e,t,r,i){if(Kb(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Ea]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return Kb(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,Fb,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,IS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ef(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ea];if(t&&t.setForRemoval){if(e[Ea]=WM,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(PS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ia(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ef(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function gN(n){return new p.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Gb,i=[],u=new Map,c=[],h=new Map,y=new Map,E=new Map,C=new Set;this.disabledNodes.forEach(wt=>{C.add(wt);const Ut=this.driver.query(wt,".ng-animate-queued",!0);for(let Ht=0;Ht<Ut.length;Ht++)C.add(Ut[Ht])});const x=this.bodyNode,P=Array.from(this.statesByElement.keys()),V=QM(P,this.collectedEnterElements),H=new Map;let se=0;V.forEach((wt,Ut)=>{const Ht=ES+se++;H.set(Ut,Ht),wt.forEach(mn=>Ia(mn,Ht))});const de=[],je=new Set,tt=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Ut=this.collectedLeaveElements[wt],Ht=Ut[Ea];Ht&&Ht.setForRemoval&&(de.push(Ut),je.add(Ut),Ht.hasAnimation?this.driver.query(Ut,".ng-star-inserted",!0).forEach(mn=>je.add(mn)):tt.add(Ut))}const Qe=new Map,Ke=QM(P,Array.from(je));Ke.forEach((wt,Ut)=>{const Ht=Ob+se++;Qe.set(Ut,Ht),wt.forEach(mn=>Ia(mn,Ht))}),e.push(()=>{V.forEach((wt,Ut)=>{const Ht=H.get(Ut);wt.forEach(mn=>Hy(mn,Ht))}),Ke.forEach((wt,Ut)=>{const Ht=Qe.get(Ut);wt.forEach(mn=>Hy(mn,Ht))}),de.forEach(wt=>{this.processLeaveNode(wt)})});const Ct=[],At=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(Ht=>{const mn=Ht.player,vi=Ht.element;if(Ct.push(mn),this.collectedEnterElements.length){const Ji=vi[Ea];if(Ji&&Ji.setForMove){if(Ji.previousTriggersValues&&Ji.previousTriggersValues.has(Ht.triggerName)){const bg=Ji.previousTriggersValues.get(Ht.triggerName),Da=this.statesByElement.get(Ht.element);if(Da&&Da.has(Ht.triggerName)){const vD=Da.get(Ht.triggerName);vD.value=bg,Da.set(Ht.triggerName,vD)}}return void mn.destroy()}}const Jl=!x||!this.driver.containsElement(x,vi),Ro=Qe.get(vi),Tf=H.get(vi),Er=this._buildInstruction(Ht,r,Tf,Ro,Jl);if(Er.errors&&Er.errors.length)return void At.push(Er);if(Jl)return mn.onStart(()=>gg(vi,Er.fromStyles)),mn.onDestroy(()=>Ql(vi,Er.toStyles)),void i.push(mn);if(Ht.isFallbackTransition)return mn.onStart(()=>gg(vi,Er.fromStyles)),mn.onDestroy(()=>Ql(vi,Er.toStyles)),void i.push(mn);const Dk=[];Er.timelines.forEach(Ji=>{Ji.stretchStartingKeyframe=!0,this.disabledNodes.has(Ji.element)||Dk.push(Ji)}),Er.timelines=Dk,r.append(vi,Er.timelines),c.push({instruction:Er,player:mn,element:vi}),Er.queriedElements.forEach(Ji=>Ao(h,Ji,[]).push(mn)),Er.preStyleProps.forEach((Ji,bg)=>{if(Ji.size){let Da=y.get(bg);Da||y.set(bg,Da=new Set),Ji.forEach((vD,_A)=>Da.add(_A))}}),Er.postStyleProps.forEach((Ji,bg)=>{let Da=E.get(bg);Da||E.set(bg,Da=new Set),Ji.forEach((vD,_A)=>Da.add(_A))})});if(At.length){const wt=[];At.forEach(Ut=>{wt.push(function mN(n,e){return new p.vHH(3505,!1)}())}),Ct.forEach(Ut=>Ut.destroy()),this.reportError(wt)}const rn=new Map,$r=new Map;c.forEach(wt=>{const Ut=wt.element;r.has(Ut)&&($r.set(Ut,Ut),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,rn))}),i.forEach(wt=>{const Ut=wt.element;this._getPreviousPlayers(Ut,!1,wt.namespaceId,wt.triggerName,null).forEach(mn=>{Ao(rn,Ut,[]).push(mn),mn.destroy()})});const Mo=de.filter(wt=>JM(wt,y,E)),Td=new Map;ZM(Td,this.driver,tt,E,Id).forEach(wt=>{JM(wt,y,E)&&Mo.push(wt)});const Lw=new Map;V.forEach((wt,Ut)=>{ZM(Lw,this.driver,new Set(wt),y,"!")}),Mo.forEach(wt=>{const Ut=Td.get(wt),Ht=Lw.get(wt);Td.set(wt,new Map([...Array.from(Ut?.entries()??[]),...Array.from(Ht?.entries()??[])]))});const Ig=[],Ik=[],bk={};c.forEach(wt=>{const{element:Ut,player:Ht,instruction:mn}=wt;if(r.has(Ut)){if(C.has(Ut))return Ht.onDestroy(()=>Ql(Ut,mn.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(mn.totalTime),void i.push(Ht);let vi=bk;if($r.size>1){let Ro=Ut;const Tf=[];for(;Ro=Ro.parentNode;){const Er=$r.get(Ro);if(Er){vi=Er;break}Tf.push(Ro)}Tf.forEach(Er=>$r.set(Er,vi))}const Jl=this._buildAnimation(Ht.namespaceId,mn,rn,u,Lw,Td);if(Ht.setRealPlayer(Jl),vi===bk)Ig.push(Ht);else{const Ro=this.playersByElement.get(vi);Ro&&Ro.length&&(Ht.parentPlayer=Ef(Ro)),i.push(Ht)}}else gg(Ut,mn.fromStyles),Ht.onDestroy(()=>Ql(Ut,mn.toStyles)),Ik.push(Ht),C.has(Ut)&&i.push(Ht)}),Ik.forEach(wt=>{const Ut=u.get(wt.element);if(Ut&&Ut.length){const Ht=Ef(Ut);wt.setRealPlayer(Ht)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<de.length;wt++){const Ut=de[wt],Ht=Ut[Ea];if(Hy(Ut,Ob),Ht&&Ht.hasAnimation)continue;let mn=[];if(h.size){let Jl=h.get(Ut);Jl&&Jl.length&&mn.push(...Jl);let Ro=this.driver.query(Ut,IS,!0);for(let Tf=0;Tf<Ro.length;Tf++){let Er=h.get(Ro[Tf]);Er&&Er.length&&mn.push(...Er)}}const vi=mn.filter(Jl=>!Jl.destroyed);vi.length?vO(this,Ut,vi):this.processLeaveNode(Ut)}return de.length=0,Ig.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Ut=this.players.indexOf(wt);this.players.splice(Ut,1)}),wt.play()}),Ig}elementContainsData(e,t){let r=!1;const i=t[Ea];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const y=!u||u==ww;h.forEach(E=>{E.queued||!y&&E.triggerName!=i||c.push(E)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,C=E!==u,x=Ao(r,E,[]);this._getPreviousPlayers(E,C,c,h,t.toState).forEach(V=>{const H=V.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),V.destroy(),x.push(V)})}gg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const h=t.triggerName,y=t.element,E=[],C=new Set,x=new Set,P=t.timelines.map(H=>{const se=H.element;C.add(se);const de=se[Ea];if(de&&de.removedBeforeQueried)return new mw(H.duration,H.delay);const je=se!==y,tt=function wO(n){const e=[];return YM(n,e),e}((r.get(se)||hO).map(rn=>rn.getRealPlayer())).filter(rn=>!!rn.element&&rn.element===se),Qe=u.get(se),Ke=c.get(se),Ct=bM(0,this._normalizer,0,H.keyframes,Qe,Ke),At=this._buildPlayer(H,Ct,tt);if(H.subTimeline&&i&&x.add(se),je){const rn=new LS(e,h,se);rn.setRealPlayer(At),E.push(rn)}return At});E.forEach(H=>{Ao(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function mO(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,H.element,H))}),C.forEach(H=>Ia(H,kM));const V=Ef(P);return V.onDestroy(()=>{C.forEach(H=>Hy(H,kM)),Ql(y,t.toStyles)}),x.forEach(H=>{Ao(i,H,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new mw(e.duration,e.delay)}}class LS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new mw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>gS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ao(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Kb(n){return n&&1===n.nodeType}function KM(n,e){const t=n.style.display;return n.style.display=e??"none",t}function ZM(n,e,t,r,i){const u=[];t.forEach(y=>u.push(KM(y)));const c=[];r.forEach((y,E)=>{const C=new Map;y.forEach(x=>{const P=e.computeStyle(E,x,i);C.set(x,P),(!P||0==P.length)&&(E[Ea]=fO,c.push(E))}),n.set(E,C)});let h=0;return t.forEach(y=>KM(y,u[h++])),c}function QM(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(h){if(!h)return 1;let y=u.get(h);if(y)return y;const E=h.parentNode;return y=t.has(E)?E:i.has(E)?1:c(E),u.set(h,y),y}return e.forEach(h=>{const y=c(h);1!==y&&t.get(y).push(h)}),t}function Ia(n,e){n.classList?.add(e)}function Hy(n,e){n.classList?.remove(e)}function vO(n,e,t){Ef(t).onDone(()=>n.processLeaveNode(e))}function YM(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EM?YM(r.players,e):e.push(r)}}function JM(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class Zb{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new gO(e,t,r),this._timelineEngine=new aO(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const y=[],C=TS(this._driver,u,y,[]);if(y.length)throw function sN(n,e){return new p.vHH(3404,!1)}();h=function rO(n,e,t){return new iO(n,e,t)}(i,C,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=DM(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,h]=DM(r);return this._timelineEngine.listen(c,t,h,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let bO=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ql(this._element,this._initialStyles),this._endStyles&&(Ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(gg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gg(this._element,this._endStyles),this._endStyles=null),Ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function FS(n){let e=null;return n.forEach((t,r)=>{(function DO(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class XM{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:UM(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class CO{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return AM(e,t)}getParentElement(e){return vS(e)}query(e,t,r){return xM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const E=new Map,C=c.filter(V=>V instanceof XM);(function xN(n,e){return 0===n||0===e})(r,i)&&C.forEach(V=>{V.currentSnapshot.forEach((H,se)=>E.set(se,H))});let x=function CN(n){return n.length?n[0]instanceof Map?n:n.map(e=>PM(e)):[]}(t).map(V=>If(V));x=function MN(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(h=>c.set(h,UM(n,h)))}}return e}(e,x,E);const P=function IO(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=FS(e[0]),e.length>1&&(r=FS(e[e.length-1]))):e instanceof Map&&(t=FS(e)),t||r?new bO(n,t,r):null}(e,x);return new XM(e,x,y,P)}}let TO=(()=>{class n extends yM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?vM(t):t;return eR(this._renderer,null,r,"register",[i]),new SO(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class SO extends class F1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new AO(this._id,e,t||{},this._renderer)}}class AO{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return eR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function eR(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const tR="@.disabled";let xO=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const h=c?.parentNode(u);h&&c.removeChild(h,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(u);return C||(C=new nR("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,C)),C}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const y=C=>{Array.isArray(C)?C.forEach(y):this.engine.registerTrigger(c,h,t,C.name,C)};return r.data.animation.forEach(y),new MO(this,h,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,h]=u;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(Zb),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class nR{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==tR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class MO extends nR{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==tR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function RO(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function kO(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let PO=(()=>{class n extends Zb{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(wS),p.LFG(RS),p.LFG(p.z2F))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const rR=[{provide:yM,useClass:TO},{provide:RS,useFactory:function NO(){return new XN}},{provide:Zb,useClass:PO},{provide:p.FYo,useFactory:function OO(n,e,t){return new xO(n,e,t)},deps:[ao,Zb,p.R0b]}],US=[{provide:wS,useFactory:()=>new CO},{provide:p.QbO,useValue:"BrowserAnimations"},...rR],iR=[{provide:wS,useClass:MM},{provide:p.QbO,useValue:"NoopAnimations"},...rR];let LO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?iR:US}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:US,imports:[il]}),n})();const sR_firebaseConfig={apiKey:"AIzaSyBQujecS6EtrN0HG8TCyW9DurdU5jgFKsk",authDomain:"planning-poker-bbt.firebaseapp.com",databaseURL:"https://planning-poker-bbt-default-rtdb.firebaseio.com",projectId:"planning-poker-bbt",storageBucket:"planning-poker-bbt.appspot.com",messagingSenderId:"851619405106",appId:"1:851619405106:web:57c50f725eb9bf7ba64b2b",measurementId:"G-RW1DGDDRN4"};var oR=L(7521);class Ew{constructor(e,t,r,i,u,c){this.combo=e,this.callback=t,this.allowIn=r,this.description=i,this.action=u,this.persistent=c,this.combo=Array.isArray(e)?e:[e],this.allowIn=r||[],this.description=i||""}static symbolize(e){const t={command:"\u2318",shift:"\u21e7",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193",return:"\u23ce",backspace:"\u232b"},r=e.split("+");for(let i=0;i<r.length;i++)"mod"===r[i]&&(r[i]=window.navigator&&window.navigator.platform.indexOf("Mac")>=0?"command":"ctrl"),r[i]=t[r[i]]||r[i];return r.join(" + ")}get formatted(){if(!this.formattedHotkey){const e=this.combo;for(let t=0;t<e.length;t++)e[t]=Ew.symbolize(e[t]);this.formattedHotkey=e}return this.formattedHotkey}}const aR=new p.OlP("HotkeyOptions");let uR=(()=>{class n{constructor(t){this.options=t,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new Kr.x,this.preventIn=["INPUT","SELECT","TEXTAREA"],oR.prototype.stopCallback=(r,i,u,c)=>!((" "+i.className+" ").indexOf(" mousetrap ")>-1)&&i.contentEditable&&"true"===i.contentEditable,this.mousetrap=new oR,this.initCheatSheet()}initCheatSheet(){this.options.disableCheatSheet||this.add(new Ew(this.options.cheatSheetHotkey||"?",function(t){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new Ew("esc",function(t){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription||"Hide this help menu"))}add(t,r){if(Array.isArray(t)){const i=[];for(const u of t)i.push(this.add(u,r));return i}return this.remove(t),this.hotkeys.push(t),this.mousetrap.bind(t.combo,(i,u)=>{let c=!0;if(i){const h=i.target||i.srcElement,y=h.nodeName.toUpperCase();(" "+h.className+" ").indexOf(" mousetrap ")>-1?c=!0:this.preventIn.indexOf(y)>-1&&-1===t.allowIn.map(E=>E.toUpperCase()).indexOf(y)&&(c=!1)}if(c)return t.callback.apply(this,[i,u])},r),t}remove(t,r){const i=[];if(!t){for(const c of this.hotkeys)i.push(this.remove(c,r));return i}if(Array.isArray(t)){for(const c of t)i.push(this.remove(c));return i}const u=this.findHotkey(t);return u>-1?(this.hotkeys.splice(u,1),this.mousetrap.unbind(t.combo,r),t):null}get(t){if(!t)return this.hotkeys;if(Array.isArray(t)){const r=[];for(const i of t)r.push(this.get(i));return r}for(const r of this.hotkeys)if(r.combo.indexOf(t)>-1)return r;return null}pause(t){if(!t)return this.pause(this.hotkeys);if(Array.isArray(t)){const r=[];for(const i of t)r.push(this.pause(i));return r}return this.remove(t),this.pausedHotkeys.push(t),t}unpause(t){if(!t)return this.unpause(this.pausedHotkeys);if(Array.isArray(t)){const i=[];for(const u of t)i.push(this.unpause(u));return i}const r=this.pausedHotkeys.indexOf(t);return r>-1?(this.add(t),this.pausedHotkeys.splice(r,1)):null}reset(){this.mousetrap.reset(),this.hotkeys=[],this.pausedHotkeys=[],this.initCheatSheet()}findHotkey(t){return this.hotkeys.indexOf(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(aR))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UO=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[uR,{provide:aR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Po]]}),n})();var Yb=L(727);class Au extends Kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:VO}=Array,{getPrototypeOf:BO,prototype:$O,keys:jO}=Object;const{isArray:GO}=Array;var ZO=L(9672);function lR(...n){const e=(0,_r.yG)(n),t=(0,_r.jO)(n),{args:r,keys:i}=function HO(n){if(1===n.length){const e=n[0];if(VO(e))return{args:e,keys:null};if(function zO(n){return n&&"object"==typeof n&&BO(n)===$O}(e)){const t=jO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,un.D)([],e);const u=new ls.y(function QO(n,e,t=fi.y){return r=>{cR(e,()=>{const{length:i}=n,u=new Array(i);let c=i,h=i;for(let y=0;y<i;y++)cR(e,()=>{const E=(0,un.D)(n[y],e);let C=!1;E.subscribe((0,Zn.x)(r,x=>{u[y]=x,C||(C=!0,h--),h||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function KO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):fi.y));return t?u.pipe(function WO(n){return(0,mt.U)(e=>function qO(n,e){return GO(e)?n(...e):n(e)}(n,e))}(t)):u}function cR(n,e,t){n?(0,ZO.f)(t,n,e):e()}function dR(n){return new ls.y(e=>{(0,G0.Xf)(n()).subscribe(e)})}var YO=L(9635);function Iw(n,e){const t=(0,Sy.m)(n)?n:()=>n,r=i=>i.error(t());return new ls.y(e?i=>e.schedule(r,0,i):r)}function VS(){return(0,Fr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hR extends ls.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Fr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yb.w0.EMPTY)}return e}refCount(){return VS()(this)}}var Ds=L(5577);function yg(n,e){return(0,Sy.m)(e)?(0,Ds.z)(n,e,1):(0,Ds.z)(n,1)}var Yi=L(8505);function bf(n){return(0,Fr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,c=>{u=(0,G0.Xf)(n(c,bf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function BS(n){return n<=0?()=>ql.E:(0,Fr.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((i,u)=>n(i,u,r)):fi.y,BS(1),t?yf(e):q0(()=>new lg))}function $S(n){return(0,Fr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const nn="primary",bw=Symbol("RouteTitle");class eL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zy(n){return new eL(n)}function tL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],h=n[u];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!pR(n[i],e[i]))return!1;return!0}function pR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function gR(n){return Array.prototype.concat.apply([],n)}function mR(n){return n.length>0?n[n.length-1]:null}function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Df(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,un.D)(Promise.resolve(n)):Je(n)}const iL={exact:function vR(n,e,t){if(!vg(n.segments,e.segments)||!Jb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vR(n.children[r],e.children[r],t))return!1;return!0},subset:wR},yR={exact:function sL(n,e){return Yl(n,e)},subset:function oL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pR(n[t],e[t]))},ignored:()=>!0};function _R(n,e,t){return iL[t.paths](n.root,e.root,t.matrixParams)&&yR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wR(n,e,t){return ER(n,e,e.segments,t)}function ER(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vg(i,t)||e.hasChildren()||!Jb(i,t,r))}if(n.segments.length===t.length){if(!vg(n.segments,t)||!Jb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vg(n.segments,i)&&Jb(n.segments,i,r)&&n.children[nn])&&ER(n.children[nn],e,u,r)}}function Jb(n,e,t){return e.every((r,i)=>yR[t](n[i].parameters,r.parameters))}class _g{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zy(this.queryParams)),this._queryParamMap}toString(){return lL.serialize(this)}}class an{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xb(this)}}class Dw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zy(this.parameters)),this._parameterMap}toString(){return CR(this)}}function vg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let IR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new HS},providedIn:"root"}),n})();class HS{parse(e){const t=new _L(e);return new _g(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Cw(e.root,!0)}`,r=function hL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${eD(t)}=${eD(i)}`).join("&"):`${eD(t)}=${eD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function cL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const lL=new HS;function Xb(n){return n.segments.map(e=>CR(e)).join("/")}function Cw(n,e){if(!n.hasChildren())return Xb(n);if(e){const t=n.children[nn]?Cw(n.children[nn],!1):"",r=[];return Mi(n.children,(i,u)=>{u!==nn&&r.push(`${u}:${Cw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function uL(n,e){let t=[];return Mi(n.children,(r,i)=>{i===nn&&(t=t.concat(e(r,i)))}),Mi(n.children,(r,i)=>{i!==nn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===nn?[Cw(n.children[nn],!1)]:[`${i}:${Cw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[nn]?`${Xb(n)}/${t[0]}`:`${Xb(n)}/(${t.join("//")})`}}function bR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eD(n){return bR(n).replace(/%3B/gi,";")}function zS(n){return bR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tD(n){return decodeURIComponent(n)}function DR(n){return tD(n.replace(/\+/g,"%20"))}function CR(n){return`${zS(n.path)}${function dL(n){return Object.keys(n).map(e=>`;${zS(e)}=${zS(n[e])}`).join("")}(n.parameters)}`}const fL=/^[^\/()?;=#]+/;function nD(n){const e=n.match(fL);return e?e[0]:""}const pL=/^[^=?&#]+/,mL=/^[^&#]+/;class _L{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new an(e,t)),r}parseSegment(){const e=nD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Dw(tD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nD(this.remaining);i&&(r=i,this.capture(r))}e[tD(t)]=tD(r)}parseQueryParam(e){const t=function gL(n){const e=n.match(pL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function yL(n){const e=n.match(mL);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=DR(t),u=DR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=nn);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[nn]:new an([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function GS(n){return n.segments.length>0?new an([],{[nn]:n}):n}function rD(n){const e={};for(const r of Object.keys(n.children)){const u=rD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function vL(n){if(1===n.numberOfChildren&&n.children[nn]){const e=n.children[nn];return new an(n.segments.concat(e.segments),e.children)}return n}(new an(n.segments,e))}function wg(n){return n instanceof _g}function IL(n,e,t,r,i){if(0===t.length)return Gy(e.root,e.root,e.root,r,i);const u=function AR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new SR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const h={};return Mi(u.outlets,(y,E)=>{h[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((h,y)=>{0==y&&"."===h||(0==y&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,u]},[]);return new SR(t,e,r)}(t);return u.toRoot()?Gy(e.root,e.root,new an([],{}),r,i):function c(y){const E=function DL(n,e,t,r){if(n.isAbsolute)return new qy(e.root,!0,0);if(-1===r)return new qy(t,t===e.root,0);return function xR(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new qy(r,!1,i-u)}(t,r+(Tw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,y),C=E.processChildren?Aw(E.segmentGroup,E.index,u.commands):WS(E.segmentGroup,E.index,u.commands);return Gy(e.root,E.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Tw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sw(n){return"object"==typeof n&&null!=n&&n.outlets}function Gy(n,e,t,r,i){let c,u={};r&&Mi(r,(y,E)=>{u[E]=Array.isArray(y)?y.map(C=>`${C}`):`${y}`}),c=n===e?t:TR(n,e,t);const h=GS(rD(c));return new _g(h,u,i)}function TR(n,e,t){const r={};return Mi(n.children,(i,u)=>{r[u]=i===e?t:TR(i,e,t)}),new an(n.segments,r)}class SR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tw(r[0]))throw new p.vHH(4003,!1);const i=r.find(Sw);if(i&&i!==mR(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function WS(n,e,t){if(n||(n=new an([],{})),0===n.segments.length&&n.hasChildren())return Aw(n,e,t);const r=function TL(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],h=t[r];if(Sw(h))break;const y=`${h}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!RR(y,E,c))return u;r+=2}else{if(!RR(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new an(n.segments.slice(0,r.pathIndex),{});return u.children[nn]=new an(n.segments.slice(r.pathIndex),n.children),Aw(u,0,i)}return r.match&&0===i.length?new an(n.segments,{}):r.match&&!n.hasChildren()?KS(n,e,t):r.match?Aw(n,0,i):KS(n,e,t)}function Aw(n,e,t){if(0===t.length)return new an(n.segments,{});{const r=function CL(n){return Sw(n[0])?n[0].outlets:{[nn]:n}}(t),i={};return Mi(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=WS(n.children[c],e,u))}),Mi(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new an(n.segments,i)}}function KS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Sw(u)){const y=SL(u.outlets);return new an(r,y)}if(0===i&&Tw(t[0])){r.push(new Dw(n.segments[e].path,MR(t[0]))),i++;continue}const c=Sw(u)?u.outlets[nn]:`${u}`,h=i<t.length-1?t[i+1]:null;c&&h&&Tw(h)?(r.push(new Dw(c,MR(h))),i+=2):(r.push(new Dw(c,{})),i++)}return new an(r,{})}function SL(n){const e={};return Mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=KS(new an([],{}),0,t))}),e}function MR(n){const e={};return Mi(n,(t,r)=>e[r]=`${t}`),e}function RR(n,e,t){return n==t.path&&Yl(e,t.parameters)}class Dd{constructor(e,t){this.id=e,this.url=t}}class ZS extends Dd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Eg extends Dd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class iD extends Dd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kR extends Dd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class AL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ML extends Dd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class RL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FL{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class NR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=QS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=QS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=YS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return YS(e,this._root).map(t=>t.value)}}function QS(n,e){if(n===e.value)return e;for(const t of e.children){const r=QS(n,t);if(r)return r}return null}function YS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=YS(n,t);if(r.length)return r.unshift(e),r}return[]}class Cd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class OR extends NR{constructor(e,t){super(e),this.snapshot=t,JS(this,e)}toString(){return this.snapshot.toString()}}function LR(n,e){const t=function BL(n,e){const c=new sD([],{},{},"",{},nn,e,null,n.root,-1,{});return new UR("",new Cd(c,[]))}(n,e),r=new Au([new Dw("",{})]),i=new Au({}),u=new Au({}),c=new Au({}),h=new Au(""),y=new Cf(r,i,c,h,u,nn,e,t.root);return y.snapshot=t.root,new OR(new Cd(y,[]),t)}class Cf{constructor(e,t,r,i,u,c,h,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,mt.U)(E=>E[bw]))??Je(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>zy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>zy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function $L(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sD{constructor(e,t,r,i,u,c,h,y,E,C,x,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this.title=this.data?.[bw],this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=C,this._correctedLastPathIndex=P??C,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class UR extends NR{constructor(e,t){super(t),this.url=e,JS(this,t)}toString(){return VR(this._root)}}function JS(n,e){e.value._routerState=n,e.children.forEach(t=>JS(n,t))}function VR(n){const e=n.children.length>0?` { ${n.children.map(VR).join(", ")} } `:"";return`${n.value}${e}`}function XS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yl(e.params,t.params)||n.params.next(t.params),function nL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eA(n,e){const t=Yl(n.params,e.params)&&function aL(n,e){return vg(n,e)&&n.every((t,r)=>Yl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eA(n.parent,e.parent))}function xw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function HL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xw(n,r,i);return xw(n,r)})}(n,e,t);return new Cd(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>xw(n,h)),c}}const r=function zL(n){return new Cf(new Au(n.url),new Au(n.params),new Au(n.queryParams),new Au(n.fragment),new Au(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>xw(n,u));return new Cd(r,i)}}const tA="ngNavigationCancelingError";function BR(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=wg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$R(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function $R(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[tA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function jR(n){return HR(n)&&wg(n.url)}function HR(n){return n&&n[tA]}class GL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Mw,this.attachRef=null}}let Mw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new GL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oD=!1;let nA=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=i||nn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,oD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,oD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,oD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,oD);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,y=new qL(t,h,i.injector);if(r&&function WL(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(c);this.activated=i.createComponent(E,i.length,y)}else this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Mw),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class qL{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Cf?this.route:e===Mw?this.childContexts:this.parent.get(e,t)}}let rA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[nA],encapsulation:2}),n})();function zR(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sA(n){const e=n.children&&n.children.map(sA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=rA),t}function ba(n){return n.outlet||nn}function GR(n,e){const t=n.filter(r=>ba(r)===e);return t.push(...n.filter(r=>ba(r)!==e)),t}function Rw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class JL{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wy(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Mi(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Wy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Wy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wy(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new UL(u.value.snapshot))}),e.children.length&&this.forwardEvent(new LL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(XS(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),XS(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Rw(i.snapshot),y=h?.get(p._Vd)??null;c.attachRef=null,c.route=i,c.resolver=y,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class qR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aD{constructor(e,t){this.component=e,this.route=t}}function XL(n,e,t){const r=n._root;return kw(r,e?e._root:null,t,[r.value])}function Ky(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function kw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Wy(e);return n.children.forEach(c=>{(function tF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function nF(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vg(n.url,e.url)||!Yl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eA(n,e)||!Yl(n.queryParams,e.queryParams);default:return!eA(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new qR(r)):(u.data=c.data,u._resolvedData=c._resolvedData),kw(n,e,u.component?h?h.children:null:t,r,i),y&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new aD(h.outlet.component,c))}else c&&Pw(e,h,i),i.canActivateChecks.push(new qR(r)),kw(n,null,u.component?h?h.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Mi(u,(c,h)=>Pw(c,t.getContext(h),i)),i}function Pw(n,e,t){const r=Wy(n),i=n.value;Mi(r,(u,c)=>{Pw(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new aD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Nw(n){return"function"==typeof n}function oA(n){return n instanceof lg||"EmptyError"===n?.name}const uD=Symbol("INITIAL_VALUE");function Zy(){return kr(n=>lR(n.map(e=>e.pipe(Ty(1),Wo(uD)))).pipe((0,mt.U)(e=>{for(const t of e)if(!0!==t){if(t===uD)return uD;if(!1===t||t instanceof _g)return t}return!0}),ti(e=>e!==uD),Ty(1)))}function WR(n){return(0,YO.z)((0,Yi.b)(e=>{if(wg(e))throw BR(0,e)}),(0,mt.U)(e=>!0===e))}const aA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KR(n,e,t,r,i){const u=uA(n,e,t);return u.matched?function vF(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const h=Ky(c,n);return Df(function uF(n){return n&&Nw(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Zy(),WR()):Je(!0)}(r=zR(e,r),e,t).pipe((0,mt.U)(c=>!0===c?u:{...aA})):Je(u)}function uA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...aA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tL)(t,n,e);if(!i)return{...aA};const u={};Mi(i.posParams,(h,y)=>{u[y]=h.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function lD(n,e,t,r,i="corrected"){if(t.length>0&&function IF(n,e,t){return t.some(r=>cD(n,e,r)&&ba(r)!==nn)}(n,t,r)){const c=new an(e,function EF(n,e,t,r){const i={};i[nn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ba(u)!==nn){const c=new an([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ba(u)]=c}return i}(n,e,r,new an(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function bF(n,e,t){return t.some(r=>cD(n,e,r))}(n,t,r)){const c=new an(n.segments,function wF(n,e,t,r,i,u){const c={};for(const h of r)if(cD(n,t,h)&&!i[ba(h)]){const y=new an([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ba(h)]=y}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new an(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function cD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ZR(n,e,t,r){return!!(ba(n)===r||r!==nn&&cD(e,t,n))&&("**"===n.path||uA(e,n,t).matched)}function QR(n,e,t){return 0===e.length&&!n.children[t]}const dD=!1;class hD{constructor(e){this.segmentGroup=e||null}}class YR{constructor(e){this.urlTree=e}}function Ow(n){return Iw(new hD(n))}function JR(n){return Iw(new YR(n))}class SF{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=lD(this.urlTree.root,[],[],this.config).segmentGroup,t=new an(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,nn).pipe((0,mt.U)(u=>this.createUrlTree(rD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bf(u=>{if(u instanceof YR)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof hD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,nn).pipe((0,mt.U)(i=>this.createUrlTree(rD(i),e.queryParams,e.fragment))).pipe(bf(i=>{throw i instanceof hD?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,dD)}createUrlTree(e,t,r){const i=GS(e);return new _g(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(u=>new an([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,un.D)(i).pipe(yg(u=>{const c=r.children[u],h=GR(t,u);return this.expandSegmentGroup(e,h,c,u).pipe((0,mt.U)(y=>({segment:y,outlet:u})))}),ds((u,c)=>(u[c.outlet]=c.segment,u),{}),fR())}expandSegment(e,t,r,i,u,c){return(0,un.D)(r).pipe(yg(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,u,c).pipe(bf(E=>{if(E instanceof hD)return Je(null);throw E}))),va(h=>!!h),bf((h,y)=>{if(oA(h))return QR(t,i,u)?Je(new an([],{})):Ow(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,u,c,h){return ZR(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Ow(t):Ow(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?JR(u):this.lineralizeSegments(r,u).pipe((0,Ds.z)(c=>{const h=new an(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:h,consumedSegments:y,remainingSegments:E,positionalParamSegments:C}=uA(t,i,u);if(!h)return Ow(t);const x=this.applyRedirectCommands(y,i.redirectTo,C);return i.redirectTo.startsWith("/")?JR(x):this.lineralizeSegments(i,x).pipe((0,Ds.z)(P=>this.expandSegment(e,t,r,P.concat(E),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=zR(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,mt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new an(i,{})))):Je(new an(i,{}))):KR(t,r,i,e).pipe(kr(({matched:c,consumedSegments:h,remainingSegments:y})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ds.z)(C=>{const x=C.injector??e,P=C.routes,{segmentGroup:V,slicedSegments:H}=lD(t,h,y,P),se=new an(V.segments,V.children);if(0===H.length&&se.hasChildren())return this.expandChildren(x,P,se).pipe((0,mt.U)(Qe=>new an(h,Qe)));if(0===P.length&&0===H.length)return Je(new an(h,{}));const de=ba(r)===u;return this.expandSegment(x,se,P,H,de?nn:u,!0).pipe((0,mt.U)(tt=>new an(h.concat(tt.segments),tt.children)))})):Ow(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function _F(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const h=Ky(c,n);return Df(function iF(n){return n&&Nw(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Zy(),WR())}(e,t,r).pipe((0,Ds.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Yi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function CF(n){return Iw($R(dD,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[nn])return Iw(new p.vHH(4e3,dD));i=i.children[nn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new _g(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mi(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[u]=t[h]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Mi(t.children,(h,y)=>{c[y]=this.createSegmentGroup(e,h,r,i)}),new an(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,dD);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class xF{}class kF{constructor(e,t,r,i,u,c,h,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=y}recognize(){const e=lD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nn).pipe((0,mt.U)(t=>{if(null===t)return null;const r=new sD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Cd(r,t),u=new UR(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=FR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,un.D)(Object.keys(r.children)).pipe(yg(i=>{const u=r.children[i],c=GR(t,i);return this.processSegmentGroup(e,c,u,i)}),ds((i,u)=>i&&u?(i.push(...u),i):null),function JO(n,e=!1){return(0,Fr.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),yf(null),fR(),(0,mt.U)(i=>{if(null===i)return null;const u=XR(i);return function PF(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,un.D)(t).pipe(yg(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),va(c=>!!c),bf(c=>{if(oA(c))return QR(r,i,u)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!ZR(t,r,i,u))return Je(null);let c;if("**"===t.path){const h=i.length>0?mR(i).parameters:{},y=tk(r)+i.length;c=Je({snapshot:new sD(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rk(t),ba(t),t.component??t._loadedComponent??null,t,ek(r),y,ik(t),y),consumedSegments:[],remainingSegments:[]})}else c=KR(r,t,i,e).pipe((0,mt.U)(({matched:h,consumedSegments:y,remainingSegments:E,parameters:C})=>{if(!h)return null;const x=tk(r)+y.length;return{snapshot:new sD(y,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rk(t),ba(t),t.component??t._loadedComponent??null,t,ek(r),x,ik(t),x),consumedSegments:y,remainingSegments:E}}));return c.pipe(kr(h=>{if(null===h)return Je(null);const{snapshot:y,consumedSegments:E,remainingSegments:C}=h;e=t._injector??e;const x=t._loadedInjector??e,P=function NF(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:H}=lD(r,E,C,P.filter(de=>void 0===de.redirectTo),this.relativeLinkResolution);if(0===H.length&&V.hasChildren())return this.processChildren(x,P,V).pipe((0,mt.U)(de=>null===de?null:[new Cd(y,de)]));if(0===P.length&&0===H.length)return Je([new Cd(y,[])]);const se=ba(t)===u;return this.processSegment(x,P,V,H,se?nn:u).pipe((0,mt.U)(de=>null===de?null:[new Cd(y,de)]))}))}}function OF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XR(n){const e=[],t=new Set;for(const r of n){if(!OF(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=XR(r.children);e.push(new Cd(r.value,i))}return e.filter(r=>!t.has(r))}function ek(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tk(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function rk(n){return n.data||{}}function ik(n){return n.resolve||{}}function sk(n){return"string"==typeof n.title||null===n.title}function lA(n){return kr(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,mt.U)(()=>e)):Je(e)})}let ok=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[bw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(ak)},providedIn:"root"}),n})(),ak=(()=>{class n extends ok{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(us))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class HF{}class GF extends class zF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pD=new p.OlP("",{providedIn:"root",factory:()=>({})}),cA=new p.OlP("ROUTES");let dA=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Df(t.loadComponent()).pipe((0,Yi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),$S(()=>{this.componentLoaders.delete(t)})),i=new hR(r,()=>new Kr.x).pipe(VS());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,mt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E,C=!1;Array.isArray(h)?E=h:(y=h.create(t).injector,E=gR(y.get(cA,[],p.XFs.Self|p.XFs.Optional)));return{routes:E.map(sA),injector:y}}),$S(()=>{this.childrenLoaders.delete(r)})),c=new hR(u,()=>new Kr.x).pipe(VS());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Df(t()).pipe((0,Ds.z)(r=>r instanceof p.YKP||Array.isArray(r)?Je(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WF{}class KF{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ZF(n){throw n}function QF(n,e,t){return e.parse("/")}const YF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lk(){const n=(0,p.f3M)(IR),e=(0,p.f3M)(Mw),t=(0,p.f3M)(Me),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),u=(0,p.f3M)(cA,{optional:!0})??[],c=(0,p.f3M)(pD,{optional:!0})??{},h=(0,p.f3M)(ak),y=(0,p.f3M)(ok,{optional:!0}),E=(0,p.f3M)(WF,{optional:!0}),C=(0,p.f3M)(HF,{optional:!0}),x=new oi(null,n,e,t,r,i,gR(u));return E&&(x.urlHandlingStrategy=E),C&&(x.routeReuseStrategy=C),x.titleStrategy=y??h,function XF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,x),x}let oi=(()=>{class n{constructor(t,r,i,u,c,h,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kr.x,this.errorHandler=ZF,this.malformedUriErrorHandler=QF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new KF,this.routeReuseStrategy=new GF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(dA),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new NL(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new PL(P)),this.ngModule=c.get(p.h0i),this.console=c.get(p.c2e);const x=c.get(p.R0b);this.isNgZoneEnabled=x instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function rL(){return new _g(new an([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=LR(this.currentUrlTree,this.rootComponentType),this.transitions=new Au({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ti(i=>0!==i.id),(0,mt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),kr(i=>{let u=!1,c=!1;return Je(i).pipe((0,Yi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kr(h=>{const y=this.browserUrlTree.toString(),E=!this.navigated||h.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return ck(h.source)&&(this.browserUrlTree=h.extractedUrl),Je(h).pipe(kr(x=>{const P=this.transitions.getValue();return r.next(new ZS(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),P!==this.transitions.getValue()?ql.E:Promise.resolve(x)}),function AF(n,e,t,r){return kr(i=>function TF(n,e,t,r,i){return new SF(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,mt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yi.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function FF(n,e,t,r,i,u){return(0,Ds.z)(c=>function RF(n,e,t,r,i,u,c="emptyOnly",h="legacy"){return new kF(n,e,t,r,i,c,h,u).recognize().pipe(kr(y=>null===y?function MF(n){return new ls.y(e=>e.error(n))}(new xF):Je(y)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,mt.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yi.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(V,x)}this.browserUrlTree=x.urlAfterRedirects}const P=new AL(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(P)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:H,restoredState:se,extras:de}=h,je=new ZS(P,this.serializeUrl(V),H,se);r.next(je);const tt=LR(V,this.rootComponentType).snapshot;return Je(i={...h,targetSnapshot:tt,urlAfterRedirects:V,extras:{...de,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ql.E}),(0,Yi.b)(h=>{const y=new xL(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(y)}),(0,mt.U)(h=>i={...h,guards:XL(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function cF(n,e){return(0,Ds.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Je({...t,guardsResult:!0}):function dF(n,e,t,r){return(0,un.D)(n).pipe((0,Ds.z)(i=>function yF(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(h=>{const y=Rw(e)??i,E=Ky(h,y);return Df(function aF(n){return n&&Nw(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(va())})).pipe(Zy()):Je(!0)}(i.component,i.route,t,e,r)),va(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Ds.z)(h=>h&&function rF(n){return"boolean"==typeof n}(h)?function hF(n,e,t,r){return(0,un.D)(e).pipe(yg(i=>qo(function pF(n,e){return null!==n&&e&&e(new OL(n)),Je(!0)}(i.route.parent,r),function fF(n,e){return null!==n&&e&&e(new FL(n)),Je(!0)}(i.route,r),function mF(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function eF(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>dR(()=>Je(c.guards.map(y=>{const E=Rw(c.node)??t,C=Ky(y,E);return Df(function oF(n){return n&&Nw(n.canActivateChild)}(C)?C.canActivateChild(r,n):E.runInContext(()=>C(r,n))).pipe(va())})).pipe(Zy())));return Je(u).pipe(Zy())}(n,i.path,t),function gF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(u=>dR(()=>{const c=Rw(e)??t,h=Ky(u,c);return Df(function sF(n){return n&&Nw(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(va())}));return Je(i).pipe(Zy())}(n,i.route,t))),va(i=>!0!==i,!0))}(r,u,n,e):Je(h)),(0,mt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Yi.b)(h=>{if(i.guardsResult=h.guardsResult,wg(h.guardsResult))throw BR(0,h.guardsResult);const y=new ML(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(y)}),ti(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),lA(h=>{if(h.guards.canActivateChecks.length)return Je(h).pipe((0,Yi.b)(y=>{const E=new RL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),kr(y=>{let E=!1;return Je(y).pipe(function UF(n,e){return(0,Ds.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let u=0;return(0,un.D)(i).pipe(yg(c=>function VF(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!sk(i)&&(u[bw]=i.title),function BF(n,e,t,r){const i=function $F(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const u={};return(0,un.D)(i).pipe((0,Ds.z)(c=>function jF(n,e,t,r){const i=Rw(e)??r,u=Ky(n,i);return Df(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(va(),(0,Yi.b)(h=>{u[c]=h}))),BS(1),function XO(n){return(0,mt.U)(()=>n)}(u),bf(c=>oA(c)?ql.E:Iw(c)))}(u,n,e,r).pipe((0,mt.U)(c=>(n._resolvedData=c,n.data=FR(n,t).resolve,i&&sk(i)&&(n.data[bw]=i.title),null)))}(c.route,r,n,e)),(0,Yi.b)(()=>u++),BS(1),(0,Ds.z)(c=>u===i.length?Je(t):ql.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yi.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,Yi.b)(y=>{const E=new kL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),lA(h=>{const y=E=>{const C=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,Yi.b)(x=>{E.component=x}),(0,mt.U)(()=>{})));for(const x of E.children)C.push(...y(x));return C};return lR(y(h.targetSnapshot.root)).pipe(yf(),Ty(1))}),lA(()=>this.afterPreactivation()),(0,mt.U)(h=>{const y=function jL(n,e,t){const r=xw(n,e._root,t?t._root:void 0);return new OR(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:y}}),(0,Yi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new JL(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Yi.b)({next(){u=!0},complete(){u=!0}}),$S(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),bf(h=>{if(c=!0,HR(h)){jR(h)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new iD(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(y),jR(h)){const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ck(i.source)};this.scheduleNavigation(E,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new kR(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(h))}catch(E){i.reject(E)}}return ql.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const h={...u};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(sA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:h,preserveFragment:y}=r,E=i||this.routerState.root,C=y?this.currentUrlTree.fragment:c;let x=null;switch(h){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),IL(E,this.currentUrlTree,t,x,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=wg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function eU(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...YF}:!1===r?{...JF}:r,wg(t))return _R(this.currentUrlTree,t,i);const u=this.parseUrl(t);return _R(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Eg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let h,y,E;c?(h=c.resolve,y=c.reject,E=c.promise):E=new Promise((P,V)=>{h=P,y=V});const C=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:C,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:h,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new iD(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return lk()},providedIn:"root"}),n})();function ck(n){return"imperative"!==n}class dk{}let rU=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ti(t=>t instanceof Eg),yg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,h=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(h,u.children??u._loadedRoutes))}return(0,un.D)(i).pipe((0,Fi.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=i.pipe((0,Ds.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,un.D)([u,c]).pipe((0,Fi.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(dk),p.LFG(dA))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pA=new p.OlP("");let hk=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Eg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof PR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new PR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Qy(n,e){return{\u0275kind:n,\u0275providers:e}}function gA(n){return[{provide:cA,multi:!0,useValue:n}]}function pk(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(oi),i=n.get(gk);1===n.get(mA)&&r.initialNavigation(),n.get(mk,null,p.XFs.Optional)?.setUpPreloading(),n.get(pA,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const gk=new p.OlP("",{factory:()=>new Kr.x}),mA=new p.OlP("",{providedIn:"root",factory:()=>1});const mk=new p.OlP("");function aU(n){return Qy(0,[{provide:mk,useExisting:rU},{provide:dk,useExisting:n}])}const yk=new p.OlP("ROUTER_FORROOT_GUARD"),uU=[Me,{provide:IR,useClass:HS},{provide:oi,useFactory:lk},Mw,{provide:Cf,useFactory:function fk(n){return n.routerState.root},deps:[oi]},dA];function lU(){return new p.PXZ("Router",oi)}let _k=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uU,[],gA(t),{provide:yk,useFactory:fU,deps:[[oi,new p.FiY,new p.tp0]]},{provide:pD,useValue:r||{}},r?.useHash?{provide:Ee,useClass:ct}:{provide:Ee,useClass:nt},{provide:pA,useFactory:()=>{const n=(0,p.f3M)(oi),e=(0,p.f3M)(Nu),t=(0,p.f3M)(pD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new hk(n,e,t)}},r?.preloadingStrategy?aU(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:lU},r?.initialNavigation?pU(r):[],[{provide:vk,useFactory:pk},{provide:p.tb,multi:!0,useExisting:vk}]]}}static forChild(t){return{ngModule:n,providers:[gA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yk,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[rA]}),n})();function fU(n){return"guarded"}function pU(n){return["disabled"===n.initialNavigation?Qy(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(oi);return()=>{e.setUpLocationChangeListener()}}},{provide:mA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qy(2,[{provide:mA,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(oi),h=e.get(gk);(function i(u){e.get(oi).events.pipe(ti(h=>h instanceof Eg||h instanceof iD||h instanceof kR),(0,mt.U)(h=>h instanceof Eg||h instanceof iD&&(0===h.code||1===h.code)&&null),ti(h=>null!==h),Ty(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||h.closed?Je(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const vk=new p.OlP("");var mU=L(2961);function Yy(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const u=new mU.Hp({next:c=>{r(c),u.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new lg)}});n.subscribe(u)})}let _D=(()=>{class n{constructor(t){this.firestore=t,this.mainCollectionName="rooms"}newRoom(t){t.name=t.name.toLocaleLowerCase(),this.firestore.collection(this.mainCollectionName).doc().set(t)}getRoomAsync(t){var r=this;return(0,fe.Z)(function*(){let i=r.firestore.collection(r.mainCollectionName,u=>u.where("name","==",t)).valueChanges().pipe((0,mt.U)(u=>u.length>0?u[0]:null));return yield Yy(i)})()}userExists(t){return this.firestore.collection(this.mainCollectionName).get().pipe((0,mt.U)(r=>{let u=!1;return r.docs.forEach(c=>{c.data().users.forEach(y=>{console.log(y),u||(u=y.name==t)})}),u}))}updateUserAsync(t,r){var i=this;return(0,fe.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,mt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,fe.Z)(function*(C){let x=C.id,P=C.data();if(t==P.name){let V=P.users.findIndex(H=>H.name==r.name);P.users.splice(V,1),P.users.push(r),yield i.updateRoomByIdAsync(x,P),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield Yy(u)})()}removeUserAsync(t,r){var i=this;return(0,fe.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,mt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,fe.Z)(function*(C){let x=C.id,P=C.data();if(t==P.name){let V=P.users.findIndex(H=>H.name==r);P.users.splice(V,1),yield i.updateRoomByIdAsync(x,P),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield Yy(u)})()}AddUserAsync(t,r){var i=this;return(0,fe.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,mt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,fe.Z)(function*(C){let x=C.id,P=C.data();if(t==P.name){let V=P.users.findIndex(H=>H.name==r.name);V>=0&&P.users.splice(V,1),P.users.push(r),yield i.updateRoomByIdAsync(x,P),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield Yy(u)})()}updateRoomByIdAsync(t,r){var i=this;return(0,fe.Z)(function*(){return yield i.firestore.collection(i.mainCollectionName).doc(t).update(r)})()}revealCardAsync(t,r){var i=this;return(0,fe.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,mt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,fe.Z)(function*(C){let x=C.id,P=C.data();t==P.name&&(P.revealCards=r,yield i.updateRoomByIdAsync(x,P),y=!0)});return function(C){return E.apply(this,arguments)}}()),y}));return yield Yy(u)})()}resetCardAsync(t){var r=this;return(0,fe.Z)(function*(){let i=r.firestore.collection(r.mainCollectionName).get().pipe((0,mt.U)(u=>{let h=!1;return u.docs.forEach(function(){var y=(0,fe.Z)(function*(E){let C=E.id,x=E.data();t==x.name&&(x.revealCards=!1,x.users.forEach(P=>P.selectedCard=""),yield r.updateRoomByIdAsync(C,x),h=!0)});return function(E){return y.apply(this,arguments)}}()),h}));return yield Yy(i)})()}getAllRooms(){return this.firestore.collection(this.mainCollectionName).valueChanges()}listenRoomChanges(t){return this.firestore.collection(this.mainCollectionName).valueChanges().pipe((0,mt.U)(r=>{for(const i of r)if(i.name==t)return i;return{}}))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mx))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yA=(()=>{class n{constructor(){this.storage=window.localStorage}set(t,r){return!!this.storage&&(this.storage.setItem(t,JSON.stringify(r)),!0)}get(t){if(this.storage){let r=this.storage.getItem(t)||JSON.stringify({});return JSON.parse(r)}return null}remove(t){return!!this.storage&&(this.storage.removeItem(t),!0)}clear(){return!!this.storage&&(this.storage.clear(),!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yU(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"div",5),p._UZ(2,"div",6),p.qZA(),p.TgZ(3,"div",7),p._UZ(4,"div",8),p.qZA(),p.TgZ(5,"div",9),p._UZ(6,"div",6),p.qZA(),p.BQk()),2&n){const t=p.oxw().$implicit;p.xp6(1),p.uIk("data-content",t)}}const _U=function(n){return{active:n}},vU=function(){return{"hide-card":!1}};function wU(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",2),p.NdJ("click",function(){const u=p.CHM(t).$implicit,c=p.oxw();return p.KtG(c.onCardSelect(u))}),p.TgZ(2,"div",3),p.YNc(3,yU,7,1,"ng-container",4),p.qZA()(),p.BQk()}if(2&n){const t=e.$implicit,r=p.oxw();p.xp6(1),p.Q6J("ngClass",p.VKq(3,_U,r.cardSelected.value==t)),p.xp6(1),p.Q6J("ngClass",p.DdM(5,vU)),p.xp6(1),p.Q6J("ngIf",!0)}}let EU=(()=>{class n{constructor(t,r){this.firestoreService=t,this.locaStorageService=r,this.cardSelected={},this.cardValues=["0","1","2","3","5","8","13","21","34","55"],this.revealCardEvent=new p.vpe,this.revealCard=!1}ngOnInit(){this.revealCardEvent.subscribe(t=>this.revealCard=t)}onCardSelect(t){this.user=this.locaStorageService.get("user-data"),this.cardSelected={value:t==this.cardSelected.value?"":t},this.user.selectedCard=this.cardSelected.value,this.locaStorageService.set("user-data",this.user),this.firestoreService.updateUserAsync(this.roomName,this.user)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_D),p.Y36(yA))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-poker-card"]],inputs:{cardValues:"cardValues",revealCardEvent:"revealCardEvent",roomName:"roomName"},decls:2,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"card",3,"ngClass","click"],[1,"playing-card","spade",3,"ngClass"],[4,"ngIf"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.YNc(1,wU,4,6,"ng-container",1),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngForOf",r.cardValues))},dependencies:[fn,es,Rn],styles:['.cards[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:absolute;bottom:110px;height:0px;background-color:brown}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;position:absolute;transform:translateZ(0);transform-origin:50% 200%;transition:all .35s ease-in-out}.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{animation:move .35s cubic-bezier(0,-.5,.5,1) forwards 1;transition:transform 2s ease-in-out}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover:not(.active){animation:moveHover .35s cubic-bezier(1,-.5,.5,1) forwards 1}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-16.74deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-11.34deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-5.94deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(4){transform:rotate(-.54deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(5){transform:rotate(4.86deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(6){transform:rotate(10.26deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(7){transform:rotate(15.66deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(8){transform:rotate(21.06deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(9){transform:rotate(26.46deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(10){transform:rotate(31.86deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(11){transform:rotate(37.26deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(12){transform:rotate(42.66deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(13){transform:rotate(48.06deg)}@keyframes move{to{transform:translateY(-110px)}}@keyframes moveHover{0%{top:0}to{top:-20px}}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:absolute;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:absolute}.bottom[_ngcontent-%COMP%]{bottom:0;right:0;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}']}),n})();function IU(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"small",15),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.removeUser())}),p._uU(1,"Remover"),p.qZA()}}const bU=function(n){return{"active-flip-card":n}},DU=function(n){return{"low-opacity":n}};let CU=(()=>{class n{constructor(t){this.firestoreService=t,this.revealCardEvent=new p.vpe,this.enableRemoveUser=new p.vpe,this.roomName="",this.user={name:"",selectedCard:"",isSpectator:!0},this.revealCard=!1,this.canRemoveUser=!1}ngOnInit(){this.revealCardEvent.subscribe(t=>this.revealCard=t),this.enableRemoveUser.subscribe(t=>this.canRemoveUser=t)}ngOnDestroy(){}removeUser(){confirm(`Deseja remover o usu\xe1rio ${this.user.name}?`)&&this.firestoreService.removeUserAsync(this.roomName,this.user.name)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_D))},n.\u0275cmp=p.Xpm({type:n,selectors:[["single-card"]],inputs:{revealCardEvent:"revealCardEvent",enableRemoveUser:"enableRemoveUser",roomName:"roomName",user:"user"},decls:20,vars:9,consts:[[2,"max-width","150px","overflow-x","hidden"],[1,"flip-card",3,"ngClass"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"cards"],[1,"card"],[1,"playing-card","spade","hide-card",3,"ngClass"],[1,"flip-card-back"],[1,"playing-card","spade"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"],["class","remove",3,"click",4,"ngIf"],[1,"remove",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"small"),p._uU(2),p.qZA()(),p.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),p._UZ(8,"div",6),p.qZA()()(),p.TgZ(9,"div",7)(10,"div",4)(11,"div",5)(12,"div",8)(13,"div",9),p._UZ(14,"div",10),p.qZA(),p.TgZ(15,"div",11),p._UZ(16,"div",12),p.qZA(),p.TgZ(17,"div",13),p._UZ(18,"div",10),p.qZA()()()()()()(),p.YNc(19,IU,2,0,"small",14)),2&t&&(p.xp6(2),p.Oqu(r.user.name),p.xp6(1),p.Q6J("ngClass",p.VKq(5,bU,r.revealCard&&""!=r.user.selectedCard)),p.xp6(5),p.Q6J("ngClass",p.VKq(7,DU,""==r.user.selectedCard)),p.xp6(5),p.uIk("data-content",r.user.selectedCard),p.xp6(6),p.Q6J("ngIf",r.canRemoveUser))},dependencies:[fn,Rn],styles:['.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .low-opacity[_ngcontent-%COMP%]{opacity:.2}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:relative;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:relative}.bottom[_ngcontent-%COMP%]{top:85%;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:150px;height:230px;perspective:1000px}.flip-card-inner[_ngcontent-%COMP%]{text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.active-flip-card[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{border-radius:5%;z-index:2}.flip-card-back[_ngcontent-%COMP%]{border-radius:5%;transform:rotateY(180deg);z-index:1}.remove[_ngcontent-%COMP%]{margin-top:2px;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:red}']}),n})(),TU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-loading"]],decls:16,vars:0,consts:[[1,"loading"],[1,"loading-text"],[1,"loading-text-words"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"span",2),p._uU(3,"L"),p.qZA(),p.TgZ(4,"span",2),p._uU(5,"O"),p.qZA(),p.TgZ(6,"span",2),p._uU(7,"A"),p.qZA(),p.TgZ(8,"span",2),p._uU(9,"D"),p.qZA(),p.TgZ(10,"span",2),p._uU(11,"I"),p.qZA(),p.TgZ(12,"span",2),p._uU(13,"N"),p.qZA(),p.TgZ(14,"span",2),p._uU(15,"G"),p.qZA()()())},styles:['@import"https://fonts.googleapis.com/css?family=Quattrocento+Sans";.loading[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999}.loading-text[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;text-align:center;width:100%;height:100px;line-height:100px}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;color:#fff;font-family:Quattrocento Sans,sans-serif}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){filter:blur(0px);animation:blur-text 1.5s 0s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){filter:blur(0px);animation:blur-text 1.5s .2s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){filter:blur(0px);animation:blur-text 1.5s .4s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){filter:blur(0px);animation:blur-text 1.5s .6s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){filter:blur(0px);animation:blur-text 1.5s .8s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){filter:blur(0px);animation:blur-text 1.5s 1s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){filter:blur(0px);animation:blur-text 1.5s 1.2s infinite linear alternate}@keyframes blur-text{0%{filter:blur(0px)}to{filter:blur(4px)}}']}),n})();function SU(n,e){1&n&&p._UZ(0,"img",10),2&n&&p.Q6J("@Fading",void 0)}function AU(n,e){1&n&&p._UZ(0,"img",11),2&n&&p.Q6J("@Fading",void 0)}function xU(n,e){1&n&&p._UZ(0,"img",12),2&n&&p.Q6J("@Fading",void 0)}function MU(n,e){1&n&&p._UZ(0,"img",13),2&n&&p.Q6J("@Fading",void 0)}function RU(n,e){1&n&&p._UZ(0,"img",14),2&n&&p.Q6J("@Fading",void 0)}function kU(n,e){1&n&&p._UZ(0,"img",15),2&n&&p.Q6J("@Fading",void 0)}function PU(n,e){1&n&&p._UZ(0,"img",16),2&n&&p.Q6J("@Fading",void 0)}function NU(n,e){1&n&&p._UZ(0,"img",17),2&n&&p.Q6J("@Fading",void 0)}function OU(n,e){1&n&&p._UZ(0,"img",18),2&n&&p.Q6J("@Fading",void 0)}function LU(n,e){1&n&&p._UZ(0,"img",19),2&n&&p.Q6J("@Fading",void 0)}let FU=(()=>{class n{constructor(){this.value=0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-point-react"]],inputs:{value:"value"},decls:11,vars:10,consts:[["src","./assets/img/mr_incredible_0.png",4,"ngIf"],["src","./assets/img/mr_incredible_1.png",4,"ngIf"],["src","./assets/img/mr_incredible_2.png",4,"ngIf"],["src","./assets/img/mr_incredible_3.png",4,"ngIf"],["src","./assets/img/mr_incredible_4.png",4,"ngIf"],["src","./assets/img/mr_incredible_5.png",4,"ngIf"],["src","./assets/img/mr_incredible_6.png",4,"ngIf"],["src","./assets/img/mr_incredible_7.png",4,"ngIf"],["src","./assets/img/mr_incredible_8.png",4,"ngIf"],["src","./assets/img/mr_incredible_9.png",4,"ngIf"],["src","./assets/img/mr_incredible_0.png"],["src","./assets/img/mr_incredible_1.png"],["src","./assets/img/mr_incredible_2.png"],["src","./assets/img/mr_incredible_3.png"],["src","./assets/img/mr_incredible_4.png"],["src","./assets/img/mr_incredible_5.png"],["src","./assets/img/mr_incredible_6.png"],["src","./assets/img/mr_incredible_7.png"],["src","./assets/img/mr_incredible_8.png"],["src","./assets/img/mr_incredible_9.png"]],template:function(t,r){1&t&&(p.TgZ(0,"div"),p.YNc(1,SU,1,1,"img",0),p.YNc(2,AU,1,1,"img",1),p.YNc(3,xU,1,1,"img",2),p.YNc(4,MU,1,1,"img",3),p.YNc(5,RU,1,1,"img",4),p.YNc(6,kU,1,1,"img",5),p.YNc(7,PU,1,1,"img",6),p.YNc(8,NU,1,1,"img",7),p.YNc(9,OU,1,1,"img",8),p.YNc(10,LU,1,1,"img",9),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngIf",r.value<=1),p.xp6(1),p.Q6J("ngIf",r.value>1&&r.value<=3),p.xp6(1),p.Q6J("ngIf",r.value>3&&r.value<=5),p.xp6(1),p.Q6J("ngIf",r.value>5&&r.value<=8),p.xp6(1),p.Q6J("ngIf",r.value>8&&r.value<=9),p.xp6(1),p.Q6J("ngIf",r.value>9&&r.value<=20),p.xp6(1),p.Q6J("ngIf",r.value>20&&r.value<=30),p.xp6(1),p.Q6J("ngIf",r.value>30&&r.value<=40),p.xp6(1),p.Q6J("ngIf",r.value>40&&r.value<=70),p.xp6(1),p.Q6J("ngIf",r.value>70))},dependencies:[Rn],styles:["div[_ngcontent-%COMP%]{position:relative;width:100vw;display:flex;justify-content:center}img[_ngcontent-%COMP%]{width:100px;position:fixed}"],data:{animation:[_M("Fading",[Pb("void",jy({opacity:0})),Pb("*",jy({opacity:1})),Nb(":enter",kb("300ms ease-out")),Nb(":leave",kb("300ms ease-in"))])]}}),n})();function UU(n,e){1&n&&(p.ynx(0),p._UZ(1,"app-loading"),p.BQk())}function VU(n,e){if(1&n&&(p.TgZ(0,"div")(1,"div",13),p._UZ(2,"single-card",14),p.qZA()()),2&n){const t=e.$implicit,r=p.oxw(2);p.Q6J("@Fading",void 0),p.xp6(2),p.Q6J("enableRemoveUser",r.enableRemoveUser)("roomName",r.roomName)("revealCardEvent",r.revealCard)("user",t)}}function BU(n,e){if(1&n&&(p.TgZ(0,"div")(1,"div",15)(2,"span",16),p._uU(3),p.qZA()(),p.TgZ(4,"div",17),p._UZ(5,"app-point-react",18),p.qZA()()),2&n){const t=p.oxw(2);p.Q6J("@Fading",void 0),p.xp6(3),p.Oqu(t.average),p.xp6(2),p.Q6J("value",t.average)}}function $U(n,e){if(1&n&&(p.TgZ(0,"div",19)(1,"div"),p._UZ(2,"app-poker-card",20),p.qZA()()),2&n){const t=p.oxw(2);p.xp6(2),p.Q6J("revealCardEvent",t.revealCard)("roomName",t.roomName)}}function jU(n,e){if(1&n&&(p.TgZ(0,"li"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t.name)}}function HU(n,e){if(1&n&&(p.TgZ(0,"div",21)(1,"h4"),p._uU(2,"Espectadores"),p.qZA(),p.TgZ(3,"ul"),p.YNc(4,jU,2,1,"li",3),p.qZA()()),2&n){const t=p.oxw(2);p.xp6(4),p.Q6J("ngForOf",t.filterSpactators())}}function zU(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",22)(1,"button",12),p.NdJ("click",function(){p.CHM(t);const i=p.oxw(2);return p.KtG(i.revealCards())}),p._uU(2,"Virar"),p.qZA(),p.TgZ(3,"button",12),p.NdJ("click",function(){p.CHM(t);const i=p.oxw(2);return p.KtG(i.hideCards())}),p._uU(4,"Desvirar"),p.qZA()()}}function GU(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"div",2),p.YNc(2,VU,3,5,"div",3),p.qZA(),p.YNc(3,BU,6,3,"div",4),p.YNc(4,$U,3,2,"div",5),p.TgZ(5,"div"),p.YNc(6,HU,5,1,"div",6),p.TgZ(7,"div",7)(8,"div"),p._uU(9),p.qZA(),p.TgZ(10,"div"),p._uU(11),p.qZA(),p.YNc(12,zU,5,0,"div",8),p.qZA(),p.TgZ(13,"div",9)(14,"label",10),p._uU(15),p.qZA(),p._UZ(16,"input",11),p.TgZ(17,"button",12),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.alterName())}),p._uU(18,"Alterar nome"),p.qZA()()()()}if(2&n){const t=p.oxw();p.xp6(2),p.Q6J("ngForOf",t.filterPlayers()),p.xp6(1),p.Q6J("ngIf",t.reveal),p.xp6(1),p.Q6J("ngIf",!(null!=t.user&&t.user.isSpectator)),p.xp6(2),p.Q6J("ngIf",t.filterSpactators().length>0),p.xp6(3),p.AsE("",t.spactatorCount," ",t.spactatorCount>1?"Espectadores":"Espectador",""),p.xp6(2),p.AsE("",t.playerCount," ",t.playerCount>1?"Jogadores":"Jogador",""),p.xp6(1),p.Q6J("ngIf",!(null!=t.user&&t.user.isSpectator)),p.xp6(3),p.hij("Nome atual: ",null==t.user?null:t.user.name,"")}}let qU=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.activatedroute=r,this.firestoreService=i,this.locaStorageService=u,this.hotkeysService=c,this.roomChanges=new Yb.w0,this.loading=!0,this.roomName="",this.users=[],this.spactatorCount=0,this.playerCount=0,this.revealCard=new p.vpe,this.enableRemoveUser=new p.vpe,this.reveal=!1,this.average=0,this.hotkeysService.add(new Ew("alt+shift+k",h=>(this.enableRemoveUser.emit(!0),!1)))}ngOnInit(){this.roomName=this.activatedroute.snapshot.paramMap.get("roomName"),this.checkIfRoomExists()}ngOnDestroy(){}checkIfRoomExists(){var t=this;return(0,fe.Z)(function*(){let r=yield t.firestoreService.getRoomAsync(t.roomName);t.user=t.locaStorageService.get("user-data"),null!=r&&t.user.name?(r.users.findIndex(i=>i.name==t.user?.name)<0&&(yield t.firestoreService.AddUserAsync(t.roomName,t.user)),t.revealCard.subscribe(i=>{t.reveal=i}),t.roomChanges=t.firestoreService.listenRoomChanges(t.roomName).subscribe({next:i=>{if(i.users.findIndex(h=>h.name==t.user?.name)<0)return alert("Voc\xea foi removido da sala"),void t.router.navigate(["/"]);t.users=t.users.filter(h=>i.users.map(y=>y.name).includes(h.name));for(const h of i.users)if(h.name!=t.user?.name){let y=t.users.find(E=>E.name==h.name);y?y.selectedCard=h.selectedCard:t.users.push(h)}let u=0,c=0;i.users.forEach(h=>{!h.isSpectator&&!isNaN(Number(h.selectedCard))&&(u+=Number(h.selectedCard),c++)}),t.average=Math.trunc(u/c),t.spactatorCount=i.users.filter(h=>h.isSpectator).length,t.playerCount=i.users.filter(h=>!h.isSpectator).length,t.revealCard.emit(i.revealCards)}}),t.loading=!1):t.router.navigate(["/"])})()}handleUserExiting(){var t=this;return(0,fe.Z)(function*(){t.roomChanges.unsubscribe(),yield t.firestoreService.removeUserAsync(t.roomName,t.user.name)})()}revealCards(){this.firestoreService.revealCardAsync(this.roomName,!0)}hideCards(){this.firestoreService.revealCardAsync(this.roomName,!1)}resetCards(){this.firestoreService.resetCardAsync(this.roomName)}filterPlayers(){return this.users.filter(t=>!t.isSpectator)}filterSpactators(){return this.users.filter(t=>t.isSpectator)}alterName(){var t=document.getElementById("newName");if(t.value)if(this.users.findIndex(r=>r.name==t.value)<0){let r=this.locaStorageService.get("user-data");r.name=t.value,this.locaStorageService.set("user-data",r),this.user=r,this.firestoreService.updateUserAsync(this.roomName,r),t.value=""}else alert("N\xe3o foi poss\xedvel renomear")}onFocus(t){}onBlur(t){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(oi),p.Y36(Cf),p.Y36(_D),p.Y36(yA),p.Y36(uR))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-room"]],hostBindings:function(t,r){1&t&&p.NdJ("focus",function(u){return r.onFocus(u)},!1,p.Jf7)("blur",function(u){return r.onBlur(u)},!1,p.Jf7)},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showRoom",""],[1,"grid-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","current-player",4,"ngIf"],["style","margin-left: 20px;",4,"ngIf"],[2,"position","fixed","bottom","5px","margin-left","20px"],["style","margin-top: 10px;",4,"ngIf"],[2,"position","fixed","bottom","5px","margin-left","85%"],["for",""],["type","text","name","newName","id","newName","placeholder","Novo nome"],[3,"click"],[1,"grid-item"],[3,"enableRemoveUser","roomName","revealCardEvent","user"],[1,"average"],[2,"font-size","2rem"],[2,"width","100vw","display","flex","justify-content","center"],[3,"value"],[1,"current-player"],[3,"revealCardEvent","roomName"],[2,"margin-left","20px"],[2,"margin-top","10px"]],template:function(t,r){if(1&t&&(p.YNc(0,UU,2,0,"ng-container",0),p.YNc(1,GU,19,10,"ng-template",null,1,p.W1O)),2&t){const i=p.MAs(2);p.Q6J("ngIf",r.loading)("ngIfElse",i)}},dependencies:[es,Rn,EU,CU,TU,FU],styles:[".average[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px}.current-player[_ngcontent-%COMP%]{display:flex;justify-content:center;position:fixed;bottom:0;left:46%;background-color:beige}"],data:{animation:[_M("Fading",[Pb("void",jy({opacity:0})),Pb("*",jy({opacity:1})),Nb(":enter",kb("800ms ease-out")),Nb(":leave",kb("800ms ease-in"))])]}}),n})();function WU(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"li")(2,"div",6)(3,"h3"),p._uU(4),p.ALo(5,"titlecase"),p.qZA(),p.TgZ(6,"button",7),p.NdJ("click",function(){const u=p.CHM(t).$implicit,c=p.oxw(2);return p.KtG(c.enterRoom(u,!1))}),p._uU(7,"Entrar como jogador"),p.qZA(),p.TgZ(8,"button",7),p.NdJ("click",function(){const u=p.CHM(t).$implicit,c=p.oxw(2);return p.KtG(c.enterRoom(u,!0))}),p._uU(9,"Entrar como espectador"),p.qZA()()(),p.BQk()}if(2&n){const t=e.$implicit;p.xp6(4),p.Oqu(p.lcZ(5,1,t))}}function KU(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"div")(2,"h1"),p._uU(3,"Salas"),p.qZA(),p.TgZ(4,"ul"),p.YNc(5,WU,10,3,"ng-container",2),p.qZA(),p._UZ(6,"br")(7,"hr")(8,"br"),p.TgZ(9,"div")(10,"label",3),p._uU(11,"Nova sala"),p.qZA(),p._UZ(12,"br")(13,"input",4),p.TgZ(14,"button",5),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.createNewRoom())}),p._uU(15,"Criar"),p.qZA()()(),p.BQk()}if(2&n){const t=p.oxw();p.xp6(5),p.Q6J("ngForOf",t.rooms)}}function ZU(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"label",8),p._uU(2,"Informe um nome de usu\xe1rio"),p.qZA(),p._UZ(3,"br")(4,"input",9),p.TgZ(5,"button",5),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.saveUserName())}),p._uU(6,"Salvar"),p.qZA()()}}let wk=(()=>{class n{constructor(t,r,i){this.router=t,this.localStorage=r,this.firestoreService=i,this.rooms=[],this.getAllRooms=new Yb.w0}ngOnInit(){this.getAllRooms=this.firestoreService.getAllRooms().subscribe(t=>this.rooms=t.map(r=>r.name)),this.userData=this.localStorage.get("user-data")}ngOnDestroy(){this.getAllRooms.unsubscribe()}createNewRoom(){let t=document.getElementById("new-room").value;if(this.rooms.includes(t.toLowerCase()))confirm(`Uma sala com o nome ${t}, j\xe1 existe. Deseja ser redirecionado?`)&&this.router.navigate([`room/${t}`]);else{let r=this.localStorage.get("user-data");this.firestoreService.newRoom({name:t,revealCards:!1,calc:0,users:[{name:r.name||"",selectedCard:"",isSpectator:!0}]})}}saveUserName(){let t=document.getElementById("user-name").value;this.firestoreService.userExists(t).subscribe(r=>{r?alert("Nome de usu\xe1rio j\xe1 cadastrado, escolha outro!"):(this.userData={name:t,selectedCard:"",isSpectator:!0},this.localStorage.set("user-data",this.userData))})}enterRoom(t,r){this.userData.isSpectator=r,this.localStorage.set("user-data",this.userData),this.router.navigate([`room/${t}`])}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(oi),p.Y36(yA),p.Y36(_D))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["setUserName",""],[4,"ngFor","ngForOf"],["for","new-room"],["type","text","name","","id","new-room"],[3,"click"],[2,"display","flex","width","100%","gap","4px"],[2,"cursor","pointer",3,"click"],["for","user-name"],["type","text","name","","id","user-name"]],template:function(t,r){if(1&t&&(p.YNc(0,KU,16,1,"ng-container",0),p.YNc(1,ZU,7,0,"ng-template",null,1,p.W1O)),2&t){const i=p.MAs(2);p.Q6J("ngIf",null==r.userData?null:r.userData.name)("ngIfElse",i)}},dependencies:[es,Rn,xf]}),n})();const QU=[{path:"",component:wk},{path:"room/:roomName",component:qU},{path:"**",component:wk}];let YU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[_k.forRoot(QU),_k]}),n})(),JU=(()=>{class n{constructor(){this.title="Planning Poker"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[nA]}),n})(),XU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[JU]}),n.\u0275inj=p.cJS({imports:[yr.hO.initializeApp(sR_firebaseConfig),qk.enablePersistence(),L1,LO,il,YU,UO.forRoot()]}),n})();(0,p.G48)(),rl().bootstrapModule(XU).catch(n=>console.error(n))},5867:(lt,Se,L)=>{"use strict";L.d(Se,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=L(9681);(0,p.registerVersion)("firebase","9.14.0","app")},127:(lt,Se,L)=>{"use strict";L.d(Se,{Z:()=>p.Z});var p=L(3942);p.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(lt,Se,L)=>{"use strict";L.r(Se);var p=L(5861),ee=L(3942),N=L(2090),ue=L(9681),re=L(1877),ye=L(655),he=L(4859);const be=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ee=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new re.Yd("@firebase/auth");function ct(_,...f){nt.logLevel<=re.in.ERROR&&nt.error(`Auth (${ue.SDK_VERSION}): ${_}`,...f)}function Me(_,...f){throw ce(_,...f)}function Ie(_,...f){return ce(_,...f)}function we(_,f,m){const w=Object.assign(Object.assign({},it()),{[f]:m});return new N.LL("auth","Firebase",w).create(f,{appName:_.name})}function J(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Me(_,"argument-error"),we(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ce(_,...f){if("string"!=typeof _){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(m,...w)}return Ee.create(_,...f)}function U(_,f,...m){if(!_)throw ce(f,...m)}function oe(_){const f="INTERNAL ASSERTION FAILED: "+_;throw ct(f),new Error(f)}function W(_,f){_||oe(f)}const X=new Map;function ie(_){W(_ instanceof Function,"Expected a class definition");let f=X.get(_);return f?(W(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,X.set(_,f),f)}function Ne(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ht(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Xe{constructor(f,m){this.shortDelay=f,this.longDelay=m,W(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function qt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Et(_,f){W(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class pt{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const at={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zt=new Xe(3e4,6e4);function xt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function It(_,f,m,w){return yn.apply(this,arguments)}function yn(){return(yn=(0,p.Z)(function*(_,f,m,w,A={}){return Xn(_,A,(0,p.Z)(function*(){let k={},q={};w&&("GET"===f?q=w:k={body:JSON.stringify(w)});const ge=(0,N.xO)(Object.assign({key:_.config.apiKey},q)).slice(1),Be=yield _._getAdditionalHeaders();return Be["Content-Type"]="application/json",_.languageCode&&(Be["X-Firebase-Locale"]=_.languageCode),pt.fetch()(wi(_,_.config.apiHost,m,ge),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Xn(_,f,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(_,f,m){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},at),f);try{const A=new ai(_),k=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const q=yield k.json();if("needConfirmation"in q)throw ui(_,"account-exists-with-different-credential",q);if(k.ok&&!("errorMessage"in q))return q;{const ge=k.ok?q.errorMessage:q.error.message,[Be,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw ui(_,"credential-already-in-use",q);if("EMAIL_EXISTS"===Be)throw ui(_,"email-already-in-use",q);if("USER_DISABLED"===Be)throw ui(_,"user-disabled",q);const Pt=w[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw we(_,Pt,rt);Me(_,Pt)}}catch(A){if(A instanceof N.ZR)throw A;Me(_,"network-request-failed")}})).apply(this,arguments)}function Pr(_,f,m,w){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,p.Z)(function*(_,f,m,w,A={}){const k=yield It(_,f,m,w,A);return"mfaPendingCredential"in k&&Me(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function wi(_,f,m,w){const A=`${f}${m}?${w}`;return _.config.emulator?Et(_.config,A):`${_.config.apiScheme}://${A}`}class ai{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Ie(this.auth,"network-request-failed")),Zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ui(_,f,m){const w={appName:_.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=Ie(_,f,w);return A.customData._tokenResponse=m,A}function Ye(){return(Ye=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Nr(_,f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function er(_,f){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ri(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function vn(){return(vn=(0,p.Z)(function*(_,f=!1){const m=(0,N.m9)(_),w=yield m.getIdToken(f),A=gt(w);U(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,q=k?.sign_in_provider;return{claims:A,token:w,authTime:Ri(Tt(A.auth_time)),issuedAtTime:Ri(Tt(A.iat)),expirationTime:Ri(Tt(A.exp)),signInProvider:q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(_){return 1e3*Number(_)}function gt(_){var f;const[m,w,A]=_.split(".");if(void 0===m||void 0===w||void 0===A)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,N.tV)(w);return k?JSON.parse(k):(ct("Failed to decode base64 JWT payload"),null)}catch(k){return ct("Caught error parsing JWT payload as JSON",null===(f=k)||void 0===f?void 0:f.toString()),null}}function Ir(_,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&Zr(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Zr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class $t{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Ts{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(_){return ki.apply(this,arguments)}function ki(){return(ki=(0,p.Z)(function*(_){var f;const m=_.auth,w=yield _.getIdToken(),A=yield Ir(_,er(m,{idToken:w}));U(A?.users.length,m,"internal-error");const k=A.users[0];_._notifyReloadListener(k);const q=null!==(f=k.providerUserInfo)&&void 0!==f&&f.length?ot(k.providerUserInfo):[],ge=jr(_.providerData,q),Pt=!!_.isAnonymous&&!(_.email&&k.passwordHash||ge?.length),Dt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ge,metadata:new Ts(k.createdAt,k.lastLoginAt),isAnonymous:Pt};Object.assign(_,Dt)})).apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(_){const f=(0,N.m9)(_);yield ln(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function jr(_,f){return[..._.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function ot(_){return _.map(f=>{var{providerId:m}=f,w=(0,ye._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function st(){return(st=(0,p.Z)(function*(_,f){const m=yield Xn(_,{},(0,p.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=_.config,q=wi(_,A,"/v1/token",`key=${k}`),ge=yield _._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",pt.fetch()(q,{method:"POST",headers:ge,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function hn(_){const f=gt(_);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,p.Z)(function*(){return U(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:q}=yield function xe(_,f){return st.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,k,Number(q))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:k}=m,q=new Nt;return w&&(U("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),A&&(U("string"==typeof A,"internal-error",{appName:f}),q.accessToken=A),k&&(U("number"==typeof k,"internal-error",{appName:f}),q.expirationTime=k),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return oe("not implemented")}}function Rt(_,f){U("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Wt{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,k=(0,ye._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Ts(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const w=yield Ir(m,m.stsTokenManager.getToken(m.auth,f));return U(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Gn(_){return vn.apply(this,arguments)}(this,f)}reload(){return function cn(_){return tr.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Wt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,p.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield ln(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Ir(f,function Ca(_,f){return Ye.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,k,q,ge,Be,rt,Pt;const Dt=null!==(w=m.displayName)&&void 0!==w?w:void 0,ar=null!==(A=m.email)&&void 0!==A?A:void 0,ur=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,Gs=null!==(q=m.photoURL)&&void 0!==q?q:void 0,ap=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,up=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,lp=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,g_=null!==(Pt=m.lastLoginAt)&&void 0!==Pt?Pt:void 0,{uid:zg,emailVerified:m_,isAnonymous:vl,providerData:tu,stsTokenManager:Uc}=m;U(zg&&Uc,f,"internal-error");const cp=Nt.fromJSON(this.name,Uc);U("string"==typeof zg,f,"internal-error"),Rt(Dt,f.name),Rt(ar,f.name),U("boolean"==typeof m_,f,"internal-error"),U("boolean"==typeof vl,f,"internal-error"),Rt(ur,f.name),Rt(Gs,f.name),Rt(ap,f.name),Rt(up,f.name),Rt(lp,f.name),Rt(g_,f.name);const yh=new Wt({uid:zg,auth:f,email:ar,emailVerified:m_,displayName:Dt,isAnonymous:vl,photoURL:Gs,phoneNumber:ur,tenantId:ap,stsTokenManager:cp,createdAt:lp,lastLoginAt:g_});return tu&&Array.isArray(tu)&&(yh.providerData=tu.map(nu=>Object.assign({},nu))),up&&(yh._redirectEventId=up),yh}static _fromIdTokenResponse(f,m,w=!1){return(0,p.Z)(function*(){const A=new Nt;A.updateFromServerResponse(m);const k=new Wt({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield ln(k),k})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,p.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,p.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return _.type="NONE",_})();function K(_,f,m){return`firebase:${_}:${f}:${m}`}class Ce{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:k}=this.auth;this.fullUserKey=K(this.userKey,A.apiKey,k),this.fullPersistenceKey=K("persistence",A.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Wt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Ce(ie(B),f,w);const A=(yield Promise.all(m.map(function(){var rt=(0,p.Z)(function*(Pt){if(yield Pt._isAvailable())return Pt});return function(Pt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let k=A[0]||ie(B);const q=K(w,f.config.apiKey,f.name);let ge=null;for(const rt of m)try{const Pt=yield rt._get(q);if(Pt){const Dt=Wt._fromJSON(f,Pt);rt!==k&&(ge=Dt),k=rt;break}}catch{}const Be=A.filter(rt=>rt._shouldAllowMigration);return k._shouldAllowMigration&&Be.length?(k=Be[0],ge&&(yield k._set(q,ge.toJSON())),yield Promise.all(m.map(function(){var rt=(0,p.Z)(function*(Pt){if(Pt!==k)try{yield Pt._remove(q)}catch{}});return function(Pt){return rt.apply(this,arguments)}}())),new Ce(k,f,w)):new Ce(k,f,w)})()}}function Y(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(_n(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ge(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if(ze(f))return"Webos";if(yt(f))return"Safari";if((f.includes("chrome/")||sn(f))&&!f.includes("edge/"))return"Chrome";if(Xt(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ge(_=(0,N.z$)()){return/firefox\//i.test(_)}function yt(_=(0,N.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function sn(_=(0,N.z$)()){return/crios\//i.test(_)}function _n(_=(0,N.z$)()){return/iemobile/i.test(_)}function Xt(_=(0,N.z$)()){return/android/i.test(_)}function Ve(_=(0,N.z$)()){return/blackberry/i.test(_)}function ze(_=(0,N.z$)()){return/webos/i.test(_)}function Kt(_=(0,N.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ys(_=(0,N.z$)()){return Kt(_)||Xt(_)||ze(_)||Ve(_)||/windows phone/i.test(_)||_n(_)}function Ss(_,f=[]){let m;switch(_){case"Browser":m=Y((0,N.z$)());break;case"Worker":m=`${Y((0,N.z$)())}-${_}`;break;default:m=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${w}`}class ko{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=k=>new Promise((q,ge)=>{try{q(f(k))}catch(Be){ge(Be)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var w;if(m.auth.currentUser===f)return;const A=[];try{for(const k of m.queue)yield k(f),k.onAbort&&A.push(k.onAbort)}catch(k){A.reverse();for(const q of A)try{q()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=k)||void 0===w?void 0:w.message})}})()}}class zt{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Js(this),this.idTokenSubscription=new Js(this),this.beforeStateQueue=new ko(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,k;if(!w._deleted&&(w.persistenceManager=yield Ce.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let k=A,q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Be=k?._redirectEventId,rt=yield m.tryRedirectSignIn(f);(!ge||ge===Be)&&rt?.user&&(k=rt.user,q=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(k)}catch(ge){k=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var w;try{yield ln(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&U(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return f&&U(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,p.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&ie(f)||m._popupRedirectResolver;U(w,m,"argument-error"),m.redirectPersistenceManager=yield Ce.create(m,[ie(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return U(q,this,"internal-error"),q.then(()=>k(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Sn(_){return(0,N.m9)(_)}class Js{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function As(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class br{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return oe("not implemented")}_getIdTokenResponse(f){return oe("not implemented")}_linkToIdToken(f,m){return oe("not implemented")}_getReauthenticationResolver(f){return oe("not implemented")}}function Kn(_,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:resetPassword",xt(_,f))})).apply(this,arguments)}function fn(_,f){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ec(_,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:update",xt(_,f))})).apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPassword",xt(_,f))})).apply(this,arguments)}function Ms(_,f){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:sendOobCode",xt(_,f))})).apply(this,arguments)}function Rn(_,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,p.Z)(function*(_,f){return Ms(_,f)})).apply(this,arguments)}function pr(_,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,p.Z)(function*(_,f){return Ms(_,f)})).apply(this,arguments)}function Ru(_,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(_,f){return Ms(_,f)})).apply(this,arguments)}function nc(_,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(_,f){return Ms(_,f)})).apply(this,arguments)}function Sd(){return(Sd=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",xt(_,f))})).apply(this,arguments)}function rc(){return(rc=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",xt(_,f))})).apply(this,arguments)}class ic extends br{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new ic(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new ic(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Ta(_,f){return es.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Sf(_,f){return Sd.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return fn(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Af(_,f){return rc.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function rr(_,f){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithIdp",xt(_,f))})).apply(this,arguments)}class ts extends br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ts(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,k=(0,ye._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const q=new ts(w,A);return q.idToken=k.idToken||void 0,q.accessToken=k.accessToken||void 0,q.secret=k.secret,q.nonce=k.nonce,q.pendingToken=k.pendingToken||null,q}_getIdTokenResponse(f){return rr(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,rr(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,rr(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,N.xO)(m)}return f}}function Cg(_,f){return xd.apply(this,arguments)}function xd(){return(xd=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:sendVerificationCode",xt(_,f))})).apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",xt(_,f))})).apply(this,arguments)}function Md(){return(Md=(0,p.Z)(function*(_,f){const m=yield Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",xt(_,f));if(m.temporaryProof)throw ui(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Tg={USER_NOT_FOUND:"user-not-found"};function Rd(){return(Rd=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",xt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Tg)})).apply(this,arguments)}class ks extends br{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new ks({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new ks({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function sc(_,f){return Rs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function xf(_,f){return Md.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Sg(_,f){return Rd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:k}=f;return w||m||A||k?new ks({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:k}):null}}class ku{constructor(f){var m,w,A,k,q,ge;const Be=(0,N.zd)((0,N.pd)(f)),rt=null!==(m=Be.apiKey)&&void 0!==m?m:null,Pt=null!==(w=Be.oobCode)&&void 0!==w?w:null,Dt=function kd(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);U(rt&&Pt&&Dt,"argument-error"),this.apiKey=rt,this.operation=Dt,this.code=Pt,this.continueUrl=null!==(k=Be.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(q=Be.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ge=Be.tenantId)&&void 0!==ge?ge:null}static parseLink(f){const m=function Pd(_){const f=(0,N.zd)((0,N.pd)(_)).link,m=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(_)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||m||f||_}(f);try{return new ku(m)}catch{return null}}}let Ni=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,w){return ic._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=ku.parseLink(w);return U(A,"argument-error"),ic._fromEmailAndCode(m,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ns{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class rs extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class eo extends rs{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return U("providerId"in m&&"signInMethod"in m,"argument-error"),ts._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return eo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return eo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:k,nonce:q,providerId:ge}=f;if(!w&&!A&&!m&&!k||!ge)return null;try{return new eo(ge)._credential({idToken:m,accessToken:w,nonce:q,pendingToken:k})}catch{return null}}}let Aa=(()=>{class _ extends rs{constructor(){super("facebook.com")}static credential(m){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Pu=(()=>{class _ extends rs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),oc=(()=>{class _ extends rs{constructor(){super("github.com")}static credential(m){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Po extends br{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return rr(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,rr(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,rr(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:k}=m;return w&&A&&k&&w===A?new Po(w,k):null}static _create(f,m){return new Po(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ci extends ns{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ci.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ci.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Po.fromJSON(f);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Po._create(w,m)}catch{return null}}}let Yr=(()=>{class _ extends rs{constructor(){super("twitter.com")}static credential(m,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function No(_,f){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signUp",xt(_,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,p.Z)(function*(){const k=yield Wt._fromIdTokenResponse(f,w,A),q=kf(w);return new Dr({user:k,providerId:q,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=kf(w);return new Dr({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function kf(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function kn(){return(kn=(0,p.Z)(function*(_){var f;const m=Sn(_);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Dr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield No(m,{returnSecureToken:!0}),A=yield Dr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Nu extends N.ZR{constructor(f,m,w,A){var k;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new Nu(f,m,w,A)}}function Nf(_,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Nu._fromErrorAndOperation(_,k,f,w):k})}function di(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ou(){return(Ou=(0,p.Z)(function*(_,f){const m=(0,N.m9)(_);yield en(!0,m,f);const{providerUserInfo:w}=yield Nr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=di(w||[]);return m.providerData=m.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Oo(_,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(_,f,m=!1){const w=yield Ir(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return Dr._forOperation(_,"link",w)})).apply(this,arguments)}function en(_,f,m){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(_,f,m){yield ln(f);const A=!1===_?"provider-already-linked":"no-such-provider";U(di(f.providerData).has(m)===_,f.auth,A)})).apply(this,arguments)}function to(_,f){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,p.Z)(function*(_,f,m=!1){var w;const{auth:A}=_,k="reauthenticate";try{const q=yield Ir(_,Nf(A,k,f,_),m);U(q.idToken,A,"internal-error");const ge=gt(q.idToken);U(ge,A,"internal-error");const{sub:Be}=ge;return U(_.uid===Be,A,"user-mismatch"),Dr._forOperation(_,k,q)}catch(q){throw"auth/user-not-found"===(null===(w=q)||void 0===w?void 0:w.code)&&Me(A,"user-mismatch"),q}})).apply(this,arguments)}function Ii(_,f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,p.Z)(function*(_,f,m=!1){const w="signIn",A=yield Nf(_,w,f),k=yield Dr._fromIdTokenResponse(_,w,A);return m||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function An(_,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,p.Z)(function*(_,f){return Ii(Sn(_),f)})).apply(this,arguments)}function Vu(_,f){return Of.apply(this,arguments)}function Of(){return(Of=(0,p.Z)(function*(_,f){const m=(0,N.m9)(_);return yield en(!1,m,f.providerId),Oo(m,f)})).apply(this,arguments)}function Bu(_,f){return $u.apply(this,arguments)}function $u(){return($u=(0,p.Z)(function*(_,f){return to((0,N.m9)(_),f)})).apply(this,arguments)}function ac(_,f){return os.apply(this,arguments)}function os(){return(os=(0,p.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithCustomToken",xt(_,f))})).apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(_,f){const m=Sn(_),w=yield ac(m,{token:f,returnSecureToken:!0}),A=yield Dr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ae{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Yt._fromServerResponse(f,m):Me(f,"internal-error")}}class Yt extends Ae{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Yt(m)}}function ju(_,f,m){var w;U((null===(w=m.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Pn(){return(Pn=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_),A={requestType:"PASSWORD_RESET",email:f};m&&ju(w,A,m),yield pr(w,A)})).apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(_,f,m){yield Kn((0,N.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(_,f){yield ec((0,N.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ra(_,f){return lc.apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(_,f){const m=(0,N.m9)(_),w=yield Kn(m,{oobCode:f}),A=w.requestType;switch(U(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,m,"internal-error");default:U(w.email,m,"internal-error")}let k=null;return w.mfaInfo&&(k=Ae._fromServerResponse(Sn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function Od(){return(Od=(0,p.Z)(function*(_,f){const{data:m}=yield Ra((0,N.m9)(_),f);return m.email})).apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(_,f,m){const w=Sn(_),A=yield No(w,{returnSecureToken:!0,email:f,password:m}),k=yield Dr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_),A={requestType:"EMAIL_SIGNIN",email:f};U(m.handleCodeInApp,w,"argument-error"),m&&ju(w,A,m),yield Ru(w,A)})).apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_),A=Ni.credentialWithLink(f,m||Ne());return U(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),An(w,A)})).apply(this,arguments)}function xg(_,f){return hc.apply(this,arguments)}function hc(){return(hc=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:createAuthUri",xt(_,f))})).apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(_,f){const w={identifier:f,continueUri:ht()?Ne():"http://localhost"},{signinMethods:A}=yield xg((0,N.m9)(_),w);return A||[]})).apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(_,f){const m=(0,N.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&ju(m.auth,A,f);const{email:k}=yield Rn(m.auth,A);k!==_.email&&(yield _.reload())})).apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&ju(w.auth,k,m);const{email:q}=yield nc(w.auth,k);q!==_.email&&(yield _.reload())})).apply(this,arguments)}function Wu(_,f){return gc.apply(this,arguments)}function gc(){return(gc=(0,p.Z)(function*(_,f){return It(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yc(){return(yc=(0,p.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,N.m9)(_),k={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},q=yield Ir(w,Wu(w.auth,k));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const ge=w.providerData.find(({providerId:Be})=>"password"===Be);ge&&(ge.displayName=w.displayName,ge.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function io(_,f,m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(_,f,m){const{auth:w}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(k.email=f),m&&(k.password=m);const q=yield Ir(_,fn(w,k));yield _._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Jr{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class wn extends Jr{constructor(f,m,w,A){super(f,m,w),this.username=A}}class Fd extends Jr{constructor(f,m){super(f,"facebook.com",m)}}class _c extends wn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Lf extends Jr{constructor(f,m){super(f,"google.com",m)}}class vc extends wn{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Zu(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ir(_){var f,m;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const q=null===(m=null===(f=gt(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new Jr(k,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Fd(k,A);case"github.com":return new _c(k,A);case"google.com":return new Lf(k,A);case"twitter.com":return new vc(k,A,_.screenName||null);case"custom":case"anonymous":return new Jr(k,null);default:return new Jr(k,w,A)}}(m)}class oo{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new oo("enroll",f,m)}static _fromMfaPendingCredential(f){return new oo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return oo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return oo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Yu{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Sn(f),A=m.customData._serverResponse,k=(A.mfaInfo||[]).map(ge=>Ae._fromServerResponse(w,ge));U(A.mfaPendingCredential,w,"internal-error");const q=oo._fromMfaPendingCredential(A.mfaPendingCredential);return new Yu(q,k,function(){var ge=(0,p.Z)(function*(Be){const rt=yield Be._process(w,q);delete A.mfaInfo,delete A.mfaPendingCredential;const Pt=Object.assign(Object.assign({},A),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const Dt=yield Dr._fromIdTokenResponse(w,m.operationType,Pt);return yield w._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return U(m.user,w,"internal-error"),Dr._forOperation(m.user,m.operationType,Pt);default:Me(w,"internal-error")}});return function(Be){return ge.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function Ju(_,f){return It(_,"POST","/v2/accounts/mfaEnrollment:start",xt(_,f))}class Ff{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Ae._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Ff(f)}getSession(){var f=this;return(0,p.Z)(function*(){return oo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,p.Z)(function*(){const A=f,k=yield w.getSession(),q=yield Ir(w.user,A._process(w.user.auth,k,m));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,k=yield m.user.getIdToken(),q=yield Ir(m.user,function $d(_,f){return It(_,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(_,f))}(m.user.auth,{idToken:k,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ge})=>ge!==A),yield m.user._updateTokensIfNecessary(q);try{yield m.user.reload()}catch(ge){if("auth/user-token-expired"!==(null===(w=ge)||void 0===w?void 0:w.code))throw ge}})()}}const ao=new WeakMap,uo="__sak";class el{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class _ extends el{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function La(){const _=(0,N.z$)();return yt(_)||Kt(_)}()&&function bn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ys(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),k=this.localCache[w];A!==k&&m(w,k,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((ge,Be,rt)=>{this.notifyListeners(ge,rt)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(A);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const k=()=>{const ge=this.storage.getItem(A);!w&&this.localCache[A]===ge||this.notifyListeners(A,ge)},q=this.storage.getItem(A);!function nr(){return(0,N.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,k=this;return(0,p.Z)(function*(){yield A().call(k,m,w),k.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,p.Z)(function*(){const k=yield w().call(A,m);return A.localCache[m]=JSON.stringify(k),k})()}_remove(m){var w=()=>super._remove,A=this;return(0,p.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return _.type="LOCAL",_})(),Li=(()=>{class _ extends el{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return _.type="SESSION",_})();let zd=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(k=>k.isListeningto(m));if(w)return w;const A=new _(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,p.Z)(function*(){const A=m,{eventId:k,eventType:q,data:ge}=A.data,Be=w.handlersMap[q];if(!Be?.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:q});const rt=Array.from(Be).map(function(){var Dt=(0,p.Z)(function*(ar){return ar(A.origin,ge)});return function(ar){return Dt.apply(this,arguments)}}()),Pt=yield function Va(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(rt);A.ports[0].postMessage({status:"done",eventId:k,eventType:q,response:Pt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Ba(_="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return _+m}class wc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,p.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let q,ge;return new Promise((Be,rt)=>{const Pt=Ba("",20);k.port1.start();const Dt=setTimeout(()=>{rt(new Error("unsupported_event"))},w);ge={messageChannel:k,onMessage(ar){const ur=ar;if(ur.data.eventId===Pt)switch(ur.data.status){case"ack":clearTimeout(Dt),q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Be(ur.data.response);break;default:clearTimeout(Dt),clearTimeout(q),rt(new Error("invalid_response"))}}},A.handlers.add(ge),k.port1.addEventListener("message",ge.onMessage),A.target.postMessage({eventType:f,eventId:Pt,data:m},[k.port2])}).finally(()=>{ge&&A.removeMessageHandler(ge)})})()}}function jn(){return window}function tl(){return typeof jn().WorkerGlobalScope<"u"&&"function"==typeof jn().importScripts}function $a(){return($a=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Os="firebaseLocalStorageDb",Ls="firebaseLocalStorage",il="fbase_key";class co{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ja(_,f){return _.transaction([Ls],f?"readwrite":"readonly").objectStore(Ls)}function Bo(){const _=indexedDB.open(Os,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Ls,{keyPath:il})}catch(A){m(A)}}),_.addEventListener("success",(0,p.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Ls)?f(w):(w.close(),yield function qd(){const _=indexedDB.deleteDatabase(Os);return new co(_).toPromise()}(),f(yield Bo()))}))})}function us(_,f,m){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(_,f,m){const w=ja(_,!0).put({[il]:f,value:m});return new co(w).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(_,f){const m=ja(_,!1).get(f),w=yield new co(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ho(_,f){const m=ja(_,!0).delete(f);return new co(m).toPromise()}const $o=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Bo()),m.db})()}_withRetries(m){var w=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const k=yield w._openDb();return yield m(k)}catch(k){if(A++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return tl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=zd._getInstance(function rl(){return tl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(A,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(A,k){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function lo(){return $a.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new wc(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function nl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Bo();return yield us(m,uo,"1"),yield ho(m,uo),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(k=>us(k,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=yield w._withRetries(k=>function sl(_,f){return Ha.apply(this,arguments)}(k,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(A=>ho(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const w=yield m._withRetries(q=>{const ge=ja(q,!1).getAll();return new co(ge).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:q,value:ge}of w)k.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(ge)&&(m.notifyListeners(q,ge),A.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!k.has(q)&&(m.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function jo(_,f){return It(_,"POST","/v2/accounts/mfaSignIn:start",xt(_,f))}function Us(){return(Us=(0,p.Z)(function*(_){return(yield It(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zo(_){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=A=>{const k=Ie("internal-error");k.customData=A,m(k)},w.type="text/javascript",w.charset="UTF-8",function Ho(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function ul(_){return`__${_}${Math.floor(1e6*Math.random())}`}const za=1e12;class En{constructor(f){this.auth=f,this.counter=za,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Mg(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||za;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||za))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var w;return null===(w=m._widgets.get(f||za))||void 0===w||w.execute(),""})()}}class Mg{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;U(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jy(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rg=ul("rcb"),Xy=new Xe(3e4,6e4);class Uf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=jn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return U(function Fw(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(jn().grecaptcha):new Promise((w,A)=>{const k=jn().setTimeout(()=>{A(Ie(f,"network-request-failed"))},Xy.get());jn()[Rg]=()=>{jn().clearTimeout(k),delete jn()[Rg];const ge=jn().grecaptcha;if(!ge)return void A(Ie(f,"internal-error"));const Be=ge.render;ge.render=(rt,Pt)=>{const Dt=Be(rt,Pt);return this.counter++,Dt},this.hostLanguage=m,w(ge)},zo(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Rg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),A(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=jn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bc{load(f){return(0,p.Z)(function*(){return new En(f)})()}clearedOneInstance(){}}const t_="recaptcha",n_={theme:"light",type:"image"};class mr{constructor(f,m=Object.assign({},n_),w){this.parameters=m,this.type=t_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bc:new Uf,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(k=>{const q=ge=>{!ge||(f.tokenChangeListeners.delete(q),k(ge))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=jn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){U(ht()&&!tl(),f.auth,"internal-error"),yield function yr(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Xr(_){return Us.apply(this,arguments)}(f.auth);U(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class po{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=ks._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function un(){return(un=(0,p.Z)(function*(_,f,m){const w=Sn(_),A=yield Vs(w,f,(0,N.m9)(m));return new po(A,k=>An(w,k))})).apply(this,arguments)}function Je(){return(Je=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_);yield en(!1,w,"phone");const A=yield Vs(w.auth,f,(0,N.m9)(m));return new po(A,k=>Vu(w,k))})).apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_),A=yield Vs(w.auth,f,(0,N.m9)(m));return new po(A,k=>Bu(w,k))})).apply(this,arguments)}function Vs(_,f,m){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(_,f,m){var w;const A=yield m.verify();try{let k;if(U("string"==typeof A,_,"argument-error"),U(m.type===t_,_,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const q=k.session;if("phoneNumber"in k)return U("enroll"===q.type,_,"internal-error"),(yield Ju(_,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===q.type,_,"internal-error");const ge=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return U(ge,_,"missing-multi-factor-info"),(yield jo(_,{mfaPendingCredential:q.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Cg(_,{phoneNumber:k.phoneNumber,recaptchaToken:A});return q}}finally{m._reset()}})).apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(_,f){yield Oo((0,N.m9)(_),f)})).apply(this,arguments)}let Zn=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Sn(m)}verifyPhoneNumber(m,w){return Vs(this.auth,m,(0,N.m9)(w))}static credential(m,w){return ks._fromVerification(m,w)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?ks._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function cs(_,f){return f?ie(f):(U(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class mt extends br{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return rr(f,this._buildIdpRequest())}_linkToIdToken(f,m){return rr(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return rr(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ei(_){return Ii(_.auth,new mt(_),_.bypassAuthState)}function ds(_){const{auth:f,user:m}=_;return U(m,f,"internal-error"),to(m,new mt(_),_.bypassAuthState)}function fi(_){return ll.apply(this,arguments)}function ll(){return(ll=(0,p.Z)(function*(_){const{auth:f,user:m}=_;return U(m,f,"internal-error"),Oo(m,new mt(_),_.bypassAuthState)})).apply(this,arguments)}class Ga{constructor(f,m,w,A,k=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:k,tenantId:q,error:ge,type:Be}=f;if(ge)return void m.reject(ge);const rt={auth:m.auth,requestUri:w,sessionId:A,tenantId:q||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(rt))}catch(Pt){m.reject(Pt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ei;case"linkViaPopup":case"linkViaRedirect":return fi;case"reauthViaPopup":case"reauthViaRedirect":return ds;default:Me(this.auth,"internal-error")}}resolve(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ti=new Xe(2e3,1e4);function Ko(){return(Ko=(0,p.Z)(function*(_,f,m){const w=Sn(_);J(_,f,ns);const A=cs(w,m);return new Ot(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_);J(w.auth,f,ns);const A=cs(w.auth,m);return new Ot(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_);J(w.auth,f,ns);const A=cs(w.auth,m);return new Ot(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Ot=(()=>{class _ extends Ga{constructor(m,w,A,k,q){super(m,w,k,q),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const w=yield m.execute();return U(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,p.Z)(function*(){W(1===m.filter.length,"Popup operations only handle one event");const w=Ba();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ti.get())};m()}}return _.currentPopupAction=null,_})();const sr=new Map;class ut extends Ga{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let w=sr.get(m.auth._key());if(!w){try{const k=(yield function Zo(_,f){return St.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(k)}catch(A){w=()=>Promise.reject(A)}sr.set(m.auth._key(),w)}return m.bypassAuthState||sr.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function St(){return(St=(0,p.Z)(function*(_,f){const m=Kd(f),w=Ui(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function Qo(_,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(_,f){return Ui(_)._set(Kd(f),"true")})).apply(this,arguments)}function Jo(_,f){sr.set(_._key(),f)}function Ui(_){return ie(_._redirectPersistence)}function Kd(_){return K("pendingRedirect",_.config.apiKey,_.name)}function D(){return(D=(0,p.Z)(function*(_,f,m){const w=Sn(_);J(_,f,ns);const A=cs(w,m);return yield Qo(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_);J(w.auth,f,ns);const A=cs(w.auth,m);yield Qo(A,w.auth);const k=yield bt(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function Te(){return(Te=(0,p.Z)(function*(_,f,m){const w=(0,N.m9)(_);J(w.auth,f,ns);const A=cs(w.auth,m);yield en(!1,w,f.providerId),yield Qo(A,w.auth);const k=yield bt(w);return A._openRedirect(w.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function et(){return(et=(0,p.Z)(function*(_,f){return yield Sn(_)._initializationPromise,kt(_,f,!1)})).apply(this,arguments)}function kt(_,f){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(_,f,m=!1){const w=Sn(_),A=cs(w,f),q=yield new ut(w,A,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function bt(_){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(_){const f=Ba(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Ur{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Xo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return go(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!go(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bs(f))}saveEventToCache(f){this.cachedEventUids.add(Bs(f)),this.lastProcessedEventTime=Date.now()}}function Bs(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function go({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function ni(_){return $s.apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(_,f={}){return It(_,"GET","/v1/projects",f)})).apply(this,arguments)}const js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hs=/^https?/;function Bf(){return(Bf=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield ni(_);for(const m of f)try{if(Qd(m))return}catch{}Me(_,"unauthorized-domain")})).apply(this,arguments)}function Qd(_){const f=Ne(),{protocol:m,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const q=new URL(_);return""===q.hostname&&""===w?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===w}if(!Hs.test(m))return!1;if(js.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const $f=new Xe(3e4,6e4);function Yd(){const _=jn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let Dc=null;function r_(_){return Dc=Dc||function cl(_){return new Promise((f,m)=>{var w,A,k;function q(){Yd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Yd(),m(Ie(_,"network-request-failed"))},timeout:$f.get()})}if(null!==(A=null===(w=jn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(k=jn().gapi)||void 0===k||!k.load){const ge=ul("iframefcb");return jn()[ge]=()=>{gapi.load?q():m(Ie(_,"network-request-failed"))},zo(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Be=>m(Be))}q()}}).catch(f=>{throw Dc=null,f})}(_),Dc}const Jd=new Xe(5e3,15e3),Xd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cc(_){const f=_.config;U(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?Et(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:ue.SDK_VERSION},A=s_.get(_.config.apiHost);A&&(w.eid=A);const k=_._getFrameworks();return k.length&&(w.fw=k.join(",")),`${m}?${(0,N.xO)(w).slice(1)}`}function Pg(){return Pg=(0,p.Z)(function*(_){const f=yield r_(_),m=jn().gapi;return U(m,_,"internal-error"),f.open({where:document.body,url:Cc(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xd,dontclear:!0},w=>new Promise(function(){var A=(0,p.Z)(function*(k,q){yield w.restyle({setHideOnLeave:!1});const ge=Ie(_,"network-request-failed"),Be=jn().setTimeout(()=>{q(ge)},Jd.get());function rt(){jn().clearTimeout(Be),k(w)}w.ping(rt).then(rt,()=>{q(ge)})});return function(k,q){return A.apply(this,arguments)}}()))}),Pg.apply(this,arguments)}const Hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class eh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ac(_,f,m,w,A,k){U(_.config.authDomain,_,"auth-domain-config-required"),U(_.config.apiKey,_,"invalid-api-key");const q={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:w,v:ue.SDK_VERSION,eventId:A};if(f instanceof ns){f.setDefaultLanguage(_.languageCode),q.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,rt]of Object.entries(k||{}))q[Be]=rt}if(f instanceof rs){const Be=f.getScopes().filter(rt=>""!==rt);Be.length>0&&(q.scopes=Be.join(","))}_.tenantId&&(q.tid=_.tenantId);const ge=q;for(const Be of Object.keys(ge))void 0===ge[Be]&&delete ge[Be];return`${function Gf({config:_}){return _.emulator?Et(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,N.xO)(ge).slice(1)}`}const nh="webStorageSupport";class rh extends class Wf{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return oe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new rh(f)}_finalizeEnroll(f,m,w){return function Xu(_,f){return It(_,"POST","/v2/accounts/mfaEnrollment:finalize",xt(_,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function al(_,f){return It(_,"POST","/v2/accounts/mfaSignIn:finalize",xt(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Og=(()=>{class _{constructor(){}static assertion(m){return rh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var dl="@firebase/auth",ih="0.20.11";class Kf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mo(){return window}function fl(){return(fl=(0,p.Z)(function*(_,f,m){var w;const{BuildInfo:A}=mo();W(f.sessionId,"AuthEvent did not contain a session ID");const k=yield oh(f.sessionId),q={};return Kt()?q.ibi=A.packageName:Xt()?q.apn=A.packageName:Me(_,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=k,Ac(_,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function xc(){return(xc=(0,p.Z)(function*(_){const{BuildInfo:f}=mo(),m={};Kt()?m.iosBundleId=f.packageName:Xt()?m.androidPackageName=f.packageName:Me(_,"operation-not-supported-in-this-environment"),yield ni(_,m)})).apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(_,f,m){const{cordova:w}=mo();let A=()=>{};try{yield new Promise((k,q)=>{let ge=null;function Be(){var Dt;k();const ar=null===(Dt=w.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof ar&&ar(),"function"==typeof m?.close&&m.close()}function rt(){ge||(ge=window.setTimeout(()=>{q(Ie(_,"redirect-cancelled-by-user"))},2e3))}function Pt(){"visible"===document?.visibilityState&&rt()}f.addPassiveListener(Be),document.addEventListener("resume",rt,!1),Xt()&&document.addEventListener("visibilitychange",Pt,!1),A=()=>{f.removePassiveListener(Be),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Pt,!1),ge&&window.clearTimeout(ge)}})}finally{A()}})).apply(this,arguments)}function oh(_){return ah.apply(this,arguments)}function ah(){return(ah=(0,p.Z)(function*(_){const f=d_(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function d_(_){if(W(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let w=0;w<_.length;w++)m[w]=_.charCodeAt(w);return m}(0,N.Pz)("authIdTokenMaxAge"),function Tr(_){(0,ue._registerComponent)(new he.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:k,authDomain:q}=w.options;return((ge,Be)=>{U(k&&!k.includes(":"),"invalid-api-key",{appName:ge.name}),U(!q?.includes(":"),"argument-error",{appName:ge.name});const rt={apiKey:k,authDomain:q,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ss(_)},Pt=new zt(ge,Be,rt);return function Oe(_,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(ie);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,f?.popupRedirectResolver)}(Pt,m),Pt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new he.wA("auth-internal",f=>{const m=Sn(f.getProvider("auth").getImmediate());return new Kf(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(dl,ih,function Cr(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(dl,ih,"esm2017")}("Browser");class uh extends Ur{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function Mc(_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,p.Z)(function*(_){const f=yield Rc()._get(kc(_));return f&&(yield Rc()._remove(kc(_))),f})).apply(this,arguments)}function pl(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function Rc(){return ie(Fa)}function kc(_){return K("authEvent",_.config.apiKey,_.name)}function Vi(_){if(!_?.includes("?"))return{};const[f,...m]=_.split("?");return(0,N.zd)(m.join("?"))}function Sr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function Ya(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function dh(_=(0,N.z$)()){return!("file:"!==Ya()&&"ionic:"!==Ya()&&"capacitor:"!==Ya()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oc(){try{const _=self.localStorage,f=Ba();if(_)return _.setItem(f,"1"),_.removeItem(f),!function ep(_=(0,N.z$)()){return function hh(){return(0,N.w1)()&&11===document?.documentMode}()||function Nc(_=(0,N.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,N.hl)()}catch{return ta()&&(0,N.hl)()}return!1}function ta(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lc(){return(function $g(){return"http:"===Ya()||"https:"===Ya()}()||(0,N.ru)()||dh())&&!function Ja(){return(0,N.b$)()||(0,N.UG)()}()&&Oc()&&!ta()}function na(){return dh()&&typeof document<"u"}function Xa(){return(Xa=(0,p.Z)(function*(){return!!na()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},yo=U,np="persistence";function ra(_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(_){yield _._initializationPromise;const f=eu(),m=K(np,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function eu(){var _;try{return(null===(_=function tp(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const zs=U;class Ci{constructor(){this.browserResolver=ie(class hs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Li,this._completeRedirectFn=kt,this._overrideRedirectResult=Jo}_openPopup(f,m,w,A){var k=this;return(0,p.Z)(function*(){var q;W(null===(q=k.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ge=Ac(f,m,w,Ne(),A);return function Ng(_,f,m,w=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let ge="";const Be=Object.assign(Object.assign({},Hf),{width:w.toString(),height:A.toString(),top:k,left:q}),rt=(0,N.z$)().toLowerCase();m&&(ge=sn(rt)?"_blank":m),Ge(rt)&&(f=f||"http://localhost",Be.scrollbars="yes");const Pt=Object.entries(Be).reduce((ar,[ur,Gs])=>`${ar}${ur}=${Gs},`,"");if(function Qr(_=(0,N.z$)()){var f;return Kt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(rt)&&"_self"!==ge)return function zf(_,f){const m=document.createElement("a");m.href=_,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",ge),new eh(null);const Dt=window.open(f||"",ge,Pt);U(Dt,_,"popup-blocked");try{Dt.focus()}catch{}return new eh(Dt)}(f,ge,Ba())})()}_openRedirect(f,m,w,A){var k=this;return(0,p.Z)(function*(){return yield k._originValidation(f),function bi(_){jn().location.href=_}(Ac(f,m,w,Ne(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:k}=this.eventManagers[m];return A?Promise.resolve(A):(W(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const w=yield function jf(_){return Pg.apply(this,arguments)}(f),A=new Ur(f);return w.register("authEvent",k=>(U(k?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(nh,{type:nh},A=>{var k;const q=null===(k=A?.[0])||void 0===k?void 0:k[nh];void 0!==q&&m(!!q),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Zd(_){return Bf.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ys()||yt()||Kt()}}),this.cordovaResolver=ie(class gl{constructor(){this._redirectPersistence=Li,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kt,this._overrideRedirectResult=Jo}_initialize(f){var m=this;return(0,p.Z)(function*(){const w=f._key();let A=m.eventManagers.get(w);return A||(A=new uh(f),m.eventManagers.set(w,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,A){var k=this;return(0,p.Z)(function*(){!function Jf(_){var f,m,w,A,k,q,ge,Be,rt,Pt;const Dt=mo();U("function"==typeof(null===(f=Dt?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=Dt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(k=null===(A=null===(w=Dt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===k?void 0:k.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Be=null===(ge=null===(q=Dt?.cordova)||void 0===q?void 0:q.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Be?void 0:Be.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Pt=null===(rt=Dt?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Pt?void 0:Pt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield k._initialize(f);yield q.initialized(),q.resetRedirect(),function Yo(){sr.clear()}(),yield k._originValidation(f);const ge=function Fg(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:pl(),postBody:null,tenantId:_.tenantId,error:Ie(_,"no-auth-event")}}(f,w,A);yield function Xf(_,f){return Rc()._set(kc(_),f)}(f,ge);const Be=yield function hl(_,f,m){return fl.apply(this,arguments)}(f,ge,m),rt=yield function Yf(_){const{cordova:f}=mo();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(_):A=f.InAppBrowser.open(_,function fr(_=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(A)})})}(Be);return function c_(_,f,m){return Ka.apply(this,arguments)}(f,q,rt)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function l_(_){return xc.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:A,BuildInfo:k}=mo(),q=setTimeout((0,p.Z)(function*(){yield Mc(f),m.onEvent(Sr())}),500),ge=function(){var Pt=(0,p.Z)(function*(Dt){clearTimeout(q);const ar=yield Mc(f);let ur=null;ar&&Dt?.url&&(ur=function h_(_,f){var m,w;const A=function f_(_){const f=Vi(_),m=f.link?decodeURIComponent(f.link):void 0,w=Vi(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Vi(A).link||A||w||m||_}(f);if(A.includes("/__/auth/callback")){const k=Vi(A),q=k.firebaseError?function ea(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,ge=null===(w=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Be=ge?Ie(ge):null;return Be?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(ar,Dt.url)),m.onEvent(ur||Sr())});return function(ar){return Pt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ge);const Be=A,rt=`${k.packageName.toLowerCase()}://`;mo().handleOpenURL=function(){var Pt=(0,p.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(rt)&&ge({url:Dt}),"function"==typeof Be)try{Be(Dt)}catch(ar){console.error(ar)}});return function(Dt){return Pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Li,this._completeRedirectFn=kt,this._overrideRedirectResult=Jo}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,A){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(f,m,w,A)})()}_openRedirect(f,m,w,A){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(f,m,w,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return na()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function fh(){return Xa.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function rp(_){return _.unwrap()}function ph(_){return yl(_)}function yl(_){const{_tokenResponse:f}=_ instanceof N.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Zn.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=Pu;break;case"facebook.com":w=Aa;break;case"github.com":w=oc;break;case"twitter.com":w=Yr;break;default:const{oauthIdToken:A,oauthAccessToken:k,oauthTokenSecret:q,pendingToken:ge,nonce:Be}=f;return k||q||A||ge?ge?m.startsWith("saml.")?Po._create(m,ge):ts._fromParams({providerId:m,signInMethod:m,pendingToken:ge,idToken:A,accessToken:k}):new eo(m).credential({idToken:A,accessToken:k,rawNonce:Be}):null}return _ instanceof N.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function or(_,f){return f.catch(m=>{throw m instanceof N.ZR&&function gh(_,f){var m,w;const A=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new mh(_,function On(_,f){var m;const w=(0,N.m9)(_),A=f;return U(f.customData.operationType,w,"argument-error"),U(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Yu._fromError(w,A)}(_,f));else if(A){const k=yl(f),q=f;k&&(q.credential=k,q.tenantId=A.tenantId||void 0,q.email=A.email||void 0,q.phoneNumber=A.phoneNumber||void 0)}}(_,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:ph(m),additionalUserInfo:Zu(m),user:fs.getOrCreate(A)}})}function Bi(_,f){return _l.apply(this,arguments)}function _l(){return(_l=(0,p.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>or(_,m.confirm(w))}})).apply(this,arguments)}class mh{constructor(f,m){this.resolver=m,this.auth=function ip(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return or(rp(this.auth),this.resolver.resolveSignIn(f))}}class fs{constructor(f){this._delegate=f,this.multiFactor=function Vo(_){const f=(0,N.m9)(_);return ao.has(f)||ao.set(f,Ff._fromUser(f)),ao.get(f)}(f)}static getOrCreate(f){return fs.USER_MAP.has(f)||fs.USER_MAP.set(f,new fs(f)),fs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return or(m.auth,Vu(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,p.Z)(function*(){return Bi(w.auth,function _r(_,f,m){return Je.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return or(m.auth,function qa(_,f,m){return gi.apply(this,arguments)}(m._delegate,f,Ci))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield ra(Sn(m.auth)),function Q(_,f,m){return function ae(_,f,m){return Te.apply(this,arguments)}(_,f,m)}(m._delegate,f,Ci)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return or(m.auth,Bu(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Bi(this.auth,function Dn(_,f,m){return Fi.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return or(this.auth,function fe(_,f,m){return pi.apply(this,arguments)}(this._delegate,f,Ci))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield ra(Sn(m.auth)),function T(_,f,m){return function M(_,f,m){return F.apply(this,arguments)}(_,f,m)}(m._delegate,f,Ci)})()}sendEmailVerification(f){return function fc(_,f){return Oa.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function Lr(_,f){return Ou.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Ld(_,f){return io((0,N.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function ro(_,f){return io((0,N.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Fr(_,f){return Wo.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function mc(_,f){return yc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function pc(_,f,m){return qu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fs.USER_MAP=new WeakMap;const pn=U;let ia=(()=>{class _{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;pn(A,"invalid-api-key",{appName:m.name}),pn(A,"invalid-api-key",{appName:m.name});const k=typeof window<"u"?Ci:void 0;this._delegate=w.initialize({options:{persistence:ps(A,m.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function xu(_,f,m){const w=Sn(_);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,k=Pi(f),{host:q,port:ge}=function Wn(_){const f=Pi(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const k=A[1];return{host:k,port:As(w.substr(k.length+1))}}{const[k,q]=w.split(":");return{host:k,port:As(q)}}}(f);w.config.emulator={url:`${k}//${q}${null===ge?"":`:${ge}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:ge,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function xs(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,w)}applyActionCode(m){return function hi(_,f){return Ma.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ra(this._delegate,m)}confirmPasswordReset(m,w){return function zu(_,f,m){return Lo.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var A=this;return(0,p.Z)(function*(){return or(A._delegate,function ka(_,f,m){return Nn.apply(this,arguments)}(A._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Gu(_,f){return Na.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function as(_,f){return"EMAIL_SIGNIN"===ku.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){pn(Lc(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function $e(_,f){return et.apply(this,arguments)}(m._delegate,Ci);return w?or(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Vg(_,f){Sn(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,A){const{next:k,error:q,complete:ge}=sa(m,w,A);return this._delegate.onAuthStateChanged(k,q,ge)}onIdTokenChanged(m,w,A){const{next:k,error:q,complete:ge}=sa(m,w,A);return this._delegate.onIdTokenChanged(k,q,ge)}sendSignInLinkToEmail(m,w){return function dc(_,f,m){return no.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Hu(_,f,m){return Pn.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,p.Z)(function*(){let A;switch(function jg(_,f){yo(Object.values(Di).includes(f),_,"invalid-persistence-type"),(0,N.b$)()?yo(f!==Di.SESSION,_,"unsupported-persistence-type"):(0,N.UG)()?yo(f===Di.NONE,_,"unsupported-persistence-type"):ta()?yo(f===Di.NONE||f===Di.LOCAL&&(0,N.hl)(),_,"unsupported-persistence-type"):yo(f===Di.NONE||Oc(),_,"unsupported-persistence-type")}(w._delegate,m),m){case Di.SESSION:A=Li;break;case Di.LOCAL:A=(yield ie($o)._isAvailable())?$o:Fa;break;case Di.NONE:A=B;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return or(this._delegate,function Pf(_){return kn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return or(this._delegate,An(this._delegate,m))}signInWithCustomToken(m){return or(this._delegate,function uc(_,f){return xa.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return or(this._delegate,function Oi(_,f,m){return An((0,N.m9)(_),Ni.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return or(this._delegate,function Ag(_,f,m){return Pa.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Bi(this._delegate,function ls(_,f,m){return un.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,p.Z)(function*(){return pn(Lc(),w._delegate,"operation-not-supported-in-this-environment"),or(w._delegate,function Wd(_,f,m){return Ko.apply(this,arguments)}(w._delegate,m,Ci))})()}signInWithRedirect(m){var w=this;return(0,p.Z)(function*(){return pn(Lc(),w._delegate,"operation-not-supported-in-this-environment"),yield ra(w._delegate),function Hn(_,f,m){return function Vf(_,f,m){return D.apply(this,arguments)}(_,f,m)}(w._delegate,m,Ci)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function cc(_,f){return Od.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Di,_})();function sa(_,f,m){let w=_;"function"!=typeof _&&({next:w,error:f,complete:m}=_);const A=w;return{next:q=>A(q&&fs.getOrCreate(q)),error:f,complete:m}}function ps(_,f){const m=function ml(_,f){const m=eu();if(!m)return[];const w=K(np,_,f);switch(m.getItem(w)){case Di.NONE:return[B];case Di.LOCAL:return[$o,Li];case Di.SESSION:return[Li];default:return[]}}(_,f);if(typeof self<"u"&&!m.includes($o)&&m.push($o),typeof window<"u")for(const w of[Fa,Li])m.includes(w)||m.push(w);return m.includes(B)||m.push(B),m}class sp{constructor(){this.providerId="phone",this._delegate=new Zn(rp(ee.Z.auth()))}static credential(f,m){return Zn.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}sp.PHONE_SIGN_IN_METHOD=Zn.PHONE_SIGN_IN_METHOD,sp.PROVIDER_ID=Zn.PROVIDER_ID;const Hg=U;class Uw{constructor(f,m,w=ee.Z.app()){var A;Hg(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new mr(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function op(_){_.INTERNAL.registerComponent(new he.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new ia(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:Aa,GithubAuthProvider:oc,GoogleAuthProvider:Pu,OAuthProvider:eo,SAMLAuthProvider:ci,PhoneAuthProvider:sp,PhoneMultiFactorGenerator:Og,RecaptchaVerifier:Uw,TwitterAuthProvider:Yr,Auth:ia,AuthCredential:br,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.24")}(ee.Z)},7521:(lt,Se,L)=>{var p;!function(ee,N,ue){if(ee){for(var pe,re={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},ye={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},he={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_e={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},$=1;$<20;++$)re[111+$]="f"+$;for($=0;$<=9;++$)re[$+96]=$.toString();we.prototype.bind=function(J,ce,U){return this._bindMultiple.call(this,J=J instanceof Array?J:[J],ce,U),this},we.prototype.unbind=function(J,ce){return this.bind.call(this,J,function(){},ce)},we.prototype.trigger=function(J,ce){var U=this;return U._directMap[J+":"+ce]&&U._directMap[J+":"+ce]({},J),U},we.prototype.reset=function(){var J=this;return J._callbacks={},J._directMap={},J},we.prototype.stopCallback=function(J,ce){if((" "+ce.className+" ").indexOf(" mousetrap ")>-1||Ie(ce,this.target))return!1;if("composedPath"in J&&"function"==typeof J.composedPath){var oe=J.composedPath()[0];oe!==J.target&&(ce=oe)}return"INPUT"==ce.tagName||"SELECT"==ce.tagName||"TEXTAREA"==ce.tagName||ce.isContentEditable},we.prototype.handleKey=function(){var J=this;return J._handleKey.apply(J,arguments)},we.addKeycodes=function(J){for(var ce in J)J.hasOwnProperty(ce)&&(re[ce]=J[ce]);pe=null},we.init=function(){var J=we(N);for(var ce in J)"_"!==ce.charAt(0)&&(we[ce]=function(U){return function(){return J[U].apply(J,arguments)}}(ce))},we.init(),ee.Mousetrap=we,lt.exports&&(lt.exports=we),void 0!==(p=function(){return we}.call(Se,L,Se,lt))&&(lt.exports=p)}function j(J,ce,U){J.addEventListener?J.addEventListener(ce,U,!1):J.attachEvent("on"+ce,U)}function Z(J){if("keypress"==J.type){var ce=String.fromCharCode(J.which);return J.shiftKey||(ce=ce.toLowerCase()),ce}return re[J.which]?re[J.which]:ye[J.which]?ye[J.which]:String.fromCharCode(J.which).toLowerCase()}function Fe(J,ce){return J.sort().join(",")===ce.sort().join(",")}function Ee(J){return"shift"==J||"ctrl"==J||"alt"==J||"meta"==J}function nt(J,ce,U){return U||(U=function ve(){if(!pe)for(var J in pe={},re)J>95&&J<112||re.hasOwnProperty(J)&&(pe[re[J]]=J);return pe}()[J]?"keydown":"keypress"),"keypress"==U&&ce.length&&(U="keydown"),U}function Me(J,ce){var U,oe,W,X=[];for(U=function ct(J){return"+"===J?["+"]:(J=J.replace(/\+{2}/g,"+plus")).split("+")}(J),W=0;W<U.length;++W)_e[oe=U[W]]&&(oe=_e[oe]),ce&&"keypress"!=ce&&he[oe]&&(oe=he[oe],X.push("shift")),Ee(oe)&&X.push(oe);return{key:oe,modifiers:X,action:ce=nt(oe,X,ce)}}function Ie(J,ce){return null!==J&&J!==N&&(J===ce||Ie(J.parentNode,ce))}function we(J){var ce=this;if(J=J||N,!(ce instanceof we))return new we(J);ce.target=J,ce._callbacks={},ce._directMap={};var oe,U={},W=!1,X=!1,ie=!1;function ne(Xe){Xe=Xe||{};var pt,Et=!1;for(pt in U)Xe[pt]?Et=!0:U[pt]=0;Et||(ie=!1)}function Oe(Xe,Et,pt,at,Zt,xt){var It,yn,Xn=[],Tn=pt.type;if(!ce._callbacks[Xe])return[];for("keyup"==Tn&&Ee(Xe)&&(Et=[Xe]),It=0;It<ce._callbacks[Xe].length;++It)yn=ce._callbacks[Xe][It],!at&&yn.seq&&U[yn.seq]!=yn.level||Tn!=yn.action||("keypress"!=Tn||pt.metaKey||pt.ctrlKey)&&!Fe(Et,yn.modifiers)||((!at&&yn.combo==Zt||at&&yn.seq==at&&yn.level==xt)&&ce._callbacks[Xe].splice(It,1),Xn.push(yn));return Xn}function Ne(Xe,Et,pt,at){ce.stopCallback(Et,Et.target||Et.srcElement,pt,at)||!1===Xe(Et,pt)&&(function be(J){J.preventDefault?J.preventDefault():J.returnValue=!1}(Et),function it(J){J.stopPropagation?J.stopPropagation():J.cancelBubble=!0}(Et))}function ht(Xe){"number"!=typeof Xe.which&&(Xe.which=Xe.keyCode);var Et=Z(Xe);if(Et){if("keyup"==Xe.type&&W===Et)return void(W=!1);ce.handleKey(Et,function ke(J){var ce=[];return J.shiftKey&&ce.push("shift"),J.altKey&&ce.push("alt"),J.ctrlKey&&ce.push("ctrl"),J.metaKey&&ce.push("meta"),ce}(Xe),Xe)}}function We(Xe,Et,pt,at,Zt){ce._directMap[Xe+":"+pt]=Et;var It,xt=(Xe=Xe.replace(/\s+/g," ")).split(" ");xt.length>1?function qt(Xe,Et,pt,at){function Zt(Tn){return function(){ie=Tn,++U[Xe],function Jt(){clearTimeout(oe),oe=setTimeout(ne,1e3)}()}}function xt(Tn){Ne(pt,Tn,Xe),"keyup"!==at&&(W=Z(Tn)),setTimeout(ne,10)}U[Xe]=0;for(var It=0;It<Et.length;++It){var Xn=It+1===Et.length?xt:Zt(at||Me(Et[It+1]).action);We(Et[It],Xn,at,Xe,It)}}(Xe,xt,Et,pt):(It=Me(Xe,pt),ce._callbacks[It.key]=ce._callbacks[It.key]||[],Oe(It.key,It.modifiers,{type:It.action},at,Xe,Zt),ce._callbacks[It.key][at?"unshift":"push"]({callback:Et,modifiers:It.modifiers,action:It.action,seq:at,level:Zt,combo:Xe}))}ce._handleKey=function(Xe,Et,pt){var Zt,at=Oe(Xe,Et,pt),xt={},It=0,yn=!1;for(Zt=0;Zt<at.length;++Zt)at[Zt].seq&&(It=Math.max(It,at[Zt].level));for(Zt=0;Zt<at.length;++Zt)if(at[Zt].seq){if(at[Zt].level!=It)continue;yn=!0,xt[at[Zt].seq]=1,Ne(at[Zt].callback,pt,at[Zt].combo,at[Zt].seq)}else yn||Ne(at[Zt].callback,pt,at[Zt].combo);var Xn="keypress"==pt.type&&X;pt.type==ie&&!Ee(Xe)&&!Xn&&ne(xt),X=yn&&"keydown"==pt.type},ce._bindMultiple=function(Xe,Et,pt){for(var at=0;at<Xe.length;++at)We(Xe[at],Et,pt)},j(J,"keypress",ht),j(J,"keydown",ht),j(J,"keyup",ht)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},9751:(lt,Se,L)=>{"use strict";L.d(Se,{y:()=>_e});var p=L(2961),ee=L(727),N=L(8822),ue=L(9635),re=L(2416),ye=L(576),he=L(2806);let _e=(()=>{class Z{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const be=new Z;return be.source=this,be.operator=ke,be}subscribe(ke,be,it){const Ee=function j(Z){return Z&&Z instanceof p.Lv||function $(Z){return Z&&(0,ye.m)(Z.next)&&(0,ye.m)(Z.error)&&(0,ye.m)(Z.complete)}(Z)&&(0,ee.Nn)(Z)}(ke)?ke:new p.Hp(ke,be,it);return(0,he.x)(()=>{const{operator:ve,source:nt}=this;Ee.add(ve?ve.call(Ee,nt):nt?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(ke){try{return this._subscribe(ke)}catch(be){ke.error(be)}}forEach(ke,be){return new(be=pe(be))((it,Ee)=>{const ve=new p.Hp({next:nt=>{try{ke(nt)}catch(ct){Ee(ct),ve.unsubscribe()}},error:Ee,complete:it});this.subscribe(ve)})}_subscribe(ke){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(ke)}[N.L](){return this}pipe(...ke){return(0,ue.U)(ke)(this)}toPromise(ke){return new(ke=pe(ke))((be,it)=>{let Ee;this.subscribe(ve=>Ee=ve,ve=>it(ve),()=>be(Ee))})}}return Z.create=Fe=>new Z(Fe),Z})();function pe(Z){var Fe;return null!==(Fe=Z??re.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(lt,Se,L)=>{"use strict";L.d(Se,{x:()=>he});var p=L(9751),ee=L(727);const ue=(0,L(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=L(8737),ye=L(2806);let he=(()=>{class pe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new _e(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new ue}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:Fe,observers:ke}=this;return Z||Fe?ee.Lc:(this.currentObservers=null,ke.push(j),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(ke,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:Fe,isStopped:ke}=this;Z?j.error(Fe):ke&&j.complete()}asObservable(){const j=new p.y;return j.source=this,j}}return pe.create=($,j)=>new _e($,j),pe})();class _e extends he{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,$)}error($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==Z?Z:ee.Lc}}},2961:(lt,Se,L)=>{"use strict";L.d(Se,{Hp:()=>it,Lv:()=>Z});var p=L(576),ee=L(727),N=L(2416),ue=L(7849);function re(){}const ye=pe("C",void 0,void 0);function pe(Me,Ie,we){return{kind:Me,value:Ie,error:we}}var $=L(3410),j=L(2806);class Z extends ee.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ee.Nn)(Ie)&&Ie.add(this)):this.destination=ct}static create(Ie,we,J){return new it(Ie,we,J)}next(Ie){this.isStopped?nt(function _e(Me){return pe("N",Me,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?nt(function he(Me){return pe("E",void 0,Me)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?nt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function ke(Me,Ie){return Fe.call(Me,Ie)}class be{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:we}=this;if(we.next)try{we.next(Ie)}catch(J){Ee(J)}}error(Ie){const{partialObserver:we}=this;if(we.error)try{we.error(Ie)}catch(J){Ee(J)}else Ee(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(we){Ee(we)}}}class it extends Z{constructor(Ie,we,J){let ce;if(super(),(0,p.m)(Ie)||!Ie)ce={next:Ie??void 0,error:we??void 0,complete:J??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(Ie),U.unsubscribe=()=>this.unsubscribe(),ce={next:Ie.next&&ke(Ie.next,U),error:Ie.error&&ke(Ie.error,U),complete:Ie.complete&&ke(Ie.complete,U)}):ce=Ie}this.destination=new be(ce)}}function Ee(Me){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Me):(0,ue.h)(Me)}function nt(Me,Ie){const{onStoppedNotification:we}=N.v;we&&$.z.setTimeout(()=>we(Me,Ie))}const ct={closed:!0,next:re,error:function ve(Me){throw Me},complete:re}},727:(lt,Se,L)=>{"use strict";L.d(Se,{Lc:()=>ye,w0:()=>re,Nn:()=>he});var p=L(576);const N=(0,L(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,Fe)=>`${Fe+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ue=L(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const ke of j)ke.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,p.m)(Z))try{Z()}catch(ke){$=ke instanceof N?ke.errors:[ke]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const ke of Fe)try{_e(ke)}catch(be){$=$??[],be instanceof N?$=[...$,...be.errors]:$.push(be)}}if($)throw new N($)}}add($){var j;if($&&$!==this)if(this.closed)_e($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,ue.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,ue.P)(j,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const ye=re.EMPTY;function he(pe){return pe instanceof re||pe&&"closed"in pe&&(0,p.m)(pe.remove)&&(0,p.m)(pe.add)&&(0,p.m)(pe.unsubscribe)}function _e(pe){(0,p.m)(pe)?pe():pe.unsubscribe()}},2416:(lt,Se,L)=>{"use strict";L.d(Se,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Se,L)=>{"use strict";L.d(Se,{E:()=>ee});const ee=new(L(9751).y)(re=>re.complete())},8996:(lt,Se,L)=>{"use strict";L.d(Se,{D:()=>Ie});var p=L(8421),ee=L(5363),N=L(9468),ye=L(9751),_e=L(2202),pe=L(576),$=L(9672);function Z(we,J){if(!we)throw new Error("Iterable cannot be null");return new ye.y(ce=>{(0,$.f)(ce,J,()=>{const U=we[Symbol.asyncIterator]();(0,$.f)(ce,J,()=>{U.next().then(oe=>{oe.done?ce.complete():ce.next(oe.value)})},0,!0)})})}var Fe=L(3670),ke=L(8239),be=L(1144),it=L(6495),Ee=L(2206),ve=L(4532),nt=L(3260);function Ie(we,J){return J?function Me(we,J){if(null!=we){if((0,Fe.c)(we))return function ue(we,J){return(0,p.Xf)(we).pipe((0,N.R)(J),(0,ee.Q)(J))}(we,J);if((0,be.z)(we))return function he(we,J){return new ye.y(ce=>{let U=0;return J.schedule(function(){U===we.length?ce.complete():(ce.next(we[U++]),ce.closed||this.schedule())})})}(we,J);if((0,ke.t)(we))return function re(we,J){return(0,p.Xf)(we).pipe((0,N.R)(J),(0,ee.Q)(J))}(we,J);if((0,Ee.D)(we))return Z(we,J);if((0,it.T)(we))return function j(we,J){return new ye.y(ce=>{let U;return(0,$.f)(ce,J,()=>{U=we[_e.h](),(0,$.f)(ce,J,()=>{let oe,W;try{({value:oe,done:W}=U.next())}catch(X){return void ce.error(X)}W?ce.complete():ce.next(oe)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(we,J);if((0,nt.L)(we))return function ct(we,J){return Z((0,nt.Q)(we),J)}(we,J)}throw(0,ve.z)(we)}(we,J):(0,p.Xf)(we)}},8421:(lt,Se,L)=>{"use strict";L.d(Se,{Xf:()=>Fe});var p=L(655),ee=L(1144),N=L(8239),ue=L(9751),re=L(3670),ye=L(2206),he=L(4532),_e=L(6495),pe=L(3260),$=L(576),j=L(7849),Z=L(8822);function Fe(Me){if(Me instanceof ue.y)return Me;if(null!=Me){if((0,re.c)(Me))return function ke(Me){return new ue.y(Ie=>{const we=Me[Z.L]();if((0,$.m)(we.subscribe))return we.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function be(Me){return new ue.y(Ie=>{for(let we=0;we<Me.length&&!Ie.closed;we++)Ie.next(Me[we]);Ie.complete()})}(Me);if((0,N.t)(Me))return function it(Me){return new ue.y(Ie=>{Me.then(we=>{Ie.closed||(Ie.next(we),Ie.complete())},we=>Ie.error(we)).then(null,j.h)})}(Me);if((0,ye.D)(Me))return ve(Me);if((0,_e.T)(Me))return function Ee(Me){return new ue.y(Ie=>{for(const we of Me)if(Ie.next(we),Ie.closed)return;Ie.complete()})}(Me);if((0,pe.L)(Me))return function nt(Me){return ve((0,pe.Q)(Me))}(Me)}throw(0,he.z)(Me)}function ve(Me){return new ue.y(Ie=>{(function ct(Me,Ie){var we,J,ce,U;return(0,p.mG)(this,void 0,void 0,function*(){try{for(we=(0,p.KL)(Me);!(J=yield we.next()).done;)if(Ie.next(J.value),Ie.closed)return}catch(oe){ce={error:oe}}finally{try{J&&!J.done&&(U=we.return)&&(yield U.call(we))}finally{if(ce)throw ce.error}}Ie.complete()})})(Me,Ie).catch(we=>Ie.error(we))})}},6451:(lt,Se,L)=>{"use strict";L.d(Se,{T:()=>ye});var p=L(8189),ee=L(8421),N=L(515),ue=L(7669),re=L(8996);function ye(...he){const _e=(0,ue.yG)(he),pe=(0,ue._6)(he,1/0),$=he;return $.length?1===$.length?(0,ee.Xf)($[0]):(0,p.J)(pe)((0,re.D)($,_e)):N.E}},5403:(lt,Se,L)=>{"use strict";L.d(Se,{x:()=>ee});var p=L(2961);function ee(ue,re,ye,he,_e){return new N(ue,re,ye,he,_e)}class N extends p.Lv{constructor(re,ye,he,_e,pe,$){super(re),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=ye?function(j){try{ye(j)}catch(Z){re.error(Z)}}:super._next,this._error=_e?function(j){try{_e(j)}catch(Z){re.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(lt,Se,L)=>{"use strict";L.d(Se,{U:()=>N});var p=L(4482),ee=L(5403);function N(ue,re){return(0,p.e)((ye,he)=>{let _e=0;ye.subscribe((0,ee.x)(he,pe=>{he.next(ue.call(re,pe,_e++))}))})}},8189:(lt,Se,L)=>{"use strict";L.d(Se,{J:()=>N});var p=L(5577),ee=L(4671);function N(ue=1/0){return(0,p.z)(ee.y,ue)}},5577:(lt,Se,L)=>{"use strict";L.d(Se,{z:()=>_e});var p=L(4004),ee=L(8421),N=L(4482),ue=L(9672),re=L(5403),he=L(576);function _e(pe,$,j=1/0){return(0,he.m)($)?_e((Z,Fe)=>(0,p.U)((ke,be)=>$(Z,ke,Fe,be))((0,ee.Xf)(pe(Z,Fe))),j):("number"==typeof $&&(j=$),(0,N.e)((Z,Fe)=>function ye(pe,$,j,Z,Fe,ke,be,it){const Ee=[];let ve=0,nt=0,ct=!1;const Me=()=>{ct&&!Ee.length&&!ve&&$.complete()},Ie=J=>ve<Z?we(J):Ee.push(J),we=J=>{ke&&$.next(J),ve++;let ce=!1;(0,ee.Xf)(j(J,nt++)).subscribe((0,re.x)($,U=>{Fe?.(U),ke?Ie(U):$.next(U)},()=>{ce=!0},void 0,()=>{if(ce)try{for(ve--;Ee.length&&ve<Z;){const U=Ee.shift();be?(0,ue.f)($,be,()=>we(U)):we(U)}Me()}catch(U){$.error(U)}}))};return pe.subscribe((0,re.x)($,Ie,()=>{ct=!0,Me()})),()=>{it?.()}}(Z,Fe,pe,j)))}},5363:(lt,Se,L)=>{"use strict";L.d(Se,{Q:()=>ue});var p=L(9672),ee=L(4482),N=L(5403);function ue(re,ye=0){return(0,ee.e)((he,_e)=>{he.subscribe((0,N.x)(_e,pe=>(0,p.f)(_e,re,()=>_e.next(pe),ye),()=>(0,p.f)(_e,re,()=>_e.complete(),ye),pe=>(0,p.f)(_e,re,()=>_e.error(pe),ye)))})}},3099:(lt,Se,L)=>{"use strict";L.d(Se,{B:()=>re});var p=L(8421),ee=L(7579),N=L(2961),ue=L(4482);function re(he={}){const{connector:_e=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:j=!0}=he;return Z=>{let Fe,ke,be,it=0,Ee=!1,ve=!1;const nt=()=>{ke?.unsubscribe(),ke=void 0},ct=()=>{nt(),Fe=be=void 0,Ee=ve=!1},Me=()=>{const Ie=Fe;ct(),Ie?.unsubscribe()};return(0,ue.e)((Ie,we)=>{it++,!ve&&!Ee&&nt();const J=be=be??_e();we.add(()=>{it--,0===it&&!ve&&!Ee&&(ke=ye(Me,j))}),J.subscribe(we),!Fe&&it>0&&(Fe=new N.Hp({next:ce=>J.next(ce),error:ce=>{ve=!0,nt(),ke=ye(ct,pe,ce),J.error(ce)},complete:()=>{Ee=!0,nt(),ke=ye(ct,$),J.complete()}}),(0,p.Xf)(Ie).subscribe(Fe))})(Z)}}function ye(he,_e,...pe){if(!0===_e)return void he();if(!1===_e)return;const $=new N.Hp({next:()=>{$.unsubscribe(),he()}});return _e(...pe).subscribe($)}},9468:(lt,Se,L)=>{"use strict";L.d(Se,{R:()=>ee});var p=L(4482);function ee(N,ue=0){return(0,p.e)((re,ye)=>{ye.add(N.schedule(()=>re.subscribe(ye),ue))})}},8505:(lt,Se,L)=>{"use strict";L.d(Se,{b:()=>re});var p=L(576),ee=L(4482),N=L(5403),ue=L(4671);function re(ye,he,_e){const pe=(0,p.m)(ye)||he||_e?{next:ye,error:he,complete:_e}:ye;return pe?(0,ee.e)(($,j)=>{var Z;null===(Z=pe.subscribe)||void 0===Z||Z.call(pe);let Fe=!0;$.subscribe((0,N.x)(j,ke=>{var be;null===(be=pe.next)||void 0===be||be.call(pe,ke),j.next(ke)},()=>{var ke;Fe=!1,null===(ke=pe.complete)||void 0===ke||ke.call(pe),j.complete()},ke=>{var be;Fe=!1,null===(be=pe.error)||void 0===be||be.call(pe,ke),j.error(ke)},()=>{var ke,be;Fe&&(null===(ke=pe.unsubscribe)||void 0===ke||ke.call(pe)),null===(be=pe.finalize)||void 0===be||be.call(pe)}))}):ue.y}},4408:(lt,Se,L)=>{"use strict";L.d(Se,{o:()=>re});var p=L(727);class ee extends p.w0{constructor(he,_e){super()}schedule(he,_e=0){return this}}const N={setInterval(ye,he,..._e){const{delegate:pe}=N;return pe?.setInterval?pe.setInterval(ye,he,..._e):setInterval(ye,he,..._e)},clearInterval(ye){const{delegate:he}=N;return(he?.clearInterval||clearInterval)(ye)},delegate:void 0};var ue=L(8737);class re extends ee{constructor(he,_e){super(he,_e),this.scheduler=he,this.work=_e,this.pending=!1}schedule(he,_e=0){var pe;if(this.closed)return this;this.state=he;const $=this.id,j=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(j,$,_e)),this.pending=!0,this.delay=_e,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(j,this.id,_e),this}requestAsyncId(he,_e,pe=0){return N.setInterval(he.flush.bind(he,this),pe)}recycleAsyncId(he,_e,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return _e;null!=_e&&N.clearInterval(_e)}execute(he,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(he,_e);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,_e){let $,pe=!1;try{this.work(he)}catch(j){pe=!0,$=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:he,scheduler:_e}=this,{actions:pe}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(pe,this),null!=he&&(this.id=this.recycleAsyncId(_e,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Se,L)=>{"use strict";L.d(Se,{v:()=>N});var p=L(6063);class ee{constructor(re,ye=ee.now){this.schedulerActionCtor=re,this.now=ye}schedule(re,ye=0,he){return new this.schedulerActionCtor(this,re).schedule(he,ye)}}ee.now=p.l.now;class N extends ee{constructor(re,ye=ee.now){super(re,ye),this.actions=[],this._active=!1}flush(re){const{actions:ye}=this;if(this._active)return void ye.push(re);let he;this._active=!0;do{if(he=re.execute(re.state,re.delay))break}while(re=ye.shift());if(this._active=!1,he){for(;re=ye.shift();)re.unsubscribe();throw he}}}},4986:(lt,Se,L)=>{"use strict";L.d(Se,{z:()=>N});var p=L(4408);const N=new(L(7565).v)(p.o)},6063:(lt,Se,L)=>{"use strict";L.d(Se,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(lt,Se,L)=>{"use strict";L.d(Se,{z:()=>p});const p={setTimeout(ee,N,...ue){const{delegate:re}=p;return re?.setTimeout?re.setTimeout(ee,N,...ue):setTimeout(ee,N,...ue)},clearTimeout(ee){const{delegate:N}=p;return(N?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(lt,Se,L)=>{"use strict";L.d(Se,{h:()=>ee});const ee=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Se,L)=>{"use strict";L.d(Se,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Se,L)=>{"use strict";L.d(Se,{_6:()=>ye,jO:()=>ue,yG:()=>re});var p=L(576);function N(he){return he[he.length-1]}function ue(he){return(0,p.m)(N(he))?he.pop():void 0}function re(he){return function ee(he){return he&&(0,p.m)(he.schedule)}(N(he))?he.pop():void 0}function ye(he,_e){return"number"==typeof N(he)?he.pop():_e}},8737:(lt,Se,L)=>{"use strict";function p(ee,N){if(ee){const ue=ee.indexOf(N);0<=ue&&ee.splice(ue,1)}}L.d(Se,{P:()=>p})},3888:(lt,Se,L)=>{"use strict";function p(ee){const ue=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}L.d(Se,{d:()=>p})},2806:(lt,Se,L)=>{"use strict";L.d(Se,{O:()=>ue,x:()=>N});var p=L(2416);let ee=null;function N(re){if(p.v.useDeprecatedSynchronousErrorHandling){const ye=!ee;if(ye&&(ee={errorThrown:!1,error:null}),re(),ye){const{errorThrown:he,error:_e}=ee;if(ee=null,he)throw _e}}else re()}function ue(re){p.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(lt,Se,L)=>{"use strict";function p(ee,N,ue,re=0,ye=!1){const he=N.schedule(function(){ue(),ye?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(he),!ye)return he}L.d(Se,{f:()=>p})},4671:(lt,Se,L)=>{"use strict";function p(ee){return ee}L.d(Se,{y:()=>p})},1144:(lt,Se,L)=>{"use strict";L.d(Se,{z:()=>p});const p=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(lt,Se,L)=>{"use strict";L.d(Se,{D:()=>ee});var p=L(576);function ee(N){return Symbol.asyncIterator&&(0,p.m)(N?.[Symbol.asyncIterator])}},576:(lt,Se,L)=>{"use strict";function p(ee){return"function"==typeof ee}L.d(Se,{m:()=>p})},3670:(lt,Se,L)=>{"use strict";L.d(Se,{c:()=>N});var p=L(8822),ee=L(576);function N(ue){return(0,ee.m)(ue[p.L])}},6495:(lt,Se,L)=>{"use strict";L.d(Se,{T:()=>N});var p=L(2202),ee=L(576);function N(ue){return(0,ee.m)(ue?.[p.h])}},8239:(lt,Se,L)=>{"use strict";L.d(Se,{t:()=>ee});var p=L(576);function ee(N){return(0,p.m)(N?.then)}},3260:(lt,Se,L)=>{"use strict";L.d(Se,{L:()=>ue,Q:()=>N});var p=L(655),ee=L(576);function N(re){return(0,p.FC)(this,arguments,function*(){const he=re.getReader();try{for(;;){const{value:_e,done:pe}=yield(0,p.qq)(he.read());if(pe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(_e)}}finally{he.releaseLock()}})}function ue(re){return(0,ee.m)(re?.getReader)}},4482:(lt,Se,L)=>{"use strict";L.d(Se,{A:()=>ee,e:()=>N});var p=L(576);function ee(ue){return(0,p.m)(ue?.lift)}function N(ue){return re=>{if(ee(re))return re.lift(function(ye){try{return ue(ye,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Se,L)=>{"use strict";L.d(Se,{U:()=>N,z:()=>ee});var p=L(4671);function ee(...ue){return N(ue)}function N(ue){return 0===ue.length?p.y:1===ue.length?ue[0]:function(ye){return ue.reduce((he,_e)=>_e(he),ye)}}},7849:(lt,Se,L)=>{"use strict";L.d(Se,{h:()=>N});var p=L(2416),ee=L(3410);function N(ue){ee.z.setTimeout(()=>{const{onUnhandledError:re}=p.v;if(!re)throw ue;re(ue)})}},4532:(lt,Se,L)=>{"use strict";function p(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>p})},655:(lt,Se,L)=>{"use strict";function ue(W,X){var ie={};for(var ne in W)Object.prototype.hasOwnProperty.call(W,ne)&&X.indexOf(ne)<0&&(ie[ne]=W[ne]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ne=Object.getOwnPropertySymbols(W);Oe<ne.length;Oe++)X.indexOf(ne[Oe])<0&&Object.prototype.propertyIsEnumerable.call(W,ne[Oe])&&(ie[ne[Oe]]=W[ne[Oe]])}return ie}function _e(W,X,ie,ne){return new(ie||(ie=Promise))(function(Ne,ht){function Jt(Xe){try{We(ne.next(Xe))}catch(Et){ht(Et)}}function qt(Xe){try{We(ne.throw(Xe))}catch(Et){ht(Et)}}function We(Xe){Xe.done?Ne(Xe.value):function Oe(Ne){return Ne instanceof ie?Ne:new ie(function(ht){ht(Ne)})}(Xe.value).then(Jt,qt)}We((ne=ne.apply(W,X||[])).next())})}function Ee(W){return this instanceof Ee?(this.v=W,this):new Ee(W)}function ve(W,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ne=ie.apply(W,X||[]),Ne=[];return Oe={},ht("next"),ht("throw"),ht("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function ht(pt){ne[pt]&&(Oe[pt]=function(at){return new Promise(function(Zt,xt){Ne.push([pt,at,Zt,xt])>1||Jt(pt,at)})})}function Jt(pt,at){try{!function qt(pt){pt.value instanceof Ee?Promise.resolve(pt.value.v).then(We,Xe):Et(Ne[0][2],pt)}(ne[pt](at))}catch(Zt){Et(Ne[0][3],Zt)}}function We(pt){Jt("next",pt)}function Xe(pt){Jt("throw",pt)}function Et(pt,at){pt(at),Ne.shift(),Ne.length&&Jt(Ne[0][0],Ne[0][1])}}function ct(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=W[Symbol.asyncIterator];return X?X.call(W):(W=function Z(W){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&W[X],ne=0;if(ie)return ie.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ne>=W.length&&(W=void 0),{value:W&&W[ne++],done:!W}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Ne){ie[Ne]=W[Ne]&&function(ht){return new Promise(function(Jt,qt){!function Oe(Ne,ht,Jt,qt){Promise.resolve(qt).then(function(We){Ne({value:We,done:Jt})},ht)}(Jt,qt,(ht=W[Ne](ht)).done,ht.value)})}}}L.d(Se,{FC:()=>ve,KL:()=>ct,_T:()=>ue,mG:()=>_e,qq:()=>Ee})},4650:(lt,Se,L)=>{"use strict";L.d(Se,{$8M:()=>al,$Z:()=>Mh,AFp:()=>DT,ALo:()=>D0,AaK:()=>_e,AsE:()=>Bl,BQk:()=>fa,CHM:()=>ju,CRH:()=>R0,CZH:()=>ff,CqO:()=>Vp,D6c:()=>uw,DdM:()=>eg,EJc:()=>YA,EpF:()=>ME,F4k:()=>Sm,FYo:()=>x_,FiY:()=>$e,G48:()=>ex,GfV:()=>Ln,JOm:()=>hs,Jf7:()=>_p,KtG:()=>Hu,LFG:()=>Hn,LSH:()=>Qg,Lbi:()=>TT,Lck:()=>g0,MAs:()=>Wh,MMx:()=>Yp,NdJ:()=>dv,OlP:()=>En,Oqu:()=>Dv,PXZ:()=>kr,Q6J:()=>mu,QGY:()=>cv,QP$:()=>sn,QbO:()=>ST,Qsj:()=>Gt,R0b:()=>Es,RDi:()=>_,Rgc:()=>rg,SBq:()=>yp,Sil:()=>B0,Suo:()=>BI,TTD:()=>rs,TgZ:()=>Cm,VKq:()=>MI,W1O:()=>lf,X6Q:()=>K0,XFs:()=>Ye,Xpm:()=>xe,Xts:()=>Jg,Y36:()=>xh,YKP:()=>Jm,YNc:()=>ov,Yjl:()=>Ce,Yz7:()=>at,Z0I:()=>yn,ZZ4:()=>ky,_UZ:()=>uv,_Vd:()=>mp,_c5:()=>aw,_uU:()=>bv,aQg:()=>ow,c2e:()=>AT,cJS:()=>xt,cg1:()=>ud,dDg:()=>mf,dqk:()=>hn,eFA:()=>lb,eoX:()=>zl,f3M:()=>D,g9A:()=>Cu,h0i:()=>jl,hGG:()=>yb,hij:()=>vu,iGM:()=>ig,ifc:()=>gt,ip1:()=>yd,jDz:()=>_0,kL8:()=>Lv,lG2:()=>K,lcZ:()=>oy,lqb:()=>$i,lri:()=>ob,oAB:()=>Wt,oxw:()=>pv,q4F:()=>Lt,qLn:()=>He,qZA:()=>Tm,rWj:()=>Cy,sBO:()=>nx,sIi:()=>Op,s_b:()=>ly,soG:()=>Ey,tb:()=>tb,tp0:()=>kt,uIk:()=>Fp,vHH:()=>be,vpe:()=>ma,wAp:()=>vt,xp6:()=>In,ynx:()=>ha,z2F:()=>_f,zSh:()=>Eh,zs3:()=>Gc});var p=L(7579),ee=L(727),N=L(9751),ue=L(6451),re=L(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ye({__forward_ref__:ye});function j(s){return s.__forward_ref__=j,s.toString=function(){return _e(this())},s}function Z(s){return function Fe(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===j}(s)?s():s}class be extends Error{constructor(o,a){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s,o){throw new be(-201,!1)}function qt(s,o){null==s&&function We(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function at(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function It(s){return Xn(s,wi)||Xn(s,ui)}function yn(s){return null!==It(s)}function Xn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Xi(s){return s&&(s.hasOwnProperty(ai)||s.hasOwnProperty(Ca))?s[ai]:null}const wi=ye({\u0275prov:ye}),ai=ye({\u0275inj:ye}),ui=ye({ngInjectableDef:ye}),Ca=ye({ngInjectorDef:ye});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Nr;function er(s){const o=Nr;return Nr=s,o}function li(s,o,a){const l=It(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ye.Optional?null:void 0!==o?o:void Ie(_e(s))}function $n(s){return{toString:s}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),gt=(()=>{return(s=gt||(gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",gt;var s})();const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zr={},$t=[],Ts=ye({\u0275cmp:ye}),ln=ye({\u0275dir:ye}),ki=ye({\u0275pipe:ye}),cn=ye({\u0275mod:ye}),tr=ye({\u0275fac:ye}),jr=ye({__NG_ELEMENT_ID__:ye});let ot=0;function xe(s){return $n(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||$t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||gt.Emulated,id:"c"+ot++,styles:s.styles||$t,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return d.inputs=B(s.inputs,l),d.outputs=B(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Nt).filter(Rt):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(yt).filter(Rt):null,d})}function Nt(s){return Y(s)||Ge(s)}function Rt(s){return null!==s}function Wt(s){return $n(()=>({type:s.type,bootstrap:s.bootstrap||$t,declarations:s.declarations||$t,imports:s.imports||$t,exports:s.exports||$t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return Zr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const K=xe;function Ce(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Y(s){return s[Ts]||null}function Ge(s){return s[ln]||null}function yt(s){return s[ki]||null}function sn(s){const o=Y(s)||Ge(s)||yt(s);return null!==o&&o.standalone}function _n(s,o){const a=s[cn]||null;if(!a&&!0===o)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return a}function pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Hr(s){return Array.isArray(s)&&!0===s[1]}function Ru(s){return 0!=(8&s.flags)}function Sa(s){return 2==(2&s.flags)}function nc(s){return 1==(1&s.flags)}function Or(s){return null!==s.template}function Sf(s){return 0!=(256&s[2])}function Ni(s,o){return s.hasOwnProperty(tr)?s[tr]:null}class ns{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function rs(){return eo}function eo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Pu),Aa}function Aa(){const s=Rf(this),o=s?.current;if(o){const a=s.previous;if(a===Zr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Pu(s,o,a,l){const d=Rf(s)||function Po(s,o){return s[oc]=o}(s,{previous:Zr,current:null}),g=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[a],b=v[I];g[I]=new ns(b&&b.currentValue,o,v===Zr),s[l]=o}rs.ngInherit=!0;const oc="__ngSimpleChanges__";function Rf(s){return s[oc]||null}function kn(s){for(;Array.isArray(s);)s=s[0];return s}function Lr(s,o){return kn(o[s.index])}function Oo(s,o){return s.data[o]}function ss(s,o){return s[o]}function en(s,o){const a=o[s];return pr(a)?a:a[0]}function to(s){return 64==(64&s[2])}function Ii(s,o){return null==o?null:s[o]}function Uu(s){s[18]=0}function An(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Vt={lFrame:mc(null),bindingsEnabled:!0};function os(){return Vt.bindingsEnabled}function Ae(){return Vt.lFrame.lView}function Yt(){return Vt.lFrame.tView}function ju(s){return Vt.lFrame.contextLView=s,s[8]}function Hu(s){return Vt.lFrame.contextLView=null,s}function Pn(){let s=zu();for(;null!==s&&64===s.type;)s=s.parent;return s}function zu(){return Vt.lFrame.currentTNode}function hi(s,o){const a=Vt.lFrame;a.currentTNode=s,a.isParent=o}function Ma(){return Vt.lFrame.isParent}function Ra(){Vt.lFrame.isParent=!1}function Nn(){const s=Vt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function no(){return Vt.lFrame.bindingIndex++}function xg(s,o){const a=Vt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Gu(o)}function Gu(s){Vt.lFrame.currentDirectiveIndex=s}function fc(){return Vt.lFrame.currentQueryIndex}function Oa(s){Vt.lFrame.currentQueryIndex=s}function pc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function qu(s,o,a){if(a&Ye.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&Ye.Host||(d=pc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=Vt.lFrame=gc();return l.currentTNode=o,l.lView=s,!0}function Wu(s){const o=gc(),a=s[1];Vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function gc(){const s=Vt.lFrame,o=null===s?null:s.child;return null===o?mc(s):o}function mc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function yc(){const s=Vt.lFrame;return Vt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ld=yc;function ro(){const s=yc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ir(){return Vt.lFrame.selectedIndex}function Jr(s){Vt.lFrame.selectedIndex=s}function wn(){const s=Vt.lFrame;return Oo(s.tView,s.selectedIndex)}function Qu(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),I&&((s.contentHooks||(s.contentHooks=[])).push(a,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function so(s,o,a){Uo(s,o,3,a)}function Fo(s,o,a,l){(3&s[2])===a&&Uo(s,o,a,l)}function Vd(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Uo(s,o,a,l){const g=l??-1,v=o.length-1;let I=0;for(let b=void 0!==l?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[18]+=65536),(I<g||-1==g)&&(Bd(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Bd(s,o,a,l){const d=a[l]<0,g=a[l+1],I=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Ns{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Vo(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const g=a[l++],v=a[l++],I=a[l++];s.setAttribute(o,v,I,g)}else{const g=d,v=a[++l];el(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),l++}}return l}function uo(s){return 3===s||4===s||6===s}function el(s){return 64===s.charCodeAt(0)}function La(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||jd(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function jd(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Hd(s){return-1!==s}function gr(s){return 32767&s}function Ua(s,o){let a=function Fa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Li=!0;function Va(s){const o=Li;return Li=s,o}let jn=0;const bi={};function lo(s,o){const a=nl(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,$a(l.data,s),$a(o,null),$a(l.blueprint,null));const d=rl(s,o),g=s.injectorIndex;if(Hd(d)){const v=gr(d),I=Ua(d,o),b=I[1].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|b[v+S]}return o[g+8]=d,g}function $a(s,o){s.push(0,0,0,0,0,0,0,0,o)}function nl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function rl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=jo(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Os(s,o,a){!function tl(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(jr)&&(l=a[jr]),null==l&&(l=a[jr]=jn++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Ls(s,o,a){if(a&Ye.Optional||void 0!==s)return s;Ie()}function il(s,o,a,l){if(a&Ye.Optional&&void 0===l&&(l=null),0==(a&(Ye.Self|Ye.Host))){const d=s[9],g=er(void 0);try{return d?d.get(o,l,a&Ye.Optional):li(o,l,a&Ye.Optional)}finally{er(g)}}return Ls(l,0,a)}function co(s,o,a,l=Ye.Default,d){if(null!==s){if(1024&o[2]){const v=function $o(s,o,a,l,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=ja(g,v,a,l|Ye.Self,bi);if(I!==bi)return I;let b=g.parent;if(!b){const S=v[21];if(S){const R=S.get(a,bi,l);if(R!==bi)return R}b=jo(v),v=v[15]}g=b}return d}(s,o,a,l,bi);if(v!==bi)return v}const g=ja(s,o,a,l,bi);if(g!==bi)return g}return il(o,a,l,d)}function ja(s,o,a,l,d){const g=function Ec(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(jr)?s[jr]:void 0;return"number"==typeof o?o>=0?255&o:Ic:o}(a);if("function"==typeof g){if(!qu(o,s,l))return l&Ye.Host?Ls(d,0,l):il(o,a,l,d);try{const v=g(l);if(null!=v||l&Ye.Optional)return v;Ie()}finally{Ld()}}else if("number"==typeof g){let v=null,I=nl(s,o),b=-1,S=l&Ye.Host?o[16][6]:null;for((-1===I||l&Ye.SkipSelf)&&(b=-1===I?rl(s,o):o[I+8],-1!==b&&Ha(l,!1)?(v=o[1],I=gr(b),o=Ua(b,o)):I=-1);-1!==I;){const R=o[1];if(sl(g,I,R.data)){const O=qd(I,o,a,v,l,S);if(O!==bi)return O}b=o[I+8],-1!==b&&Ha(l,o[1].data[I+8]===S)&&sl(g,I,o)?(v=R,I=gr(b),o=Ua(b,o)):I=-1}}return d}function qd(s,o,a,l,d,g){const v=o[1],I=v.data[s+8],R=Bo(I,v,a,null==l?Sa(I)&&Li:l!=v&&0!=(3&I.type),d&Ye.Host&&g===I);return null!==R?us(o,v,R,I):bi}function Bo(s,o,a,l,d){const g=s.providerIndexes,v=o.data,I=1048575&g,b=s.directiveStart,R=g>>20,G=d?I+R:s.directiveEnd;for(let te=l?I:I+R;te<G;te++){const De=v[te];if(te<b&&a===De||te>=b&&De.type===a)return te}if(d){const te=v[b];if(te&&Or(te)&&te.type===a)return b}return null}function us(s,o,a,l){let d=s[a];const g=o.data;if(function oo(s){return s instanceof Ns}(d)){const v=d;v.resolving&&function nt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${a}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(g[a]));const I=Va(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?er(v.injectImpl):null;qu(s,l,Ye.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Ud(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=eo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==b&&er(b),Va(I),v.resolving=!1,Ld()}}return d}function sl(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ha(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class ho{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return co(this._tNode,this._lView,o,l,a)}}function Ic(){return new ho(Pn(),Ae())}function jo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function al(s){return function Gd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(uo(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(Pn(),s)}const Us="__parameters__";function Go(s,o,a){return $n(()=>{const l=function ul(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(b,S,R){const O=b.hasOwnProperty(Us)?b[Us]:Object.defineProperty(b,Us,{value:[]})[Us];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(v),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=at({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _r(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),_r(l,o)):o!==s&&o.push(l)}return o}function Je(s,o){s.forEach(a=>Array.isArray(a)?Je(a,o):o(a))}function Dn(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Fi(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const sr={},ut="__NG_DI_FLAG__",Zo="ngTempTokenPath",Qo=/\n/gm,Yo="__source";let Jo;function Ui(s){const o=Jo;return Jo=s,o}function Kd(s,o=Ye.Default){if(void 0===Jo)throw new be(-203,!1);return null===Jo?li(s,void 0,o):Jo.get(s,o&Ye.Optional?null:void 0,o)}function Hn(s,o=Ye.Default){return(function Cs(){return Nr}()||Kd)(Z(s),o)}function D(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Hn(s,o)}function T(s){const o=[];for(let a=0;a<s.length;a++){const l=Z(s[a]);if(Array.isArray(l)){if(0===l.length)throw new be(900,!1);let d,g=Ye.Default;for(let v=0;v<l.length;v++){const I=l[v],b=F(I);"number"==typeof b?-1===b?d=I.token:g|=b:d=I}o.push(Hn(d,g))}else o.push(Hn(l))}return o}function M(s,o){return s[ut]=o,s.prototype[ut]=o,s}function F(s){return s[ut]}const $e=M(Go("Optional"),8),kt=M(Go("SkipSelf"),4);var hs=(()=>((hs=hs||{})[hs.Important=1]="Important",hs[hs.DashCase=2]="DashCase",hs))();const dl=new Map;let ih=0;const mo="__ngContext__";function Gr(s,o){pr(o)?(s[mo]=o[20],function Cr(s){dl.set(s[20],s)}(o)):s[mo]=o}function uh(s,o){return undefined(s,o)}function Qa(s){const o=s[3];return Hr(o)?o[3]:o}function Rc(s){return ea(s[13])}function kc(s){return ea(s[4])}function ea(s){for(;null!==s&&!Hr(s);)s=s[4];return s}function Vi(s,o,a,l,d){if(null!=l){let g,v=!1;Hr(l)?g=l:pr(l)&&(v=!0,l=l[0]);const I=kn(l);0===s&&null!==a?null==d?fh(o,a,I):na(o,a,I,d||null,!0):1===s&&null!==a?na(o,a,I,d||null,!0):2===s?function ph(s,o,a){const l=yo(s,o);l&&function tp(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function _l(s,o,a,l,d){const g=a[7];g!==kn(a)&&Vi(o,s,l,g,d);for(let I=10;I<a.length;I++){const b=a[I];yl(b[1],b,s,o,l,g)}}(o,s,g,a,d)}}function Sr(s,o,a){return s.createElement(o,a)}function dh(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,An(d,-1)),a.splice(l,1)}function Ja(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&dh(d,l),o>0&&(s[a-1][4]=l[4]);const g=Fi(s,10+o);!function Vg(s,o){yl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function hh(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&yl(s,o,a,3,null,null),function Bg(s){let o=s[13];if(!o)return Nc(s[1],s);for(;o;){let a=null;if(pr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)pr(o)&&Nc(o[1],o),o=o[3];null===o&&(o=s),pr(o)&&Nc(o[1],o),a=o&&o[4]}o=a}}(o)}}function Nc(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Oc(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ns)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],b=g[v+1];try{b.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function ep(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],I="function"==typeof v?v(o):kn(o[v]),b=l[d=a[g+2]],S=a[g+3];"boolean"==typeof S?I.removeEventListener(a[g],b,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)(0,l[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Hr(o[3])){a!==o[3]&&dh(a,o);const l=o[19];null!==l&&l.detachView(s)}!function sh(s){dl.delete(s[20])}(o)}}function ta(s,o,a){return function Lc(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===gt.None||d===gt.Emulated)return null}return Lr(l,a)}(s,o.parent,a)}function na(s,o,a,l,d){s.insertBefore(o,a,l,d)}function fh(s,o,a){s.appendChild(o,a)}function Xa(s,o,a,l,d){null!==l?na(s,o,a,l,d):fh(s,o,a)}function yo(s,o){return s.parentNode(o)}let op,Fc=function ra(s,o,a){return 40&s.type?Lr(s,a):null};function zs(s,o,a,l){const d=ta(s,l,o),g=o[11],I=function jg(s,o,a){return Fc(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)Xa(g,d,a[b],I,!1);else Xa(g,d,a,I,!1)}function Ci(s,o){if(null!==o){const a=o.type;if(3&a)return Lr(o,s);if(4&a)return ip(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Ci(s,l);{const d=s[o.index];return Hr(d)?ip(-1,d):kn(d)}}if(32&a)return uh(o,s)()||kn(s[o.index]);{const l=rp(s,o);return null!==l?Array.isArray(l)?l[0]:Ci(Qa(s[16]),l):Ci(s,o.next)}}return null}function rp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ip(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Ci(l,d)}return o[7]}function gh(s,o,a,l,d,g,v){for(;null!=a;){const I=l[a.index],b=a.type;if(v&&0===o&&(I&&Gr(kn(I),l),a.flags|=4),64!=(64&a.flags))if(8&b)gh(s,o,a.child,l,d,g,!1),Vi(o,s,d,I,g);else if(32&b){const S=uh(a,l);let R;for(;R=S();)Vi(o,s,d,R,g);Vi(o,s,d,I,g)}else 16&b?Bi(s,o,l,a,d,g):Vi(o,s,d,I,g);a=v?a.projectionNext:a.next}}function yl(s,o,a,l,d,g){gh(a,l,s.firstChild,o,d,g,!1)}function Bi(s,o,a,l,d,g){const v=a[16],b=v[6].projection[l.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Vi(o,s,d,b[S],g);else gh(s,o,b,v[3],d,g,!0)}function fs(s,o,a){s.setAttribute(o,"style",a)}function pn(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function _(s){op=s}class ge{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const yh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ar=(()=>((Ar=Ar||{})[Ar.NONE=0]="NONE",Ar[Ar.HTML=1]="HTML",Ar[Ar.STYLE=2]="STYLE",Ar[Ar.SCRIPT=3]="SCRIPT",Ar[Ar.URL=4]="URL",Ar[Ar.RESOURCE_URL=5]="RESOURCE_URL",Ar))();function Qg(s){const o=function wh(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Ar.URL,s)||"":function Gs(s,o){const a=function ap(s){return s instanceof ge&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function ur(s){return s instanceof ge?s.changingThisBreaksApplicationSecurity:s}(s):function nu(s){return(s=String(s)).match(yh)?s:"unsafe:"+s}(Ee(s))}const Jg=new En("ENVIRONMENT_INITIALIZER"),D_=new En("INJECTOR",-1),C_=new En("INJECTOR_DEF_TYPES");class pp{get(o,a=sr){if(a===sr){const l=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw l.name="NullInjectorError",l}return a}}function ms(...s){return{\u0275providers:T_(0,s)}}function T_(s,...o){const a=[],l=new Set;let d;return Je(o,g=>{const v=g;wl(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&S_(d,a),a}function S_(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Je(d,g=>{o.push(g)})}}function wl(s,o,a,l){if(!(s=Z(s)))return!1;let d=null,g=Xi(s);const v=!g&&Y(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(g=Xi(b),!g)return!1;d=b}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of b)wl(S,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;l.add(d);try{Je(g.imports,R=>{wl(R,o,a,l)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&S_(S,o)}if(!I){const S=Ni(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:$t},{provide:C_,useValue:d,multi:!0},{provide:Jg,useValue:()=>Hn(d),multi:!0})}const b=g.providers;null==b||I||Je(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}const bD=ye({provide:String,useValue:ye});function gp(s){return null!==s&&"object"==typeof s&&bD in s}function El(s){return"function"==typeof s}const Eh=new En("Set Injector scope."),Xg={},Ww={};let xr;function ru(){return void 0===xr&&(xr=new pp),xr}class $i{}class em extends $i{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,me(o,v=>this.processProvider(v)),this.records.set(D_,bl(void 0,this)),d.has("environment")&&this.records.set($i,bl(void 0,this));const g=this.records.get(Eh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(C_.multi,$t,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Ui(this),l=er(void 0);try{return o()}finally{Ui(a),er(l)}}get(o,a=sr,l=Ye.Default){this.assertNotDestroyed();const d=Ui(this),g=er(void 0);try{if(!(l&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function CD(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&It(o);I=b&&this.injectableDefInScope(b)?bl(A_(o),Xg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&Ye.Self?ru():this.parent).get(o,a=l&Ye.Optional&&a===sr?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Zo]=v[Zo]||[]).unshift(_e(o)),d)throw v;return function Q(s,o,a,l){const d=s[Zo];throw o[Yo]&&d.unshift(o[Yo]),s.message=function ae(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=_e(o);if(Array.isArray(o))d=o.map(_e).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):_e(I)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Qo,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Zo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{er(g),Ui(d)}}resolveInjectorInitializers(){const o=Ui(this),a=er(void 0);try{const l=this.get(Jg.multi,$t,Ye.Self);for(const d of l)d()}finally{Ui(o),er(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(_e(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let a=El(o=Z(o))?o:Z(o&&o.provide);const l=function vr(s){return gp(s)?bl(void 0,s.useValue):bl(function Il(s,o,a){let l;if(El(s)){const d=Z(s);return Ni(d)||A_(d)}if(gp(s))l=()=>Z(s.useValue);else if(function qw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...T(s.deps||[]));else if(function Gw(s){return!(!s||!s.useExisting)}(s))l=()=>Hn(Z(s.useExisting));else{const d=Z(s&&(s.useClass||s.provide));if(!function dt(s){return!!s.deps}(s))return Ni(d)||A_(d);l=()=>new d(...T(s.deps))}return l}(s),Xg)}(o);if(El(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=bl(void 0,Xg,!0),d.factory=()=>T(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Xg&&(a.value=Ww,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Bt(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function A_(s){const o=It(s),a=null!==o?o.factory:Ni(s);if(null!==a)return a;if(s instanceof En)throw new be(204,!1);if(s instanceof Function)return function Le(s){const o=s.length;if(o>0)throw function Vs(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new be(204,!1);const a=function Tn(s){const o=s&&(s[wi]||s[ui]);if(o){const a=function Pr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new be(204,!1)}function bl(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Ze(s){return!!s.\u0275providers}function me(s,o){for(const a of s)Array.isArray(a)?me(a,o):Ze(a)?me(a.\u0275providers,o):o(a)}class Mr{}class TD{resolveComponentFactory(o){throw function Kw(s){const o=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let mp=(()=>{class s{}return s.NULL=new TD,s})();function SD(){return Vc(Pn(),Ae())}function Vc(s,o){return new yp(Lr(s,o))}let yp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=SD,s})();function bA(s){return s instanceof yp?s.nativeElement:s}class x_{}let Gt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Ih(){const s=Ae(),a=en(Pn().index,s);return(pr(a)?a:s)[11]}(),s})(),Qw=(()=>{class s{}return s.\u0275prov=at({token:s,providedIn:"root",factory:()=>null}),s})();class Ln{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Lt=new Ln("14.2.12"),Bc={};function zn(s){return s.ngOriginalError}class He{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&zn(o);for(;a&&zn(a);)a=zn(a);return a||null}}function _p(s){return s.ownerDocument.defaultView}function aa(s){return s instanceof Function?s():s}function le(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const qs="ng-template";function PD(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==le(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function bh(s){return 4===s.type&&s.value!==qs}function Dl(s,o,a){return o===(4!==s.type||a?s.value:qs)}function ND(s,o,a){let l=4;const d=s.attrs||[],g=function LD(s){for(let o=0;o<s.length;o++)if(uo(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&l){if(l=2|1&l,""!==b&&!Dl(s,b,a)||""===b&&1===o.length){if(ri(l))return!1;v=!0}}else{const S=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!PD(s.attrs,S,a)){if(ri(l))return!1;v=!0}continue}const O=Jw(8&l?"class":b,d,bh(s),a);if(-1===O){if(ri(l))return!1;v=!0;continue}if(""!==S){let G;G=O>g?"":d[O+1].toLowerCase();const te=8&l?G:null;if(te&&-1!==le(te,S,0)||2&l&&S!==G){if(ri(l))return!1;v=!0}}}}else{if(!v&&!ri(l)&&!ri(b))return!1;if(v&&ri(b))continue;v=!1,l=b|1&l}}return ri(l)||v}function ri(s){return 0==(1&s)}function Jw(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function ji(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function nm(s,o,a=!1){for(let l=0;l<o.length;l++)if(ND(s,o[l],a))return!0;return!1}function Cl(s,o){return s?":not("+o.trim()+")":o}function eE(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const I=s[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ri(v)&&(o+=Cl(g,d),d=""),l=v,g=g||!ri(l);a++}return""!==d&&(o+=Cl(g,d)),o}const _t={};function In(s){P_(Yt(),Ae(),ir()+s,!1)}function P_(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&so(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Fo(o,g,0,a)}Jr(a)}function N_(s,o=null,a=null,l){const d=Dh(s,o,a,l);return d.resolveInjectorInitializers(),d}function Dh(s,o=null,a=null,l,d=new Set){const g=[a||$t,ms(s)];return l=l||("object"==typeof s?void 0:_e(s)),new em(g,o||ru(),l||null,d)}let Gc=(()=>{class s{static create(a,l){if(Array.isArray(a))return N_({name:""},l,a,"");{const d=a.name??"";return N_({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=sr,s.NULL=new pp,s.\u0275prov=at({token:s,providedIn:"any",factory:()=>Hn(D_)}),s.__NG_ELEMENT_ID__=-1,s})();function xh(s,o=Ye.Default){const a=Ae();return null===a?Hn(s,o):co(Pn(),a,Z(s),o)}function Mh(){throw new Error("invalid")}function Un(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Oa(d),v.contentQueries(2,o[g],g)}}}function Cp(s,o,a,l,d,g,v,I,b,S,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|l,(null!==R||s&&1024&s[2])&&(O[2]|=1024),Uu(O),O[3]=O[15]=s,O[8]=a,O[10]=v||s&&s[10],O[11]=I||s&&s[11],O[12]=b||s&&s[12]||null,O[9]=S||s&&s[9]||null,O[6]=g,O[20]=function Kf(){return ih++}(),O[21]=R,O[16]=2==o.type?s[16]:O,O}function Oh(s,o,a,l,d){let g=s.data[o];if(null===g)g=function Jc(s,o,a,l,d){const g=zu(),v=Ma(),b=s.data[o]=function mE(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(v?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,a,l,d),function Ag(){return Vt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Lo(){const s=Vt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return hi(g,!0),g}function Lh(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function dm(s,o,a){Wu(o);try{const l=s.viewQuery;null!==l&&ym(1,l,a);const d=s.template;null!==d&&la(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Un(s,o),s.staticViewQueries&&ym(2,s.viewQuery,a);const g=s.components;null!==g&&function cm(s,o){for(let a=0;a<o.length;a++)bE(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,ro()}}function du(s,o,a,l){const d=o[2];if(128!=(128&d)){Wu(o);try{Uu(o),function dc(s){return Vt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&la(s,o,a,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&so(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Fo(o,S,0,null),Vd(o,0)}if(function XD(s){for(let o=Rc(s);null!==o;o=kc(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(512&d[2])&&An(g,1),d[2]|=512}}}(o),function IE(s){for(let o=Rc(s);null!==o;o=kc(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];to(l)&&du(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Un(s,o),v){const S=s.contentCheckHooks;null!==S&&so(o,S)}else{const S=s.contentHooks;null!==S&&Fo(o,S,1),Vd(o,1)}!function qD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Jr(~d);else{const g=d,v=a[++l],I=a[++l];xg(v,g),I(2,o[g])}}}finally{Jr(-1)}}(s,o);const I=s.components;null!==I&&function lm(s,o){for(let a=0;a<o.length;a++)Wr(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&ym(2,b,l),v){const S=s.viewCheckHooks;null!==S&&so(o,S)}else{const S=s.viewHooks;null!==S&&Fo(o,S,2),Vd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,An(o[3],-1))}finally{ro()}}}function la(s,o,a,l,d){const g=ir(),v=2&l;try{Jr(-1),v&&o.length>22&&P_(s,o,22,!1),a(l,d)}finally{Jr(g)}}function Q_(s,o,a){if(Ru(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function hm(s,o,a){!os()||(function Qt(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||lo(a,o),Gr(l,o);const v=a.initialInputs;for(let I=d;I<g;I++){const b=s.data[I],S=Or(b);S&&QD(o,a,b);const R=us(o,s,I,a);Gr(R,o),null!==v&&YD(0,I-d,R,b,0,v),S&&(en(a.index,o)[8]=R)}}(s,o,a,Lr(a,o)),128==(128&a.flags)&&function ZD(s,o,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,v=function hc(){return Vt.lFrame.currentDirectiveIndex}();try{Jr(g);for(let I=l;I<d;I++){const b=s.data[I],S=o[I];Gu(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Sp(b,S)}}finally{Jr(-1),Gu(v)}}(s,o,a))}function fm(s,o,a=Lr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],I=-1===v?a(o,s):s[v];s[d++]=I}}}function Xc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Tp(s,o,a,l,d,g,v,I,b,S){const R=22+l,O=R+d,G=function WD(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:_t);return a}(R,O),te="function"==typeof S?S():S;return G[1]={type:s,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function Y_(s,o,a,l){const d=ev(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&DE(s).push(l,d.length-1))}function hu(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function yE(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let I=null,b=null;for(let S=o.directiveStart;S<l;S++){const R=d[S],O=R.inputs,G=null===g||bh(o)?null:JD(O,g);v.push(G),I=hu(O,S,I),b=hu(R.outputs,S,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=b}function Fh(s,o){const a=en(o,s);16&a[2]||(a[2]|=32)}function ed(s,o,a,l){let d=!1;if(os()){const g=function Ap(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];nm(a,v.selectors,!1)&&(d||(d=[]),Os(lo(a,o),s,v.type),Or(v)?(Uh(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,J_(a,s.data.length,g.length);for(let R=0;R<g.length;R++){const O=g[R];O.providersResolver&&O.providersResolver(O)}let I=!1,b=!1,S=Lh(s,o,g.length,null);for(let R=0;R<g.length;R++){const O=g[R];a.mergedAttrs=La(a.mergedAttrs,O.hostAttrs),X_(s,a,o,S,O),EE(S,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const G=O.type.prototype;!I&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),I=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),S++}yE(s,a)}v&&function pm(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new be(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=La(a.mergedAttrs,a.attrs),d}function wE(s,o,a,l,d,g){const v=g.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function KD(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=b&&I.push(b),I.push(l,d,v)}}function Sp(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Uh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function EE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Or(o)&&(a[""]=s)}}function J_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function X_(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Ni(d.type)),v=new Ns(g,Or(d),xh);s.blueprint[l]=v,a[l]=v,wE(s,o,0,l,Lh(s,a,d.hostVars,_t),d)}function QD(s,o,a){const l=Lr(o,s),d=Xc(a),g=s[10],v=vs(s,Cp(s,d,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=v}function wo(s,o,a,l,d,g){const v=Lr(s,o);!function gm(s,o,a,l,d,g,v){if(null==g)s.removeAttribute(o,d,a);else{const I=null==v?Ee(g):v(g,l||"",d);s.setAttribute(o,d,I,a)}}(o[11],v,g,s.value,a,l,d)}function YD(s,o,a,l,d,g){const v=g[o];if(null!==v){const I=l.setInput;for(let b=0;b<v.length;){const S=v[b++],R=v[b++],O=v[b++];null!==I?l.setInput(a,O,S,R):a[R]=O}}}function JD(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Vh(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function Wr(s,o){const a=en(o,s);if(to(a)){const l=a[1];48&a[2]?du(l,a,l.template,a[8]):a[5]>0&&xp(a)}}function xp(s){for(let l=Rc(s);null!==l;l=kc(l))for(let d=10;d<l.length;d++){const g=l[d];if(to(g))if(512&g[2]){const v=g[1];du(v,g,v.template,g[8])}else g[5]>0&&xp(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=en(a[l],s);to(d)&&d[5]>0&&xp(d)}}function bE(s,o){const a=en(o,s),l=a[1];(function Mp(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),dm(l,a,a[8])}function vs(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Rp(s){for(;s;){s[2]|=32;const o=Qa(s);if(Sf(s)&&!o)return s;s=o}return null}function kp(s,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{du(s,o,s.template,a)}catch(v){throw l&&Bh(o,v),v}finally{d.end&&d.end()}}function ym(s,o,a){Oa(0),o(s,a)}function ev(s){return s[7]||(s[7]=[])}function DE(s){return s.cleanup||(s.cleanup=[])}function Bh(s,o){const a=s[9],l=a?a.get(He,null):null;l&&l.handleError(o)}function Pp(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],b=o[v],S=s.data[v];null!==S.setInput?S.setInput(b,d,l,I):b[I]=d}}function pu(s,o,a){const l=function di(s,o){return kn(o[s])}(o,s);!function gl(s,o,a){s.setValue(o,a)}(s[11],l,a)}function Np(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=pe(d,I):2==g&&(l=pe(l,I+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function $h(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(kn(g)),Hr(g))for(let I=10;I<g.length;I++){const b=g[I],S=b[1].firstChild;null!==S&&$h(b[1],b,S,l)}const v=a.type;if(8&v)$h(s,o,a.child,l);else if(32&v){const I=uh(a,o);let b;for(;b=I();)l.push(b)}else if(16&v){const I=rp(o,a);if(Array.isArray(I))l.push(...I);else{const b=Qa(o[16]);$h(b[1],b,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class jh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return $h(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Hr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ja(o,l),Fi(a,l))}this._attachedToViewContainer=!1}hh(this._lView[1],this._lView)}onDestroy(o){Y_(this._lView[1],this._lView,null,o)}markForCheck(){Rp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){kp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ch(s,o){yl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class tC extends jh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;kp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class _m extends mp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Y(o);return new ca(a,this.ngModule)}}function TE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Hh{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Bc,l);return d!==Bc||a===Bc?d:this.parentInjector.get(o,a,l)}}class ca extends Mr{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function lr(s){return s.map(eE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return TE(this.componentDef.inputs)}get outputs(){return TE(this.componentDef.outputs)}create(o,a,l,d){let g=(d=d||this.ngModule)instanceof $i?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new Hh(o,g):o,I=v.get(x_,null);if(null===I)throw new be(407,!1);const b=v.get(Qw,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=l?function dn(s,o,a){return s.selectRootElement(o,a===gt.ShadowDom)}(S,l,this.componentDef.encapsulation):Sr(S,R,function nC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,te=Tp(0,null,null,1,0,null,null,null,null,null),De=Cp(null,te,null,G,null,null,I,S,b,v,null);let Ue,qe;Wu(De);try{const ft=function Ti(s,o,a,l,d,g){const v=a[1];a[22]=s;const b=Oh(v,22,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(Np(b,S,!0),null!==s&&(Vo(d,s,S),null!==b.classes&&pn(d,s,b.classes),null!==b.styles&&fs(d,s,b.styles)));const R=l.createRenderer(s,o),O=Cp(a,Xc(o),null,o.onPush?32:16,a[22],b,l,R,g||null,null,null);return v.firstCreatePass&&(Os(lo(b,a),v,o.type),Uh(v,b),J_(b,a.length,1)),vs(a,O),a[22]=O}(O,this.componentDef,De,I,S);if(O)if(l)Vo(S,O,["ng-version",Lt.full]);else{const{attrs:Mt,classes:Re}=function rm(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!ri(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Mt&&Vo(S,O,Mt),Re&&Re.length>0&&pn(S,O,Re.join(" "))}if(qe=Oo(te,22),void 0!==a){const Mt=qe.projection=[];for(let Re=0;Re<this.ngContentSelectors.length;Re++){const Ft=a[Re];Mt.push(null!=Ft?Array.from(Ft):null)}}Ue=function oC(s,o,a,l){const d=a[1],g=function vE(s,o,a){const l=Pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),X_(s,l,o,Lh(s,o,1,null),a),yE(s,l));const d=us(o,s,l.directiveStart,l);Gr(d,o);const g=Lr(l,o);return g&&Gr(g,o),d}(d,a,o);if(s[8]=a[8]=g,null!==l)for(const I of l)I(g,o);if(o.contentQueries){const I=Pn();o.contentQueries(1,g,I.directiveStart)}const v=Pn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Jr(v.index),wE(a[1],v,0,v.directiveStart,v.directiveEnd,o),Sp(o,g)),g}(ft,this.componentDef,De,[SE]),dm(te,De,null)}finally{ro()}return new iC(this.componentType,Ue,Vc(qe,De),De,qe)}}class iC extends class Pe{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new tC(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const g=this._rootLView;Pp(g[1],g,d,o,a),Fh(g,this._tNode.index)}}get injector(){return new ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function SE(){const s=Pn();Qu(Ae()[1],s)}let Em=null;function td(){if(!Em){const s=hn.Symbol;if(s&&s.iterator)Em=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Em=l)}}}return Em}function Op(s){return!!nv(s)&&(Array.isArray(s)||!(s instanceof Map)&&td()in s)}function nv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function da(s,o,a){return s[o]=a}function yi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Fp(s,o,a,l){const d=Ae();return yi(d,no(),o)&&(Yt(),wo(wn(),d,s,o,a,l)),Fp}function Pl(s,o,a,l,d,g){const I=function Rl(s,o,a,l){const d=yi(s,o,a);return yi(s,o+1,l)||d}(s,function Oi(){return Vt.lFrame.bindingIndex}(),a,d);return function as(s){const o=Vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2),I?o+Ee(a)+l+Ee(d)+g:_t}function ov(s,o,a,l,d,g,v,I){const b=Ae(),S=Yt(),R=s+22,O=S.firstCreatePass?function AE(s,o,a,l,d,g,v,I,b){const S=o.consts,R=Oh(o,s,4,v||null,Ii(S,I));ed(o,a,R,Ii(S,b)),Qu(o,R);const O=R.tViews=Tp(2,R,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,S,b,o,a,l,d,g,v):S.data[R];hi(O,!1);const G=b[11].createComment("");zs(S,b,G,O),Gr(G,b),vs(b,b[R]=Vh(G,b,G,O)),nc(O)&&hm(S,b,O),null!=v&&fm(b,O,I)}function Wh(s){return ss(function cc(){return Vt.lFrame.contextLView}(),22+s)}function mu(s,o,a){const l=Ae();return yi(l,no(),o)&&function Gi(s,o,a,l,d,g,v,I){const b=Lr(o,a);let R,S=o.inputs;!I&&null!=S&&(R=S[l])?(Pp(s,a,R,l,d),Sa(o)&&Fh(a,o.index)):3&o.type&&(l=function zi(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,g.setProperty(b,l,d))}(Yt(),wn(),l,s,o,l[11],a,!1),mu}function av(s,o,a,l,d){const v=d?"class":"style";Pp(s,a,o.inputs[v],v,l)}function Cm(s,o,a,l){const d=Ae(),g=Yt(),v=22+s,I=d[11],b=d[v]=Sr(I,o,function Zu(){return Vt.lFrame.currentNamespace}()),S=g.firstCreatePass?function xE(s,o,a,l,d,g,v){const I=o.consts,S=Oh(o,s,2,d,Ii(I,g));return ed(o,a,S,Ii(I,v)),null!==S.attrs&&Np(S,S.attrs,!1),null!==S.mergedAttrs&&Np(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,a,l):g.data[v];hi(S,!0);const R=S.mergedAttrs;null!==R&&Vo(I,b,R);const O=S.classes;null!==O&&pn(I,b,O);const G=S.styles;return null!==G&&fs(I,b,G),64!=(64&S.flags)&&zs(g,d,b,S),0===function Bu(){return Vt.lFrame.elementDepthCount}()&&Gr(b,d),function $u(){Vt.lFrame.elementDepthCount++}(),nc(S)&&(hm(g,d,S),Q_(g,S,d)),null!==l&&fm(d,S),Cm}function Tm(){let s=Pn();Ma()?Ra():(s=s.parent,hi(s,!1));const o=s;!function ac(){Vt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(Qu(a,s),Ru(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xu(s){return 0!=(16&s.flags)}(o)&&av(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function $d(s){return 0!=(32&s.flags)}(o)&&av(a,o,Ae(),o.stylesWithoutHost,!1),Tm}function uv(s,o,a,l){return Cm(s,o,a,l),Tm(),uv}function ha(s,o,a){const l=Ae(),d=Yt(),g=s+22,v=d.firstCreatePass?function Up(s,o,a,l,d){const g=o.consts,v=Ii(g,l),I=Oh(o,s,8,"ng-container",v);return null!==v&&Np(I,v,!0),ed(o,a,I,Ii(g,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(g,d,l,o,a):d.data[g];hi(v,!0);const I=l[g]=l[11].createComment("");return zs(d,l,I,v),Gr(I,l),nc(v)&&(hm(d,l,v),Q_(d,v,l)),null!=a&&fm(l,v),ha}function fa(){let s=Pn();const o=Yt();return Ma()?Ra():(s=s.parent,hi(s,!1)),o.firstCreatePass&&(Qu(o,s),Ru(s)&&o.queries.elementEnd(s)),fa}function ME(){return Ae()}function cv(s){return!!s&&"function"==typeof s.then}function Sm(s){return!!s&&"function"==typeof s.subscribe}const Vp=Sm;function dv(s,o,a,l){const d=Ae(),g=Yt(),v=Pn();return function $p(s,o,a,l,d,g,v,I){const b=nc(l),R=s.firstCreatePass&&DE(s),O=o[8],G=ev(o);let te=!0;if(3&l.type||I){const qe=Lr(l,o),ft=I?I(qe):qe,Mt=G.length,Re=I?gn=>I(kn(gn[l.index])):l.index;let Ft=null;if(!I&&b&&(Ft=function Bp(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const I=o[7],b=d[g+2];return I.length>b?I[b]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=g,Ft.__ngLastListenerFn__=g,te=!1;else{g=fv(l,o,O,g,!1);const gn=a.listen(ft,d,g);G.push(g,gn),R&&R.push(d,Re,Mt,Mt+1)}}else g=fv(l,o,O,g,!1);const De=l.outputs;let Ue;if(te&&null!==De&&(Ue=De[d])){const qe=Ue.length;if(qe)for(let ft=0;ft<qe;ft+=2){const Mn=o[Ue[ft]][Ue[ft+1]].subscribe(g),vd=G.length;G.push(g,Mn),R&&R.push(d,l.index,vd,-(vd+1))}}}(g,d,d[11],v,s,o,0,l),dv}function Kh(s,o,a,l){try{return!1!==a(l)}catch(d){return Bh(s,d),!1}}function fv(s,o,a,l,d){return function g(v){if(v===Function)return l;Rp(2&s.flags?en(s.index,o):o);let b=Kh(o,0,l,v),S=g.__ngNextListenerFn__;for(;S;)b=Kh(o,0,S,v)&&b,S=S.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function pv(s=1){return function io(s){return(Vt.lFrame.contextLView=function Ku(s,o){for(;s>0;)o=o[15],s--;return o}(s,Vt.lFrame.contextLView))[8]}(s)}function bv(s,o=""){const a=Ae(),l=Yt(),d=s+22,g=l.firstCreatePass?Oh(l,d,1,o,null):l.data[d],v=a[d]=function lh(s,o){return s.createText(o)}(a[11],o);zs(l,a,v,g),hi(g,!1)}function Dv(s){return vu("",s,""),Dv}function vu(s,o,a){const l=Ae(),d=function kl(s,o,a,l){return yi(s,no(),a)?o+Ee(a)+l:_t}(l,s,o,a);return d!==_t&&pu(l,ir(),d),vu}function Bl(s,o,a,l,d){const g=Ae(),v=Pl(g,s,o,a,l,d);return v!==_t&&pu(g,ir(),v),Bl}const Do=void 0;var Yh=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Nv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let $l={};function ud(s){const o=function aI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Vm(o);if(a)return a;const l=o.split("-")[0];if(a=Vm(l),a)return a;if("en"===l)return Yh;throw new be(701,!1)}function Lv(s){return ud(s)[vt.PluralCase]}function Vm(s){return s in $l||($l[s]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[s]),$l[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Jh="en-US";let Vv=Jh;class jl{}class Jm{}function g0(s,o){return new m0(s,o??null)}class m0 extends jl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _m(this);const l=_n(o);this._bootstrapComponents=aa(l.bootstrap),this._r3Injector=Dh(o,a,[{provide:jl,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xm extends Jm{constructor(o){super(),this.moduleType=o}create(o){return new m0(this.moduleType,o)}}class YC extends jl{constructor(o,a,l){super(),this.componentFactoryResolver=new _m(this),this.instance=null;const d=new em([...o,{provide:jl,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],a||ru(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Yp(s,o,a=null){return new YC(s,o,a).injector}let y0=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=T_(0,a.type),d=l.length>0?Yp([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=at({token:s,providedIn:"environment",factory:()=>new s(Hn($i))}),s})();function _0(s){s.getStandaloneInjector=o=>o.get(y0).getOrCreateStandaloneInjector(s)}function eg(s,o,a){const l=Nn()+s,d=Ae();return d[l]===_t?da(d,l,a?o.call(a):o()):function zh(s,o){return s[o]}(d,l)}function MI(s,o,a,l){return ty(Ae(),Nn(),s,o,a,l)}function ty(s,o,a,l,d,g){const v=o+a;return yi(s,v,d)?da(s,v+1,g?l.call(g,d):l(d)):function af(s,o){const a=s[o];return a===_t?void 0:a}(s,v+1)}function D0(s,o){const a=Yt();let l;const d=s+22;a.firstCreatePass?(l=function sy(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Ni(l.type)),v=er(xh);try{const I=Va(!1),b=g();return Va(I),function Dm(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Ae(),d,b),b}finally{er(v)}}function oy(s,o,a){const l=s+22,d=Ae(),g=ss(d,l);return function ng(s,o){return s[1].data[o].pure}(d,l)?ty(d,Nn(),o,g.transform,a,g):g.transform(a)}function ay(s){return o=>{setTimeout(s,void 0,o)}}const ma=class oT extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,g=a||(()=>null),v=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(g=ay(g),d&&(d=ay(d)),v&&(v=ay(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof ee.w0&&o.add(I),I}};function NI(){return this._results[td()]()}class T0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=td(),l=T0.prototype;l[a]||(l[a]=NI)}get changes(){return this._changes||(this._changes=new ma)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=_r(o);(this._changesDetected=!function un(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rg=(()=>{class s{}return s.__NG_ELEMENT_ID__=S0,s})();const aT=rg,uT=class extends aT{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Cp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),dm(l,d,o),new jh(d)}};function S0(){return uy(Pn(),Ae())}function uy(s,o){return 4&s.type?new uT(o,s,Vc(s,o)):null}let ly=(()=>{class s{}return s.__NG_ELEMENT_ID__=Bn,s})();function Bn(){return OI(Pn(),Ae())}const FA=ly,lT=class extends FA{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new ho(this._hostTNode,this._hostLView)}get parentInjector(){const o=rl(this._hostTNode,this._hostLView);if(Hd(o)){const a=Ua(o,this._hostLView),l=gr(o);return new ho(a[1].data[l+8],a)}return new ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=hr(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,l,d,g){const v=o&&!function po(s){return"function"==typeof s}(o);let I;if(v)I=a;else{const O=a||{};I=O.index,l=O.injector,d=O.projectableNodes,g=O.environmentInjector||O.ngModuleRef}const b=v?o:new ca(Y(o)),S=l||this.parentInjector;if(!g&&null==b.ngModule){const G=(v?S:this.parentInjector).get($i,null);G&&(g=G)}const R=b.create(S,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const l=o._lView,d=l[1];if(function Fu(s){return Hr(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],G=new lT(O,O[6],O[3]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Ya(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],Dn(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function $g(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,l,v,g);const I=ip(g,v),b=l[11],S=yo(b,v[7]);return null!==S&&function Pc(s,o,a,l,d,g){l[0]=d,l[6]=o,yl(s,l,a,1,d,g)}(d,v[6],b,l,S,I),o.attachToViewContainerRef(),Dn(cy(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=hr(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ja(this._lContainer,a);l&&(Fi(cy(this._lContainer),a),hh(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ja(this._lContainer,a);return l&&null!=Fi(cy(this._lContainer),a)?new jh(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function hr(s){return s[8]}function cy(s){return s[8]||(s[8]=[])}function OI(s,o){let a;const l=o[s.index];if(Hr(l))a=l;else{let d;if(8&s.type)d=kn(l);else{const g=o[11];d=g.createComment("");const v=Lr(s,o);na(g,yo(g,v),d,function np(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=a=Vh(l,o,d,s),vs(o,a)}return new lT(a,s,o)}class A0{constructor(o){this.queryList=o,this.matches=null}clone(){return new A0(this.queryList)}setDirty(){this.queryList.setDirty()}}class x0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new x0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==og(o,a).matches&&this.queries[a].setDirty()}}class FI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class UI{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new UI(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class M0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new M0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,dT(a,g)),this.matchTNodeWithReadOption(o,a,Bo(a,o,g,!1,!1))}else l===rg?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Bo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===yp||d===ly||d===rg&&4&a.type)this.addMatch(a.index,-2);else{const g=Bo(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function dT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ya(s,o,a,l){return-1===a?function VI(s,o){return 11&s.type?Vc(s,o):4&s.type?uy(s,o):null}(o,s):-2===a?function Eu(s,o,a){return a===yp?Vc(o,s):a===rg?uy(o,s):a===ly?OI(o,s):void 0}(s,o,l):us(s,s[1],a,o)}function hT(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,I=[];for(let b=0;b<v.length;b+=2){const S=v[b];I.push(S<0?null:ya(o,g[S],v[b+1],a.metadata.read))}d.matches=I}return d.matches}function Iu(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=hT(s,o,d,a);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)l.push(v[I/2]);else{const S=g[I+1],R=o[-b];for(let O=10;O<R.length;O++){const G=R[O];G[17]===G[3]&&Iu(G[1],G,S,l)}if(null!==R[9]){const O=R[9];for(let G=0;G<O.length;G++){const te=O[G];Iu(te[1],te,S,l)}}}}}return l}function ig(s){const o=Ae(),a=Yt(),l=fc();Oa(l+1);const d=og(a,l);if(s.dirty&&function Lu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Iu(a,o,l,[]):hT(a,o,d,l);s.reset(g,bA),s.notifyOnChanges()}return!0}return!1}function BI(s,o,a,l){const d=Yt();if(d.firstCreatePass){const g=Pn();(function jI(s,o,a){null===s.queries&&(s.queries=new UI),s.queries.track(new M0(o,a))})(d,new FI(o,a,l),g.index),function fd(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function sg(s,o,a){const l=new T0(4==(4&a));Y_(s,o,l,l.destroy),null===o[19]&&(o[19]=new x0),o[19].queries.push(new A0(l))}(d,Ae(),a)}function R0(){return function $I(s,o){return s[19].queries[o].queryList}(Ae(),fc())}function og(s,o){return s.queries.getByIndex(o)}function lf(s,o){return uy(s,o)}function ag(...s){}const yd=new En("Application Initializer");let ff=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ag,this.reject=ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(cv(g))a.push(g);else if(Vp(g)){const v=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Hn(yd,8))},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const DT=new En("AppId",{providedIn:"root",factory:function CT(){return`${wy()}${wy()}${wy()}`}});function wy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cu=new En("Platform Initializer"),TT=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tb=new En("appBootstrapListener"),ST=new En("AnimationModuleType");let AT=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ey=new En("LocaleId",{providedIn:"root",factory:()=>D(Ey,Ye.Optional|Ye.SkipSelf)||function xT(){return typeof $localize<"u"&&$localize.locale||Jh}()}),YA=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class RT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let B0=(()=>{class s{compileModuleSync(a){return new Xm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=aa(_n(a).declarations).reduce((v,I)=>{const b=Y(I);return b&&v.push(new ca(b)),v},[]);return new RT(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const by=(()=>Promise.resolve(0))();function $0(s){typeof Zone>"u"?by.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Es{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ib(){let s=hn.requestAnimationFrame,o=hn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function sb(s){const o=()=>{!function Ai(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(hn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Dy(s),s.isCheckStableRunning=!0,Ki(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Dy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,I)=>{try{return pf(s),a.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),gf(s)}},onInvoke:(a,l,d,g,v,I,b)=>{try{return pf(s),a.invoke(d,g,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),gf(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Dy(s),Ki(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Es.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Es.isInAngularZone())throw new be(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,_d,ag,ag);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const _d={};function Ki(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Dy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function pf(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gf(s){s._nesting--,Ki(s)}class xi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const ob=new En(""),Cy=new En("");let Tu,mf=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tu||(function j0(s){Tu=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Es.assertNotInAngularZone(),$0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Hn(Es),Hn(zl),Hn(Cy))},s.\u0275prov=at({token:s,factory:s.\u0275fac}),s})(),zl=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Tu?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Gl=null;const ab=new En("AllowMultipleToken"),H0=new En("PlatformDestroyListeners");class kr{constructor(o,a){this.name=o,this.token=a}}function lb(s,o,a=[]){const l=`Platform: ${o}`,d=new En(l);return(g=[])=>{let v=yf();if(!v||v.injector.get(ab,!1)){const I=[...a,...g,{provide:d,useValue:!0}];s?s(I):function NT(s){if(Gl&&!Gl.get(ab,!1))throw new be(400,!1);Gl=s;const o=s.get(q0);(function ub(s){const o=s.get(Cu,null);o&&o.forEach(a=>a())})(s)}(function ql(s=[],o){return Gc.create({name:o,providers:[{provide:Eh,useValue:"platform"},{provide:H0,useValue:new Set([()=>Gl=null])},...s]})}(I,l))}return function lg(s){const o=yf();if(!o)throw new be(401,!1);return o}()}}function yf(){return Gl?.get(q0)??null}let q0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function va(s,o){let a;return a="noop"===s?new xi:("zone.js"===s?void 0:s)||new Es(o),a}(l?.ngZone,function cb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:Es,useValue:d}];return d.run(()=>{const v=Gc.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),b=I.injector.get(He,null);if(!b)throw new be(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{b.handleError(R)}});I.onDestroy(()=>{cg(this._modules,I),S.unsubscribe()})}),function Sy(s,o,a){try{const l=a();return cv(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const S=I.injector.get(ff);return S.runInitializers(),S.donePromise.then(()=>(function ld(s){qt(s,"Expected localeId to be defined"),"string"==typeof s&&(Vv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ey,Jh)||Jh),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const d=W0({},l);return function PT(s,o,a){const l=new Xm(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(_f);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new be(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(H0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Hn(Gc))},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function W0(s,o){return Array.isArray(o)?o.reduce(W0,s):{...s,...o}}let _f=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new N.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Es.assertNotInAngularZone(),$0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ue.T)(g,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Mr;if(!this._injector.get(ff).done)throw!d&&sn(a),new be(405,false);let v;v=d?a:this._injector.get(mp).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function G0(s){return s.isBoundToModule}(v)?void 0:this._injector.get(jl),S=v.create(Gc.NULL,[],l||v.selector,I),R=S.location.nativeElement,O=S.injector.get(ob,null);return O?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),cg(this.components,S),O?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;cg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(tb,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>cg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new be(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Hn(Es),Hn($i),Hn(He))},s.\u0275prov=at({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cg(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let UT=!0,db=!1;function K0(){return db=!0,UT}function ex(){if(db)throw new Error("Cannot enable prod mode after platform setup.");UT=!1}let nx=(()=>{class s{}return s.__NG_ELEMENT_ID__=rx,s})();function rx(s){return function ix(s,o,a){if(Sa(s)&&!a){const l=en(s.index,o);return new jh(l,l)}return 47&s.type?new jh(o[16],o):null}(Pn(),Ae(),16==(16&s))}class ew{constructor(){}supports(o){return Op(o)}create(o){return new Ry(o)}}const tw=(s,o)=>o;class Ry{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tw}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<gb(l,d,g)?a:l,I=gb(v,d,g),b=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,R=b-d;if(S!=R){for(let G=0;G<S;G++){const te=G<g.length?g[G]:g[G]=0,De=te+G;R<=De&&De<S&&(g[G]=te+1)}g[v.previousIndex]=R-S}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Op(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),l=!0),a=a._next}else d=0,function pC(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[td()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new nw(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new pb),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nw{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class pb{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new rw,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gb(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class mb{constructor(){}supports(o){return o instanceof Map||nv(o)}create(){return new $T}}class $T{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||nv(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new jT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class jT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vf(){return new ky([new ew])}let ky=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||vf()),deps:[[s,new kt,new $e]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new be(901,!1)}}return s.\u0275prov=at({token:s,providedIn:"root",factory:vf}),s})();function sw(){return new ow([new mb])}let ow=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||sw()),deps:[[s,new kt,new $e]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new be(901,!1)}}return s.\u0275prov=at({token:s,providedIn:"root",factory:sw}),s})();const aw=lb(null,"core",[]);let yb=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Hn(_f))},s.\u0275mod=Wt({type:s}),s.\u0275inj=xt({}),s})();function uw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Se,L)=>{"use strict";L.d(Se,{Z:()=>be});var p=L(2090),ee=L(4859),N=L(9681),ue=L(1877);class re{constructor(Ee,ve){this._delegate=Ee,this.firebase=ve,(0,N._addComponent)(Ee,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ee,ve=N._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ee);return!ct.isInitialized()&&"EXPLICIT"===(null===(nt=ct.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:ve})}_removeServiceInstance(Ee,ve=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ve)}_addComponent(Ee){(0,N._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,N._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const it=function _e(it){const Ee={},ve={__esModule:!0,initializeApp:function Me(ce,U={}){const oe=N.initializeApp(ce,U);if((0,p.r3)(Ee,oe.name))return Ee[oe.name];const W=new it(oe,ve);return Ee[oe.name]=W,W},app:ct,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function we(ce){const U=ce.name,oe=U.replace("-compat","");if(N._registerComponent(ce)&&"PUBLIC"===ce.type){const W=(X=ct())=>{if("function"!=typeof X[oe])throw he.create("invalid-app-argument",{appName:U});return X[oe]()};void 0!==ce.serviceProps&&(0,p.ZB)(W,ce.serviceProps),ve[oe]=W,it.prototype[oe]=function(...X){return this._getService.bind(this,U).apply(this,ce.multipleInstances?X:[])}}return"PUBLIC"===ce.type?ve[oe]:null},removeApp:function nt(ce){delete Ee[ce]},useAsService:function J(ce,U){return"serverAuth"===U?null:U},modularAPIs:N}};function ct(ce){if(!(0,p.r3)(Ee,ce=ce||N._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:ce});return Ee[ce]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Ie(){return Object.keys(Ee).map(ce=>Ee[ce])}}),ct.App=it,ve}(re);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function Ee(ve){(0,p.ZB)(it,ve)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),it}(),j=new ue.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=$;!function ke(it){(0,N.registerVersion)("@firebase/app-compat","0.1.39",it)}()},9681:(lt,Se,L)=>{"use strict";L.r(Se),L.d(Se,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Xi,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>pt,_addOrOverwriteComponent:()=>at,_apps:()=>Xe,_clearComponents:()=>yn,_components:()=>Et,_getProvider:()=>xt,_registerComponent:()=>Zt,_removeServiceInstance:()=>It,deleteApp:()=>Ca,getApp:()=>ai,getApps:()=>ui,initializeApp:()=>wi,onLog:()=>Cs,registerVersion:()=>Nr,setLogLevel:()=>er});var p=L(5861),ee=L(4859),N=L(1877),ue=L(2090),re=L(8766);class ye{constructor(xe){this.container=xe}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function he(ot){return"VERSION"===ot.getComponent()?.type}(st)){const Nt=st.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(st=>st).join(" ")}}const _e="@firebase/app",$=new N.Yd("@firebase/app"),qt="[DEFAULT]",We={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xe=new Map,Et=new Map;function pt(ot,xe){try{ot.container.addComponent(xe)}catch(st){$.debug(`Component ${xe.name} failed to register with FirebaseApp ${ot.name}`,st)}}function at(ot,xe){ot.container.addOrOverwriteComponent(xe)}function Zt(ot){const xe=ot.name;if(Et.has(xe))return $.debug(`There were multiple attempts to register component ${xe}.`),!1;Et.set(xe,ot);for(const st of Xe.values())pt(st,ot);return!0}function xt(ot,xe){const st=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),ot.container.getProvider(xe)}function It(ot,xe,st=qt){xt(ot,xe).clearInstance(st)}function yn(){Et.clear()}const Tn=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(xe,st,Nt){this._isDeleted=!1,this._options=Object.assign({},xe),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(xe){this._isDeleted=xe}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const Xi="9.14.0";function wi(ot,xe={}){let st=ot;"object"!=typeof xe&&(xe={name:xe});const Nt=Object.assign({name:qt,automaticDataCollectionEnabled:!1},xe),Rt=Nt.name;if("string"!=typeof Rt||!Rt)throw Tn.create("bad-app-name",{appName:String(Rt)});if(st||(st=(0,ue.aH)()),!st)throw Tn.create("no-options");const Wt=Xe.get(Rt);if(Wt){if((0,ue.vZ)(st,Wt.options)&&(0,ue.vZ)(Nt,Wt.config))return Wt;throw Tn.create("duplicate-app",{appName:Rt})}const z=new ee.H0(Rt);for(const K of Et.values())z.addComponent(K);const B=new Pr(st,Nt,z);return Xe.set(Rt,B),B}function ai(ot=qt){const xe=Xe.get(ot);if(!xe&&ot===qt)return wi();if(!xe)throw Tn.create("no-app",{appName:ot});return xe}function ui(){return Array.from(Xe.values())}function Ca(ot){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(ot){const xe=ot.name;Xe.has(xe)&&(Xe.delete(xe),yield Promise.all(ot.container.getProviders().map(st=>st.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function Nr(ot,xe,st){var Nt;let Rt=null!==(Nt=We[ot])&&void 0!==Nt?Nt:ot;st&&(Rt+=`-${st}`);const Wt=Rt.match(/\s|\//),z=xe.match(/\s|\//);if(Wt||z){const B=[`Unable to register library "${Rt}" with version "${xe}":`];return Wt&&B.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Wt&&z&&B.push("and"),z&&B.push(`version name "${xe}" contains illegal characters (whitespace or "/")`),void $.warn(B.join(" "))}Zt(new ee.wA(`${Rt}-version`,()=>({library:Rt,version:xe}),"VERSION"))}function Cs(ot,xe){if(null!==ot&&"function"!=typeof ot)throw Tn.create("invalid-log-argument");(0,N.Am)(ot,xe)}function er(ot){(0,N.Ub)(ot)}const $n="firebase-heartbeat-store";let Gn=null;function vn(){return Gn||(Gn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(ot,xe)=>{0===xe&&ot.createObjectStore($n)}}).catch(ot=>{throw Tn.create("idb-open",{originalErrorMessage:ot.message})})),Gn}function gt(){return(gt=(0,p.Z)(function*(ot){var xe;try{return(yield vn()).transaction($n).objectStore($n).get(qn(ot))}catch(st){if(st instanceof ue.ZR)$.warn(st.message);else{const Nt=Tn.create("idb-get",{originalErrorMessage:null===(xe=st)||void 0===xe?void 0:xe.message});$.warn(Nt.message)}}})).apply(this,arguments)}function hn(ot,xe){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(ot,xe){var st;try{const Rt=(yield vn()).transaction($n,"readwrite");return yield Rt.objectStore($n).put(xe,qn(ot)),Rt.done}catch(Nt){if(Nt instanceof ue.ZR)$.warn(Nt.message);else{const Rt=Tn.create("idb-set",{originalErrorMessage:null===(st=Nt)||void 0===st?void 0:st.message});$.warn(Rt.message)}}})).apply(this,arguments)}function qn(ot){return`${ot.name}!${ot.options.appId}`}class Ts{constructor(xe){this.container=xe,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new cn(st),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var xe=this;return(0,p.Z)(function*(){const Nt=xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=ln();if(null===xe._heartbeatsCache&&(xe._heartbeatsCache=yield xe._heartbeatsCachePromise),xe._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!xe._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Rt))return xe._heartbeatsCache.heartbeats.push({date:Rt,agent:Nt}),xe._heartbeatsCache.heartbeats=xe._heartbeatsCache.heartbeats.filter(Wt=>{const z=new Date(Wt.date).valueOf();return Date.now()-z<=2592e6}),xe._storage.overwrite(xe._heartbeatsCache)})()}getHeartbeatsHeader(){var xe=this;return(0,p.Z)(function*(){if(null===xe._heartbeatsCache&&(yield xe._heartbeatsCachePromise),null===xe._heartbeatsCache||0===xe._heartbeatsCache.heartbeats.length)return"";const st=ln(),{heartbeatsToSend:Nt,unsentEntries:Rt}=function ki(ot,xe=1024){const st=[];let Nt=ot.slice();for(const Rt of ot){const Wt=st.find(z=>z.agent===Rt.agent);if(Wt){if(Wt.dates.push(Rt.date),tr(st)>xe){Wt.dates.pop();break}}else if(st.push({agent:Rt.agent,dates:[Rt.date]}),tr(st)>xe){st.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:st,unsentEntries:Nt}}(xe._heartbeatsCache.heartbeats),Wt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Nt}));return xe._heartbeatsCache.lastSentHeartbeatDate=st,Rt.length>0?(xe._heartbeatsCache.heartbeats=Rt,yield xe._storage.overwrite(xe._heartbeatsCache)):(xe._heartbeatsCache.heartbeats=[],xe._storage.overwrite(xe._heartbeatsCache)),Wt})()}}function ln(){return(new Date).toISOString().substring(0,10)}class cn{constructor(xe){this.app=xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var xe=this;return(0,p.Z)(function*(){return(yield xe._canUseIndexedDBPromise)&&(yield function Tt(ot){return gt.apply(this,arguments)}(xe.app))||{heartbeats:[]}})()}overwrite(xe){var st=this;return(0,p.Z)(function*(){var Nt;if(yield st._canUseIndexedDBPromise){const Wt=yield st.read();return hn(st.app,{lastSentHeartbeatDate:null!==(Nt=xe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:xe.heartbeats})}})()}add(xe){var st=this;return(0,p.Z)(function*(){var Nt;if(yield st._canUseIndexedDBPromise){const Wt=yield st.read();return hn(st.app,{lastSentHeartbeatDate:null!==(Nt=xe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...xe.heartbeats]})}})()}}function tr(ot){return(0,ue.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function jr(ot){Zt(new ee.wA("platform-logger",xe=>new ye(xe),"PRIVATE")),Zt(new ee.wA("heartbeat",xe=>new Ts(xe),"PRIVATE")),Nr(_e,"0.8.4",ot),Nr(_e,"0.8.4","esm2017"),Nr("fire-js","")}("")},4859:(lt,Se,L)=>{"use strict";L.d(Se,{H0:()=>_e,wA:()=>N});var p=L(5861),ee=L(2090);class N{constructor($,j,Z){this.name=$,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const Z=new ee.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&Z.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const Z=this.normalizeInstanceIdentifier($?.identifier),Fe=null!==(j=$?.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(ke){if(Fe)return null;throw ke}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function he(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[j,Z]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const ke=this.getOrInitializeService({instanceIdentifier:Fe});Z.resolve(ke)}catch{}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,Z=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[ke,be]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(ke)&&be.resolve(Fe);return Fe}onInit($,j){var Z;const Fe=this.normalizeInstanceIdentifier(j),ke=null!==(Z=this.onInitCallbacks.get(Fe))&&void 0!==Z?Z:new Set;ke.add($),this.onInitCallbacks.set(Fe,ke);const be=this.instances.get(Fe);return be&&$(be,Fe),()=>{ke.delete($)}}invokeOnInitCallbacks($,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const Fe of Z)try{Fe($,j)}catch{}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let Z=this.instances.get($);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ue?void 0:pe),options:j}),this.instances.set($,Z),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(Z,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Z)}catch{}var pe;return Z||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new re($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Se,L)=>{"use strict";L.d(Se,{Am:()=>pe,Ub:()=>_e,Yd:()=>he,in:()=>ee});const p=[];var ee=(()=>{return($=ee||(ee={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ee;var $})();const N={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ye=($,j,...Z)=>{if(j<$.logLevel)return;const Fe=(new Date).toISOString(),ke=re[j];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[ke](`[${Fe}]  ${$.name}:`,...Z)};class he{constructor(j){this.name=j,this._logLevel=ue,this._logHandler=ye,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ee))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...j),this._logHandler(this,ee.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...j),this._logHandler(this,ee.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...j),this._logHandler(this,ee.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...j),this._logHandler(this,ee.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...j),this._logHandler(this,ee.ERROR,...j)}}function _e($){p.forEach(j=>{j.setLogLevel($)})}function pe($,j){for(const Z of p){let Fe=null;j&&j.level&&(Fe=N[j.level]),Z.userLogHandler=null===$?null:(ke,be,...it)=>{const Ee=it.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");be>=(Fe??ke.logLevel)&&$({level:ee[be].toLowerCase(),message:Ee,args:it,type:ke.name})}}}},8766:(lt,Se,L)=>{"use strict";L.d(Se,{Lj:()=>Me,X3:()=>ct});var p=L(5861);let N,ue;const he=new WeakMap,_e=new WeakMap,pe=new WeakMap,$=new WeakMap,j=new WeakMap;let ke={get(U,oe,W){if(U instanceof IDBTransaction){if("done"===oe)return _e.get(U);if("objectStoreNames"===oe)return U.objectStoreNames||pe.get(U);if("store"===oe)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return ve(U[oe])},set:(U,oe,W)=>(U[oe]=W,!0),has:(U,oe)=>U instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in U};function Ee(U){return"function"==typeof U?function it(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...oe){return U.apply(nt(this),oe),ve(he.get(this))}:function(...oe){return ve(U.apply(nt(this),oe))}:function(oe,...W){const X=U.call(nt(this),oe,...W);return pe.set(X,oe.sort?oe.sort():[oe]),ve(X)}}(U):(U instanceof IDBTransaction&&function Fe(U){if(_e.has(U))return;const oe=new Promise((W,X)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Oe),U.removeEventListener("abort",Oe)},ne=()=>{W(),ie()},Oe=()=>{X(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Oe),U.addEventListener("abort",Oe)});_e.set(U,oe)}(U),((U,oe)=>oe.some(W=>U instanceof W))(U,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,ke):U)}function ve(U){if(U instanceof IDBRequest)return function Z(U){const oe=new Promise((W,X)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Oe)},ne=()=>{W(ve(U.result)),ie()},Oe=()=>{X(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Oe)});return oe.then(W=>{W instanceof IDBCursor&&he.set(W,U)}).catch(()=>{}),j.set(oe,U),oe}(U);if($.has(U))return $.get(U);const oe=Ee(U);return oe!==U&&($.set(U,oe),j.set(oe,U)),oe}const nt=U=>j.get(U);function ct(U,oe,{blocked:W,upgrade:X,blocking:ie,terminated:ne}={}){const Oe=indexedDB.open(U,oe),Ne=ve(Oe);return X&&Oe.addEventListener("upgradeneeded",ht=>{X(ve(Oe.result),ht.oldVersion,ht.newVersion,ve(Oe.transaction))}),W&&Oe.addEventListener("blocked",()=>W()),Ne.then(ht=>{ne&&ht.addEventListener("close",()=>ne()),ie&&ht.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ne}function Me(U,{blocked:oe}={}){const W=indexedDB.deleteDatabase(U);return oe&&W.addEventListener("blocked",()=>oe()),ve(W).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],J=new Map;function ce(U,oe){if(!(U instanceof IDBDatabase)||oe in U||"string"!=typeof oe)return;if(J.get(oe))return J.get(oe);const W=oe.replace(/FromIndex$/,""),X=oe!==W,ie=we.includes(W);if(!(W in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ie.includes(W))return;const ne=function(){var Oe=(0,p.Z)(function*(Ne,...ht){const Jt=this.transaction(Ne,ie?"readwrite":"readonly");let qt=Jt.store;return X&&(qt=qt.index(ht.shift())),(yield Promise.all([qt[W](...ht),ie&&Jt.done]))[0]});return function(ht){return Oe.apply(this,arguments)}}();return J.set(oe,ne),ne}!function be(U){ke=U(ke)}(U=>({...U,get:(oe,W,X)=>ce(oe,W)||U.get(oe,W,X),has:(oe,W)=>!!ce(oe,W)||U.has(oe,W)}))},5861:(lt,Se,L)=>{"use strict";function p(N,ue,re,ye,he,_e,pe){try{var $=N[_e](pe),j=$.value}catch(Z){return void re(Z)}$.done?ue(j):Promise.resolve(j).then(ye,he)}function ee(N){return function(){var ue=this,re=arguments;return new Promise(function(ye,he){var _e=N.apply(ue,re);function pe(j){p(_e,ye,he,pe,$,"next",j)}function $(j){p(_e,ye,he,pe,$,"throw",j)}pe(void 0)})}}L.d(Se,{Z:()=>ee})}},lt=>{lt(lt.s=6403)}]);