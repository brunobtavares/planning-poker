(self.webpackChunkbt_planning_poker=self.webpackChunkbt_planning_poker||[]).push([[179],{2011:(Le,Ee,M)=>{"use strict";M.d(Ee,{Dh:()=>N,GT:()=>q,cc:()=>G,hO:()=>$,on:()=>P,pX:()=>ie,xv:()=>B});var h=M(4650),O=M(127),k=M(6351);Le=M.hmd(Le);const Y=["ngOnDestroy"],ie=(H,X,_e,ae={})=>new Proxy(H,{get:(ce,re)=>_e.runOutsideAngular(()=>{var ne;if(H[re])return!(null===(ne=ae?.spy)||void 0===ne)&&ne.get&&ae.spy.get(re,H[re]),H[re];if(Y.indexOf(re)>-1)return()=>{};const le=X.toPromise().then(j=>{const pe=j&&j[re];return"function"==typeof pe?pe.bind(j):pe&&pe.then?pe.then(z=>_e.run(()=>z)):_e.run(()=>pe)});return new Proxy(()=>{},{get:(j,pe)=>le[pe],apply:(j,pe,z)=>le.then(te=>{var he;const se=te&&te(...z);return!(null===(he=ae?.spy)||void 0===he)&&he.apply&&ae.spy.apply(re,z,se),se})})})}),q=(H,X)=>{X.forEach(_e=>{Object.getOwnPropertyNames(_e.prototype||_e).forEach(ae=>{Object.defineProperty(H.prototype,ae,Object.getOwnPropertyDescriptor(_e.prototype||_e,ae))})})};class J{constructor(X){return X}}const N=new h.OlP("angularfire2.app.options"),B=new h.OlP("angularfire2.app.name");function P(H,X,_e){const ce="object"==typeof _e&&_e||{};ce.name=ce.name||"string"==typeof _e&&_e||"[DEFAULT]";const ne=O.Z.apps.filter(le=>le&&le.name===ce.name)[0]||X.runOutsideAngular(()=>O.Z.initializeApp(H,ce));try{JSON.stringify(H)!==JSON.stringify(ne.options)&&R("error",`${ne.name} Firebase App already initialized with different options${Le.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new J(ne)}const R=(H,...X)=>{(0,h.X6Q)()&&typeof console<"u"&&console[H](...X)},F={provide:J,useFactory:P,deps:[N,h.R0b,[new h.FiY,B]]};let $=(()=>{class H{constructor(_e){O.Z.registerVersion("angularfire",k.q4.full,"core"),O.Z.registerVersion("angularfire",k.q4.full,"app-compat"),O.Z.registerVersion("angular",h.q4F.full,_e.toString())}static initializeApp(_e,ae){return{ngModule:H,providers:[{provide:N,useValue:_e},{provide:B,useValue:ae}]}}}return H.\u0275fac=function(_e){return new(_e||H)(h.LFG(h.Lbi))},H.\u0275mod=h.oAB({type:H}),H.\u0275inj=h.cJS({providers:[F]}),H})();function G(H,X,_e,ae,ce){const[,re,ne]=globalThis.\u0275AngularfireInstanceCache.find(le=>le[0]===H)||[];if(re)return function K(H,X){try{return H.toString()===X.toString()}catch{return H===X}}(ce,ne)||(ee("error",`${X} was already initialized on the ${_e} Firebase App with different settings.${ve?" You may need to reload as Firebase is not HMR aware.":""}`),ee("warn",{is:ce,was:ne})),re;{const le=ae();return globalThis.\u0275AngularfireInstanceCache.push([H,le,ce]),le}}const ve=!!Le.hot,ee=(H,...X)=>{(0,h.X6Q)()&&typeof console<"u"&&console[H](...X)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(Le,Ee,M)=>{"use strict";M.d(Ee,{q4:()=>Sr,iC:()=>Ut,fc:()=>mt,HU:()=>vi,vb:()=>oc,JM:()=>Mg});var h=M(4650),O=M(5867),k=M(5861),Y=M(9681),ie=M(2090),q=M(4859),J=M(1877),N=M(8766);const B="@firebase/installations",P="0.5.16",F=`w:${P}`,$="FIS_v2",X=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _e(x){return x instanceof ie.ZR&&x.code.includes("request-failed")}function ae({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function ce(x){return{token:x.token,requestStatus:2,expiresIn:te(x.expiresIn),creationTime:Date.now()}}function re(x,D){return ne.apply(this,arguments)}function ne(){return(ne=(0,k.Z)(function*(x,D){const Q=(yield D.json()).error;return X.create("request-failed",{requestName:x,serverCode:Q.code,serverMessage:Q.message,serverStatus:Q.status})})).apply(this,arguments)}function le({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function j(x,{refreshToken:D}){const L=le(x);return L.append("Authorization",function he(x){return`${$} ${x}`}(D)),L}function pe(x){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(x){const D=yield x();return D.status>=500&&D.status<600?x():D})).apply(this,arguments)}function te(x){return Number(x.replace("s","000"))}function se(x,D){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*({appConfig:x,heartbeatServiceProvider:D},{fid:L}){const Q=ae(x),we=le(x),xe=D.getImmediate({optional:!0});if(xe){const Wt=yield xe.getHeartbeatsHeader();Wt&&we.append("x-firebase-client",Wt)}const We={method:"POST",headers:we,body:JSON.stringify({fid:L,authVersion:$,appId:x.appId,sdkVersion:F})},Et=yield pe(()=>fetch(Q,We));if(Et.ok){const Wt=yield Et.json();return{fid:Wt.fid||L,registrationStatus:2,refreshToken:Wt.refreshToken,authToken:ce(Wt.authToken)}}throw yield re("Create Installation",Et)})).apply(this,arguments)}function Re(x){return new Promise(D=>{setTimeout(D,x)})}const lt=/^[cdef][\w-]{21}$/;function Ie(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const L=function De(x){return function Ge(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return lt.test(L)?L:""}catch{return""}}function Se(x){return`${x.appName}!${x.appId}`}const et=new Map;function Ze(x,D){const L=Se(x);wt(L,D),function en(x,D){const L=function yn(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=x=>{wt(x.data.key,x.data.fid)}),Ln}();L&&L.postMessage({key:x,fid:D}),function bn(){0===et.size&&Ln&&(Ln.close(),Ln=null)}()}(L,D)}function wt(x,D){const L=et.get(x);if(L)for(const Q of L)Q(D)}let Ln=null;const ur="firebase-installations-store";let wr=null;function bi(){return wr||(wr=(0,N.X3)("firebase-installations-database",1,{upgrade:(x,D)=>{0===D&&x.createObjectStore(ur)}})),wr}function ot(x,D){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(x,D){const L=Se(x),we=(yield bi()).transaction(ur,"readwrite"),xe=we.objectStore(ur),je=yield xe.get(L);return yield xe.put(D,L),yield we.done,(!je||je.fid!==D.fid)&&Ze(x,D.fid),D})).apply(this,arguments)}function er(x){return hn.apply(this,arguments)}function hn(){return(hn=(0,k.Z)(function*(x){const D=Se(x),Q=(yield bi()).transaction(ur,"readwrite");yield Q.objectStore(ur).delete(D),yield Q.done})).apply(this,arguments)}function $n(x,D){return $r.apply(this,arguments)}function $r(){return($r=(0,k.Z)(function*(x,D){const L=Se(x),we=(yield bi()).transaction(ur,"readwrite"),xe=we.objectStore(ur),je=yield xe.get(L),We=D(je);return void 0===We?yield xe.delete(L):yield xe.put(We,L),yield we.done,We&&(!je||je.fid!==We.fid)&&Ze(x,We.fid),We})).apply(this,arguments)}function kn(x){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(x){let D;const L=yield $n(x.appConfig,Q=>{const we=fn(Q),xe=St(x,we);return D=xe.registrationPromise,xe.installationEntry});return""===L.fid?{installationEntry:yield D}:{installationEntry:L,registrationPromise:D}})).apply(this,arguments)}function fn(x){return Lt(x||{fid:Ie(),registrationStatus:0})}function St(x,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(X.create("app-offline"))};const L={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},Q=function yt(x,D){return un.apply(this,arguments)}(x,L);return{installationEntry:L,registrationPromise:Q}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Pn(x)}:{installationEntry:D}}function un(){return(un=(0,k.Z)(function*(x,D){try{const L=yield se(x,D);return ot(x.appConfig,L)}catch(L){throw _e(L)&&409===L.customData.serverCode?yield er(x.appConfig):yield ot(x.appConfig,{fid:D.fid,registrationStatus:0}),L}})).apply(this,arguments)}function Pn(x){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,k.Z)(function*(x){let D=yield zr(x.appConfig);for(;1===D.registrationStatus;)yield Re(100),D=yield zr(x.appConfig);if(0===D.registrationStatus){const{installationEntry:L,registrationPromise:Q}=yield kn(x);return Q||L}return D})).apply(this,arguments)}function zr(x){return $n(x,D=>{if(!D)throw X.create("installation-not-found");return Lt(D)})}function Lt(x){return function Ii(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function cn(x,D){return fi.apply(this,arguments)}function fi(){return(fi=(0,k.Z)(function*({appConfig:x,heartbeatServiceProvider:D},L){const Q=tn(x,L),we=j(x,L),xe=D.getImmediate({optional:!0});if(xe){const Wt=yield xe.getHeartbeatsHeader();Wt&&we.append("x-firebase-client",Wt)}const We={method:"POST",headers:we,body:JSON.stringify({installation:{sdkVersion:F,appId:x.appId}})},Et=yield pe(()=>fetch(Q,We));if(Et.ok)return ce(yield Et.json());throw yield re("Generate Auth Token",Et)})).apply(this,arguments)}function tn(x,{fid:D}){return`${ae(x)}/${D}/authTokens:generate`}function tr(x){return Er.apply(this,arguments)}function Er(){return(Er=(0,k.Z)(function*(x,D=!1){let L;const Q=yield $n(x.appConfig,xe=>{if(!zt(xe))throw X.create("not-registered");const je=xe.authToken;if(!D&&fe(je))return xe;if(1===je.requestStatus)return L=pt(x,D),xe;{if(!navigator.onLine)throw X.create("app-offline");const We=ye(xe);return L=Nt(x,We),We}});return L?yield L:Q.authToken})).apply(this,arguments)}function pt(x,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(x,D){let L=yield ht(x.appConfig);for(;1===L.authToken.requestStatus;)yield Re(100),L=yield ht(x.appConfig);const Q=L.authToken;return 0===Q.requestStatus?tr(x,D):Q})).apply(this,arguments)}function ht(x){return $n(x,D=>{if(!zt(D))throw X.create("not-registered");return function Ue(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Nt(x,D){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,k.Z)(function*(x,D){try{const L=yield cn(x,D),Q=Object.assign(Object.assign({},D),{authToken:L});return yield ot(x.appConfig,Q),L}catch(L){if(!_e(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const Q=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ot(x.appConfig,Q)}else yield er(x.appConfig);throw L}})).apply(this,arguments)}function zt(x){return void 0!==x&&2===x.registrationStatus}function fe(x){return 2===x.requestStatus&&!function ue(x){const D=Date.now();return D<x.creationTime||x.creationTime+x.expiresIn<D+36e5}(x)}function ye(x){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:D})}function Ke(){return(Ke=(0,k.Z)(function*(x){const D=x,{installationEntry:L,registrationPromise:Q}=yield kn(D);return Q?Q.catch(console.error):tr(D).catch(console.error),L.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,k.Z)(function*(x,D=!1){const L=x;return yield _n(L),(yield tr(L,D)).token})).apply(this,arguments)}function _n(x){return nn.apply(this,arguments)}function nn(){return(nn=(0,k.Z)(function*(x){const{registrationPromise:D}=yield kn(x);D&&(yield D)})).apply(this,arguments)}function Ps(x){return X.create("missing-app-config-values",{valueName:x})}const Oo="installations",Nn=x=>{const D=x.getProvider("app").getImmediate(),L=function An(x){if(!x||!x.options)throw Ps("App Configuration");if(!x.name)throw Ps("App Name");const D=["projectId","apiKey","appId"];for(const L of D)if(!x.options[L])throw Ps(L);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(D);return{app:D,appConfig:L,heartbeatServiceProvider:(0,Y._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},eo=x=>{const D=x.getProvider("app").getImmediate(),L=(0,Y._getProvider)(D,Oo).getImmediate();return{getId:()=>function be(x){return Ke.apply(this,arguments)}(L),getToken:we=>function gt(x){return Jt.apply(this,arguments)}(L,we)}};(function Du(){(0,Y._registerComponent)(new q.wA(Oo,Nn,"PUBLIC")),(0,Y._registerComponent)(new q.wA("installations-internal",eo,"PRIVATE"))})(),(0,Y.registerVersion)(B,P),(0,Y.registerVersion)(B,P,"esm2017");const Oi="@firebase/remote-config",sr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cf{constructor(D,L,Q,we){this.client=D,this.storage=L,this.storageCache=Q,this.logger=we}isCachedDataFresh(D,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Q=Date.now()-L,we=Q<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Q}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${we}.`),we}fetch(D){var L=this;return(0,k.Z)(function*(){const[Q,we]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(we&&L.isCachedDataFresh(D.cacheMaxAgeMillis,Q))return we;D.eTag=we&&we.eTag;const xe=yield L.client.fetch(D),je=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===xe.status&&je.push(L.storage.setLastSuccessfulFetchResponse(xe)),yield Promise.all(je),xe})()}}function el(x=navigator){return x.languages&&x.languages[0]||x.language}class tl{constructor(D,L,Q,we,xe,je){this.firebaseInstallations=D,this.sdkVersion=L,this.namespace=Q,this.projectId=we,this.apiKey=xe,this.appId=je}fetch(D){var L=this;return(0,k.Z)(function*(){var Q,we,xe;const[je,We]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,Zt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},It={sdk_version:L.sdkVersion,app_instance_id:je,app_instance_id_token:We,app_id:L.appId,language_code:el()},Kn={method:"POST",headers:Zt,body:JSON.stringify(It)},gn=fetch(Wt,Kn),Si=new Promise((zi,yo)=>{D.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",yo(vo)})});let $i;try{yield Promise.race([gn,Si]),$i=yield gn}catch(zi){let yo="fetch-client-network";throw"AbortError"===(null===(Q=zi)||void 0===Q?void 0:Q.name)&&(yo="fetch-timeout"),sr.create(yo,{originalErrorMessage:null===(we=zi)||void 0===we?void 0:we.message})}let ms=$i.status;const ys=$i.headers.get("ETag")||void 0;let vs,Nr;if(200===$i.status){let zi;try{zi=yield $i.json()}catch(yo){throw sr.create("fetch-client-parse",{originalErrorMessage:null===(xe=yo)||void 0===xe?void 0:xe.message})}vs=zi.entries,Nr=zi.state}if("INSTANCE_STATE_UNSPECIFIED"===Nr?ms=500:"NO_CHANGE"===Nr?ms=304:("NO_TEMPLATE"===Nr||"EMPTY_CONFIG"===Nr)&&(vs={}),304!==ms&&200!==ms)throw sr.create("fetch-status",{httpStatus:ms});return{status:ms,eTag:ys,config:vs}})()}}class Ig{constructor(D,L){this.client=D,this.storage=L}fetch(D){var L=this;return(0,k.Z)(function*(){const Q=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(D,Q)})()}attemptFetch(D,{throttleEndTimeMillis:L,backoffCount:Q}){var we=this;return(0,k.Z)(function*(){yield function lr(x,D){return new Promise((L,Q)=>{const we=Math.max(D-Date.now(),0),xe=setTimeout(L,we);x.addEventListener(()=>{clearTimeout(xe),Q(sr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,L);try{const xe=yield we.client.fetch(D);return yield we.storage.deleteThrottleMetadata(),xe}catch(xe){if(!function Dd(x){if(!(x instanceof ie.ZR&&x.customData))return!1;const D=Number(x.customData.httpStatus);return 429===D||500===D||503===D||504===D}(xe))throw xe;const je={throttleEndTimeMillis:Date.now()+(0,ie.$s)(Q),backoffCount:Q+1};return yield we.storage.setThrottleMetadata(je),we.attemptFetch(D,je)}})()}}class nl{constructor(D,L,Q,we,xe){this.app=D,this._client=L,this._storageCache=Q,this._storage=we,this._logger=xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rl(x,D){var L;const Q=x.target.error||void 0;return sr.create(D,{originalErrorMessage:Q&&(null===(L=Q)||void 0===L?void 0:L.message)})}const Ls="app_namespace_store";class Dg{constructor(D,L,Q,we=function Cg(){return new Promise((x,D)=>{var L;try{const Q=indexedDB.open("firebase_remote_config",1);Q.onerror=we=>{D(rl(we,"storage-open"))},Q.onsuccess=we=>{x(we.target.result)},Q.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore(Ls,{keyPath:"compositeKey"})}}catch(Q){D(sr.create("storage-open",{originalErrorMessage:null===(L=Q)||void 0===L?void 0:L.message}))}})}()){this.appId=D,this.appName=L,this.namespace=Q,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var L=this;return(0,k.Z)(function*(){const Q=yield L.openDbPromise;return new Promise((we,xe)=>{var je;const Et=Q.transaction([Ls],"readonly").objectStore(Ls),Wt=L.createCompositeKey(D);try{const Zt=Et.get(Wt);Zt.onerror=It=>{xe(rl(It,"storage-get"))},Zt.onsuccess=It=>{const Kn=It.target.result;we(Kn?Kn.value:void 0)}}catch(Zt){xe(sr.create("storage-get",{originalErrorMessage:null===(je=Zt)||void 0===je?void 0:je.message}))}})})()}set(D,L){var Q=this;return(0,k.Z)(function*(){const we=yield Q.openDbPromise;return new Promise((xe,je)=>{var We;const Wt=we.transaction([Ls],"readwrite").objectStore(Ls),Zt=Q.createCompositeKey(D);try{const It=Wt.put({compositeKey:Zt,value:L});It.onerror=Kn=>{je(rl(Kn,"storage-set"))},It.onsuccess=()=>{xe()}}catch(It){je(sr.create("storage-set",{originalErrorMessage:null===(We=It)||void 0===We?void 0:We.message}))}})})()}delete(D){var L=this;return(0,k.Z)(function*(){const Q=yield L.openDbPromise;return new Promise((we,xe)=>{var je;const Et=Q.transaction([Ls],"readwrite").objectStore(Ls),Wt=L.createCompositeKey(D);try{const Zt=Et.delete(Wt);Zt.onerror=It=>{xe(rl(It,"storage-delete"))},Zt.onsuccess=()=>{we()}}catch(Zt){xe(sr.create("storage-delete",{originalErrorMessage:null===(je=Zt)||void 0===je?void 0:je.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Td{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const L=D.storage.getLastFetchStatus(),Q=D.storage.getLastSuccessfulFetchTimestampMillis(),we=D.storage.getActiveConfig(),xe=yield L;xe&&(D.lastFetchStatus=xe);const je=yield Q;je&&(D.lastSuccessfulFetchTimestampMillis=je);const We=yield we;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Au(){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Us(){(0,Y._registerComponent)(new q.wA("remote-config",function x(D,{instanceIdentifier:L}){const Q=D.getProvider("app").getImmediate(),we=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw sr.create("registration-window");if(!(0,ie.hl)())throw sr.create("indexed-db-unavailable");const{projectId:xe,apiKey:je,appId:We}=Q.options;if(!xe)throw sr.create("registration-project-id");if(!je)throw sr.create("registration-api-key");if(!We)throw sr.create("registration-app-id");const Et=new Dg(We,Q.name,L=L||"firebase"),Wt=new Td(Et),Zt=new J.Yd(Oi);Zt.logLevel=J.in.ERROR;const It=new tl(we,Y.SDK_VERSION,L,xe,je,We),Kn=new Ig(It,Et),gn=new Cf(Kn,Et,Wt,Zt),Si=new nl(Q,gn,Wt,Et,Zt);return function Un(x){const D=(0,ie.m9)(x);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Si),Si},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(Oi,"0.3.15"),(0,Y.registerVersion)(Oi,"0.3.15","esm2017")}();const Fi="/firebase-messaging-sw.js",as="/firebase-cloud-messaging-push-scope",us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Da="google.c.a.c_id",Ru="google.c.a.c_l",il="google.c.a.ts",Tf="google.c.a.e";var cs=(()=>{return(x=cs||(cs={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",cs;var x})();function pi(x){const D=new Uint8Array(x);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function si(x){const L=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Q=atob(L),we=new Uint8Array(Q.length);for(let xe=0;xe<Q.length;++xe)we[xe]=Q.charCodeAt(xe);return we}const Lo="fcm_token_details_db",Pr="fcm_token_object_Store";function Af(x){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,k.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(xe=>xe.name).includes(Lo))return null;let D=null;return(yield(0,N.X3)(Lo,5,{upgrade:(Q=(0,k.Z)(function*(we,xe,je,We){var Et;if(xe<2||!we.objectStoreNames.contains(Pr))return;const Wt=We.objectStore(Pr),Zt=yield Wt.index("fcmSenderId").get(x);if(yield Wt.clear(),Zt)if(2===xe){const It=Zt;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(Et=It.createTime)&&void 0!==Et?Et:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:pi(It.vapidKey)}}}else if(3===xe){const It=Zt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:pi(It.auth),p256dh:pi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:pi(It.vapidKey)}}}else if(4===xe){const It=Zt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:pi(It.auth),p256dh:pi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:pi(It.vapidKey)}}}}),function(xe,je,We,Et){return Q.apply(this,arguments)})})).close(),yield(0,N.Lj)(Lo),yield(0,N.Lj)("fcm_vapid_details_db"),yield(0,N.Lj)("undefined"),zn(D)?D:null;var Q}),Rf.apply(this,arguments)}function zn(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:D}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const gi="firebase-messaging-store";let Wr=null;function ku(){return Wr||(Wr=(0,N.X3)("firebase-messaging-database",1,{upgrade:(x,D)=>{0===D&&x.createObjectStore(gi)}})),Wr}function Uo(x){return ls.apply(this,arguments)}function ls(){return(ls=(0,k.Z)(function*(x){const D=Ci(x),Q=yield(yield ku()).transaction(gi).objectStore(gi).get(D);if(Q)return Q;{const we=yield Af(x.appConfig.senderId);if(we)return yield rn(x,we),we}})).apply(this,arguments)}function rn(x,D){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,k.Z)(function*(x,D){const L=Ci(x),we=(yield ku()).transaction(gi,"readwrite");return yield we.objectStore(gi).put(D,L),yield we.done,D})).apply(this,arguments)}function ro(x){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(x){const D=Ci(x),Q=(yield ku()).transaction(gi,"readwrite");yield Q.objectStore(gi).delete(D),yield Q.done})).apply(this,arguments)}function Ci({appConfig:x}){return x.appId}const Bn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function jt(x,D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(x,D){var L;const Q=yield ol(x),we=He(D),xe={method:"POST",headers:Q,body:JSON.stringify(we)};let je;try{je=yield(yield fetch(ds(x.appConfig),xe)).json()}catch(We){throw Bn.create("token-subscribe-failed",{errorInfo:null===(L=We)||void 0===L?void 0:L.toString()})}if(je.error)throw Bn.create("token-subscribe-failed",{errorInfo:je.error.message});if(!je.token)throw Bn.create("token-subscribe-no-token");return je.token})).apply(this,arguments)}function kf(x,D){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(x,D){var L;const Q=yield ol(x),we=He(D.subscriptionOptions),xe={method:"PATCH",headers:Q,body:JSON.stringify(we)};let je;try{je=yield(yield fetch(`${ds(x.appConfig)}/${D.token}`,xe)).json()}catch(We){throw Bn.create("token-update-failed",{errorInfo:null===(L=We)||void 0===L?void 0:L.toString()})}if(je.error)throw Bn.create("token-update-failed",{errorInfo:je.error.message});if(!je.token)throw Bn.create("token-update-no-token");return je.token})).apply(this,arguments)}function Uu(x,D){return sl.apply(this,arguments)}function sl(){return(sl=(0,k.Z)(function*(x,D){var L;const we={method:"DELETE",headers:yield ol(x)};try{const je=yield(yield fetch(`${ds(x.appConfig)}/${D}`,we)).json();if(je.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:je.error.message})}catch(xe){throw Bn.create("token-unsubscribe-failed",{errorInfo:null===(L=xe)||void 0===L?void 0:L.toString()})}})).apply(this,arguments)}function ds({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function ol(x){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,k.Z)(function*({appConfig:x,installations:D}){const L=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function He({p256dh:x,auth:D,endpoint:L,vapidKey:Q}){const we={web:{endpoint:L,auth:D,p256dh:x}};return Q!==us&&(we.web.applicationPubKey=Q),we}const Xt=6048e5;function Bu(x){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(x){const D=yield al(x.swRegistration,x.vapidKey),L={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:D.endpoint,auth:pi(D.getKey("auth")),p256dh:pi(D.getKey("p256dh"))},Q=yield Uo(x.firebaseDependencies);if(Q){if(kd(Q.subscriptionOptions,L))return Date.now()>=Q.createTime+Xt?Bo(x,{token:Q.token,createTime:Date.now(),subscriptionOptions:L}):Q.token;try{yield Uu(x.firebaseDependencies,Q.token)}catch(we){console.warn(we)}return Ta(x.firebaseDependencies,L)}return Ta(x.firebaseDependencies,L)})).apply(this,arguments)}function Gn(x){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,k.Z)(function*(x){const D=yield Uo(x.firebaseDependencies);D&&(yield Uu(x.firebaseDependencies,D.token),yield ro(x.firebaseDependencies));const L=yield x.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function Bo(x,D){return mi.apply(this,arguments)}function mi(){return(mi=(0,k.Z)(function*(x,D){try{const L=yield kf(x.firebaseDependencies,D),Q=Object.assign(Object.assign({},D),{token:L,createTime:Date.now()});return yield rn(x.firebaseDependencies,Q),L}catch(L){throw yield Gn(x),L}})).apply(this,arguments)}function Ta(x,D){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,k.Z)(function*(x,D){const Q={token:yield jt(x,D),createTime:Date.now(),subscriptionOptions:D};return yield rn(x,Q),Q.token})).apply(this,arguments)}function al(x,D){return ul.apply(this,arguments)}function ul(){return(ul=(0,k.Z)(function*(x,D){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:si(D)})})).apply(this,arguments)}function kd(x,D){return D.vapidKey===x.vapidKey&&D.endpoint===x.endpoint&&D.auth===x.auth&&D.p256dh===x.p256dh}function Ra(x){const D={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Wn(x,D){if(!D.notification)return;x.notification={};const L=D.notification.title;L&&(x.notification.title=L);const Q=D.notification.body;Q&&(x.notification.body=Q);const we=D.notification.image;we&&(x.notification.image=we);const xe=D.notification.icon;xe&&(x.notification.icon=xe)}(D,x),function Li(x,D){!D.data||(x.data=D.data)}(D,x),function cl(x,D){var L,Q,we,xe,je;if(!(D.fcmOptions||null!==(L=D.notification)&&void 0!==L&&L.click_action))return;x.fcmOptions={};const We=null!==(we=null===(Q=D.fcmOptions)||void 0===Q?void 0:Q.link)&&void 0!==we?we:null===(xe=D.notification)||void 0===xe?void 0:xe.click_action;We&&(x.fcmOptions.link=We);const Et=null===(je=D.fcmOptions)||void 0===je?void 0:je.analytics_label;Et&&(x.fcmOptions.analyticsLabel=Et)}(D,x),D}function io(x){return"object"==typeof x&&!!x&&Da in x}function hs(x,D){const L=[];for(let Q=0;Q<x.length;Q++)L.push(x.charAt(Q)),Q<D.length&&L.push(D.charAt(Q));return L.join("")}function Ma(x){return Bn.create("missing-app-config-values",{valueName:x})}hs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tg{constructor(D,L,Q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const we=function Sg(x){if(!x||!x.options)throw Ma("App Configuration Object");if(!x.name)throw Ma("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:L}=x;for(const Q of D)if(!L[Q])throw Ma(Q);return{appName:x.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:we,installations:L,analyticsProvider:Q}}_delete(){return Promise.resolve()}}function ll(x){return ju.apply(this,arguments)}function ju(){return(ju=(0,k.Z)(function*(x){var D;try{x.swRegistration=yield navigator.serviceWorker.register(Fi,{scope:as}),x.swRegistration.update().catch(()=>{})}catch(L){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=L)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function ka(x,D){return dl.apply(this,arguments)}function dl(){return(dl=(0,k.Z)(function*(x,D){if(!D&&!x.swRegistration&&(yield ll(x)),D||!x.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");x.swRegistration=D}})).apply(this,arguments)}function Pa(x,D){return hl.apply(this,arguments)}function hl(){return(hl=(0,k.Z)(function*(x,D){D?x.vapidKey=D:x.vapidKey||(x.vapidKey=us)})).apply(this,arguments)}function zu(){return(zu=(0,k.Z)(function*(x,D){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield Pa(x,D?.vapidKey),yield ka(x,D?.serviceWorkerRegistration),Bu(x)})).apply(this,arguments)}function fl(x,D,L){return pl.apply(this,arguments)}function pl(){return(pl=(0,k.Z)(function*(x,D,L){const Q=gl(D);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(Q,{message_id:L[Da],message_name:L[Ru],message_time:L[il],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gl(x){switch(x){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function so(){return(so=(0,k.Z)(function*(x,D){const L=D.data;if(!L.isFirebaseMessaging)return;x.onMessageHandler&&L.messageType===cs.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Ra(L)):x.onMessageHandler.next(Ra(L)));const Q=L.data;io(Q)&&"1"===Q[Tf]&&(yield fl(x,L.messageType,Q))})).apply(this,arguments)}const oo="@firebase/messaging",dr=x=>{const D=new Tg(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function Pd(x,D){return so.apply(this,arguments)}(D,L)),D},oi=x=>{const D=x.getProvider("messaging").getImmediate();return{getToken:Q=>function $u(x,D){return zu.apply(this,arguments)}(D,Q)}};function Nd(){return ml.apply(this,arguments)}function ml(){return(ml=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Dn(){(0,Y._registerComponent)(new q.wA("messaging",dr,"PUBLIC")),(0,Y._registerComponent)(new q.wA("messaging-internal",oi,"PRIVATE")),(0,Y.registerVersion)(oo,"0.11.0"),(0,Y.registerVersion)(oo,"0.11.0","esm2017")}();const Ho="analytics",Ld="firebase_id",uo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ku="https://www.googletagmanager.com/gtag/js",qn=new J.Yd("@firebase/analytics");function Zu(x){return Promise.all(x.map(D=>D.catch(L=>L)))}function Yu(x,D){const L=document.createElement("script");L.src=`${Ku}?l=${x}&id=${D}`,L.async=!0,document.head.appendChild(L)}function Nf(x,D,L,Q,we,xe){return co.apply(this,arguments)}function co(){return(co=(0,k.Z)(function*(x,D,L,Q,we,xe){const je=Q[we];try{if(je)yield D[je];else{const Et=(yield Zu(L)).find(Wt=>Wt.measurementId===we);Et&&(yield D[Et.appId])}}catch(We){qn.error(We)}x("config",we,xe)})).apply(this,arguments)}function jo(x,D,L,Q,we){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(x,D,L,Q,we){try{let xe=[];if(we&&we.send_to){let je=we.send_to;Array.isArray(je)||(je=[je]);const We=yield Zu(L);for(const Et of je){const Wt=We.find(It=>It.measurementId===Et),Zt=Wt&&D[Wt.appId];if(!Zt){xe=[];break}xe.push(Zt)}}0===xe.length&&(xe=Object.values(D)),yield Promise.all(xe),x("event",Q,we||{})}catch(xe){qn.error(xe)}})).apply(this,arguments)}function Bd(x){const D=window.document.getElementsByTagName("script");for(const L of Object.values(D))if(L.src&&L.src.includes(Ku)&&L.src.includes(x))return L;return null}const xr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),La=new class Ui{constructor(D={},L=1e3){this.throttleMetadata=D,this.intervalMillis=L}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,L){this.throttleMetadata[D]=L}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Hd(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Ua(x){return vl.apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(x){var D;const{appId:L,apiKey:Q}=x,we={method:"GET",headers:Hd(Q)},xe=uo.replace("{app-id}",L),je=yield fetch(xe,we);if(200!==je.status&&304!==je.status){let We="";try{const Et=yield je.json();null!==(D=Et.error)&&void 0!==D&&D.message&&(We=Et.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:je.status,responseMessage:We})}return je.json()})).apply(this,arguments)}function nr(x){return Di.apply(this,arguments)}function Di(){return(Di=(0,k.Z)(function*(x,D=La,L){const{appId:Q,apiKey:we,measurementId:xe}=x.options;if(!Q)throw xr.create("no-app-id");if(!we){if(xe)return{measurementId:xe,appId:Q};throw xr.create("no-api-key")}const je=D.getThrottleMetadata(Q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new ec;return setTimeout((0,k.Z)(function*(){We.abort()}),void 0!==L?L:6e4),Xu({appId:Q,apiKey:we,measurementId:xe},je,We,D)})).apply(this,arguments)}function Xu(x,D,L){return ho.apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*(x,{throttleEndTimeMillis:D,backoffCount:L},Q,we=La){var xe,je;const{appId:We,measurementId:Et}=x;try{yield Ba(Q,D)}catch(Wt){if(Et)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Et} provided in the "measurementId" field in the local Firebase config. [${null===(xe=Wt)||void 0===xe?void 0:xe.message}]`),{appId:We,measurementId:Et};throw Wt}try{const Wt=yield Ua(x);return we.deleteThrottleMetadata(We),Wt}catch(Wt){const Zt=Wt;if(!Ju(Zt)){if(we.deleteThrottleMetadata(We),Et)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Et} provided in the "measurementId" field in the local Firebase config. [${Zt?.message}]`),{appId:We,measurementId:Et};throw Wt}const It=503===Number(null===(je=Zt?.customData)||void 0===je?void 0:je.httpStatus)?(0,ie.$s)(L,we.intervalMillis,30):(0,ie.$s)(L,we.intervalMillis),Kn={throttleEndTimeMillis:Date.now()+It,backoffCount:L+1};return we.setThrottleMetadata(We,Kn),qn.debug(`Calling attemptFetch again in ${It} millis`),Xu(x,Kn,Q,we)}})).apply(this,arguments)}function Ba(x,D){return new Promise((L,Q)=>{const we=Math.max(D-Date.now(),0),xe=setTimeout(L,we);x.addEventListener(()=>{clearTimeout(xe),Q(xr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Ju(x){if(!(x instanceof ie.ZR&&x.customData))return!1;const D=Number(x.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ec{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Hs,Ha;function js(){return(js=(0,k.Z)(function*(x,D,L,Q,we){if(we&&we.global)x("event",L,Q);else{const xe=yield D;x("event",L,Object.assign(Object.assign({},Q),{send_to:xe}))}})).apply(this,arguments)}function po(x){Ha=x}function wl(x){Hs=x}function ps(){return rc.apply(this,arguments)}function rc(){return(rc=(0,k.Z)(function*(){var x;if(!(0,ie.hl)())return qn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return qn.warn(xr.create("indexeddb-unavailable",{errorInfo:null===(x=D)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function Go(){return(Go=(0,k.Z)(function*(x,D,L,Q,we,xe,je){var We;const Et=nr(x);Et.then(gn=>{L[gn.measurementId]=gn.appId,x.options.measurementId&&gn.measurementId!==x.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gn=>qn.error(gn)),D.push(Et);const Wt=ps().then(gn=>{if(gn)return Q.getId()}),[Zt,It]=yield Promise.all([Et,Wt]);Bd(xe)||Yu(xe,Zt.measurementId),Ha&&(we("consent","default",Ha),po(void 0)),we("js",new Date);const Kn=null!==(We=je?.config)&&void 0!==We?We:{};return Kn.origin="firebase",Kn.update=!0,null!=It&&(Kn[Ld]=It),we("config",Zt.measurementId,Kn),Hs&&(we("set",Hs),wl(void 0)),Zt.measurementId})).apply(this,arguments)}class ic{constructor(D){this.app=D}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},$s=[];const Wo={};let Ko,go,qo="dataLayer",ja=!1;function ny(x,D,L){!function Ag(){const x=[];if((0,ie.ru)()&&x.push("This is a browser extension environment."),(0,ie.zI)()||x.push("Cookies are not available."),x.length>0){const D=x.map((Q,we)=>`(${we+1}) ${Q}`).join(" "),L=xr.create("invalid-analytics-context",{errorInfo:D});qn.warn(L.message)}}();const Q=x.options.appId;if(!Q)throw xr.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw xr.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[Q])throw xr.create("already-exists",{id:Q});if(!ja){!function Ud(x){let D=[];Array.isArray(window[x])?D=window[x]:window[x]=D}(qo);const{wrappedGtag:xe,gtagCore:je}=function Na(x,D,L,Q,we){let xe=function(...je){window[Q].push(arguments)};return window[we]&&"function"==typeof window[we]&&(xe=window[we]),window[we]=function Qu(x,D,L,Q){function xe(){return(xe=(0,k.Z)(function*(je,We,Et){try{"event"===je?yield jo(x,D,L,We,Et):"config"===je?yield Nf(x,D,L,Q,We,Et):"consent"===je?x("consent","update",Et):x("set",We)}catch(Wt){qn.error(Wt)}})).apply(this,arguments)}return function we(je,We,Et){return xe.apply(this,arguments)}}(xe,x,D,L),{gtagCore:xe,wrappedGtag:window[we]}}(ai,$s,Wo,qo,"gtag");go=xe,Ko=je,ja=!0}return ai[Q]=function zo(x,D,L,Q,we,xe,je){return Go.apply(this,arguments)}(x,$s,Wo,D,Ko,qo,L),new ic(x)}function iy(){return Of.apply(this,arguments)}function Of(){return(Of=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const yi="@firebase/analytics";!function hr(){(0,Y._registerComponent)(new q.wA(Ho,(D,{options:L})=>ny(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,Y._registerComponent)(new q.wA("analytics-internal",function x(D){try{const L=D.getProvider(Ho).getImmediate();return{logEvent:(Q,we,xe)=>function Dr(x,D,L,Q){x=(0,ie.m9)(x),function jd(x,D,L,Q,we){return js.apply(this,arguments)}(go,ai[x.app.options.appId],D,L,Q).catch(we=>qn.error(we))}(L,Q,we,xe)}}catch(L){throw xr.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,Y.registerVersion)(yi,"0.8.4"),(0,Y.registerVersion)(yi,"0.8.4","esm2017")}();var ct=M(233),Rn=M(4986),Bi=M(8505),gs=M(5363),Zo=M(9468);const Sr=new h.GfV("7.5.0"),zs="__angularfire_symbol__analyticsIsSupportedValue",On="__angularfire_symbol__analyticsIsSupported",Vi="__angularfire_symbol__remoteConfigIsSupportedValue",vt="__angularfire_symbol__remoteConfigIsSupported",qr="__angularfire_symbol__messagingIsSupportedValue",Hi="__angularfire_symbol__messagingIsSupported";function Mg(x,D,L){if(D){if(1===D.length)return D[0];const xe=D.filter(je=>je.app===L);if(1===xe.length)return xe[0]}return L.container.getProvider(x).getImmediate({optional:!0})}globalThis[On]||(globalThis[On]=iy().then(x=>globalThis[zs]=x).catch(()=>globalThis[zs]=!1)),globalThis[Hi]||(globalThis[Hi]=Nd().then(x=>globalThis[qr]=x).catch(()=>globalThis[qr]=!1)),globalThis[vt]||(globalThis[vt]=Au().then(x=>globalThis[Vi]=x).catch(()=>globalThis[Vi]=!1));const oc=(x,D)=>{const L=D?[D]:(0,O.C6)(),Q=[];return L.forEach(we=>{we.container.getProvider(x).instances.forEach(je=>{Q.includes(je)||Q.push(je)})}),Q};function Me(){}class Jr{constructor(D,L=ct.N){this.zone=D,this.delegate=L}now(){return this.delegate.now()}schedule(D,L,Q){const we=this.zone;return this.delegate.schedule(function(je){we.runGuarded(()=>{D.apply(this,[je])})},L,Q)}}class Yo{constructor(D){this.zone=D,this.task=null}call(D,L){const Q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Me,{},Me,Me)),L.pipe((0,Bi.b)({next:Q,complete:Q,error:Q})).subscribe(D).add(Q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vi=(()=>{class x{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new Jr(Zone.current)),this.insideAngular=L.run(()=>new Jr(Zone.current,Rn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(L){return new(L||x)(h.LFG(h.R0b))},x.\u0275prov=h.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Tt(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function mt(x){return x.pipe((0,gs.Q)(Tt().outsideAngular))}function Ut(x){return Tt(),function Qo(x){return function(L){return(L=L.lift(new Yo(x.ngZone))).pipe((0,Zo.R)(x.outsideAngular),(0,gs.Q)(x.insideAngular))}}(Tt())(x)}},2090:(Le,Ee,M)=>{"use strict";M.d(Ee,{$s:()=>ht,BH:()=>Ae,G6:()=>re,L:()=>N,LL:()=>et,Pz:()=>lt,Sg:()=>Ie,UG:()=>K,US:()=>q,ZB:()=>R,ZR:()=>Se,aH:()=>Ge,b$:()=>H,eu:()=>le,hl:()=>ne,jU:()=>ve,m9:()=>zt,ne:()=>xn,pd:()=>$r,r3:()=>Mr,ru:()=>ee,tV:()=>B,uI:()=>G,vZ:()=>ot,w1:()=>_e,xO:()=>hn,xb:()=>wr,z$:()=>$,zI:()=>j,zd:()=>$n});const Y=function(fe){const ue=[];let ye=0;for(let Ue=0;Ue<fe.length;Ue++){let be=fe.charCodeAt(Ue);be<128?ue[ye++]=be:be<2048?(ue[ye++]=be>>6|192,ue[ye++]=63&be|128):55296==(64512&be)&&Ue+1<fe.length&&56320==(64512&fe.charCodeAt(Ue+1))?(be=65536+((1023&be)<<10)+(1023&fe.charCodeAt(++Ue)),ue[ye++]=be>>18|240,ue[ye++]=be>>12&63|128,ue[ye++]=be>>6&63|128,ue[ye++]=63&be|128):(ue[ye++]=be>>12|224,ue[ye++]=be>>6&63|128,ue[ye++]=63&be|128)}return ue},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(fe,ue){if(!Array.isArray(fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ue=[];for(let be=0;be<fe.length;be+=3){const Ke=fe[be],gt=be+1<fe.length,Jt=gt?fe[be+1]:0,_n=be+2<fe.length,nn=_n?fe[be+2]:0;let Yt=(15&Jt)<<2|nn>>6,br=63&nn;_n||(br=64,gt||(Yt=64)),Ue.push(ye[Ke>>2],ye[(3&Ke)<<4|Jt>>4],ye[Yt],ye[br])}return Ue.join("")},encodeString(fe,ue){return this.HAS_NATIVE_SUPPORT&&!ue?btoa(fe):this.encodeByteArray(Y(fe),ue)},decodeString(fe,ue){return this.HAS_NATIVE_SUPPORT&&!ue?atob(fe):function(fe){const ue=[];let ye=0,Ue=0;for(;ye<fe.length;){const be=fe[ye++];if(be<128)ue[Ue++]=String.fromCharCode(be);else if(be>191&&be<224){const Ke=fe[ye++];ue[Ue++]=String.fromCharCode((31&be)<<6|63&Ke)}else if(be>239&&be<365){const _n=((7&be)<<18|(63&fe[ye++])<<12|(63&fe[ye++])<<6|63&fe[ye++])-65536;ue[Ue++]=String.fromCharCode(55296+(_n>>10)),ue[Ue++]=String.fromCharCode(56320+(1023&_n))}else{const Ke=fe[ye++],gt=fe[ye++];ue[Ue++]=String.fromCharCode((15&be)<<12|(63&Ke)<<6|63&gt)}}return ue.join("")}(this.decodeStringToByteArray(fe,ue))},decodeStringToByteArray(fe,ue){this.init_();const ye=ue?this.charToByteMapWebSafe_:this.charToByteMap_,Ue=[];for(let be=0;be<fe.length;){const Ke=ye[fe.charAt(be++)],Jt=be<fe.length?ye[fe.charAt(be)]:0;++be;const nn=be<fe.length?ye[fe.charAt(be)]:64;++be;const rt=be<fe.length?ye[fe.charAt(be)]:64;if(++be,null==Ke||null==Jt||null==nn||null==rt)throw Error();Ue.push(Ke<<2|Jt>>4),64!==nn&&(Ue.push(Jt<<4&240|nn>>2),64!==rt&&Ue.push(nn<<6&192|rt))}return Ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let fe=0;fe<this.ENCODED_VALS.length;fe++)this.byteToCharMap_[fe]=this.ENCODED_VALS.charAt(fe),this.charToByteMap_[this.byteToCharMap_[fe]]=fe,this.byteToCharMapWebSafe_[fe]=this.ENCODED_VALS_WEBSAFE.charAt(fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[fe]]=fe,fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(fe)]=fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(fe)]=fe)}}},N=function(fe){return function(fe){const ue=Y(fe);return q.encodeByteArray(ue,!0)}(fe).replace(/\./g,"")},B=function(fe){try{return q.decodeString(fe,!0)}catch(ue){console.error("base64Decode failed: ",ue)}return null};function R(fe,ue){if(!(ue instanceof Object))return ue;switch(ue.constructor){case Date:return new Date(ue.getTime());case Object:void 0===fe&&(fe={});break;case Array:fe=[];break;default:return ue}for(const ye in ue)!ue.hasOwnProperty(ye)||!F(ye)||(fe[ye]=R(fe[ye],ue[ye]));return fe}function F(fe){return"__proto__"!==fe}function $(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function G(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function ee(){const fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof fe&&void 0!==fe.id}function H(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){const fe=$();return fe.indexOf("MSIE ")>=0||fe.indexOf("Trident/")>=0}function re(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){return"object"==typeof indexedDB}function le(){return new Promise((fe,ue)=>{try{let ye=!0;const Ue="validate-browser-context-for-indexeddb-analytics-module",be=self.indexedDB.open(Ue);be.onsuccess=()=>{be.result.close(),ye||self.indexedDB.deleteDatabase(Ue),fe(!0)},be.onupgradeneeded=()=>{ye=!1},be.onerror=()=>{var Ke;ue((null===(Ke=be.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(ye){ue(ye)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const se=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const fe=process.env.__FIREBASE_DEFAULTS__;return fe?JSON.parse(fe):void 0})()||(()=>{if(typeof document>"u")return;let fe;try{fe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ue=fe&&B(fe[1]);return ue&&JSON.parse(ue)})()}catch(fe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${fe}`)}},Ge=()=>{var fe;return null===(fe=se())||void 0===fe?void 0:fe.config},lt=fe=>{var ue;return null===(ue=se())||void 0===ue?void 0:ue[`_${fe}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ue,ye)=>{this.resolve=ue,this.reject=ye})}wrapCallback(ue){return(ye,Ue)=>{ye?this.reject(ye):this.resolve(Ue),"function"==typeof ue&&(this.promise.catch(()=>{}),1===ue.length?ue(ye):ue(ye,Ue))}}}function Ie(fe,ue){if(fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ue=ue||"demo-project",be=fe.iat||0,Ke=fe.sub||fe.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${Ue}`,aud:Ue,iat:be,exp:be+3600,auth_time:be,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},fe);return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(gt)),""].join(".")}class Se extends Error{constructor(ue,ye,Ue){super(ye),this.code=ue,this.customData=Ue,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(ue,ye,Ue){this.service=ue,this.serviceName=ye,this.errors=Ue}create(ue,...ye){const Ue=ye[0]||{},be=`${this.service}/${ue}`,Ke=this.errors[ue],gt=Ke?function Ze(fe,ue){return fe.replace(Mt,(ye,Ue)=>{const be=ue[Ue];return null!=be?String(be):`<${Ue}?>`})}(Ke,Ue):"Error";return new Se(be,`${this.serviceName}: ${gt} (${be}).`,Ue)}}const Mt=/\{\$([^}]+)}/g;function Mr(fe,ue){return Object.prototype.hasOwnProperty.call(fe,ue)}function wr(fe){for(const ue in fe)if(Object.prototype.hasOwnProperty.call(fe,ue))return!1;return!0}function ot(fe,ue){if(fe===ue)return!0;const ye=Object.keys(fe),Ue=Object.keys(ue);for(const be of ye){if(!Ue.includes(be))return!1;const Ke=fe[be],gt=ue[be];if(jn(Ke)&&jn(gt)){if(!ot(Ke,gt))return!1}else if(Ke!==gt)return!1}for(const be of Ue)if(!ye.includes(be))return!1;return!0}function jn(fe){return null!==fe&&"object"==typeof fe}function hn(fe){const ue=[];for(const[ye,Ue]of Object.entries(fe))Array.isArray(Ue)?Ue.forEach(be=>{ue.push(encodeURIComponent(ye)+"="+encodeURIComponent(be))}):ue.push(encodeURIComponent(ye)+"="+encodeURIComponent(Ue));return ue.length?"&"+ue.join("&"):""}function $n(fe){const ue={};return fe.replace(/^\?/,"").split("&").forEach(Ue=>{if(Ue){const[be,Ke]=Ue.split("=");ue[decodeURIComponent(be)]=decodeURIComponent(Ke)}}),ue}function $r(fe){const ue=fe.indexOf("?");if(!ue)return"";const ye=fe.indexOf("#",ue);return fe.substring(ue,ye>0?ye:void 0)}function xn(fe,ue){const ye=new fn(fe,ue);return ye.subscribe.bind(ye)}class fn{constructor(ue,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{ue(this)}).catch(Ue=>{this.error(Ue)})}next(ue){this.forEachObserver(ye=>{ye.next(ue)})}error(ue){this.forEachObserver(ye=>{ye.error(ue)}),this.close(ue)}complete(){this.forEachObserver(ue=>{ue.complete()}),this.close()}subscribe(ue,ye,Ue){let be;if(void 0===ue&&void 0===ye&&void 0===Ue)throw new Error("Missing Observer.");be=function yt(fe,ue){if("object"!=typeof fe||null===fe)return!1;for(const ye of ue)if(ye in fe&&"function"==typeof fe[ye])return!0;return!1}(ue,["next","error","complete"])?ue:{next:ue,error:ye,complete:Ue},void 0===be.next&&(be.next=un),void 0===be.error&&(be.error=un),void 0===be.complete&&(be.complete=un);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?be.error(this.finalError):be.complete()}catch{}}),this.observers.push(be),Ke}unsubscribeOne(ue){void 0===this.observers||void 0===this.observers[ue]||(delete this.observers[ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ue){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,ue)}sendOne(ue,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ue])try{ye(this.observers[ue])}catch(Ue){typeof console<"u"&&console.error&&console.error(Ue)}})}close(ue){this.finalized||(this.finalized=!0,void 0!==ue&&(this.finalError=ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function un(){}function ht(fe,ue=1e3,ye=2){const Ue=ue*Math.pow(ye,fe),be=Math.round(.5*Ue*(Math.random()-.5)*2);return Math.min(144e5,Ue+be)}function zt(fe){return fe&&fe._delegate?fe._delegate:fe}},7067:(Le,Ee,M)=>{"use strict";var h=M(4650);let O=null;function k(){return O}const J=new h.OlP("DocumentToken");let N=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function B(){return(0,h.LFG)(R)}()},providedIn:"platform"}),n})();const P=new h.OlP("Location Initialized");let R=(()=>{class n extends N{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){F()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){F()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function $(){return new R((0,h.LFG)(J))}()},providedIn:"platform"}),n})();function F(){return!!window.history.pushState}function G(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function K(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ve(n){return n&&"?"!==n[0]?"?"+n:n}let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(X)},providedIn:"root"}),n})();const H=new h.OlP("appBaseHref");let X=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(J).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+ve(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+ve(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(N),h.LFG(H,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_e=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+ve(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+ve(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(N),h.LFG(H,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ae=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=K(ne(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ve(r))}normalize(t){return n.stripTrailingSlash(function re(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ve(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ve(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ve,n.joinWithSlash=G,n.stripTrailingSlash=K,n.\u0275fac=function(t){return new(t||n)(h.LFG(ee))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return new ae((0,h.LFG)(ee))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}let vn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class xa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ss=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new xa(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,l),Fs(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Fs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Fs(n,e){n.context.$implicit=e.item}let Un=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Xc{constructor(){this.$implicit=null,this.ngIf=null}}function Ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function lr(n,e){return new h.vHH(2100,!1)}class Dd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Ig{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const os=new Ig,xg=new Dd;let nl=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return os;if((0,h.F4k)(t))return xg;throw lr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Ls=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Df=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw lr();return t.replace(Ls,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=h.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),Fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Pr(n){return"server"===n}let Mu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Mf((0,h.LFG)(J),window)}),n})();class Mf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Wr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class so extends class Pd extends class q{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){O||(O=n)}(new so)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gu(){return oo=oo||document.querySelector("base"),oo?oo.getAttribute("href"):null}();return null==t?null:function oi(n){dr=dr||document.createElement("a"),dr.setAttribute("href",n);const e=dr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){oo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Su(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let dr,oo=null;const Dn=new h.OlP("TRANSITION_ID"),ml=[{provide:h.ip1,useFactory:function Nd(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Dn,J,h.zs3],multi:!0}];let yl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=new h.OlP("EventManagerPlugins");let Od=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Wu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class qu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ao=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Vo=(()=>{class n extends ao{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fd))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Fd(n){k().remove(n)}const Ho={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ld=/%COMP%/g;function Yu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Yu(n,i,t):(i=i.replace(Ld,n),t.push(i))}return t}function Ud(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let co=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new jo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Bd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Vd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Yu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Od),h.LFG(Vo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class jo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ho[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ho[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ho[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ud(r)):this.eventManager.addEventListener(e,t,Ud(r))}}function Na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bd extends jo{constructor(e,t,r,i){super(e),this.component=r;const u=Yu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function qn(n){return"_ngcontent-%COMP%".replace(Ld,n)}(i+"-"+r.id),this.hostAttr=function Zu(n){return"_nghost-%COMP%".replace(Ld,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Vd extends jo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Yu(i.id,i.styles,[]);for(let l=0;l<u.length;l++){const f=document.createElement("style");f.textContent=u[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xr=(()=>{class n extends qu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=["alt","control","meta","shift"],Fa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ui={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let La=(()=>{class n extends qu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Oa.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),l+=E+".")}),l+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=Fa[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Oa.forEach(l=>{l!==i&&(0,Ui[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Xu(){so.makeCurrent()},multi:!0},{provide:J,useFactory:function Ba(){return(0,h.RDi)(document),document},deps:[]}]),Hs=new h.OlP(""),jd=[{provide:h.rWj,useClass:class Pf{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const f=function(y){l=l||y,u--,0==u&&r(l)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],js=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ho(){return new h.qLn},deps:[]},{provide:Wu,useClass:xr,multi:!0,deps:[J,h.R0b,h.Lbi]},{provide:Wu,useClass:La,multi:!0,deps:[J]},{provide:co,useClass:co,deps:[Od,Vo,h.AFp]},{provide:h.FYo,useExisting:co},{provide:ao,useExisting:Vo},{provide:Vo,useClass:Vo,deps:[J]},{provide:Od,useClass:Od,deps:[Wu,h.R0b]},{provide:class Uo{},useClass:yl,deps:[]},[]];let tc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Dn,useExisting:h.AFp},ml]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hs,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...js,...jd],imports:[Fo,h.hGG]}),n})(),fs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $o(){return new fs((0,h.LFG)(J))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Dr=M(2011),mo=M(4986),yi=M(9751),pn=M(8996),hr=M(7669);function ct(...n){const e=(0,hr.yG)(n);return(0,pn.D)(n,e)}var Rn=M(6351),Bi=M(8189);function Zo(...n){return function gs(){return(0,Bi.J)(1)}()((0,pn.D)(n,(0,hr.yG)(n)))}var Sr=M(4482);function zs(...n){const e=(0,hr.yG)(n);return(0,Sr.e)((t,r)=>{(e?Zo(n,t,e):Zo(n,t)).subscribe(r)})}var On=M(5403);function Vi(){return(0,Sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,On.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var vt=M(4004);function qr(n,e,t,r,i){return(u,l)=>{let f=t,y=e,E=0;u.subscribe((0,On.x)(l,C=>{const A=E++;y=f?n(y,C,A):(f=!0,C),r&&l.next(y)},i&&(()=>{f&&l.next(y),l.complete()})))}}function Hi(n,e){return(0,Sr.e)(qr(n,e,arguments.length>=2,!0))}var ui=M(4671);function zd(n,e=ui.y){return n=n??Gd,(0,Sr.e)((t,r)=>{let i,u=!0;t.subscribe((0,On.x)(r,l=>{const f=e(l);(u||!n(i,f))&&(u=!1,i=f,r.next(l))}))})}function Gd(n,e){return n===e}function ji(n,e){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,On.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}M(1277);var mt,oc=M(3942),Me=M(5861),Jr=M(9681),Yo=M(4859),vi=M(1877),Tt=M(2090),kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fn={},$a=$a||{},Ut=kg||self;function Qo(){}function Xo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function za(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var D="closure_uid_"+(1e9*Math.random()>>>0),L=0;function Q(n,e,t){return n.call.apply(n.bind,arguments)}function we(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xe(n,e,t){return(xe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q:we).apply(null,arguments)}function je(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function We(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Et(){this.s=this.s,this.o=this.o}Et.prototype.s=!1,Et.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function x(n){Object.prototype.hasOwnProperty.call(n,D)&&n[D]||(n[D]=++L)}(this)},Et.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zt=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function It(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kn(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Xo(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function gn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gn.prototype.h=function(){this.defaultPrevented=!0};var Si=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Qo,e),Ut.removeEventListener("test",Qo,e)}catch{}return n}();function $i(n){return/^[\s\xa0]*$/.test(n)}var ms=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ys(n,e){return n<e?-1:n>e?1:0}function vs(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Nr(n){return-1!=vs().indexOf(n)}function zi(n){return zi[" "](n),n}zi[" "]=Qo;var qd,n,vo=Nr("Opera"),_s=Nr("Trident")||Nr("MSIE"),Wd=Nr("Edge"),Pg=Wd||_s,Ff=Nr("Gecko")&&!(-1!=vs().toLowerCase().indexOf("webkit")&&!Nr("Edge"))&&!(Nr("Trident")||Nr("MSIE"))&&!Nr("Edge"),ay=-1!=vs().toLowerCase().indexOf("webkit")&&!Nr("Edge");function Lf(){var n=Ut.document;return n?n.documentMode:void 0}e:{var Uf="",Kd=(n=vs(),Ff?/rv:([^\);]+)(\)|;)/.exec(n):Wd?/Edge\/([\d\.]+)/.exec(n):_s?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ay?/WebKit\/(\S+)/.exec(n):vo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Kd&&(Uf=Kd?Kd[1]:""),_s){var ac=Lf();if(null!=ac&&ac>parseFloat(Uf)){qd=String(ac);break e}}qd=Uf}var bl={};var Ng=Ut.document&&_s&&(Lf()||parseInt(qd,10))||void 0;function Yd(n,e){if(gn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ff){e:{try{zi(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ly[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yd.X.h.call(this)}}We(Yd,gn);var ly={2:"touch",3:"pen",4:"mouse"};Yd.prototype.h=function(){Yd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Il="closure_listenable_"+(1e6*Math.random()|0),Bf=0;function Og(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Bf,this.ba=this.ea=!1}function Vf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dy(n){const e={};for(const t in n)e[t]=n[t];return e}const hy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fy(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<hy.length;u++)t=hy[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qd(n){this.src=n,this.g={},this.h=0}function Fg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Zt(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Vf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Hf(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Qd.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Hf(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Og(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var Xd="closure_lm_"+(1e6*Math.random()|0),Cl={};function Dl(n,e,t,r,i){if(r&&r.once)return ws(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Dl(n,e[u],t,r,i);return null}return t=Gf(t),n&&n[Il]?n.N(e,t,za(r)?!!r.capture:!!r,i):jf(n,e,t,!1,r,i)}function jf(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=za(i)?!!i.capture:!!i,f=uc(n);if(f||(n[Xd]=f=new Qd(n)),(t=f.add(e,t,r,l,u)).proxy)return t;if(r=function Jd(){const e=Lg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Si||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(eh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ws(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ws(n,e[u],t,r,i);return null}return t=Gf(t),n&&n[Il]?n.O(e,t,za(r)?!!r.capture:!!r,i):jf(n,e,t,!0,r,i)}function $f(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)$f(n,e[u],t,r,i);else r=za(r)?!!r.capture:!!r,t=Gf(t),n&&n[Il]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Hf(u=n.g[e],t,r,i))&&(Vf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=uc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Hf(e,t,r,i)),(t=-1<n?e[n]:null)&&zf(t))}function zf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Il])Fg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(eh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=uc(e))?(Fg(t,n),0==t.h&&(t.src=null,e[Xd]=null)):Vf(n)}}}function eh(n){return n in Cl?Cl[n]:Cl[n]="on"+n}function Lg(n,e){if(n.ba)n=!0;else{e=new Yd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&zf(n),n=t.call(r,e)}return n}function uc(n){return(n=n[Xd])instanceof Qd?n:null}var th="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(n){return"function"==typeof n?n:(n[th]||(n[th]=function(e){return n.handleEvent(e)}),n[th])}function Or(){Et.call(this),this.i=new Qd(this),this.P=this,this.I=null}function Fr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gn(e,n);else if(e instanceof gn)e.target=e.target||n;else{var i=e;fy(e=new gn(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=nh(l,r,!0,e)&&i}if(i=nh(l=e.g=n,r,!0,e)&&i,i=nh(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=nh(l=e.g=t[u],r,!1,e)&&i}function nh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var f=l.listener,y=l.ha||l.src;l.ea&&Fg(n.i,l),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}We(Or,Et),Or.prototype[Il]=!0,Or.prototype.removeEventListener=function(n,e,t,r){$f(this,n,e,t,r)},Or.prototype.M=function(){if(Or.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vf(t[r]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wf=Ut.JSON.stringify;function ei(){var n=Kf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lc,Ug=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _o,n=>n.reset());class _o{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ti(n){Ut.setTimeout(()=>{throw n},0)}function cc(n,e){lc||function py(){var n=Ut.Promise.resolve(void 0);lc=function(){n.then(gy)}}(),Sl||(lc(),Sl=!0),Kf.add(n,e)}var Sl=!1,Kf=new class qf{constructor(){this.h=this.g=null}add(e,t){const r=Ug.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gy(){for(var n;n=ei();){try{n.h.call(n.g)}catch(t){ti(t)}var e=Ug;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sl=!1}function Ga(n,e){Or.call(this),this.h=n||1,this.g=e||Ut,this.j=xe(this.lb,this),this.l=Date.now()}function Zf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function rh(n,e,t){if("function"==typeof n)t&&(n=xe(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xe(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function ih(n){n.g=rh(()=>{n.g=null,n.i&&(n.i=!1,ih(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}We(Ga,Or),(mt=Ga.prototype).ca=!1,mt.R=null,mt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Fr(this,"tick"),this.ca&&(Zf(this),this.start()))}},mt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){Ga.X.M.call(this),Zf(this),delete this.g};class my extends Et{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ih(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wa(n){Et.call(this),this.h=n,this.g={}}We(Wa,Et);var sh=[];function Bg(n,e,t,r){Array.isArray(t)||(t&&(sh[0]=t.toString()),t=sh);for(var i=0;i<t.length;i++){var u=Dl(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Yf(n){xl(n.g,function(e,t){this.g.hasOwnProperty(t)&&zf(e)},n),n.g={}}function Tl(){this.g=!0}function dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rl(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return Wf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Wa.prototype.M=function(){Wa.X.M.call(this),Yf(this)},Wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tl.prototype.Aa=function(){this.g=!1},Tl.prototype.info=function(){};var Jo={},vy=null;function Gi(){return vy=vy||new Or}function oh(n){gn.call(this,Jo.Pa,n)}function hc(n){const e=Gi();Fr(e,new oh(e))}function Vg(n,e){gn.call(this,Jo.STAT_EVENT,n),this.stat=e}function Lr(n){const e=Gi();Fr(e,new Vg(e,n))}function Hg(n,e){gn.call(this,Jo.Qa,n),this.size=e}function Ml(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Jo.Pa="serverreachability",We(oh,gn),Jo.STAT_EVENT="statevent",We(Vg,gn),Jo.Qa="timingevent",We(Hg,gn);var ah={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},jg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ka(){}function uh(){}Ka.prototype.h=null;var Qf,Za={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ch(){gn.call(this,"d")}function kl(){gn.call(this,"c")}function Pl(){}function ea(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Wa(this),this.O=ta,this.T=new Ga(n=Pg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}We(ch,gn),We(kl,gn),We(Pl,Ka),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Qf=new Pl;var ta=45e3,lh={},Ya={};function Xf(n,e,t){n.K=1,n.v=ra(Wi(e)),n.s=t,n.P=!0,Ti(n,null)}function Ti(n,e){n.F=Date.now(),na(n),n.A=Wi(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),V(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Nl,n.g=Ay(n.l,t?e:null,!n.s),0<n.N&&(n.L=new my(xe(n.La,n,n.g),n.N)),Bg(n.S,n.g,"readystatechange",n.ib),e=n.H?dy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),hc(),function qa(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",f=u.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var C=E[0];E=E[1];var A=C.split("_");l=2<=A.length&&"type"==A[1]?l+(C+"=")+E+"&":l+(C+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function wo(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Jf(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=zg(n,t),i==Ya){4==e&&(n.o=4,Lr(14),r=!1),dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==lh){n.o=4,Lr(15),dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dc(n.j,n.m,i,null),Ai(n,i)}wo(n)&&i!=Ya&&i!=lh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Lr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ty(e),e.K=!0,Lr(11))):(dc(n.j,n.m,t,"[Invalid Chunked Response]"),Gs(n),Qa(n))}function zg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ya:(t=Number(e.substring(t,r)),isNaN(t)?lh:(r+=1)+t>e.length?Ya:(e=e.substr(r,t),n.C=r+t,e))}function na(n){n.V=Date.now()+n.O,Ol(n,n.O)}function Ol(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ml(xe(n.gb,n),e)}function fc(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Qa(n){0==n.l.G||n.I||Xw(n.l,n)}function Gs(n){fc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Zf(n.T),Yf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ai(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||gr(t.h,n)))if(!n.J&&gr(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Jg(t),Zg(t)}Sy(t),Lr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ml(xe(t.cb,t),6e3));if(1>=pr(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else mh(t,11)}else if((n.J||t.g==n)&&Jg(t),!$i(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const C=E[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const A=E[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const W=E[5];null!=W&&"number"==typeof W&&0<W&&(t.J=r=1.5*W,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const oe=n.g;if(oe){const de=oe.g?oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var u=r.h;u.g||-1==de.indexOf("spdy")&&-1==de.indexOf("quic")&&-1==de.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Ws(u,u.h),u.h=null))}if(r.D){const Te=oe.g?oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Te&&(r.za=Te,wn(r.F,r.D,Te))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=em(r,r.H?r.ka:null,r.V),l.J){ip(r.h,l);var f=l,y=r.J;y&&f.setTimeout(y),f.B&&(fc(f),na(f)),r.g=l}else Dy(r);0<t.i.length&&Qg(t)}else"stop"!=E[0]&&"close"!=E[0]||mh(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?mh(t,7):gh(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}hc()}catch{}}function dh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function tp(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ep(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Xo(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(mt=ea.prototype).setTimeout=function(n){this.O=n},mt.ib=function(n){n=n.target;const e=this.L;e&&3==sa(n)?e.l():this.La(n)},mt.La=function(n){try{if(n==this.g)e:{const C=sa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Pg||this.g&&(this.h.h||this.g.fa()||Kw(this.g)))){this.I||4!=C||7==e||hc(),fc(this);var t=this.g.aa();this.Y=t;t:if(wo(this)){var r=Kw(this.g);n="";var i=r.length,u=4==sa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gs(this),Qa(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function yy(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Lr(12),Gs(this),Qa(this);break e}dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ai(this,t)}this.P?(Jf(this,C,l),Pg&&this.i&&3==C&&(Bg(this.S,this.T,"tick",this.hb),this.T.start())):(dc(this.j,this.m,l,null),Ai(this,l)),4==C&&Gs(this),this.i&&!this.I&&(4==C?Xw(this.l,this):(this.i=!1,na(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),Gs(this),Qa(this)}}}catch{}},mt.hb=function(){if(this.g){var n=sa(this.g),e=this.g.fa();this.C<e.length&&(fc(this),Jf(this,n,e),this.i&&4!=n&&na(this))}},mt.cancel=function(){this.I=!0,Gs(this)},mt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Al(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hc(),Lr(17)),Gs(this),this.o=2,Qa(this)):Ol(this,this.V-n)};var hh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fr(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fr){this.h=void 0!==e?e:n.h,gc(this,n.j),this.s=n.s,this.g=n.g,fh(this,n.m),this.l=n.l,e=n.i;var t=new p;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Es(this,t),this.o=n.o}else n&&(t=String(n).match(hh))?(this.h=!!e,gc(this,t[1]||"",!0),this.s=ia(t[2]||""),this.g=ia(t[3]||"",!0),fh(this,t[4]),this.l=ia(t[5]||"",!0),Es(this,t[6]||"",!0),this.o=ia(t[7]||"")):(this.h=!!e,this.i=new p(null,this.h))}function Wi(n){return new fr(n)}function gc(n,e,t){n.j=t?ia(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Es(n,e,t){e instanceof p?(n.i=e,function Oe(n,e){e&&!n.j&&(m(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(w(this,r),V(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bs(e,rp)),n.i=new p(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function ra(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ia(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bs(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,np),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function np(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bs(e,Gg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bs(e,Gg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bs(t,"/"==t.charAt(0)?_y:Ww,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bs(t,v)),n.join("")};var Gg=/[#\/\?@]/g,Ww=/[#\?:]/g,_y=/[#\?]/g,rp=/[#\?@]/g,v=/#/g;function p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function m(n){n.g||(n.g=new Map,n.h=0,n.i&&function pc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w(n,e){m(n),e=me(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function T(n,e){return m(n),e=me(n,e),n.g.has(e)}function V(n,e,t){w(n,e),0<t.length&&(n.i=null,n.g.set(me(n,e),It(t)),n.h+=t.length)}function me(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ft(n){this.l=n||Ft,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=p.prototype).add=function(n,e){m(this),this.i=null,n=me(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){m(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},mt.oa=function(){m(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},mt.W=function(n){m(this);let e=[];if("string"==typeof n)T(this,n)&&(e=e.concat(this.g.get(me(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},mt.set=function(n,e){return m(this),this.i=null,T(this,n=me(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Ft=10;function At(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pr(n){return n.h?1:n.g?n.g.size:0}function gr(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ws(n,e){n.g?n.g.add(e):n.h=e}function ip(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sp(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return It(n.i)}function op(){}function wy(){this.g=new op}function Wg(n,e,t){const r=t||"";try{dh(n,function(i,u){let l=i;za(i)&&(l=Wf(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mc(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xa(n){this.l=n.ac||null,this.j=n.jb||!1}function Fl(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ap,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft.prototype.cancel=function(){if(this.i=sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},op.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},op.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},We(Xa,Ka),Xa.prototype.g=function(){return new Fl(this.l,this.j)},Xa.prototype.i=function(n){return function(){return n}}({}),We(Fl,Or);var ap=0;function ph(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ja(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Is(n)}function Is(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=Fl.prototype).open=function(n,e){if(this.readyState!=ap)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Is(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ja(this)),this.readyState=ap},mt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ph(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},mt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ja(this):Is(this),3==this.readyState&&ph(this)}},mt.Va=function(n){this.g&&(this.response=this.responseText=n,Ja(this))},mt.Ua=function(n){this.g&&(this.response=n,Ja(this))},mt.ga=function(){this.g&&Ja(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var up=Ut.JSON.parse;function or(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=by,this.K=this.L=!1}We(or,Or);var by="",qw=/^https?$/i,YT=["POST","PUT"];function kx(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qg(n),Iy(n)}function qg(n){n.D||(n.D=!0,Fr(n,"complete"),Fr(n,"error"))}function Kg(n){if(n.h&&typeof $a<"u"&&(!n.C[1]||4!=sa(n)||2!=n.aa()))if(n.v&&4==sa(n))rh(n.Ha,0,n);else if(Fr(n,"readystatechange"),4==sa(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(hh)[1]||null;if(!i&&Ut.self&&Ut.self.location){var u=Ut.self.location.protocol;i=u.substr(0,u.length-1)}r=!qw.test(i?i.toLowerCase():"")}t=r}if(t)Fr(n,"complete"),Fr(n,"success");else{n.m=6;try{var l=2<sa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",qg(n)}}finally{Iy(n)}}}function Iy(n,e){if(n.g){Px(n);const t=n.g,r=n.C[0]?Qo:null;n.g=null,n.C=null,e||Fr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Px(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function sa(n){return n.g?n.g.readyState:0}function Kw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case by:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Zw(n){let e="";return xl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Zw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function cp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Cy(n){this.Ca=0,this.i=[],this.j=new Tl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=cp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=cp("baseRetryDelayMs",5e3,n),this.bb=cp("retryDelaySeedMs",1e4,n),this.$a=cp("forwardChannelMaxRetries",2,n),this.ta=cp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ft(n&&n.concurrentRequestLimit),this.Fa=new wy,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function gh(n){if(Yg(n),3==n.G){var e=n.U++,t=Wi(n.F);wn(t,"SID",n.I),wn(t,"RID",e),wn(t,"TYPE","terminate"),lp(n,t),(e=new ea(n,n.j,e,void 0)).K=2,e.v=ra(Wi(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ay(e.l,null),e.g.da(e.v)),e.F=Date.now(),na(e)}yh(n)}function Zg(n){n.g&&(Ty(n),n.g.cancel(),n.g=null)}function Yg(n){Zg(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Jg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Qg(n){At(n.h)||n.m||(n.m=!0,cc(n.Ja,n),n.C=0)}function Yw(n,e){var t;t=e?e.m:n.U++;const r=Wi(n.F);wn(r,"SID",n.I),wn(r,"RID",t),wn(r,"AID",n.T),lp(n,r),n.o&&n.s&&xy(r,n.o,n.s),t=new ea(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Xg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ws(n.h,t),Xf(t,r,e)}function lp(n,e){n.ia&&xl(n.ia,function(t,r){wn(e,r,t)}),n.l&&dh({},function(t,r){wn(e,r,t)})}function Xg(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xe(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let E=i[y].h;const C=i[y].g;if(E-=u,0>E)u=Math.max(0,i[y].h-100),f=!1;else try{Wg(C,l,"req"+E+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dy(n){n.g||n.u||(n.Z=1,cc(n.Ia,n),n.A=0)}function Sy(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ml(xe(n.Ia,n),Nx(n,n.A)),n.A++,0))}function Ty(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Qw(n){n.g=new ea(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Wi(n.sa);wn(e,"RID","rpc"),wn(e,"SID",n.I),wn(e,"CI",n.L?"0":"1"),wn(e,"AID",n.T),wn(e,"TYPE","xmlhttp"),lp(n,e),n.o&&n.s&&xy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ra(Wi(e)),t.s=null,t.P=!0,Ti(t,n)}function Jg(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function Xw(n,e){var t=null;if(n.g==e){Jg(n),Ty(n),n.g=null;var r=2}else{if(!gr(n.h,e))return;t=e.D,ip(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Fr(r=Gi(),new Hg(r,t)),Qg(n)}else Dy(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Ur(n,e){return!(pr(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ml(xe(n.Ja,n,e),Nx(n,n.C)),n.C++,0)))}(n,e)||2==r&&Sy(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:mh(n,5);break;case 4:mh(n,10);break;case 3:mh(n,6);break;default:mh(n,2)}}function Nx(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function mh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xe(n.kb,n);t||(t=new fr("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||gc(t,"https"),ra(t)),function Ey(n,e){const t=new Tl;if(Ut.Image){const r=new Image;r.onload=je(mc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=je(mc,t,r,"TestLoadImage: error",!1,e),r.onabort=je(mc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=je(mc,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Lr(2);n.G=0,n.l&&n.l.va(e),yh(n),Yg(n)}function yh(n){if(n.G=0,n.la=[],n.l){const e=sp(n.h);(0!=e.length||0!=n.i.length)&&(Kn(n.la,e),Kn(n.la,n.i),n.h.i.length=0,It(n.i),n.i.length=0),n.l.ua()}}function em(n,e,t){var r=t instanceof fr?Wi(t):new fr(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),fh(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new fr(null,void 0);r&&gc(u,r),e&&(u.g=e),i&&fh(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&wn(r,t,e),wn(r,"VER",n.ma),lp(n,r),r}function Ay(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Da&&!n.ra?new Xa({jb:!0}):n.ra)).Ka(n.H),e}function Ry(){}function dp(){if(_s&&!(10<=Number(Ng)))throw Error("Environmental error: no available transport.")}function xs(n,e){Or.call(this),this.g=new Cy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!$i(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$i(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new yc(this)}function My(n){ch.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ky(){kl.call(this),this.status=1}function yc(n){this.g=n}(mt=or.prototype).Ka=function(n){this.L=n},mt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qf.g(),this.C=function $g(n){return n.h||(n.h=n.i())}(this.u?this.u:Qf),this.g.onreadystatechange=xe(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kx(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=Zt(YT,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Px(this),0<this.B&&((this.K=function QT(n){return _s&&function uy(){return function yo(n){var e=bl;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ms(String(qd)).split("."),t=ms("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=ys(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||ys(0==i[2].length,0==u[2].length)||ys(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xe(this.qa,this)):this.A=rh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kx(this,u)}},mt.qa=function(){typeof $a<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fr(this,"complete"),Fr(this,"abort"),Iy(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iy(this,!0)),or.X.M.call(this)},mt.Ha=function(){this.s||(this.F||this.v||this.l?Kg(this):this.fb())},mt.fb=function(){Kg(this)},mt.aa=function(){try{return 2<sa(this)?this.g.status:-1}catch{return-1}},mt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),up(e)}},mt.Ea=function(){return this.m},mt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Cy.prototype).ma=8,mt.G=1,mt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ea(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=dy(u),fy(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xg(this,i,e),wn(t=Wi(this.F),"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),lp(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Zw(u)))+"&"+e:this.o&&xy(t,this.o,u)),Ws(this.h,i),this.Ya&&wn(t,"TYPE","init"),this.O?(wn(t,"$req",e),wn(t,"SID","null"),i.Z=!0,Xf(i,t,null)):Xf(i,t,e),this.G=2}}else 3==this.G&&(n?Yw(this,n):0==this.i.length||At(this.h)||Yw(this))},mt.Ia=function(){if(this.u=null,Qw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ml(xe(this.eb,this),n)}},mt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Lr(10),Zg(this),Qw(this))},mt.cb=function(){null!=this.v&&(this.v=null,Zg(this),Sy(this),Lr(19))},mt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Lr(2)):(this.j.info("Failed to ping google.com"),Lr(1))},(mt=Ry.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Ra=function(){},dp.prototype.g=function(n,e){return new xs(n,e)},We(xs,Or),xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Lr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=em(n,null,n.V),Qg(n)},xs.prototype.close=function(){gh(this.g)},xs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Wf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Qg(e)},xs.prototype.M=function(){this.g.l=null,delete this.j,gh(this.g),delete this.g,xs.X.M.call(this)},We(My,ch),We(ky,kl),We(yc,Ry),yc.prototype.xa=function(){Fr(this.g,"a")},yc.prototype.wa=function(n){Fr(this.g,new My(n))},yc.prototype.va=function(n){Fr(this.g,new ky)},yc.prototype.ua=function(){Fr(this.g,"b")},dp.prototype.createWebChannel=dp.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,ah.NO_ERROR=0,ah.TIMEOUT=8,ah.HTTP_ERROR=6,jg.COMPLETE="complete",uh.EventType=Za,Za.OPEN="a",Za.CLOSE="b",Za.ERROR="c",Za.MESSAGE="d",Or.prototype.listen=Or.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.Oa,or.prototype.getLastErrorCode=or.prototype.Ea,or.prototype.getStatus=or.prototype.aa,or.prototype.getResponseJson=or.prototype.Sa,or.prototype.getResponseText=or.prototype.fa,or.prototype.send=or.prototype.da,or.prototype.setWithCredentials=or.prototype.Ka;var XT=Fn.createWebChannelTransport=function(){return new dp},Ox=Fn.getStatEventTarget=function(){return Gi()},hp=Fn.ErrorCode=ah,Jw=Fn.EventType=jg,eE=Fn.Event=Jo,vc=Fn.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fx=Fn.FetchXmlHttpFactory=Xa,vh=Fn.WebChannel=uh,tm=Fn.XhrIo=or;const tE="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let eu="9.14.0";const qi=new vi.Yd("@firebase/firestore");function nm(){return qi.logLevel}function qe(n,...e){if(qi.logLevel<=vi.in.DEBUG){const t=e.map(wc);qi.debug(`Firestore (${eu}): ${n}`,...t)}}function Tr(n,...e){if(qi.logLevel<=vi.in.ERROR){const t=e.map(wc);qi.error(`Firestore (${eu}): ${n}`,...t)}}function _c(n,...e){if(qi.logLevel<=vi.in.WARN){const t=e.map(wc);qi.warn(`Firestore (${eu}): ${n}`,...t)}}function wc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: `+n;throw Tr(e),new Error(e)}function $t(n,e){n||_t()}function at(n,e){return n}const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class JT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ux{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const E=l;e.enqueueRetryable((0,Me.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},y=E=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t("string"==typeof r.accessToken),new nE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(null===e||"string"==typeof e),new Br(e)}}class fp{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():($t(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Bx{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new fp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ll{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pp{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t("string"==typeof t.token),this.A=t.token,new Ll(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function t1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ny{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=t1(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function _h(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iE(n){return n+"\0"}class Zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ze(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new Zn(0,0))}static max(){return new Bt(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ul{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ul.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends Ul{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(Fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const Vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ul{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return Vx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new ze(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ze(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ze(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(u(),i++)}if(u(),l)throw new ze(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(ln.fromString(e))}static fromName(e){return new nt(ln.fromString(e).popFirst(5))}static empty(){return new nt(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new ln(e.slice()))}}class rm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Oy(n){return n.fields.find(e=>2===e.kind)}function Bl(n){return n.fields.filter(e=>2!==e.kind)}rm.UNKNOWN_ID=-1;class gp{constructor(e,t){this.fieldPath=e,this.kind=t}}class mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mp(0,Cs.min())}}function Vl(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Bt.fromTimestamp(1e9===r?new Zn(t+1,0):new Zn(t,r));return new Cs(i,nt.empty(),e)}function oa(n){return new Cs(n.readTime,n.key,-1)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(Bt.min(),nt.empty(),-1)}static max(){return new Cs(Bt.max(),nt.empty(),-1)}}function Fy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=nt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const $x="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tu(n){return sE.apply(this,arguments)}function sE(){return sE=(0,Me.Z)(function*(n){if(n.code!==Fe.FAILED_PRECONDITION||n.message!==$x)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),sE.apply(this,arguments)}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,r)=>{t(e)})}static reject(e){return new ke((t,r)=>{r(e)})}static waitFor(e){return new ke((t,r)=>{let i=0,u=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++u,l&&u===i&&t()},y=>r(y))}),l=!0,u===i&&t()})}static or(e){let t=ke.resolve(!1);for(const r of e)t=t.next(i=>i?ke.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ke((r,i)=>{const u=e.length,l=new Array(u);let f=0;for(let y=0;y<u;y++){const E=y;t(e[E]).next(C=>{l[E]=C,++f,f===u&&r(l)},C=>i(C))}})}static doWhile(e,t){return new ke((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Ly{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new wh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=im(r.target.error);this.P.reject(new wh(e,i))}}static open(e,t,r,i){try{return new Ly(t,e.transaction(i,r))}catch(u){throw new wh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Wx(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===qs.D((0,Tt.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),ci(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Tt.hl)())return!1;if(qs.N())return!0;const e=(0,Tt.z$)(),t=qs.D(e),r=0<t&&t<10,i=qs.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Me.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new wh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new ze(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ze(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new wh(e,f))},u.onupgradeneeded=l=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Me.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.F(e);const y=Ly.open(u.db,e,l?"readonly":"readwrite",r),E=i(y).next(C=>(y.V(),C)).catch(C=>(y.abort(C),ke.reject(C))).toPromise();return E.catch(()=>{}),yield y.v,E}catch(y){const E=y,C="FirebaseError"!==E.name&&f<3;if(qe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gx{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ci(this.U.delete())}}class wh extends ze{constructor(e,t){super(Fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ec(n){return"IndexedDbTransactionError"===n.name}class Wx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ci(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),ci(this.store.add(e))}get(e){return ci(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),ci(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),ci(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(l,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ke((u,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ke((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ke((r,i)=>{t.onerror=u=>{const l=im(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new ke((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const y=new Gx(f),E=t(f.primaryKey,f.value,y);if(E instanceof ke){const C=E.catch(A=>(y.done(),ke.reject(A)));r.push(C)}y.isDone?i():null===y.G?f.continue():f.continue(y.G)}}).next(()=>ke.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ci(n){return new ke((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=im(r.target.error);t(i)}})}let oE=!1;function im(n){const e=qs.D((0,Tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oE||(oE=!0,setTimeout(()=>{throw r},0)),r}}return n}class qx{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Me.Z)(function*(){t.task=null;try{qe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ec(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield tu(r)}yield t.nt(6e4)}))}}class Kx{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ke.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return qe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,u)).next(f=>(qe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=oa(u);Fy(l,r)>0&&(r=l)}),new Cs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function aE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ki.at=-1;class mr{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sm(this.root,e,this.comparator,!1)}getReverseIterator(){return new sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sm(this.root,e,this.comparator,!0)}}class sm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=u??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new xt(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1,xt.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,r,i){return this}insert(n,e,t){return new xt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(e){return new Uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class Uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(n){return n.hasNext()?n.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new Tn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _h(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Hr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const Yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nu(n){if($t(!!n),"string"==typeof n){let e=0;const t=Yx.exec(n);if($t(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yr(n.seconds),nanos:yr(n.nanos)}}function yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jl(n){return"string"==typeof n?Hr.fromBase64String(n):Hr.fromUint8Array(n)}function cE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function By(n){const e=n.mapValue.fields.__previous_value__;return cE(e)?By(e):e}function Eh(n){const e=nu(n.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}class $l{constructor(e,t,r,i,u,l,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Ic{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ic("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}function zl(n){return null==n}function Gl(n){return 0===n&&1/n==-1/0}function lE(n){return"number"==typeof n&&Number.isInteger(n)&&!Gl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vy={nullValue:"NULL_VALUE"};function bh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cE(n)?4:fE(n)?9007199254740991:10:_t()}function aa(n,e){if(n===e)return!0;const t=bh(n);if(t!==bh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eh(n).isEqual(Eh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=nu(r.timestampValue),l=nu(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,jl(n.bytesValue).isEqual(jl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return yr(r.geoPointValue.latitude)===yr(i.geoPointValue.latitude)&&yr(r.geoPointValue.longitude)===yr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return yr(r.integerValue)===yr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=yr(r.doubleValue),l=yr(i.doubleValue);return u===l?Gl(u)===Gl(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return _h(n.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(aE(u)!==aE(l))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===l[f]||!aa(u[f],l[f])))return!1;return!0}(n,e);default:return _t()}var i}function Ih(n,e){return void 0!==(n.values||[]).find(t=>aa(t,e))}function ql(n,e){if(n===e)return 0;const t=bh(n),r=bh(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=yr(i.integerValue||i.doubleValue),f=yr(u.integerValue||u.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return dE(n.timestampValue,e.timestampValue);case 4:return dE(Eh(n),Eh(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=jl(i),f=jl(u);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),f=u.split("/");for(let y=0;y<l.length&&y<f.length;y++){const E=Kt(l[y],f[y]);if(0!==E)return E}return Kt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Kt(yr(i.latitude),yr(u.latitude));return 0!==l?l:Kt(yr(i.longitude),yr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],f=u.values||[];for(let y=0;y<l.length&&y<f.length;++y){const E=ql(l[y],f[y]);if(E)return E}return Kt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Wl.mapValue&&u===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(u===Wl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),y=u.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let C=0;C<f.length&&C<E.length;++C){const A=Kt(f[C],E[C]);if(0!==A)return A;const W=ql(l[f[C]],y[E[C]]);if(0!==W)return W}return Kt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw _t()}}function dE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=nu(n),r=nu(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function Eo(n){return Hy(n)}function Hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jl(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=Hy(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const f of i)l?l=!1:u+=",",u+=`${f}:${Hy(r.fields[f])}`;return u+"}"}(n.mapValue):_t();var e}function xc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xh(n){return!!n&&"integerValue"in n}function yp(n){return!!n&&"arrayValue"in n}function jy(n){return!!n&&"nullValue"in n}function hE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function vp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qx(n){return"nullValue"in n?Vy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xc(Ic.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function pE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xc(Ic.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wl:_t()}function gE(n,e){const t=ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $y(n,e){const t=ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=vp(l):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ni(vp(this.value))}}function am(n){const e=[];return bc(n.fields,(t,r)=>{const i=new rr([t]);if(om(r)){const u=am(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new Ds(e)}class Yn{constructor(e,t,r,i,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Yn(e,0,Bt.min(),Bt.min(),ni.empty(),0)}static newFoundDocument(e,t,r){return new Yn(e,1,t,Bt.min(),r,0)}static newNoDocument(e,t){return new Yn(e,2,t,Bt.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Bt.min(),ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zy{constructor(e,t=null,r=[],i=[],u=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=f,this.ht=null}}function mE(n,e=null,t=[],r=[],i=null,u=null,l=null){return new zy(n,e,t,r,i,u,l)}function Ch(n){const e=at(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Eo(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Eo(r)).join(",")),e.ht=t}return e.ht}function Sh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Yy(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!aa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cm(n.startAt,e.startAt)&&cm(n.endAt,e.endAt)}function _p(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Kl(n,e){return n.filters.filter(t=>t instanceof li&&t.field.isEqual(e))}function Ks(n,e,t){let r=Vy,i=!0;for(const u of Kl(n,e)){let l=Vy,f=!0;switch(u.op){case"<":case"<=":l=Qx(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,f=!1;break;case"!=":case"not-in":l=Vy}gE({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];gE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Gy(n,e,t){let r=Wl,i=!0;for(const u of Kl(n,e)){let l=Wl,f=!0;switch(u.op){case">=":case">":l=pE(u.value),f=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,f=!1;break;case"!=":case"not-in":l=Wl}$y({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];$y({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class li extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Wy(e,t,r):"array-contains"===t?new Zy(e,r):"in"===t?new n1(e,r):"not-in"===t?new yE(e,r):"array-contains-any"===t?new r1(e,r):new li(e,t,r)}static lt(e,t,r){return"in"===t?new ru(e,r):new qy(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ql(t,this.value)):null!==t&&bh(this.value)===bh(t)&&this.ft(ql(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Wy extends li{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.ft(t)}}class ru extends li{constructor(e,t){super(e,"in",t),this.keys=Ky(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qy extends li{constructor(e,t){super(e,"not-in",t),this.keys=Ky(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ky(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}class Zy extends li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&Ih(t.arrayValue,this.value)}}class n1 extends li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ih(this.value.arrayValue,t)}}class yE extends li{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ih(this.value.arrayValue,t)}}class r1 extends li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ih(this.value.arrayValue,r))}}class bo{constructor(e,t){this.position=e,this.inclusive=t}}class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function um(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?nt.comparator(nt.fromName(l.referenceValue),t.key):ql(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function cm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!aa(n.position[t],e.position[t]))return!1;return!0}class Cc{constructor(e,t=null,r=[],i=[],u=null,l="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=f,this.endAt=y,this._t=null,this.wt=null}}function vE(n,e,t,r,i,u,l,f){return new Cc(n,e,t,r,i,u,l,f)}function Th(n){return new Cc(n)}function _E(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Qy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function lm(n){for(const e of n.filters)if(e.dt())return e.field;return null}function wE(n){return null!==n.collectionGroup}function Ah(n){const e=at(n);if(null===e._t){e._t=[];const t=lm(e),r=Qy(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new iu(t)),e._t.push(new iu(rr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new iu(rr.keyField(),u))}}}return e._t}function Zi(n){const e=at(n);if(!e.wt)if("F"===e.limitType)e.wt=mE(e.path,e.collectionGroup,Ah(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ah(e))t.push(new iu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new bo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new bo(e.startAt.position,e.startAt.inclusive):null;e.wt=mE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function wp(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rh(n,e){return Sh(Zi(n),Zi(e))&&n.limitType===e.limitType}function EE(n){return`${Ch(Zi(n))}|lt:${n.limitType}`}function Ep(n){return`Query(target=${function Dh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Eo(r.value)}`;var r}).join(", ")}]`),zl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Eo(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Eo(t)).join(",")),`Target(${e})`}(Zi(n))}; limitType=${n.limitType})`}function bE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):nt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const f=um(i,u,l);return i.inclusive?f<=0:f<0}(t.startAt,Ah(t),r)||t.endAt&&!function(i,u,l){const f=um(i,u,l);return i.inclusive?f>=0:f>0}(t.endAt,Ah(t),r)));var t,r}function Xx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jx(n){return(e,t)=>{let r=!1;for(const i of Ah(n)){const u=i1(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function i1(n,e,t){const r=n.field.isKeyField()?nt.comparator(e.key,t.key):function(i,u,l){const f=u.data.field(i),y=l.data.field(i);return null!==f&&null!==y?ql(f,y):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}function eC(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(e)?"-0":e}}function tC(n){return{integerValue:""+n}}function nC(n,e){return lE(e)?tC(e):eC(n,e)}class Xy{constructor(){this._=void 0}}function s1(n,e,t){return n instanceof Dc?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Zl?Jy(n,e):n instanceof ou?ev(n,e):function(r,i){const u=su(r,i),l=IE(u)+IE(r.yt);return xh(u)&&xh(r.yt)?tC(l):eC(r.It,l)}(n,e)}function o1(n,e,t){return n instanceof Zl?Jy(n,e):n instanceof ou?ev(n,e):t}function su(n,e){return n instanceof Sc?xh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Dc extends Xy{}class Zl extends Xy{constructor(e){super(),this.elements=e}}function Jy(n,e){const t=au(e);for(const r of n.elements)t.some(i=>aa(i,r))||t.push(r);return{arrayValue:{values:t}}}class ou extends Xy{constructor(e){super(),this.elements=e}}function ev(n,e){let t=au(e);for(const r of n.elements)t=t.filter(i=>!aa(i,r));return{arrayValue:{values:t}}}class Sc extends Xy{constructor(e,t){super(),this.It=e,this.yt=t}}function IE(n){return yr(n.integerValue||n.doubleValue)}function au(n){return yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Mh{constructor(e,t){this.field=e,this.transform=t}}class iC{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hm{}function bp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ql(n.key,Qn.none()):new uu(n.key,n.data,Qn.none());{const t=n.data,r=ni.empty();let i=new Tn(rr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new ua(n.key,r,new Ds(i.toArray()),Qn.none())}}function kh(n,e,t){n instanceof uu?function(r,i,u){const l=r.value.clone(),f=pm(r.fieldTransforms,i,u.transformResults);l.setAll(f),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ua?function(r,i,u){if(!dm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=pm(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(tv(r)),f.setAll(l),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yl(n,e,t,r){return n instanceof uu?function(i,u,l,f){if(!dm(i.precondition,u))return l;const y=i.value.clone(),E=gm(i.fieldTransforms,f,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ua?function(i,u,l,f){if(!dm(i.precondition,u))return l;const y=gm(i.fieldTransforms,f,u),E=u.data;return E.setAll(tv(i)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,dm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Ph(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=su(r.transform,i||null);null!=u&&(null===t&&(t=ni.empty()),t.set(r.field,u))}return t||null}function fm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&_h(t,r,(i,u)=>function rC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zl&&r instanceof Zl||t instanceof ou&&r instanceof ou?_h(t.elements,r.elements,aa):t instanceof Sc&&r instanceof Sc?aa(t.yt,r.yt):t instanceof Dc&&r instanceof Dc);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class uu extends hm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ua extends hm{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function tv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pm(n,e,t){const r=new Map;$t(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,f=e.data.field(u.field);r.set(u.field,o1(l,f,t[i]))}return r}function gm(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,s1(u,l,e))}return r}class Ql extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ip extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sC{constructor(e){this.count=e}}var Kr,mn;function nv(n){switch(n){default:return _t();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function xE(n){if(void 0===n)return Tr("GRPC error has no .code"),Fe.UNKNOWN;switch(n){case Kr.OK:return Fe.OK;case Kr.CANCELLED:return Fe.CANCELLED;case Kr.UNKNOWN:return Fe.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return Fe.INTERNAL;case Kr.UNAVAILABLE:return Fe.UNAVAILABLE;case Kr.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case Kr.NOT_FOUND:return Fe.NOT_FOUND;case Kr.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case Kr.ABORTED:return Fe.ABORTED;case Kr.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case Kr.DATA_LOSS:return Fe.DATA_LOSS;default:return _t()}}(mn=Kr||(Kr={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}const CE=new mr(nt.comparator);function Yi(){return CE}const Qi=new mr(nt.comparator);function Nh(...n){let e=Qi;for(const t of n)e=e.insert(t.key,t);return e}function DE(n){let e=Qi;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lu(){return Xl()}function SE(){return Xl()}function Xl(){return new cu(n=>n.toString(),(n,e)=>n.isEqual(e))}const TE=new mr(nt.comparator),oC=new Tn(nt.comparator);function Qt(...n){let e=oC;for(const t of n)e=e.add(t);return e}const aC=new Tn(Kt);function xp(){return aC}class Cp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cp(Bt.min(),i,xp(),Yi(),Qt())}}class Oh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Oh(r,t,Qt(),Qt(),Qt())}}class mm{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class AE{constructor(e,t){this.targetId=e,this.At=t}}class rv{constructor(e,t,r=Hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iv{constructor(){this.Rt=0,this.bt=ym(),this.Pt=Hr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Qt(),t=Qt(),r=Qt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_t()}}),new Oh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ym()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class uC{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Yi(),this.qt=Io(),this.Kt=new Tn(Kt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(_p(u))if(0===r){const l=new nt(u.path);this.jt(t,l,Yn.newNoDocument(l,Bt.min()))}else $t(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const f=this.Xt(l);if(f){if(u.current&&_p(f.target)){const y=new nt(f.target.path);null!==this.Ut.get(y)||this.ee(l,y)||this.jt(l,y,Yn.newNoDocument(y,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Qt();this.qt.forEach((u,l)=>{let f=!0;l.forEachWhile(y=>{const E=this.Xt(y);return!E||2===E.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const i=new Cp(e,t,this.Kt,this.Ut,r);return this.Ut=Yi(),this.qt=Io(),this.Kt=new Tn(Kt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new iv,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Tn(Kt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new iv),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Io(){return new mr(nt.comparator)}function ym(){return new mr(nt.comparator)}const cC={asc:"ASCENDING",desc:"DESCENDING"},lC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class a1{constructor(e,t){this.databaseId=e,this.gt=t}}function Fh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function dC(n,e){return Fh(n,e.toTimestamp())}function ri(n){return $t(!!n),Bt.fromTimestamp(function(e){const t=nu(e);return new Zn(t.seconds,t.nanos)}(n))}function Dp(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ME(n){const e=ln.fromString(n);return $t(yC(e)),e}function Sp(n,e){return Dp(n.databaseId,e.path)}function Ss(n,e){const t=ME(e);if(t.get(1)!==n.databaseId.projectId)throw new ze(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ze(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(_m(t))}function Tp(n,e){return Dp(n.databaseId,e)}function Ap(n){const e=ME(n);return 4===e.length?ln.emptyPath():_m(e)}function vm(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _m(n){return $t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function hC(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function sv(n,e,t){const r=Ss(n,e.name),i=ri(e.updateTime),u=new ni({mapValue:{fields:e.fields}}),l=Yn.newFoundDocument(r,i,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Lh(n,e){let t;if(e instanceof uu)t={update:hC(n,e.key,e.value)};else if(e instanceof Ql)t={delete:Sp(n,e.key)};else if(e instanceof ua)t={update:hC(n,e.key,e.data),updateMask:mC(e.fieldMask)};else{if(!(e instanceof Ip))return _t();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Dc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ou)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sc)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:dC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:_t()),t;var i}function Rp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Qn.updateTime(ri(i.updateTime)):void 0!==i.exists?Qn.exists(i.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let f=null;"setToServerValue"in l?($t("REQUEST_TIME"===l.setToServerValue),f=new Dc):"appendMissingElements"in l?f=new Zl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new ou(l.removeAllFromArray.values||[]):"increment"in l?f=new Sc(u,l.increment):_t();const y=rr.fromServerFormat(l.fieldPath);return new Mh(y,f)}(n,i)):[];var i;if(e.update){const i=Ss(n,e.update.name),u=new ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ds((e.updateMask.fieldPaths||[]).map(E=>rr.fromServerFormat(E)));return new ua(i,u,l,t,r)}return new uu(i,u,t,r)}if(e.delete){const i=Ss(n,e.delete);return new Ql(i,t)}if(e.verify){const i=Ss(n,e.verify);return new Ip(i,t)}return _t()}function Mp(n,e){return{documents:[Tp(n,e.path)]}}function Uh(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Tp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const E=y.map(C=>function(A){if("=="===A.op){if(hE(A.value))return{unaryFilter:{field:Vh(A.field),op:"IS_NAN"}};if(jy(A.value))return{unaryFilter:{field:Vh(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(hE(A.value))return{unaryFilter:{field:Vh(A.field),op:"IS_NOT_NAN"}};if(jy(A.value))return{unaryFilter:{field:Vh(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vh(A.field),op:pC(A.op),value:A.value}}}(C));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(E=>{return{field:Vh((C=E).field),direction:NE(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(E=e.limit,n.gt||zl(E)?E:{value:E});var E,f,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Bh(n){let e=Ap(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$t(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=wm(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new iu(ca((A=C).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(C){let A;return A="object"==typeof C?C.value:C,zl(A)?null:A}(t.limit));let y=null;var C;t.startAt&&(y=new bo((C=t.startAt).values||[],!!C.before));let E=null;return t.endAt&&(E=function(C){return new bo(C.values||[],!C.before)}(t.endAt)),vE(e,i,l,u,f,"F",y,E)}function wm(n){return n?void 0!==n.unaryFilter?[u1(n)]:void 0!==n.fieldFilter?[gC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wm(e)).reduce((e,t)=>e.concat(t)):_t():[]}function NE(n){return cC[n]}function pC(n){return lC[n]}function Vh(n){return{fieldPath:n.canonicalString()}}function ca(n){return rr.fromServerFormat(n.fieldPath)}function gC(n){return li.create(ca(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}function u1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ca(n.unaryFilter.field);return li.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ca(n.unaryFilter.field);return li.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ca(n.unaryFilter.field);return li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ca(n.unaryFilter.field);return li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function mC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OE(e)),e=vC(n.get(t),e);return OE(e)}function vC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function OE(n){return n+"\x01\x01"}function xo(n){const e=n.length;if($t(e>=2),2===e)return $t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&_t(),n.charAt(l+1)){case"\x01":const f=n.substring(u,l);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:_t()}u=l+2}return new ln(r)}const ov=["userId","batchId"];function Em(n,e){return[n,Ri(e)]}function bm(n,e,t){return[n,Ri(e),t]}const _C={},wC=["prefixPath","collectionGroup","readTime","documentId"],EC=["prefixPath","collectionGroup","documentId"],bC=["collectionGroup","readTime","prefixPath","documentId"],IC=["canonicalId","targetId"],xC=["targetId","path"],Im=["path","targetId"],Jl=["collectionId","parent"],c1=["indexId","uid"],kp=["uid","sequenceNumber"],CC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DC=["indexId","uid","orderedDocumentKey"],av=["userId","collectionPath","documentId"],SC=["userId","collectionPath","largestBatchId"],la=["userId","collectionGroup","largestBatchId"],Hh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_i=[...Hh,"documentOverlays"],Tc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pp=Tc,Zs=[...Pp,"indexConfiguration","indexState","indexEntries"];class Np extends zx{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ar(n,e){const t=at(n);return qs.M(t.ie,e)}class Ac{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&kh(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=SE();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let f=this.applyToLocalView(l,u.mutatedFields);f=t.has(i.key)?null:f;const y=bp(l,f);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&_h(this.mutations,e.mutations,(t,r)=>fm(t,r))&&_h(this.baseMutations,e.baseMutations,(t,r)=>fm(t,r))}}class Rc{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$t(e.mutations.length===r.length);let i=TE;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new Rc(e,t,r,i)}}class Mc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ts{constructor(e,t,r,i,u=Bt.min(),l=Bt.min(),f=Hr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ed{constructor(e){this.re=e}}function td(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sp(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Fh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kc(e.version)};else{if(!e.isUnknownDocument())return _t();r.unknownDocument={path:t.path.toArray(),version:kc(e.version)}}var i,u;return r}function hu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pc(n){const e=new Zn(n.seconds,n.nanoseconds);return Bt.fromTimestamp(e)}function Nc(n,e){const t=(e.baseMutations||[]).map(u=>Rp(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Rp(n.re,u)),i=Zn.fromMillis(e.localWriteTimeMs);return new Ac(e.batchId,i,t,r)}function $h(n){const e=Pc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pc(n.lastLimboFreeSnapshotVersion):Bt.min();let r;var i;return void 0!==n.query.documents?($t(1===(i=n.query).documents.length),r=Zi(Th(Ap(i.documents[0])))):r=Zi(Bh(n.query)),new Ts(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Hr.fromBase64String(n.resumeToken))}function uv(n,e){const t=kc(e.snapshotVersion),r=kc(e.lastLimboFreeSnapshotVersion);let i;i=_p(e.target)?Mp(n.re,e.target):Uh(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ch(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xm(n){const e=Bh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wp(e,e.limit,"L"):e}function Cm(n,e){return new Mc(e.largestBatchId,Rp(n.re,e.overlayMutation))}function cv(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function lv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kc(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class TC{getBundleMetadata(e,t){return FE(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Pc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return FE(e).put({bundleId:(r=t).id,createTime:kc(ri(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xm(i.bundledQuery),readTime:Pc(i.readTime)};var i})}saveNamedQuery(e,t){return dv(e).put({name:(r=t).name,readTime:kc(ri(r.readTime)),bundledQuery:r.bundledQuery});var r}}function FE(n){return ar(n,"bundles")}function dv(n){return ar(n,"namedQueries")}class Dm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Dm(e,t.uid||"")}getOverlay(e,t){return zh(e).get(cv(this.userId,t)).next(r=>r?Cm(this.It,r):null)}getOverlays(e,t){const r=lu();return ke.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const f=new Mc(t,l);i.push(this.ue(e,f))}),ke.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ri(l.getCollectionPath())));const u=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(zh(e).Y("collectionPathOverlayIndex",f))}),ke.waitFor(u)}getOverlaysForCollection(e,t,r){const i=lu(),u=Ri(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zh(e).W("collectionPathOverlayIndex",l).next(f=>{for(const y of f){const E=Cm(this.It,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=lu();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zh(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,E,C)=>{const A=Cm(this.It,E);u.size()<i||A.largestBatchId===l?(u.set(A.getKey(),A),l=A.largestBatchId):C.done()}).next(()=>u)}ue(e,t){return zh(e).put(function(r,i,u){const[l,f,y]=cv(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Lh(r.re,u.mutation)}}(this.It,this.userId,t))}}function zh(n){return ar(n,"documentOverlays")}class fu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(yr(e.integerValue));else if("doubleValue"in e){const r=yr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Gl(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(jl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?fE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):_t()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),nt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function hv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function LE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=hv(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}fu.Te=new fu;class Sm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=LE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=LE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Tm{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class fv{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Op{constructor(){this.Be=new Sm,this.Le=new Tm(this.Be),this.Ue=new fv(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class da{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new da(this.indexId,this.documentKey,this.arrayValue,r)}}function ha(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pv(n.arrayValue,e.arrayValue),0!==t?t:(t=pv(n.directionalValue,e.directionalValue),0!==t?t:nt.comparator(n.documentKey,e.documentKey)))}function pv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Oy(e);if(void 0!==t&&!this.ze(t))return!1;const r=Bl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gv{constructor(){this.Ye=new Am}addToCollectionParentIndex(e,t){return this.Ye.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(Cs.min())}updateCollectionGroup(e,t,r){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class Am{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(ln.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(ln.comparator)).toArray()}}const Fp=new Uint8Array(0);class mv{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Am,this.Ze=new cu(r=>Ch(r),(r,i)=>Sh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ri(i)};return yv(e).put(u)}return ke.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iE(t),""],!1,!0);return yv(e).W(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(xo(l.parent))}return r})}addFieldIndex(e,t){const r=Up(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=Gh(e);return u.next(f=>{l.put(lv(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Up(e),i=Gh(e),u=Lp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Lp(e);let i=!0;const u=new Map;return ke.forEach(this.tn(t),l=>this.en(e,l).next(f=>{i&&(i=!!f),u.set(l,f)})).next(()=>{if(i){let l=Qt();const f=[];return ke.forEach(u,(y,E)=>{var C;qe("IndexedDbIndexManager",`Using index ${C=y,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${Ch(t)}`);const A=function(ut,st){const Rt=Oy(st);if(void 0===Rt)return null;for(const kt of Kl(ut,Rt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(E,y),W=function(ut,st){const Rt=new Map;for(const kt of Bl(st))for(const an of Kl(ut,kt.fieldPath))switch(an.op){case"==":case"in":Rt.set(kt.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return Rt.set(kt.fieldPath.canonicalString(),an.value),Array.from(Rt.values())}return null}(E,y),oe=function(ut,st){const Rt=[];let kt=!0;for(const an of Bl(st)){const Qr=0===an.kind?Ks(ut,an.fieldPath,ut.startAt):Gy(ut,an.fieldPath,ut.startAt);Rt.push(Qr.value),kt&&(kt=Qr.inclusive)}return new bo(Rt,kt)}(E,y),de=function(ut,st){const Rt=[];let kt=!0;for(const an of Bl(st)){const Qr=0===an.kind?Gy(ut,an.fieldPath,ut.endAt):Ks(ut,an.fieldPath,ut.endAt);Rt.push(Qr.value),kt&&(kt=Qr.inclusive)}return new bo(Rt,kt)}(E,y),Te=this.nn(y,E,oe),Pe=this.nn(y,E,de),tt=this.sn(y,E,W),dt=this.rn(y.indexId,A,Te,oe.inclusive,Pe,de.inclusive,tt);return ke.forEach(dt,ut=>r.J(ut,t.limit).next(st=>{st.forEach(Rt=>{const kt=nt.fromSegments(Rt.documentKey);l.has(kt)||(l=l.add(kt),f.push(kt))})}))}).next(()=>f)}return ke.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,l,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),E=y/(null!=t?t.length:1),C=[];for(let A=0;A<y;++A){const W=t?this.on(t[A/E]):Fp,oe=this.un(e,W,r[A%E],i),de=this.cn(e,W,u[A%E],l),Te=f.map(Pe=>this.un(e,W,Pe,!0));C.push(...this.createRange(oe,de,Te))}return C}un(e,t,r,i){const u=new da(e,nt.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new da(e,nt.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new UE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const f of u)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;return ke.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(l){let f=new Tn(rr.comparator),y=!1;for(const E of l.filters){const C=E;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?y=!0:f=f.add(C.field))}for(const E of l.orderBy)E.field.isKeyField()||(f=f.add(E.field));return f.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Op;for(const i of Bl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.qe(i.kind);fu.Te.ce(u,l)}return r.$e()}on(e){const t=new Op;return fu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Op;return fu.Te.ce(xc(this.databaseId,t),r.qe(function(i){const u=Bl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Op);let u=0;for(const l of Bl(e)){const f=r[u++];for(const y of i)if(this.ln(t,l.fieldPath)&&yp(f))i=this.fn(i,l,f);else{const E=y.qe(l.kind);fu.Te.ce(f,E)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const f of i){const y=new Op;y.seed(f.$e()),fu.Te.ce(l,y.qe(t.kind)),u.push(y)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof li&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Up(e),i=Gh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ke.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{l.push(function(E,C){const A=C?new mp(C.sequenceNumber,new Cs(Pc(C.readTime),new nt(xo(C.documentKey)),C.largestBatchId)):mp.empty(),W=E.fields.map(([oe,de])=>new gp(rr.fromServerFormat(oe),de));return new rm(E.indexId,E.collectionGroup,W,A)}(f,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Up(e),u=Gh(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ke.forEach(f,y=>u.put(lv(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ke.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ke.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ke.forEach(f,y=>this.wn(e,i,y).next(E=>{const C=this.mn(u,y);return E.isEqual(C)?ke.resolve():this.gn(e,u,y,E,C)}))))})}yn(e,t,r,i){return Lp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Lp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Lp(e);let u=new Tn(ha);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,f)=>{u=u.add(new da(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}mn(e,t){let r=new Tn(ha);const i=this.an(t,e);if(null==i)return r;const u=Oy(t);if(null!=u){const l=e.data.field(u.fieldPath);if(yp(l))for(const f of l.arrayValue.values||[])r=r.add(new da(t.indexId,e.key,this.on(f),i))}else r=r.add(new da(t.indexId,e.key,Fp,i));return r}gn(e,t,r,i,u){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,y,E,C,A){const W=f.getIterator(),oe=y.getIterator();let de=Hl(W),Te=Hl(oe);for(;de||Te;){let Pe=!1,tt=!1;if(de&&Te){const dt=E(de,Te);dt<0?tt=!0:dt>0&&(Pe=!0)}else null!=de?tt=!0:Pe=!0;Pe?(C(Te),Te=Hl(oe)):tt?(A(de),de=Hl(W)):(de=Hl(W),Te=Hl(oe))}}(i,u,ha,f=>{l.push(this.yn(e,t,r,f))},f=>{l.push(this.pn(e,t,r,f))}),ke.waitFor(l)}_n(e){let t=1;return Gh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>ha(l,f)).filter((l,f,y)=>!f||0!==ha(l,y[f-1]));const i=[];i.push(e);for(const l of r){const f=ha(l,e),y=ha(l,t);if(0===f)i[0]=e.Ke();else if(f>0&&y<0)i.push(l),i.push(l.Ke());else if(y>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2)u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Fp,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Fp,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vv)}getMinOffset(e,t){return ke.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||_t())).next(vv)}}function yv(n){return ar(n,"collectionParents")}function Lp(n){return ar(n,"indexEntries")}function Up(n){return ar(n,"indexConfiguration")}function Gh(n){return ar(n,"indexState")}function vv(n){$t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Fy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cs(e.readTime,e.documentKey,t)}const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let f=0;const y=r.Z({range:l},(C,A,W)=>(f++,W.delete()));u.push(y.next(()=>{$t(1===f)}));const E=[];for(const C of t.mutations){const A=bm(e,C.key.path,t.batchId);u.push(i.delete(A)),E.push(C.key)}return ke.waitFor(u).next(()=>E)}function Rm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _t();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class Bp{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){$t(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Bp(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).Z({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=nd(e),l=pu(e);return l.add({}).next(f=>{$t("number"==typeof f);const y=new Ac(f,t,r,i),E=function(W,oe,de){const Te=de.baseMutations.map(tt=>Lh(W.re,tt)),Pe=de.mutations.map(tt=>Lh(W.re,tt));return{userId:oe,batchId:de.batchId,localWriteTimeMs:de.localWriteTime.toMillis(),baseMutations:Te,mutations:Pe}}(this.It,this.userId,y),C=[];let A=new Tn((W,oe)=>Kt(W.canonicalString(),oe.canonicalString()));for(const W of i){const oe=bm(this.userId,W.key.path,f);A=A.add(W.key.path.popLast()),C.push(l.put(E)),C.push(u.put(oe,_C))}return A.forEach(W=>{C.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.In[f]=y.keys()}),ke.waitFor(C).next(()=>y)})}lookupMutationBatch(e,t){return pu(e).get(t).next(r=>r?($t(r.userId===this.userId),Nc(this.It,r)):null)}Tn(e,t){return this.In[t]?ke.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return pu(e).Z({index:"userMutationsIndex",range:i},(l,f,y)=>{f.userId===this.userId&&($t(f.batchId>=r),u=Nc(this.It,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Nc(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Em(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return nd(e).Z({range:i},(l,f,y)=>{const[E,C,A]=l,W=xo(C);if(E===this.userId&&t.path.isEqual(W))return pu(e).get(A).next(oe=>{if(!oe)throw _t();$t(oe.userId===this.userId),u.push(Nc(this.It,oe))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Kt);const i=[];return t.forEach(u=>{const l=Em(this.userId,u.path),f=IDBKeyRange.lowerBound(l),y=nd(e).Z({range:f},(E,C,A)=>{const[W,oe,de]=E,Te=xo(oe);W===this.userId&&u.path.isEqual(Te)?r=r.add(de):A.done()});i.push(y)}),ke.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Em(this.userId,r),l=IDBKeyRange.lowerBound(u);let f=new Tn(Kt);return nd(e).Z({range:l},(y,E,C)=>{const[A,W,oe]=y,de=xo(W);A===this.userId&&r.isPrefixOf(de)?de.length===i&&(f=f.add(oe)):C.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(pu(e).get(u).next(l=>{if(null===l)throw _t();$t(l.userId===this.userId),r.push(Nc(this.It,l))}))}),ke.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ke.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return nd(e).Z({range:r},(u,l,f)=>{if(u[0]===this.userId){const y=xo(u[1]);i.push(y)}else f.done()}).next(()=>{$t(0===i.length)})})}containsKey(e,t){return Mm(e,this.userId,t)}Rn(e){return wv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mm(n,e,t){const r=Em(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return nd(n).Z({range:u,X:!0},(f,y,E)=>{const[C,A,W]=f;C===e&&A===i&&(l=!0),E.done()}).next(()=>l)}function pu(n){return ar(n,"mutations")}function nd(n){return ar(n,"documentMutations")}function wv(n){return ar(n,"mutationQueues")}class Oc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Oc(0)}static vn(){return new Oc(-1)}}class VE{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Oc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Bt.fromTimestamp(new Zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>($t(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return rd(e).Z((l,f)=>{const y=$h(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ke.waitFor(u)).next(()=>i)}forEachTarget(e,t){return rd(e).Z((r,i)=>{const u=$h(i);t(u)})}Vn(e){return Ev(e).get("targetGlobalKey").next(t=>($t(null!==t),t))}Sn(e,t){return Ev(e).put("targetGlobalKey",t)}Dn(e,t){return rd(e).put(uv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ch(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return rd(e).Z({range:i,index:"queryTargetsIndex"},(l,f,y)=>{const E=$h(f);Sh(t,E.target)&&(u=E,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=gu(e);return t.forEach(l=>{const f=Ri(l.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ke.waitFor(i)}removeMatchingKeys(e,t,r){const i=gu(e);return ke.forEach(t,u=>{const l=Ri(u.path);return ke.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=gu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=gu(e);let u=Qt();return i.Z({range:r,X:!0},(l,f,y)=>{const E=xo(l[1]),C=new nt(E);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[iE(r)],!1,!0);let u=0;return gu(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],y,E)=>{0!==l&&(u++,E.done())}).next(()=>u>0)}se(e,t){return rd(e).get(t).next(r=>r?$h(r):null)}}function rd(n){return ar(n,"targets")}function Ev(n){return ar(n,"targetGlobal")}function gu(n){return ar(n,"targetDocuments")}function AC([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class RC{constructor(e){this.xn=e,this.buffer=new Tn(AC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ec(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tu(r)}yield t.Fn(3e5)}))}}class HE{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Ki.at);const r=new RC(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(_v)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,l,f,y,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(E=Date.now(),nm()<=vi.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${A} documents in `+(E-y)+`ms\nTotal Duration: ${E-C}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:A})))}}class kC{constructor(e,t){this.db=e,this.garbageCollector=new HE(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return vr(e,r)}removeReference(e,t,r){return vr(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vr(e,t)}Gn(e,t){return function(r,i){let u=!1;return wv(r).tt(l=>Mm(r,l,i).next(f=>(f&&(u=!0),ke.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(l,f)=>{if(f<=t){const y=this.Gn(e,l).next(E=>{if(!E)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Bt.min()),gu(e).delete([0,Ri(l.path)])))});i.push(y)}}).next(()=>ke.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vr(e,t)}Kn(e,t){const r=gu(e);let i,u=Ki.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:y,sequenceNumber:E})=>{0===l?(u!==Ki.at&&t(new nt(xo(i)),u),u=E,i=y):u=Ki.at}).next(()=>{u!==Ki.at&&t(new nt(xo(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vr(n,e){return gu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class bv{constructor(){this.changes=new cu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ke.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fc(e).put(r)}removeEntry(e,t,r){return Fc(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],hu(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return Fc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wh(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return Fc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wh(t))},(i,u)=>{r={document:this.jn(t,u),size:Rm(u)}}).next(()=>r)}getEntries(e,t){let r=Yi();return this.zn(e,t,(i,u)=>{const l=this.jn(i,u);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Yi(),i=new mr(nt.comparator);return this.zn(e,t,(u,l)=>{const f=this.jn(u,l);r=r.insert(u,f),i=i.insert(u,Rm(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ke.resolve();let i=new Tn(GE);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Wh(i.first()),Wh(i.last())),l=i.getIterator();let f=l.getNext();return Fc(e).Z({index:"documentKeyIndex",range:u},(y,E,C)=>{const A=nt.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&GE(f,A)<0;)r(f,null),f=l.getNext();f&&f.isEqual(A)&&(r(f,E),f=l.hasNext()?l.getNext():null),f?C.j(Wh(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),hu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fc(e).W(IDBKeyRange.bound(i,u,!0)).next(l=>{let f=Yi();for(const y of l){const E=this.jn(nt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(E.key,E)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=Yi();const l=id(t,r),f=id(t,Cs.max());return Fc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(y,E,C)=>{const A=this.jn(nt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(A.key,A),u.size===i&&C.done()}).next(()=>u)}newChangeBuffer(e){return new $E(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zE(e).get("remoteDocumentGlobalKey").next(t=>($t(!!t),t))}Qn(e,t){return zE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function jh(n,e){let t;if(e.document)t=sv(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=nt.fromSegments(e.noDocument.path),i=Pc(e.noDocument.readTime);t=Yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const r=nt.fromSegments(e.unknownDocument.path),i=Pc(e.unknownDocument.version);t=Yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Zn(r[0],r[1]);return Bt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Bt.min()))return r}return Yn.newInvalidDocument(e)}}function jE(n){return new PC(n)}class $E extends bv{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new cu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((u,l)=>Kt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const f=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,f.readTime)),l.isValidDocument()){const y=td(this.Yn.It,l);i=i.add(u.path.popLast()),r+=Rm(y)-f.size,t.push(this.Yn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=td(this.Yn.It,l.convertToNoDocument(Bt.min()));t.push(this.Yn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ke.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function zE(n){return ar(n,"remoteDocumentGlobal")}function Fc(n){return ar(n,"remoteDocumentsV14")}function Wh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function id(n,e){const t=e.documentKey.path.toArray();return[n,hu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Kt(t[u],r[u]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class NC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Iv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Yl(r.mutation,i,Ds.empty(),Zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Qt()){const i=lu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=Nh();return u.forEach((f,y)=>{l=l.insert(f,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=lu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let u=Yi();const l=Xl(),f=Xl();return t.forEach((y,E)=>{const C=r.get(E.key);i.has(E.key)&&(void 0===C||C.mutation instanceof ua)?u=u.insert(E.key,E):void 0!==C&&(l.set(E.key,C.mutation.getFieldMask()),Yl(C.mutation,E,C.mutation.getFieldMask(),Zn.now()))}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((E,C)=>l.set(E,C)),t.forEach((E,C)=>{var A;return f.set(E,new NC(C,null!==(A=l.get(E))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Xl();let i=new mr((l,f)=>l-f),u=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let C=r.get(y)||Ds.empty();C=f.applyToLocalView(E,C),r.set(y,C);const A=(i.get(f.batchId)||Qt()).add(y);i=i.insert(f.batchId,A)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,C=y.value,A=SE();C.forEach(W=>{if(!u.has(W)){const oe=bp(t.get(W),r.get(W));null!==oe&&A.set(W,oe),u=u.add(W)}}),l.push(this.documentOverlayCache.saveOverlays(e,E,A))}return ke.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return nt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ke.resolve(lu());let f=-1,y=u;return l.next(E=>ke.forEach(E,(C,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),u.get(C)?ke.resolve():this.getBaseDocument(e,C,A).next(W=>{y=y.insert(C,W)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,y,E,Qt())).next(C=>({batchId:f,changes:DE(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(r=>{let i=Nh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Nh();return this.indexManager.getCollectionParents(e,i).next(l=>ke.forEach(l,f=>{const y=(E=t,C=f.child(i),new Cc(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,C;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((C,A)=>{u=u.insert(C,A)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((f,y)=>{const E=y.getKey();null===i.get(E)&&(i=i.insert(E,Yn.newInvalidDocument(E)))});let l=Nh();return i.forEach((f,y)=>{const E=u.get(f);void 0!==E&&Yl(E.mutation,y,Ds.empty(),Zn.now()),bE(t,y)&&(l=l.insert(f,y))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ke.resolve(Yn.newInvalidDocument(t))}}class OC{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ke.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ri(r.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xm(r.bundledQuery),readTime:ri(r.readTime)}),ke.resolve();var r}}class WE{constructor(){this.overlays=new mr(nt.comparator),this.es=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lu();return ke.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ke.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ke.resolve()}getOverlaysForCollection(e,t,r){const i=lu(),u=t.length+1,l=new nt(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new mr((E,C)=>E-C);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let C=u.get(E.largestBatchId);null===C&&(C=lu(),u=u.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const f=lu(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,C)=>f.set(E,C)),!(f.size()>=i)););return ke.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Mc(t,r));let u=this.es.get(t);void 0===u&&(u=Qt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class qE{constructor(){this.ns=new Tn(Zr.ss),this.rs=new Tn(Zr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Zr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new nt(new ln([])),r=new Zr(t,e),i=new Zr(t,e+1),u=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new nt(new ln([])),r=new Zr(t,e),i=new Zr(t,e+1);let u=Qt();return this.rs.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Zr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return nt.comparator(e.key,t.key)||Kt(e._s,t._s)}static os(e,t){return Kt(e._s,t._s)||nt.comparator(e.key,t.key)}}class KE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Tn(Zr.ss)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const l=new Ac(u,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new Zr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ke.resolve(l)}lookupMutationBatch(e,t){return ke.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ke.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),i=new Zr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);u.push(f)}),ke.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Kt);return t.forEach(i=>{const u=new Zr(i,0),l=new Zr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],f=>{r=r.add(f._s)})}),ke.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;nt.isDocumentKey(u)||(u=u.child(""));const l=new Zr(new nt(u),0);let f=new Tn(Kt);return this.gs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y._s)),!0)},l),ke.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$t(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ke.forEach(t.mutations,i=>{const u=new Zr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Zr(t,0),i=this.gs.firstAfterOrEqual(r);return ke.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ke.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fa{constructor(e){this.Es=e,this.docs=new mr(nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ke.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Yn.newInvalidDocument(i))}),ke.resolve(r)}getAllFromCollection(e,t,r){let i=Yi();const u=new nt(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:f,value:{document:y}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Fy(oa(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ke.resolve(i)}getAllFromCollectionGroup(e,t,r,i){_t()}As(e,t){return ke.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FC(this)}getSize(e){return ke.resolve(this.size)}}class FC extends bv{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ke.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class LC{constructor(e){this.persistence=e,this.Rs=new cu(t=>Ch(t),Sh),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qE,this.targetCount=0,this.vs=Oc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ke.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Oc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Dn(t),ke.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ke.waitFor(u).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ke.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ke.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ke.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ke.resolve(r)}containsKey(e,t){return ke.resolve(this.Ps.containsKey(t))}}class Co{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ki(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new LC(this),this.indexManager=new gv,this.remoteDocumentCache=new fa(r=>this.referenceDelegate.xs(r)),this.It=new ed(t),this.Ns=new OC(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new KE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new Do(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return ke.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Do extends zx{constructor(e){super(),this.currentSequenceNumber=e}}class Ji{constructor(e){this.persistence=e,this.Fs=new qE,this.$s=null}static Bs(e){return new Ji(e)}get Ls(){if(this.$s)return this.$s;throw _t()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ke.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ls,r=>{const i=nt.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ke.or([()=>ke.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class ZE{constructor(e){this.It=e}$(e,t,r,i){const u=new Ly("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ov,{unique:!0}),f.createObjectStore("documentMutations"),xv(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ke.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),xv(e)),l=l.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,y){return y.store("mutations").W().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ov,{unique:!0});const C=y.store("mutations"),A=E.map(W=>C.put(W));return ke.waitFor(A)})}(e,u))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(u))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(u))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(u))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:av});y.createIndex("collectionPathOverlayIndex",SC,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",la,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:wC});y.createIndex("documentKeyIndex",EC),y.createIndex("collectionGroupIndex",bC)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:c1}).createIndex("sequenceNumberIndex",kp,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:CC}).createIndex("documentKeyIndex",DC,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Rm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ke.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>ke.forEach(f,y=>{$t(y.userId===u.userId);const E=Nc(this.It,y);return BE(e,u.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((l,f)=>{const y=new ln(l),E=[0,Ri(y)];u.push(t.get(E).next(C=>C?ke.resolve():t.put({targetId:0,path:Ri(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ke.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jl});const r=t.store("collectionParents"),i=new Am,u=l=>{if(i.add(l)){const f=l.lastSegment(),y=l.popLast();return r.put({collectionId:f,parent:Ri(y)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const y=new ln(l);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,y],E)=>{const C=xo(f);return u(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=$h(i),l=uv(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,l)=>{const f=t.store("remoteDocumentsV14"),y=(E=l,E.document?new nt(ln.fromString(E.document.name).popFirst(5)):E.noDocument?nt.fromSegments(E.noDocument.path):E.unknownDocument?nt.fromSegments(E.unknownDocument.path):_t()).path.toArray();var E;const C={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>ke.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=jE(this.It),u=new Co(Ji.Bs,this.It.re);return r.W().next(l=>{const f=new Map;return l.forEach(y=>{var E;let C=null!==(E=f.get(y.userId))&&void 0!==E?E:Qt();Nc(this.It,y).keys().forEach(A=>C=C.add(A)),f.set(y.userId,C)}),ke.forEach(f,(y,E)=>{const C=new Br(E),A=Dm.oe(this.It,C),W=u.getIndexManager(C),oe=Bp.oe(C,this.It,W,u.referenceDelegate);return new Iv(i,oe,A,W).recalculateAndSaveOverlaysForDocumentKeys(new Np(t,Ki.at),y).next()})})}}function xv(n){n.createObjectStore("targetDocuments",{keyPath:xC}).createIndex("documentTargetsIndex",Im,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IC,{unique:!0}),n.createObjectStore("targetGlobal")}const Cv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dv{constructor(e,t,r,i,u,l,f,y,E,C,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=f,this.Js=E,this.Ys=C,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=W=>Promise.resolve(),!Dv.C())throw new ze(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kC(this,i),this.ii=t+"main",this.It=new ed(y),this.ri=new qs(this.ii,this.Xs,new ZE(this.It)),this.Cs=new VE(this.referenceDelegate,this.It),this.remoteDocumentCache=jE(this.It),this.Ns=new TC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ze(Fe.FAILED_PRECONDITION,Cv);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ki(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ec(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Vp(e).get("owner").next(t=>ke.resolve(this.mi(t)))}gi(e){return km(e).delete(this.clientId)}yi(){var e=this;return(0,Me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ar(r,"clientMetadata");return i.W().next(u=>{const l=e.Ii(u,18e5),f=u.filter(y=>-1===l.indexOf(y));return ke.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ke.resolve(!0):Vp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ze(Fe.FAILED_PRECONDITION,Cv);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Np(t,Ki.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>km(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Bp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mv(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Dm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?Zs:14===l?Pp:13===l?Tc:12===l?_i:11===l?Hh:void _t();var l;let f;return this.ri.runTransaction(e,i,u,y=>(f=new Np(y,this.Ss?this.Ss.next():Ki.at),"readwrite-primary"===t?this.fi(f).next(E=>!!E||this.di(f)).next(E=>{if(!E)throw Tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ze(Fe.FAILED_PRECONDITION,$x);return r(f)}).next(E=>this.wi(f).next(()=>E)):this.Vi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Vi(e){return Vp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ze(Fe.FAILED_PRECONDITION,Cv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vp(e).put("owner",t)}static C(){return qs.C()}_i(e){const t=Vp(e);return t.get("owner").next(r=>this.mi(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ke.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Tt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Tr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vp(n){return ar(n,"owner")}function km(n){return ar(n,"clientMetadata")}function Hp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class sd{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Qt(),i=Qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new sd(e,t.fromCache,r,i)}}class YE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(_E(t))return ke.resolve(null);let r=Zi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=wp(t,null,"F"),r=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Qt(...u);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.Fi(t,f);return this.$i(t,E,l,y.readTime)?this.ki(e,wp(t,null,"F")):this.Bi(e,E,t,y)}))})))}Oi(e,t,r,i){return _E(t)||i.isEqual(Bt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,i)?this.Mi(e,t):(nm()<=vi.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ep(t)),this.Bi(e,l,t,Vl(i,-1)))})}Fi(e,t){let r=new Tn(Jx(e));return t.forEach((i,u)=>{bE(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return nm()<=vi.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",Ep(t)),this.Ni.getDocumentsMatchingQuery(e,t,Cs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class QE{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new mr(Kt),this.qi=new cu(u=>Ch(u),Sh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function XE(n,e,t,r){return new QE(n,e,t,r)}function Sv(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,Me.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],f=[];let y=Qt();for(const E of i){l.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}for(const E of u){f.push(E.batchId);for(const C of E.mutations)y=y.add(C.key)}return t.localDocuments.getDocuments(r,y).next(E=>({ji:E,removedBatchIds:l,addedBatchIds:f}))})})}),Pm.apply(this,arguments)}function Nm(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,y,E){const C=y.batch,A=C.keys();let W=ke.resolve();return A.forEach(oe=>{W=W.next(()=>E.getEntry(f,oe)).next(de=>{const Te=y.docVersions.get(oe);$t(null!==Te),de.version.compareTo(Te)<0&&(C.applyToRemoteDocument(de,y),de.isValidDocument()&&(de.setReadTime(y.commitVersion),E.addEntry(de)))})}),W.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Qt();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function JE(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function eb(n,e){const t=at(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((C,A)=>{const W=i.get(A);if(!W)return;f.push(t.Cs.removeMatchingKeys(u,C.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(u,C.addedDocuments,A)));let oe=W.withSequenceNumber(u.currentSequenceNumber);var de,Te,Pe;e.targetMismatches.has(A)?oe=oe.withResumeToken(Hr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):C.resumeToken.approximateByteSize()>0&&(oe=oe.withResumeToken(C.resumeToken,r)),i=i.insert(A,oe),Te=oe,Pe=C,(0===(de=W).resumeToken.approximateByteSize()||Te.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(u,oe))});let y=Yi(),E=Qt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),f.push(Tv(u,l,e.documentUpdates).next(C=>{y=C.Wi,E=C.zi})),!r.isEqual(Bt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(u).next(A=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(C)}return ke.waitFor(f).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,E)).next(()=>y)}).then(u=>(t.Ui=i,u))}function Tv(n,e,t){let r=Qt(),i=Qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Yi();return t.forEach((f,y)=>{const E=u.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Bt.min())?(e.removeEntry(f,y.readTime),l=l.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),l=l.insert(f,y)):qe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{Wi:l,zi:i}})}function Av(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mu(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ke.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Ts(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Lc(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,Me.Z)(function*(n,e,t){const r=at(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ec(l))throw l;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Om.apply(this,arguments)}function jp(n,e,t){const r=at(n);let i=Bt.min(),u=Qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,y,E){const C=at(f),A=C.qi.get(E);return void 0!==A?ke.resolve(C.Ui.get(A)):C.Cs.getTargetData(y,E)}(r,l,Zi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(y=>{u=y})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Bt.min(),t?u:Qt())).next(f=>(kv(r,Xx(e),f),{documents:f,Hi:u})))}function Rv(n,e){const t=at(n),r=at(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function Mv(n,e){const t=at(n),r=t.Ki.get(e)||Bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Vl(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kv(t,e,i),i))}function kv(n,e,t){let r=n.Ki.get(e)||Bt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Fm(){return Fm=(0,Me.Z)(function*(n,e,t,r){const i=at(n);let u=Qt(),l=Yi();for(const E of t){const C=e.Ji(E.metadata.name);E.document&&(u=u.add(C));const A=e.Yi(E);A.setReadTime(e.Xi(E.metadata.readTime)),l=l.insert(C,A)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield mu(i,(E=r,Zi(Th(ln.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>Tv(E,f,l).next(C=>(f.apply(E),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Cs.addMatchingKeys(E,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,C.Wi,C.zi)).next(()=>C.Wi)))}),Fm.apply(this,arguments)}function UC(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,Me.Z)(function*(n,e,t=Qt()){const r=yield mu(n,Zi(xm(e.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=ri(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(u,e);const f=r.withResumeToken(Hr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(u,f).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),Pv.apply(this,arguments)}function nb(n,e){return`firestore_clients_${n}_${e}`}function rb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Nv(n,e){return`firestore_targets_${n}_${e}`}class Lm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new ze(i.error.code,i.error.message))),l?new Lm(e,t,i.state,u):(Tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new ze(r.error.code,r.error.message))),u?new $p(e,r.state,i):(Tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Um{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=xp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=lE(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new Um(e,u):(Tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ov{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ov(t.clientId,t.onlineState):(Tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fv{constructor(){this.activeTargetIds=xp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lv{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new mr(Kt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=nb(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Fv),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Me.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(nb(e.persistenceKey,i));if(u){const l=Um.Zi(i,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Nv(this.persistenceKey,e));if(r){const i=$p.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let l=Ki.at;if(null!=u)try{const f=JSON.parse(u);$t("number"==typeof f),l=f}catch(f){Tr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Ki.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Lm(this.currentUser,e,t,r),u=rb(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=rb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Nv(this.persistenceKey,e),u=new $p(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Um.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Lm.Zi(new Br(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return $p.Zi(i,t)}yr(e){return Ov.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),l=[],f=[];return u.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=xp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ib{constructor(){this.Lr=new Fv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Fv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BC{qr(e){}shutdown(){}}class sb{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const VC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HC{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class jC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const l=this.ho(e,t);qe("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,u),this.fo(e,l,f,r).then(y=>(qe("RestConnection","Received: ",y),y),y=>{throw _c("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}_o(e,t,r,i,u,l){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+eu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${VC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,l)=>{const f=new tm;f.setWithCredentials(!0),f.listenOnce(Jw.COMPLETE,()=>{var E;try{switch(f.getLastErrorCode()){case hp.NO_ERROR:const C=f.getResponseJson();qe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case hp.TIMEOUT:qe("Connection",'RPC "'+e+'" timed out'),l(new ze(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case hp.HTTP_ERROR:const A=f.getStatus();if(qe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",f.getResponseText()),A>0){let W=f.getResponseJson();Array.isArray(W)&&(W=W[0]);const oe=null===(E=W)||void 0===E?void 0:E.error;if(oe&&oe.status&&oe.message){const de=function(Te){const Pe=Te.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(Pe)>=0?Pe:Fe.UNKNOWN}(oe.status);l(new ze(de,oe.message))}else l(new ze(Fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new ze(Fe.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{qe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XT(),l=Ox(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Fx({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=i.join("");qe("Connection","Creating WebChannel: "+y,f);const E=u.createWebChannel(y,f);let C=!1,A=!1;const W=new HC({Hr:de=>{A?qe("Connection","Not sending because WebChannel is closed:",de):(C||(qe("Connection","Opening WebChannel transport."),E.open(),C=!0),qe("Connection","WebChannel sending:",de),E.send(de))},Jr:()=>E.close()}),oe=(de,Te,Pe)=>{de.listen(Te,tt=>{try{Pe(tt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return oe(E,vh.EventType.OPEN,()=>{A||qe("Connection","WebChannel transport opened.")}),oe(E,vh.EventType.CLOSE,()=>{A||(A=!0,qe("Connection","WebChannel transport closed"),W.io())}),oe(E,vh.EventType.ERROR,de=>{A||(A=!0,_c("Connection","WebChannel transport errored:",de),W.io(new ze(Fe.UNAVAILABLE,"The operation could not be completed")))}),oe(E,vh.EventType.MESSAGE,de=>{var Te;if(!A){const Pe=de.data[0];$t(!!Pe);const tt=Pe,dt=tt.error||(null===(Te=tt[0])||void 0===Te?void 0:Te.error);if(dt){qe("Connection","WebChannel received error:",dt);const ut=dt.status;let st=function(kt){const an=Kr[kt];if(void 0!==an)return xE(an)}(ut),Rt=dt.message;void 0===st&&(st=Fe.INTERNAL,Rt="Unknown error status: "+ut+" with message "+dt.message),A=!0,W.io(new ze(st,Rt)),E.close()}else qe("Connection","WebChannel received:",Pe),W.ro(Pe)}}),oe(l,eE.STAT_EVENT,de=>{de.stat===vc.PROXY?qe("Connection","Detected buffering proxy"):de.stat===vc.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.so()},0),W}}function ob(){return typeof window<"u"?window:null}function zp(){return typeof document<"u"?document:null}function qh(n){return new a1(n,!0)}class Bm{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Uv{constructor(e,t,r,i,u,l,f,y){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Bm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Fe.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new ze(Fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ab extends Uv{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function PE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:_t(),i=e.targetChange.targetIds||[],u=function(y,E){return y.gt?($t(void 0===E||"string"==typeof E),Hr.fromBase64String(E||"")):($t(void 0===E||E instanceof Uint8Array),Hr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(y){const E=void 0===y.code?Fe.UNKNOWN:xE(y.code);return new ze(E,y.message||"")}(l);t=new rv(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ss(n,r.document.name),u=ri(r.document.updateTime),l=new ni({mapValue:{fields:r.document.fields}}),f=Yn.newFoundDocument(i,u,l);t=new mm(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ss(n,r.document),u=r.readTime?ri(r.readTime):Bt.min(),l=Yn.newNoDocument(i,u);t=new mm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ss(n,r.document);t=new mm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _t();{const r=e.filter,u=new sC(r.count||0);t=new AE(r.targetId,u)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Bt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Bt.min():u.readTime?ri(u.readTime):Bt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=vm(this.It),t.addTarget=function(i,u){let l;const f=u.target;return l=_p(f)?{documents:Mp(i,f)}:{query:Uh(i,f)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=RE(i,u.resumeToken):u.snapshotVersion.compareTo(Bt.min())>0&&(l.readTime=Fh(i,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function fC(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=vm(this.It),t.removeTarget=e,this.Bo(t)}}class ub extends Uv{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function du(n,e){return n&&n.length>0?($t(void 0!==e),n.map(t=>function(r,i){let u=ri(r.updateTime?r.updateTime:i);return u.isEqual(Bt.min())&&(u=ri(i)),new iC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.Zo(r,t)}return $t(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=vm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Lh(this.It,r))};this.Bo(t)}}class cb extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new ze(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ze(Fe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ze(Fe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class db{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Tr(t),this.ou=!1):qe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hb{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(f=>{r.enqueueAndForget((0,Me.Z)(function*(){var y;Ct(l)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Me.Z)(function*(E){const C=at(E);C._u.add(4),yield Kh(C),C.gu.set("Unknown"),C._u.delete(4),yield So(C)}),function(E){return y.apply(this,arguments)})(l))}))}),this.gu=new db(r,i)}}function So(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,Me.Z)(function*(n){if(Ct(n))for(const e of n.wu)yield e(!0)}),Bv.apply(this,arguments)}function Kh(n){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,Me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Uc.apply(this,arguments)}function Vv(n,e){const t=at(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),pb(t)?Hm(t):pa(t).ko()&&fb(t,e))}function od(n,e){const t=at(n),r=pa(t);t.du.delete(e),r.ko()&&Hv(t,e),0===t.du.size&&(r.ko()?r.Fo():Ct(t)&&t.gu.set("Unknown"))}function fb(n,e){n.yu.Mt(e.targetId),pa(n).zo(e)}function Hv(n,e){n.yu.Mt(e),pa(n).Ho(e)}function Hm(n){n.yu=new uC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),pa(n).start(),n.gu.uu()}function pb(n){return Ct(n)&&!pa(n).No()&&n.du.size>0}function Ct(n){return 0===at(n)._u.size}function gb(n){n.yu=void 0}function $C(n){return jv.apply(this,arguments)}function jv(){return jv=(0,Me.Z)(function*(n){n.du.forEach((e,t)=>{fb(n,e)})}),jv.apply(this,arguments)}function Zh(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,Me.Z)(function*(n,e){gb(n),pb(n)?(n.gu.hu(e),Hm(n)):n.gu.set("Unknown")}),$v.apply(this,arguments)}function jm(n,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,Me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof rv&&2===e.state&&e.cause)try{yield(r=(0,Me.Z)(function*(i,u){const l=u.cause;for(const f of u.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xn(n,r)}else if(e instanceof mm?n.yu.Gt(e):e instanceof AE?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Bt.min()))try{const r=yield JE(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.yu.te(u);return l.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.du.get(y);E&&i.du.set(y,E.withResumeToken(f.resumeToken,u))}}),l.targetMismatches.forEach(f=>{const y=i.du.get(f);if(!y)return;i.du.set(f,y.withResumeToken(Hr.EMPTY_BYTE_STRING,y.snapshotVersion)),Hv(i,f);const E=new Ts(y.target,f,1,y.sequenceNumber);fb(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield Xn(n,r)}var r}),Yh.apply(this,arguments)}function Xn(n,e,t){return mb.apply(this,arguments)}function mb(){return mb=(0,Me.Z)(function*(n,e,t){if(!Ec(e))throw e;n._u.add(1),yield Kh(n),n.gu.set("Offline"),t||(t=()=>JE(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield So(n)}))}),mb.apply(this,arguments)}function zv(n,e){return e().catch(t=>Xn(n,t,e))}function ad(n){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Me.Z)(function*(n){const e=at(n),t=Ys(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;yb(e);)try{const i=yield Av(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,vb(e,i)}catch(i){yield Xn(e,i)}Wv(e)&&qv(e)}),Gv.apply(this,arguments)}function yb(n){return Ct(n)&&n.fu.length<10}function vb(n,e){n.fu.push(e);const t=Ys(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Wv(n){return Ct(n)&&!Ys(n).No()&&n.fu.length>0}function qv(n){Ys(n).start()}function zC(n){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Me.Z)(function*(n){Ys(n).eu()}),Kv.apply(this,arguments)}function GC(n){return ud.apply(this,arguments)}function ud(){return ud=(0,Me.Z)(function*(n){const e=Ys(n);for(const t of n.fu)e.Xo(t.mutations)}),ud.apply(this,arguments)}function WC(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,Me.Z)(function*(n,e,t){const r=n.fu.shift(),i=Rc.from(r,e,t);yield zv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ad(n)}),Zv.apply(this,arguments)}function qC(n,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,Me.Z)(function*(n,e){var t;e&&Ys(n).Yo&&(yield(t=(0,Me.Z)(function*(r,i){if(nv(u=i.code)&&u!==Fe.ABORTED){const l=r.fu.shift();Ys(r).Mo(),yield zv(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield ad(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Wv(n)&&qv(n)}),Qh.apply(this,arguments)}function Yv(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,Me.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Ct(t);t._u.add(3),yield Kh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield So(t)}),$m.apply(this,arguments)}function zm(n,e){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,Me.Z)(function*(n,e){const t=at(n);e?(t._u.delete(2),yield So(t)):e||(t._u.add(2),yield Kh(t),t.gu.set("Unknown"))}),Qv.apply(this,arguments)}function pa(n){return n.pu||(n.pu=function(e,t,r){const i=at(e);return i.su(),new ab(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:$C.bind(null,n),Zr:Zh.bind(null,n),Wo:jm.bind(null,n)}),n.wu.push(function(){var e=(0,Me.Z)(function*(t){t?(n.pu.Mo(),pb(n)?Hm(n):n.gu.set("Unknown")):(yield n.pu.stop(),gb(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ys(n){return n.Iu||(n.Iu=function(e,t,r){const i=at(e);return i.su(),new ub(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:zC.bind(null,n),Zr:qC.bind(null,n),tu:GC.bind(null,n),Zo:WC.bind(null,n)}),n.wu.push(function(){var e=(0,Me.Z)(function*(t){t?(n.Iu.Mo(),yield ad(n)):(yield n.Iu.stop(),n.fu.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Xv{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,f=new Xv(e,t,l,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ze(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),Ec(n))return new ze(Fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Jh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=Nh(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new Jh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jv{constructor(){this.Tu=new mr(nt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):_t():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class cd{constructor(e,t,r,i,u,l,f,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new cd(e,t,Jh.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _b{constructor(){this.Au=void 0,this.listeners=[]}}class KC{constructor(){this.queries=new cu(e=>EE(e),Rh),this.onlineState="Unknown",this.Ru=new Set}}function Gm(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,Me.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new _b),i)try{u.Au=yield t.onListen(r)}catch(l){const f=Xh(l,`Initialization of query '${Ep(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&Eb(t)}),e_.apply(this,arguments)}function t_(n,e){return wb.apply(this,arguments)}function wb(){return wb=(0,Me.Z)(function*(n,e){const t=at(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wb.apply(this,arguments)}function l1(n,e){const t=at(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&Eb(t)}function d1(n,e,t){const r=at(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Eb(n){n.Ru.forEach(e=>{e.next()})}class Wm{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new cd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class qm{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class bb{constructor(e){this.It=e}Ji(e){return Ss(this.It,e)}Yi(e){return e.metadata.exists?sv(this.It,e.document,!1):Yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ri(e)}}class ZC{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=n_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=ln.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new bb(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Qt()).add(u);t.set(l,f)}}return t}complete(){var e=this;return(0,Me.Z)(function*(){const t=yield function tb(n,e,t,r){return Fm.apply(this,arguments)}(e.localStore,new bb(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield UC(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function n_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ef{constructor(e){this.key=e}}class Ib{constructor(e){this.key=e}}class xb{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=Jx(e),this.Qu=new Jh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Jv,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,A)=>{const W=i.get(C),oe=bE(this.query,A)?A:null,de=!!W&&this.mutatedKeys.has(W.key),Te=!!oe&&(oe.hasLocalMutations||this.mutatedKeys.has(oe.key)&&oe.hasCommittedMutations);let Pe=!1;W&&oe?W.data.isEqual(oe.data)?de!==Te&&(r.track({type:3,doc:oe}),Pe=!0):this.Hu(W,oe)||(r.track({type:2,doc:oe}),Pe=!0,(y&&this.Gu(oe,y)>0||E&&this.Gu(oe,E)<0)&&(f=!0)):!W&&oe?(r.track({type:0,doc:oe}),Pe=!0):W&&!oe&&(r.track({type:1,doc:W}),Pe=!0,(y||E)&&(f=!0)),Pe&&(oe?(l=l.add(oe),u=Te?u.add(C):u.delete(C)):(l=l.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((E,C)=>function(A,W){const oe=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return oe(A)-oe(W)}(E.type,C.type)||this.Gu(E.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==u.length||y?{snapshot:new cd(this.query,e.Qu,i,u,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Jv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Ib(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new ef(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return cd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class YC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QC{constructor(e){this.key=e,this.nc=!1}}class XC{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new cu(f=>EE(f),Rh),this.rc=new Map,this.oc=new Set,this.uc=new mr(nt.comparator),this.cc=new Map,this.ac=new qE,this.hc={},this.lc=new Map,this.fc=Oc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Cb(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,Me.Z)(function*(n,e){const t=e0(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const l=yield mu(t.localStore,Zi(e));t.isPrimaryClient&&Vv(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield i_(t,e,r,"current"===f,l.resumeToken)}return i}),r_.apply(this,arguments)}function i_(n,e,t,r,i){return ld.apply(this,arguments)}function ld(){return ld=(0,Me.Z)(function*(n,e,t,r,i){n._c=(A,W,oe)=>{return(de=(0,Me.Z)(function*(Te,Pe,tt,dt){let ut=Pe.view.Wu(tt);ut.$i&&(ut=yield jp(Te.localStore,Pe.query,!1).then(({documents:kt})=>Pe.view.Wu(kt,ut)));const st=dt&&dt.targetChanges.get(Pe.targetId),Rt=Pe.view.applyChanges(ut,Te.isPrimaryClient,st);return c_(Te,Pe.targetId,Rt.Xu),Rt.snapshot}),function(Te,Pe,tt,dt){return de.apply(this,arguments)})(n,A,W,oe);var de};const u=yield jp(n.localStore,e,!0),l=new xb(e,u.Hi),f=l.Wu(u.documents),y=Oh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=l.applyChanges(f,n.isPrimaryClient,y);c_(n,t,E.Xu);const C=new YC(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),ld.apply(this,arguments)}function JC(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,Me.Z)(function*(n,e){const t=at(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Rh(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),od(t.remoteStore,r.targetId),tf(t,r.targetId)}).catch(tu))):(tf(t,r.targetId),yield Lc(t.localStore,r.targetId,!0))}),Km.apply(this,arguments)}function Zm(){return Zm=(0,Me.Z)(function*(n,e,t){const r=__(n);try{const i=yield function(u,l){const f=at(u),y=Zn.now(),E=l.reduce((W,oe)=>W.add(oe.key),Qt());let C,A;return f.persistence.runTransaction("Locally write mutations","readwrite",W=>{let oe=Yi(),de=Qt();return f.Gi.getEntries(W,E).next(Te=>{oe=Te,oe.forEach((Pe,tt)=>{tt.isValidDocument()||(de=de.add(Pe))})}).next(()=>f.localDocuments.getOverlayedDocuments(W,oe)).next(Te=>{C=Te;const Pe=[];for(const tt of l){const dt=Ph(tt,C.get(tt.key).overlayedDocument);null!=dt&&Pe.push(new ua(tt.key,dt,am(dt.value.mapValue),Qn.exists(!0)))}return f.mutationQueue.addMutationBatch(W,y,Pe,l)}).next(Te=>{A=Te;const Pe=Te.applyToLocalDocumentSet(C,de);return f.documentOverlayCache.saveOverlays(W,Te.batchId,Pe)})}).then(()=>({batchId:A.batchId,changes:DE(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,f){let y=u.hc[u.currentUser.toKey()];y||(y=new mr(Kt)),y=y.insert(l,f),u.hc[u.currentUser.toKey()]=y}(r,i.batchId,t),yield yu(r,i.changes),yield ad(r.remoteStore)}catch(i){const u=Xh(i,"Failed to persist write");t.reject(u)}}),Zm.apply(this,arguments)}function Db(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Me.Z)(function*(n,e){const t=at(n);try{const r=yield eb(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.cc.get(u);l&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?$t(l.nc):i.removedDocuments.size>0&&($t(l.nc),l.nc=!1))}),yield yu(t,r,e)}catch(r){yield tu(r)}}),Ym.apply(this,arguments)}function Sb(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(u,l){const f=at(u);f.onlineState=l;let y=!1;f.queries.forEach((E,C)=>{for(const A of C.listeners)A.bu(l)&&(y=!0)}),y&&Eb(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function s_(n,e,t){return o_.apply(this,arguments)}function o_(){return o_=(0,Me.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let l=new mr(nt.comparator);l=l.insert(u,Yn.newNoDocument(u,Bt.min()));const f=Qt().add(u),y=new Cp(Bt.min(),new Map,new Tn(Kt),l,f);yield Db(r,y),r.uc=r.uc.remove(u),r.cc.delete(e),l_(r)}else yield Lc(r.localStore,e,!1).then(()=>tf(r,e,t)).catch(tu)}),o_.apply(this,arguments)}function Tb(n,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Me.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const i=yield Nm(t.localStore,e);Xm(t,r,null),u_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yu(t,i)}catch(i){yield tu(i)}}),Qm.apply(this,arguments)}function tD(n,e,t){return a_.apply(this,arguments)}function a_(){return a_=(0,Me.Z)(function*(n,e,t){const r=at(n);try{const i=yield function(u,l){const f=at(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,l).next(C=>($t(null!==C),E=C.keys(),f.mutationQueue.removeMutationBatch(y,C))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(r.localStore,e);Xm(r,e,t),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yu(r,i)}catch(i){yield tu(i)}}),a_.apply(this,arguments)}function Gp(){return Gp=(0,Me.Z)(function*(n,e){const t=at(n);Ct(t.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=at(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Xh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Gp.apply(this,arguments)}function u_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Xm(n,e,t){const r=at(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function tf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Ab(n,r)})}function Ab(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(od(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),l_(n))}function c_(n,e,t){for(const r of t)r instanceof ef?(n.ac.addReference(r.key,e),rD(n,r)):r instanceof Ib?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Ab(n,r.key)):_t()}function rD(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.oc.add(r),l_(n))}function l_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new nt(ln.fromString(e)),r=n.fc.next();n.cc.set(r,new QC(t)),n.uc=n.uc.insert(t,r),Vv(n.remoteStore,new Ts(Zi(Th(t.path)),r,2,Ki.at))}}function yu(n,e,t){return d_.apply(this,arguments)}function d_(){return d_=(0,Me.Z)(function*(n,e,t){const r=at(n),i=[],u=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,y)=>{l.push(r._c(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const C=sd.Ci(y.targetId,E);u.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,Me.Z)(function*(y,E){const C=at(y);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ke.forEach(E,W=>ke.forEach(W.Si,oe=>C.persistence.referenceDelegate.addReference(A,W.targetId,oe)).next(()=>ke.forEach(W.Di,oe=>C.persistence.referenceDelegate.removeReference(A,W.targetId,oe)))))}catch(A){if(!Ec(A))throw A;qe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of E){const W=A.targetId;if(!A.fromCache){const oe=C.Ui.get(W),Te=oe.withLastLimboFreeSnapshotVersion(oe.snapshotVersion);C.Ui=C.Ui.insert(W,Te)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,u))}),d_.apply(this,arguments)}function iD(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Me.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield Sv(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new ze(Fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yu(t,r.ji)}var i}),Jm.apply(this,arguments)}function Rb(n,e){const t=at(n),r=t.cc.get(e);if(r&&r.nc)return Qt().add(r.key);{let i=Qt();const u=t.rc.get(e);if(!u)return i;for(const l of u){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function sD(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,Me.Z)(function*(n,e){const t=at(n),r=yield jp(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&c_(t,e.targetId,i.Xu),i}),h_.apply(this,arguments)}function Mb(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,Me.Z)(function*(n,e){const t=at(n);return Mv(t.localStore,e).then(r=>yu(t,r))}),f_.apply(this,arguments)}function oD(n,e,t,r){return p_.apply(this,arguments)}function p_(){return p_=(0,Me.Z)(function*(n,e,t,r){const i=at(n),u=yield function(l,f){const y=at(l),E=at(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",C=>E.Tn(C,f).next(A=>A?y.localDocuments.getDocuments(C,A):ke.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield ad(i.remoteStore):"acknowledged"===t||"rejected"===t?(Xm(i,e,r||null),u_(i,e),f=e,at(at(i.localStore).mutationQueue).An(f)):_t(),yield yu(i,u)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),p_.apply(this,arguments)}function Wp(){return Wp=(0,Me.Z)(function*(n,e){const t=at(n);if(e0(t),__(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield m_(t,r.toArray());t.dc=!0,yield zm(t.remoteStore,!0);for(const u of i)Vv(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(tf(t,l),Lc(t.localStore,l,!0))),od(t.remoteStore,l)}),yield i,yield m_(t,r),function(u){const l=at(u);l.cc.forEach((f,y)=>{od(l.remoteStore,y)}),l.ac.fs(),l.cc=new Map,l.uc=new mr(nt.comparator)}(t),t.dc=!1,yield zm(t.remoteStore,!1)}}),Wp.apply(this,arguments)}function m_(n,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,Me.Z)(function*(n,e,t){const r=at(n),i=[],u=[];for(const l of e){let f;const y=r.rc.get(l);if(y&&0!==y.length){f=yield mu(r.localStore,Zi(y[0]));for(const E of y){const C=r.ic.get(E),A=yield sD(r,C);A.snapshot&&u.push(A.snapshot)}}else{const E=yield Rv(r.localStore,l);f=yield mu(r.localStore,E),yield i_(r,kb(E),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(u),i}),qp.apply(this,arguments)}function kb(n){return vE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aD(n){const e=at(n);return at(at(e.localStore).persistence).vi()}function y_(n,e,t,r){return v_.apply(this,arguments)}function v_(){return v_=(0,Me.Z)(function*(n,e,t,r){const i=at(n);if(i.dc)return void qe("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Mv(i.localStore,Xx(u[0])),f=Cp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Hr.EMPTY_BYTE_STRING);yield yu(i,l,f);break}case"rejected":yield Lc(i.localStore,e,!0),tf(i,e,r);break;default:_t()}}),v_.apply(this,arguments)}function uD(n,e,t){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,Me.Z)(function*(n,e,t){const r=e0(n);if(r.dc){for(const i of e){if(r.rc.has(i)){qe("SyncEngine","Adding an already active target "+i);continue}const u=yield Rv(r.localStore,i),l=yield mu(r.localStore,u);yield i_(r,kb(u),l.targetId,!1,l.resumeToken),Vv(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Lc(r.localStore,i,!1).then(()=>{od(r.remoteStore,i),tf(r,i)}).catch(tu))}}),Bc.apply(this,arguments)}function e0(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Db.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s_.bind(null,e),e.sc.Wo=l1.bind(null,e.eventManager),e.sc.wc=d1.bind(null,e.eventManager),e}function __(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tD.bind(null,e),e}class w_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Me.Z)(function*(){t.It=qh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return XE(this.persistence,new YE,e.initialUser,this.It)}yc(e){return new Co(Ji.Bs,this.It)}gc(e){return new ib}terminate(){var e=this;return(0,Me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class t0 extends w_{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield __(r.Ac.syncEngine),yield ad(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return XE(this.persistence,new YE,e.initialUser,this.It)}Tc(e,t){return new MC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Kx(t,this.persistence);return new qx(e.asyncQueue,r)}yc(e){const t=Hp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Dv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ob(),zp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ib}}class cD extends t0{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Lv&&(r.sharedClientState.syncEngine={Fr:oD.bind(null,i),$r:y_.bind(null,i),Br:uD.bind(null,i),vi:aD.bind(null,i),Mr:Mb.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Me.Z)(function*(l){yield function g_(n,e){return Wp.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=ob();if(!Lv.C(t))throw new ze(Fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Kp{initialize(e,t){var r=this;return(0,Me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=iD.bind(null,r.syncEngine),yield zm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KC}createDatastore(e){const t=qh(e.databaseInfo.databaseId),r=new jC(e.databaseInfo);return new cb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>Sb(this.syncEngine,f,0),l=sb.C()?new sb:new BC,new hb(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,f,y,E){const C=new XC(r,i,u,l,f,y);return E&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Me.Z)(function*(t){const r=at(t);qe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Kh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function E_(n,e,t){if(!t)throw new ze(Fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b_(n,e,t,r){if(!0===e&&!0===r)throw new ze(Fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n0(n){if(!nt.isDocumentKey(n))throw new ze(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I_(n){if(nt.isDocumentKey(n))throw new ze(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zp(n);throw new ze(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function x_(n,e){if(e<=0)throw new ze(Fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Pb=new Map;class Nb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ze(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ze(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,b_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ze(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ze(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rE;switch(t.type){case"gapi":return new Bx(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ze(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Pb.get(e);t&&(qe("ComponentProvider","Removing Datastore"),Pb.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class Mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class To extends Mi{constructor(e,t,r){super(e,t,Th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new nt(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function Fb(n,e,...t){if(n=(0,Tt.m9)(n),E_("collection","path",e),n instanceof Yp){const r=ln.fromString(e,...t);return I_(r),new To(n,null,r)}{if(!(n instanceof Vn||n instanceof To))throw new ze(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return I_(r),new To(n.firestore,null,r)}}function C_(n,e,...t){if(n=(0,Tt.m9)(n),1===arguments.length&&(e=Ny.R()),E_("doc","path",e),n instanceof Yp){const r=ln.fromString(e,...t);return n0(r),new Vn(n,null,new nt(r))}{if(!(n instanceof Vn||n instanceof To))throw new ze(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return n0(r),new Vn(n.firestore,n instanceof To?n.converter:null,new nt(r))}}function dD(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),(n instanceof Vn||n instanceof To)&&(e instanceof Vn||e instanceof To)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function D_(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),n instanceof Mi&&e instanceof Mi&&n.firestore===e.firestore&&Rh(n._query,e._query)&&n.converter===e.converter}function Lb(n,e=10240){let t=0;return{read:()=>(0,Me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ub{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new qm(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ze(Fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Me.Z)(function*(u,l){const f=at(u),y=vm(f.It)+"/documents",E={documents:l.map(oe=>Sp(f.It,oe))},C=yield f._o("BatchGetDocuments",y,E,l.length),A=new Map;C.forEach(oe=>{const de=function kE(n,e){return"found"in e?function(t,r){$t(!!r.found);const i=Ss(t,r.found.name),u=ri(r.found.updateTime),l=new ni({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(i,u,l)}(n,e):"missing"in e?function(t,r){$t(!!r.missing),$t(!!r.readTime);const i=Ss(t,r.missing),u=ri(r.readTime);return Yn.newNoDocument(i,u)}(n,e):_t()}(f.It,oe);A.set(de.key.toString(),de)});const W=[];return l.forEach(oe=>{const de=A.get(oe.toString());$t(!!de),W.push(de)}),W}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ql(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=nt.fromPath(i);e.mutations.push(new Ip(u,e.precondition(u)))}),yield(r=(0,Me.Z)(function*(i,u){const l=at(i),f=vm(l.It)+"/documents",y={writes:u.map(E=>Lh(l.It,E))};yield l.ao("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _t();t=Bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ze(Fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bt.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bt.min()))throw new ze(Fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gD{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Bm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Me.Z)(function*(){const t=new pD(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!zl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!nv(t)}return!1}}class mD{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Br.UNAUTHENTICATED,this.clientId=Ny.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Me.Z)(function*(f){qe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(qe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Xh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Bb(n,e){return S_.apply(this,arguments)}function S_(){return S_=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Me.Z)(function*(u){r.isEqual(u)||(yield Sv(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),S_.apply(this,arguments)}function nf(n,e){return r0.apply(this,arguments)}function r0(){return r0=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield s0(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Yv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Yv(e.remoteStore,u)),n.onlineComponents=e}),r0.apply(this,arguments)}function s0(n){return o0.apply(this,arguments)}function o0(){return o0=(0,Me.Z)(function*(n){return n.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield Bb(n,new w_)),n.offlineComponents}),o0.apply(this,arguments)}function Xp(n){return a0.apply(this,arguments)}function a0(){return a0=(0,Me.Z)(function*(n){return n.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield nf(n,new Kp)),n.onlineComponents}),a0.apply(this,arguments)}function T_(n){return s0(n).then(e=>e.persistence)}function u0(n){return s0(n).then(e=>e.localStore)}function Vb(n){return Xp(n).then(e=>e.remoteStore)}function c0(n){return Xp(n).then(e=>e.syncEngine)}function rf(n){return A_.apply(this,arguments)}function A_(){return A_=(0,Me.Z)(function*(n){const e=yield Xp(n),t=e.eventManager;return t.onListen=Cb.bind(null,e.syncEngine),t.onUnlisten=JC.bind(null,e.syncEngine),t}),A_.apply(this,arguments)}function l0(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(i,u,l,f,y){const E=new Qp({next:A=>{u.enqueueAndForget(()=>t_(i,C));const W=A.docs.has(l);!W&&A.fromCache?y.reject(new ze(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&A.fromCache&&f&&"server"===f.source?y.reject(new ze(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),C=new Wm(Th(l.path),E,{includeMetadataChanges:!0,Nu:!0});return Gm(i,C)}(yield rf(n),n.asyncQueue,e,t,r)})),r.promise}function jb(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(i,u,l,f,y){const E=new Qp({next:A=>{u.enqueueAndForget(()=>t_(i,C)),A.fromCache&&"server"===f.source?y.reject(new ze(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),C=new Wm(l,E,{includeMetadataChanges:!0,Nu:!0});return Gm(i,C)}(yield rf(n),n.asyncQueue,e,t,r)})),r.promise}class wD{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Bm(this,"async_queue_retry"),this.Wc=()=>{const t=zp();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=zp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=zp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Vr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ec(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=Xv.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&_t()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function M_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class d0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends Yp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wD,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||f0(this),this._firestoreClient.terminate()}}function _r(n){return n._firestoreClient||f0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function f0(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $l(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new mD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function zb(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield Bb(n,t),yield nf(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(l=u).name?l.code===Fe.FAILED_PRECONDITION||l.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;_c("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function qb(n){if(n._initialized||n._terminated)throw new ze(Fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Hr.fromBase64String(e))}catch(t){throw new ze(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(Hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ze(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _u{constructor(e){this._methodName=e}}class tg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const CD=/^__.*__$/;class Kb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new uu(e,this.data,t,this.fieldTransforms)}}class O_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class ng{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return v0(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Zb(this.sa)&&CD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Yb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||qh(e)}da(e,t,r,i=!1){return new ng({sa:e,methodName:t,fa:r,path:rr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function dd(n){const e=n._freezeSettings(),t=qh(n._databaseId);return new Yb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rg(n,e,t,r,i,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,i);L_("Data must be an object, but it was:",l,r);const f=Xb(r,l);let y,E;if(u.merge)y=new Ds(l.fieldMask),E=l.fieldTransforms;else if(u.mergeFields){const C=[];for(const A of u.mergeFields){const W=m0(e,A,t);if(!l.contains(W))throw new ze(Fe.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);_0(C,W)||C.push(W)}y=new Ds(C),E=l.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,E=l.fieldTransforms;return new Kb(new ni(f),y,E)}class sf extends _u{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}function wi(n,e,t){return new ng({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Vc extends _u{_toFieldTransform(e){return new Mh(e.path,new Dc)}isEqual(e){return e instanceof Vc}}class DD extends _u{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=wi(this,e,!0),r=this._a.map(u=>Ao(u,t)),i=new Zl(r);return new Mh(e.path,i)}isEqual(e){return this===e}}class SD extends _u{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=wi(this,e,!0),r=this._a.map(u=>Ao(u,t)),i=new ou(r);return new Mh(e.path,i)}isEqual(e){return this===e}}class m1 extends _u{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Sc(e.It,nC(e.It,this.wa));return new Mh(e.path,t)}isEqual(e){return this===e}}function Qb(n,e,t,r){const i=n.da(1,e,t);L_("Data must be an object, but it was:",i,r);const u=[],l=ni.empty();bc(r,(y,E)=>{const C=y0(e,y,t);E=(0,Tt.m9)(E);const A=i.ca(C);if(E instanceof sf)u.push(C);else{const W=Ao(E,A);null!=W&&(u.push(C),l.set(C,W))}});const f=new Ds(u);return new O_(l,f,i.fieldTransforms)}function p0(n,e,t,r,i,u){const l=n.da(1,e,t),f=[m0(e,r,t)],y=[i];if(u.length%2!=0)throw new ze(Fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<u.length;W+=2)f.push(m0(e,u[W])),y.push(u[W+1]);const E=[],C=ni.empty();for(let W=f.length-1;W>=0;--W)if(!_0(E,f[W])){const oe=f[W];let de=y[W];de=(0,Tt.m9)(de);const Te=l.ca(oe);if(de instanceof sf)E.push(oe);else{const Pe=Ao(de,Te);null!=Pe&&(E.push(oe),C.set(oe,Pe))}}const A=new Ds(E);return new O_(C,A,l.fieldTransforms)}function F_(n,e,t,r=!1){return Ao(t,n.da(r?4:3,e))}function Ao(n,e){if(g0(n=(0,Tt.m9)(n)))return L_("Unsupported field value:",e,n),Xb(n,e);if(n instanceof _u)return function(t,r){if(!Zb(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let f=Ao(l,r.aa(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nC(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Zn.fromDate(t);return{timestampValue:Fh(r.It,i)}}if(t instanceof Zn){const i=new Zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fh(r.It,i)}}if(t instanceof tg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ma)return{bytesValue:RE(r.It,t._byteString)};if(t instanceof Vn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Zp(t)}`)}(n,e)}function Xb(n,e){const t={};return uE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bc(n,(r,i)=>{const u=Ao(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function g0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zn||n instanceof tg||n instanceof ma||n instanceof Vn||n instanceof _u)}function L_(n,e,t){if(!g0(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Zp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function m0(n,e,t){if((e=(0,Tt.m9)(e))instanceof vu)return e._internalPath;if("string"==typeof e)return y0(n,e);throw v0("Field path arguments must be of type string or ",n,!1,void 0,t)}const TD=new RegExp("[~\\*/\\[\\]]");function y0(n,e,t){if(e.search(TD)>=0)throw v0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vu(...e.split("."))._internalPath}catch{throw v0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function v0(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||l)&&(y+=" (found",u&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new ze(Fe.INVALID_ARGUMENT,f+n+y)}function _0(n,e){return n.some(t=>t.isEqual(e))}class af{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jb extends af{data(){return super.data()}}function hd(n,e){return"string"==typeof e?y0(n,e):e instanceof vu?e._internalPath:e._delegate._internalPath}function w0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ze(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E0{}function wu(n,...e){for(const t of e)n=t._apply(n);return n}class AD extends E0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=dd(e.firestore),r=function(i,u,l,f,y,E,C){let A;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ze(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){H_(C,E);const oe=[];for(const de of C)oe.push(iI(f,i,de));A={arrayValue:{values:oe}}}else A=iI(f,i,C)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||H_(C,E),A=F_(l,"where",C,"in"===E||"not-in"===E);const W=li.create(y,E,A);return function(oe,de){if(de.dt()){const Pe=lm(oe);if(null!==Pe&&!Pe.isEqual(de.field))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${de.field.toString()}'`);const tt=Qy(oe);null!==tt&&j_(0,de.field,tt)}const Te=function(Pe,tt){for(const dt of Pe.filters)if(tt.indexOf(dt.op)>=0)return dt.op;return null}(oe,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(de.op));if(null!==Te)throw new ze(Fe.INVALID_ARGUMENT,Te===de.op?`Invalid query. You cannot use more than one '${de.op.toString()}' filter.`:`Invalid query. You cannot use '${de.op.toString()}' filters with '${Te.toString()}' filters.`)}(i,W),W}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Mi(e.firestore,e.converter,function(i,u){const l=i.filters.concat([u]);return new Cc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class uf extends E0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new ze(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ze(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new iu(i,u);return function(f,y){if(null===Qy(f)){const E=lm(f);null!==E&&j_(0,E,y.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Mi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Cc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class U_ extends E0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Mi(e.firestore,e.converter,wp(e._query,this.Ia,this.Ta))}}class tI extends E0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=V_(e,this.type,this.Ea,this.Aa);return new Mi(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class nI extends E0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=V_(e,this.type,this.Ea,this.Aa);return new Mi(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function V_(n,e,t,r){if(t[0]=(0,Tt.m9)(t[0]),t[0]instanceof af)return function(i,u,l,f,y){if(!f)throw new ze(Fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const C of Ah(i))if(C.field.isKeyField())E.push(xc(u,f.key));else{const A=f.data.field(C.field);if(cE(A))throw new ze(Fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const W=C.field.canonicalString();throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}E.push(A)}return new bo(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=dd(n.firestore);return function(u,l,f,y,E,C){const A=u.explicitOrderBy;if(E.length>A.length)throw new ze(Fe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let oe=0;oe<E.length;oe++){const de=E[oe];if(A[oe].field.isKeyField()){if("string"!=typeof de)throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof de}`);if(!wE(u)&&-1!==de.indexOf("/"))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${de}' contains a slash.`);const Te=u.path.child(ln.fromString(de));if(!nt.isDocumentKey(Te))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${Te}' is not because it contains an odd number of segments.`);const Pe=new nt(Te);W.push(xc(l,Pe))}else{const Te=F_(f,y,de);W.push(Te)}}return new bo(W,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iI(n,e,t){if("string"==typeof(t=(0,Tt.m9)(t))){if(""===t)throw new ze(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&-1!==t.indexOf("/"))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!nt.isDocumentKey(r))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xc(n,new nt(r))}if(t instanceof Vn)return xc(n,t._key);throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zp(t)}.`)}function H_(n,e){if(!Array.isArray(n)||0===n.length)throw new ze(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ze(Fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function j_(n,e,t){if(!t.isEqual(e))throw new ze(Fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class $_{convertValue(e,t="none"){switch(bh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){const r={};return bc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tg(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=By(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eh(e));default:return null}}convertTimestamp(e){const t=nu(e);return new Zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);$t(yC(r));const i=new Ic(r.get(1),r.get(3)),u=new nt(r.popFirst(5));return i.isEqual(t)||Tr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function b0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class sI extends $_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class fd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends af{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cf extends ya{data(e={}){return super.data(e)}}class Eu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cf(this._firestore,this._userDataWriter,r.key,r,new fd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new cf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new fd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new cf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new fd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==l.type&&(y=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),E=u.indexOf(l.doc.key)),{type:oI(l.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function aI(n,e){return n instanceof ya&&e instanceof ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eu&&e instanceof Eu&&n._firestore===e._firestore&&D_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class pd extends $_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function ND(n,e,t){n=sn(n,Vn);const r=sn(n.firestore,Jn),i=b0(n.converter,e,t);return gd(r,[rg(dd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function OD(n,e,t,...r){n=sn(n,Vn);const i=sn(n.firestore,Jn),u=dd(i);let l;return l="string"==typeof(e=(0,Tt.m9)(e))||e instanceof vu?p0(u,"updateDoc",n._key,e,t,r):Qb(u,"updateDoc",n._key,e),gd(i,[l.toMutation(n._key,Qn.exists(!0))])}function ig(n,...e){var t,r,i;n=(0,Tt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||M_(e[l])||(u=e[l],l++);const f={includeMetadataChanges:u.includeMetadataChanges};if(M_(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let y,E,C;if(n instanceof Vn)E=sn(n.firestore,Jn),C=Th(n._key.path),y={next:A=>{e[l]&&e[l](lf(E,n,A))},error:e[l+1],complete:e[l+2]};else{const A=sn(n,Mi);E=sn(A.firestore,Jn),C=A._query;const W=new pd(E);y={next:oe=>{e[l]&&e[l](new Eu(E,W,A,oe))},error:e[l+1],complete:e[l+2]},w0(n._query)}return function(A,W,oe,de){const Te=new Qp(de),Pe=new Wm(W,Te,oe);return A.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return Gm(yield rf(A),Pe)})),()=>{Te.bc(),A.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return t_(yield rf(A),Pe)}))}}(_r(E),C,f,y)}function gd(n,e){return function(t,r){const i=new Vr;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function eD(n,e,t){return Zm.apply(this,arguments)}(yield c0(t),r,i)})),i.promise}(_r(n),e)}function lf(n,e,t){const r=t.docs.get(e._key),i=new pd(n);return new ya(n,i,e._key,r,new fd(t.hasPendingWrites,t.fromCache),e.converter)}const D1={maxAttempts:5};class I0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dd(e)}set(e,t,r){this._verifyNotCommitted();const i=bu(e,this._firestore),u=b0(i.converter,t,r),l=rg(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=bu(e,this._firestore);let l;return l="string"==typeof(t=(0,Tt.m9)(t))||t instanceof vu?p0(this._dataReader,"WriteBatch.update",u._key,t,r,i):Qb(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bu(e,this._firestore);return this._mutations=this._mutations.concat(new Ql(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bu(n,e){if((n=(0,Tt.m9)(n)).firestore!==e)throw new ze(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class UD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dd(e)}get(e){const t=bu(e,this._firestore),r=new sI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return _t();const u=i[0];if(u.isFoundDocument())return new af(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new af(this._firestore,r,t._key,null,t.converter);throw _t()})}set(e,t,r){const i=bu(e,this._firestore),u=b0(i.converter,t,r),l=rg(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=bu(e,this._firestore);let l;return l="string"==typeof(t=(0,Tt.m9)(t))||t instanceof vu?p0(this._dataReader,"Transaction.update",u._key,t,r,i):Qb(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=bu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bu(e,this._firestore),r=new pd(this._firestore);return super.get(e).then(i=>new ya(this._firestore,r,t._key,i._document,new fd(!1,!1),t.converter))}}function z_(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lI(){if(typeof Uint8Array>"u")throw new ze("unimplemented","Uint8Arrays are not available in this environment.")}function zD(){if(!function Zx(){return typeof atob<"u"}())throw new ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){eu=Jr.SDK_VERSION,(0,Jr._registerComponent)(new Yo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(new Ux(t.getProvider("auth-internal")),new pp(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ze(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(f.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(tE,"3.7.3",n),(0,Jr.registerVersion)(tE,"3.7.3","esm2017")}();class sg{constructor(e){this._delegate=e}static fromBase64String(e){return zD(),new sg(ma.fromBase64String(e))}static fromUint8Array(e){return lI(),new sg(ma.fromUint8Array(e))}toBase64(){return zD(),this._delegate.toBase64()}toUint8Array(){return lI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function C0(n){return function dI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class R1{enableIndexedDbPersistence(e,t){return function $b(n,e){qb(n=sn(n,Jn));const t=_r(n),r=n._freezeSettings(),i=new Kp;return zb(t,i,new t0(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bD(n){qb(n=sn(n,Jn));const e=_r(n),t=n._freezeSettings(),r=new Kp;return zb(e,r,new cD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function g1(n){if(n._initialized&&!n._terminated)throw new ze(Fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(t=(0,Me.Z)(function*(r){if(!qs.C())return Promise.resolve();const i=r+"main";yield qs.delete(i)}),function(r){return t.apply(this,arguments)})(Hp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Qs{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ic||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_c("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Ob(n,e,t,r={}){var i;const u=(n=sn(n,Yp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&_c("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Br.MOCK_USER;else{l=(0,Tt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ze(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Br(y)}n._authCredentials=new JT(new nE(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function P_(n){return function yD(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield T_(n),t=yield Vb(n);return e.setNetworkEnabled(!0),function(r){const i=at(r);return i._u.delete(0),So(i)}(t)}))}(_r(n=sn(n,Jn)))}(this._delegate)}disableNetwork(){return function Gb(n){return function Jp(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield T_(n),t=yield Vb(n);return e.setNetworkEnabled(!1),(r=(0,Me.Z)(function*(i){const u=at(i);u._u.add(0),yield Kh(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(_r(n=sn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,b_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function k_(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function nD(n,e){return Gp.apply(this,arguments)}(yield c0(e),t)})),t.promise}(_r(n=sn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function C1(n,e){return function R_(n,e){const t=new Qp(e);return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return r=yield rf(n),i=t,at(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return r=yield rf(n),i=t,void at(r).Ru.delete(i);var r,i}))}}(_r(n=sn(n,Jn)),M_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ff(this,Fb(this._delegate,e))}catch(t){throw ki(t,"collection()","Firestore.collection()")}}doc(e){try{return new es(this,C_(this._delegate,e))}catch(t){throw ki(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pi(this,function lD(n,e){if(n=sn(n,Yp),E_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ze(Fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mi(n,null,(t=e,new Cc(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ki(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cI(n,e,t){n=sn(n,Jn);const r=Object.assign(Object.assign({},D1),t);return function(i){if(i.maxAttempts<1)throw new ze(Fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const f=new Vr;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const y=yield function Hb(n){return Xp(n).then(e=>e.datastore)}(i);new gD(i.asyncQueue,y,l,u,f).run()})),f.promise}(_r(n),i=>e(new UD(n,i)),r)}(this._delegate,t=>e(new hI(this,t)))}batch(){return _r(this._delegate),new As(new I0(this._delegate,e=>gd(this._delegate,e)))}loadBundle(e){return function N_(n,e){const t=_r(n=sn(n,Jn)),r=new d0;return function eg(n,e,t,r){const i=function(u,l){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,E){if(y instanceof Uint8Array)return Lb(y,E);if(y instanceof ArrayBuffer)return Lb(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Ub(y,l);var y}(t,qh(e));n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function h1(n,e,t){const r=at(n);var i;(i=(0,Me.Z)(function*(u,l,f){try{const y=yield l.getMetadata();if(yield function(W,oe){const de=at(W),Te=ri(oe.createTime);return de.persistence.runTransaction("hasNewerBundle","readonly",Pe=>de.Ns.getBundleMetadata(Pe,oe.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Te)>=0)}(u.localStore,y))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(W=y).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);f._updateProgress(n_(y));const E=new ZC(y,u.localStore,l.It);let C=yield l.mc();for(;C;){const W=yield E.Fu(C);W&&f._updateProgress(W),C=yield l.mc()}const A=yield E.complete();return yield yu(u,A.Lu,void 0),yield function(W,oe){const de=at(W);return de.persistence.runTransaction("Save bundle","readwrite",Te=>de.Ns.saveBundleMetadata(Te,oe))}(u.localStore,y),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(y){return _c("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var W}),function(u,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield c0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ID(n,e){return function _D(n,e){return n.asyncQueue.enqueue((0,Me.Z)(function*(){return function(t,r){const i=at(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield u0(n),e)}))}(_r(n=sn(n,Jn)),e).then(t=>t?new Mi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Pi(this,t):null)}}class D0 extends $_{constructor(e){super(),this.firestore=e}convertBytes(e){return new sg(new ma(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return es.forKey(t,this.firestore,null)}}class hI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}get(e){const t=Hc(e);return this._delegate.get(t).then(r=>new df(this._firestore,new ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Hc(e);return r?(z_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Hc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Hc(e);return this._delegate.delete(t),this}}class As{constructor(e){this._delegate=e}set(e,t,r){const i=Hc(e);return r?(z_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Hc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Hc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class md{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new cf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=md.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new md(e,new D0(e),t),i.set(t,u)),u}}md.INSTANCES=new WeakMap;class es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new es(t,new Vn(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new es(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ff(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ff(this.firestore,Fb(this._delegate,e))}catch(t){throw ki(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Vn&&dD(this._delegate,e)}set(e,t){t=z_("DocumentReference.set",t);try{return t?ND(this._delegate,e,t):ND(this._delegate,e)}catch(r){throw ki(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?OD(this._delegate,e):OD(this._delegate,e,t,...r)}catch(i){throw ki(i,"updateDoc()","DocumentReference.update()")}}delete(){return function I1(n){return gd(sn(n.firestore,Jn),[new Ql(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=fI(e),r=S0(e,i=>new df(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ig(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function uI(n){n=sn(n,Vn);const e=sn(n.firestore,Jn),t=_r(e),r=new pd(e);return function vD(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(i,u,l){try{const f=yield function(y,E){const C=at(y);return C.persistence.runTransaction("read document","readonly",A=>C.localDocuments.getDocument(A,E))}(i,u);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new ze(Fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Xh(f,`Failed to get document '${u} from cache`);l.reject(y)}}),function(i,u,l){return r.apply(this,arguments)})(yield u0(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ya(e,r,n._key,i,new fd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function _1(n){n=sn(n,Vn);const e=sn(n.firestore,Jn);return l0(_r(e),n._key,{source:"server"}).then(t=>lf(e,n,t))}(this._delegate):function PD(n){n=sn(n,Vn);const e=sn(n.firestore,Jn);return l0(_r(e),n._key).then(t=>lf(e,n,t))}(this._delegate),t.then(r=>new df(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new es(this.firestore,this._delegate.withConverter(e?md.getInstance(this.firestore,e):null))}}function ki(n,e,t){return n.message=n.message.replace(e,t),n}function fI(n){for(const e of n)if("object"==typeof e&&!C0(e))return e;return{}}function S0(n,e){var t,r;let i;return i=C0(n[0])?n[0]:C0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class df{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new es(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aI(this._delegate,e._delegate)}}class hf extends df{data(e){const t=this._delegate.data(e);return function Lx(n,e){n||_t()}(void 0!==t),t}}class Pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}where(e,t,r){try{return new Pi(this.firestore,wu(this._delegate,function eI(n,e,t){const r=e,i=hd("where",n);return new AD(i,r,t)}(e,t,r)))}catch(i){throw ki(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pi(this.firestore,wu(this._delegate,function RD(n,e="asc"){const t=e,r=hd("orderBy",n);return new uf(r,t)}(e,t)))}catch(r){throw ki(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pi(this.firestore,wu(this._delegate,function B_(n){return x_("limit",n),new U_("limit",n,"F")}(e)))}catch(t){throw ki(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pi(this.firestore,wu(this._delegate,function y1(n){return x_("limitToLast",n),new U_("limitToLast",n,"L")}(e)))}catch(t){throw ki(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pi(this.firestore,wu(this._delegate,function v1(...n){return new tI("startAt",n,!0)}(...e)))}catch(t){throw ki(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pi(this.firestore,wu(this._delegate,function MD(...n){return new tI("startAfter",n,!1)}(...e)))}catch(t){throw ki(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pi(this.firestore,wu(this._delegate,function kD(...n){return new nI("endBefore",n,!1)}(...e)))}catch(t){throw ki(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pi(this.firestore,wu(this._delegate,function rI(...n){return new nI("endAt",n,!0)}(...e)))}catch(t){throw ki(t,"endAt()","Query.endAt()")}}isEqual(e){return D_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function E1(n){n=sn(n,Mi);const e=sn(n.firestore,Jn),t=_r(e),r=new pd(e);return function ga(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(i,u,l){try{const f=yield jp(i,u,!0),y=new xb(u,f.Hi),E=y.Wu(f.documents),C=y.applyChanges(E,!1);l.resolve(C.snapshot)}catch(f){const y=Xh(f,`Failed to execute query '${u} against cache`);l.reject(y)}}),function(i,u,l){return r.apply(this,arguments)})(yield u0(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Eu(e,r,n,i))}(this._delegate):"server"===e?.source?function b1(n){n=sn(n,Mi);const e=sn(n.firestore,Jn),t=_r(e),r=new pd(e);return jb(t,n._query,{source:"server"}).then(i=>new Eu(e,r,n,i))}(this._delegate):function w1(n){n=sn(n,Mi);const e=sn(n.firestore,Jn),t=_r(e),r=new pd(e);return w0(n._query),jb(t,n._query).then(i=>new Eu(e,r,n,i))}(this._delegate),t.then(r=>new T0(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fI(e),r=S0(e,i=>new T0(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ig(this._delegate,t,r)}withConverter(e){return new Pi(this.firestore,this._delegate.withConverter(e?md.getInstance(this.firestore,e):null))}}class pI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new hf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class T0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new hf(this._firestore,r))})}isEqual(e){return aI(this._delegate,e._delegate)}}class ff extends Pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new es(this.firestore,e):null}doc(e){try{return new es(this.firestore,void 0===e?C_(this._delegate):C_(this._delegate,e))}catch(t){throw ki(t,"doc()","CollectionReference.doc()")}}add(e){return function x1(n,e){const t=sn(n.firestore,Jn),r=C_(n),i=b0(n.converter,e);return gd(t,[rg(dd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new es(this.firestore,t))}isEqual(e){return dD(this._delegate,e._delegate)}withConverter(e){return new ff(this.firestore,this._delegate.withConverter(e?md.getInstance(this.firestore,e):null))}}function Hc(n){return sn(n,Vn)}class W_{constructor(...e){this._delegate=new vu(...e)}static documentId(){return new W_(rr.keyField().canonicalString())}isEqual(e){return(e=(0,Tt.m9)(e))instanceof vu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Iu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BD(){return new Vc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Iu(e)}static delete(){const e=function S1(){return new sf("deleteField")}();return e._methodName="FieldValue.delete",new Iu(e)}static arrayUnion(...e){const t=function VD(...n){return new DD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Iu(t)}static arrayRemove(...e){const t=function HD(...n){return new SD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Iu(t)}static increment(e){const t=function x0(n){return new m1("increment",n)}(e);return t._methodName="FieldValue.increment",new Iu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const jc={Firestore:Qs,GeoPoint:tg,Timestamp:Zn,Blob:sg,Transaction:hI,WriteBatch:As,DocumentReference:es,DocumentSnapshot:df,Query:Pi,QueryDocumentSnapshot:hf,QuerySnapshot:T0,CollectionReference:ff,FieldPath:W_,FieldValue:Iu,setLogLevel:function G_(n){!function Py(n){qi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function q_(n){(function gI(n,e){n.INTERNAL.registerComponent(new Yo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},jc)))})(n,(e,t)=>new Qs(e,t,new R1)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(oc.Z);var Yr=M(7579),GD=M(6451),A0=M(5363),R0=M(8421);function jr(n,e){return(0,Sr.e)((t,r)=>{let i=null,u=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,On.x)(r,y=>{i?.unsubscribe();let E=0;const C=u++;(0,R0.Xf)(n(y,C)).subscribe(i=(0,On.x)(r,A=>r.next(e?e(y,A,C,E++):A),()=>{i=null,f()}))},()=>{l=!0,f()}))})}var WD=M(6063);class qD extends Yr.x{constructor(e=1/0,t=1/0,r=WD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)f=y;f&&r.splice(0,f+1)}}}var mI=M(3099);function KD(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,mI.B)({connector:()=>new qD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const og=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var $c=M(515);function M0(n){return n<=0?()=>$c.E:(0,Sr.e)((e,t)=>{let r=0;e.subscribe((0,On.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pf(n){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function K_(n=vI){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vI(){return new og}function va(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((i,u)=>n(i,u,r)):ui.y,M0(1),t?pf(e):K_(()=>new og))}var k0=M(576);function Z_(n,e){return(0,k0.m)(e)?jr(()=>n,e):jr(()=>n)}var gf=M(9468);M(5867);const Q_=new Map,cg={activated:!1,tokenObservers:[]},QD={initialized:!1,enabled:!1};function di(n){return Q_.get(n)||Object.assign({},cg)}function _a(){return QD}class O0{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Me.Z)(function*(){t.stop();try{t.pending=new Tt.BH,yield function F1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nw(n){if(!di(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function iw(n,e){return sw.apply(this,arguments)}function sw(){return sw=(0,Me.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const oe=yield l.getHeartbeatsHeader();oe&&(u["X-Firebase-Client"]=oe)}const f={method:"POST",body:JSON.stringify(e),headers:u};let y,E;try{y=yield fetch(n,f)}catch(oe){throw ts.create("fetch-network-error",{originalErrorMessage:null===(r=oe)||void 0===r?void 0:r.message})}if(200!==y.status)throw ts.create("fetch-status-error",{httpStatus:y.status});try{E=yield y.json()}catch(oe){throw ts.create("fetch-parse-error",{originalErrorMessage:null===(i=oe)||void 0===i?void 0:i.message})}const C=E.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const A=1e3*Number(C[1]),W=Date.now();return{token:E.token,expireTimeMillis:W+A,issuedAtTimeMillis:W}}),sw.apply(this,arguments)}function xI(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const mf="firebase-app-check-store";let ow=null;function aw(){return ow||(ow=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(ts.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(mf,{keyPath:"compositeKey"})}}catch(r){e(ts.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ow)}function cw(){return cw=(0,Me.Z)(function*(n,e){const r=(yield aw()).transaction(mf,"readwrite"),u=r.objectStore(mf).put({compositeKey:n,value:e});return new Promise((l,f)=>{u.onsuccess=y=>{l()},r.onerror=y=>{var E;f(ts.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})}),cw.apply(this,arguments)}const U0=new vi.Yd("@firebase/app-check");function SI(n,e){return(0,Tt.hl)()?function tS(n,e){return function rS(n,e){return cw.apply(this,arguments)}(function iS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{U0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function oS(){return _a().enabled}function aS(){return AI.apply(this,arguments)}function AI(){return AI=(0,Me.Z)(function*(){const n=_a();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AI.apply(this,arguments)}const H1={error:"UNKNOWN_ERROR"};function s(n){return Tt.US.encodeString(JSON.stringify(n),!1)}function o(n){return a.apply(this,arguments)}function a(){return a=(0,Me.Z)(function*(n,e=!1){const t=n.app;nw(t);const r=di(t);let u,i=r.token;if(i&&!I(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(I(y)?i=y:yield SI(t,void 0))}if(!e&&i&&I(i))return{token:i.token};let f,l=!1;if(oS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iw(xI(t,yield aS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield SI(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield di(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?U0.warn(y.message):U0.error(y),u=y}return i?u?f=I(i)?{token:i.token,internalError:u}:S(u):(f={token:i.token},r.token=i,yield SI(t,i)):f=S(u),l&&b(t,f),f}),a.apply(this,arguments)}function d(n,e){const t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function g(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function _(n){const{app:e}=n;return new O0((0,Me.Z)(function*(){let r;if(r=di(e).token?yield o(n,!0):yield o(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function b(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function I(n){return n.expireTimeMillis-Date.now()>0}function S(n){return{token:s(H1),error:n}}class U{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)d(this.app,t.next);return Promise.resolve()}}const j1="app-check-internal";!function zk(){(0,Jr._registerComponent)(new Yo.wA("app-check",n=>function Z(n,e){return new U(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(j1).initialize()})),(0,Jr._registerComponent)(new Yo.wA(j1,n=>function ge(n){return{getToken:e=>o(n,e),addTokenListener:e=>function c(n,e,t,r){const{app:i}=n,u=di(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&I(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),g(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>g(n))}(n,"INTERNAL",e),removeTokenListener:e=>d(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jr.registerVersion)("@firebase/app-check","0.5.17")}();class MI{constructor(){return(0,Rn.vb)("app-check")}}typeof window<"u"&&window;var z1=M(127);const G1=new h.OlP("angularfire2.auth.use-emulator"),W1=new h.OlP("angularfire2.auth.settings"),q1=new h.OlP("angularfire2.auth.tenant-id"),K1=new h.OlP("angularfire2.auth.langugage-code"),Z1=new h.OlP("angularfire2.auth.use-device-language"),Y1=new h.OlP("angularfire.auth.persistence"),Q1=(n,e,t,r,i,u,l,f)=>(0,Dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),l)for(const[E,C]of Object.entries(l))y.settings[E]=C;return f&&y.setPersistence(f),y},[t,r,i,u,l,f]);let X1=(()=>{class n{constructor(t,r,i,u,l,f,y,E,C,A,W,oe){const de=new Yr.x,Te=ct(void 0).pipe((0,A0.Q)(l.outsideAngular),jr(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,1277)))),(0,vt.U)(()=>(0,Dr.on)(t,u,r)),(0,vt.U)(Pe=>Q1(Pe,u,f,E,C,A,y,W)),KD({bufferSize:1,refCount:!1}));if(Pr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Te.pipe(va()).subscribe();const tt=Te.pipe(jr(st=>st.getRedirectResult().then(Rt=>Rt,()=>null)),Rn.iC,KD({bufferSize:1,refCount:!1})),dt=Te.pipe(jr(st=>new yi.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(kt=>Rt.next(kt),kt=>Rt.error(kt),()=>Rt.complete()))})))),ut=Te.pipe(jr(st=>new yi.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(kt=>Rt.next(kt),kt=>Rt.error(kt),()=>Rt.complete()))}))));this.authState=tt.pipe(Z_(dt),(0,gf.R)(l.outsideAngular),(0,A0.Q)(l.insideAngular)),this.user=tt.pipe(Z_(ut),(0,gf.R)(l.outsideAngular),(0,A0.Q)(l.insideAngular)),this.idToken=this.user.pipe(jr(st=>st?(0,pn.D)(st.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(jr(st=>st?(0,pn.D)(st.getIdTokenResult()):ct(null))),this.credential=(0,GD.T)(tt,de,this.authState.pipe(ji(st=>!st))).pipe((0,vt.U)(st=>st?.user?st:null),(0,gf.R)(l.outsideAngular),(0,A0.Q)(l.insideAngular))}return(0,Dr.pX)(this,Te,u,{spy:{apply:(Pe,tt,dt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&dt.then(ut=>de.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Dr.Dh),h.LFG(Dr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Rn.HU),h.LFG(G1,8),h.LFG(W1,8),h.LFG(q1,8),h.LFG(K1,8),h.LFG(Z1,8),h.LFG(Y1,8),h.LFG(MI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function J1(n,e){return function Yk(n,e=mo.z){return new yi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function dS(n,e){return J1(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function kI(n,e){return dS(n,e).pipe(zs(void 0),Vi(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const y=i.find(C=>C.doc.ref.isEqual(l.ref)),E=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),u}))}function eA(n,e,t){return kI(n,t).pipe(Hi((r,i)=>function Xk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Jk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return hS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return hS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),zd(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function hS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zs(void 0),Vi(),ji(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return dS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Rn.iC)}add(e){return this.ref.add(e)}doc(e){return new rA(this.ref.doc(e),this.afs)}}class rA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=oA(r,t);return new nA(i,u,this.afs)}snapshotChanges(){return function Qk(n,e){return J1(n,e).pipe(zs(void 0),Vi(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(Rn.iC)}}class eP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kI(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ji(t=>t.length>0),Rn.iC):kI(this.query,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return dS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Rn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Rn.iC)}}const iA=new h.OlP("angularfire2.enableFirestorePersistence"),sA=new h.OlP("angularfire2.firestore.persistenceSettings"),tP=new h.OlP("angularfire2.firestore.settings"),nP=new h.OlP("angularfire2.firestore.use-emulator");function oA(n,e=(t=>t)){return{query:e(n),ref:n}}let aA=(()=>{class n{constructor(t,r,i,u,l,f,y,E,C,A,W,oe,de,Te,Pe,tt,dt){this.schedulers=y;const ut=(0,Dr.on)(t,f,r),st=C;A&&Q1(ut,f,W,de,Te,Pe,oe,tt),[this.firestore,this.persistenceEnabled$]=(0,Dr.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const Rt=f.runOutsideAngular(()=>ut.firestore());if(u&&Rt.settings(u),st&&Rt.useEmulator(...st),i&&!Pr(l)){const kt=()=>{try{return(0,pn.D)(Rt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(an){return typeof console<"u"&&console.warn(an),ct(!1)}};return[Rt,f.runOutsideAngular(kt)]}return[Rt,ct(!1)]},[u,st,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=oA(i,r),f=this.schedulers.ngZone.run(()=>u);return new nA(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new eP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rA(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Dr.Dh),h.LFG(Dr.xv,8),h.LFG(iA,8),h.LFG(tP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Rn.HU),h.LFG(sA,8),h.LFG(nP,8),h.LFG(X1,8),h.LFG(G1,8),h.LFG(W1,8),h.LFG(q1,8),h.LFG(K1,8),h.LFG(Z1,8),h.LFG(Y1,8),h.LFG(MI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rP=(()=>{class n{constructor(){z1.Z.registerVersion("angularfire",Rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:iA,useValue:!0},{provide:sA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[aA]}),n})();const uA="firebasestorage.googleapis.com",cA="storageBucket";class Ar extends Tt.ZR{constructor(e,t,r=0){super(fS(e),`Firebase Storage: ${t} (${fS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fS(n){return"storage/"+n}function pS(){return new Ar("unknown","An unknown error occurred, please check the error payload for server response.")}function lA(){return new Ar("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function dA(){return new Ar("canceled","User canceled the upload/download.")}function hA(){return new Ar("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function z0(n){return new Ar("invalid-argument",n)}function fA(){return new Ar("app-deleted","The Firebase app was deleted.")}function pA(n){return new Ar("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pw(n,e){return new Ar("invalid-format","String does not match format '"+n+"': "+e)}function gw(n){throw new Ar("internal-error","Internal error: "+n)}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch{return new ns(e,"")}if(""===r.path)return r;throw function pP(n){return new Ar("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(st){st.path_=decodeURIComponent(st.path)}const A=t.replace(/[.]/g,"\\."),ut=[{regex:f,indices:{bucket:1,path:3},postModify:function u(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===uA?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let st=0;st<ut.length;st++){const Rt=ut[st],kt=Rt.regex.exec(e);if(kt){let Qr=kt[Rt.indices.path];Qr||(Qr=""),r=new ns(kt[Rt.indices.bucket],Qr),Rt.postModify(r);break}}if(null==r)throw function fP(n){return new Ar("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class _P{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PI(n){return"string"==typeof n||n instanceof String}function gA(n){return gS()&&n instanceof Blob}function gS(){return typeof Blob<"u"&&!(0,Tt.UG)()}function mS(n,e,t,r){if(r<e)throw z0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw z0(`Invalid value for '${n}'. Expected ${t} or less.`)}function vd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function mA(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var yf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(yf||(yf={})),yf))();function yA(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class CP{constructor(e,t,r,i,u,l,f,y,E,C,A,W=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=C,this.connectionFactory_=A,this.retry=W,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((oe,de)=>{this.resolve_=oe,this.reject_=de,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function bP(n){return void 0!==n}(y)?u():u(y)}catch(y){l(y)}else if(null!==f){const y=pS();y.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,y):y)}else l(i.canceled?this.appDelete_?fA():dA():lA())};this.canceled_?t(0,new NI(!1,null,!0)):this.backoffId_=function wP(n,e,t){let r=1,i=null,u=null,l=!1,f=0;function y(){return 2===f}let E=!1;function C(...Pe){E||(E=!0,e.apply(null,Pe))}function A(Pe){i=setTimeout(()=>{i=null,n(oe,y())},Pe)}function W(){u&&clearTimeout(u)}function oe(Pe,...tt){if(E)return void W();if(Pe)return W(),void C.call(null,Pe,...tt);if(y()||l)return W(),void C.call(null,Pe,...tt);let ut;r<64&&(r*=2),1===f?(f=2,ut=0):ut=1e3*(r+Math.random()),A(ut)}let de=!1;function Te(Pe){de||(de=!0,W(),!E&&(null!==i?(Pe||(f=2),clearTimeout(i),A(0)):Pe||(f=1)))}return A(0),u=setTimeout(()=>{l=!0,Te(!0)},t),Te}((r,i)=>{if(i)return void r(!1,new NI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const f=u.getErrorCode()===yf.NO_ERROR,y=u.getStatus();if((!f||yA(y,this.additionalRetryCodes_))&&this.retry){const C=u.getErrorCode()===yf.ABORT;return void r(!1,new NI(!1,null,C))}const E=-1!==this.successCodes_.indexOf(y);r(!0,new NI(E,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function EP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class NI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kP(...n){const e=function MP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(gS())return new Blob(n);throw new Ar("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yS{constructor(e,t){this.data=e,this.contentType=t||null}}function vS(n,e){switch(n){case Ro.RAW:return new yS(vA(e));case Ro.BASE64:case Ro.BASE64URL:return new yS(_A(n,e));case Ro.DATA_URL:return new yS(function FP(n){const e=new wA(n);return e.base64?_A(Ro.BASE64,e.rest):function OP(n){let e;try{e=decodeURIComponent(n)}catch{throw pw(Ro.DATA_URL,"Malformed data URL.")}return vA(e)}(e.rest)}(e),function LP(n){return new wA(n).contentType}(e))}throw pS()}function vA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function _A(n,e){switch(n){case Ro.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw pw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw pw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function NP(n){if(typeof atob>"u")throw function vP(n){return new Ar("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:pw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class wA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw pw(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function UP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class zc{constructor(e,t){let r=0,i="";gA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(gA(this.data_)){const i=function PP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new zc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zc(r,!0)}}static getBlob(...e){if(gS()){const t=e.map(r=>r instanceof zc?r.data_:r);return new zc(kP.apply(null,t))}{const t=e.map(l=>PI(l)?vS(Ro.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[u++]=l[f]}),new zc(i,!0)}}uploadData(){return this.data_}}function _S(n){let e;try{e=JSON.parse(n)}catch{return null}return function xP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function EA(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function HP(n,e){return e}class Rs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||HP}}let OI=null;function mw(){if(OI)return OI;const n=[];n.push(new Rs("bucket")),n.push(new Rs("generation")),n.push(new Rs("metageneration")),n.push(new Rs("name","fullPath",!0));const t=new Rs("name");t.xform=function e(u,l){return function jP(n){return!PI(n)||n.length<2?n:EA(n)}(l)},n.push(t);const i=new Rs("size");return i.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Rs("timeCreated")),n.push(new Rs("updated")),n.push(new Rs("md5Hash",null,!0)),n.push(new Rs("cacheControl",null,!0)),n.push(new Rs("contentDisposition",null,!0)),n.push(new Rs("contentEncoding",null,!0)),n.push(new Rs("contentLanguage",null,!0)),n.push(new Rs("contentType",null,!0)),n.push(new Rs("metadata","customMetadata",!0)),OI=n,OI}function bA(n,e,t){const r=_S(e);return null===r?null:function zP(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function $P(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ns(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function wS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const IA="prefixes";class Gc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wc(n){if(!n)throw pS()}function FI(n,e){return function t(r,i){const u=bA(n,i,e);return Wc(null!==u),u}}function G0(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dP(){return new Ar("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function lP(){return new Ar("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cP(n){return new Ar("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hP(n){return new Ar("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function yw(n){const e=G0(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function uP(n){return new Ar("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function CA(n,e,t){const i=vd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Gc(i,"GET",FI(n,t),l);return f.errorHandler=yw(e),f}function YP(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=vd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,C=new Gc(f,"GET",function KP(n,e){return function t(r,i){const u=function qP(n,e,t){const r=_S(t);return null===r?null:function WP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[IA])for(const i of t[IA]){const u=i.replace(/\/$/,""),l=n._makeStorageReference(new ns(e,u));r.prefixes.push(l)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new ns(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Wc(null!==u),u}}(n,e.bucket),E);return C.urlParams=u,C.errorHandler=G0(e),C}function SA(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function eN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class LI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ES(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Wc(!1)}return Wc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const iN={STATE_CHANGED:"state_changed"},Ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bS(n){switch(n){case"running":case"pausing":case"canceling":return Ms.RUNNING;case"paused":return Ms.PAUSED;case"success":return Ms.SUCCESS;case"canceled":return Ms.CANCELED;default:return Ms.ERROR}}class sN{constructor(e,t,r){if(function IP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function W0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class aN extends class oN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw gw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function xu(){return new aN}class MA{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=mw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(yA(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=lA()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tN(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l=SA(e,r,i),f={name:l.fullPath},y=vd(u,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=wS(l,t),de=new Gc(y,"POST",function oe(Te){let Pe;ES(Te);try{Pe=Te.getResponseHeader("X-Goog-Upload-URL")}catch{Wc(!1)}return Wc(PI(Pe)),Pe},n.maxUploadRetryTime);return de.urlParams=f,de.headers=C,de.body=A,de.errorHandler=G0(e),de}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function nN(n,e,t,r){const y=new Gc(t,"POST",function u(E){const C=ES(E,["active","final"]);let A=null;try{A=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wc(!1)}A||Wc(!1);const W=Number(A);return Wc(!isNaN(W)),new LI(W,r.size(),"final"===C)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=G0(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,xu,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new LI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let l;try{l=function rN(n,e,t,r,i,u,l,f){const y=new LI(0,0);if(l?(y.current=l.current,y.total=l.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function mP(){return new Ar("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=y.total-y.current;let C=E;i>0&&(C=Math.min(C,i));const A=y.current;let oe="";oe=0===C?"finalize":E===C?"upload, finalize":"upload";const de={"X-Goog-Upload-Command":oe,"X-Goog-Upload-Offset":`${y.current}`},Te=r.slice(A,A+C);if(null===Te)throw hA();const ut=new Gc(t,"POST",function Pe(st,Rt){const kt=ES(st,["active","final"]),an=y.current+C,Qr=r.size();let Po;return Po="final"===kt?FI(e,u)(st,Rt):null,new LI(an,Qr,"final"===kt,Po)},e.maxUploadRetryTime);return ut.headers=de,ut.body=Te.uploadData(),ut.progressCallback=f||null,ut.errorHandler=G0(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(l,xu,i,u,!1);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=CA(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,xu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function TA(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let ut="";for(let st=0;st<2;st++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+y;const E=SA(e,r,i),C=wS(E,t),oe=zc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+y+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===oe)throw hA();const de={name:E.fullPath},Te=vd(u,n.host,n._protocol),tt=n.maxUploadRetryTime,dt=new Gc(Te,"POST",FI(n,t),tt);return dt.urlParams=de,dt.headers=l,dt.body=oe.uploadData(),dt.errorHandler=G0(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dA(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new sN(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bS(this._state)){case Ms.SUCCESS:W0(this._resolve.bind(null,this.snapshot))();break;case Ms.CANCELED:case Ms.ERROR:W0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bS(this._state)){case Ms.RUNNING:case Ms.PAUSED:e.next&&W0(e.next.bind(e,this.snapshot))();break;case Ms.SUCCESS:e.complete&&W0(e.complete.bind(e))();break;default:e.error&&W0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class lg{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lg(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EA(this._location.path)}get storage(){return this._service}get parent(){const e=function BP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new lg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw pA(e)}}function PA(n,e,t){return IS.apply(this,arguments)}function IS(){return IS=(0,Me.Z)(function*(n,e,t){const i=yield NA(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield PA(n,e,i.nextPageToken))}),IS.apply(this,arguments)}function NA(n,e){null!=e&&"number"==typeof e.maxResults&&mS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=YP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,xu)}function _N(n){n._throwIfRoot("getDownloadURL");const e=function QP(n,e,t){const i=vd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Gc(i,"GET",function ZP(n,e){return function t(r,i){const u=bA(n,i,e);return Wc(null!==u),function GP(n,e,t,r){const i=_S(e);if(null===i||!PI(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(E=>{const A=n.fullPath;return vd("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+mA({alt:"media",token:E})})[0]}(u,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=yw(e),f}(n.storage,n._location,mw());return n.storage.makeRequestWithTokens(e,xu).then(t=>{if(null===t)throw function yP(){return new Ar("no-download-url","The given file does not have any download URLs.")}();return t})}function OA(n,e){const t=function VP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ns(n._location.bucket,t);return new lg(n.storage,r)}function FA(n,e){if(n instanceof xS){const t=n;if(null==t._bucket)throw function gP(){return new Ar("no-default-bucket","No default bucket found. Did you set the '"+cA+"' property when initializing the app?")}();const r=new lg(t,t._bucket);return null!=e?FA(r,e):r}return void 0!==e?OA(n,e):n}function IN(n,e){if(e&&function EN(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof xS)return function bN(n,e){return new lg(n,e)}(n,e);throw z0("To use ref(service, url), the first argument must be a Storage instance.")}return FA(n,e)}function LA(n,e){const t=e?.[cA];return null==t?null:ns.makeFromBucketSpec(t,n)}class xS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=uA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ns.makeFromBucketSpec(i,this._host):LA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):LA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new _P(fA());{const l=function RP(n,e,t,r,i,u,l=!0){const f=mA(n.urlParams),y=n.url+f,E=Object.assign({},n.headers);return function TP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function DP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function SP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,u),function AP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new CP(y,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Me.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const UA="@firebase/storage";function HA(n,e){return IN(n=(0,Tt.m9)(n),e)}function PN(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xS(t,r,i,e,Jr.SDK_VERSION)}!function NN(){(0,Jr._registerComponent)(new Yo.wA("storage",PN,"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(UA,"0.9.14",""),(0,Jr.registerVersion)(UA,"0.9.14","esm2017")}();class UI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $A{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new UI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new UI(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?l=>t(new UI(l,this,this._ref)):{next:t.next?l=>t.next(new UI(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class zA{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new _d(e,this._service))}get items(){return this._delegate.items.map(e=>new _d(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _d{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function kN(n,e){return OA(n,e)}(this._delegate,e);return new _d(t,this.storage)}get root(){return new _d(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new _d(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $A(function CN(n,e,t){return function pN(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new MA(n,new zc(e),t)}(n=(0,Tt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ro.RAW,r){this._throwIfRoot("putString");const i=vS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new $A(new MA(this._delegate,new zc(i.data,!0),u),this)}listAll(){return function AN(n){return function mN(n){const e={prefixes:[],items:[]};return PA(n,e).then(()=>e)}(n=(0,Tt.m9)(n))}(this._delegate).then(e=>new zA(e,this.storage))}list(e){return function TN(n,e){return NA(n=(0,Tt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zA(t,this.storage))}getMetadata(){return function DN(n){return function yN(n){n._throwIfRoot("getMetadata");const e=CA(n.storage,n._location,mw());return n.storage.makeRequestWithTokens(e,xu)}(n=(0,Tt.m9)(n))}(this._delegate)}updateMetadata(e){return function SN(n,e){return function vN(n,e){n._throwIfRoot("updateMetadata");const t=function XP(n,e,t,r){const u=vd(e.fullServerUrl(),n.host,n._protocol),f=wS(t,r),E=n.maxOperationRetryTime,C=new Gc(u,"PATCH",FI(n,r),E);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=yw(e),C}(n.storage,n._location,e,mw());return n.storage.makeRequestWithTokens(t,xu)}(n=(0,Tt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function RN(n){return _N(n=(0,Tt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function MN(n){return function wN(n){n._throwIfRoot("deleteObject");const e=function JP(n,e){const r=vd(e.fullServerUrl(),n.host,n._protocol),f=new Gc(r,"DELETE",function l(y,E){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=yw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,xu)}(n=(0,Tt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw pA(e)}}class GA{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WA(e))throw z0("ref() expected a child path but got a URL, use refFromURL instead.");return new _d(HA(this._delegate,e),this)}refFromURL(e){if(!WA(e))throw z0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch{throw z0("refFromUrl() expected a valid full URL but got an invalid one.")}return new _d(HA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function jA(n,e,t,r={}){!function xN(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Tt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function WA(n){return/^[A-Za-z]+:\/\//.test(n)}function UN(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new GA(t,r)}function qA(n){const e=function VN(n){return new yi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function iP(n,e=mo.z){return(0,Sr.e)((t,r)=>{let i=null,u=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const E=u;u=null,r.next(E)}};function y(){const E=l+n,C=e.now();if(C<E)return i=this.schedule(void 0,E-C),void r.add(i);f()}t.subscribe((0,On.x)(r,E=>{u=E,l=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,vt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function BI(n){return{getDownloadURL:()=>ct(void 0).pipe(Rn.fc,jr(()=>n.getDownloadURL()),Rn.iC),getMetadata:()=>ct(void 0).pipe(Rn.fc,jr(()=>n.getMetadata()),Rn.iC),delete:()=>(0,pn.D)(n.delete()),child:e=>BI(n.child(e)),updateMetadata:e=>(0,pn.D)(n.updateMetadata(e)),put:(e,t)=>qA(n.put(e,t)),putString:(e,t,r)=>qA(n.putString(e,t,r)),list:e=>(0,pn.D)(n.list(e)),listAll:()=>(0,pn.D)(n.listAll())}}!function BN(n){const e={TaskState:Ms,TaskEvent:iN,StringFormat:Ro,Storage:GA,Reference:_d};n.INTERNAL.registerComponent(new Yo.wA("storage-compat",UN,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(oc.Z);const HN=new h.OlP("angularfire2.storageBucket"),jN=new h.OlP("angularfire2.storage.maxUploadRetryTime"),$N=new h.OlP("angularfire2.storage.maxOperationRetryTime"),zN=new h.OlP("angularfire2.storage.use-emulator");let GN=(()=>{class n{constructor(t,r,i,u,l,f,y,E,C,A){const W=(0,Dr.on)(t,l,r);this.storage=(0,Dr.cc)(`${W.name}.storage.${i}`,"AngularFireStorage",W.name,()=>{const oe=l.runOutsideAngular(()=>W.storage(i||void 0)),de=C;return de&&oe.useEmulator(...de),y&&oe.setMaxUploadRetryTime(y),E&&oe.setMaxOperationRetryTime(E),oe},[y,E])}ref(t){return BI(this.storage.ref(t))}refFromURL(t){return BI(this.storage.refFromURL(t))}upload(t,r,i){return BI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Dr.Dh),h.LFG(Dr.xv,8),h.LFG(HN,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Rn.HU),h.LFG(jN,8),h.LFG($N,8),h.LFG(zN,8),h.LFG(MI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),qN=(()=>{class n{constructor(){z1.Z.registerVersion("angularfire",Rn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[GN],imports:[WN]}),n})();class KA{}const wd="*";function ZN(n,e){return{type:7,name:n,definitions:e,options:{}}}function ZA(n,e=null){return{type:4,styles:e,timings:n}}function YA(n,e=null){return{type:2,steps:n,options:e}}function VI(n){return{type:6,styles:n,offset:null}}function QA(n,e,t){return{type:0,name:n,styles:e,options:t}}function XA(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function JA(n){Promise.resolve().then(n)}class vw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){JA(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class eR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?JA(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==u&&this._onFinish()}),l.onDestroy(()=>{++r==u&&this._onDestroy()}),l.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((l,f)=>Math.max(l,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function tR(n){return new h.vHH(3e3,!1)}function RO(){return typeof window<"u"&&typeof window.document<"u"}function DS(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function vf(n){switch(n.length){case 0:return new vw;case 1:return n[0];default:return new eR(n)}}function nR(n,e,t,r,i=new Map,u=new Map){const l=[],f=[];let y=-1,E=null;if(r.forEach(C=>{const A=C.get("offset"),W=A==y,oe=W&&E||new Map;C.forEach((de,Te)=>{let Pe=Te,tt=de;if("offset"!==Te)switch(Pe=e.normalizePropertyName(Pe,l),tt){case"!":tt=i.get(Te);break;case wd:tt=u.get(Te);break;default:tt=e.normalizeStyleValue(Te,Pe,tt,l)}oe.set(Pe,tt)}),W||f.push(oe),E=oe,y=A}),l.length)throw function vO(n){return new h.vHH(3502,!1)}();return f}function SS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&TS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&TS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&TS(t,"destroy",n)))}}function TS(n,e,t){const u=AS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(u._data=l),u}function AS(n,e,t,r,i="",u=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!l}}function Mo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function rR(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let RS=(n,e)=>!1,iR=(n,e,t)=>[],sR=null;function MS(n){const e=n.parentNode||n.host;return e===sR?null:e}(DS()||typeof Element<"u")&&(RO()?(sR=(()=>document.documentElement)(),RS=(n,e)=>{for(;e;){if(e===n)return!0;e=MS(e)}return!1}):RS=(n,e)=>n.contains(e),iR=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let dg=null,oR=!1;const aR=RS,uR=iR;let cR=(()=>{class n{validateStyleProperty(t){return function kO(n){dg||(dg=function PO(){return typeof document<"u"?document.body:null}()||{},oR=!!dg.style&&"WebkitAppearance"in dg.style);let e=!0;return dg.style&&!function MO(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in dg.style,!e&&oR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in dg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return aR(t,r)}getParentElement(t){return MS(t)}query(t,r,i){return uR(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,l,f=[],y){return new vw(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),kS=(()=>{class n{}return n.NOOP=new cR,n})();const PS="ng-enter",HI="ng-leave",jI="ng-trigger",$I=".ng-trigger",dR="ng-animating",NS=".ng-animating";function Ed(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OS(parseFloat(e[1]),e[2])}function OS(n,e){return"s"===e?1e3*n:n}function zI(n,e,t){return n.hasOwnProperty("duration")?n:function FO(n,e,t){let i,u=0,l="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(tR()),{duration:0,delay:0,easing:""};i=OS(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=OS(parseFloat(y),f[4]));const E=f[5];E&&(l=E)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function YN(){return new h.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function QN(){return new h.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,tR())}return{duration:i,delay:u,easing:l}}(n,e,t)}function _w(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hR(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function _f(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function pR(n,e,t){return t?e+":"+t+";":""}function gR(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=pR(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=pR(0,VO(t),n.style[t]));n.setAttribute("style",e)}function qc(n,e,t){n.style&&(e.forEach((r,i)=>{const u=LS(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),DS()&&gR(n))}function hg(n,e){n.style&&(e.forEach((t,r)=>{const i=LS(r);n.style[i]=""}),DS()&&gR(n))}function ww(n){return Array.isArray(n)?1==n.length?n[0]:YA(n):n}const FS=new RegExp("{{\\s*(.+?)\\s*}}","g");function mR(n){let e=[];if("string"==typeof n){let t;for(;t=FS.exec(n);)e.push(t[1]);FS.lastIndex=0}return e}function Ew(n,e,t){const r=n.toString(),i=r.replace(FS,(u,l)=>{let f=e[l];return null==f&&(t.push(function JN(n){return new h.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function GI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const BO=/-+([a-z0-9])/g;function LS(n){return n.replace(BO,(...e)=>e[1].toUpperCase())}function VO(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ko(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function eO(n){return new h.vHH(3004,!1)}()}}function yR(n,e){return window.getComputedStyle(n)[e]}function WO(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function qO(n,e,t){if(":"==n[0]){const y=function KO(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function pO(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function fO(n){return new h.vHH(3015,!1)}()),e;const i=r[1],u=r[2],l=r[3];e.push(vR(i,l));"<"==u[0]&&!("*"==i&&"*"==l)&&e.push(vR(l,i))}(r,t,e)):t.push(n),t}const ZI=new Set(["true","1"]),YI=new Set(["false","0"]);function vR(n,e){const t=ZI.has(n)||YI.has(n),r=ZI.has(e)||YI.has(e);return(i,u)=>{let l="*"==n||n==i,f="*"==e||e==u;return!l&&t&&"boolean"==typeof i&&(l=i?ZI.has(n):YI.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?ZI.has(e):YI.has(e)),l&&f}}const ZO=new RegExp("s*:selfs*,?","g");function US(n,e,t,r){return new YO(n).build(e,t,r)}class YO{constructor(e){this._driver=e}build(e,t,r){const i=new JO(t);return this._resetContextStyleTimingState(i),ko(this,ww(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function nO(){return new h.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,E=y.name;E.toString().split(/\s*,\s*/).forEach(C=>{y.name=C,u.push(this.visitState(y,t))}),y.name=E}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,l.push(y)}else t.errors.push(function rO(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,l=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{mR(y).forEach(E=>{l.hasOwnProperty(E)||u.add(E)})})}),u.size&&(GI(u.values()),t.errors.push(function iO(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ko(this,ww(e.animation),t);return{type:1,matchers:WO(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:fg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ko(this,r,t)),options:fg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(l=>{t.currentTime=r;const f=ko(this,l,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:fg(e.options)}}visitAnimate(e,t){const r=function tF(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return BS(zI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=BS(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=zI(t,e);return BS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:VI({});if(5==u.type)i=this.visitKeyframes(u,t);else{let l=e.styles,f=!1;if(!l){f=!0;const E={};r.easing&&(E.easing=r.easing),l=VI(E)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(l,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===wd?r.push(f):t.errors.push(new h.vHH(3002,!1)):r.push(hR(f));let u=!1,l=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(l=f.get("easing"),f.delete("easing")),!u))for(let y of f.values())if(y.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((f,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),C=E.get(y);let A=!0;C&&(u!=i&&u>=C.startTime&&i<=C.endTime&&(t.errors.push(function oO(n,e,t,r,i){return new h.vHH(3010,!1)}()),A=!1),u=C.startTime),A&&E.set(y,{startTime:u,endTime:i}),t.options&&function UO(n,e,t){const r=e.params||{},i=mR(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function XN(n){return new h.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function aO(){return new h.vHH(3011,!1)}()),r;let u=0;const l=[];let f=!1,y=!1,E=0;const C=e.steps.map(tt=>{const dt=this._makeStyleAst(tt,t);let ut=null!=dt.offset?dt.offset:function eF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(dt.styles),st=0;return null!=ut&&(u++,st=dt.offset=ut),y=y||st<0||st>1,f=f||st<E,E=st,l.push(st),dt});y&&t.errors.push(function uO(){return new h.vHH(3012,!1)}()),f&&t.errors.push(function cO(){return new h.vHH(3200,!1)}());const A=e.steps.length;let W=0;u>0&&u<A?t.errors.push(function lO(){return new h.vHH(3202,!1)}()):0==u&&(W=1/(A-1));const oe=A-1,de=t.currentTime,Te=t.currentAnimateTimings,Pe=Te.duration;return C.forEach((tt,dt)=>{const ut=W>0?dt==oe?1:W*dt:l[dt],st=ut*Pe;t.currentTime=de+Te.delay+st,Te.duration=st,this._validateStyleAst(tt,t),tt.offset=ut,r.styles.push(tt)}),r}visitReference(e,t){return{type:8,animation:ko(this,ww(e.animation),t),options:fg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:fg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:fg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,l]=function QO(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ZO,"")),n=n.replace(/@\*/g,$I).replace(/@\w+/g,t=>$I+"-"+t.slice(1)).replace(/:animating/g,NS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Mo(t.collectedStyles,t.currentQuerySelector,new Map);const f=ko(this,ww(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:f,originalSelector:e.selector,options:fg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function dO(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:zI(e.timings,t.errors,!0);return{type:12,animation:ko(this,ww(e.animation),t),timings:r,options:null}}}class JO{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fg(n){return n?(n=_w(n)).params&&(n.params=function XO(n){return n?_w(n):null}(n.params)):n={},n}function BS(n,e,t){return{duration:n,delay:e,easing:t}}function VS(n,e,t,r,i,u,l=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:l,subTimeline:f}}class QI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const iF=new RegExp(":enter","g"),oF=new RegExp(":leave","g");function HS(n,e,t,r,i,u=new Map,l=new Map,f,y,E=[]){return(new aF).buildKeyframes(n,e,t,r,i,u,l,f,y,E)}class aF{buildKeyframes(e,t,r,i,u,l,f,y,E,C=[]){E=E||new QI;const A=new jS(e,t,E,i,u,C,[]);A.options=y;const W=y.delay?Ed(y.delay):0;A.currentTimeline.delayNextStep(W),A.currentTimeline.setStyles([l],null,A.errors,y),ko(this,r,A);const oe=A.timelines.filter(de=>de.containsAnimation());if(oe.length&&f.size){let de;for(let Te=oe.length-1;Te>=0;Te--){const Pe=oe[Te];if(Pe.element===t){de=Pe;break}}de&&!de.allowOnlyTimelineStyles()&&de.setStyles([f],null,A.errors,y)}return oe.length?oe.map(de=>de.buildKeyframes()):[VS(t,[],[],[],0,W,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);u!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const l="number"==typeof u?u:Ed(Ew(u,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const l=null!=r.duration?Ed(r.duration):null,f=null!=r.delay?Ed(r.delay):null;return 0!==l&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,l,f);u=Math.max(u,E.duration+E.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),ko(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=XI);const l=Ed(u.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ko(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Ed(e.options.delay):0;e.steps.forEach(l=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),ko(this,l,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return zI(t.params?Ew(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Ed(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=XI);let l=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((E,C)=>{t.currentQueryIndex=C;const A=t.createSubContext(e.options,E);u&&A.delayNextStep(u),E===t.element&&(y=A.currentTimeline),ko(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,l=Math.abs(u.duration),f=l*(t.currentQueryTotal-1);let y=l*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const C=t.currentTimeline;y&&C.delayNextStep(y);const A=C.currentTime;ko(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const XI={};class jS{constructor(e,t,r,i,u,l,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=l,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=XI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new JI(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ed(r.duration)),null!=r.delay&&(i.delay=Ed(r.delay));const u=r.params;if(u){let l=i.params;l||(l=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!l.hasOwnProperty(f))&&(l[f]=Ew(u[f],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new jS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=XI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new uF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,l){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(iF,"."+this._enterClassName)).replace(oF,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),f.push(...E)}return!u&&0==f.length&&l.push(function hO(n){return new h.vHH(3014,!1)}()),f}}class JI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new JI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||wd),this._currentKeyframe.set(t,wd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},l=function cF(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,wd)}else _f(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of l){const E=Ew(y,u,r);this._pendingStyles.set(f,E),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??wd),this._updateStyle(f,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const E=_f(f,new Map,this._backFill);E.forEach((C,A)=>{"!"===C?e.add(A):C===wd&&t.add(A)}),r||E.set("offset",y/this.duration),i.push(E)});const u=e.size?GI(e.values()):[],l=t.size?GI(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return VS(this.element,i,u,l,this.duration,this.startTime,this.easing,!1)}}class uF extends JI{constructor(e,t,r,i,u,l,f=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],l=r+t,f=t/l,y=_f(e[0]);y.set("offset",0),u.push(y);const E=_f(e[0]);E.set("offset",ER(f)),u.push(E);const C=e.length-1;for(let A=1;A<=C;A++){let W=_f(e[A]);const oe=W.get("offset");W.set("offset",ER((t+oe*r)/l)),u.push(W)}r=l,t=0,i="",e=u}return VS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ER(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $S{}const lF=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class dF extends $S{normalizePropertyName(e,t){return LS(e)}normalizeStyleValue(e,t,r,i){let u="";const l=r.toString().trim();if(lF.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function tO(n,e){return new h.vHH(3005,!1)}())}return l+u}}function bR(n,e,t,r,i,u,l,f,y,E,C,A,W){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:l,timelines:f,queriedElements:y,preStyleProps:E,postStyleProps:C,totalTime:A,errors:W}}const zS={};class IR{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function hF(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,l,f,y,E,C){const A=[],W=this.ast.options&&this.ast.options.params||zS,de=this.buildStyles(r,f&&f.params||zS,A),Te=y&&y.params||zS,Pe=this.buildStyles(i,Te,A),tt=new Set,dt=new Map,ut=new Map,st="void"===i,Rt={params:fF(Te,W),delay:this.ast.options?.delay},kt=C?[]:HS(e,t,this.ast.animation,u,l,de,Pe,Rt,E,A);let an=0;if(kt.forEach(Po=>{an=Math.max(Po.duration+Po.delay,an)}),A.length)return bR(t,this._triggerName,r,i,st,de,Pe,[],[],dt,ut,an,A);kt.forEach(Po=>{const xd=Po.element,kk=Mo(dt,xd,new Set);Po.preStyleProps.forEach(Eg=>kk.add(Eg));const zw=Mo(ut,xd,new Set);Po.postStyleProps.forEach(Eg=>zw.add(Eg)),xd!==t&&tt.add(xd)});const Qr=GI(tt.values());return bR(t,this._triggerName,r,i,st,de,Pe,kt,Qr,dt,ut,an)}}function fF(n,e){const t=_w(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class pF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=_w(this.defaultParams);return Object.keys(e).forEach(u=>{const l=e[u];null!==l&&(i[u]=l)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((l,f)=>{l&&(l=Ew(l,i,t));const y=this.normalizer.normalizePropertyName(f,t);l=this.normalizer.normalizeStyleValue(f,y,l,t),r.set(y,l)})}),r}}class mF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new pF(i.style,i.options&&i.options.params||{},r))}),xR(this.states,"true","1"),xR(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new IR(e,i,this.states))}),this.fallbackTransition=function yF(n,e,t){return new IR(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function xR(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const vF=new QI;class _F{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=US(this._driver,t,r,[]);if(r.length)throw function _O(n){return new h.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=nR(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let l;const f=new Map;if(u?(l=HS(this._driver,t,u,PS,HI,new Map,new Map,r,vF,i),l.forEach(C=>{const A=Mo(f,C.element,new Map);C.postStyleProps.forEach(W=>A.set(W,null))})):(i.push(function wO(){return new h.vHH(3300,!1)}()),l=[]),i.length)throw function EO(n){return new h.vHH(3504,!1)}();f.forEach((C,A)=>{C.forEach((W,oe)=>{C.set(oe,this._driver.computeStyle(A,oe,wd))})});const E=vf(l.map(C=>{const A=f.get(C.element);return this._buildPlayer(C,new Map,A)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function bO(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=AS(t,"","","");return SS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const CR="ng-animate-queued",GS="ng-animate-disabled",xF=[],DR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wa="__ng_removed";class WS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function AF(n){return n??null}(r?e.value:e),r){const u=_w(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const bw="void",qS=new WS(bw);class DF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ea(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function IO(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function xO(n){return new h.vHH(3303,!1)}();if(!function RF(n){return"start"==n||"done"==n}(r))throw function CO(n,e){return new h.vHH(3400,!1)}();const u=Mo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};u.push(l);const f=Mo(this._engine.statesByElement,e,new Map);return f.has(t)||(Ea(e,jI),Ea(e,jI+"-"+t),f.set(t,qS)),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(l);y>=0&&u.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function DO(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),l=new KS(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ea(e,jI),Ea(e,jI+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const E=new WS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),f.set(t,E),y||(y=qS),E.value!==bw&&y.value===E.value){if(!function PF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,E.params)){const Te=[],Pe=u.matchStyles(y.value,y.params,Te),tt=u.matchStyles(E.value,E.params,Te);Te.length?this._engine.reportError(Te):this._engine.afterFlush(()=>{hg(e,Pe),qc(e,tt)})}return}const W=Mo(this._engine.playersByElement,e,[]);W.forEach(Te=>{Te.namespaceId==this.id&&Te.triggerName==t&&Te.queued&&Te.destroy()});let oe=u.matchTransition(y.value,E.value,e,E.params),de=!1;if(!oe){if(!i)return;oe=u.fallbackTransition,de=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:oe,fromState:y,toState:E,player:l,isFallbackTransition:de}),de||(Ea(e,CR),l.onStart(()=>{q0(e,CR)})),l.onDone(()=>{let Te=this.players.indexOf(l);Te>=0&&this.players.splice(Te,1);const Pe=this._engine.playersByElement.get(e);if(Pe){let tt=Pe.indexOf(l);tt>=0&&Pe.splice(tt,1)}}),this.players.push(l),W.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,$I,!0);r.forEach(i=>{if(i[wa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),l=new Map;if(u){const f=[];if(u.forEach((y,E)=>{if(l.set(E,y.value),this._triggers.has(E)){const C=this.trigger(e,E,bw,i);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&vf(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const l=u.name;if(i.has(l))return;i.add(l);const y=this._triggers.get(l).fallbackTransition,E=r.get(l)||qS,C=new WS(bw),A=new KS(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:y,fromState:E,toState:C,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[wa];(!u||u===DR)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ea(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,l=this._elementListeners.get(u);l&&l.forEach(f=>{if(f.name==r.triggerName){const y=AS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,SS(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==u||0==l?u-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class SF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new DF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const E=r.indexOf(y);r.splice(E+1,0,e),l=!0;break}f=this.driver.getParentElement(f)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(ex(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ex(t))return;const u=t[wa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ea(e,GS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),q0(e,GS))}removeNode(e,t,r,i){if(ex(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[wa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return ex(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,$I,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,NS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[wa];if(t&&t.setForRemoval){if(e[wa]=DR,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(GS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ea(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?vf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function SO(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new QI,i=[],u=new Map,l=[],f=new Map,y=new Map,E=new Map,C=new Set;this.disabledNodes.forEach(Dt=>{C.add(Dt);const Ht=this.driver.query(Dt,".ng-animate-queued",!0);for(let Gt=0;Gt<Ht.length;Gt++)C.add(Ht[Gt])});const A=this.bodyNode,W=Array.from(this.statesByElement.keys()),oe=AR(W,this.collectedEnterElements),de=new Map;let Te=0;oe.forEach((Dt,Ht)=>{const Gt=PS+Te++;de.set(Ht,Gt),Dt.forEach(In=>Ea(In,Gt))});const Pe=[],tt=new Set,dt=new Set;for(let Dt=0;Dt<this.collectedLeaveElements.length;Dt++){const Ht=this.collectedLeaveElements[Dt],Gt=Ht[wa];Gt&&Gt.setForRemoval&&(Pe.push(Ht),tt.add(Ht),Gt.hasAnimation?this.driver.query(Ht,".ng-star-inserted",!0).forEach(In=>tt.add(In)):dt.add(Ht))}const ut=new Map,st=AR(W,Array.from(tt));st.forEach((Dt,Ht)=>{const Gt=HI+Te++;ut.set(Ht,Gt),Dt.forEach(In=>Ea(In,Gt))}),e.push(()=>{oe.forEach((Dt,Ht)=>{const Gt=de.get(Ht);Dt.forEach(In=>q0(In,Gt))}),st.forEach((Dt,Ht)=>{const Gt=ut.get(Ht);Dt.forEach(In=>q0(In,Gt))}),Pe.forEach(Dt=>{this.processLeaveNode(Dt)})});const Rt=[],kt=[];for(let Dt=this._namespaceList.length-1;Dt>=0;Dt--)this._namespaceList[Dt].drainQueuedTransitions(t).forEach(Gt=>{const In=Gt.player,Ei=Gt.element;if(Rt.push(In),this.collectedEnterElements.length){const is=Ei[wa];if(is&&is.setForMove){if(is.previousTriggersValues&&is.previousTriggersValues.has(Gt.triggerName)){const bg=is.previousTriggersValues.get(Gt.triggerName),Ia=this.statesByElement.get(Gt.element);if(Ia&&Ia.has(Gt.triggerName)){const Mx=Ia.get(Gt.triggerName);Mx.value=bg,Ia.set(Gt.triggerName,Mx)}}return void In.destroy()}}const Zc=!A||!this.driver.containsElement(A,Ei),No=ut.get(Ei),If=de.get(Ei),Rr=this._buildInstruction(Gt,r,If,No,Zc);if(Rr.errors&&Rr.errors.length)return void kt.push(Rr);if(Zc)return In.onStart(()=>hg(Ei,Rr.fromStyles)),In.onDestroy(()=>qc(Ei,Rr.toStyles)),void i.push(In);if(Gt.isFallbackTransition)return In.onStart(()=>hg(Ei,Rr.fromStyles)),In.onDestroy(()=>qc(Ei,Rr.toStyles)),void i.push(In);const Ok=[];Rr.timelines.forEach(is=>{is.stretchStartingKeyframe=!0,this.disabledNodes.has(is.element)||Ok.push(is)}),Rr.timelines=Ok,r.append(Ei,Rr.timelines),l.push({instruction:Rr,player:In,element:Ei}),Rr.queriedElements.forEach(is=>Mo(f,is,[]).push(In)),Rr.preStyleProps.forEach((is,bg)=>{if(is.size){let Ia=y.get(bg);Ia||y.set(bg,Ia=new Set),is.forEach((Mx,ZT)=>Ia.add(ZT))}}),Rr.postStyleProps.forEach((is,bg)=>{let Ia=E.get(bg);Ia||E.set(bg,Ia=new Set),is.forEach((Mx,ZT)=>Ia.add(ZT))})});if(kt.length){const Dt=[];kt.forEach(Ht=>{Dt.push(function TO(n,e){return new h.vHH(3505,!1)}())}),Rt.forEach(Ht=>Ht.destroy()),this.reportError(Dt)}const an=new Map,Qr=new Map;l.forEach(Dt=>{const Ht=Dt.element;r.has(Ht)&&(Qr.set(Ht,Ht),this._beforeAnimationBuild(Dt.player.namespaceId,Dt.instruction,an))}),i.forEach(Dt=>{const Ht=Dt.element;this._getPreviousPlayers(Ht,!1,Dt.namespaceId,Dt.triggerName,null).forEach(In=>{Mo(an,Ht,[]).push(In),In.destroy()})});const Po=Pe.filter(Dt=>MR(Dt,y,E)),xd=new Map;TR(xd,this.driver,dt,E,wd).forEach(Dt=>{MR(Dt,y,E)&&Po.push(Dt)});const zw=new Map;oe.forEach((Dt,Ht)=>{TR(zw,this.driver,new Set(Dt),y,"!")}),Po.forEach(Dt=>{const Ht=xd.get(Dt),Gt=zw.get(Dt);xd.set(Dt,new Map([...Array.from(Ht?.entries()??[]),...Array.from(Gt?.entries()??[])]))});const Eg=[],Pk=[],Nk={};l.forEach(Dt=>{const{element:Ht,player:Gt,instruction:In}=Dt;if(r.has(Ht)){if(C.has(Ht))return Gt.onDestroy(()=>qc(Ht,In.toStyles)),Gt.disabled=!0,Gt.overrideTotalTime(In.totalTime),void i.push(Gt);let Ei=Nk;if(Qr.size>1){let No=Ht;const If=[];for(;No=No.parentNode;){const Rr=Qr.get(No);if(Rr){Ei=Rr;break}If.push(No)}If.forEach(Rr=>Qr.set(Rr,Ei))}const Zc=this._buildAnimation(Gt.namespaceId,In,an,u,zw,xd);if(Gt.setRealPlayer(Zc),Ei===Nk)Eg.push(Gt);else{const No=this.playersByElement.get(Ei);No&&No.length&&(Gt.parentPlayer=vf(No)),i.push(Gt)}}else hg(Ht,In.fromStyles),Gt.onDestroy(()=>qc(Ht,In.toStyles)),Pk.push(Gt),C.has(Ht)&&i.push(Gt)}),Pk.forEach(Dt=>{const Ht=u.get(Dt.element);if(Ht&&Ht.length){const Gt=vf(Ht);Dt.setRealPlayer(Gt)}}),i.forEach(Dt=>{Dt.parentPlayer?Dt.syncPlayerEvents(Dt.parentPlayer):Dt.destroy()});for(let Dt=0;Dt<Pe.length;Dt++){const Ht=Pe[Dt],Gt=Ht[wa];if(q0(Ht,HI),Gt&&Gt.hasAnimation)continue;let In=[];if(f.size){let Zc=f.get(Ht);Zc&&Zc.length&&In.push(...Zc);let No=this.driver.query(Ht,NS,!0);for(let If=0;If<No.length;If++){let Rr=f.get(No[If]);Rr&&Rr.length&&In.push(...Rr)}}const Ei=In.filter(Zc=>!Zc.destroyed);Ei.length?MF(this,Ht,Ei):this.processLeaveNode(Ht)}return Pe.length=0,Eg.forEach(Dt=>{this.players.push(Dt),Dt.onDone(()=>{Dt.destroy();const Ht=this.players.indexOf(Dt);this.players.splice(Ht,1)}),Dt.play()}),Eg}elementContainsData(e,t){let r=!1;const i=t[wa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let l=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(l=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==bw;f.forEach(E=>{E.queued||!y&&E.triggerName!=i||l.push(E)})}}return(r||i)&&(l=l.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),l}_beforeAnimationBuild(e,t,r){const u=t.element,l=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,C=E!==u,A=Mo(r,E,[]);this._getPreviousPlayers(E,C,l,f,t.toState).forEach(oe=>{const de=oe.getRealPlayer();de.beforeDestroy&&de.beforeDestroy(),oe.destroy(),A.push(oe)})}hg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,l){const f=t.triggerName,y=t.element,E=[],C=new Set,A=new Set,W=t.timelines.map(de=>{const Te=de.element;C.add(Te);const Pe=Te[wa];if(Pe&&Pe.removedBeforeQueried)return new vw(de.duration,de.delay);const tt=Te!==y,dt=function kF(n){const e=[];return RR(n,e),e}((r.get(Te)||xF).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===Te),ut=u.get(Te),st=l.get(Te),Rt=nR(0,this._normalizer,0,de.keyframes,ut,st),kt=this._buildPlayer(de,Rt,dt);if(de.subTimeline&&i&&A.add(Te),tt){const an=new KS(e,f,Te);an.setRealPlayer(kt),E.push(an)}return kt});E.forEach(de=>{Mo(this.playersByQueriedElement,de.element,[]).push(de),de.onDone(()=>function TF(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,de.element,de))}),C.forEach(de=>Ea(de,dR));const oe=vf(W);return oe.onDestroy(()=>{C.forEach(de=>q0(de,dR)),qc(y,t.toStyles)}),A.forEach(de=>{Mo(i,de,[]).push(oe)}),oe}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new vw(e.duration,e.delay)}}class KS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new vw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>SS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Mo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ex(n){return n&&1===n.nodeType}function SR(n,e){const t=n.style.display;return n.style.display=e??"none",t}function TR(n,e,t,r,i){const u=[];t.forEach(y=>u.push(SR(y)));const l=[];r.forEach((y,E)=>{const C=new Map;y.forEach(A=>{const W=e.computeStyle(E,A,i);C.set(A,W),(!W||0==W.length)&&(E[wa]=CF,l.push(E))}),n.set(E,C)});let f=0;return t.forEach(y=>SR(y,u[f++])),l}function AR(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function l(f){if(!f)return 1;let y=u.get(f);if(y)return y;const E=f.parentNode;return y=t.has(E)?E:i.has(E)?1:l(E),u.set(f,y),y}return e.forEach(f=>{const y=l(f);1!==y&&t.get(y).push(f)}),t}function Ea(n,e){n.classList?.add(e)}function q0(n,e){n.classList?.remove(e)}function MF(n,e,t){vf(t).onDone(()=>n.processLeaveNode(e))}function RR(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof eR?RR(r.players,e):e.push(r)}}function MR(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class tx{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new SF(e,t,r),this._timelineEngine=new _F(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const l=e+"-"+i;let f=this._triggerCache[l];if(!f){const y=[],C=US(this._driver,u,y,[]);if(y.length)throw function yO(n,e){return new h.vHH(3404,!1)}();f=function gF(n,e,t){return new mF(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,l]=rR(r);this._timelineEngine.command(u,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[l,f]=rR(r);return this._timelineEngine.listen(l,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let OF=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&qc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qc(this._element,this._initialStyles),this._endStyles&&(qc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(hg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hg(this._element,this._endStyles),this._endStyles=null),qc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ZS(n){let e=null;return n.forEach((t,r)=>{(function FF(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class kR{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:yR(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class LF{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return aR(e,t)}getParentElement(e){return MS(e)}query(e,t,r){return uR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,l=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const E=new Map,C=l.filter(oe=>oe instanceof kR);(function HO(n,e){return 0===n||0===e})(r,i)&&C.forEach(oe=>{oe.currentSnapshot.forEach((de,Te)=>E.set(Te,de))});let A=function LO(n){return n.length?n[0]instanceof Map?n:n.map(e=>hR(e)):[]}(t).map(oe=>_f(oe));A=function jO(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,l)=>{r.has(l)||i.push(l),r.set(l,u)}),i.length)for(let u=1;u<e.length;u++){let l=e[u];i.forEach(f=>l.set(f,yR(n,f)))}}return e}(e,A,E);const W=function NF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZS(e[0]),e.length>1&&(r=ZS(e[e.length-1]))):e instanceof Map&&(t=ZS(e)),t||r?new OF(n,t,r):null}(e,A);return new kR(e,A,y,W)}}let UF=(()=>{class n extends KA{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?YA(t):t;return PR(this._renderer,null,r,"register",[i]),new BF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(J))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class BF extends class KN{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new VF(this._id,e,t||{},this._renderer)}}class VF{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return PR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function PR(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const NR="@.disabled";let HF=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,l)=>{const f=l?.parentNode(u);f&&l.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(u);return C||(C=new OR("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,C)),C}const l=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=C=>{Array.isArray(C)?C.forEach(y):this.engine.registerTrigger(l,f,t,C.name,C)};return r.data.animation.forEach(y),new jF(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[l,f]=u;l(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(tx),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class OR{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==NR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class jF extends OR{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==NR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function $F(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),l="";return"@"!=u.charAt(0)&&([u,l]=function zF(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,l,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let GF=(()=>{class n extends tx{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(J),h.LFG(kS),h.LFG($S),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const FR=[{provide:KA,useClass:UF},{provide:$S,useFactory:function WF(){return new dF}},{provide:tx,useClass:GF},{provide:h.FYo,useFactory:function qF(n,e,t){return new HF(n,e,t)},deps:[co,tx,h.R0b]}],YS=[{provide:kS,useFactory:()=>new LF},{provide:h.QbO,useValue:"BrowserAnimations"},...FR],LR=[{provide:kS,useClass:cR},{provide:h.QbO,useValue:"NoopAnimations"},...FR];let KF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?LR:YS}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:YS,imports:[tc]}),n})();var UR=M(7521);class Iw{constructor(e,t,r,i,u,l){this.combo=e,this.callback=t,this.allowIn=r,this.description=i,this.action=u,this.persistent=l,this.combo=Array.isArray(e)?e:[e],this.allowIn=r||[],this.description=i||""}static symbolize(e){const t={command:"\u2318",shift:"\u21e7",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193",return:"\u23ce",backspace:"\u232b"},r=e.split("+");for(let i=0;i<r.length;i++)"mod"===r[i]&&(r[i]=window.navigator&&window.navigator.platform.indexOf("Mac")>=0?"command":"ctrl"),r[i]=t[r[i]]||r[i];return r.join(" + ")}get formatted(){if(!this.formattedHotkey){const e=this.combo;for(let t=0;t<e.length;t++)e[t]=Iw.symbolize(e[t]);this.formattedHotkey=e}return this.formattedHotkey}}const BR=new h.OlP("HotkeyOptions");let VR=(()=>{class n{constructor(t){this.options=t,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new Yr.x,this.preventIn=["INPUT","SELECT","TEXTAREA"],UR.prototype.stopCallback=(r,i,u,l)=>!((" "+i.className+" ").indexOf(" mousetrap ")>-1)&&i.contentEditable&&"true"===i.contentEditable,this.mousetrap=new UR,this.initCheatSheet()}initCheatSheet(){this.options.disableCheatSheet||this.add(new Iw(this.options.cheatSheetHotkey||"?",function(t){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new Iw("esc",function(t){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription||"Hide this help menu"))}add(t,r){if(Array.isArray(t)){const i=[];for(const u of t)i.push(this.add(u,r));return i}return this.remove(t),this.hotkeys.push(t),this.mousetrap.bind(t.combo,(i,u)=>{let l=!0;if(i){const f=i.target||i.srcElement,y=f.nodeName.toUpperCase();(" "+f.className+" ").indexOf(" mousetrap ")>-1?l=!0:this.preventIn.indexOf(y)>-1&&-1===t.allowIn.map(E=>E.toUpperCase()).indexOf(y)&&(l=!1)}if(l)return t.callback.apply(this,[i,u])},r),t}remove(t,r){const i=[];if(!t){for(const l of this.hotkeys)i.push(this.remove(l,r));return i}if(Array.isArray(t)){for(const l of t)i.push(this.remove(l));return i}const u=this.findHotkey(t);return u>-1?(this.hotkeys.splice(u,1),this.mousetrap.unbind(t.combo,r),t):null}get(t){if(!t)return this.hotkeys;if(Array.isArray(t)){const r=[];for(const i of t)r.push(this.get(i));return r}for(const r of this.hotkeys)if(r.combo.indexOf(t)>-1)return r;return null}pause(t){if(!t)return this.pause(this.hotkeys);if(Array.isArray(t)){const r=[];for(const i of t)r.push(this.pause(i));return r}return this.remove(t),this.pausedHotkeys.push(t),t}unpause(t){if(!t)return this.unpause(this.pausedHotkeys);if(Array.isArray(t)){const i=[];for(const u of t)i.push(this.unpause(u));return i}const r=this.pausedHotkeys.indexOf(t);return r>-1?(this.add(t),this.pausedHotkeys.splice(r,1)):null}reset(){this.mousetrap.reset(),this.hotkeys=[],this.pausedHotkeys=[],this.initCheatSheet()}findHotkey(t){return this.hotkeys.indexOf(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(BR))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YF=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[VR,{provide:BR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Fo]]}),n})();const rx_firebaseConfig={apiKey:"AIzaSyBQujecS6EtrN0HG8TCyW9DurdU5jgFKsk",authDomain:"planning-poker-bbt.firebaseapp.com",databaseURL:"https://planning-poker-bbt-default-rtdb.firebaseio.com",projectId:"planning-poker-bbt",storageBucket:"planning-poker-bbt.appspot.com",messagingSenderId:"851619405106",appId:"1:851619405106:web:57c50f725eb9bf7ba64b2b",measurementId:"G-RW1DGDDRN4"};var ix=M(727);class Xs extends Yr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var QF=M(233),XF=M(5032);const xw={};function Cw(n,e){if(xw[n]=(xw[n]||0)+1,"function"==typeof e)return QS(n,(...r)=>({...e(...r),type:n}));switch(e?e._as:"empty"){case"empty":return QS(n,()=>({type:n}));case"props":return QS(n,r=>({...r,type:n}));default:throw new Error("Unexpected config.")}}function QS(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const HR="@ngrx/store/init";let pg=(()=>{class n extends Xs{constructor(){super({type:HR})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const rL=[pg],JS=new h.OlP("@ngrx/store Internal Root Guard"),jR=new h.OlP("@ngrx/store Internal Initial State"),eT=new h.OlP("@ngrx/store Initial State"),$R=new h.OlP("@ngrx/store Reducer Factory"),zR=new h.OlP("@ngrx/store Internal Reducer Factory Provider"),GR=new h.OlP("@ngrx/store Initial Reducers"),tT=new h.OlP("@ngrx/store Internal Initial Reducers"),WR=new h.OlP("@ngrx/store Store Features"),qR=new h.OlP("@ngrx/store Internal Store Reducers"),nT=new h.OlP("@ngrx/store Internal Feature Reducers"),KR=new h.OlP("@ngrx/store Internal Feature Configs"),rT=new h.OlP("@ngrx/store Internal Store Features"),ZR=new h.OlP("@ngrx/store Internal Feature Reducers Token"),iT=new h.OlP("@ngrx/store Feature Reducers"),YR=new h.OlP("@ngrx/store User Provided Meta Reducers"),sx=new h.OlP("@ngrx/store Meta Reducers"),QR=new h.OlP("@ngrx/store Internal Resolved Meta Reducers"),XR=new h.OlP("@ngrx/store User Runtime Checks Config"),JR=new h.OlP("@ngrx/store Internal User Runtime Checks Config"),Sw=new h.OlP("@ngrx/store Internal Runtime Checks"),Tw=new h.OlP("@ngrx/store Check if Action types are unique");function oT(n,e={}){const t=Object.keys(n),r={};for(let u=0;u<t.length;u++){const l=t[u];"function"==typeof n[l]&&(r[l]=n[l])}const i=Object.keys(r);return function(l,f){l=void 0===l?e:l;let y=!1;const E={};for(let C=0;C<i.length;C++){const A=i[C],oe=l[A],de=(0,r[A])(oe,f);E[A]=de,y=y||de!==oe}return y?E:l}}function tM(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((i,u)=>u(i),t(e))}}function nM(n,e){return Array.isArray(e)&&e.length>0&&(n=tM.apply(null,[...e,n])),(t,r)=>{const i=n(t);return(u,l)=>i(u=void 0===u?r:u,l)}}new h.OlP("@ngrx/store Root Store Provider"),new h.OlP("@ngrx/store Feature State Provider");class ox extends yi.y{}class rM extends pg{}let Aw=(()=>{class n extends Xs{constructor(t,r,i,u){super(u(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=u}get currentReducers(){return this.reducers}addFeature(t){this.addFeatures([t])}addFeatures(t){const r=t.reduce((i,{reducers:u,reducerFactory:l,metaReducers:f,initialState:y,key:E})=>{const C="function"==typeof u?function sL(n){const e=Array.isArray(n)&&n.length>0?tM(...n):t=>t;return(t,r)=>(t=e(t),(i,u)=>t(i=void 0===i?r:i,u))}(f)(u,y):nM(l,f)(u,y);return i[E]=C,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=function iL(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rM),h.LFG(eT),h.LFG(GR),h.LFG($R))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const aL=[Aw,{provide:ox,useExisting:Aw},{provide:rM,useExisting:pg}];let ax=(()=>{class n extends Yr.x{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const uL=[ax];class iM extends yi.y{}let sM=(()=>{class n extends Xs{constructor(t,r,i,u){super(u);const f=t.pipe((0,A0.Q)(QF.N)).pipe(function JF(...n){const e=(0,hr.jO)(n);return(0,Sr.e)((t,r)=>{const i=n.length,u=new Array(i);let l=n.map(()=>!1),f=!1;for(let y=0;y<i;y++)(0,R0.Xf)(n[y]).subscribe((0,On.x)(r,E=>{u[y]=E,!f&&!l[y]&&(l[y]=!0,(f=l.every(ui.y))&&(l=null))},XF.Z));t.subscribe((0,On.x)(r,y=>{if(f){const E=[y,...u];r.next(e?e(...E):E)}}))})}(r)),E=f.pipe(Hi(cL,{state:u}));this.stateSubscription=E.subscribe(({state:C,action:A})=>{this.next(C),i.next(A)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=HR,n.\u0275fac=function(t){return new(t||n)(h.LFG(pg),h.LFG(ox),h.LFG(ax),h.LFG(eT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function cL(n={state:void 0},[e,t]){const{state:r}=n;return{state:t(r,e),action:e}}const lL=[sM,{provide:iM,useExisting:sM}];let Cu=(()=>{class n extends yi.y{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t}select(t,...r){return hL.call(null,t,...r)(this)}lift(t){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(iM),h.LFG(pg),h.LFG(Aw))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const dL=[Cu];function hL(n,e,...t){return function(i){let u;if("string"==typeof n){const l=[e,...t].filter(Boolean);u=i.pipe(function eL(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,vt.U)(t=>{let r=t;for(let i=0;i<e;i++){const u=r?.[n[i]];if(!(typeof u<"u"))return;r=u}return r})}(n,...l))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);u=i.pipe((0,vt.U)(l=>n(l,e)))}return u.pipe(zd())}}const aT="https://ngrx.io/guide/store/configuration/runtime-checks";function oM(n){return void 0===n}function aM(n){return null===n}function uM(n){return Array.isArray(n)}function cM(n){return"object"==typeof n&&null!==n}function uT(n){return"function"==typeof n}function DL(n,e){return e instanceof h.OlP?n.get(e):e}function SL(n,e,t){return t.map((r,i)=>{if(e[i]instanceof h.OlP){const u=n.get(e[i]);return{key:r.key,reducerFactory:u.reducerFactory?u.reducerFactory:oT,metaReducers:u.metaReducers?u.metaReducers:[],initialState:u.initialState}}return r})}function TL(n,e){return e.map(r=>r instanceof h.OlP?n.get(r):r)}function dT(n){return"function"==typeof n?n():n}function AL(n,e){return n.concat(e)}function RL(n){if(n)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function hT(n){Object.freeze(n);const e=uT(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function vL(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const r=n[t];(cM(r)||uT(r))&&!Object.isFrozen(r)&&hT(r)}}),n}function fT(n,e=[]){return(oM(n)||aM(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;const u=n[i];return function yL(n){return uT(n)&&n.hasOwnProperty("\u0275cmp")}(u)?r:!(oM(u)||aM(u)||function gL(n){return"number"==typeof n}(u)||function pL(n){return"boolean"==typeof n}(u)||function fL(n){return"string"==typeof n}(u)||uM(u))&&(function lM(n){if(!function mL(n){return cM(n)&&!uM(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(u)?fT(u,[...e,i]):{path:[...e,i],value:u})},!1)}function fM(n,e){if(!1===n)return;const t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${aT}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function NL(n){return(0,h.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...n}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function OL({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function kL(n,e){return function(t,r){e.action(r)&&fM(fT(r),"action");const i=n(t,r);return e.state()&&fM(fT(i),"state"),i}}(t,{action:r=>n&&!pT(r),state:()=>e}):t}function FL({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function ML(n,e){return function(t,r){const i=e.action(r)?hT(r):r,u=n(t,i);return e.state()?hT(u):u}}(t,{action:r=>n&&!pT(r),state:()=>e}):t}function pT(n){return n.type.startsWith("@ngrx")}function LL({strictActionWithinNgZone:n}){return e=>n?function PL(n,e){return function(t,r){if(e.action(r)&&!h.R0b.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${aT}#strictactionwithinngzone`);return n(t,r)}}(e,{action:t=>n&&!pT(t)}):e}function UL(n){return[{provide:JR,useValue:n},{provide:XR,useFactory:BL,deps:[JR]},{provide:Sw,deps:[XR],useFactory:NL},{provide:sx,multi:!0,deps:[Sw],useFactory:FL},{provide:sx,multi:!0,deps:[Sw],useFactory:OL},{provide:sx,multi:!0,deps:[Sw],useFactory:LL}]}function pM(){return[{provide:Tw,multi:!0,deps:[Sw],useFactory:VL}]}function BL(n){return n}function VL(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(xw).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${aT}#strictactiontypeuniqueness`)}function gM(n,e){return[{provide:JS,useFactory:RL,deps:[[Cu,new h.FiY,new h.tp0]]},{provide:jR,useValue:e.initialState},{provide:eT,useFactory:dT,deps:[jR]},{provide:tT,useValue:n},{provide:qR,useExisting:n instanceof h.OlP?n:tT},{provide:GR,deps:[h.zs3,tT,[new h.tBr(qR)]],useFactory:DL},{provide:YR,useValue:e.metaReducers?e.metaReducers:[]},{provide:QR,deps:[sx,YR],useFactory:AL},{provide:zR,useValue:e.reducerFactory?e.reducerFactory:oT},{provide:$R,deps:[zR,QR],useFactory:nM},rL,aL,uL,lL,dL,UL(e.runtimeChecks),pM()]}function mM(n,e,t={}){return[{provide:KR,multi:!0,useValue:n instanceof Object?{}:t},{provide:WR,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof h.OlP||!t.reducerFactory?oT:t.reducerFactory,metaReducers:t instanceof h.OlP||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof h.OlP||!t.initialState?void 0:t.initialState}},{provide:rT,deps:[h.zs3,KR,WR],useFactory:SL},{provide:nT,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:ZR,multi:!0,useExisting:e instanceof h.OlP?e:nT},{provide:iT,multi:!0,deps:[h.zs3,nT,[new h.tBr(ZR)]],useFactory:TL},pM()]}let yM=(()=>{class n{constructor(t,r,i,u,l,f){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pg),h.LFG(ox),h.LFG(ax),h.LFG(Cu),h.LFG(JS,8),h.LFG(Tw,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),GL=(()=>{class n{constructor(t,r,i,u,l){this.features=t,this.featureReducers=r,this.reducerManager=i;const f=t.map((y,E)=>{const A=r.shift()[E];return{...y,reducers:A,initialState:dT(y.initialState)}});i.addFeatures(f)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rT),h.LFG(iT),h.LFG(Aw),h.LFG(yM),h.LFG(Tw,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),WL=(()=>{class n{static forRoot(t,r={}){return{ngModule:yM,providers:[...gM(t,r)]}}static forFeature(t,r,i={}){return{ngModule:GL,providers:[...mM(t,r,i)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function ux(...n){return{reducer:n.pop(),types:n.map(r=>r.type)}}const KL=Cw("[Session Component] SetSession",{_as:"props",_p:void 0}),vM=Cw("[Session Component] SetTheme",{_as:"props",_p:void 0}),gg=Cw("[Session Component] SetUser",{_as:"props",_p:void 0}),gT=Cw("[Session Component] SetRoom",{_as:"props",_p:void 0}),{isArray:ZL}=Array,{getPrototypeOf:YL,prototype:QL,keys:XL}=Object;const{isArray:t2}=Array;var o2=M(9672);function _M(...n){const e=(0,hr.yG)(n),t=(0,hr.jO)(n),{args:r,keys:i}=function JL(n){if(1===n.length){const e=n[0];if(ZL(e))return{args:e,keys:null};if(function e2(n){return n&&"object"==typeof n&&YL(n)===QL}(e)){const t=XL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,pn.D)([],e);const u=new yi.y(function a2(n,e,t=ui.y){return r=>{wM(e,()=>{const{length:i}=n,u=new Array(i);let l=i,f=i;for(let y=0;y<i;y++)wM(e,()=>{const E=(0,pn.D)(n[y],e);let C=!1;E.subscribe((0,On.x)(r,A=>{u[y]=A,C||(C=!0,f--),f||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function s2(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):ui.y));return t?u.pipe(function r2(n){return(0,vt.U)(e=>function n2(n,e){return t2(e)?n(...e):n(e)}(n,e))}(t)):u}function wM(n,e,t){n?(0,o2.f)(t,n,e):e()}function EM(n){return new yi.y(e=>{(0,R0.Xf)(n()).subscribe(e)})}var u2=M(9635);function Rw(n,e){const t=(0,k0.m)(n)?n:()=>n,r=i=>i.error(t());return new yi.y(e?i=>e.schedule(r,0,i):r)}function mT(){return(0,Sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,On.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class bM extends yi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ix.w0;const t=this.getSubject();e.add(this.source.subscribe((0,On.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ix.w0.EMPTY)}return e}refCount(){return mT()(this)}}var ks=M(5577);function mg(n,e){return(0,k0.m)(e)?(0,ks.z)(n,e,1):(0,ks.z)(n,1)}var rs=M(8505);function wf(n){return(0,Sr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,On.x)(t,void 0,void 0,l=>{u=(0,R0.Xf)(n(l,wf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function yT(n){return n<=0?()=>$c.E:(0,Sr.e)((e,t)=>{let r=[];e.subscribe((0,On.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function IM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((i,u)=>n(i,u,r)):ui.y,yT(1),t?pf(e):K_(()=>new og))}function vT(n){return(0,Sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const on="primary",Mw=Symbol("RouteTitle");class d2{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function K0(n){return new d2(n)}function h2(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],f=n[u];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Kc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!xM(n[i],e[i]))return!1;return!0}function xM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function CM(n){return Array.prototype.concat.apply([],n)}function DM(n){return n.length>0?n[n.length-1]:null}function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ef(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,pn.D)(Promise.resolve(n)):ct(n)}const g2={exact:function AM(n,e,t){if(!vg(n.segments,e.segments)||!cx(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!AM(n.children[r],e.children[r],t))return!1;return!0},subset:RM},SM={exact:function m2(n,e){return Kc(n,e)},subset:function y2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xM(n[t],e[t]))},ignored:()=>!0};function TM(n,e,t){return g2[t.paths](n.root,e.root,t.matrixParams)&&SM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function RM(n,e,t){return MM(n,e,e.segments,t)}function MM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vg(i,t)||e.hasChildren()||!cx(i,t,r))}if(n.segments.length===t.length){if(!vg(n.segments,t)||!cx(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!RM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vg(n.segments,i)&&cx(n.segments,i,r)&&n.children[on])&&MM(n.children[on],e,u,r)}}function cx(n,e,t){return e.every((r,i)=>SM[t](n[i].parameters,r.parameters))}class yg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=K0(this.queryParams)),this._queryParamMap}toString(){return w2.serialize(this)}}class dn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ni(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lx(this)}}class kw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=K0(this.parameters)),this._parameterMap}toString(){return OM(this)}}function vg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new wT},providedIn:"root"}),n})();class wT{parse(e){const t=new A2(e);return new yg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pw(e.root,!0)}`,r=function I2(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${dx(t)}=${dx(i)}`).join("&"):`${dx(t)}=${dx(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function E2(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const w2=new wT;function lx(n){return n.segments.map(e=>OM(e)).join("/")}function Pw(n,e){if(!n.hasChildren())return lx(n);if(e){const t=n.children[on]?Pw(n.children[on],!1):"",r=[];return Ni(n.children,(i,u)=>{u!==on&&r.push(`${u}:${Pw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function _2(n,e){let t=[];return Ni(n.children,(r,i)=>{i===on&&(t=t.concat(e(r,i)))}),Ni(n.children,(r,i)=>{i!==on&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===on?[Pw(n.children[on],!1)]:[`${i}:${Pw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[on]?`${lx(n)}/${t[0]}`:`${lx(n)}/(${t.join("//")})`}}function PM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dx(n){return PM(n).replace(/%3B/gi,";")}function ET(n){return PM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hx(n){return decodeURIComponent(n)}function NM(n){return hx(n.replace(/\+/g,"%20"))}function OM(n){return`${ET(n.path)}${function b2(n){return Object.keys(n).map(e=>`;${ET(e)}=${ET(n[e])}`).join("")}(n.parameters)}`}const x2=/^[^\/()?;=#]+/;function fx(n){const e=n.match(x2);return e?e[0]:""}const C2=/^[^=?&#]+/,S2=/^[^&#]+/;class A2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[on]=new dn(e,t)),r}parseSegment(){const e=fx(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new kw(hx(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fx(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fx(this.remaining);i&&(r=i,this.capture(r))}e[hx(t)]=hx(r)}parseQueryParam(e){const t=function D2(n){const e=n.match(C2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function T2(n){const e=n.match(S2);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=NM(t),u=NM(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fx(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=on);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[on]:new dn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function bT(n){return n.segments.length>0?new dn([],{[on]:n}):n}function px(n){const e={};for(const r of Object.keys(n.children)){const u=px(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function R2(n){if(1===n.numberOfChildren&&n.children[on]){const e=n.children[on];return new dn(n.segments.concat(e.segments),e.children)}return n}(new dn(n.segments,e))}function _g(n){return n instanceof yg}function P2(n,e,t,r,i){if(0===t.length)return Z0(e.root,e.root,e.root,r,i);const u=function UM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Ni(u.outlets,(y,E)=>{f[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new LM(t,e,r)}(t);return u.toRoot()?Z0(e.root,e.root,new dn([],{}),r,i):function l(y){const E=function O2(n,e,t,r){if(n.isAbsolute)return new Y0(e.root,!0,0);if(-1===r)return new Y0(t,t===e.root,0);return function BM(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Y0(r,!1,i-u)}(t,r+(Nw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,y),C=E.processChildren?Fw(E.segmentGroup,E.index,u.commands):xT(E.segmentGroup,E.index,u.commands);return Z0(e.root,E.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Nw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ow(n){return"object"==typeof n&&null!=n&&n.outlets}function Z0(n,e,t,r,i){let l,u={};r&&Ni(r,(y,E)=>{u[E]=Array.isArray(y)?y.map(C=>`${C}`):`${y}`}),l=n===e?t:FM(n,e,t);const f=bT(px(l));return new yg(f,u,i)}function FM(n,e,t){const r={};return Ni(n.children,(i,u)=>{r[u]=i===e?t:FM(i,e,t)}),new dn(n.segments,r)}class LM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nw(r[0]))throw new h.vHH(4003,!1);const i=r.find(Ow);if(i&&i!==DM(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Y0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xT(n,e,t){if(n||(n=new dn([],{})),0===n.segments.length&&n.hasChildren())return Fw(n,e,t);const r=function L2(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],f=t[r];if(Ow(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!HM(y,E,l))return u;r+=2}else{if(!HM(y,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new dn(n.segments.slice(0,r.pathIndex),{});return u.children[on]=new dn(n.segments.slice(r.pathIndex),n.children),Fw(u,0,i)}return r.match&&0===i.length?new dn(n.segments,{}):r.match&&!n.hasChildren()?CT(n,e,t):r.match?Fw(n,0,i):CT(n,e,t)}function Fw(n,e,t){if(0===t.length)return new dn(n.segments,{});{const r=function F2(n){return Ow(n[0])?n[0].outlets:{[on]:n}}(t),i={};return Ni(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=xT(n.children[l],e,u))}),Ni(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new dn(n.segments,i)}}function CT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Ow(u)){const y=U2(u.outlets);return new dn(r,y)}if(0===i&&Nw(t[0])){r.push(new kw(n.segments[e].path,VM(t[0]))),i++;continue}const l=Ow(u)?u.outlets[on]:`${u}`,f=i<t.length-1?t[i+1]:null;l&&f&&Nw(f)?(r.push(new kw(l,VM(f))),i+=2):(r.push(new kw(l,{})),i++)}return new dn(r,{})}function U2(n){const e={};return Ni(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=CT(new dn([],{}),0,t))}),e}function VM(n){const e={};return Ni(n,(t,r)=>e[r]=`${t}`),e}function HM(n,e,t){return n==t.path&&Kc(e,t.parameters)}class bd{constructor(e,t){this.id=e,this.url=t}}class DT extends bd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wg extends bd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gx extends bd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jM extends bd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class B2 extends bd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V2 extends bd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H2 extends bd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class j2 extends bd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $2 extends bd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z2{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class G2{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class W2{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q2{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K2{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z2{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $M{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ST(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ST(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=TT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TT(e,this._root).map(t=>t.value)}}function ST(n,e){if(n===e.value)return e;for(const t of e.children){const r=ST(n,t);if(r)return r}return null}function TT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=TT(n,t);if(r.length)return r.unshift(e),r}return[]}class Id{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Q0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class GM extends zM{constructor(e,t){super(e),this.snapshot=t,AT(this,e)}toString(){return this.snapshot.toString()}}function WM(n,e){const t=function Q2(n,e){const l=new mx([],{},{},"",{},on,e,null,n.root,-1,{});return new KM("",new Id(l,[]))}(n,e),r=new Xs([new kw("",{})]),i=new Xs({}),u=new Xs({}),l=new Xs({}),f=new Xs(""),y=new bf(r,i,l,f,u,on,e,t.root);return y.snapshot=t.root,new GM(new Id(y,[]),t)}class bf{constructor(e,t,r,i,u,l,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,vt.U)(E=>E[Mw]))??ct(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>K0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>K0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function X2(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mx{constructor(e,t,r,i,u,l,f,y,E,C,A,W){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=f,this.title=this.data?.[Mw],this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=C,this._correctedLastPathIndex=W??C,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=K0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=K0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KM extends zM{constructor(e,t){super(t),this.url=e,AT(this,t)}toString(){return ZM(this._root)}}function AT(n,e){e.value._routerState=n,e.children.forEach(t=>AT(n,t))}function ZM(n){const e=n.children.length>0?` { ${n.children.map(ZM).join(", ")} } `:"";return`${n.value}${e}`}function RT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Kc(e.params,t.params)||n.params.next(t.params),function f2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Kc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MT(n,e){const t=Kc(n.params,e.params)&&function v2(n,e){return vg(n,e)&&n.every((t,r)=>Kc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MT(n.parent,e.parent))}function Lw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function eU(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lw(n,r,i);return Lw(n,r)})}(n,e,t);return new Id(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Lw(n,f)),l}}const r=function tU(n){return new bf(new Xs(n.url),new Xs(n.params),new Xs(n.queryParams),new Xs(n.fragment),new Xs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Lw(n,u));return new Id(r,i)}}const kT="ngNavigationCancelingError";function YM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=_g(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function QM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[kT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function XM(n){return JM(n)&&_g(n.url)}function JM(n){return n&&n[kT]}class nU{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uw,this.attachRef=null}}let Uw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nU,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yx=!1;let PT=(()=>{class n{constructor(t,r,i,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||on,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,yx);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,yx);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,yx);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,yx);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new rU(t,f,i.injector);if(r&&function iU(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(l);this.activated=i.createComponent(E,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Uw),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class rU{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bf?this.route:e===Uw?this.childContexts:this.parent.get(e,t)}}let NT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[PT],encapsulation:2}),n})();function ek(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function FT(n){const e=n.children&&n.children.map(FT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==on&&(t.component=NT),t}function ba(n){return n.outlet||on}function tk(n,e){const t=n.filter(r=>ba(r)===e);return t.push(...n.filter(r=>ba(r)!==e)),t}function Bw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cU{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),RT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Q0(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),Ni(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Q0(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Q0(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Q0(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Z2(u.value.snapshot))}),e.children.length&&this.forwardEvent(new q2(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(RT(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),RT(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Bw(i.snapshot),y=f?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class nk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vx{constructor(e,t){this.component=e,this.route=t}}function lU(n,e,t){const r=n._root;return Vw(r,e?e._root:null,t,[r.value])}function X0(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Vw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Q0(e);return n.children.forEach(l=>{(function hU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const y=function fU(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vg(n.url,e.url)||!Kc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MT(n,e)||!Kc(n.queryParams,e.queryParams);default:return!MT(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new nk(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Vw(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new vx(f.outlet.component,l))}else l&&Hw(e,f,i),i.canActivateChecks.push(new nk(r)),Vw(n,null,u.component?f?f.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),Ni(u,(l,f)=>Hw(l,t.getContext(f),i)),i}function Hw(n,e,t){const r=Q0(n),i=n.value;Ni(r,(u,l)=>{Hw(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new vx(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function jw(n){return"function"==typeof n}function LT(n){return n instanceof og||"EmptyError"===n?.name}const _x=Symbol("INITIAL_VALUE");function J0(){return jr(n=>_M(n.map(e=>e.pipe(M0(1),zs(_x)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===_x)return _x;if(!1===t||t instanceof yg)return t}return!0}),ji(e=>e!==_x),M0(1)))}function rk(n){return(0,u2.z)((0,rs.b)(e=>{if(_g(e))throw YM(0,e)}),(0,vt.U)(e=>!0===e))}const UT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ik(n,e,t,r,i){const u=BT(n,e,t);return u.matched?function RU(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ct(i.map(l=>{const f=X0(l,n);return Ef(function _U(n){return n&&jw(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(J0(),rk()):ct(!0)}(r=ek(e,r),e,t).pipe((0,vt.U)(l=>!0===l?u:{...UT})):ct(u)}function BT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...UT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||h2)(t,n,e);if(!i)return{...UT};const u={};Ni(i.posParams,(f,y)=>{u[y]=f.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function wx(n,e,t,r,i="corrected"){if(t.length>0&&function PU(n,e,t){return t.some(r=>Ex(n,e,r)&&ba(r)!==on)}(n,t,r)){const l=new dn(e,function kU(n,e,t,r){const i={};i[on]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ba(u)!==on){const l=new dn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ba(u)]=l}return i}(n,e,r,new dn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function NU(n,e,t){return t.some(r=>Ex(n,e,r))}(n,t,r)){const l=new dn(n.segments,function MU(n,e,t,r,i,u){const l={};for(const f of r)if(Ex(n,t,f)&&!i[ba(f)]){const y=new dn([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[ba(f)]=y}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new dn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ex(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sk(n,e,t,r){return!!(ba(n)===r||r!==on&&Ex(e,t,n))&&("**"===n.path||BT(e,n,t).matched)}function ok(n,e,t){return 0===e.length&&!n.children[t]}const bx=!1;class Ix{constructor(e){this.segmentGroup=e||null}}class ak{constructor(e){this.urlTree=e}}function $w(n){return Rw(new Ix(n))}function uk(n){return Rw(new ak(n))}class UU{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=wx(this.urlTree.root,[],[],this.config).segmentGroup,t=new dn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,on).pipe((0,vt.U)(u=>this.createUrlTree(px(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wf(u=>{if(u instanceof ak)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ix?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,on).pipe((0,vt.U)(i=>this.createUrlTree(px(i),e.queryParams,e.fragment))).pipe(wf(i=>{throw i instanceof Ix?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,bx)}createUrlTree(e,t,r){const i=bT(e);return new yg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new dn([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,pn.D)(i).pipe(mg(u=>{const l=r.children[u],f=tk(t,u);return this.expandSegmentGroup(e,f,l,u).pipe((0,vt.U)(y=>({segment:y,outlet:u})))}),Hi((u,l)=>(u[l.outlet]=l.segment,u),{}),IM())}expandSegment(e,t,r,i,u,l){return(0,pn.D)(r).pipe(mg(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,l).pipe(wf(E=>{if(E instanceof Ix)return ct(null);throw E}))),va(f=>!!f),wf((f,y)=>{if(LT(f))return ok(t,i,u)?ct(new dn([],{})):$w(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,l,f){return sk(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):$w(t):$w(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uk(u):this.lineralizeSegments(r,u).pipe((0,ks.z)(l=>{const f=new dn(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:f,consumedSegments:y,remainingSegments:E,positionalParamSegments:C}=BT(t,i,u);if(!f)return $w(t);const A=this.applyRedirectCommands(y,i.redirectTo,C);return i.redirectTo.startsWith("/")?uk(A):this.lineralizeSegments(i,A).pipe((0,ks.z)(W=>this.expandSegment(e,t,r,W.concat(E),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=ek(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new dn(i,{})))):ct(new dn(i,{}))):ik(t,r,i,e).pipe(jr(({matched:l,consumedSegments:f,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ks.z)(C=>{const A=C.injector??e,W=C.routes,{segmentGroup:oe,slicedSegments:de}=wx(t,f,y,W),Te=new dn(oe.segments,oe.children);if(0===de.length&&Te.hasChildren())return this.expandChildren(A,W,Te).pipe((0,vt.U)(ut=>new dn(f,ut)));if(0===W.length&&0===de.length)return ct(new dn(f,{}));const Pe=ba(r)===u;return this.expandSegment(A,Te,W,de,Pe?on:u,!0).pipe((0,vt.U)(dt=>new dn(f.concat(dt.segments),dt.children)))})):$w(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function AU(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ct(!0):ct(i.map(l=>{const f=X0(l,n);return Ef(function gU(n){return n&&jw(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(J0(),rk())}(e,t,r).pipe((0,ks.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,rs.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function FU(n){return Rw(QM(bx,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[on])return Rw(new h.vHH(4e3,bx));i=i.children[on]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new yg(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ni(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return Ni(t.children,(f,y)=>{l[y]=this.createSegmentGroup(e,f,r,i)}),new dn(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,bx);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class VU{}class $U{constructor(e,t,r,i,u,l,f,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f,this.urlSerializer=y}recognize(){const e=wx(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,on).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new mx([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},on,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Id(r,t),u=new KM(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=qM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,pn.D)(Object.keys(r.children)).pipe(mg(i=>{const u=r.children[i],l=tk(t,i);return this.processSegmentGroup(e,l,u,i)}),Hi((i,u)=>i&&u?(i.push(...u),i):null),function c2(n,e=!1){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,On.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),pf(null),IM(),(0,vt.U)(i=>{if(null===i)return null;const u=ck(i);return function zU(n){n.sort((e,t)=>e.value.outlet===on?-1:t.value.outlet===on?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,pn.D)(t).pipe(mg(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),va(l=>!!l),wf(l=>{if(LT(l))return ok(r,i,u)?ct([]):ct(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!sk(t,r,i,u))return ct(null);let l;if("**"===t.path){const f=i.length>0?DM(i).parameters:{},y=dk(r)+i.length;l=ct({snapshot:new mx(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fk(t),ba(t),t.component??t._loadedComponent??null,t,lk(r),y,pk(t),y),consumedSegments:[],remainingSegments:[]})}else l=ik(r,t,i,e).pipe((0,vt.U)(({matched:f,consumedSegments:y,remainingSegments:E,parameters:C})=>{if(!f)return null;const A=dk(r)+y.length;return{snapshot:new mx(y,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fk(t),ba(t),t.component??t._loadedComponent??null,t,lk(r),A,pk(t),A),consumedSegments:y,remainingSegments:E}}));return l.pipe(jr(f=>{if(null===f)return ct(null);const{snapshot:y,consumedSegments:E,remainingSegments:C}=f;e=t._injector??e;const A=t._loadedInjector??e,W=function GU(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:oe,slicedSegments:de}=wx(r,E,C,W.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===de.length&&oe.hasChildren())return this.processChildren(A,W,oe).pipe((0,vt.U)(Pe=>null===Pe?null:[new Id(y,Pe)]));if(0===W.length&&0===de.length)return ct([new Id(y,[])]);const Te=ba(t)===u;return this.processSegment(A,W,oe,de,Te?on:u).pipe((0,vt.U)(Pe=>null===Pe?null:[new Id(y,Pe)]))}))}}function WU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ck(n){const e=[],t=new Set;for(const r of n){if(!WU(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ck(r.children);e.push(new Id(r.value,i))}return e.filter(r=>!t.has(r))}function lk(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dk(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function fk(n){return n.data||{}}function pk(n){return n.resolve||{}}function gk(n){return"string"==typeof n.title||null===n.title}function VT(n){return jr(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,vt.U)(()=>e)):ct(e)})}let mk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===on);return r}getResolvedTitleForRoute(t){return t.data[Mw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(yk)},providedIn:"root"}),n})(),yk=(()=>{class n extends mk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eB{}class nB extends class tB{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cx=new h.OlP("",{providedIn:"root",factory:()=>({})}),HT=new h.OlP("ROUTES");let jT=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ef(t.loadComponent()).pipe((0,rs.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),vT(()=>{this.componentLoaders.delete(t)})),i=new bM(r,()=>new Yr.x).pipe(mT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E,C=!1;Array.isArray(f)?E=f:(y=f.create(t).injector,E=CM(y.get(HT,[],h.XFs.Self|h.XFs.Optional)));return{routes:E.map(FT),injector:y}}),vT(()=>{this.childrenLoaders.delete(r)})),l=new bM(u,()=>new Yr.x).pipe(mT());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ef(t()).pipe((0,ks.z)(r=>r instanceof h.YKP||Array.isArray(r)?ct(r):(0,pn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iB{}class sB{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function oB(n){throw n}function aB(n,e,t){return e.parse("/")}const uB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _k(){const n=(0,h.f3M)(kM),e=(0,h.f3M)(Uw),t=(0,h.f3M)(ae),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),u=(0,h.f3M)(HT,{optional:!0})??[],l=(0,h.f3M)(Cx,{optional:!0})??{},f=(0,h.f3M)(yk),y=(0,h.f3M)(mk,{optional:!0}),E=(0,h.f3M)(iB,{optional:!0}),C=(0,h.f3M)(eB,{optional:!0}),A=new hi(null,n,e,t,r,i,CM(u));return E&&(A.urlHandlingStrategy=E),C&&(A.routeReuseStrategy=C),A.titleStrategy=y??f,function lB(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,A),A}let hi=(()=>{class n{constructor(t,r,i,u,l,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yr.x,this.errorHandler=oB,this.malformedUriErrorHandler=aB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new sB,this.routeReuseStrategy=new nB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(jT),this.configLoader.onLoadEndListener=W=>this.triggerEvent(new G2(W)),this.configLoader.onLoadStartListener=W=>this.triggerEvent(new z2(W)),this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const A=l.get(h.R0b);this.isNgZoneEnabled=A instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function p2(){return new yg(new dn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=WM(this.currentUrlTree,this.rootComponentType),this.transitions=new Xs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ji(i=>0!==i.id),(0,vt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),jr(i=>{let u=!1,l=!1;return ct(i).pipe((0,rs.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),jr(f=>{const y=this.browserUrlTree.toString(),E=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return wk(f.source)&&(this.browserUrlTree=f.extractedUrl),ct(f).pipe(jr(A=>{const W=this.transitions.getValue();return r.next(new DT(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),W!==this.transitions.getValue()?$c.E:Promise.resolve(A)}),function BU(n,e,t,r){return jr(i=>function LU(n,e,t,r,i){return new UU(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rs.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function KU(n,e,t,r,i,u){return(0,ks.z)(l=>function jU(n,e,t,r,i,u,l="emptyOnly",f="legacy"){return new $U(n,e,t,r,i,l,f,u).recognize().pipe(jr(y=>null===y?function HU(n){return new yi.y(e=>e.error(n))}(new VU):ct(y)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,u).pipe((0,vt.U)(f=>({...l,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rs.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const oe=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(oe,A)}this.browserUrlTree=A.urlAfterRedirects}const W=new B2(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(W)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:W,extractedUrl:oe,source:de,restoredState:Te,extras:Pe}=f,tt=new DT(W,this.serializeUrl(oe),de,Te);r.next(tt);const dt=WM(oe,this.rootComponentType).snapshot;return ct(i={...f,targetSnapshot:dt,urlAfterRedirects:oe,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),$c.E}),(0,rs.b)(f=>{const y=new V2(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,vt.U)(f=>i={...f,guards:lU(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function EU(n,e){return(0,ks.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ct({...t,guardsResult:!0}):function bU(n,e,t,r){return(0,pn.D)(n).pipe((0,ks.z)(i=>function TU(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(f=>{const y=Bw(e)??i,E=X0(f,y);return Ef(function vU(n){return n&&jw(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(va())})).pipe(J0()):ct(!0)}(i.component,i.route,t,e,r)),va(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ks.z)(f=>f&&function pU(n){return"boolean"==typeof n}(f)?function IU(n,e,t,r){return(0,pn.D)(e).pipe(mg(i=>Zo(function CU(n,e){return null!==n&&e&&e(new W2(n)),ct(!0)}(i.route.parent,r),function xU(n,e){return null!==n&&e&&e(new K2(n)),ct(!0)}(i.route,r),function SU(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function dU(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>EM(()=>ct(l.guards.map(y=>{const E=Bw(l.node)??t,C=X0(y,E);return Ef(function yU(n){return n&&jw(n.canActivateChild)}(C)?C.canActivateChild(r,n):E.runInContext(()=>C(r,n))).pipe(va())})).pipe(J0())));return ct(u).pipe(J0())}(n,i.path,t),function DU(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(u=>EM(()=>{const l=Bw(e)??t,f=X0(u,l);return Ef(function mU(n){return n&&jw(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(va())}));return ct(i).pipe(J0())}(n,i.route,t))),va(i=>!0!==i,!0))}(r,u,n,e):ct(f)),(0,vt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,rs.b)(f=>{if(i.guardsResult=f.guardsResult,_g(f.guardsResult))throw YM(0,f.guardsResult);const y=new H2(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),ji(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),VT(f=>{if(f.guards.canActivateChecks.length)return ct(f).pipe((0,rs.b)(y=>{const E=new j2(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),jr(y=>{let E=!1;return ct(y).pipe(function ZU(n,e){return(0,ks.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let u=0;return(0,pn.D)(i).pipe(mg(l=>function YU(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!gk(i)&&(u[Mw]=i.title),function QU(n,e,t,r){const i=function XU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ct({});const u={};return(0,pn.D)(i).pipe((0,ks.z)(l=>function JU(n,e,t,r){const i=Bw(e)??r,u=X0(n,i);return Ef(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(va(),(0,rs.b)(f=>{u[l]=f}))),yT(1),function l2(n){return(0,vt.U)(()=>n)}(u),wf(l=>LT(l)?$c.E:Rw(l)))}(u,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=qM(n,t).resolve,i&&gk(i)&&(n.data[Mw]=i.title),null)))}(l.route,r,n,e)),(0,rs.b)(()=>u++),yT(1),(0,ks.z)(l=>u===i.length?ct(t):$c.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rs.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,rs.b)(y=>{const E=new $2(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),VT(f=>{const y=E=>{const C=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,rs.b)(A=>{E.component=A}),(0,vt.U)(()=>{})));for(const A of E.children)C.push(...y(A));return C};return _M(y(f.targetSnapshot.root)).pipe(pf(),M0(1))}),VT(()=>this.afterPreactivation()),(0,vt.U)(f=>{const y=function J2(n,e,t){const r=Lw(n,e._root,t?t._root:void 0);return new GM(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:y}}),(0,rs.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new cU(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,rs.b)({next(){u=!0},complete(){u=!0}}),vT(()=>{u||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),wf(f=>{if(l=!0,JM(f)){XM(f)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new gx(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(y),XM(f)){const E=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wk(i.source)};this.scheduleNavigation(E,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new jM(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(f))}catch(E){i.reject(E)}}return $c.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(FT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:f,preserveFragment:y}=r,E=i||this.routerState.root,C=y?this.currentUrlTree.fragment:l;let A=null;switch(f){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),P2(E,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_g(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dB(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...uB}:!1===r?{...cB}:r,_g(t))return TM(this.currentUrlTree,t,i);const u=this.parseUrl(t);return TM(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let f,y,E;l?(f=l.resolve,y=l.reject,E=l.promise):E=new Promise((W,oe)=>{f=W,y=oe});const C=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:C,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(W=>Promise.reject(W))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new gx(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return _k()},providedIn:"root"}),n})();function wk(n){return"imperative"!==n}class Ek{}let pB=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ji(t=>t instanceof wg),mg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,f=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,pn.D)(i).pipe((0,Bi.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const u=i.pipe((0,ks.z)(l=>null===l?ct(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,pn.D)([u,l]).pipe((0,Bi.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Ek),h.LFG(jT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GT=new h.OlP("");let bk=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $M&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $M(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ey(n,e){return{\u0275kind:n,\u0275providers:e}}function WT(n){return[{provide:HT,multi:!0,useValue:n}]}function xk(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(hi),i=n.get(Ck);1===n.get(qT)&&r.initialNavigation(),n.get(Dk,null,h.XFs.Optional)?.setUpPreloading(),n.get(GT,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Ck=new h.OlP("",{factory:()=>new Yr.x}),qT=new h.OlP("",{providedIn:"root",factory:()=>1});const Dk=new h.OlP("");function vB(n){return ey(0,[{provide:Dk,useExisting:pB},{provide:Ek,useExisting:n}])}const Sk=new h.OlP("ROUTER_FORROOT_GUARD"),_B=[ae,{provide:kM,useClass:wT},{provide:hi,useFactory:_k},Uw,{provide:bf,useFactory:function Ik(n){return n.routerState.root},deps:[hi]},jT];function wB(){return new h.PXZ("Router",hi)}let Tk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_B,[],WT(t),{provide:Sk,useFactory:xB,deps:[[hi,new h.FiY,new h.tp0]]},{provide:Cx,useValue:r||{}},r?.useHash?{provide:ee,useClass:_e}:{provide:ee,useClass:X},{provide:GT,useFactory:()=>{const n=(0,h.f3M)(hi),e=(0,h.f3M)(Mu),t=(0,h.f3M)(Cx);return t.scrollOffset&&e.setOffset(t.scrollOffset),new bk(n,e,t)}},r?.preloadingStrategy?vB(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:wB},r?.initialNavigation?CB(r):[],[{provide:Ak,useFactory:xk},{provide:h.tb,multi:!0,useExisting:Ak}]]}}static forChild(t){return{ngModule:n,providers:[WT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sk,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[NT]}),n})();function xB(n){return"guarded"}function CB(n){return["disabled"===n.initialNavigation?ey(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(hi);return()=>{e.setUpLocationChangeListener()}}},{provide:qT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ey(2,[{provide:qT,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(P,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(hi),f=e.get(Ck);(function i(u){e.get(hi).events.pipe(ji(f=>f instanceof wg||f instanceof gx||f instanceof jM),(0,vt.U)(f=>f instanceof wg||f instanceof gx&&(0===f.code||1===f.code)&&null),ji(f=>null!==f),M0(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||f.closed?ct(void 0):f),l.initialNavigation()}))}}]).\u0275providers:[]]}const Ak=new h.OlP("");var SB=M(930);function ty(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const u=new SB.Hp({next:l=>{r(l),u.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new og)}});n.subscribe(u)})}let Ax=(()=>{class n{constructor(t,r){this.firestore=t,this.store=r,this.mainCollectionName="rooms",this.session={},r.select(i=>i.session).subscribe(i=>this.session=i)}newRoom(t){t.name=t.name.toLocaleLowerCase(),this.firestore.collection(this.mainCollectionName).doc().set(t)}getRoomAsync(t){var r=this;return(0,Me.Z)(function*(){let i=r.firestore.collection(r.mainCollectionName,u=>u.where("name","==",t)).valueChanges().pipe((0,vt.U)(u=>u.length>0?u[0]:null));return yield ty(i)})()}userExists(t){return this.firestore.collection(this.mainCollectionName).get().pipe((0,vt.U)(r=>{let u=!1;return r.docs.forEach(l=>{l.data().users.forEach(y=>{u||(u=y.name==t)})}),u}))}updateUserAsync(t,r){var i=this;return(0,Me.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,vt.U)(l=>{let y=!1;return l.docs.forEach(function(){var E=(0,Me.Z)(function*(C){let A=C.id,W=C.data();if(t==W.name){let oe=W.users.findIndex(de=>de.name==r.name);W.users.splice(oe,1),W.users.push(r),yield i.updateRoomByIdAsync(A,W),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield ty(u)})()}removeUserAsync(t,r){var i=this;return(0,Me.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,vt.U)(l=>{let y=!1;return l.docs.forEach(function(){var E=(0,Me.Z)(function*(C){let A=C.id,W=C.data();if(t==W.name&&r!=i.session.user?.name){let oe=W.users.findIndex(de=>de.name==r);W.users.splice(oe,1),yield i.updateRoomByIdAsync(A,W),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield ty(u)})()}AddUserAsync(t,r){var i=this;return(0,Me.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,vt.U)(l=>{let y=!1;return l.docs.forEach(function(){var E=(0,Me.Z)(function*(C){let A=C.id,W=C.data();if(t==W.name){let oe=W.users.findIndex(de=>de.name==r.name);oe>=0&&W.users.splice(oe,1),W.users.push(r),yield i.updateRoomByIdAsync(A,W),y=!0}});return function(C){return E.apply(this,arguments)}}()),y}));return yield ty(u)})()}updateRoomByIdAsync(t,r){var i=this;return(0,Me.Z)(function*(){return yield i.firestore.collection(i.mainCollectionName).doc(t).update(r)})()}revealCardAsync(t,r){var i=this;return(0,Me.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,vt.U)(l=>{let y=!1;return l.docs.forEach(function(){var E=(0,Me.Z)(function*(C){let A=C.id,W=C.data();t==W.name&&(W.revealCards=r,yield i.updateRoomByIdAsync(A,W),y=!0)});return function(C){return E.apply(this,arguments)}}()),y}));return yield ty(u)})()}resetCardAsync(t){var r=this;return(0,Me.Z)(function*(){let i=r.firestore.collection(r.mainCollectionName).get().pipe((0,vt.U)(u=>{let f=!1;return u.docs.forEach(function(){var y=(0,Me.Z)(function*(E){let C=E.id,A=E.data();t==A.name&&(A.revealCards=!1,A.users.forEach(W=>W.selectedCard=""),yield r.updateRoomByIdAsync(C,A),f=!0)});return function(E){return y.apply(this,arguments)}}()),f}));return yield ty(i)})()}getAllRooms(){return this.firestore.collection(this.mainCollectionName).valueChanges()}listenRoomChanges(t){return this.firestore.collection(this.mainCollectionName).valueChanges().pipe((0,vt.U)(r=>{for(const i of r)if(i.name==t)return i;return{}}))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(aA),h.LFG(Cu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var KT=M(7206);let Rk=(()=>{class n{constructor(){}encryptAES(t){return KT.AES.encrypt(t,"e47abaca-6f5f-47e4-bb1f-3157df5caa17")}decryptAES(t){return KT.AES.decrypt(t,"e47abaca-6f5f-47e4-bb1f-3157df5caa17").toString(KT.enc.Utf8)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rx=(()=>{class n{constructor(t){this.cryptoService=t,this.storage=window.localStorage}set(t,r){if(this.storage){const i=JSON.stringify(r),u=this.cryptoService.encryptAES(i);return this.storage.setItem(t,u.toString()),!0}return!1}get(t){if(this.storage){const r=this.storage.getItem(t);if(!r)return null;const i=this.cryptoService.decryptAES(r);return JSON.parse(i)}return null}remove(t){return!!this.storage&&(this.storage.removeItem(t),!0)}clear(){return!!this.storage&&(this.storage.clear(),!0)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rk))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TB(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"div",5),h._UZ(2,"div",6),h.qZA(),h.TgZ(3,"div",7),h._UZ(4,"div",8),h.qZA(),h.TgZ(5,"div",9),h._UZ(6,"div",6),h.qZA(),h.BQk()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.uIk("data-content",t)}}const AB=function(n){return{active:n}},RB=function(){return{"hide-card":!1}};function MB(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",2),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.onCardSelect(u))}),h.TgZ(2,"div",3),h.YNc(3,TB,7,1,"ng-container",4),h.qZA()(),h.BQk()}if(2&n){const t=e.$implicit,r=h.oxw();h.xp6(1),h.Q6J("ngClass",h.VKq(3,AB,(null==r.session.user?null:r.session.user.selectedCard)==t)),h.xp6(1),h.Q6J("ngClass",h.DdM(5,RB)),h.xp6(1),h.Q6J("ngIf",!0)}}let kB=(()=>{class n{constructor(t,r,i){this.firestoreService=t,this.locaStorageService=r,this.store=i,this.revealCard=!1,this.cardValues=["0","1","2","3","5","8","13","21","34","55"],this.session={},i.select(u=>u.session).subscribe(u=>this.session=u)}ngOnInit(){}onCardSelect(t){let r=this.session.user;r={...this.session.user,selectedCard:t==r?.selectedCard?"":t},this.store.dispatch(gg({user:r})),this.firestoreService.updateUserAsync(this.session.room?.name,r)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ax),h.Y36(Rx),h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-poker-card"]],inputs:{revealCard:"revealCard",cardValues:"cardValues"},decls:2,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"card",3,"ngClass","click"],[1,"playing-card","spade",3,"ngClass"],[4,"ngIf"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,MB,4,6,"ng-container",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.cardValues))},dependencies:[vn,ss,Un],styles:['.cards[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:absolute;bottom:110px;height:0px;background-color:brown}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;position:absolute;transform:translateZ(0);transform-origin:50% 200%;transition:all .35s ease-in-out}.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{animation:move .35s cubic-bezier(0,-.5,.5,1) forwards 1;transition:transform 2s ease-in-out}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover:not(.active){animation:moveHover .35s cubic-bezier(1,-.5,.5,1) forwards 1}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-16.74deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-11.34deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-5.94deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(4){transform:rotate(-.54deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(5){transform:rotate(4.86deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(6){transform:rotate(10.26deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(7){transform:rotate(15.66deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(8){transform:rotate(21.06deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(9){transform:rotate(26.46deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(10){transform:rotate(31.86deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(11){transform:rotate(37.26deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(12){transform:rotate(42.66deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(13){transform:rotate(48.06deg)}@keyframes move{to{transform:translateY(-110px)}}@keyframes moveHover{0%{top:0}to{top:-20px}}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:absolute;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:absolute}.bottom[_ngcontent-%COMP%]{bottom:0;right:0;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}']}),n})();function PB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"small",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.removeUser())}),h._uU(1,"Remover"),h.qZA()}}const NB=function(n){return{"active-flip-card":n}},OB=function(n){return{"low-opacity":n}};let FB=(()=>{class n{constructor(t,r){this.firestoreService=t,this.store=r,this.enableRemoveUser=new h.vpe,this.revealCardEvent=new h.vpe,this.user={name:"",selectedCard:"",isSpectator:!0},this.revealCard=!1,this.canRemoveUser=!1,this.session={},r.select(i=>i.session).subscribe(i=>this.session=i)}ngOnInit(){this.revealCardEvent.subscribe(t=>this.revealCard=t),this.enableRemoveUser.subscribe(t=>this.canRemoveUser=t)}ngOnDestroy(){}removeUser(){confirm(`Deseja remover o usu\xe1rio ${this.user.name}?`)&&this.session.room?.name&&this.firestoreService.removeUserAsync(this.session.room.name,this.user.name)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ax),h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["single-card"]],inputs:{enableRemoveUser:"enableRemoveUser",revealCardEvent:"revealCardEvent",user:"user"},decls:20,vars:9,consts:[[2,"max-width","150px","overflow-x","hidden"],[1,"flip-card",3,"ngClass"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"cards"],[1,"card"],[1,"playing-card","spade","hide-card",3,"ngClass"],[1,"flip-card-back"],[1,"playing-card","spade"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"],["class","remove",3,"click",4,"ngIf"],[1,"remove",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"small"),h._uU(2),h.qZA()(),h.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),h._UZ(8,"div",6),h.qZA()()(),h.TgZ(9,"div",7)(10,"div",4)(11,"div",5)(12,"div",8)(13,"div",9),h._UZ(14,"div",10),h.qZA(),h.TgZ(15,"div",11),h._UZ(16,"div",12),h.qZA(),h.TgZ(17,"div",13),h._UZ(18,"div",10),h.qZA()()()()()()(),h.YNc(19,PB,2,0,"small",14)),2&t&&(h.xp6(2),h.Oqu(r.user.name),h.xp6(1),h.Q6J("ngClass",h.VKq(5,NB,r.revealCard&&""!=r.user.selectedCard)),h.xp6(5),h.Q6J("ngClass",h.VKq(7,OB,""==r.user.selectedCard)),h.xp6(5),h.uIk("data-content",r.user.selectedCard),h.xp6(6),h.Q6J("ngIf",r.canRemoveUser))},dependencies:[vn,Un],styles:['.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .low-opacity[_ngcontent-%COMP%]{opacity:.2}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:relative;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:relative}.bottom[_ngcontent-%COMP%]{top:85%;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:150px;height:230px;perspective:1000px}.flip-card-inner[_ngcontent-%COMP%]{text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.active-flip-card[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{border-radius:5%;z-index:2}.flip-card-back[_ngcontent-%COMP%]{border-radius:5%;transform:rotateY(180deg);z-index:1}.remove[_ngcontent-%COMP%]{margin-top:2px;cursor:pointer}.remove[_ngcontent-%COMP%]:hover{color:red}']}),n})(),LB=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-loading"]],decls:16,vars:0,consts:[[1,"loading"],[1,"loading-text"],[1,"loading-text-words"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"span",2),h._uU(3,"L"),h.qZA(),h.TgZ(4,"span",2),h._uU(5,"O"),h.qZA(),h.TgZ(6,"span",2),h._uU(7,"A"),h.qZA(),h.TgZ(8,"span",2),h._uU(9,"D"),h.qZA(),h.TgZ(10,"span",2),h._uU(11,"I"),h.qZA(),h.TgZ(12,"span",2),h._uU(13,"N"),h.qZA(),h.TgZ(14,"span",2),h._uU(15,"G"),h.qZA()()())},styles:['@import"https://fonts.googleapis.com/css?family=Quattrocento+Sans";.loading[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999}.loading-text[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;text-align:center;width:100%;height:100px;line-height:100px}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;color:#fff;font-family:Quattrocento Sans,sans-serif}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){filter:blur(0px);animation:blur-text 1.5s 0s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){filter:blur(0px);animation:blur-text 1.5s .2s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){filter:blur(0px);animation:blur-text 1.5s .4s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){filter:blur(0px);animation:blur-text 1.5s .6s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){filter:blur(0px);animation:blur-text 1.5s .8s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){filter:blur(0px);animation:blur-text 1.5s 1s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){filter:blur(0px);animation:blur-text 1.5s 1.2s infinite linear alternate}@keyframes blur-text{0%{filter:blur(0px)}to{filter:blur(4px)}}']}),n})();function UB(n,e){1&n&&(h.ynx(0),h._UZ(1,"app-loading"),h.BQk())}function BB(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div",13),h._UZ(2,"single-card",14),h.qZA()()),2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("@Fading",void 0),h.xp6(2),h.Q6J("revealCardEvent",r.revealCardEvent)("user",t)("enableRemoveUser",r.enableRemoveUser)}}function VB(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div",15)(2,"span",16),h._uU(3),h.qZA()()()),2&n){const t=h.oxw(2);h.Q6J("@Fading",void 0),h.xp6(3),h.Oqu(t.average)}}function HB(n,e){if(1&n&&(h.TgZ(0,"div",17)(1,"div"),h._UZ(2,"app-poker-card",18),h.qZA()()),2&n){const t=h.oxw(2);h.xp6(2),h.Q6J("revealCard",t.reveal)}}function jB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",22),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,u=h.oxw(3);return h.KtG(u.removeUser(i.name))}),h._uU(1,"x"),h.qZA()}}function $B(n,e){if(1&n&&(h.TgZ(0,"li")(1,"span"),h._uU(2),h.qZA(),h.YNc(3,jB,2,0,"span",21),h.ALo(4,"async"),h.qZA()),2&n){const t=e.$implicit,r=h.oxw(3);h.xp6(2),h.Oqu(t.name),h.xp6(1),h.Q6J("ngIf",h.lcZ(4,2,r.enableRemoveUser))}}function zB(n,e){if(1&n&&(h.TgZ(0,"div",19)(1,"h4"),h._uU(2,"Espectadores"),h.qZA(),h.TgZ(3,"ul"),h.YNc(4,$B,5,4,"li",20),h.qZA()()),2&n){const t=h.oxw(2);h.xp6(4),h.Q6J("ngForOf",t.filterSpactators())}}function GB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",23)(1,"button",12),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.revealCards())}),h._uU(2,"Virar"),h.qZA(),h.TgZ(3,"button",12),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.hideCards())}),h._uU(4,"Desvirar"),h.qZA()()}}function WB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"div",2),h.YNc(2,BB,3,4,"div",3),h.qZA(),h.YNc(3,VB,4,2,"div",4),h.YNc(4,HB,3,1,"div",5),h.TgZ(5,"div"),h.YNc(6,zB,5,1,"div",6),h.TgZ(7,"div",7)(8,"div"),h._uU(9),h.qZA(),h.TgZ(10,"div"),h._uU(11),h.qZA(),h.YNc(12,GB,5,0,"div",8),h.qZA(),h.TgZ(13,"div",9)(14,"label",10),h._uU(15),h.qZA(),h._UZ(16,"input",11),h.TgZ(17,"button",12),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.alterName())}),h._uU(18,"Alterar nome"),h.qZA()()()()}if(2&n){const t=h.oxw();h.xp6(2),h.Q6J("ngForOf",t.filterPlayers())("ngForTrackBy",t.trackUser),h.xp6(1),h.Q6J("ngIf",t.reveal),h.xp6(1),h.Q6J("ngIf",!(null!=t.session.user&&t.session.user.isSpectator)),h.xp6(2),h.Q6J("ngIf",t.filterSpactators().length>0),h.xp6(3),h.AsE("",t.spactatorCount," ",t.spactatorCount>1?"Espectadores":"Espectador",""),h.xp6(2),h.AsE("",t.playerCount," ",t.playerCount>1?"Jogadores":"Jogador",""),h.xp6(1),h.Q6J("ngIf",!(null!=t.session.user&&t.session.user.isSpectator)),h.xp6(3),h.hij("Nome atual: ",null==t.session.user?null:t.session.user.name,"")}}let qB=(()=>{class n{constructor(t,r,i,u,l,f){this.router=t,this.activatedroute=r,this.firestoreService=i,this.locaStorageService=u,this.hotkeysService=l,this.store=f,this.enableRemoveUser=new h.vpe,this.revealCardEvent=new h.vpe,this.roomSubscription=new ix.w0,this.loading=!0,this.roomName="",this.users=[],this.spactatorCount=0,this.playerCount=0,this.reveal=!1,this.average=0,this.session={},this.hotkeysService.add(new Iw("alt+shift+k",y=>(this.enableRemoveUser.emit(!0),!1))),f.select(y=>y.session).subscribe(y=>this.session=y)}ngOnInit(){this.roomName=this.activatedroute.snapshot.paramMap.get("roomName"),this.checkIfRoomExists()}ngOnDestroy(){this.handleUserExiting()}checkIfRoomExists(){var t=this;return(0,Me.Z)(function*(){let r=yield t.firestoreService.getRoomAsync(t.roomName);t.store.dispatch(gg({user:t.locaStorageService.get("session-key")})),t.store.dispatch(gT({room:r})),null!=r&&t.session.user?(r.users.findIndex(i=>i.name==t.session.user?.name)<0&&(yield t.firestoreService.AddUserAsync(t.roomName,t.session.user)),t.revealCardEvent.subscribe(i=>t.reveal=i),t.roomSubscription=t.firestoreService.listenRoomChanges(t.roomName).subscribe({next:i=>{if(t.store.dispatch(gT({room:i})),i.users.findIndex(E=>E.name==t.session.user?.name)<0)return alert("Voc\xea foi removido da sala"),void t.router.navigate(["/"]);const l=i.users.map(E=>E.name);t.users=t.users.filter(E=>l.includes(E.name));let f=0,y=0;for(const E of i.users){if(E.name!=t.session.user?.name){let C=t.users.findIndex(A=>A.name==E.name);C<0?t.users.push(E):t.users[C]=E}!E.isSpectator&&!isNaN(Number(E.selectedCard))&&(f+=Number(E.selectedCard),y++)}t.average=Math.trunc(f/y),t.spactatorCount=i.users.filter(E=>E.isSpectator).length,t.playerCount=i.users.filter(E=>!E.isSpectator).length,t.revealCardEvent.emit(i.revealCards)}}),t.loading=!1):t.router.navigate(["/"])})()}trackUser(t,r){return r.name}handleUserExiting(){var t=this;return(0,Me.Z)(function*(){t.roomSubscription.unsubscribe(),t.session.user?.name&&(yield t.firestoreService.removeUserAsync(t.roomName,t.session.user.name))})()}revealCards(){this.firestoreService.revealCardAsync(this.roomName,!0)}hideCards(){this.firestoreService.revealCardAsync(this.roomName,!1)}resetCards(){this.firestoreService.resetCardAsync(this.roomName)}filterPlayers(){return this.users.filter(t=>!t.isSpectator)}filterSpactators(){return this.users.filter(t=>t.isSpectator)}alterName(){var t=document.getElementById("newName");if(t.value)if(this.users.findIndex(r=>r.name==t.value)<0){let r=this.session.user;r={...this.session.user,name:t.value.substring(0,25)},this.store.dispatch(gg({user:r})),this.firestoreService.updateUserAsync(this.roomName,r),t.value=""}else alert("N\xe3o foi poss\xedvel renomear")}removeUser(t){confirm(`Deseja remover o usu\xe1rio ${t}?`)&&this.firestoreService.removeUserAsync(this.roomName,t)}onFocus(t){}onBlur(t){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi),h.Y36(bf),h.Y36(Ax),h.Y36(Rx),h.Y36(VR),h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-room"]],hostBindings:function(t,r){1&t&&h.NdJ("focus",function(u){return r.onFocus(u)},!1,h.Jf7)("blur",function(u){return r.onBlur(u)},!1,h.Jf7)},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showRoom",""],[1,"grid-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","current-player",4,"ngIf"],["style","margin-left: 20px;",4,"ngIf"],[2,"position","fixed","bottom","5px","margin-left","20px"],["style","margin-top: 10px;",4,"ngIf"],[2,"position","fixed","bottom","5px","margin-left","85%"],["for",""],["type","text","name","newName","id","newName","placeholder","Novo nome"],[3,"click"],[1,"grid-item"],[3,"revealCardEvent","user","enableRemoveUser"],[1,"average"],[2,"font-size","2rem"],[1,"current-player"],[3,"revealCard"],[2,"margin-left","20px"],[4,"ngFor","ngForOf"],["class","ms-2 text-danger cursor-pointer",3,"click",4,"ngIf"],[1,"ms-2","text-danger","cursor-pointer",3,"click"],[2,"margin-top","10px"]],template:function(t,r){if(1&t&&(h.YNc(0,UB,2,0,"ng-container",0),h.YNc(1,WB,19,11,"ng-template",null,1,h.W1O)),2&t){const i=h.MAs(2);h.Q6J("ngIf",r.loading)("ngIfElse",i)}},dependencies:[ss,Un,kB,FB,LB,nl],styles:[".average[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px}.current-player[_ngcontent-%COMP%]{display:flex;justify-content:center;position:fixed;bottom:0;left:46%;background-color:beige}"],data:{animation:[ZN("Fading",[QA("void",VI({opacity:0})),QA("*",VI({opacity:1})),XA(":enter",ZA("800ms ease-out")),XA(":leave",ZA("800ms ease-in"))])]}}),n})();function KB(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"li",13)(2,"div",14)(3,"span"),h._uU(4),h.ALo(5,"titlecase"),h.qZA(),h.TgZ(6,"div",15)(7,"i",16),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.enterRoom(u,!1))}),h.qZA(),h.TgZ(8,"i",17),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.enterRoom(u,!0))}),h.qZA()()()(),h.BQk()}if(2&n){const t=e.$implicit;h.xp6(4),h.Oqu(h.lcZ(5,1,t))}}function ZB(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",2)(2,"div",3)(3,"div")(4,"label",4),h._uU(5,"Criar nova sala"),h.qZA(),h._UZ(6,"input",5),h.qZA(),h.TgZ(7,"div",6)(8,"button",7),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.createNewRoom())}),h._uU(9,"Criar"),h.qZA()()()(),h.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"b"),h._uU(14,"Salas"),h.qZA()(),h.TgZ(15,"ul",11),h.YNc(16,KB,9,3,"ng-container",12),h.qZA()()(),h.BQk()}if(2&n){const t=h.oxw();h.xp6(16),h.Q6J("ngForOf",t.rooms)}}function YB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",8)(1,"div",3)(2,"div")(3,"label",18),h._uU(4,"Informe um nome de usu\xe1rio"),h.qZA(),h._UZ(5,"input",19),h.qZA(),h.TgZ(6,"div",6)(7,"button",7),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.saveUserName())}),h._uU(8,"Salvar"),h.qZA()()()()}}let Mk=(()=>{class n{constructor(t,r,i,u){this.router=t,this.localStorage=r,this.firestoreService=i,this.store=u,this.rooms=[],this.roomsSubscription=new ix.w0,this.session={theme:"light"},u.select(l=>l.session).subscribe(l=>this.session=l)}ngOnInit(){this.roomsSubscription=this.firestoreService.getAllRooms().subscribe(r=>this.rooms=r.map(i=>i.name));const t=this.localStorage.get("session-key");setTimeout(()=>this.store.dispatch(gg({user:t})),0)}ngOnDestroy(){this.roomsSubscription.unsubscribe()}createNewRoom(){let t=document.getElementById("new-room");this.rooms.includes(t.value.toLowerCase())?confirm(`Uma sala com o nome ${t.value}, j\xe1 existe. Deseja ser redirecionado?`)&&this.router.navigate([`room/${t}`]):this.firestoreService.newRoom({name:t.value,revealCards:!1,calc:0,users:[]}),t.value=""}saveUserName(){let t=document.getElementById("user-name").value;this.firestoreService.userExists(t).subscribe(r=>{r?alert("Nome de usu\xe1rio j\xe1 cadastrado, escolha outro!"):this.store.dispatch(gg({user:{name:t,selectedCard:"",isSpectator:!0}}))})}enterRoom(t,r){const i={...this.session.user,isSpectator:r};this.store.dispatch(gg({user:i})),this.router.navigate([`room/${t}`])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi),h.Y36(Rx),h.Y36(Ax),h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["setUserName",""],[1,"d-flex","justify-content-center","mt-2"],[2,"width","20rem"],["for","new-room",1,"form-label"],["type","text","maxlength","25","id","new-room",1,"form-control"],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[1,"d-flex","justify-content-center","mt-5"],[1,"card",2,"min-width","20rem"],[1,"card-header"],[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["title","Entrar",1,"fa-solid","fa-right-to-bracket","d-flex","align-items-center","cursor-pointer","me-3",3,"click"],["title","Assitir",1,"fa-solid","fa-eye","d-flex","align-items-center","cursor-pointer",3,"click"],["for","user-name",1,"form-label"],["type","text","maxlength","25","id","user-name",1,"form-control"]],template:function(t,r){if(1&t&&(h.YNc(0,ZB,17,1,"ng-container",0),h.YNc(1,YB,9,0,"ng-template",null,1,h.W1O)),2&t){const i=h.MAs(2);h.Q6J("ngIf",null==r.session.user?null:r.session.user.name)("ngIfElse",i)}},dependencies:[ss,Un,Df]}),n})();const QB=[{path:"",component:Mk},{path:"room/:roomName",component:qB},{path:"**",component:Mk}];let XB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Tk.forRoot(QB),Tk]}),n})();function JB(n,e){1&n&&(h.TgZ(0,"a",14),h._uU(1,"Sair"),h.qZA())}function e4(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"i",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.changeTheme("dark"))}),h.qZA()}}function t4(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"i",16),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.changeTheme("light"))}),h.qZA()}}function n4(n,e){if(1&n&&(h.TgZ(0,"nav",1)(1,"div",2)(2,"span",3),h._uU(3),h.qZA(),h.TgZ(4,"button",4),h._UZ(5,"span",5),h.qZA(),h.TgZ(6,"div",6),h._UZ(7,"ul",7),h.TgZ(8,"div",8)(9,"div",9),h.YNc(10,JB,2,0,"a",10),h.qZA(),h.TgZ(11,"div",11),h.YNc(12,e4,1,0,"i",12),h.YNc(13,t4,1,0,"i",13),h.qZA()()()()()),2&n){const t=h.oxw();let r;h.xp6(3),h.hij("Ol\xe1, ",null!==(r=null==t.session.user?null:t.session.user.name)&&void 0!==r?r:"N/A",""),h.xp6(7),h.Q6J("ngIf",t.session.room),h.xp6(2),h.Q6J("ngIf","light"==t.session.theme),h.xp6(1),h.Q6J("ngIf","dark"==t.session.theme)}}let r4=(()=>{class n{constructor(t){this.store=t,this.session={},t.select(r=>r.session).subscribe(r=>this.session=r)}ngOnInit(){}changeTheme(t){this.store.dispatch(vM({theme:t}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav-bar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg bg-body-tertiary",4,"ngIf"],[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"d-flex"],[1,"navbar-text","me-4"],["class","nav-link text-danger","href","javascript:void(0)",4,"ngIf"],[1,"navbar-text","me-2"],["class","fa-solid fa-moon cursor-pointer",3,"click",4,"ngIf"],["class","fa-solid fa-sun cursor-pointer",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"nav-link","text-danger"],[1,"fa-solid","fa-moon","cursor-pointer",3,"click"],[1,"fa-solid","fa-sun","cursor-pointer",3,"click"]],template:function(t,r){1&t&&h.YNc(0,n4,14,4,"nav",0),2&t&&h.Q6J("ngIf",null==r.session.user?null:r.session.user.name)},dependencies:[Un]}),n})();function i4(n,e){1&n&&h._UZ(0,"app-nav-bar")}let s4=(()=>{class n{constructor(t){this.store=t,this.title="Planning Poker",this.session={theme:"light"},t.select(r=>r.session).subscribe(r=>{this.session=r,document.getElementById("rootHtml").dataset.bsTheme=r.theme})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Cu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(h.YNc(0,i4,1,0,"app-nav-bar",0),h._UZ(1,"router-outlet")),2&t&&h.Q6J("ngIf",r.session.user)},dependencies:[Un,PT,r4]}),n})();const a4=new Rk,u4=new Rx(a4),c4=function qL(n,...e){const t=new Map;for(const r of e)for(const i of r.types){const u=t.get(i);t.set(i,u?(f,y)=>r.reducer(u(f,y),y):r.reducer)}return function(r=n,i){const u=t.get(i.type);return u?u(r,i):r}}({theme:"light",room:void 0,user:void 0},ux(KL,(n,e)=>e),ux(vM,(n,e)=>({...n,theme:e.theme})),ux(gg,(n,e)=>(u4.set("session-key",e.user),{...n,user:e.user})),ux(gT,(n,e)=>({...n,room:e.room})));let l4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[s4]}),n.\u0275inj=h.cJS({imports:[Dr.hO.initializeApp(rx_firebaseConfig),rP.enablePersistence(),qN,KF,tc,XB,YF.forRoot(),WL.forRoot({session:c4})]}),n})();(0,h.G48)(),ec().bootstrapModule(l4).catch(n=>console.error(n))},7466:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Y=O.lib.BlockCipher,ie=O.algo,q=[],J=[],N=[],B=[],P=[],R=[],F=[],$=[],G=[],K=[];!function(){for(var H=[],X=0;X<256;X++)H[X]=X<128?X<<1:X<<1^283;var _e=0,ae=0;for(X=0;X<256;X++){var ce=ae^ae<<1^ae<<2^ae<<3^ae<<4;q[_e]=ce=ce>>>8^255&ce^99,J[ce]=_e;var j,re=H[_e],ne=H[re],le=H[ne];N[_e]=(j=257*H[ce]^16843008*ce)<<24|j>>>8,B[_e]=j<<16|j>>>16,P[_e]=j<<8|j>>>24,R[_e]=j,F[ce]=(j=16843009*le^65537*ne^257*re^16843008*_e)<<24|j>>>8,$[ce]=j<<16|j>>>16,G[ce]=j<<8|j>>>24,K[ce]=j,_e?(_e=re^H[H[H[le^re]]],ae^=H[H[ae]]):_e=ae=1}}();var ve=[0,1,2,4,8,16,32,64,128,27,54],ee=ie.AES=Y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var X=this._keyPriorReset=this._key,_e=X.words,ae=X.sigBytes/4,re=4*((this._nRounds=ae+6)+1),ne=this._keySchedule=[],le=0;le<re;le++)le<ae?ne[le]=_e[le]:(H=ne[le-1],le%ae?ae>6&&le%ae==4&&(H=q[H>>>24]<<24|q[H>>>16&255]<<16|q[H>>>8&255]<<8|q[255&H]):(H=q[(H=H<<8|H>>>24)>>>24]<<24|q[H>>>16&255]<<16|q[H>>>8&255]<<8|q[255&H],H^=ve[le/ae|0]<<24),ne[le]=ne[le-ae]^H);for(var j=this._invKeySchedule=[],pe=0;pe<re;pe++){if(le=re-pe,pe%4)var H=ne[le];else H=ne[le-4];j[pe]=pe<4||le<=4?H:F[q[H>>>24]]^$[q[H>>>16&255]]^G[q[H>>>8&255]]^K[q[255&H]]}}},encryptBlock:function(H,X){this._doCryptBlock(H,X,this._keySchedule,N,B,P,R,q)},decryptBlock:function(H,X){var _e=H[X+1];H[X+1]=H[X+3],H[X+3]=_e,this._doCryptBlock(H,X,this._invKeySchedule,F,$,G,K,J),_e=H[X+1],H[X+1]=H[X+3],H[X+3]=_e},_doCryptBlock:function(H,X,_e,ae,ce,re,ne,le){for(var j=this._nRounds,pe=H[X]^_e[0],z=H[X+1]^_e[1],te=H[X+2]^_e[2],he=H[X+3]^_e[3],se=4,Ne=1;Ne<j;Ne++){var Re=ae[pe>>>24]^ce[z>>>16&255]^re[te>>>8&255]^ne[255&he]^_e[se++],Ge=ae[z>>>24]^ce[te>>>16&255]^re[he>>>8&255]^ne[255&pe]^_e[se++],lt=ae[te>>>24]^ce[he>>>16&255]^re[pe>>>8&255]^ne[255&z]^_e[se++],Ae=ae[he>>>24]^ce[pe>>>16&255]^re[z>>>8&255]^ne[255&te]^_e[se++];pe=Re,z=Ge,te=lt,he=Ae}Re=(le[pe>>>24]<<24|le[z>>>16&255]<<16|le[te>>>8&255]<<8|le[255&he])^_e[se++],Ge=(le[z>>>24]<<24|le[te>>>16&255]<<16|le[he>>>8&255]<<8|le[255&pe])^_e[se++],lt=(le[te>>>24]<<24|le[he>>>16&255]<<16|le[pe>>>8&255]<<8|le[255&z])^_e[se++],Ae=(le[he>>>24]<<24|le[pe>>>16&255]<<16|le[z>>>8&255]<<8|le[255&te])^_e[se++],H[X]=Re,H[X+1]=Ge,H[X+2]=lt,H[X+3]=Ae},keySize:8});O.AES=Y._createHelper(ee)}(),h.AES)},3057:function(Le,Ee,M){var k,Y,ie,q,J,N,P,F,$,K,ve,ee,X,ae,re,ne,j,pe,h;Le.exports=(h=M(7585),M(7865),void(h.lib.Cipher||(k=h,Y=k.lib,ie=Y.Base,q=Y.WordArray,J=Y.BufferedBlockAlgorithm,N=k.enc,P=N.Base64,F=k.algo.EvpKDF,$=Y.Cipher=J.extend({cfg:ie.extend(),createEncryptor:function(z,te){return this.create(this._ENC_XFORM_MODE,z,te)},createDecryptor:function(z,te){return this.create(this._DEC_XFORM_MODE,z,te)},init:function(z,te,he){this.cfg=this.cfg.extend(he),this._xformMode=z,this._key=te,this.reset()},reset:function(){J.reset.call(this),this._doReset()},process:function(z){return this._append(z),this._process()},finalize:function(z){return z&&this._append(z),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function z(te){return"string"==typeof te?pe:ne}return function(te){return{encrypt:function(he,se,Ne){return z(se).encrypt(te,he,se,Ne)},decrypt:function(he,se,Ne){return z(se).decrypt(te,he,se,Ne)}}}}()}),Y.StreamCipher=$.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),K=k.mode={},ve=Y.BlockCipherMode=ie.extend({createEncryptor:function(z,te){return this.Encryptor.create(z,te)},createDecryptor:function(z,te){return this.Decryptor.create(z,te)},init:function(z,te){this._cipher=z,this._iv=te}}),ee=K.CBC=function(){var z=ve.extend();function te(he,se,Ne){var Re,Ge=this._iv;Ge?(Re=Ge,this._iv=undefined):Re=this._prevBlock;for(var lt=0;lt<Ne;lt++)he[se+lt]^=Re[lt]}return z.Encryptor=z.extend({processBlock:function(he,se){var Ne=this._cipher,Re=Ne.blockSize;te.call(this,he,se,Re),Ne.encryptBlock(he,se),this._prevBlock=he.slice(se,se+Re)}}),z.Decryptor=z.extend({processBlock:function(he,se){var Ne=this._cipher,Re=Ne.blockSize,Ge=he.slice(se,se+Re);Ne.decryptBlock(he,se),te.call(this,he,se,Re),this._prevBlock=Ge}}),z}(),X=(k.pad={}).Pkcs7={pad:function(z,te){for(var he=4*te,se=he-z.sigBytes%he,Ne=se<<24|se<<16|se<<8|se,Re=[],Ge=0;Ge<se;Ge+=4)Re.push(Ne);var lt=q.create(Re,se);z.concat(lt)},unpad:function(z){z.sigBytes-=255&z.words[z.sigBytes-1>>>2]}},Y.BlockCipher=$.extend({cfg:$.cfg.extend({mode:ee,padding:X}),reset:function(){var z;$.reset.call(this);var te=this.cfg,he=te.iv,se=te.mode;this._xformMode==this._ENC_XFORM_MODE?z=se.createEncryptor:(z=se.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==z?this._mode.init(this,he&&he.words):(this._mode=z.call(se,this,he&&he.words),this._mode.__creator=z)},_doProcessBlock:function(z,te){this._mode.processBlock(z,te)},_doFinalize:function(){var z,te=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(te.pad(this._data,this.blockSize),z=this._process(!0)):(z=this._process(!0),te.unpad(z)),z},blockSize:4}),ae=Y.CipherParams=ie.extend({init:function(z){this.mixIn(z)},toString:function(z){return(z||this.formatter).stringify(this)}}),re=(k.format={}).OpenSSL={stringify:function(z){var he=z.ciphertext,se=z.salt;return(se?q.create([1398893684,1701076831]).concat(se).concat(he):he).toString(P)},parse:function(z){var te,he=P.parse(z),se=he.words;return 1398893684==se[0]&&1701076831==se[1]&&(te=q.create(se.slice(2,4)),se.splice(0,4),he.sigBytes-=16),ae.create({ciphertext:he,salt:te})}},ne=Y.SerializableCipher=ie.extend({cfg:ie.extend({format:re}),encrypt:function(z,te,he,se){se=this.cfg.extend(se);var Ne=z.createEncryptor(he,se),Re=Ne.finalize(te),Ge=Ne.cfg;return ae.create({ciphertext:Re,key:he,iv:Ge.iv,algorithm:z,mode:Ge.mode,padding:Ge.padding,blockSize:z.blockSize,formatter:se.format})},decrypt:function(z,te,he,se){return se=this.cfg.extend(se),te=this._parse(te,se.format),z.createDecryptor(he,se).finalize(te.ciphertext)},_parse:function(z,te){return"string"==typeof z?te.parse(z,this):z}}),j=(k.kdf={}).OpenSSL={execute:function(z,te,he,se){se||(se=q.random(8));var Ne=F.create({keySize:te+he}).compute(z,se),Re=q.create(Ne.words.slice(te),4*he);return Ne.sigBytes=4*te,ae.create({key:Ne,iv:Re,salt:se})}},pe=Y.PasswordBasedCipher=ne.extend({cfg:ne.cfg.extend({kdf:j}),encrypt:function(z,te,he,se){var Ne=(se=this.cfg.extend(se)).kdf.execute(he,z.keySize,z.ivSize);se.iv=Ne.iv;var Re=ne.encrypt.call(this,z,te,Ne.key,se);return Re.mixIn(Ne),Re},decrypt:function(z,te,he,se){se=this.cfg.extend(se),te=this._parse(te,se.format);var Ne=se.kdf.execute(he,z.keySize,z.ivSize,te.salt);return se.iv=Ne.iv,ne.decrypt.call(this,z,te,Ne.key,se)}}))))},7585:function(Le,Ee,M){var h;Le.exports=(h=h||function(O,k){var Y;if(typeof window<"u"&&window.crypto&&(Y=window.crypto),typeof self<"u"&&self.crypto&&(Y=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(Y=globalThis.crypto),!Y&&typeof window<"u"&&window.msCrypto&&(Y=window.msCrypto),!Y&&typeof global<"u"&&global.crypto&&(Y=global.crypto),!Y)try{Y=M(2480)}catch{}var ie=function(){if(Y){if("function"==typeof Y.getRandomValues)try{return Y.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof Y.randomBytes)try{return Y.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},q=Object.create||function(){function H(){}return function(X){var _e;return H.prototype=X,_e=new H,H.prototype=null,_e}}(),J={},N=J.lib={},B=N.Base={extend:function(H){var X=q(this);return H&&X.mixIn(H),(!X.hasOwnProperty("init")||this.init===X.init)&&(X.init=function(){X.$super.init.apply(this,arguments)}),X.init.prototype=X,X.$super=this,X},create:function(){var H=this.extend();return H.init.apply(H,arguments),H},init:function(){},mixIn:function(H){for(var X in H)H.hasOwnProperty(X)&&(this[X]=H[X]);H.hasOwnProperty("toString")&&(this.toString=H.toString)},clone:function(){return this.init.prototype.extend(this)}},P=N.WordArray=B.extend({init:function(H,X){H=this.words=H||[],this.sigBytes=null!=X?X:4*H.length},toString:function(H){return(H||F).stringify(this)},concat:function(H){var X=this.words,_e=H.words,ae=this.sigBytes,ce=H.sigBytes;if(this.clamp(),ae%4)for(var re=0;re<ce;re++)X[ae+re>>>2]|=(_e[re>>>2]>>>24-re%4*8&255)<<24-(ae+re)%4*8;else for(var le=0;le<ce;le+=4)X[ae+le>>>2]=_e[le>>>2];return this.sigBytes+=ce,this},clamp:function(){var H=this.words,X=this.sigBytes;H[X>>>2]&=4294967295<<32-X%4*8,H.length=O.ceil(X/4)},clone:function(){var H=B.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var X=[],_e=0;_e<H;_e+=4)X.push(ie());return new P.init(X,H)}}),R=J.enc={},F=R.Hex={stringify:function(H){for(var X=H.words,_e=H.sigBytes,ae=[],ce=0;ce<_e;ce++){var re=X[ce>>>2]>>>24-ce%4*8&255;ae.push((re>>>4).toString(16)),ae.push((15&re).toString(16))}return ae.join("")},parse:function(H){for(var X=H.length,_e=[],ae=0;ae<X;ae+=2)_e[ae>>>3]|=parseInt(H.substr(ae,2),16)<<24-ae%8*4;return new P.init(_e,X/2)}},$=R.Latin1={stringify:function(H){for(var X=H.words,_e=H.sigBytes,ae=[],ce=0;ce<_e;ce++)ae.push(String.fromCharCode(X[ce>>>2]>>>24-ce%4*8&255));return ae.join("")},parse:function(H){for(var X=H.length,_e=[],ae=0;ae<X;ae++)_e[ae>>>2]|=(255&H.charCodeAt(ae))<<24-ae%4*8;return new P.init(_e,X)}},G=R.Utf8={stringify:function(H){try{return decodeURIComponent(escape($.stringify(H)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(H){return $.parse(unescape(encodeURIComponent(H)))}},K=N.BufferedBlockAlgorithm=B.extend({reset:function(){this._data=new P.init,this._nDataBytes=0},_append:function(H){"string"==typeof H&&(H=G.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var X,_e=this._data,ae=_e.words,ce=_e.sigBytes,re=this.blockSize,le=ce/(4*re),j=(le=H?O.ceil(le):O.max((0|le)-this._minBufferSize,0))*re,pe=O.min(4*j,ce);if(j){for(var z=0;z<j;z+=re)this._doProcessBlock(ae,z);X=ae.splice(0,j),_e.sigBytes-=pe}return new P.init(X,pe)},clone:function(){var H=B.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0}),ee=(N.Hasher=K.extend({cfg:B.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){K.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){return H&&this._append(H),this._doFinalize()},blockSize:16,_createHelper:function(H){return function(X,_e){return new H.init(_e).finalize(X)}},_createHmacHelper:function(H){return function(X,_e){return new ee.HMAC.init(H,_e).finalize(X)}}}),J.algo={});return J}(Math),h)},8319:function(Le,Ee,M){var h,Y;Le.exports=(h=M(7585),Y=h.lib.WordArray,h.enc.Base64={stringify:function(N){var B=N.words,P=N.sigBytes,R=this._map;N.clamp();for(var F=[],$=0;$<P;$+=3)for(var ee=(B[$>>>2]>>>24-$%4*8&255)<<16|(B[$+1>>>2]>>>24-($+1)%4*8&255)<<8|B[$+2>>>2]>>>24-($+2)%4*8&255,H=0;H<4&&$+.75*H<P;H++)F.push(R.charAt(ee>>>6*(3-H)&63));var X=R.charAt(64);if(X)for(;F.length%4;)F.push(X);return F.join("")},parse:function(N){var B=N.length,P=this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var F=0;F<P.length;F++)R[P.charCodeAt(F)]=F}var $=P.charAt(64);if($){var G=N.indexOf($);-1!==G&&(B=G)}return function J(N,B,P){for(var R=[],F=0,$=0;$<B;$++)if($%4){var G=P[N.charCodeAt($-1)]<<$%4*2,K=P[N.charCodeAt($)]>>>6-$%4*2;R[F>>>2]|=(G|K)<<24-F%4*8,F++}return Y.create(R,F)}(N,B,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},h.enc.Base64)},4410:function(Le,Ee,M){var h,Y;Le.exports=(h=M(7585),Y=h.lib.WordArray,h.enc.Base64url={stringify:function(N,B=!0){var P=N.words,R=N.sigBytes,F=B?this._safe_map:this._map;N.clamp();for(var $=[],G=0;G<R;G+=3)for(var H=(P[G>>>2]>>>24-G%4*8&255)<<16|(P[G+1>>>2]>>>24-(G+1)%4*8&255)<<8|P[G+2>>>2]>>>24-(G+2)%4*8&255,X=0;X<4&&G+.75*X<R;X++)$.push(F.charAt(H>>>6*(3-X)&63));var _e=F.charAt(64);if(_e)for(;$.length%4;)$.push(_e);return $.join("")},parse:function(N,B=!0){var P=N.length,R=B?this._safe_map:this._map,F=this._reverseMap;if(!F){F=this._reverseMap=[];for(var $=0;$<R.length;$++)F[R.charCodeAt($)]=$}var G=R.charAt(64);if(G){var K=N.indexOf(G);-1!==K&&(P=K)}return function J(N,B,P){for(var R=[],F=0,$=0;$<B;$++)if($%4){var G=P[N.charCodeAt($-1)]<<$%4*2,K=P[N.charCodeAt($)]>>>6-$%4*2;R[F>>>2]|=(G|K)<<24-F%4*8,F++}return Y.create(R,F)}(N,P,F)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},h.enc.Base64url)},9012:function(Le,Ee,M){var h;Le.exports=(h=M(7585),function(){var Y=h.lib.WordArray,ie=h.enc;function J(N){return N<<8&4278255360|N>>>8&16711935}ie.Utf16=ie.Utf16BE={stringify:function(N){for(var B=N.words,P=N.sigBytes,R=[],F=0;F<P;F+=2)R.push(String.fromCharCode(B[F>>>2]>>>16-F%4*8&65535));return R.join("")},parse:function(N){for(var B=N.length,P=[],R=0;R<B;R++)P[R>>>1]|=N.charCodeAt(R)<<16-R%2*16;return Y.create(P,2*B)}},ie.Utf16LE={stringify:function(N){for(var B=N.words,P=N.sigBytes,R=[],F=0;F<P;F+=2){var $=J(B[F>>>2]>>>16-F%4*8&65535);R.push(String.fromCharCode($))}return R.join("")},parse:function(N){for(var B=N.length,P=[],R=0;R<B;R++)P[R>>>1]|=J(N.charCodeAt(R)<<16-R%2*16);return Y.create(P,2*B)}}}(),h.enc.Utf16)},7865:function(Le,Ee,M){var O,k,Y,ie,q,N,h;Le.exports=(h=M(7585),M(5162),M(3764),ie=(k=(O=h).lib).WordArray,N=(q=O.algo).EvpKDF=(Y=k.Base).extend({cfg:Y.extend({keySize:4,hasher:q.MD5,iterations:1}),init:function(B){this.cfg=this.cfg.extend(B)},compute:function(B,P){for(var R,F=this.cfg,$=F.hasher.create(),G=ie.create(),K=G.words,ve=F.keySize,ee=F.iterations;K.length<ve;){R&&$.update(R),R=$.update(B).finalize(P),$.reset();for(var H=1;H<ee;H++)R=$.finalize(R),$.reset();G.concat(R)}return G.sigBytes=4*ve,G}}),O.EvpKDF=function(B,P,R){return N.create(R).compute(B,P)},h.EvpKDF)},1847:function(Le,Ee,M){var h,ie,J;Le.exports=(h=M(7585),M(3057),ie=h.lib.CipherParams,J=h.enc.Hex,h.format.Hex={stringify:function(P){return P.ciphertext.toString(J)},parse:function(P){var R=J.parse(P);return ie.create({ciphertext:R})}},h.format.Hex)},3764:function(Le,Ee,M){var h,q;Le.exports=(h=M(7585),q=h.enc.Utf8,void(h.algo.HMAC=h.lib.Base.extend({init:function(B,P){B=this._hasher=new B.init,"string"==typeof P&&(P=q.parse(P));var R=B.blockSize,F=4*R;P.sigBytes>F&&(P=B.finalize(P)),P.clamp();for(var $=this._oKey=P.clone(),G=this._iKey=P.clone(),K=$.words,ve=G.words,ee=0;ee<R;ee++)K[ee]^=1549556828,ve[ee]^=909522486;$.sigBytes=G.sigBytes=F,this.reset()},reset:function(){var B=this._hasher;B.reset(),B.update(this._iKey)},update:function(B){return this._hasher.update(B),this},finalize:function(B){var P=this._hasher,R=P.finalize(B);return P.reset(),P.finalize(this._oKey.clone().concat(R))}})))},7206:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(401),M(7412),M(9012),M(8319),M(4410),M(9493),M(5162),M(1817),M(8769),M(3351),M(6787),M(1971),M(4973),M(3764),M(8812),M(7865),M(3057),M(4424),M(6635),M(3592),M(9354),M(7934),M(4413),M(4630),M(187),M(1691),M(3237),M(1847),M(7466),M(7243),M(486),M(8182),M(3544),h)},7412:function(Le,Ee,M){var h;Le.exports=(h=M(7585),function(){if("function"==typeof ArrayBuffer){var Y=h.lib.WordArray,ie=Y.init,q=Y.init=function(J){if(J instanceof ArrayBuffer&&(J=new Uint8Array(J)),(J instanceof Int8Array||typeof Uint8ClampedArray<"u"&&J instanceof Uint8ClampedArray||J instanceof Int16Array||J instanceof Uint16Array||J instanceof Int32Array||J instanceof Uint32Array||J instanceof Float32Array||J instanceof Float64Array)&&(J=new Uint8Array(J.buffer,J.byteOffset,J.byteLength)),J instanceof Uint8Array){for(var N=J.byteLength,B=[],P=0;P<N;P++)B[P>>>2]|=J[P]<<24-P%4*8;ie.call(this,B,N)}else ie.apply(this,arguments)};q.prototype=Y}}(),h.lib.WordArray)},9493:function(Le,Ee,M){var h;Le.exports=(h=M(7585),function(O){var k=h,Y=k.lib,ie=Y.WordArray,q=Y.Hasher,J=k.algo,N=[];!function(){for(var G=0;G<64;G++)N[G]=4294967296*O.abs(O.sin(G+1))|0}();var B=J.MD5=q.extend({_doReset:function(){this._hash=new ie.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(G,K){for(var ve=0;ve<16;ve++){var ee=K+ve,H=G[ee];G[ee]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8)}var X=this._hash.words,_e=G[K+0],ae=G[K+1],ce=G[K+2],re=G[K+3],ne=G[K+4],le=G[K+5],j=G[K+6],pe=G[K+7],z=G[K+8],te=G[K+9],he=G[K+10],se=G[K+11],Ne=G[K+12],Re=G[K+13],Ge=G[K+14],lt=G[K+15],Ae=X[0],Ie=X[1],De=X[2],Se=X[3];Ae=P(Ae,Ie,De,Se,_e,7,N[0]),Se=P(Se,Ae,Ie,De,ae,12,N[1]),De=P(De,Se,Ae,Ie,ce,17,N[2]),Ie=P(Ie,De,Se,Ae,re,22,N[3]),Ae=P(Ae,Ie,De,Se,ne,7,N[4]),Se=P(Se,Ae,Ie,De,le,12,N[5]),De=P(De,Se,Ae,Ie,j,17,N[6]),Ie=P(Ie,De,Se,Ae,pe,22,N[7]),Ae=P(Ae,Ie,De,Se,z,7,N[8]),Se=P(Se,Ae,Ie,De,te,12,N[9]),De=P(De,Se,Ae,Ie,he,17,N[10]),Ie=P(Ie,De,Se,Ae,se,22,N[11]),Ae=P(Ae,Ie,De,Se,Ne,7,N[12]),Se=P(Se,Ae,Ie,De,Re,12,N[13]),De=P(De,Se,Ae,Ie,Ge,17,N[14]),Ae=R(Ae,Ie=P(Ie,De,Se,Ae,lt,22,N[15]),De,Se,ae,5,N[16]),Se=R(Se,Ae,Ie,De,j,9,N[17]),De=R(De,Se,Ae,Ie,se,14,N[18]),Ie=R(Ie,De,Se,Ae,_e,20,N[19]),Ae=R(Ae,Ie,De,Se,le,5,N[20]),Se=R(Se,Ae,Ie,De,he,9,N[21]),De=R(De,Se,Ae,Ie,lt,14,N[22]),Ie=R(Ie,De,Se,Ae,ne,20,N[23]),Ae=R(Ae,Ie,De,Se,te,5,N[24]),Se=R(Se,Ae,Ie,De,Ge,9,N[25]),De=R(De,Se,Ae,Ie,re,14,N[26]),Ie=R(Ie,De,Se,Ae,z,20,N[27]),Ae=R(Ae,Ie,De,Se,Re,5,N[28]),Se=R(Se,Ae,Ie,De,ce,9,N[29]),De=R(De,Se,Ae,Ie,pe,14,N[30]),Ae=F(Ae,Ie=R(Ie,De,Se,Ae,Ne,20,N[31]),De,Se,le,4,N[32]),Se=F(Se,Ae,Ie,De,z,11,N[33]),De=F(De,Se,Ae,Ie,se,16,N[34]),Ie=F(Ie,De,Se,Ae,Ge,23,N[35]),Ae=F(Ae,Ie,De,Se,ae,4,N[36]),Se=F(Se,Ae,Ie,De,ne,11,N[37]),De=F(De,Se,Ae,Ie,pe,16,N[38]),Ie=F(Ie,De,Se,Ae,he,23,N[39]),Ae=F(Ae,Ie,De,Se,Re,4,N[40]),Se=F(Se,Ae,Ie,De,_e,11,N[41]),De=F(De,Se,Ae,Ie,re,16,N[42]),Ie=F(Ie,De,Se,Ae,j,23,N[43]),Ae=F(Ae,Ie,De,Se,te,4,N[44]),Se=F(Se,Ae,Ie,De,Ne,11,N[45]),De=F(De,Se,Ae,Ie,lt,16,N[46]),Ae=$(Ae,Ie=F(Ie,De,Se,Ae,ce,23,N[47]),De,Se,_e,6,N[48]),Se=$(Se,Ae,Ie,De,pe,10,N[49]),De=$(De,Se,Ae,Ie,Ge,15,N[50]),Ie=$(Ie,De,Se,Ae,le,21,N[51]),Ae=$(Ae,Ie,De,Se,Ne,6,N[52]),Se=$(Se,Ae,Ie,De,re,10,N[53]),De=$(De,Se,Ae,Ie,he,15,N[54]),Ie=$(Ie,De,Se,Ae,ae,21,N[55]),Ae=$(Ae,Ie,De,Se,z,6,N[56]),Se=$(Se,Ae,Ie,De,lt,10,N[57]),De=$(De,Se,Ae,Ie,j,15,N[58]),Ie=$(Ie,De,Se,Ae,Re,21,N[59]),Ae=$(Ae,Ie,De,Se,ne,6,N[60]),Se=$(Se,Ae,Ie,De,se,10,N[61]),De=$(De,Se,Ae,Ie,ce,15,N[62]),Ie=$(Ie,De,Se,Ae,te,21,N[63]),X[0]=X[0]+Ae|0,X[1]=X[1]+Ie|0,X[2]=X[2]+De|0,X[3]=X[3]+Se|0},_doFinalize:function(){var G=this._data,K=G.words,ve=8*this._nDataBytes,ee=8*G.sigBytes;K[ee>>>5]|=128<<24-ee%32;var H=O.floor(ve/4294967296),X=ve;K[15+(ee+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),K[14+(ee+64>>>9<<4)]=16711935&(X<<8|X>>>24)|4278255360&(X<<24|X>>>8),G.sigBytes=4*(K.length+1),this._process();for(var _e=this._hash,ae=_e.words,ce=0;ce<4;ce++){var re=ae[ce];ae[ce]=16711935&(re<<8|re>>>24)|4278255360&(re<<24|re>>>8)}return _e},clone:function(){var G=q.clone.call(this);return G._hash=this._hash.clone(),G}});function P(G,K,ve,ee,H,X,_e){var ae=G+(K&ve|~K&ee)+H+_e;return(ae<<X|ae>>>32-X)+K}function R(G,K,ve,ee,H,X,_e){var ae=G+(K&ee|ve&~ee)+H+_e;return(ae<<X|ae>>>32-X)+K}function F(G,K,ve,ee,H,X,_e){var ae=G+(K^ve^ee)+H+_e;return(ae<<X|ae>>>32-X)+K}function $(G,K,ve,ee,H,X,_e){var ae=G+(ve^(K|~ee))+H+_e;return(ae<<X|ae>>>32-X)+K}k.MD5=q._createHelper(B),k.HmacMD5=q._createHmacHelper(B)}(Math),h.MD5)},4424:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.mode.CFB=function(){var O=h.lib.BlockCipherMode.extend();function k(Y,ie,q,J){var N,B=this._iv;B?(N=B.slice(0),this._iv=void 0):N=this._prevBlock,J.encryptBlock(N,0);for(var P=0;P<q;P++)Y[ie+P]^=N[P]}return O.Encryptor=O.extend({processBlock:function(Y,ie){var q=this._cipher,J=q.blockSize;k.call(this,Y,ie,J,q),this._prevBlock=Y.slice(ie,ie+J)}}),O.Decryptor=O.extend({processBlock:function(Y,ie){var q=this._cipher,J=q.blockSize,N=Y.slice(ie,ie+J);k.call(this,Y,ie,J,q),this._prevBlock=N}}),O}(),h.mode.CFB)},3592:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.mode.CTRGladman=function(){var O=h.lib.BlockCipherMode.extend();function k(q){if(255==(q>>24&255)){var J=q>>16&255,N=q>>8&255,B=255&q;255===J?(J=0,255===N?(N=0,255===B?B=0:++B):++N):++J,q=0,q+=J<<16,q+=N<<8,q+=B}else q+=1<<24;return q}var ie=O.Encryptor=O.extend({processBlock:function(q,J){var N=this._cipher,B=N.blockSize,P=this._iv,R=this._counter;P&&(R=this._counter=P.slice(0),this._iv=void 0),function Y(q){return 0===(q[0]=k(q[0]))&&(q[1]=k(q[1])),q}(R);var F=R.slice(0);N.encryptBlock(F,0);for(var $=0;$<B;$++)q[J+$]^=F[$]}});return O.Decryptor=ie,O}(),h.mode.CTRGladman)},6635:function(Le,Ee,M){var O,k,h;Le.exports=(h=M(7585),M(3057),h.mode.CTR=(k=(O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(Y,ie){var q=this._cipher,J=q.blockSize,N=this._iv,B=this._counter;N&&(B=this._counter=N.slice(0),this._iv=void 0);var P=B.slice(0);q.encryptBlock(P,0),B[J-1]=B[J-1]+1|0;for(var R=0;R<J;R++)Y[ie+R]^=P[R]}}),O.Decryptor=k,O),h.mode.CTR)},7934:function(Le,Ee,M){var O,h;Le.exports=(h=M(7585),M(3057),h.mode.ECB=((O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(k,Y){this._cipher.encryptBlock(k,Y)}}),O.Decryptor=O.extend({processBlock:function(k,Y){this._cipher.decryptBlock(k,Y)}}),O),h.mode.ECB)},9354:function(Le,Ee,M){var O,k,h;Le.exports=(h=M(7585),M(3057),h.mode.OFB=(k=(O=h.lib.BlockCipherMode.extend()).Encryptor=O.extend({processBlock:function(Y,ie){var q=this._cipher,J=q.blockSize,N=this._iv,B=this._keystream;N&&(B=this._keystream=N.slice(0),this._iv=void 0),q.encryptBlock(B,0);for(var P=0;P<J;P++)Y[ie+P]^=B[P]}}),O.Decryptor=k,O),h.mode.OFB)},4413:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.pad.AnsiX923={pad:function(O,k){var Y=O.sigBytes,ie=4*k,q=ie-Y%ie,J=Y+q-1;O.clamp(),O.words[J>>>2]|=q<<24-J%4*8,O.sigBytes+=q},unpad:function(O){O.sigBytes-=255&O.words[O.sigBytes-1>>>2]}},h.pad.Ansix923)},4630:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.pad.Iso10126={pad:function(O,k){var Y=4*k,ie=Y-O.sigBytes%Y;O.concat(h.lib.WordArray.random(ie-1)).concat(h.lib.WordArray.create([ie<<24],1))},unpad:function(O){O.sigBytes-=255&O.words[O.sigBytes-1>>>2]}},h.pad.Iso10126)},187:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.pad.Iso97971={pad:function(O,k){O.concat(h.lib.WordArray.create([2147483648],1)),h.pad.ZeroPadding.pad(O,k)},unpad:function(O){h.pad.ZeroPadding.unpad(O),O.sigBytes--}},h.pad.Iso97971)},3237:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.pad.NoPadding={pad:function(){},unpad:function(){}},h.pad.NoPadding)},1691:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(3057),h.pad.ZeroPadding={pad:function(O,k){var Y=4*k;O.clamp(),O.sigBytes+=Y-(O.sigBytes%Y||Y)},unpad:function(O){var k=O.words,Y=O.sigBytes-1;for(Y=O.sigBytes-1;Y>=0;Y--)if(k[Y>>>2]>>>24-Y%4*8&255){O.sigBytes=Y+1;break}}},h.pad.ZeroPadding)},8812:function(Le,Ee,M){var O,k,Y,ie,q,N,B,h;Le.exports=(h=M(7585),M(5162),M(3764),ie=(k=(O=h).lib).WordArray,N=(q=O.algo).HMAC,B=q.PBKDF2=(Y=k.Base).extend({cfg:Y.extend({keySize:4,hasher:q.SHA1,iterations:1}),init:function(P){this.cfg=this.cfg.extend(P)},compute:function(P,R){for(var F=this.cfg,$=N.create(F.hasher,P),G=ie.create(),K=ie.create([1]),ve=G.words,ee=K.words,H=F.keySize,X=F.iterations;ve.length<H;){var _e=$.update(R).finalize(K);$.reset();for(var ae=_e.words,ce=ae.length,re=_e,ne=1;ne<X;ne++){re=$.finalize(re),$.reset();for(var le=re.words,j=0;j<ce;j++)ae[j]^=le[j]}G.concat(_e),ee[0]++}return G.sigBytes=4*H,G}}),O.PBKDF2=function(P,R,F){return B.create(F).compute(P,R)},h.PBKDF2)},3544:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Y=O.lib.StreamCipher,q=[],J=[],N=[],B=O.algo.RabbitLegacy=Y.extend({_doReset:function(){var R=this._key.words,F=this.cfg.iv,$=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],G=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];this._b=0;for(var K=0;K<4;K++)P.call(this);for(K=0;K<8;K++)G[K]^=$[K+4&7];if(F){var ve=F.words,ee=ve[0],H=ve[1],X=16711935&(ee<<8|ee>>>24)|4278255360&(ee<<24|ee>>>8),_e=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),ae=X>>>16|4294901760&_e,ce=_e<<16|65535&X;for(G[0]^=X,G[1]^=ae,G[2]^=_e,G[3]^=ce,G[4]^=X,G[5]^=ae,G[6]^=_e,G[7]^=ce,K=0;K<4;K++)P.call(this)}},_doProcessBlock:function(R,F){var $=this._X;P.call(this),q[0]=$[0]^$[5]>>>16^$[3]<<16,q[1]=$[2]^$[7]>>>16^$[5]<<16,q[2]=$[4]^$[1]>>>16^$[7]<<16,q[3]=$[6]^$[3]>>>16^$[1]<<16;for(var G=0;G<4;G++)q[G]=16711935&(q[G]<<8|q[G]>>>24)|4278255360&(q[G]<<24|q[G]>>>8),R[F+G]^=q[G]},blockSize:4,ivSize:2});function P(){for(var R=this._X,F=this._C,$=0;$<8;$++)J[$]=F[$];for(F[0]=F[0]+1295307597+this._b|0,F[1]=F[1]+3545052371+(F[0]>>>0<J[0]>>>0?1:0)|0,F[2]=F[2]+886263092+(F[1]>>>0<J[1]>>>0?1:0)|0,F[3]=F[3]+1295307597+(F[2]>>>0<J[2]>>>0?1:0)|0,F[4]=F[4]+3545052371+(F[3]>>>0<J[3]>>>0?1:0)|0,F[5]=F[5]+886263092+(F[4]>>>0<J[4]>>>0?1:0)|0,F[6]=F[6]+1295307597+(F[5]>>>0<J[5]>>>0?1:0)|0,F[7]=F[7]+3545052371+(F[6]>>>0<J[6]>>>0?1:0)|0,this._b=F[7]>>>0<J[7]>>>0?1:0,$=0;$<8;$++){var G=R[$]+F[$],K=65535&G,ve=G>>>16;N[$]=((K*K>>>17)+K*ve>>>15)+ve*ve^((4294901760&G)*G|0)+((65535&G)*G|0)}R[0]=N[0]+(N[7]<<16|N[7]>>>16)+(N[6]<<16|N[6]>>>16)|0,R[1]=N[1]+(N[0]<<8|N[0]>>>24)+N[7]|0,R[2]=N[2]+(N[1]<<16|N[1]>>>16)+(N[0]<<16|N[0]>>>16)|0,R[3]=N[3]+(N[2]<<8|N[2]>>>24)+N[1]|0,R[4]=N[4]+(N[3]<<16|N[3]>>>16)+(N[2]<<16|N[2]>>>16)|0,R[5]=N[5]+(N[4]<<8|N[4]>>>24)+N[3]|0,R[6]=N[6]+(N[5]<<16|N[5]>>>16)+(N[4]<<16|N[4]>>>16)|0,R[7]=N[7]+(N[6]<<8|N[6]>>>24)+N[5]|0}O.RabbitLegacy=Y._createHelper(B)}(),h.RabbitLegacy)},8182:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Y=O.lib.StreamCipher,q=[],J=[],N=[],B=O.algo.Rabbit=Y.extend({_doReset:function(){for(var R=this._key.words,F=this.cfg.iv,$=0;$<4;$++)R[$]=16711935&(R[$]<<8|R[$]>>>24)|4278255360&(R[$]<<24|R[$]>>>8);var G=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],K=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];for(this._b=0,$=0;$<4;$++)P.call(this);for($=0;$<8;$++)K[$]^=G[$+4&7];if(F){var ve=F.words,ee=ve[0],H=ve[1],X=16711935&(ee<<8|ee>>>24)|4278255360&(ee<<24|ee>>>8),_e=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),ae=X>>>16|4294901760&_e,ce=_e<<16|65535&X;for(K[0]^=X,K[1]^=ae,K[2]^=_e,K[3]^=ce,K[4]^=X,K[5]^=ae,K[6]^=_e,K[7]^=ce,$=0;$<4;$++)P.call(this)}},_doProcessBlock:function(R,F){var $=this._X;P.call(this),q[0]=$[0]^$[5]>>>16^$[3]<<16,q[1]=$[2]^$[7]>>>16^$[5]<<16,q[2]=$[4]^$[1]>>>16^$[7]<<16,q[3]=$[6]^$[3]>>>16^$[1]<<16;for(var G=0;G<4;G++)q[G]=16711935&(q[G]<<8|q[G]>>>24)|4278255360&(q[G]<<24|q[G]>>>8),R[F+G]^=q[G]},blockSize:4,ivSize:2});function P(){for(var R=this._X,F=this._C,$=0;$<8;$++)J[$]=F[$];for(F[0]=F[0]+1295307597+this._b|0,F[1]=F[1]+3545052371+(F[0]>>>0<J[0]>>>0?1:0)|0,F[2]=F[2]+886263092+(F[1]>>>0<J[1]>>>0?1:0)|0,F[3]=F[3]+1295307597+(F[2]>>>0<J[2]>>>0?1:0)|0,F[4]=F[4]+3545052371+(F[3]>>>0<J[3]>>>0?1:0)|0,F[5]=F[5]+886263092+(F[4]>>>0<J[4]>>>0?1:0)|0,F[6]=F[6]+1295307597+(F[5]>>>0<J[5]>>>0?1:0)|0,F[7]=F[7]+3545052371+(F[6]>>>0<J[6]>>>0?1:0)|0,this._b=F[7]>>>0<J[7]>>>0?1:0,$=0;$<8;$++){var G=R[$]+F[$],K=65535&G,ve=G>>>16;N[$]=((K*K>>>17)+K*ve>>>15)+ve*ve^((4294901760&G)*G|0)+((65535&G)*G|0)}R[0]=N[0]+(N[7]<<16|N[7]>>>16)+(N[6]<<16|N[6]>>>16)|0,R[1]=N[1]+(N[0]<<8|N[0]>>>24)+N[7]|0,R[2]=N[2]+(N[1]<<16|N[1]>>>16)+(N[0]<<16|N[0]>>>16)|0,R[3]=N[3]+(N[2]<<8|N[2]>>>24)+N[1]|0,R[4]=N[4]+(N[3]<<16|N[3]>>>16)+(N[2]<<16|N[2]>>>16)|0,R[5]=N[5]+(N[4]<<8|N[4]>>>24)+N[3]|0,R[6]=N[6]+(N[5]<<16|N[5]>>>16)+(N[4]<<16|N[4]>>>16)|0,R[7]=N[7]+(N[6]<<8|N[6]>>>24)+N[5]|0}O.Rabbit=Y._createHelper(B)}(),h.Rabbit)},486:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,Y=O.lib.StreamCipher,ie=O.algo,q=ie.RC4=Y.extend({_doReset:function(){for(var B=this._key,P=B.words,R=B.sigBytes,F=this._S=[],$=0;$<256;$++)F[$]=$;$=0;for(var G=0;$<256;$++){var K=$%R,ee=F[$];F[$]=F[G=(G+F[$]+(P[K>>>2]>>>24-K%4*8&255))%256],F[G]=ee}this._i=this._j=0},_doProcessBlock:function(B,P){B[P]^=J.call(this)},keySize:8,ivSize:0});function J(){for(var B=this._S,P=this._i,R=this._j,F=0,$=0;$<4;$++){var G=B[P=(P+1)%256];B[P]=B[R=(R+B[P])%256],B[R]=G,F|=B[(B[P]+B[R])%256]<<24-8*$}return this._i=P,this._j=R,F}O.RC4=Y._createHelper(q);var N=ie.RC4Drop=q.extend({cfg:q.cfg.extend({drop:192}),_doReset:function(){q._doReset.call(this);for(var B=this.cfg.drop;B>0;B--)J.call(this)}});O.RC4Drop=Y._createHelper(N)}(),h.RC4)},4973:function(Le,Ee,M){var h;Le.exports=(h=M(7585),function(O){var k=h,Y=k.lib,ie=Y.WordArray,q=Y.Hasher,J=k.algo,N=ie.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),B=ie.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),P=ie.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=ie.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),F=ie.create([0,1518500249,1859775393,2400959708,2840853838]),$=ie.create([1352829926,1548603684,1836072691,2053994217,0]),G=J.RIPEMD160=q.extend({_doReset:function(){this._hash=ie.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ae,ce){for(var re=0;re<16;re++){var ne=ce+re,le=ae[ne];ae[ne]=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8)}var Re,Ge,lt,Ae,Ie,De,Se,et,Ze,Mt,Ye,j=this._hash.words,pe=F.words,z=$.words,te=N.words,he=B.words,se=P.words,Ne=R.words;for(De=Re=j[0],Se=Ge=j[1],et=lt=j[2],Ze=Ae=j[3],Mt=Ie=j[4],re=0;re<80;re+=1)Ye=Re+ae[ce+te[re]]|0,Ye+=re<16?K(Ge,lt,Ae)+pe[0]:re<32?ve(Ge,lt,Ae)+pe[1]:re<48?ee(Ge,lt,Ae)+pe[2]:re<64?H(Ge,lt,Ae)+pe[3]:X(Ge,lt,Ae)+pe[4],Ye=(Ye=_e(Ye|=0,se[re]))+Ie|0,Re=Ie,Ie=Ae,Ae=_e(lt,10),lt=Ge,Ge=Ye,Ye=De+ae[ce+he[re]]|0,Ye+=re<16?X(Se,et,Ze)+z[0]:re<32?H(Se,et,Ze)+z[1]:re<48?ee(Se,et,Ze)+z[2]:re<64?ve(Se,et,Ze)+z[3]:K(Se,et,Ze)+z[4],Ye=(Ye=_e(Ye|=0,Ne[re]))+Mt|0,De=Mt,Mt=Ze,Ze=_e(et,10),et=Se,Se=Ye;Ye=j[1]+lt+Ze|0,j[1]=j[2]+Ae+Mt|0,j[2]=j[3]+Ie+De|0,j[3]=j[4]+Re+Se|0,j[4]=j[0]+Ge+et|0,j[0]=Ye},_doFinalize:function(){var ae=this._data,ce=ae.words,re=8*this._nDataBytes,ne=8*ae.sigBytes;ce[ne>>>5]|=128<<24-ne%32,ce[14+(ne+64>>>9<<4)]=16711935&(re<<8|re>>>24)|4278255360&(re<<24|re>>>8),ae.sigBytes=4*(ce.length+1),this._process();for(var le=this._hash,j=le.words,pe=0;pe<5;pe++){var z=j[pe];j[pe]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}return le},clone:function(){var ae=q.clone.call(this);return ae._hash=this._hash.clone(),ae}});function K(ae,ce,re){return ae^ce^re}function ve(ae,ce,re){return ae&ce|~ae&re}function ee(ae,ce,re){return(ae|~ce)^re}function H(ae,ce,re){return ae&re|ce&~re}function X(ae,ce,re){return ae^(ce|~re)}function _e(ae,ce){return ae<<ce|ae>>>32-ce}k.RIPEMD160=q._createHelper(G),k.HmacRIPEMD160=q._createHmacHelper(G)}(Math),h.RIPEMD160)},5162:function(Le,Ee,M){var O,k,Y,ie,J,N,h;Le.exports=(h=M(7585),Y=(k=(O=h).lib).WordArray,J=[],N=O.algo.SHA1=(ie=k.Hasher).extend({_doReset:function(){this._hash=new Y.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(B,P){for(var R=this._hash.words,F=R[0],$=R[1],G=R[2],K=R[3],ve=R[4],ee=0;ee<80;ee++){if(ee<16)J[ee]=0|B[P+ee];else{var H=J[ee-3]^J[ee-8]^J[ee-14]^J[ee-16];J[ee]=H<<1|H>>>31}var X=(F<<5|F>>>27)+ve+J[ee];X+=ee<20?1518500249+($&G|~$&K):ee<40?1859775393+($^G^K):ee<60?($&G|$&K|G&K)-1894007588:($^G^K)-899497514,ve=K,K=G,G=$<<30|$>>>2,$=F,F=X}R[0]=R[0]+F|0,R[1]=R[1]+$|0,R[2]=R[2]+G|0,R[3]=R[3]+K|0,R[4]=R[4]+ve|0},_doFinalize:function(){var B=this._data,P=B.words,R=8*this._nDataBytes,F=8*B.sigBytes;return P[F>>>5]|=128<<24-F%32,P[14+(F+64>>>9<<4)]=Math.floor(R/4294967296),P[15+(F+64>>>9<<4)]=R,B.sigBytes=4*P.length,this._process(),this._hash},clone:function(){var B=ie.clone.call(this);return B._hash=this._hash.clone(),B}}),O.SHA1=ie._createHelper(N),O.HmacSHA1=ie._createHmacHelper(N),h.SHA1)},8769:function(Le,Ee,M){var O,Y,ie,q,J,h;Le.exports=(h=M(7585),M(1817),Y=(O=h).lib.WordArray,J=(ie=O.algo).SHA224=(q=ie.SHA256).extend({_doReset:function(){this._hash=new Y.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var N=q._doFinalize.call(this);return N.sigBytes-=4,N}}),O.SHA224=q._createHelper(J),O.HmacSHA224=q._createHmacHelper(J),h.SHA224)},1817:function(Le,Ee,M){var h;Le.exports=(h=M(7585),function(O){var k=h,Y=k.lib,ie=Y.WordArray,q=Y.Hasher,J=k.algo,N=[],B=[];!function(){function F(ve){for(var ee=O.sqrt(ve),H=2;H<=ee;H++)if(!(ve%H))return!1;return!0}function $(ve){return 4294967296*(ve-(0|ve))|0}for(var G=2,K=0;K<64;)F(G)&&(K<8&&(N[K]=$(O.pow(G,.5))),B[K]=$(O.pow(G,1/3)),K++),G++}();var P=[],R=J.SHA256=q.extend({_doReset:function(){this._hash=new ie.init(N.slice(0))},_doProcessBlock:function(F,$){for(var G=this._hash.words,K=G[0],ve=G[1],ee=G[2],H=G[3],X=G[4],_e=G[5],ae=G[6],ce=G[7],re=0;re<64;re++){if(re<16)P[re]=0|F[$+re];else{var ne=P[re-15],j=P[re-2];P[re]=((ne<<25|ne>>>7)^(ne<<14|ne>>>18)^ne>>>3)+P[re-7]+((j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10)+P[re-16]}var te=K&ve^K&ee^ve&ee,Ne=ce+((X<<26|X>>>6)^(X<<21|X>>>11)^(X<<7|X>>>25))+(X&_e^~X&ae)+B[re]+P[re];ce=ae,ae=_e,_e=X,X=H+Ne|0,H=ee,ee=ve,ve=K,K=Ne+(((K<<30|K>>>2)^(K<<19|K>>>13)^(K<<10|K>>>22))+te)|0}G[0]=G[0]+K|0,G[1]=G[1]+ve|0,G[2]=G[2]+ee|0,G[3]=G[3]+H|0,G[4]=G[4]+X|0,G[5]=G[5]+_e|0,G[6]=G[6]+ae|0,G[7]=G[7]+ce|0},_doFinalize:function(){var F=this._data,$=F.words,G=8*this._nDataBytes,K=8*F.sigBytes;return $[K>>>5]|=128<<24-K%32,$[14+(K+64>>>9<<4)]=O.floor(G/4294967296),$[15+(K+64>>>9<<4)]=G,F.sigBytes=4*$.length,this._process(),this._hash},clone:function(){var F=q.clone.call(this);return F._hash=this._hash.clone(),F}});k.SHA256=q._createHelper(R),k.HmacSHA256=q._createHmacHelper(R)}(Math),h.SHA256)},1971:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(401),function(O){var k=h,Y=k.lib,ie=Y.WordArray,q=Y.Hasher,N=k.x64.Word,B=k.algo,P=[],R=[],F=[];!function(){for(var K=1,ve=0,ee=0;ee<24;ee++){P[K+5*ve]=(ee+1)*(ee+2)/2%64;var X=(2*K+3*ve)%5;K=ve%5,ve=X}for(K=0;K<5;K++)for(ve=0;ve<5;ve++)R[K+5*ve]=ve+(2*K+3*ve)%5*5;for(var _e=1,ae=0;ae<24;ae++){for(var ce=0,re=0,ne=0;ne<7;ne++){if(1&_e){var le=(1<<ne)-1;le<32?re^=1<<le:ce^=1<<le-32}128&_e?_e=_e<<1^113:_e<<=1}F[ae]=N.create(ce,re)}}();var $=[];!function(){for(var K=0;K<25;K++)$[K]=N.create()}();var G=B.SHA3=q.extend({cfg:q.cfg.extend({outputLength:512}),_doReset:function(){for(var K=this._state=[],ve=0;ve<25;ve++)K[ve]=new N.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(K,ve){for(var ee=this._state,H=this.blockSize/2,X=0;X<H;X++){var _e=K[ve+2*X],ae=K[ve+2*X+1];_e=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8),(ce=ee[X]).high^=ae=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),ce.low^=_e}for(var re=0;re<24;re++){for(var ne=0;ne<5;ne++){for(var le=0,j=0,pe=0;pe<5;pe++)le^=(ce=ee[ne+5*pe]).high,j^=ce.low;var z=$[ne];z.high=le,z.low=j}for(ne=0;ne<5;ne++){var te=$[(ne+4)%5],he=$[(ne+1)%5],se=he.high,Ne=he.low;for(le=te.high^(se<<1|Ne>>>31),j=te.low^(Ne<<1|se>>>31),pe=0;pe<5;pe++)(ce=ee[ne+5*pe]).high^=le,ce.low^=j}for(var Re=1;Re<25;Re++){var Ge=(ce=ee[Re]).high,lt=ce.low,Ae=P[Re];Ae<32?(le=Ge<<Ae|lt>>>32-Ae,j=lt<<Ae|Ge>>>32-Ae):(le=lt<<Ae-32|Ge>>>64-Ae,j=Ge<<Ae-32|lt>>>64-Ae);var Ie=$[R[Re]];Ie.high=le,Ie.low=j}var De=$[0],Se=ee[0];for(De.high=Se.high,De.low=Se.low,ne=0;ne<5;ne++)for(pe=0;pe<5;pe++){var et=$[Re=ne+5*pe],Ze=$[(ne+1)%5+5*pe],Mt=$[(ne+2)%5+5*pe];(ce=ee[Re]).high=et.high^~Ze.high&Mt.high,ce.low=et.low^~Ze.low&Mt.low}var ce,Ye=F[re];(ce=ee[0]).high^=Ye.high,ce.low^=Ye.low}},_doFinalize:function(){var K=this._data,ve=K.words,H=8*K.sigBytes,X=32*this.blockSize;ve[H>>>5]|=1<<24-H%32,ve[(O.ceil((H+1)/X)*X>>>5)-1]|=128,K.sigBytes=4*ve.length,this._process();for(var _e=this._state,ae=this.cfg.outputLength/8,ce=ae/8,re=[],ne=0;ne<ce;ne++){var le=_e[ne],j=le.high,pe=le.low;j=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),re.push(pe=16711935&(pe<<8|pe>>>24)|4278255360&(pe<<24|pe>>>8)),re.push(j)}return new ie.init(re,ae)},clone:function(){for(var K=q.clone.call(this),ve=K._state=this._state.slice(0),ee=0;ee<25;ee++)ve[ee]=ve[ee].clone();return K}});k.SHA3=q._createHelper(G),k.HmacSHA3=q._createHmacHelper(G)}(Math),h.SHA3)},6787:function(Le,Ee,M){var O,k,Y,ie,q,J,N,h;Le.exports=(h=M(7585),M(401),M(3351),Y=(k=(O=h).x64).Word,ie=k.WordArray,N=(q=O.algo).SHA384=(J=q.SHA512).extend({_doReset:function(){this._hash=new ie.init([new Y.init(3418070365,3238371032),new Y.init(1654270250,914150663),new Y.init(2438529370,812702999),new Y.init(355462360,4144912697),new Y.init(1731405415,4290775857),new Y.init(2394180231,1750603025),new Y.init(3675008525,1694076839),new Y.init(1203062813,3204075428)])},_doFinalize:function(){var B=J._doFinalize.call(this);return B.sigBytes-=16,B}}),O.SHA384=J._createHelper(N),O.HmacSHA384=J._createHmacHelper(N),h.SHA384)},3351:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(401),function(){var O=h,Y=O.lib.Hasher,ie=O.x64,q=ie.Word,J=ie.WordArray,N=O.algo;function B(){return q.create.apply(q,arguments)}var P=[B(1116352408,3609767458),B(1899447441,602891725),B(3049323471,3964484399),B(3921009573,2173295548),B(961987163,4081628472),B(1508970993,3053834265),B(2453635748,2937671579),B(2870763221,3664609560),B(3624381080,2734883394),B(310598401,1164996542),B(607225278,1323610764),B(1426881987,3590304994),B(1925078388,4068182383),B(2162078206,991336113),B(2614888103,633803317),B(3248222580,3479774868),B(3835390401,2666613458),B(4022224774,944711139),B(264347078,2341262773),B(604807628,2007800933),B(770255983,1495990901),B(1249150122,1856431235),B(1555081692,3175218132),B(1996064986,2198950837),B(2554220882,3999719339),B(2821834349,766784016),B(2952996808,2566594879),B(3210313671,3203337956),B(3336571891,1034457026),B(3584528711,2466948901),B(113926993,3758326383),B(338241895,168717936),B(666307205,1188179964),B(773529912,1546045734),B(1294757372,1522805485),B(1396182291,2643833823),B(1695183700,2343527390),B(1986661051,1014477480),B(2177026350,1206759142),B(2456956037,344077627),B(2730485921,1290863460),B(2820302411,3158454273),B(3259730800,3505952657),B(3345764771,106217008),B(3516065817,3606008344),B(3600352804,1432725776),B(4094571909,1467031594),B(275423344,851169720),B(430227734,3100823752),B(506948616,1363258195),B(659060556,3750685593),B(883997877,3785050280),B(958139571,3318307427),B(1322822218,3812723403),B(1537002063,2003034995),B(1747873779,3602036899),B(1955562222,1575990012),B(2024104815,1125592928),B(2227730452,2716904306),B(2361852424,442776044),B(2428436474,593698344),B(2756734187,3733110249),B(3204031479,2999351573),B(3329325298,3815920427),B(3391569614,3928383900),B(3515267271,566280711),B(3940187606,3454069534),B(4118630271,4000239992),B(116418474,1914138554),B(174292421,2731055270),B(289380356,3203993006),B(460393269,320620315),B(685471733,587496836),B(852142971,1086792851),B(1017036298,365543100),B(1126000580,2618297676),B(1288033470,3409855158),B(1501505948,4234509866),B(1607167915,987167468),B(1816402316,1246189591)],R=[];!function(){for(var $=0;$<80;$++)R[$]=B()}();var F=N.SHA512=Y.extend({_doReset:function(){this._hash=new J.init([new q.init(1779033703,4089235720),new q.init(3144134277,2227873595),new q.init(1013904242,4271175723),new q.init(2773480762,1595750129),new q.init(1359893119,2917565137),new q.init(2600822924,725511199),new q.init(528734635,4215389547),new q.init(1541459225,327033209)])},_doProcessBlock:function($,G){for(var K=this._hash.words,ve=K[0],ee=K[1],H=K[2],X=K[3],_e=K[4],ae=K[5],ce=K[6],re=K[7],ne=ve.high,le=ve.low,j=ee.high,pe=ee.low,z=H.high,te=H.low,he=X.high,se=X.low,Ne=_e.high,Re=_e.low,Ge=ae.high,lt=ae.low,Ae=ce.high,Ie=ce.low,De=re.high,Se=re.low,et=ne,Ze=le,Mt=j,Ye=pe,wt=z,en=te,Ln=he,yn=se,bn=Ne,Mn=Re,Mr=Ge,ur=lt,wr=Ae,bi=Ie,ot=De,jn=Se,er=0;er<80;er++){var hn,$n,$r=R[er];if(er<16)$n=$r.high=0|$[G+2*er],hn=$r.low=0|$[G+2*er+1];else{var kn=R[er-15],xn=kn.high,fn=kn.low,yt=(fn>>>1|xn<<31)^(fn>>>8|xn<<24)^(fn>>>7|xn<<25),un=R[er-2],Pn=un.high,Cn=un.low,Lt=(Cn>>>19|Pn<<13)^(Cn<<3|Pn>>>29)^(Cn>>>6|Pn<<26),Ii=R[er-7],tn=R[er-16],Er=tn.low;$r.high=$n=($n=($n=((xn>>>1|fn<<31)^(xn>>>8|fn<<24)^xn>>>7)+Ii.high+((hn=yt+Ii.low)>>>0<yt>>>0?1:0))+((Pn>>>19|Cn<<13)^(Pn<<3|Cn>>>29)^Pn>>>6)+((hn+=Lt)>>>0<Lt>>>0?1:0))+tn.high+((hn+=Er)>>>0<Er>>>0?1:0),$r.low=hn}var Ke,pt=bn&Mr^~bn&wr,Ve=Mn&ur^~Mn&bi,ht=et&Mt^et&wt^Mt&wt,zt=(Ze>>>28|et<<4)^(Ze<<30|et>>>2)^(Ze<<25|et>>>7),ye=P[er],be=ye.low,gt=ot+((bn>>>14|Mn<<18)^(bn>>>18|Mn<<14)^(bn<<23|Mn>>>9))+((Ke=jn+((Mn>>>14|bn<<18)^(Mn>>>18|bn<<14)^(Mn<<23|bn>>>9)))>>>0<jn>>>0?1:0),Jt=zt+(Ze&Ye^Ze&en^Ye&en);ot=wr,jn=bi,wr=Mr,bi=ur,Mr=bn,ur=Mn,bn=Ln+(gt=(gt=(gt=gt+pt+((Ke+=Ve)>>>0<Ve>>>0?1:0))+ye.high+((Ke+=be)>>>0<be>>>0?1:0))+$n+((Ke+=hn)>>>0<hn>>>0?1:0))+((Mn=yn+Ke|0)>>>0<yn>>>0?1:0)|0,Ln=wt,yn=en,wt=Mt,en=Ye,Mt=et,Ye=Ze,et=gt+(((et>>>28|Ze<<4)^(et<<30|Ze>>>2)^(et<<25|Ze>>>7))+ht+(Jt>>>0<zt>>>0?1:0))+((Ze=Ke+Jt|0)>>>0<Ke>>>0?1:0)|0}le=ve.low=le+Ze,ve.high=ne+et+(le>>>0<Ze>>>0?1:0),pe=ee.low=pe+Ye,ee.high=j+Mt+(pe>>>0<Ye>>>0?1:0),te=H.low=te+en,H.high=z+wt+(te>>>0<en>>>0?1:0),se=X.low=se+yn,X.high=he+Ln+(se>>>0<yn>>>0?1:0),Re=_e.low=Re+Mn,_e.high=Ne+bn+(Re>>>0<Mn>>>0?1:0),lt=ae.low=lt+ur,ae.high=Ge+Mr+(lt>>>0<ur>>>0?1:0),Ie=ce.low=Ie+bi,ce.high=Ae+wr+(Ie>>>0<bi>>>0?1:0),Se=re.low=Se+jn,re.high=De+ot+(Se>>>0<jn>>>0?1:0)},_doFinalize:function(){var $=this._data,G=$.words,K=8*this._nDataBytes,ve=8*$.sigBytes;return G[ve>>>5]|=128<<24-ve%32,G[30+(ve+128>>>10<<5)]=Math.floor(K/4294967296),G[31+(ve+128>>>10<<5)]=K,$.sigBytes=4*G.length,this._process(),this._hash.toX32()},clone:function(){var $=Y.clone.call(this);return $._hash=this._hash.clone(),$},blockSize:32});O.SHA512=Y._createHelper(F),O.HmacSHA512=Y._createHmacHelper(F)}(),h.SHA512)},7243:function(Le,Ee,M){var h;Le.exports=(h=M(7585),M(8319),M(9493),M(7865),M(3057),function(){var O=h,k=O.lib,Y=k.WordArray,ie=k.BlockCipher,q=O.algo,J=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],N=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],B=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],P=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],F=q.DES=ie.extend({_doReset:function(){for(var ee=this._key.words,H=[],X=0;X<56;X++){var _e=J[X]-1;H[X]=ee[_e>>>5]>>>31-_e%32&1}for(var ae=this._subKeys=[],ce=0;ce<16;ce++){var re=ae[ce]=[],ne=B[ce];for(X=0;X<24;X++)re[X/6|0]|=H[(N[X]-1+ne)%28]<<31-X%6,re[4+(X/6|0)]|=H[28+(N[X+24]-1+ne)%28]<<31-X%6;for(re[0]=re[0]<<1|re[0]>>>31,X=1;X<7;X++)re[X]=re[X]>>>4*(X-1)+3;re[7]=re[7]<<5|re[7]>>>27}var le=this._invSubKeys=[];for(X=0;X<16;X++)le[X]=ae[15-X]},encryptBlock:function(ve,ee){this._doCryptBlock(ve,ee,this._subKeys)},decryptBlock:function(ve,ee){this._doCryptBlock(ve,ee,this._invSubKeys)},_doCryptBlock:function(ve,ee,H){this._lBlock=ve[ee],this._rBlock=ve[ee+1],$.call(this,4,252645135),$.call(this,16,65535),G.call(this,2,858993459),G.call(this,8,16711935),$.call(this,1,1431655765);for(var X=0;X<16;X++){for(var _e=H[X],ae=this._lBlock,ce=this._rBlock,re=0,ne=0;ne<8;ne++)re|=P[ne][((ce^_e[ne])&R[ne])>>>0];this._lBlock=ce,this._rBlock=ae^re}var le=this._lBlock;this._lBlock=this._rBlock,this._rBlock=le,$.call(this,1,1431655765),G.call(this,8,16711935),G.call(this,2,858993459),$.call(this,16,65535),$.call(this,4,252645135),ve[ee]=this._lBlock,ve[ee+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function $(ve,ee){var H=(this._lBlock>>>ve^this._rBlock)&ee;this._rBlock^=H,this._lBlock^=H<<ve}function G(ve,ee){var H=(this._rBlock>>>ve^this._lBlock)&ee;this._lBlock^=H,this._rBlock^=H<<ve}O.DES=ie._createHelper(F);var K=q.TripleDES=ie.extend({_doReset:function(){var ee=this._key.words;if(2!==ee.length&&4!==ee.length&&ee.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var H=ee.slice(0,2),X=ee.length<4?ee.slice(0,2):ee.slice(2,4),_e=ee.length<6?ee.slice(0,2):ee.slice(4,6);this._des1=F.createEncryptor(Y.create(H)),this._des2=F.createEncryptor(Y.create(X)),this._des3=F.createEncryptor(Y.create(_e))},encryptBlock:function(ve,ee){this._des1.encryptBlock(ve,ee),this._des2.decryptBlock(ve,ee),this._des3.encryptBlock(ve,ee)},decryptBlock:function(ve,ee){this._des3.decryptBlock(ve,ee),this._des2.encryptBlock(ve,ee),this._des1.decryptBlock(ve,ee)},keySize:6,ivSize:2,blockSize:2});O.TripleDES=ie._createHelper(K)}(),h.TripleDES)},401:function(Le,Ee,M){var Y,ie,q,J,h;Le.exports=(h=M(7585),ie=(Y=h.lib).Base,q=Y.WordArray,(J=h.x64={}).Word=ie.extend({init:function(P,R){this.high=P,this.low=R}}),J.WordArray=ie.extend({init:function(P,R){P=this.words=P||[],this.sigBytes=null!=R?R:8*P.length},toX32:function(){for(var P=this.words,R=P.length,F=[],$=0;$<R;$++){var G=P[$];F.push(G.high),F.push(G.low)}return q.create(F,this.sigBytes)},clone:function(){for(var P=ie.clone.call(this),R=P.words=this.words.slice(0),F=R.length,$=0;$<F;$++)R[$]=R[$].clone();return P}}),h)},5867:(Le,Ee,M)=>{"use strict";M.d(Ee,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=M(9681);(0,h.registerVersion)("firebase","9.14.0","app")},127:(Le,Ee,M)=>{"use strict";M.d(Ee,{Z:()=>h.Z});var h=M(3942);h.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(Le,Ee,M)=>{"use strict";M.r(Ee);var h=M(5861),O=M(3942),k=M(2090),Y=M(9681),ie=M(1877),q=M(655),J=M(4859);const K=function $(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ve=function G(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ee=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),X=new ie.Yd("@firebase/auth");function _e(v,...p){X.logLevel<=ie.in.ERROR&&X.error(`Auth (${Y.SDK_VERSION}): ${v}`,...p)}function ae(v,...p){throw le(v,...p)}function ce(v,...p){return le(v,...p)}function re(v,p,m){const w=Object.assign(Object.assign({},ve()),{[p]:m});return new k.LL("auth","Firebase",w).create(p,{appName:v.name})}function ne(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ae(v,"argument-error"),re(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function le(v,...p){if("string"!=typeof v){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return ee.create(v,...p)}function j(v,p,...m){if(!v)throw le(p,...m)}function pe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw _e(p),new Error(p)}function z(v,p){v||pe(p)}const te=new Map;function he(v){z(v instanceof Function,"Expected a class definition");let p=te.get(v);return p?(z(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,te.set(v,p),p)}function Re(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ge(){return"http:"===lt()||"https:"===lt()}function lt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class De{constructor(p,m){this.shortDelay=p,this.longDelay=m,z(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ge()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Se(v,p){z(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class et{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ze={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mt=new De(3e4,6e4);function Ye(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function wt(v,p,m,w){return en.apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(v,p,m,w,T={}){return Ln(v,T,(0,h.Z)(function*(){let V={},me={};w&&("GET"===p?me=w:V={body:JSON.stringify(w)});const Oe=(0,k.xO)(Object.assign({key:v.config.apiKey},me)).slice(1),Je=yield v._getAdditionalHeaders();return Je["Content-Type"]="application/json",v.languageCode&&(Je["X-Firebase-Locale"]=v.languageCode),et.fetch()(Mr(v,v.config.apiHost,m,Oe),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Ln(v,p,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ze),p);try{const T=new ur(v),V=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const me=yield V.json();if("needConfirmation"in me)throw wr(v,"account-exists-with-different-credential",me);if(V.ok&&!("errorMessage"in me))return me;{const Oe=V.ok?me.errorMessage:me.error.message,[Je,ft]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw wr(v,"credential-already-in-use",me);if("EMAIL_EXISTS"===Je)throw wr(v,"email-already-in-use",me);if("USER_DISABLED"===Je)throw wr(v,"user-disabled",me);const Ft=w[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw re(v,Ft,ft);ae(v,Ft)}}catch(T){if(T instanceof k.ZR)throw T;ae(v,"network-request-failed")}})).apply(this,arguments)}function bn(v,p,m,w){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(v,p,m,w,T={}){const V=yield wt(v,p,m,w,T);return"mfaPendingCredential"in V&&ae(v,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Mr(v,p,m,w){const T=`${p}${m}?${w}`;return v.config.emulator?Se(v.config,T):`${v.config.apiScheme}://${T}`}class ur{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ce(this.auth,"network-request-failed")),Mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wr(v,p,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const T=ce(v,p,w);return T.customData._tokenResponse=m,T}function ot(){return(ot=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function jn(v,p){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hn(v,p){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function $r(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function fn(){return(fn=(0,h.Z)(function*(v,p=!1){const m=(0,k.m9)(v),w=yield m.getIdToken(p),T=yt(w);j(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const V="object"==typeof T.firebase?T.firebase:void 0,me=V?.sign_in_provider;return{claims:T,token:w,authTime:$r(St(T.auth_time)),issuedAtTime:$r(St(T.iat)),expirationTime:$r(St(T.exp)),signInProvider:me||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function St(v){return 1e3*Number(v)}function yt(v){var p;const[m,w,T]=v.split(".");if(void 0===m||void 0===w||void 0===T)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,k.tV)(w);return V?JSON.parse(V):(_e("Failed to decode base64 JWT payload"),null)}catch(V){return _e("Caught error parsing JWT payload as JSON",null===(p=V)||void 0===p?void 0:p.toString()),null}}function Pn(v,p){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof k.ZR&&zr(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function zr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Lt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,h.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Ii{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cn(v){return fi.apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(v){var p;const m=v.auth,w=yield v.getIdToken(),T=yield Pn(v,hn(m,{idToken:w}));j(T?.users.length,m,"internal-error");const V=T.users[0];v._notifyReloadListener(V);const me=null!==(p=V.providerUserInfo)&&void 0!==p&&p.length?pt(V.providerUserInfo):[],Oe=Er(v.providerData,me),Ft=!!v.isAnonymous&&!(v.email&&V.passwordHash||Oe?.length),At={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Oe,metadata:new Ii(V.createdAt,V.lastLoginAt),isAnonymous:Ft};Object.assign(v,At)})).apply(this,arguments)}function tr(){return(tr=(0,h.Z)(function*(v){const p=(0,k.m9)(v);yield cn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Er(v,p){return[...v.filter(w=>!p.some(T=>T.providerId===w.providerId)),...p]}function pt(v){return v.map(p=>{var{providerId:m}=p,w=(0,q._T)(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ht(){return(ht=(0,h.Z)(function*(v,p){const m=yield Ln(v,{},(0,h.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:V}=v.config,me=Mr(v,T,"/v1/token",`key=${V}`),Oe=yield v._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",et.fetch()(me,{method:"POST",headers:Oe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){j(p.idToken,"internal-error"),j(typeof p.idToken<"u","internal-error"),j(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function un(v){const p=yt(v);return j(p,"internal-error"),j(typeof p.exp<"u","internal-error"),j(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,h.Z)(function*(){return j(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:V,expiresIn:me}=yield function Ve(v,p){return ht.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(T,V,Number(me))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:T,expirationTime:V}=m,me=new Nt;return w&&(j("string"==typeof w,"internal-error",{appName:p}),me.refreshToken=w),T&&(j("string"==typeof T,"internal-error",{appName:p}),me.accessToken=T),V&&(j("number"==typeof V,"internal-error",{appName:p}),me.expirationTime=V),me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Pt(v,p){j("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class zt{constructor(p){var{uid:m,auth:w,stsTokenManager:T}=p,V=(0,q._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Ii(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const w=yield Pn(m,m.stsTokenManager.getToken(m.auth,p));return j(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function xn(v){return fn.apply(this,arguments)}(this,p)}reload(){return function tn(v){return tr.apply(this,arguments)}(this)}_assign(p){this!==p&&(j(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new zt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,h.Z)(function*(){let T=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield cn(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Pn(p,function bi(v,p){return ot.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,T,V,me,Oe,Je,ft,Ft;const At=null!==(w=m.displayName)&&void 0!==w?w:void 0,pr=null!==(T=m.email)&&void 0!==T?T:void 0,gr=null!==(V=m.phoneNumber)&&void 0!==V?V:void 0,Ws=null!==(me=m.photoURL)&&void 0!==me?me:void 0,ip=null!==(Oe=m.tenantId)&&void 0!==Oe?Oe:void 0,sp=null!==(Je=m._redirectEventId)&&void 0!==Je?Je:void 0,op=null!==(ft=m.createdAt)&&void 0!==ft?ft:void 0,wy=null!==(Ft=m.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:Wg,emailVerified:Ey,isAnonymous:mc,providerData:Xa,stsTokenManager:Fl}=m;j(Wg&&Fl,p,"internal-error");const ap=Nt.fromJSON(this.name,Fl);j("string"==typeof Wg,p,"internal-error"),Pt(At,p.name),Pt(pr,p.name),j("boolean"==typeof Ey,p,"internal-error"),j("boolean"==typeof mc,p,"internal-error"),Pt(gr,p.name),Pt(Ws,p.name),Pt(ip,p.name),Pt(sp,p.name),Pt(op,p.name),Pt(wy,p.name);const ph=new zt({uid:Wg,auth:p,email:pr,emailVerified:Ey,displayName:At,isAnonymous:mc,photoURL:Ws,phoneNumber:gr,tenantId:ip,stsTokenManager:ap,createdAt:op,lastLoginAt:wy});return Xa&&Array.isArray(Xa)&&(ph.providerData=Xa.map(Ja=>Object.assign({},Ja))),sp&&(ph._redirectEventId=sp),ph}static _fromIdTokenResponse(p,m,w=!1){return(0,h.Z)(function*(){const T=new Nt;T.updateFromServerResponse(m);const V=new zt({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:w});return yield cn(V),V})()}}const ue=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var T=this;return(0,h.Z)(function*(){T.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=w.storage[m];return void 0===T?null:T})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function ye(v,p,m){return`firebase:${v}:${p}:${m}`}class Ue{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:T,name:V}=this.auth;this.fullUserKey=ye(this.userKey,T.apiKey,V),this.fullPersistenceKey=ye("persistence",T.apiKey,V),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?zt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Ue(he(ue),p,w);const T=(yield Promise.all(m.map(function(){var ft=(0,h.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let V=T[0]||he(ue);const me=ye(w,p.config.apiKey,p.name);let Oe=null;for(const ft of m)try{const Ft=yield ft._get(me);if(Ft){const At=zt._fromJSON(p,Ft);ft!==V&&(Oe=At),V=ft;break}}catch{}const Je=T.filter(ft=>ft._shouldAllowMigration);return V._shouldAllowMigration&&Je.length?(V=Je[0],Oe&&(yield V._set(me,Oe.toJSON())),yield Promise.all(m.map(function(){var ft=(0,h.Z)(function*(Ft){if(Ft!==V)try{yield Ft._remove(me)}catch{}});return function(Ft){return ft.apply(this,arguments)}}())),new Ue(V,p,w)):new Ue(V,p,w)})()}}function be(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(_n(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ke(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Xe(p))return"Blackberry";if(rt(p))return"Webos";if(gt(p))return"Safari";if((p.includes("chrome/")||Jt(p))&&!p.includes("edge/"))return"Chrome";if(nn(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ke(v=(0,k.z$)()){return/firefox\//i.test(v)}function gt(v=(0,k.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Jt(v=(0,k.z$)()){return/crios\//i.test(v)}function _n(v=(0,k.z$)()){return/iemobile/i.test(v)}function nn(v=(0,k.z$)()){return/android/i.test(v)}function Xe(v=(0,k.z$)()){return/blackberry/i.test(v)}function rt(v=(0,k.z$)()){return/webos/i.test(v)}function Yt(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Js(v=(0,k.z$)()){return Yt(v)||nn(v)||rt(v)||Xe(v)||/windows phone/i.test(v)||_n(v)}function Ps(v,p=[]){let m;switch(v){case"Browser":m=be((0,k.z$)());break;case"Worker":m=`${be((0,k.z$)())}-${v}`;break;default:m=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${Y.SDK_VERSION}/${w}`}class Oo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const w=V=>new Promise((me,Oe)=>{try{me(p(V))}catch(Je){Oe(Je)}});w.onAbort=m,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){var w;if(m.auth.currentUser===p)return;const T=[];try{for(const V of m.queue)yield V(p),V.onAbort&&T.push(V.onAbort)}catch(V){T.reverse();for(const me of T)try{me()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=V)||void 0===w?void 0:w.message})}})()}}class qt{constructor(p,m,w){this.app=p,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eo(this),this.idTokenSubscription=new eo(this),this.beforeStateQueue=new Oo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=he(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,V;if(!w._deleted&&(w.persistenceManager=yield Ue.create(w,p),!w._deleted)){if(null!==(T=w._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(V=w.currentUser)||void 0===V?void 0:V.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var w;const T=yield m.assertedPersistence.getCurrentUser();let V=T,me=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Oe=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Je=V?._redirectEventId,ft=yield m.tryRedirectSignIn(p);(!Oe||Oe===Je)&&ft?.user&&(V=ft.user,me=!0)}if(!V)return m.directlySetCurrentUser(null);if(!V._redirectEventId){if(me)try{yield m.beforeStateQueue.runMiddleware(V)}catch(Oe){V=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Oe))}return V?m.reloadAndSetCurrentUserOrClear(V):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===V._redirectEventId?m.directlySetCurrentUser(V):m.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){var w;try{yield cn(p)}catch(T){if("auth/network-request-failed"!==(null===(w=T)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ie(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const w=p?(0,k.m9)(p):null;return w&&j(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return p&&j(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(he(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,h.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&he(p)||m._popupRedirectResolver;j(w,m,"argument-error"),m.redirectPersistenceManager=yield Ue.create(m,[he(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var w,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,T){if(this._deleted)return()=>{};const V="function"==typeof m?m:m.next.bind(m),me=this._isInitialized?Promise.resolve():this._initializationPromise;return j(me,this,"internal-error"),me.then(()=>V(this.currentUser)),"function"==typeof m?p.addObserver(m,w,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ps(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function Nn(v){return(0,k.m9)(v)}class eo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Ns(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class kr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return pe("not implemented")}_getIdTokenResponse(p){return pe("not implemented")}_linkToIdToken(p,m){return pe("not implemented")}_getReauthenticationResolver(p){return pe("not implemented")}}function sr(v,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:resetPassword",Ye(v,p))})).apply(this,arguments)}function vn(v,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Qc(v,p){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:update",Ye(v,p))})).apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithPassword",Ye(v,p))})).apply(this,arguments)}function Fs(v,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:sendOobCode",Ye(v,p))})).apply(this,arguments)}function Un(v,p){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,h.Z)(function*(v,p){return Fs(v,p)})).apply(this,arguments)}function Ir(v,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(v,p){return Fs(v,p)})).apply(this,arguments)}function Tu(v,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(v,p){return Fs(v,p)})).apply(this,arguments)}function Jc(v,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,h.Z)(function*(v,p){return Fs(v,p)})).apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}class tl extends kr{constructor(p,m,w,T=null){super("password",w),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new tl(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new tl(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function xa(v,p){return ss.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function xf(v,p){return Cd.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ae(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return vn(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Cf(v,p){return el.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function lr(v,p){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithIdp",Ye(v,p))})).apply(this,arguments)}class os extends kr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new os(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T}=m,V=(0,q._T)(m,["providerId","signInMethod"]);if(!w||!T)return null;const me=new os(w,T);return me.idToken=V.idToken||void 0,me.accessToken=V.accessToken||void 0,me.secret=V.secret,me.nonce=V.nonce,me.pendingToken=V.pendingToken||null,me}_getIdTokenResponse(p){return lr(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,lr(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,lr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,k.xO)(m)}return p}}function xg(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:sendVerificationCode",Ye(v,p))})).apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p))})).apply(this,arguments)}function Sd(){return(Sd=(0,h.Z)(function*(v,p){const m=yield bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p));if(m.temporaryProof)throw wr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Cg={USER_NOT_FOUND:"user-not-found"};function Td(){return(Td=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Cg)})).apply(this,arguments)}class Us extends kr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Us({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Us({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function rl(v,p){return Ls.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Df(v,p){return Sd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Dg(v,p){return Td.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:V}=p;return w||m||T||V?new Us({verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:V}):null}}class Au{constructor(p){var m,w,T,V,me,Oe;const Je=(0,k.zd)((0,k.pd)(p)),ft=null!==(m=Je.apiKey)&&void 0!==m?m:null,Ft=null!==(w=Je.oobCode)&&void 0!==w?w:null,At=function Ad(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Je.mode)&&void 0!==T?T:null);j(ft&&Ft&&At,"argument-error"),this.apiKey=ft,this.operation=At,this.code=Ft,this.continueUrl=null!==(V=Je.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(me=Je.languageCode)&&void 0!==me?me:null,this.tenantId=null!==(Oe=Je.tenantId)&&void 0!==Oe?Oe:null}static parseLink(p){const m=function Rd(v){const p=(0,k.zd)((0,k.pd)(v)).link,m=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||m||p||v}(p);try{return new Au(m)}catch{return null}}}let Fi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return tl._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const T=Au.parseLink(w);return j(T,"argument-error"),tl._fromEmailAndCode(m,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class as{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class us extends as{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class no extends us{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return j("providerId"in m&&"signInMethod"in m,"argument-error"),os._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return j(p.idToken||p.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return no.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return no.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:V,nonce:me,providerId:Oe}=p;if(!w&&!T&&!m&&!V||!Oe)return null;try{return new no(Oe)._credential({idToken:m,accessToken:w,nonce:me,pendingToken:V})}catch{return null}}}let Da=(()=>{class v extends us{constructor(){super("facebook.com")}static credential(m){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ru=(()=>{class v extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:T}=m;if(!w&&!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),il=(()=>{class v extends us{constructor(){super("github.com")}static credential(m){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Fo extends kr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return lr(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,lr(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,lr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T,pendingToken:V}=m;return w&&T&&V&&w===T?new Fo(w,V):null}static _create(p,m){return new Fo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pi extends as{constructor(p){j(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return pi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return pi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Fo.fromJSON(p);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return Fo._create(w,m)}catch{return null}}}let si=(()=>{class v extends us{constructor(){super("twitter.com")}static credential(m,w){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=m;if(!w||!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Lo(v,p){return Md.apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signUp",Ye(v,p))})).apply(this,arguments)}class Pr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,T=!1){return(0,h.Z)(function*(){const V=yield zt._fromIdTokenResponse(p,w,T),me=Af(w);return new Pr({user:V,providerId:me,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const T=Af(w);return new Pr({user:p,providerId:T,_tokenResponse:w,operationType:m})})()}}function Af(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function zn(){return(zn=(0,h.Z)(function*(v){var p;const m=Nn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Pr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Lo(m,{returnSecureToken:!0}),T=yield Pr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Mu extends k.ZR{constructor(p,m,w,T){var V;super(m.code,m.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Mu.prototype),this.customData={appName:p.name,tenantId:null!==(V=p.tenantId)&&void 0!==V?V:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,T){return new Mu(p,m,w,T)}}function Mf(v,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Mu._fromErrorAndOperation(v,V,p,w):V})}function gi(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ku(){return(ku=(0,h.Z)(function*(v,p){const m=(0,k.m9)(v);yield rn(!0,m,p);const{providerUserInfo:w}=yield jn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=gi(w||[]);return m.providerData=m.providerData.filter(V=>T.has(V.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Uo(v,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(v,p,m=!1){const w=yield Pn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Pr._forOperation(v,"link",w)})).apply(this,arguments)}function rn(v,p,m){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,h.Z)(function*(v,p,m){yield cn(p);const T=!1===v?"provider-already-linked":"no-such-provider";j(gi(p.providerData).has(m)===v,p.auth,T)})).apply(this,arguments)}function ro(v,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,h.Z)(function*(v,p,m=!1){var w;const{auth:T}=v,V="reauthenticate";try{const me=yield Pn(v,Mf(T,V,p,v),m);j(me.idToken,T,"internal-error");const Oe=yt(me.idToken);j(Oe,T,"internal-error");const{sub:Je}=Oe;return j(v.uid===Je,T,"user-mismatch"),Pr._forOperation(v,V,me)}catch(me){throw"auth/user-not-found"===(null===(w=me)||void 0===w?void 0:w.code)&&ae(T,"user-mismatch"),me}})).apply(this,arguments)}function Ci(v,p){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,h.Z)(function*(v,p,m=!1){const w="signIn",T=yield Mf(v,w,p),V=yield Pr._fromIdTokenResponse(v,w,T);return m||(yield v._updateCurrentUser(V.user)),V})).apply(this,arguments)}function Bn(v,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,h.Z)(function*(v,p){return Ci(Nn(v),p)})).apply(this,arguments)}function Fu(v,p){return kf.apply(this,arguments)}function kf(){return(kf=(0,h.Z)(function*(v,p){const m=(0,k.m9)(v);return yield rn(!1,m,p.providerId),Uo(m,p)})).apply(this,arguments)}function Lu(v,p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(v,p){return ro((0,k.m9)(v),p)})).apply(this,arguments)}function sl(v,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(v,p){return bn(v,"POST","/v1/accounts:signInWithCustomToken",Ye(v,p))})).apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(v,p){const m=Nn(v),w=yield sl(m,{token:p,returnSecureToken:!0}),T=yield Pr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class He{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Xt._fromServerResponse(p,m):ae(p,"internal-error")}}class Xt extends He{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Xt(m)}}function Bu(v,p,m){var w;j((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Gn(){return(Gn=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v),T={requestType:"PASSWORD_RESET",email:p};m&&Bu(w,T,m),yield Ir(w,T)})).apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(v,p,m){yield sr((0,k.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(v,p){yield Qc((0,k.m9)(v),{oobCode:p})})).apply(this,arguments)}function Aa(v,p){return al.apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(v,p){const m=(0,k.m9)(v),w=yield sr(m,{oobCode:p}),T=w.requestType;switch(j(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(w.mfaInfo,m,"internal-error");default:j(w.email,m,"internal-error")}let V=null;return w.mfaInfo&&(V=He._fromServerResponse(Nn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:V},operation:T}})).apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(v,p){const{data:m}=yield Aa((0,k.m9)(v),p);return m.email})).apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(v,p,m){const w=Nn(v),T=yield Lo(w,{returnSecureToken:!0,email:p,password:m}),V=yield Pr._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(V.user),V})).apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v),T={requestType:"EMAIL_SIGNIN",email:p};j(m.handleCodeInApp,w,"argument-error"),m&&Bu(w,T,m),yield Tu(w,T)})).apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v),T=Fi.credentialWithLink(p,m||Re());return j(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Bn(w,T)})).apply(this,arguments)}function Tg(v,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:createAuthUri",Ye(v,p))})).apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,p){const w={identifier:p,continueUri:Ge()?Re():"http://localhost"},{signinMethods:T}=yield Tg((0,k.m9)(v),w);return T||[]})).apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(v,p){const m=(0,k.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Bu(m.auth,T,p);const{email:V}=yield Un(m.auth,T);V!==v.email&&(yield v.reload())})).apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Bu(w.auth,V,m);const{email:me}=yield Jc(w.auth,V);me!==v.email&&(yield v.reload())})).apply(this,arguments)}function zu(v,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(v,p){return wt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function gl(){return(gl=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,k.m9)(v),V={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},me=yield Pn(w,zu(w.auth,V));w.displayName=me.displayName||null,w.photoURL=me.photoUrl||null;const Oe=w.providerData.find(({providerId:Je})=>"password"===Je);Oe&&(Oe.displayName=w.displayName,Oe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(me)})).apply(this,arguments)}function oo(v,p,m){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(v,p,m){const{auth:w}=v,V={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(V.email=p),m&&(V.password=m);const me=yield Pn(v,vn(w,V));yield v._updateTokensIfNecessary(me,!0)})).apply(this,arguments)}class oi{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class Dn extends oi{constructor(p,m,w,T){super(p,m,w),this.username=T}}class Nd extends oi{constructor(p,m){super(p,"facebook.com",m)}}class ml extends Dn{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Pf extends oi{constructor(p,m){super(p,"google.com",m)}}class yl extends Dn{constructor(p,m,w){super(p,"twitter.com",m,w)}}function Wu(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function dr(v){var p,m;if(!v)return null;const{providerId:w}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},V=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const me=null===(m=null===(p=yt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(me)return new oi(V,"anonymous"!==me&&"custom"!==me?me:null)}if(!w)return null;switch(w){case"facebook.com":return new Nd(V,T);case"github.com":return new ml(V,T);case"google.com":return new Pf(V,T);case"twitter.com":return new yl(V,T,v.screenName||null);case"custom":case"anonymous":return new oi(V,null);default:return new oi(V,w,T)}}(m)}class uo{constructor(p,m,w){this.type=p,this.credential=m,this.auth=w}static _fromIdtoken(p,m){return new uo("enroll",p,m)}static _fromMfaPendingCredential(p){return new uo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return uo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return uo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ku{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=Nn(p),T=m.customData._serverResponse,V=(T.mfaInfo||[]).map(Oe=>He._fromServerResponse(w,Oe));j(T.mfaPendingCredential,w,"internal-error");const me=uo._fromMfaPendingCredential(T.mfaPendingCredential);return new Ku(me,V,function(){var Oe=(0,h.Z)(function*(Je){const ft=yield Je._process(w,me);delete T.mfaInfo,delete T.mfaPendingCredential;const Ft=Object.assign(Object.assign({},T),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(m.operationType){case"signIn":const At=yield Pr._fromIdTokenResponse(w,m.operationType,Ft);return yield w._updateCurrentUser(At.user),At;case"reauthenticate":return j(m.user,w,"internal-error"),Pr._forOperation(m.user,m.operationType,Ft);default:ae(w,"internal-error")}});return function(Je){return Oe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function Zu(v,p){return wt(v,"POST","/v2/accounts/mfaEnrollment:start",Ye(v,p))}class Nf{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>He._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Nf(p)}getSession(){var p=this;return(0,h.Z)(function*(){return uo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var w=this;return(0,h.Z)(function*(){const T=p,V=yield w.getSession(),me=yield Pn(w.user,T._process(w.user.auth,V,m));return yield w.user._updateTokensIfNecessary(me),w.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){var w;const T="string"==typeof p?p:p.uid,V=yield m.user.getIdToken(),me=yield Pn(m.user,function Ud(v,p){return wt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(v,p))}(m.user.auth,{idToken:V,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Oe})=>Oe!==T),yield m.user._updateTokensIfNecessary(me);try{yield m.user.reload()}catch(Oe){if("auth/user-token-expired"!==(null===(w=Oe)||void 0===w?void 0:w.code))throw Oe}})()}}const co=new WeakMap,lo="__sak";class Qu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oa=(()=>{class v extends Qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Na(){const v=(0,k.z$)();return gt(v)||Yt(v)}()&&function An(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Js(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),V=this.localCache[w];T!==V&&m(w,V,T)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Oe,Je,ft)=>{this.notifyListeners(Oe,ft)});const T=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(T);if(m.newValue!==Oe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!w)return}const V=()=>{const Oe=this.storage.getItem(T);!w&&this.localCache[T]===Oe||this.notifyListeners(T,Oe)},me=this.storage.getItem(T);!function cr(){return(0,k.w1)()&&10===document.documentMode}()||me===m.newValue||m.newValue===m.oldValue?V():setTimeout(V,10)}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const V of Array.from(T))V(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var T=()=>super._set,V=this;return(0,h.Z)(function*(){yield T().call(V,m,w),V.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,T=this;return(0,h.Z)(function*(){const V=yield w().call(T,m);return T.localCache[m]=JSON.stringify(V),V})()}_remove(m){var w=()=>super._remove,T=this;return(0,h.Z)(function*(){yield w().call(T,m),delete T.localCache[m]})()}}return v.type="LOCAL",v})(),Ui=(()=>{class v extends Qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let Hd=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(V=>V.isListeningto(m));if(w)return w;const T=new v(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const T=m,{eventId:V,eventType:me,data:Oe}=T.data,Je=w.handlersMap[me];if(!Je?.size)return;T.ports[0].postMessage({status:"ack",eventId:V,eventType:me});const ft=Array.from(Je).map(function(){var At=(0,h.Z)(function*(pr){return pr(T.origin,Oe)});return function(pr){return At.apply(this,arguments)}}()),Ft=yield function La(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(ft);T.ports[0].postMessage({status:"done",eventId:V,eventType:me,response:Ft})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ua(v="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return v+m}class vl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var T=this;return(0,h.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let me,Oe;return new Promise((Je,ft)=>{const Ft=Ua("",20);V.port1.start();const At=setTimeout(()=>{ft(new Error("unsupported_event"))},w);Oe={messageChannel:V,onMessage(pr){const gr=pr;if(gr.data.eventId===Ft)switch(gr.data.status){case"ack":clearTimeout(At),me=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(me),Je(gr.data.response);break;default:clearTimeout(At),clearTimeout(me),ft(new Error("invalid_response"))}}},T.handlers.add(Oe),V.port1.addEventListener("message",Oe.onMessage),T.target.postMessage({eventType:p,eventId:Ft,data:m},[V.port2])}).finally(()=>{Oe&&T.removeMessageHandler(Oe)})})()}}function nr(){return window}function Xu(){return typeof nr().WorkerGlobalScope<"u"&&"function"==typeof nr().importScripts}function Ba(){return(Ba=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hs="firebaseLocalStorageDb",js="firebaseLocalStorage",tc="fbase_key";class fo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Va(v,p){return v.transaction([js],p?"readwrite":"readonly").objectStore(js)}function $o(){const v=indexedDB.open(Hs,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(js,{keyPath:tc})}catch(T){m(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(js)?p(w):(w.close(),yield function $d(){const v=indexedDB.deleteDatabase(Hs);return new fo(v).toPromise()}(),p(yield $o()))}))})}function fs(v,p,m){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(v,p,m){const w=Va(v,!0).put({[tc]:p,value:m});return new fo(w).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(v,p){const m=Va(v,!1).get(p),w=yield new fo(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function po(v,p){const m=Va(v,!0).delete(p);return new fo(m).toPromise()}const zo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield $o()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const V=yield w._openDb();return yield m(V)}catch(V){if(T++>3)throw V;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Xu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Hd._getInstance(function ec(){return Xu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(T,V){return{keyProcessed:(yield m._poll()).includes(V.key)}});return function(T,V){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(T,V){return["keyChanged"]});return function(T,V){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,T;if(m.activeServiceWorker=yield function ho(){return Ba.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new vl(m.activeServiceWorker);const V=yield m.sender._send("ping",{},800);!V||(null===(w=V[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=V[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ju(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield $o();return yield fs(m,lo,"1"),yield po(m,lo),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(V=>fs(V,m,w)),T.localCache[m]=w,T.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=yield w._withRetries(V=>function nc(v,p){return Ha.apply(this,arguments)}(V,m));return w.localCache[m]=T,T})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(T=>po(T,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(me=>{const Oe=Va(me,!1).getAll();return new fo(Oe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const T=[],V=new Set;for(const{fbase_key:me,value:Oe}of w)V.add(me),JSON.stringify(m.localCache[me])!==JSON.stringify(Oe)&&(m.notifyListeners(me,Oe),T.push(me));for(const me of Object.keys(m.localCache))m.localCache[me]&&!V.has(me)&&(m.notifyListeners(me,null),T.push(me));return T})()}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const V of Array.from(T))V(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Go(v,p){return wt(v,"POST","/v2/accounts/mfaSignIn:start",Ye(v,p))}function $s(){return($s=(0,h.Z)(function*(v){return(yield wt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qo(v){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=T=>{const V=ce("internal-error");V.customData=T,m(V)},w.type="text/javascript",w.charset="UTF-8",function Wo(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function sc(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ja=1e12;class Sn{constructor(p){this.auth=p,this.counter=ja,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new Ag(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||ja;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ja))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(p||ja))||void 0===w||w.execute(),""})()}}class Ag{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;j(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ny(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rg=sc("rcb"),ry=new De(3e4,6e4);class Of{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=nr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return j(function Gw(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(nr().grecaptcha):new Promise((w,T)=>{const V=nr().setTimeout(()=>{T(ce(p,"network-request-failed"))},ry.get());nr()[Rg]=()=>{nr().clearTimeout(V),delete nr()[Rg];const Oe=nr().grecaptcha;if(!Oe)return void T(ce(p,"internal-error"));const Je=Oe.render;Oe.render=(ft,Ft)=>{const At=Je(ft,Ft);return this.counter++,At},this.hostLanguage=m,w(Oe)},qo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Rg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(V),T(ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=nr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class El{load(p){return(0,h.Z)(function*(){return new Sn(p)})()}clearedOneInstance(){}}const sy="recaptcha",oy={theme:"light",type:"image"};class Cr{constructor(p,m=Object.assign({},oy),w){this.parameters=m,this.type=sy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nn(w),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new El:new Of,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(V=>{const me=Oe=>{!Oe||(p.tokenChangeListeners.delete(me),V(Oe))};p.tokenChangeListeners.add(me),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=nr()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){j(Ge()&&!Xu(),p.auth,"internal-error"),yield function Dr(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ai(v){return $s.apply(this,arguments)}(p.auth);j(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mo{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Us._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function pn(){return(pn=(0,h.Z)(function*(v,p,m){const w=Nn(v),T=yield gs(w,p,(0,k.m9)(m));return new mo(T,V=>Bn(w,V))})).apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v);yield rn(!1,w,"phone");const T=yield gs(w.auth,p,(0,k.m9)(m));return new mo(T,V=>Fu(w,V))})).apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v),T=yield gs(w.auth,p,(0,k.m9)(m));return new mo(T,V=>Lu(w,V))})).apply(this,arguments)}function gs(v,p,m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,p,m){var w;const T=yield m.verify();try{let V;if(j("string"==typeof T,v,"argument-error"),j(m.type===sy,v,"argument-error"),V="string"==typeof p?{phoneNumber:p}:p,"session"in V){const me=V.session;if("phoneNumber"in V)return j("enroll"===me.type,v,"internal-error"),(yield Zu(v,{idToken:me.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===me.type,v,"internal-error");const Oe=(null===(w=V.multiFactorHint)||void 0===w?void 0:w.uid)||V.multiFactorUid;return j(Oe,v,"missing-multi-factor-info"),(yield Go(v,{mfaPendingCredential:me.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:me}=yield xg(v,{phoneNumber:V.phoneNumber,recaptchaToken:T});return me}}finally{m._reset()}})).apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(v,p){yield Uo((0,k.m9)(v),p)})).apply(this,arguments)}let On=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Nn(m)}verifyPhoneNumber(m,w){return gs(this.auth,m,(0,k.m9)(w))}static credential(m,w){return Us._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:T}=m;return w&&T?Us._fromTokenResponse(w,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Vi(v,p){return p?he(p):(j(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class vt extends kr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return lr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return lr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return lr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function qr(v){return Ci(v.auth,new vt(v),v.bypassAuthState)}function Hi(v){const{auth:p,user:m}=v;return j(m,p,"internal-error"),ro(m,new vt(v),v.bypassAuthState)}function ui(v){return zd.apply(this,arguments)}function zd(){return(zd=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return j(m,p,"internal-error"),Uo(m,new vt(v),v.bypassAuthState)})).apply(this,arguments)}class Gd{constructor(p,m,w,T,V=!1){this.auth=p,this.resolver=w,this.user=T,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(w,T){p.pendingPromise={resolve:w,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(V){p.reject(V)}});return function(w,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:V,tenantId:me,error:Oe,type:Je}=p;if(Oe)return void m.reject(Oe);const ft={auth:m.auth,requestUri:w,sessionId:T,tenantId:me||void 0,postBody:V||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Je)(ft))}catch(Ft){m.reject(Ft)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return qr;case"linkViaPopup":case"linkViaRedirect":return ui;case"reauthViaPopup":case"reauthViaRedirect":return Hi;default:ae(this.auth,"internal-error")}}resolve(p){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ji=new De(2e3,1e4);function oc(){return(oc=(0,h.Z)(function*(v,p,m){const w=Nn(v);ne(v,p,as);const T=Vi(w,m);return new Tt(w,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v);ne(w.auth,p,as);const T=Vi(w.auth,m);return new Tt(w.auth,"reauthViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v);ne(w.auth,p,as);const T=Vi(w.auth,m);return new Tt(w.auth,"linkViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}let Tt=(()=>{class v extends Gd{constructor(m,w,T,V,me){super(m,w,V,me),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return j(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){z(1===m.filter.length,"Popup operations only handle one event");const w=Ua();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,T;this.pollId=null!==(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ji.get())};m()}}return v.currentPopupAction=null,v})();const Fn=new Map;class mt extends Gd{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Fn.get(m.auth._key());if(!w){try{const V=(yield function $a(v,p){return Ut.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(V)}catch(T){w=()=>Promise.reject(T)}Fn.set(m.auth._key(),w)}return m.bypassAuthState||Fn.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const T=yield w.auth._redirectUserForId(p.eventId);if(T)return w.user=T,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ut(){return(Ut=(0,h.Z)(function*(v,p){const m=L(p),w=D(v);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(m));return yield w._remove(m),T})).apply(this,arguments)}function Qo(v,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(v,p){return D(v)._set(L(p),"true")})).apply(this,arguments)}function x(v,p){Fn.set(v._key(),p)}function D(v){return he(v._redirectPersistence)}function L(v){return ye("pendingRedirect",v.config.apiKey,v.name)}function xe(){return(xe=(0,h.Z)(function*(v,p,m){const w=Nn(v);ne(v,p,as);const T=Vi(w,m);return yield Qo(T,w),T._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v);ne(w.auth,p,as);const T=Vi(w.auth,m);yield Qo(T,w.auth);const V=yield ms(w);return T._openRedirect(w.auth,p,"reauthViaRedirect",V)})).apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(v,p,m){const w=(0,k.m9)(v);ne(w.auth,p,as);const T=Vi(w.auth,m);yield rn(!1,w,p.providerId),yield Qo(T,w.auth);const V=yield ms(w);return T._openRedirect(w.auth,p,"linkViaRedirect",V)})).apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(v,p){return yield Nn(v)._initializationPromise,Si(v,p,!1)})).apply(this,arguments)}function Si(v,p){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(v,p,m=!1){const w=Nn(v),T=Vi(w,p),me=yield new mt(w,T,m).execute();return me&&!m&&(delete me.user._redirectEventId,yield w._persistUserIfCurrent(me.user),yield w._setRedirectUser(null,p)),me})).apply(this,arguments)}function ms(v){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(v){const p=Ua(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Nr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function vo(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yo(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!yo(p)){const T=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ce(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(p))}saveEventToCache(p){this.cachedEventUids.add(zi(p)),this.lastProcessedEventTime=Date.now()}}function zi(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function yo({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function _s(v){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,h.Z)(function*(v,p={}){return wt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Pg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ff=/^https?/;function Lf(){return(Lf=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield _s(v);for(const m of p)try{if(qd(m))return}catch{}ae(v,"unauthorized-domain")})).apply(this,arguments)}function qd(v){const p=Re(),{protocol:m,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const me=new URL(v);return""===me.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&me.hostname===w}if(!Ff.test(m))return!1;if(Pg.test(v))return w===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Uf=new De(3e4,6e4);function Kd(){const v=nr().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let bl=null;function uy(v){return bl=bl||function ac(v){return new Promise((p,m)=>{var w,T,V;function me(){Kd(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Kd(),m(ce(v,"network-request-failed"))},timeout:Uf.get()})}if(null!==(T=null===(w=nr().gapi)||void 0===w?void 0:w.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(V=nr().gapi)||void 0===V||!V.load){const Oe=sc("iframefcb");return nr()[Oe]=()=>{gapi.load?me():m(ce(v,"network-request-failed"))},qo(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(Je=>m(Je))}me()}}).catch(p=>{throw bl=null,p})}(v),bl}const Zd=new De(5e3,15e3),Yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ly=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Il(v){const p=v.config;j(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Se(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:Y.SDK_VERSION},T=ly.get(v.config.apiHost);T&&(w.eid=T);const V=v._getFrameworks();return V.length&&(w.fw=V.join(",")),`${m}?${(0,k.xO)(w).slice(1)}`}function Og(){return Og=(0,h.Z)(function*(v){const p=yield uy(v),m=nr().gapi;return j(m,v,"internal-error"),p.open({where:document.body,url:Il(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yd,dontclear:!0},w=>new Promise(function(){var T=(0,h.Z)(function*(V,me){yield w.restyle({setHideOnLeave:!1});const Oe=ce(v,"network-request-failed"),Je=nr().setTimeout(()=>{me(Oe)},Zd.get());function ft(){nr().clearTimeout(Je),V(w)}w.ping(ft).then(ft,()=>{me(Oe)})});return function(V,me){return T.apply(this,arguments)}}()))}),Og.apply(this,arguments)}const Vf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dl(v,p,m,w,T,V){j(v.config.authDomain,v,"auth-domain-config-required"),j(v.config.apiKey,v,"invalid-api-key");const me={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:Y.SDK_VERSION,eventId:T};if(p instanceof as){p.setDefaultLanguage(v.languageCode),me.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(me.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Je,ft]of Object.entries(V||{}))me[Je]=ft}if(p instanceof us){const Je=p.getScopes().filter(ft=>""!==ft);Je.length>0&&(me.scopes=Je.join(","))}v.tenantId&&(me.tid=v.tenantId);const Oe=me;for(const Je of Object.keys(Oe))void 0===Oe[Je]&&delete Oe[Je];return`${function jf({config:v}){return v.emulator?Se(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(Oe).slice(1)}`}const Jd="webStorageSupport";class eh extends class zf{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new eh(p)}_finalizeEnroll(p,m,w){return function Yu(v,p){return wt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(v,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function ic(v,p){return wt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ye(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lg=(()=>{class v{constructor(){}static assertion(m){return eh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var uc="@firebase/auth",th="0.20.11";class Gf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{var T;p((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _o(){return window}function lc(){return(lc=(0,h.Z)(function*(v,p,m){var w;const{BuildInfo:T}=_o();z(p.sessionId,"AuthEvent did not contain a session ID");const V=yield rh(p.sessionId),me={};return Yt()?me.ibi=T.packageName:nn()?me.apn=T.packageName:ae(v,"operation-not-supported-in-this-environment"),T.displayName&&(me.appDisplayName=T.displayName),me.sessionId=V,Dl(v,m,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,me)})).apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(v){const{BuildInfo:p}=_o(),m={};Yt()?m.iosBundleId=p.packageName:nn()?m.androidPackageName=p.packageName:ae(v,"operation-not-supported-in-this-environment"),yield _s(v,m)})).apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(v,p,m){const{cordova:w}=_o();let T=()=>{};try{yield new Promise((V,me)=>{let Oe=null;function Je(){var At;V();const pr=null===(At=w.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof pr&&pr(),"function"==typeof m?.close&&m.close()}function ft(){Oe||(Oe=window.setTimeout(()=>{me(ce(v,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&ft()}p.addPassiveListener(Je),document.addEventListener("resume",ft,!1),nn()&&document.addEventListener("visibilitychange",Ft,!1),T=()=>{p.removePassiveListener(Je),document.removeEventListener("resume",ft,!1),document.removeEventListener("visibilitychange",Ft,!1),Oe&&window.clearTimeout(Oe)}})}finally{T()}})).apply(this,arguments)}function rh(v){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(v){const p=my(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function my(v){if(z(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let w=0;w<v.length;w++)m[w]=v.charCodeAt(w);return m}(0,k.Pz)("authIdTokenMaxAge"),function Fr(v){(0,Y._registerComponent)(new J.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),{apiKey:V,authDomain:me}=w.options;return((Oe,Je)=>{j(V&&!V.includes(":"),"invalid-api-key",{appName:Oe.name}),j(!me?.includes(":"),"argument-error",{appName:Oe.name});const ft={apiKey:V,authDomain:me,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ps(v)},Ft=new qt(Oe,Je,ft);return function Ne(v,p){const m=p?.persistence||[],w=(Array.isArray(m)?m:[m]).map(he);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(Ft,m),Ft})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new J.wA("auth-internal",p=>{const m=Nn(p.getProvider("auth").getImmediate());return new Gf(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(uc,th,function Or(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Y.registerVersion)(uc,th,"esm2017")}("Browser");class sh extends Nr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function Tl(v){return qa.apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(v){const p=yield Al()._get(Rl(v));return p&&(yield Al()._remove(Rl(v))),p})).apply(this,arguments)}function dc(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function Al(){return he(Oa)}function Rl(v){return ye("authEvent",v.config.apiKey,v.name)}function Gi(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,k.zd)(m.join("?"))}function Lr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ce("no-auth-event")}}function Ka(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function uh(v=(0,k.z$)()){return!("file:"!==Ka()&&"ionic:"!==Ka()&&"capacitor:"!==Ka()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pl(){try{const v=self.localStorage,p=Ua();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Qf(v=(0,k.z$)()){return function ch(){return(0,k.w1)()&&11===document?.documentMode}()||function kl(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return ea()&&(0,k.hl)()}return!1}function ea(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nl(){return(function $g(){return"http:"===Ka()||"https:"===Ka()}()||(0,k.ru)()||uh())&&!function Za(){return(0,k.b$)()||(0,k.UG)()}()&&Pl()&&!ea()}function ta(){return uh()&&typeof document<"u"}function Ya(){return(Ya=(0,h.Z)(function*(){return!!ta()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},wo=j,Jf="persistence";function na(v){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,h.Z)(function*(v){yield v._initializationPromise;const p=Qa(),m=ye(Jf,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function Qa(){var v;try{return(null===(v=function Xf(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Gs=j;class Ai{constructor(){this.browserResolver=he(class ws{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ui,this._completeRedirectFn=Si,this._overrideRedirectResult=x}_openPopup(p,m,w,T){var V=this;return(0,h.Z)(function*(){var me;z(null===(me=V.eventManagers[p._key()])||void 0===me?void 0:me.manager,"_initialize() not called before _openPopup()");const Oe=Dl(p,m,w,Re(),T);return function Fg(v,p,m,w=500,T=600){const V=Math.max((window.screen.availHeight-T)/2,0).toString(),me=Math.max((window.screen.availWidth-w)/2,0).toString();let Oe="";const Je=Object.assign(Object.assign({},Vf),{width:w.toString(),height:T.toString(),top:V,left:me}),ft=(0,k.z$)().toLowerCase();m&&(Oe=Jt(ft)?"_blank":m),Ke(ft)&&(p=p||"http://localhost",Je.scrollbars="yes");const Ft=Object.entries(Je).reduce((pr,[gr,Ws])=>`${pr}${gr}=${Ws},`,"");if(function ii(v=(0,k.z$)()){var p;return Yt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ft)&&"_self"!==Oe)return function Hf(v,p){const m=document.createElement("a");m.href=v,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",Oe),new Qd(null);const At=window.open(p||"",Oe,Ft);j(At,v,"popup-blocked");try{At.focus()}catch{}return new Qd(At)}(p,Oe,Ua())})()}_openRedirect(p,m,w,T){var V=this;return(0,h.Z)(function*(){return yield V._originValidation(p),function Di(v){nr().location.href=v}(Dl(p,m,w,Re(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:V}=this.eventManagers[m];return T?Promise.resolve(T):(z(V,"If manager is not set, promise should be"),V)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const w=yield function Bf(v){return Og.apply(this,arguments)}(p),T=new Nr(p);return w.register("authEvent",V=>(j(V?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=w,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Jd,{type:Jd},T=>{var V;const me=null===(V=T?.[0])||void 0===V?void 0:V[Jd];void 0!==me&&m(!!me),ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ay(v){return Lf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Js()||gt()||Yt()}}),this.cordovaResolver=he(class hc{constructor(){this._redirectPersistence=Ui,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Si,this._overrideRedirectResult=x}_initialize(p){var m=this;return(0,h.Z)(function*(){const w=p._key();let T=m.eventManagers.get(w);return T||(T=new sh(p),m.eventManagers.set(w,T),m.attachCallbackListeners(p,T)),T})()}_openPopup(p){ae(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,w,T){var V=this;return(0,h.Z)(function*(){!function Zf(v){var p,m,w,T,V,me,Oe,Je,ft,Ft;const At=_o();j("function"==typeof(null===(p=At?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=At?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(V=null===(T=null===(w=At?.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===V?void 0:V.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Je=null===(Oe=null===(me=At?.cordova)||void 0===me?void 0:me.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===Je?void 0:Je.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Ft=null===(ft=At?.cordova)||void 0===ft?void 0:ft.InAppBrowser)||void 0===Ft?void 0:Ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const me=yield V._initialize(p);yield me.initialized(),me.resetRedirect(),function za(){Fn.clear()}(),yield V._originValidation(p);const Oe=function Bg(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:dc(),postBody:null,tenantId:v.tenantId,error:ce(v,"no-auth-event")}}(p,w,T);yield function Yf(v,p){return Al()._set(Rl(v),p)}(p,Oe);const Je=yield function cc(v,p,m){return lc.apply(this,arguments)}(p,Oe,m),ft=yield function Kf(v){const{cordova:p}=_o();return new Promise(m=>{p.plugins.browsertab.isAvailable(w=>{let T=null;w?p.plugins.browsertab.openUrl(v):T=p.InAppBrowser.open(v,function br(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(T)})})}(Je);return function gy(v,p,m){return Ga.apply(this,arguments)}(p,me,ft)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function py(v){return Sl.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:w,handleOpenURL:T,BuildInfo:V}=_o(),me=setTimeout((0,h.Z)(function*(){yield Tl(p),m.onEvent(Lr())}),500),Oe=function(){var Ft=(0,h.Z)(function*(At){clearTimeout(me);const pr=yield Tl(p);let gr=null;pr&&At?.url&&(gr=function yy(v,p){var m,w;const T=function vy(v){const p=Gi(v),m=p.link?decodeURIComponent(p.link):void 0,w=Gi(m).link,T=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Gi(T).link||T||w||m||v}(p);if(T.includes("/__/auth/callback")){const V=Gi(T),me=V.firebaseError?function Jo(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(V.firebaseError)):null,Oe=null===(w=null===(m=me?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Je=Oe?ce(Oe):null;return Je?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Je,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(pr,At.url)),m.onEvent(gr||Lr())});return function(pr){return Ft.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,Oe);const Je=T,ft=`${V.packageName.toLowerCase()}://`;_o().handleOpenURL=function(){var Ft=(0,h.Z)(function*(At){if(At.toLowerCase().startsWith(ft)&&Oe({url:At}),"function"==typeof Je)try{Je(At)}catch(pr){console.error(pr)}});return function(At){return Ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ui,this._completeRedirectFn=Si,this._overrideRedirectResult=x}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,w,T){var V=this;return(0,h.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openPopup(p,m,w,T)})()}_openRedirect(p,m,w,T){var V=this;return(0,h.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openRedirect(p,m,w,T)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return ta()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function lh(){return Ya.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function ep(v){return v.unwrap()}function dh(v){return pc(v)}function pc(v){const{_tokenResponse:p}=v instanceof k.ZR?v.customData:v;if(!p)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return On.credentialFromResult(v);const m=p.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=Ru;break;case"facebook.com":w=Da;break;case"github.com":w=il;break;case"twitter.com":w=si;break;default:const{oauthIdToken:T,oauthAccessToken:V,oauthTokenSecret:me,pendingToken:Oe,nonce:Je}=p;return V||me||T||Oe?Oe?m.startsWith("saml.")?Fo._create(m,Oe):os._fromParams({providerId:m,signInMethod:m,pendingToken:Oe,idToken:T,accessToken:V}):new no(m).credential({idToken:T,accessToken:V,rawNonce:Je}):null}return v instanceof k.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function fr(v,p){return p.catch(m=>{throw m instanceof k.ZR&&function hh(v,p){var m,w;const T=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=p)||void 0===w?void 0:w.code))p.resolver=new fh(v,function qn(v,p){var m;const w=(0,k.m9)(v),T=p;return j(p.customData.operationType,w,"argument-error"),j(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Ku._fromError(w,T)}(v,p));else if(T){const V=pc(p),me=p;V&&(me.credential=V,me.tenantId=T.tenantId||void 0,me.email=T.email||void 0,me.phoneNumber=T.phoneNumber||void 0)}}(v,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:dh(m),additionalUserInfo:Wu(m),user:Es.getOrCreate(T)}})}function Wi(v,p){return gc.apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:w=>fr(v,m.confirm(w))}})).apply(this,arguments)}class fh{constructor(p,m){this.resolver=m,this.auth=function tp(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return fr(ep(this.auth),this.resolver.resolveSignIn(p))}}class Es{constructor(p){this._delegate=p,this.multiFactor=function jo(v){const p=(0,k.m9)(v);return co.has(p)||co.set(p,Nf._fromUser(p)),co.get(p)}(p)}static getOrCreate(p){return Es.USER_MAP.has(p)||Es.USER_MAP.set(p,new Es(p)),Es.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return fr(m.auth,Fu(m._delegate,p))})()}linkWithPhoneNumber(p,m){var w=this;return(0,h.Z)(function*(){return Wi(w.auth,function hr(v,p,m){return ct.apply(this,arguments)}(w._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return fr(m.auth,function Yo(v,p,m){return vi.apply(this,arguments)}(m._delegate,p,Ai))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield na(Nn(m.auth)),function Wt(v,p,m){return function Zt(v,p,m){return It.apply(this,arguments)}(v,p,m)}(m._delegate,p,Ai)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return fr(m.auth,Lu(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Wi(this.auth,function Rn(v,p,m){return Bi.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return fr(this.auth,function Me(v,p,m){return Jr.apply(this,arguments)}(this._delegate,p,Ai))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield na(Nn(m.auth)),function je(v,p,m){return function We(v,p,m){return Et.apply(this,arguments)}(v,p,m)}(m._delegate,p,Ai)})()}sendEmailVerification(p){return function dl(v,p){return Pa.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function Wr(v,p){return ku.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Pd(v,p){return oo((0,k.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function so(v,p){return oo((0,k.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Sr(v,p){return zs.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function pl(v,p){return gl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function hl(v,p,m){return $u.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Es.USER_MAP=new WeakMap;const wn=j;let ra=(()=>{class v{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;wn(T,"invalid-api-key",{appName:m.name}),wn(T,"invalid-api-key",{appName:m.name});const V=typeof window<"u"?Ai:void 0;this._delegate=w.initialize({options:{persistence:bs(T,m.name),popupRedirectResolver:V}}),this._delegate._updateErrorMap(K),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Du(v,p,m){const w=Nn(v);j(w._canInitEmulator,w,"emulator-config-failed"),j(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const T=!!m?.disableWarnings,V=Oi(p),{host:me,port:Oe}=function ir(v){const p=Oi(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const V=T[1];return{host:V,port:Ns(w.substr(V.length+1))}}{const[V,me]=w.split(":");return{host:V,port:Ns(me)}}}(p);w.config.emulator={url:`${V}//${me}${null===Oe?"":`:${Oe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:me,port:Oe,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Os(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,w)}applyActionCode(m){return function mi(v,p){return Ta.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Aa(this._delegate,m)}confirmPasswordReset(m,w){return function Hu(v,p,m){return Bo.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var T=this;return(0,h.Z)(function*(){return fr(T._delegate,function Ra(v,p,m){return Wn.apply(this,arguments)}(T._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function ju(v,p){return ka.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function hs(v,p){return"EMAIL_SIGNIN"===Au.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){wn(Nl(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Kn(v,p){return gn.apply(this,arguments)}(m._delegate,Ai);return w?fr(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Hg(v,p){Nn(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,w,T){const{next:V,error:me,complete:Oe}=ia(m,w,T);return this._delegate.onAuthStateChanged(V,me,Oe)}onIdTokenChanged(m,w,T){const{next:V,error:me,complete:Oe}=ia(m,w,T);return this._delegate.onIdTokenChanged(V,me,Oe)}sendSignInLinkToEmail(m,w){return function cl(v,p,m){return io.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Vu(v,p,m){return Gn.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,h.Z)(function*(){let T;switch(function zg(v,p){wo(Object.values(Ti).includes(p),v,"invalid-persistence-type"),(0,k.b$)()?wo(p!==Ti.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?wo(p===Ti.NONE,v,"unsupported-persistence-type"):ea()?wo(p===Ti.NONE||p===Ti.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):wo(p===Ti.NONE||Pl(),v,"unsupported-persistence-type")}(w._delegate,m),m){case Ti.SESSION:T=Ui;break;case Ti.LOCAL:T=(yield he(zo)._isAvailable())?zo:Oa;break;case Ti.NONE:T=ue;break;default:return ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return fr(this._delegate,function Rf(v){return zn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return fr(this._delegate,Bn(this._delegate,m))}signInWithCustomToken(m){return fr(this._delegate,function ol(v,p){return Sa.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return fr(this._delegate,function Li(v,p,m){return Bn((0,k.m9)(v),Fi.credential(p,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return fr(this._delegate,function Sg(v,p,m){return Ma.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Wi(this._delegate,function yi(v,p,m){return pn.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,h.Z)(function*(){return wn(Nl(),w._delegate,"operation-not-supported-in-this-environment"),fr(w._delegate,function Mg(v,p,m){return oc.apply(this,arguments)}(w._delegate,m,Ai))})()}signInWithRedirect(m){var w=this;return(0,h.Z)(function*(){return wn(Nl(),w._delegate,"operation-not-supported-in-this-environment"),yield na(w._delegate),function Q(v,p,m){return function we(v,p,m){return xe.apply(this,arguments)}(v,p,m)}(w._delegate,m,Ai)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function ul(v,p){return kd.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ti,v})();function ia(v,p,m){let w=v;"function"!=typeof v&&({next:w,error:p,complete:m}=v);const T=w;return{next:me=>T(me&&Es.getOrCreate(me)),error:p,complete:m}}function bs(v,p){const m=function fc(v,p){const m=Qa();if(!m)return[];const w=ye(Jf,v,p);switch(m.getItem(w)){case Ti.NONE:return[ue];case Ti.LOCAL:return[zo,Ui];case Ti.SESSION:return[Ui];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(zo)&&m.push(zo),typeof window<"u")for(const w of[Oa,Ui])m.includes(w)||m.push(w);return m.includes(ue)||m.push(ue),m}class np{constructor(){this.providerId="phone",this._delegate=new On(ep(O.Z.auth()))}static credential(p,m){return On.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}np.PHONE_SIGN_IN_METHOD=On.PHONE_SIGN_IN_METHOD,np.PROVIDER_ID=On.PROVIDER_ID;const Gg=j;class Ww{constructor(p,m,w=O.Z.app()){var T;Gg(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Cr(p,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rp(v){v.INTERNAL.registerComponent(new J.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new ra(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fi,FacebookAuthProvider:Da,GithubAuthProvider:il,GoogleAuthProvider:Ru,OAuthProvider:no,SAMLAuthProvider:pi,PhoneAuthProvider:np,PhoneMultiFactorGenerator:Lg,RecaptchaVerifier:Ww,TwitterAuthProvider:si,Auth:ra,AuthCredential:kr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(O.Z)},7521:(Le,Ee,M)=>{var h;!function(O,k,Y){if(O){for(var B,ie={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},q={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},J={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},N={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)ie[111+P]="f"+P;for(P=0;P<=9;++P)ie[P+96]=P.toString();re.prototype.bind=function(ne,le,j){return this._bindMultiple.call(this,ne=ne instanceof Array?ne:[ne],le,j),this},re.prototype.unbind=function(ne,le){return this.bind.call(this,ne,function(){},le)},re.prototype.trigger=function(ne,le){var j=this;return j._directMap[ne+":"+le]&&j._directMap[ne+":"+le]({},ne),j},re.prototype.reset=function(){return this._callbacks={},this._directMap={},this},re.prototype.stopCallback=function(ne,le){if((" "+le.className+" ").indexOf(" mousetrap ")>-1||ce(le,this.target))return!1;if("composedPath"in ne&&"function"==typeof ne.composedPath){var pe=ne.composedPath()[0];pe!==ne.target&&(le=pe)}return"INPUT"==le.tagName||"SELECT"==le.tagName||"TEXTAREA"==le.tagName||le.isContentEditable},re.prototype.handleKey=function(){var ne=this;return ne._handleKey.apply(ne,arguments)},re.addKeycodes=function(ne){for(var le in ne)ne.hasOwnProperty(le)&&(ie[le]=ne[le]);B=null},re.init=function(){var ne=re(k);for(var le in ne)"_"!==le.charAt(0)&&(re[le]=function(j){return function(){return ne[j].apply(ne,arguments)}}(le))},re.init(),O.Mousetrap=re,Le.exports&&(Le.exports=re),void 0!==(h=function(){return re}.call(Ee,M,Ee,Le))&&(Le.exports=h)}function R(ne,le,j){ne.addEventListener?ne.addEventListener(le,j,!1):ne.attachEvent("on"+le,j)}function F(ne){if("keypress"==ne.type){var le=String.fromCharCode(ne.which);return ne.shiftKey||(le=le.toLowerCase()),le}return ie[ne.which]?ie[ne.which]:q[ne.which]?q[ne.which]:String.fromCharCode(ne.which).toLowerCase()}function $(ne,le){return ne.sort().join(",")===le.sort().join(",")}function ee(ne){return"shift"==ne||"ctrl"==ne||"alt"==ne||"meta"==ne}function X(ne,le,j){return j||(j=function H(){if(!B)for(var ne in B={},ie)ne>95&&ne<112||ie.hasOwnProperty(ne)&&(B[ie[ne]]=ne);return B}()[ne]?"keydown":"keypress"),"keypress"==j&&le.length&&(j="keydown"),j}function ae(ne,le){var j,pe,z,te=[];for(j=function _e(ne){return"+"===ne?["+"]:(ne=ne.replace(/\+{2}/g,"+plus")).split("+")}(ne),z=0;z<j.length;++z)N[pe=j[z]]&&(pe=N[pe]),le&&"keypress"!=le&&J[pe]&&(pe=J[pe],te.push("shift")),ee(pe)&&te.push(pe);return{key:pe,modifiers:te,action:le=X(pe,te,le)}}function ce(ne,le){return null!==ne&&ne!==k&&(ne===le||ce(ne.parentNode,le))}function re(ne){var le=this;if(ne=ne||k,!(le instanceof re))return new re(ne);le.target=ne,le._callbacks={},le._directMap={};var pe,j={},z=!1,te=!1,he=!1;function se(De){De=De||{};var et,Se=!1;for(et in j)De[et]?Se=!0:j[et]=0;Se||(he=!1)}function Ne(De,Se,et,Ze,Mt,Ye){var wt,en,Ln=[],yn=et.type;if(!le._callbacks[De])return[];for("keyup"==yn&&ee(De)&&(Se=[De]),wt=0;wt<le._callbacks[De].length;++wt)en=le._callbacks[De][wt],!Ze&&en.seq&&j[en.seq]!=en.level||yn!=en.action||("keypress"!=yn||et.metaKey||et.ctrlKey)&&!$(Se,en.modifiers)||((!Ze&&en.combo==Mt||Ze&&en.seq==Ze&&en.level==Ye)&&le._callbacks[De].splice(wt,1),Ln.push(en));return Ln}function Re(De,Se,et,Ze){le.stopCallback(Se,Se.target||Se.srcElement,et,Ze)||!1===De(Se,et)&&(function K(ne){ne.preventDefault?ne.preventDefault():ne.returnValue=!1}(Se),function ve(ne){ne.stopPropagation?ne.stopPropagation():ne.cancelBubble=!0}(Se))}function Ge(De){"number"!=typeof De.which&&(De.which=De.keyCode);var Se=F(De);if(Se){if("keyup"==De.type&&z===Se)return void(z=!1);le.handleKey(Se,function G(ne){var le=[];return ne.shiftKey&&le.push("shift"),ne.altKey&&le.push("alt"),ne.ctrlKey&&le.push("ctrl"),ne.metaKey&&le.push("meta"),le}(De),De)}}function Ie(De,Se,et,Ze,Mt){le._directMap[De+":"+et]=Se;var wt,Ye=(De=De.replace(/\s+/g," ")).split(" ");Ye.length>1?function Ae(De,Se,et,Ze){function Mt(yn){return function(){he=yn,++j[De],function lt(){clearTimeout(pe),pe=setTimeout(se,1e3)}()}}function Ye(yn){Re(et,yn,De),"keyup"!==Ze&&(z=F(yn)),setTimeout(se,10)}j[De]=0;for(var wt=0;wt<Se.length;++wt){var Ln=wt+1===Se.length?Ye:Mt(Ze||ae(Se[wt+1]).action);Ie(Se[wt],Ln,Ze,De,wt)}}(De,Ye,Se,et):(wt=ae(De,et),le._callbacks[wt.key]=le._callbacks[wt.key]||[],Ne(wt.key,wt.modifiers,{type:wt.action},Ze,De,Mt),le._callbacks[wt.key][Ze?"unshift":"push"]({callback:Se,modifiers:wt.modifiers,action:wt.action,seq:Ze,level:Mt,combo:De}))}le._handleKey=function(De,Se,et){var Mt,Ze=Ne(De,Se,et),Ye={},wt=0,en=!1;for(Mt=0;Mt<Ze.length;++Mt)Ze[Mt].seq&&(wt=Math.max(wt,Ze[Mt].level));for(Mt=0;Mt<Ze.length;++Mt)if(Ze[Mt].seq){if(Ze[Mt].level!=wt)continue;en=!0,Ye[Ze[Mt].seq]=1,Re(Ze[Mt].callback,et,Ze[Mt].combo,Ze[Mt].seq)}else en||Re(Ze[Mt].callback,et,Ze[Mt].combo);var Ln="keypress"==et.type&&te;et.type==he&&!ee(De)&&!Ln&&se(Ye),te=en&&"keydown"==et.type},le._bindMultiple=function(De,Se,et){for(var Ze=0;Ze<De.length;++Ze)Ie(De[Ze],Se,et)},R(ne,"keypress",Ge),R(ne,"keydown",Ge),R(ne,"keyup",Ge)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},9751:(Le,Ee,M)=>{"use strict";M.d(Ee,{y:()=>N});var h=M(930),O=M(727),k=M(8822),Y=M(9635),ie=M(2416),q=M(576),J=M(2806);let N=(()=>{class F{constructor(G){G&&(this._subscribe=G)}lift(G){const K=new F;return K.source=this,K.operator=G,K}subscribe(G,K,ve){const ee=function R(F){return F&&F instanceof h.Lv||function P(F){return F&&(0,q.m)(F.next)&&(0,q.m)(F.error)&&(0,q.m)(F.complete)}(F)&&(0,O.Nn)(F)}(G)?G:new h.Hp(G,K,ve);return(0,J.x)(()=>{const{operator:H,source:X}=this;ee.add(H?H.call(ee,X):X?this._subscribe(ee):this._trySubscribe(ee))}),ee}_trySubscribe(G){try{return this._subscribe(G)}catch(K){G.error(K)}}forEach(G,K){return new(K=B(K))((ve,ee)=>{const H=new h.Hp({next:X=>{try{G(X)}catch(_e){ee(_e),H.unsubscribe()}},error:ee,complete:ve});this.subscribe(H)})}_subscribe(G){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(G)}[k.L](){return this}pipe(...G){return(0,Y.U)(G)(this)}toPromise(G){return new(G=B(G))((K,ve)=>{let ee;this.subscribe(H=>ee=H,H=>ve(H),()=>K(ee))})}}return F.create=$=>new F($),F})();function B(F){var $;return null!==($=F??ie.v.Promise)&&void 0!==$?$:Promise}},7579:(Le,Ee,M)=>{"use strict";M.d(Ee,{x:()=>J});var h=M(9751),O=M(727);const Y=(0,M(3888).d)(B=>function(){B(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=M(8737),q=M(2806);let J=(()=>{class B extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(R){const F=new N(this,this);return F.operator=R,F}_throwIfClosed(){if(this.closed)throw new Y}next(R){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const F of this.currentObservers)F.next(R)}})}error(R){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=R;const{observers:F}=this;for(;F.length;)F.shift().error(R)}})}complete(){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:R}=this;for(;R.length;)R.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var R;return(null===(R=this.observers)||void 0===R?void 0:R.length)>0}_trySubscribe(R){return this._throwIfClosed(),super._trySubscribe(R)}_subscribe(R){return this._throwIfClosed(),this._checkFinalizedStatuses(R),this._innerSubscribe(R)}_innerSubscribe(R){const{hasError:F,isStopped:$,observers:G}=this;return F||$?O.Lc:(this.currentObservers=null,G.push(R),new O.w0(()=>{this.currentObservers=null,(0,ie.P)(G,R)}))}_checkFinalizedStatuses(R){const{hasError:F,thrownError:$,isStopped:G}=this;F?R.error($):G&&R.complete()}asObservable(){const R=new h.y;return R.source=this,R}}return B.create=(P,R)=>new N(P,R),B})();class N extends J{constructor(P,R){super(),this.destination=P,this.source=R}next(P){var R,F;null===(F=null===(R=this.destination)||void 0===R?void 0:R.next)||void 0===F||F.call(R,P)}error(P){var R,F;null===(F=null===(R=this.destination)||void 0===R?void 0:R.error)||void 0===F||F.call(R,P)}complete(){var P,R;null===(R=null===(P=this.destination)||void 0===P?void 0:P.complete)||void 0===R||R.call(P)}_subscribe(P){var R,F;return null!==(F=null===(R=this.source)||void 0===R?void 0:R.subscribe(P))&&void 0!==F?F:O.Lc}}},930:(Le,Ee,M)=>{"use strict";M.d(Ee,{Hp:()=>ve,Lv:()=>F});var h=M(576),O=M(727),k=M(2416),Y=M(7849),ie=M(5032);const q=B("C",void 0,void 0);function B(ae,ce,re){return{kind:ae,value:ce,error:re}}var P=M(3410),R=M(2806);class F extends O.w0{constructor(ce){super(),this.isStopped=!1,ce?(this.destination=ce,(0,O.Nn)(ce)&&ce.add(this)):this.destination=_e}static create(ce,re,ne){return new ve(ce,re,ne)}next(ce){this.isStopped?X(function N(ae){return B("N",ae,void 0)}(ce),this):this._next(ce)}error(ce){this.isStopped?X(function J(ae){return B("E",void 0,ae)}(ce),this):(this.isStopped=!0,this._error(ce))}complete(){this.isStopped?X(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ce){this.destination.next(ce)}_error(ce){try{this.destination.error(ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function G(ae,ce){return $.call(ae,ce)}class K{constructor(ce){this.partialObserver=ce}next(ce){const{partialObserver:re}=this;if(re.next)try{re.next(ce)}catch(ne){ee(ne)}}error(ce){const{partialObserver:re}=this;if(re.error)try{re.error(ce)}catch(ne){ee(ne)}else ee(ce)}complete(){const{partialObserver:ce}=this;if(ce.complete)try{ce.complete()}catch(re){ee(re)}}}class ve extends F{constructor(ce,re,ne){let le;if(super(),(0,h.m)(ce)||!ce)le={next:ce??void 0,error:re??void 0,complete:ne??void 0};else{let j;this&&k.v.useDeprecatedNextContext?(j=Object.create(ce),j.unsubscribe=()=>this.unsubscribe(),le={next:ce.next&&G(ce.next,j),error:ce.error&&G(ce.error,j),complete:ce.complete&&G(ce.complete,j)}):le=ce}this.destination=new K(le)}}function ee(ae){k.v.useDeprecatedSynchronousErrorHandling?(0,R.O)(ae):(0,Y.h)(ae)}function X(ae,ce){const{onStoppedNotification:re}=k.v;re&&P.z.setTimeout(()=>re(ae,ce))}const _e={closed:!0,next:ie.Z,error:function H(ae){throw ae},complete:ie.Z}},727:(Le,Ee,M)=>{"use strict";M.d(Ee,{Lc:()=>q,w0:()=>ie,Nn:()=>J});var h=M(576);const k=(0,M(3888).d)(B=>function(R){B(this),this.message=R?`${R.length} errors occurred during unsubscription:\n${R.map((F,$)=>`${$+1}) ${F.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=R});var Y=M(8737);class ie{constructor(P){this.initialTeardown=P,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let P;if(!this.closed){this.closed=!0;const{_parentage:R}=this;if(R)if(this._parentage=null,Array.isArray(R))for(const G of R)G.remove(this);else R.remove(this);const{initialTeardown:F}=this;if((0,h.m)(F))try{F()}catch(G){P=G instanceof k?G.errors:[G]}const{_finalizers:$}=this;if($){this._finalizers=null;for(const G of $)try{N(G)}catch(K){P=P??[],K instanceof k?P=[...P,...K.errors]:P.push(K)}}if(P)throw new k(P)}}add(P){var R;if(P&&P!==this)if(this.closed)N(P);else{if(P instanceof ie){if(P.closed||P._hasParent(this))return;P._addParent(this)}(this._finalizers=null!==(R=this._finalizers)&&void 0!==R?R:[]).push(P)}}_hasParent(P){const{_parentage:R}=this;return R===P||Array.isArray(R)&&R.includes(P)}_addParent(P){const{_parentage:R}=this;this._parentage=Array.isArray(R)?(R.push(P),R):R?[R,P]:P}_removeParent(P){const{_parentage:R}=this;R===P?this._parentage=null:Array.isArray(R)&&(0,Y.P)(R,P)}remove(P){const{_finalizers:R}=this;R&&(0,Y.P)(R,P),P instanceof ie&&P._removeParent(this)}}ie.EMPTY=(()=>{const B=new ie;return B.closed=!0,B})();const q=ie.EMPTY;function J(B){return B instanceof ie||B&&"closed"in B&&(0,h.m)(B.remove)&&(0,h.m)(B.add)&&(0,h.m)(B.unsubscribe)}function N(B){(0,h.m)(B)?B():B.unsubscribe()}},2416:(Le,Ee,M)=>{"use strict";M.d(Ee,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Le,Ee,M)=>{"use strict";M.d(Ee,{E:()=>O});const O=new(M(9751).y)(ie=>ie.complete())},8996:(Le,Ee,M)=>{"use strict";M.d(Ee,{D:()=>ce});var h=M(8421),O=M(5363),k=M(9468),q=M(9751),N=M(2202),B=M(576),P=M(9672);function F(re,ne){if(!re)throw new Error("Iterable cannot be null");return new q.y(le=>{(0,P.f)(le,ne,()=>{const j=re[Symbol.asyncIterator]();(0,P.f)(le,ne,()=>{j.next().then(pe=>{pe.done?le.complete():le.next(pe.value)})},0,!0)})})}var $=M(3670),G=M(8239),K=M(1144),ve=M(6495),ee=M(2206),H=M(4532),X=M(3260);function ce(re,ne){return ne?function ae(re,ne){if(null!=re){if((0,$.c)(re))return function Y(re,ne){return(0,h.Xf)(re).pipe((0,k.R)(ne),(0,O.Q)(ne))}(re,ne);if((0,K.z)(re))return function J(re,ne){return new q.y(le=>{let j=0;return ne.schedule(function(){j===re.length?le.complete():(le.next(re[j++]),le.closed||this.schedule())})})}(re,ne);if((0,G.t)(re))return function ie(re,ne){return(0,h.Xf)(re).pipe((0,k.R)(ne),(0,O.Q)(ne))}(re,ne);if((0,ee.D)(re))return F(re,ne);if((0,ve.T)(re))return function R(re,ne){return new q.y(le=>{let j;return(0,P.f)(le,ne,()=>{j=re[N.h](),(0,P.f)(le,ne,()=>{let pe,z;try{({value:pe,done:z}=j.next())}catch(te){return void le.error(te)}z?le.complete():le.next(pe)},0,!0)}),()=>(0,B.m)(j?.return)&&j.return()})}(re,ne);if((0,X.L)(re))return function _e(re,ne){return F((0,X.Q)(re),ne)}(re,ne)}throw(0,H.z)(re)}(re,ne):(0,h.Xf)(re)}},8421:(Le,Ee,M)=>{"use strict";M.d(Ee,{Xf:()=>$});var h=M(655),O=M(1144),k=M(8239),Y=M(9751),ie=M(3670),q=M(2206),J=M(4532),N=M(6495),B=M(3260),P=M(576),R=M(7849),F=M(8822);function $(ae){if(ae instanceof Y.y)return ae;if(null!=ae){if((0,ie.c)(ae))return function G(ae){return new Y.y(ce=>{const re=ae[F.L]();if((0,P.m)(re.subscribe))return re.subscribe(ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ae);if((0,O.z)(ae))return function K(ae){return new Y.y(ce=>{for(let re=0;re<ae.length&&!ce.closed;re++)ce.next(ae[re]);ce.complete()})}(ae);if((0,k.t)(ae))return function ve(ae){return new Y.y(ce=>{ae.then(re=>{ce.closed||(ce.next(re),ce.complete())},re=>ce.error(re)).then(null,R.h)})}(ae);if((0,q.D)(ae))return H(ae);if((0,N.T)(ae))return function ee(ae){return new Y.y(ce=>{for(const re of ae)if(ce.next(re),ce.closed)return;ce.complete()})}(ae);if((0,B.L)(ae))return function X(ae){return H((0,B.Q)(ae))}(ae)}throw(0,J.z)(ae)}function H(ae){return new Y.y(ce=>{(function _e(ae,ce){var re,ne,le,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(re=(0,h.KL)(ae);!(ne=yield re.next()).done;)if(ce.next(ne.value),ce.closed)return}catch(pe){le={error:pe}}finally{try{ne&&!ne.done&&(j=re.return)&&(yield j.call(re))}finally{if(le)throw le.error}}ce.complete()})})(ae,ce).catch(re=>ce.error(re))})}},6451:(Le,Ee,M)=>{"use strict";M.d(Ee,{T:()=>q});var h=M(8189),O=M(8421),k=M(515),Y=M(7669),ie=M(8996);function q(...J){const N=(0,Y.yG)(J),B=(0,Y._6)(J,1/0),P=J;return P.length?1===P.length?(0,O.Xf)(P[0]):(0,h.J)(B)((0,ie.D)(P,N)):k.E}},5403:(Le,Ee,M)=>{"use strict";M.d(Ee,{x:()=>O});var h=M(930);function O(Y,ie,q,J,N){return new k(Y,ie,q,J,N)}class k extends h.Lv{constructor(ie,q,J,N,B,P){super(ie),this.onFinalize=B,this.shouldUnsubscribe=P,this._next=q?function(R){try{q(R)}catch(F){ie.error(F)}}:super._next,this._error=N?function(R){try{N(R)}catch(F){ie.error(F)}finally{this.unsubscribe()}}:super._error,this._complete=J?function(){try{J()}catch(R){ie.error(R)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:q}=this;super.unsubscribe(),!q&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Le,Ee,M)=>{"use strict";M.d(Ee,{U:()=>k});var h=M(4482),O=M(5403);function k(Y,ie){return(0,h.e)((q,J)=>{let N=0;q.subscribe((0,O.x)(J,B=>{J.next(Y.call(ie,B,N++))}))})}},8189:(Le,Ee,M)=>{"use strict";M.d(Ee,{J:()=>k});var h=M(5577),O=M(4671);function k(Y=1/0){return(0,h.z)(O.y,Y)}},5577:(Le,Ee,M)=>{"use strict";M.d(Ee,{z:()=>N});var h=M(4004),O=M(8421),k=M(4482),Y=M(9672),ie=M(5403),J=M(576);function N(B,P,R=1/0){return(0,J.m)(P)?N((F,$)=>(0,h.U)((G,K)=>P(F,G,$,K))((0,O.Xf)(B(F,$))),R):("number"==typeof P&&(R=P),(0,k.e)((F,$)=>function q(B,P,R,F,$,G,K,ve){const ee=[];let H=0,X=0,_e=!1;const ae=()=>{_e&&!ee.length&&!H&&P.complete()},ce=ne=>H<F?re(ne):ee.push(ne),re=ne=>{G&&P.next(ne),H++;let le=!1;(0,O.Xf)(R(ne,X++)).subscribe((0,ie.x)(P,j=>{$?.(j),G?ce(j):P.next(j)},()=>{le=!0},void 0,()=>{if(le)try{for(H--;ee.length&&H<F;){const j=ee.shift();K?(0,Y.f)(P,K,()=>re(j)):re(j)}ae()}catch(j){P.error(j)}}))};return B.subscribe((0,ie.x)(P,ce,()=>{_e=!0,ae()})),()=>{ve?.()}}(F,$,B,R)))}},5363:(Le,Ee,M)=>{"use strict";M.d(Ee,{Q:()=>Y});var h=M(9672),O=M(4482),k=M(5403);function Y(ie,q=0){return(0,O.e)((J,N)=>{J.subscribe((0,k.x)(N,B=>(0,h.f)(N,ie,()=>N.next(B),q),()=>(0,h.f)(N,ie,()=>N.complete(),q),B=>(0,h.f)(N,ie,()=>N.error(B),q)))})}},3099:(Le,Ee,M)=>{"use strict";M.d(Ee,{B:()=>ie});var h=M(8421),O=M(7579),k=M(930),Y=M(4482);function ie(J={}){const{connector:N=(()=>new O.x),resetOnError:B=!0,resetOnComplete:P=!0,resetOnRefCountZero:R=!0}=J;return F=>{let $,G,K,ve=0,ee=!1,H=!1;const X=()=>{G?.unsubscribe(),G=void 0},_e=()=>{X(),$=K=void 0,ee=H=!1},ae=()=>{const ce=$;_e(),ce?.unsubscribe()};return(0,Y.e)((ce,re)=>{ve++,!H&&!ee&&X();const ne=K=K??N();re.add(()=>{ve--,0===ve&&!H&&!ee&&(G=q(ae,R))}),ne.subscribe(re),!$&&ve>0&&($=new k.Hp({next:le=>ne.next(le),error:le=>{H=!0,X(),G=q(_e,B,le),ne.error(le)},complete:()=>{ee=!0,X(),G=q(_e,P),ne.complete()}}),(0,h.Xf)(ce).subscribe($))})(F)}}function q(J,N,...B){if(!0===N)return void J();if(!1===N)return;const P=new k.Hp({next:()=>{P.unsubscribe(),J()}});return N(...B).subscribe(P)}},9468:(Le,Ee,M)=>{"use strict";M.d(Ee,{R:()=>O});var h=M(4482);function O(k,Y=0){return(0,h.e)((ie,q)=>{q.add(k.schedule(()=>ie.subscribe(q),Y))})}},8505:(Le,Ee,M)=>{"use strict";M.d(Ee,{b:()=>ie});var h=M(576),O=M(4482),k=M(5403),Y=M(4671);function ie(q,J,N){const B=(0,h.m)(q)||J||N?{next:q,error:J,complete:N}:q;return B?(0,O.e)((P,R)=>{var F;null===(F=B.subscribe)||void 0===F||F.call(B);let $=!0;P.subscribe((0,k.x)(R,G=>{var K;null===(K=B.next)||void 0===K||K.call(B,G),R.next(G)},()=>{var G;$=!1,null===(G=B.complete)||void 0===G||G.call(B),R.complete()},G=>{var K;$=!1,null===(K=B.error)||void 0===K||K.call(B,G),R.error(G)},()=>{var G,K;$&&(null===(G=B.unsubscribe)||void 0===G||G.call(B)),null===(K=B.finalize)||void 0===K||K.call(B)}))}):Y.y}},4408:(Le,Ee,M)=>{"use strict";M.d(Ee,{o:()=>ie});var h=M(727);class O extends h.w0{constructor(J,N){super()}schedule(J,N=0){return this}}const k={setInterval(q,J,...N){const{delegate:B}=k;return B?.setInterval?B.setInterval(q,J,...N):setInterval(q,J,...N)},clearInterval(q){const{delegate:J}=k;return(J?.clearInterval||clearInterval)(q)},delegate:void 0};var Y=M(8737);class ie extends O{constructor(J,N){super(J,N),this.scheduler=J,this.work=N,this.pending=!1}schedule(J,N=0){var B;if(this.closed)return this;this.state=J;const P=this.id,R=this.scheduler;return null!=P&&(this.id=this.recycleAsyncId(R,P,N)),this.pending=!0,this.delay=N,this.id=null!==(B=this.id)&&void 0!==B?B:this.requestAsyncId(R,this.id,N),this}requestAsyncId(J,N,B=0){return k.setInterval(J.flush.bind(J,this),B)}recycleAsyncId(J,N,B=0){if(null!=B&&this.delay===B&&!1===this.pending)return N;null!=N&&k.clearInterval(N)}execute(J,N){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const B=this._execute(J,N);if(B)return B;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(J,N){let P,B=!1;try{this.work(J)}catch(R){B=!0,P=R||new Error("Scheduled action threw falsy error")}if(B)return this.unsubscribe(),P}unsubscribe(){if(!this.closed){const{id:J,scheduler:N}=this,{actions:B}=N;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(B,this),null!=J&&(this.id=this.recycleAsyncId(N,J,null)),this.delay=null,super.unsubscribe()}}}},7565:(Le,Ee,M)=>{"use strict";M.d(Ee,{v:()=>k});var h=M(6063);class O{constructor(ie,q=O.now){this.schedulerActionCtor=ie,this.now=q}schedule(ie,q=0,J){return new this.schedulerActionCtor(this,ie).schedule(J,q)}}O.now=h.l.now;class k extends O{constructor(ie,q=O.now){super(ie,q),this.actions=[],this._active=!1}flush(ie){const{actions:q}=this;if(this._active)return void q.push(ie);let J;this._active=!0;do{if(J=ie.execute(ie.state,ie.delay))break}while(ie=q.shift());if(this._active=!1,J){for(;ie=q.shift();)ie.unsubscribe();throw J}}}},4986:(Le,Ee,M)=>{"use strict";M.d(Ee,{z:()=>k});var h=M(4408);const k=new(M(7565).v)(h.o)},6063:(Le,Ee,M)=>{"use strict";M.d(Ee,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},233:(Le,Ee,M)=>{"use strict";M.d(Ee,{N:()=>ie});var h=M(4408),k=M(7565);const ie=new class Y extends k.v{}(class O extends h.o{constructor(N,B){super(N,B),this.scheduler=N,this.work=B}schedule(N,B=0){return B>0?super.schedule(N,B):(this.delay=B,this.state=N,this.scheduler.flush(this),this)}execute(N,B){return B>0||this.closed?super.execute(N,B):this._execute(N,B)}requestAsyncId(N,B,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(N,B,P):(N.flush(this),0)}})},3410:(Le,Ee,M)=>{"use strict";M.d(Ee,{z:()=>h});const h={setTimeout(O,k,...Y){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(O,k,...Y):setTimeout(O,k,...Y)},clearTimeout(O){const{delegate:k}=h;return(k?.clearTimeout||clearTimeout)(O)},delegate:void 0}},2202:(Le,Ee,M)=>{"use strict";M.d(Ee,{h:()=>O});const O=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Le,Ee,M)=>{"use strict";M.d(Ee,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Le,Ee,M)=>{"use strict";M.d(Ee,{_6:()=>q,jO:()=>Y,yG:()=>ie});var h=M(576);function k(J){return J[J.length-1]}function Y(J){return(0,h.m)(k(J))?J.pop():void 0}function ie(J){return function O(J){return J&&(0,h.m)(J.schedule)}(k(J))?J.pop():void 0}function q(J,N){return"number"==typeof k(J)?J.pop():N}},8737:(Le,Ee,M)=>{"use strict";function h(O,k){if(O){const Y=O.indexOf(k);0<=Y&&O.splice(Y,1)}}M.d(Ee,{P:()=>h})},3888:(Le,Ee,M)=>{"use strict";function h(O){const Y=O(ie=>{Error.call(ie),ie.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}M.d(Ee,{d:()=>h})},2806:(Le,Ee,M)=>{"use strict";M.d(Ee,{O:()=>Y,x:()=>k});var h=M(2416);let O=null;function k(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const q=!O;if(q&&(O={errorThrown:!1,error:null}),ie(),q){const{errorThrown:J,error:N}=O;if(O=null,J)throw N}}else ie()}function Y(ie){h.v.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=ie)}},9672:(Le,Ee,M)=>{"use strict";function h(O,k,Y,ie=0,q=!1){const J=k.schedule(function(){Y(),q?O.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(O.add(J),!q)return J}M.d(Ee,{f:()=>h})},4671:(Le,Ee,M)=>{"use strict";function h(O){return O}M.d(Ee,{y:()=>h})},1144:(Le,Ee,M)=>{"use strict";M.d(Ee,{z:()=>h});const h=O=>O&&"number"==typeof O.length&&"function"!=typeof O},2206:(Le,Ee,M)=>{"use strict";M.d(Ee,{D:()=>O});var h=M(576);function O(k){return Symbol.asyncIterator&&(0,h.m)(k?.[Symbol.asyncIterator])}},576:(Le,Ee,M)=>{"use strict";function h(O){return"function"==typeof O}M.d(Ee,{m:()=>h})},3670:(Le,Ee,M)=>{"use strict";M.d(Ee,{c:()=>k});var h=M(8822),O=M(576);function k(Y){return(0,O.m)(Y[h.L])}},6495:(Le,Ee,M)=>{"use strict";M.d(Ee,{T:()=>k});var h=M(2202),O=M(576);function k(Y){return(0,O.m)(Y?.[h.h])}},8239:(Le,Ee,M)=>{"use strict";M.d(Ee,{t:()=>O});var h=M(576);function O(k){return(0,h.m)(k?.then)}},3260:(Le,Ee,M)=>{"use strict";M.d(Ee,{L:()=>Y,Q:()=>k});var h=M(655),O=M(576);function k(ie){return(0,h.FC)(this,arguments,function*(){const J=ie.getReader();try{for(;;){const{value:N,done:B}=yield(0,h.qq)(J.read());if(B)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(N)}}finally{J.releaseLock()}})}function Y(ie){return(0,O.m)(ie?.getReader)}},4482:(Le,Ee,M)=>{"use strict";M.d(Ee,{A:()=>O,e:()=>k});var h=M(576);function O(Y){return(0,h.m)(Y?.lift)}function k(Y){return ie=>{if(O(ie))return ie.lift(function(q){try{return Y(q,this)}catch(J){this.error(J)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Le,Ee,M)=>{"use strict";function h(){}M.d(Ee,{Z:()=>h})},9635:(Le,Ee,M)=>{"use strict";M.d(Ee,{U:()=>k,z:()=>O});var h=M(4671);function O(...Y){return k(Y)}function k(Y){return 0===Y.length?h.y:1===Y.length?Y[0]:function(q){return Y.reduce((J,N)=>N(J),q)}}},7849:(Le,Ee,M)=>{"use strict";M.d(Ee,{h:()=>k});var h=M(2416),O=M(3410);function k(Y){O.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw Y;ie(Y)})}},4532:(Le,Ee,M)=>{"use strict";function h(O){return new TypeError(`You provided ${null!==O&&"object"==typeof O?"an invalid object":`'${O}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(Ee,{z:()=>h})},655:(Le,Ee,M)=>{"use strict";function Y(z,te){var he={};for(var se in z)Object.prototype.hasOwnProperty.call(z,se)&&te.indexOf(se)<0&&(he[se]=z[se]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(z);Ne<se.length;Ne++)te.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(z,se[Ne])&&(he[se[Ne]]=z[se[Ne]])}return he}function N(z,te,he,se){return new(he||(he=Promise))(function(Re,Ge){function lt(De){try{Ie(se.next(De))}catch(Se){Ge(Se)}}function Ae(De){try{Ie(se.throw(De))}catch(Se){Ge(Se)}}function Ie(De){De.done?Re(De.value):function Ne(Re){return Re instanceof he?Re:new he(function(Ge){Ge(Re)})}(De.value).then(lt,Ae)}Ie((se=se.apply(z,te||[])).next())})}function ee(z){return this instanceof ee?(this.v=z,this):new ee(z)}function H(z,te,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=he.apply(z,te||[]),Re=[];return Ne={},Ge("next"),Ge("throw"),Ge("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Ge(et){se[et]&&(Ne[et]=function(Ze){return new Promise(function(Mt,Ye){Re.push([et,Ze,Mt,Ye])>1||lt(et,Ze)})})}function lt(et,Ze){try{!function Ae(et){et.value instanceof ee?Promise.resolve(et.value.v).then(Ie,De):Se(Re[0][2],et)}(se[et](Ze))}catch(Mt){Se(Re[0][3],Mt)}}function Ie(et){lt("next",et)}function De(et){lt("throw",et)}function Se(et,Ze){et(Ze),Re.shift(),Re.length&&lt(Re[0][0],Re[0][1])}}function _e(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,te=z[Symbol.asyncIterator];return te?te.call(z):(z=function F(z){var te="function"==typeof Symbol&&Symbol.iterator,he=te&&z[te],se=0;if(he)return he.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&se>=z.length&&(z=void 0),{value:z&&z[se++],done:!z}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),he={},se("next"),se("throw"),se("return"),he[Symbol.asyncIterator]=function(){return this},he);function se(Re){he[Re]=z[Re]&&function(Ge){return new Promise(function(lt,Ae){!function Ne(Re,Ge,lt,Ae){Promise.resolve(Ae).then(function(Ie){Re({value:Ie,done:lt})},Ge)}(lt,Ae,(Ge=z[Re](Ge)).done,Ge.value)})}}}M.d(Ee,{FC:()=>H,KL:()=>_e,_T:()=>Y,mG:()=>N,qq:()=>ee})},2480:()=>{},4650:(Le,Ee,M)=>{"use strict";M.d(Ee,{$8M:()=>ic,$Z:()=>Sh,AFp:()=>FD,ALo:()=>T_,AaK:()=>N,AsE:()=>Lc,BQk:()=>ha,CHM:()=>Bu,CRH:()=>O_,CZH:()=>lf,CqO:()=>Fp,D6c:()=>lw,DdM:()=>Qp,EJc:()=>T1,EpF:()=>UE,F4k:()=>Am,FYo:()=>Ny,FiY:()=>Kn,G48:()=>M1,GfV:()=>Zn,JOm:()=>ws,Jf7:()=>gp,KtG:()=>Vu,LFG:()=>Q,LSH:()=>Xg,Lbi:()=>UD,Lck:()=>__,MAs:()=>zh,MMx:()=>Kp,NdJ:()=>mv,OlP:()=>Sn,Oqu:()=>Av,PXZ:()=>jr,Q6J:()=>fu,QGY:()=>gv,QP$:()=>Jt,QbO:()=>BD,Qsj:()=>Kt,R0b:()=>As,RDi:()=>v,Rgc:()=>eg,SBq:()=>pp,Sil:()=>z_,Suo:()=>Kb,TTD:()=>us,TgZ:()=>Sm,VKq:()=>Ub,W1O:()=>sf,X6Q:()=>Y_,XFs:()=>ot,Xpm:()=>Ve,Xts:()=>em,Y36:()=>Dh,YKP:()=>e0,YNc:()=>dv,Yjl:()=>Ue,Yz7:()=>Ze,Z0I:()=>en,ZZ4:()=>L0,_UZ:()=>fv,_Vd:()=>fp,_c5:()=>cw,_uU:()=>Tv,aQg:()=>uw,c2e:()=>VD,cJS:()=>Ye,cg1:()=>od,dDg:()=>ff,dqk:()=>un,eFA:()=>yI,eoX:()=>Hc,f3M:()=>xe,g9A:()=>bu,h0i:()=>Bc,hGG:()=>CI,hij:()=>mu,iGM:()=>tg,ifc:()=>yt,ip1:()=>gd,jDz:()=>b_,kL8:()=>Hv,lG2:()=>ye,lcZ:()=>c0,lqb:()=>qi,lri:()=>pI,n5z:()=>ps,oAB:()=>zt,oxw:()=>_v,q4F:()=>Bt,qLn:()=>nt,qZA:()=>Tm,rWj:()=>T0,sBO:()=>P1,sIi:()=>kp,s_b:()=>h0,soG:()=>x0,tBr:()=>It,tb:()=>cI,tp0:()=>Si,uIk:()=>Np,vHH:()=>K,vpe:()=>ga,wAp:()=>Ct,xp6:()=>Tn,ynx:()=>da,z2F:()=>gf,zSh:()=>vh,zs3:()=>$l});var h=M(7579),O=M(727),k=M(9751),Y=M(6451),ie=M(3099);function q(s){for(let o in s)if(s[o]===q)return o;throw Error("Could not find renamed property on target object.")}function N(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(N).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function B(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const P=q({__forward_ref__:q});function R(s){return s.__forward_ref__=R,s.toString=function(){return N(this())},s}function F(s){return $(s)?s():s}function $(s){return"function"==typeof s&&s.hasOwnProperty(P)&&s.__forward_ref__===R}class K extends Error{constructor(o,a){super(function ve(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ee(s){return"string"==typeof s?s:null==s?"":String(s)}function ce(s,o){throw new K(-201,!1)}function Ae(s,o){null==s&&function Ie(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Ze(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ye(s){return{providers:s.providers||[],imports:s.imports||[]}}function wt(s){return Ln(s,Mr)||Ln(s,wr)}function en(s){return null!==wt(s)}function Ln(s,o){return s.hasOwnProperty(o)?s[o]:null}function Mn(s){return s&&(s.hasOwnProperty(ur)||s.hasOwnProperty(bi))?s[ur]:null}const Mr=q({\u0275prov:q}),ur=q({\u0275inj:q}),wr=q({ngInjectableDef:q}),bi=q({ngInjectorDef:q});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let jn;function hn(s){const o=jn;return jn=s,o}function $n(s,o,a){const c=wt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ot.Optional?null:void 0!==o?o:void ce(N(s))}function kn(s){return{toString:s}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const un=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zr={},Lt=[],Ii=q({\u0275cmp:q}),cn=q({\u0275dir:q}),fi=q({\u0275pipe:q}),tn=q({\u0275mod:q}),tr=q({\u0275fac:q}),Er=q({__NG_ELEMENT_ID__:q});let pt=0;function Ve(s){return kn(()=>{const a=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Lt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c"+pt++,styles:s.styles||Lt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,_=s.features;return d.inputs=ue(s.inputs,c),d.outputs=ue(s.outputs),_&&_.forEach(b=>b(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Nt).filter(Pt):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(gt).filter(Pt):null,d})}function Nt(s){return be(s)||Ke(s)}function Pt(s){return null!==s}function zt(s){return kn(()=>({type:s.type,bootstrap:s.bootstrap||Lt,declarations:s.declarations||Lt,imports:s.imports||Lt,exports:s.exports||Lt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ue(s,o){if(null==s)return zr;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}const ye=Ve;function Ue(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function be(s){return s[Ii]||null}function Ke(s){return s[cn]||null}function gt(s){return s[fi]||null}function Jt(s){const o=be(s)||Ke(s)||gt(s);return null!==o&&o.standalone}function _n(s,o){const a=s[tn]||null;if(!a&&!0===o)throw new Error(`Type ${N(s)} does not have '\u0275mod' property.`);return a}function Ir(s){return Array.isArray(s)&&"object"==typeof s[1]}function Xr(s){return Array.isArray(s)&&!0===s[1]}function Tu(s){return 0!=(8&s.flags)}function Ca(s){return 2==(2&s.flags)}function Jc(s){return 1==(1&s.flags)}function Gr(s){return null!==s.template}function xf(s){return 0!=(256&s[2])}function Fi(s,o){return s.hasOwnProperty(tr)?s[tr]:null}class as{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function us(){return no}function no(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ru),Da}function Da(){const s=Tf(this),o=s?.current;if(o){const a=s.previous;if(a===zr)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ru(s,o,a,c){const d=Tf(s)||function Fo(s,o){return s[il]=o}(s,{previous:zr,current:null}),g=d.current||(d.current={}),_=d.previous,b=this.declaredInputs[a],I=_[b];g[b]=new as(I&&I.currentValue,o,_===zr),s[c]=o}us.ngInherit=!0;const il="__ngSimpleChanges__";function Tf(s){return s[il]||null}function zn(s){for(;Array.isArray(s);)s=s[0];return s}function Wr(s,o){return zn(o[s.index])}function Uo(s,o){return s.data[o]}function ls(s,o){return s[o]}function rn(s,o){const a=o[s];return Ir(a)?a:a[0]}function ro(s){return 64==(64&s[2])}function Ci(s,o){return null==o?null:s[o]}function Ou(s){s[18]=0}function Bn(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const jt={lFrame:pl(null),bindingsEnabled:!0};function ds(){return jt.bindingsEnabled}function He(){return jt.lFrame.lView}function Xt(){return jt.lFrame.tView}function Bu(s){return jt.lFrame.contextLView=s,s[8]}function Vu(s){return jt.lFrame.contextLView=null,s}function Gn(){let s=Hu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Hu(){return jt.lFrame.currentTNode}function mi(s,o){const a=jt.lFrame;a.currentTNode=s,a.isParent=o}function Ta(){return jt.lFrame.isParent}function Aa(){jt.lFrame.isParent=!1}function Wn(){const s=jt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function io(){return jt.lFrame.bindingIndex++}function Tg(s,o){const a=jt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ju(o)}function ju(s){jt.lFrame.currentDirectiveIndex=s}function dl(){return jt.lFrame.currentQueryIndex}function Pa(s){jt.lFrame.currentQueryIndex=s}function hl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function $u(s,o,a){if(a&ot.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&ot.Host||(d=hl(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=jt.lFrame=fl();return c.currentTNode=o,c.lView=s,!0}function zu(s){const o=fl(),a=s[1];jt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function fl(){const s=jt.lFrame,o=null===s?null:s.child;return null===o?pl(s):o}function pl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function gl(){const s=jt.lFrame;return jt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pd=gl;function so(){const s=gl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dr(){return jt.lFrame.selectedIndex}function oi(s){jt.lFrame.selectedIndex=s}function Dn(){const s=jt.lFrame;return Uo(s.tView,s.selectedIndex)}function qu(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:U}=g;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),b&&((s.contentHooks||(s.contentHooks=[])).push(a,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,b)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=U&&(s.destroyHooks||(s.destroyHooks=[])).push(a,U)}}function ao(s,o,a){Ho(s,o,3,a)}function Vo(s,o,a,c){(3&s[2])===a&&Ho(s,o,a,c)}function Fd(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ho(s,o,a,c){const g=c??-1,_=o.length-1;let b=0;for(let I=void 0!==c?65535&s[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(b=o[I],null!=c&&b>=c)break}else o[I]<0&&(s[18]+=65536),(b<g||-1==g)&&(Ld(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Ld(s,o,a,c){const d=a[c]<0,g=a[c+1],b=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(b)}finally{}}}else try{g.call(b)}finally{}}class Vs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function jo(s,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],_=a[c++],b=a[c++];s.setAttribute(o,_,b,g)}else{const g=d,_=a[++c];Qu(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),c++}}return c}function lo(s){return 3===s||4===s||6===s}function Qu(s){return 64===s.charCodeAt(0)}function Na(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Bd(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function Bd(s,o,a,c,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const b=s[g++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=g-1;break}}}for(;g<s.length;){const b=s[g];if("number"==typeof b)break;if(b===a){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Vd(s){return-1!==s}function xr(s){return 32767&s}function Fa(s,o){let a=function Oa(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Ui=!0;function La(s){const o=Ui;return Ui=s,o}let nr=0;const Di={};function ho(s,o){const a=Ju(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ba(c.data,s),Ba(o,null),Ba(c.blueprint,null));const d=ec(s,o),g=s.injectorIndex;if(Vd(d)){const _=xr(d),b=Fa(d,o),I=b[1].data;for(let S=0;S<8;S++)o[g+S]=b[_+S]|I[_+S]}return o[g+8]=d,g}function Ba(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ju(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ec(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Go(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Hs(s,o,a){!function Xu(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Er)&&(c=a[Er]),null==c&&(c=a[Er]=nr++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function js(s,o,a){if(a&ot.Optional||void 0!==s)return s;ce()}function tc(s,o,a,c){if(a&ot.Optional&&void 0===c&&(c=null),0==(a&(ot.Self|ot.Host))){const d=s[9],g=hn(void 0);try{return d?d.get(o,c,a&ot.Optional):$n(o,c,a&ot.Optional)}finally{hn(g)}}return js(c,0,a)}function fo(s,o,a,c=ot.Default,d){if(null!==s){if(1024&o[2]){const _=function zo(s,o,a,c,d){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const b=Va(g,_,a,c|ot.Self,Di);if(b!==Di)return b;let I=g.parent;if(!I){const S=_[21];if(S){const U=S.get(a,Di,c);if(U!==Di)return U}I=Go(_),_=_[15]}g=I}return d}(s,o,a,c,Di);if(_!==Di)return _}const g=Va(s,o,a,c,Di);if(g!==Di)return g}return tc(o,a,c,d)}function Va(s,o,a,c,d){const g=function _l(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Er)?s[Er]:void 0;return"number"==typeof o?o>=0?255&o:wl:o}(a);if("function"==typeof g){if(!$u(o,s,c))return c&ot.Host?js(d,0,c):tc(o,a,c,d);try{const _=g(c);if(null!=_||c&ot.Optional)return _;ce()}finally{Pd()}}else if("number"==typeof g){let _=null,b=Ju(s,o),I=-1,S=c&ot.Host?o[16][6]:null;for((-1===b||c&ot.SkipSelf)&&(I=-1===b?ec(s,o):o[b+8],-1!==I&&Ha(c,!1)?(_=o[1],b=xr(I),o=Fa(I,o)):b=-1);-1!==b;){const U=o[1];if(nc(g,b,U.data)){const Z=$d(b,o,a,_,c,S);if(Z!==Di)return Z}I=o[b+8],-1!==I&&Ha(c,o[1].data[b+8]===S)&&nc(g,b,o)?(_=U,b=xr(I),o=Fa(I,o)):b=-1}}return d}function $d(s,o,a,c,d,g){const _=o[1],b=_.data[s+8],U=$o(b,_,a,null==c?Ca(b)&&Ui:c!=_&&0!=(3&b.type),d&ot.Host&&g===b);return null!==U?fs(o,_,U,b):Di}function $o(s,o,a,c,d){const g=s.providerIndexes,_=o.data,b=1048575&g,I=s.directiveStart,U=g>>20,ge=d?b+U:s.directiveEnd;for(let Ce=c?b:b+U;Ce<ge;Ce++){const Be=_[Ce];if(Ce<I&&a===Be||Ce>=I&&Be.type===a)return Ce}if(d){const Ce=_[I];if(Ce&&Gr(Ce)&&Ce.type===a)return I}return null}function fs(s,o,a,c){let d=s[a];const g=o.data;if(function uo(s){return s instanceof Vs}(d)){const _=d;_.resolving&&function X(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new K(-200,`Circular dependency in DI detected for ${s}${a}`)}(function H(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ee(s)}(g[a]));const b=La(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?hn(_.injectImpl):null;$u(s,c,ot.Default);try{d=s[a]=_.factory(void 0,g,s,c),o.firstCreatePass&&a>=c.directiveStart&&function Od(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const _=no(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==I&&hn(I),La(b),_.resolving=!1,Pd()}}return d}function nc(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ha(s,o){return!(s&ot.Self||s&ot.Host&&o)}class po{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return fo(this._tNode,this._lView,o,c,a)}}function wl(){return new po(Gn(),He())}function ps(s){return kn(()=>{const o=s.prototype.constructor,a=o[tr]||rc(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[tr]||rc(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function rc(s){return $(s)?()=>{const o=rc(F(s));return o&&o()}:Fi(s)}function Go(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function ic(s){return function jd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(lo(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(Gn(),s)}const $s="__parameters__";function Ko(s,o,a){return kn(()=>{const c=function sc(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const _=new d(...g);return b.annotation=_,b;function b(I,S,U){const Z=I.hasOwnProperty($s)?I[$s]:Object.defineProperty(I,$s,{value:[]})[$s];for(;Z.length<=U;)Z.push(null);return(Z[U]=Z[U]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ze({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function hr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),hr(c,o)):o!==s&&o.push(c)}return o}function ct(s,o){s.forEach(a=>Array.isArray(a)?ct(a,o):o(a))}function Rn(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Bi(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Fn={},mt="__NG_DI_FLAG__",$a="ngTempTokenPath",Qo=/\n/gm,za="__source";let x;function D(s){const o=x;return x=s,o}function L(s,o=ot.Default){if(void 0===x)throw new K(-203,!1);return null===x?$n(s,void 0,o):x.get(s,o&ot.Optional?null:void 0,o)}function Q(s,o=ot.Default){return(function er(){return jn}()||L)(F(s),o)}function xe(s,o=ot.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Q(s,o)}function je(s){const o=[];for(let a=0;a<s.length;a++){const c=F(s[a]);if(Array.isArray(c)){if(0===c.length)throw new K(900,!1);let d,g=ot.Default;for(let _=0;_<c.length;_++){const b=c[_],I=Et(b);"number"==typeof I?-1===I?d=b.token:g|=I:d=b}o.push(Q(d,g))}else o.push(Q(c))}return o}function We(s,o){return s[mt]=o,s.prototype[mt]=o,s}function Et(s){return s[mt]}const It=We(Ko("Inject",s=>({token:s})),-1),Kn=We(Ko("Optional"),8),Si=We(Ko("SkipSelf"),4);var ws=(()=>((ws=ws||{})[ws.Important=1]="Important",ws[ws.DashCase=2]="DashCase",ws))();const uc=new Map;let th=0;const _o="__ngContext__";function ti(s,o){Ir(o)?(s[_o]=o[20],function Or(s){uc.set(s[20],s)}(o)):s[_o]=o}function sh(s,o){return undefined(s,o)}function qa(s){const o=s[3];return Xr(o)?o[3]:o}function Al(s){return Jo(s[13])}function Rl(s){return Jo(s[4])}function Jo(s){for(;null!==s&&!Xr(s);)s=s[4];return s}function Gi(s,o,a,c,d){if(null!=c){let g,_=!1;Xr(c)?g=c:Ir(c)&&(_=!0,c=c[0]);const b=zn(c);0===s&&null!==a?null==d?lh(o,a,b):ta(o,a,b,d||null,!0):1===s&&null!==a?ta(o,a,b,d||null,!0):2===s?function dh(s,o,a){const c=wo(s,o);c&&function Xf(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,b,_):3===s&&o.destroyNode(b),null!=g&&function gc(s,o,a,c,d){const g=a[7];g!==zn(a)&&Gi(o,s,c,g,d);for(let b=10;b<a.length;b++){const I=a[b];pc(I[1],I,s,o,c,g)}}(o,s,g,a,d)}}function Lr(s,o,a){return s.createElement(o,a)}function uh(s,o){const a=s[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Bn(d,-1)),a.splice(c,1)}function Za(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&uh(d,c),o>0&&(s[a-1][4]=c[4]);const g=Bi(s,10+o);!function Hg(s,o){pc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=g[19];null!==_&&_.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function ch(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&pc(s,o,a,3,null,null),function jg(s){let o=s[13];if(!o)return kl(s[1],s);for(;o;){let a=null;if(Ir(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)Ir(o)&&kl(o[1],o),o=o[3];null===o&&(o=s),Ir(o)&&kl(o[1],o),a=o&&o[4]}o=a}}(o)}}function kl(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Pl(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Vs)){const g=a[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const b=d[g[_]],I=g[_+1];try{I.call(b)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Qf(s,o){const a=s.cleanup,c=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],b="function"==typeof _?_(o):zn(o[_]),I=c[d=a[g+2]],S=a[g+3];"boolean"==typeof S?b.removeEventListener(a[g],I,S):S>=0?c[d=S]():c[d=-S].unsubscribe(),g+=2}else{const _=c[d=a[g+1]];a[g].call(_)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Xr(o[3])){a!==o[3]&&uh(a,o);const c=o[19];null!==c&&c.detachView(s)}!function nh(s){uc.delete(s[20])}(o)}}function ea(s,o,a){return function Nl(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===yt.None||d===yt.Emulated)return null}return Wr(c,a)}(s,o.parent,a)}function ta(s,o,a,c,d){s.insertBefore(o,a,c,d)}function lh(s,o,a){s.appendChild(o,a)}function Ya(s,o,a,c,d){null!==c?ta(s,o,a,c,d):lh(s,o,a)}function wo(s,o){return s.parentNode(o)}let rp,Ol=function na(s,o,a){return 40&s.type?Wr(s,a):null};function Gs(s,o,a,c){const d=ea(s,c,o),g=o[11],b=function zg(s,o,a){return Ol(s,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Ya(g,d,a[I],b,!1);else Ya(g,d,a,b,!1)}function Ai(s,o){if(null!==o){const a=o.type;if(3&a)return Wr(o,s);if(4&a)return tp(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Ai(s,c);{const d=s[o.index];return Xr(d)?tp(-1,d):zn(d)}}if(32&a)return sh(o,s)()||zn(s[o.index]);{const c=ep(s,o);return null!==c?Array.isArray(c)?c[0]:Ai(qa(s[16]),c):Ai(s,o.next)}}return null}function ep(s,o){return null!==o?s[16][6].projection[o.projection]:null}function tp(s,o){const a=10+s+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Ai(c,d)}return o[7]}function hh(s,o,a,c,d,g,_){for(;null!=a;){const b=c[a.index],I=a.type;if(_&&0===o&&(b&&ti(zn(b),c),a.flags|=4),64!=(64&a.flags))if(8&I)hh(s,o,a.child,c,d,g,!1),Gi(o,s,d,b,g);else if(32&I){const S=sh(a,c);let U;for(;U=S();)Gi(o,s,d,U,g);Gi(o,s,d,b,g)}else 16&I?Wi(s,o,c,a,d,g):Gi(o,s,d,b,g);a=_?a.projectionNext:a.next}}function pc(s,o,a,c,d,g){hh(a,c,s.firstChild,o,d,g,!1)}function Wi(s,o,a,c,d,g){const _=a[16],I=_[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)Gi(o,s,d,I[S],g);else hh(s,o,I,_[3],d,g,!0)}function Es(s,o,a){s.setAttribute(o,"style",a)}function wn(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function v(s){rp=s}class Oe{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const ph=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ur=(()=>((Ur=Ur||{})[Ur.NONE=0]="NONE",Ur[Ur.HTML=1]="HTML",Ur[Ur.STYLE=2]="STYLE",Ur[Ur.SCRIPT=3]="SCRIPT",Ur[Ur.URL=4]="URL",Ur[Ur.RESOURCE_URL=5]="RESOURCE_URL",Ur))();function Xg(s){const o=function yh(){const s=He();return s&&s[12]}();return o?o.sanitize(Ur.URL,s)||"":function Ws(s,o){const a=function ip(s){return s instanceof Oe&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function gr(s){return s instanceof Oe?s.changingThisBreaksApplicationSecurity:s}(s):function Ja(s){return(s=String(s)).match(ph)?s:"unsafe:"+s}(ee(s))}const em=new Sn("ENVIRONMENT_INITIALIZER"),Ay=new Sn("INJECTOR",-1),Ry=new Sn("INJECTOR_DEF_TYPES");class dp{get(o,a=Fn){if(a===Fn){const c=new Error(`NullInjectorError: No provider for ${N(o)}!`);throw c.name="NullInjectorError",c}return a}}function xs(...s){return{\u0275providers:My(0,s)}}function My(s,...o){const a=[],c=new Set;let d;return ct(o,g=>{const _=g;yc(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&ky(d,a),a}function ky(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];ct(d,g=>{o.push(g)})}}function yc(s,o,a,c){if(!(s=F(s)))return!1;let d=null,g=Mn(s);const _=!g&&be(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const I=s.ngModule;if(g=Mn(I),!g)return!1;d=I}const b=c.has(d);if(_){if(b)return!1;if(c.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const S of I)yc(S,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!b){let S;c.add(d);try{ct(g.imports,U=>{yc(U,o,a,c)&&(S||(S=[]),S.push(U))})}finally{}void 0!==S&&ky(S,o)}if(!b){const S=Fi(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Lt},{provide:Ry,useValue:d,multi:!0},{provide:em,useValue:()=>Q(d),multi:!0})}const I=g.providers;null==I||b||ct(I,U=>{o.push(U)})}}return d!==s&&void 0!==s.providers}const Ox=q({provide:String,useValue:q});function hp(s){return null!==s&&"object"==typeof s&&Ox in s}function vc(s){return"function"==typeof s}const vh=new Sn("Set Injector scope."),tm={},tE={};let Br;function eu(){return void 0===Br&&(Br=new dp),Br}class qi{}class nm extends qi{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fe(o,_=>this.processProvider(_)),this.records.set(Ay,wc(void 0,this)),d.has("environment")&&this.records.set(qi,wc(void 0,this));const g=this.records.get(vh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ry.multi,Lt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=D(this),c=hn(void 0);try{return o()}finally{D(a),hn(c)}}get(o,a=Fn,c=ot.Default){this.assertNotDestroyed();const d=D(this),g=hn(void 0);try{if(!(c&ot.SkipSelf)){let b=this.records.get(o);if(void 0===b){const I=function Lx(s){return"function"==typeof s||"object"==typeof s&&s instanceof Sn}(o)&&wt(o);b=I&&this.injectableDefInScope(I)?wc(Py(o),tm):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&ot.Self?eu():this.parent).get(o,a=c&ot.Optional&&a===Fn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[$a]=_[$a]||[]).unshift(N(o)),d)throw _;return function Wt(s,o,a,c){const d=s[$a];throw o[za]&&d.unshift(o[za]),s.message=function Zt(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=N(o);if(Array.isArray(o))d=o.map(N).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];g.push(_+":"+("string"==typeof b?JSON.stringify(b):N(b)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(Qo,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[$a]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{hn(g),D(d)}}resolveInjectorInitializers(){const o=D(this),a=hn(void 0);try{const c=this.get(em.multi,Lt,ot.Self);for(const d of c)d()}finally{D(o),hn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(N(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(o){let a=vc(o=F(o))?o:F(o&&o.provide);const c=function Tr(s){return hp(s)?wc(void 0,s.useValue):wc(function _c(s,o,a){let c;if(vc(s)){const d=F(s);return Fi(d)||Py(d)}if(hp(s))c=()=>F(s.useValue);else if(function eE(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...je(s.deps||[]));else if(function Jw(s){return!(!s||!s.useExisting)}(s))c=()=>Q(F(s.useExisting));else{const d=F(s&&(s.useClass||s.provide));if(!function _t(s){return!!s.deps}(s))return Fi(d)||Py(d);c=()=>new d(...je(s.deps))}return c}(s),tm)}(o);if(vc(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=wc(void 0,tm,!0),d.factory=()=>je(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===tm&&(a.value=tE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function $t(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=F(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Py(s){const o=wt(s),a=null!==o?o.factory:Fi(s);if(null!==a)return a;if(s instanceof Sn)throw new K(204,!1);if(s instanceof Function)return function qe(s){const o=s.length;if(o>0)throw function gs(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new K(204,!1);const a=function yn(s){const o=s&&(s[Mr]||s[wr]);if(o){const a=function bn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new K(204,!1)}function wc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function at(s){return!!s.\u0275providers}function Fe(s,o){for(const a of s)Array.isArray(a)?Fe(a,o):at(a)?Fe(a.\u0275providers,o):o(a)}class Vr{}class Ux{resolveComponentFactory(o){throw function nE(s){const o=Error(`No component factory found for ${N(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let fp=(()=>{class s{}return s.NULL=new Ux,s})();function Bx(){return Ll(Gn(),He())}function Ll(s,o){return new pp(Wr(s,o))}let pp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Bx,s})();function e1(s){return s instanceof pp?s.nativeElement:s}class Ny{}let Kt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function _h(){const s=He(),a=rn(Gn().index,s);return(Ir(a)?a:s)[11]}(),s})(),iE=(()=>{class s{}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:()=>null}),s})();class Zn{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Bt=new Zn("14.2.12"),Ul={};function rr(s){return s.ngOriginalError}class nt{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&rr(o);for(;a&&rr(a);)a=rr(a);return a||null}}function gp(s){return s.ownerDocument.defaultView}function oa(s){return s instanceof Function?s():s}function ke(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}a=d+1}}const qs="ng-template";function Gx(s,o,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==ke(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function wh(s){return 4===s.type&&s.value!==qs}function Ec(s,o,a){return o===(4!==s.type||a?s.value:qs)}function Wx(s,o,a){let c=4;const d=s.attrs||[],g=function Kx(s){for(let o=0;o<s.length;o++)if(lo(s[o]))return o;return s.length}(d);let _=!1;for(let b=0;b<o.length;b++){const I=o[b];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!Ec(s,I,a)||""===I&&1===o.length){if(ci(c))return!1;_=!0}}else{const S=8&c?I:o[++b];if(8&c&&null!==s.attrs){if(!Gx(s.attrs,S,a)){if(ci(c))return!1;_=!0}continue}const Z=oE(8&c?"class":I,d,wh(s),a);if(-1===Z){if(ci(c))return!1;_=!0;continue}if(""!==S){let ge;ge=Z>g?"":d[Z+1].toLowerCase();const Ce=8&c?ge:null;if(Ce&&-1!==ke(Ce,S,0)||2&c&&S!==ge){if(ci(c))return!1;_=!0}}}}else{if(!_&&!ci(c)&&!ci(I))return!1;if(_&&ci(I))continue;_=!1,c=I|1&c}}return ci(c)||_}function ci(s){return 0==(1&s)}function oE(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let b=o[++d];for(;"string"==typeof b;)b=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function Ki(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function im(s,o,a=!1){for(let c=0;c<o.length;c++)if(Wx(s,o[c],a))return!0;return!1}function bc(s,o){return s?":not("+o.trim()+")":o}function uE(s){let o=s[0],a=1,c=2,d="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&c){const b=s[++a];d+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!ci(_)&&(o+=bc(g,d),d=""),c=_,g=g||!ci(c);a++}return""!==d&&(o+=bc(g,d)),o}const xt={};function Tn(s){Uy(Xt(),He(),dr()+s,!1)}function Uy(s,o,a,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ao(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Vo(o,g,0,a)}oi(a)}function By(s,o=null,a=null,c){const d=Eh(s,o,a,c);return d.resolveInjectorInitializers(),d}function Eh(s,o=null,a=null,c,d=new Set){const g=[a||Lt,xs(s)];return c=c||("object"==typeof s?void 0:N(s)),new nm(g,o||eu(),c||null,d)}let $l=(()=>{class s{static create(a,c){if(Array.isArray(a))return By({name:""},c,a,"");{const d=a.name??"";return By({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=Fn,s.NULL=new dp,s.\u0275prov=Ze({token:s,providedIn:"any",factory:()=>Q(Ay)}),s.__NG_ELEMENT_ID__=-1,s})();function Dh(s,o=ot.Default){const a=He();return null===a?Q(s,o):fo(Gn(),a,F(s),o)}function Sh(){throw new Error("invalid")}function Qn(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],g=a[c+1];if(-1!==g){const _=s.data[g];Pa(d),_.contentQueries(2,o[g],g)}}}function bp(s,o,a,c,d,g,_,b,I,S,U){const Z=o.blueprint.slice();return Z[0]=d,Z[2]=76|c,(null!==U||s&&1024&s[2])&&(Z[2]|=1024),Ou(Z),Z[3]=Z[15]=s,Z[8]=a,Z[10]=_||s&&s[10],Z[11]=b||s&&s[11],Z[12]=I||s&&s[12]||null,Z[9]=S||s&&s[9]||null,Z[6]=g,Z[20]=function Gf(){return th++}(),Z[21]=U,Z[16]=2==o.type?s[16]:Z,Z}function kh(s,o,a,c,d){let g=s.data[o];if(null===g)g=function Yl(s,o,a,c,d){const g=Hu(),_=Ta(),I=s.data[o]=function xE(s,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==g&&(_?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,a,c,d),function Sg(){return jt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const _=function Bo(){const s=jt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return mi(g,!0),g}function Ph(s,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function fm(s,o,a){zu(o);try{const c=s.viewQuery;null!==c&&_m(1,c,a);const d=s.template;null!==d&&ua(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Qn(s,o),s.staticViewQueries&&_m(2,s.viewQuery,a);const g=s.components;null!==g&&function hm(s,o){for(let a=0;a<o.length;a++)ME(s,o[a])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,so()}}function uu(s,o,a,c){const d=o[2];if(128!=(128&d)){zu(o);try{Ou(o),function cl(s){return jt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&ua(s,o,a,2,c);const _=3==(3&d);if(_){const S=s.preOrderCheckHooks;null!==S&&ao(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Vo(o,S,0,null),Fd(o,0)}if(function dC(s){for(let o=Al(s);null!==o;o=Rl(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],g=d[3];0==(512&d[2])&&Bn(g,1),d[2]|=512}}}(o),function RE(s){for(let o=Al(s);null!==o;o=Rl(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];ro(c)&&uu(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Qn(s,o),_){const S=s.contentCheckHooks;null!==S&&ao(o,S)}else{const S=s.contentHooks;null!==S&&Vo(o,S,1),Fd(o,1)}!function iC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)oi(~d);else{const g=d,_=a[++c],b=a[++c];Tg(_,g),b(2,o[g])}}}finally{oi(-1)}}(s,o);const b=s.components;null!==b&&function dm(s,o){for(let a=0;a<o.length;a++)ri(s,o[a])}(o,b);const I=s.viewQuery;if(null!==I&&_m(2,I,c),_){const S=s.viewCheckHooks;null!==S&&ao(o,S)}else{const S=s.viewHooks;null!==S&&Vo(o,S,2),Fd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Bn(o[3],-1))}finally{so()}}}function ua(s,o,a,c,d){const g=dr(),_=2&c;try{oi(-1),_&&o.length>22&&Uy(s,o,22,!1),a(c,d)}finally{oi(g)}}function tv(s,o,a){if(Tu(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function pm(s,o,a){!ds()||(function Qt(s,o,a,c){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||ho(a,o),ti(c,o);const _=a.initialInputs;for(let b=d;b<g;b++){const I=s.data[b],S=Gr(I);S&&uC(o,a,I);const U=fs(o,s,b,a);ti(U,o),null!==_&&cC(0,b-d,U,I,0,_),S&&(rn(a.index,o)[8]=U)}}(s,o,a,Wr(a,o)),128==(128&a.flags)&&function aC(s,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,_=function ll(){return jt.lFrame.currentDirectiveIndex}();try{oi(g);for(let b=c;b<d;b++){const I=s.data[b],S=o[b];ju(b),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&xp(I,S)}}finally{oi(-1),ju(_)}}(s,o,a))}function gm(s,o,a=Wr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],b=-1===_?a(o,s):s[_];s[d++]=b}}}function Ql(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ip(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ip(s,o,a,c,d,g,_,b,I,S){const U=22+c,Z=U+d,ge=function sC(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:xt);return a}(U,Z),Ce="function"==typeof S?S():S;return ge[1]={type:s,blueprint:ge,template:a,queries:null,viewQuery:b,declTNode:o,data:ge.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Ce,incompleteFirstPass:!1}}function nv(s,o,a,c){const d=sv(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&kE(s).push(c,d.length-1))}function cu(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function CE(s,o){const c=o.directiveEnd,d=s.data,g=o.attrs,_=[];let b=null,I=null;for(let S=o.directiveStart;S<c;S++){const U=d[S],Z=U.inputs,ge=null===g||wh(o)?null:lC(Z,g);_.push(ge),b=cu(Z,S,b),I=cu(U.outputs,S,I)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=b,o.outputs=I}function Nh(s,o){const a=rn(o,s);16&a[2]||(a[2]|=32)}function Xl(s,o,a,c){let d=!1;if(ds()){const g=function Cp(s,o,a){const c=s.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const _=c[g];im(a,_.selectors,!1)&&(d||(d=[]),Hs(ho(a,o),s,_.type),Gr(_)?(Oh(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===c?null:{"":-1};if(null!==g){d=!0,rv(a,s.data.length,g.length);for(let U=0;U<g.length;U++){const Z=g[U];Z.providersResolver&&Z.providersResolver(Z)}let b=!1,I=!1,S=Ph(s,o,g.length,null);for(let U=0;U<g.length;U++){const Z=g[U];a.mergedAttrs=Na(a.mergedAttrs,Z.hostAttrs),iv(s,a,o,S,Z),AE(S,Z,_),null!==Z.contentQueries&&(a.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(a.flags|=128);const ge=Z.type.prototype;!b&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),b=!0),!I&&(ge.ngOnChanges||ge.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),S++}CE(s,a)}_&&function mm(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new K(-301,!1);c.push(o[d],g)}}}(a,c,_)}return a.mergedAttrs=Na(a.mergedAttrs,a.attrs),d}function TE(s,o,a,c,d,g){const _=g.hostBindings;if(_){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const I=~o.index;(function oC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(b)!=I&&b.push(I),b.push(c,d,_)}}function xp(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Oh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function AE(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Gr(o)&&(a[""]=s)}}function rv(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function iv(s,o,a,c,d){s.data[c]=d;const g=d.factory||(d.factory=Fi(d.type)),_=new Vs(g,Gr(d),Dh);s.blueprint[c]=_,a[c]=_,TE(s,o,0,c,Ph(s,a,d.hostVars,xt),d)}function uC(s,o,a){const c=Wr(o,s),d=Ql(a),g=s[10],_=Ss(s,bp(s,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));s[o.index]=_}function Io(s,o,a,c,d,g){const _=Wr(s,o);!function ym(s,o,a,c,d,g,_){if(null==g)s.removeAttribute(o,d,a);else{const b=null==_?ee(g):_(g,c||"",d);s.setAttribute(o,d,b,a)}}(o[11],_,g,s.value,a,c,d)}function cC(s,o,a,c,d,g){const _=g[o];if(null!==_){const b=c.setInput;for(let I=0;I<_.length;){const S=_[I++],U=_[I++],Z=_[I++];null!==b?c.setInput(a,Z,S,U):a[U]=Z}}}function lC(s,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function Fh(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function ri(s,o){const a=rn(o,s);if(ro(a)){const c=a[1];48&a[2]?uu(c,a,c.template,a[8]):a[5]>0&&Dp(a)}}function Dp(s){for(let c=Al(s);null!==c;c=Rl(c))for(let d=10;d<c.length;d++){const g=c[d];if(ro(g))if(512&g[2]){const _=g[1];uu(_,g,_.template,g[8])}else g[5]>0&&Dp(g)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=rn(a[c],s);ro(d)&&d[5]>0&&Dp(d)}}function ME(s,o){const a=rn(o,s),c=a[1];(function Sp(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),fm(c,a,a[8])}function Ss(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Tp(s){for(;s;){s[2]|=32;const o=qa(s);if(xf(s)&&!o)return s;s=o}return null}function Ap(s,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{uu(s,o,s.template,a)}catch(_){throw c&&Lh(o,_),_}finally{d.end&&d.end()}}function _m(s,o,a){Pa(0),o(s,a)}function sv(s){return s[7]||(s[7]=[])}function kE(s){return s.cleanup||(s.cleanup=[])}function Lh(s,o){const a=s[9],c=a?a.get(nt,null):null;c&&c.handleError(o)}function Rp(s,o,a,c,d){for(let g=0;g<a.length;){const _=a[g++],b=a[g++],I=o[_],S=s.data[_];null!==S.setInput?S.setInput(I,d,c,b):I[b]=d}}function du(s,o,a){const c=function gi(s,o){return zn(o[s])}(o,s);!function hc(s,o,a){s.setValue(o,a)}(s[11],c,a)}function Mp(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?g=b:1==g?d=B(d,b):2==g&&(c=B(c,b+": "+o[++_]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}function Uh(s,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(zn(g)),Xr(g))for(let b=10;b<g.length;b++){const I=g[b],S=I[1].firstChild;null!==S&&Uh(I[1],I,S,c)}const _=a.type;if(8&_)Uh(s,o,a.child,c);else if(32&_){const b=sh(a,o);let I;for(;I=b();)c.push(I)}else if(16&_){const b=ep(o,a);if(Array.isArray(b))c.push(...b);else{const I=qa(o[16]);Uh(I[1],I,b,c,!0)}}a=d?a.projectionNext:a.next}return c}class Bh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Uh(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Xr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Za(o,c),Bi(a,c))}this._attachedToViewContainer=!1}ch(this._lView[1],this._lView)}onDestroy(o){nv(this._lView[1],this._lView,null,o)}markForCheck(){Tp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ap(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ah(s,o){pc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=o}}class fC extends Bh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ap(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class wm extends fp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=be(o);return new ca(a,this.ngModule)}}function NE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Vh{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,Ul,c);return d!==Ul||a===Ul?d:this.parentInjector.get(o,a,c)}}class ca extends Vr{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function mr(s){return s.map(uE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return NE(this.componentDef.inputs)}get outputs(){return NE(this.componentDef.outputs)}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof qi?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new Vh(o,g):o,b=_.get(Ny,null);if(null===b)throw new K(407,!1);const I=_.get(iE,null),S=b.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",Z=c?function mn(s,o,a){return s.selectRootElement(o,a===yt.ShadowDom)}(S,c,this.componentDef.encapsulation):Lr(S,U,function pC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(U)),ge=this.componentDef.onPush?288:272,Ce=Ip(0,null,null,1,0,null,null,null,null,null),Be=bp(null,Ce,null,ge,null,null,b,S,I,_,null);let Qe,it;zu(Be);try{const bt=function Ri(s,o,a,c,d,g){const _=a[1];a[22]=s;const I=kh(_,22,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(Mp(I,S,!0),null!==s&&(jo(d,s,S),null!==I.classes&&wn(d,s,I.classes),null!==I.styles&&Es(d,s,I.styles)));const U=c.createRenderer(s,o),Z=bp(a,Ql(o),null,o.onPush?32:16,a[22],I,c,U,g||null,null,null);return _.firstCreatePass&&(Hs(ho(I,a),_,o.type),Oh(_,I),rv(I,a.length,1)),Ss(a,Z),a[22]=Z}(Z,this.componentDef,Be,b,S);if(Z)if(c)jo(S,Z,["ng-version",Bt.full]);else{const{attrs:Ot,classes:$e}=function sm(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&a.push(g);else{if(!ci(d))break;d=g}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ot&&jo(S,Z,Ot),$e&&$e.length>0&&wn(S,Z,$e.join(" "))}if(it=Uo(Ce,22),void 0!==a){const Ot=it.projection=[];for(let $e=0;$e<this.ngContentSelectors.length;$e++){const Vt=a[$e];Ot.push(null!=Vt?Array.from(Vt):null)}}Qe=function vC(s,o,a,c){const d=a[1],g=function SE(s,o,a){const c=Gn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),iv(s,c,o,Ph(s,o,1,null),a),CE(s,c));const d=fs(o,s,c.directiveStart,c);ti(d,o);const g=Wr(c,o);return g&&ti(g,o),d}(d,a,o);if(s[8]=a[8]=g,null!==c)for(const b of c)b(g,o);if(o.contentQueries){const b=Gn();o.contentQueries(1,g,b.directiveStart)}const _=Gn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(oi(_.index),TE(a[1],_,0,_.directiveStart,_.directiveEnd,o),xp(o,g)),g}(bt,this.componentDef,Be,[OE]),fm(Ce,Be,null)}finally{so()}return new mC(this.componentType,Qe,Ll(it,Be),Be,it)}}class mC extends class ze{}{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new fC(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;Rp(g[1],g,d,o,a),Nh(g,this._tNode.index)}}get injector(){return new po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function OE(){const s=Gn();qu(He()[1],s)}let Im=null;function Jl(){if(!Im){const s=un.Symbol;if(s&&s.iterator)Im=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Im=c)}}}return Im}function kp(s){return!!av(s)&&(Array.isArray(s)||!(s instanceof Map)&&Jl()in s)}function av(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function la(s,o,a){return s[o]=a}function _i(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Np(s,o,a,c){const d=He();return _i(d,io(),o)&&(Xt(),Io(Dn(),d,s,o,a,c)),Np}function Rc(s,o,a,c,d,g){const b=function Tc(s,o,a,c){const d=_i(s,o,a);return _i(s,o+1,c)||d}(s,function Li(){return jt.lFrame.bindingIndex}(),a,d);return function hs(s){const o=jt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2),b?o+ee(a)+c+ee(d)+g:xt}function dv(s,o,a,c,d,g,_,b){const I=He(),S=Xt(),U=s+22,Z=S.firstCreatePass?function FE(s,o,a,c,d,g,_,b,I){const S=o.consts,U=kh(o,s,4,_||null,Ci(S,b));Xl(o,a,U,Ci(S,I)),qu(o,U);const Z=U.tViews=Ip(2,U,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,U),Z.queries=o.queries.embeddedTView(U)),U}(U,S,I,o,a,c,d,g,_):S.data[U];mi(Z,!1);const ge=I[11].createComment("");Gs(S,I,ge,Z),ti(ge,I),Ss(I,I[U]=Fh(ge,I,ge,Z)),Jc(Z)&&pm(S,I,Z),null!=_&&gm(I,Z,b)}function zh(s){return ls(function ul(){return jt.lFrame.contextLView}(),22+s)}function fu(s,o,a){const c=He();return _i(c,io(),o)&&function Qi(s,o,a,c,d,g,_,b){const I=Wr(o,a);let U,S=o.inputs;!b&&null!=S&&(U=S[c])?(Rp(s,a,U,c,d),Ca(o)&&Nh(a,o.index)):3&o.type&&(c=function Yi(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,g.setProperty(I,c,d))}(Xt(),Dn(),c,s,o,c[11],a,!1),fu}function hv(s,o,a,c,d){const _=d?"class":"style";Rp(s,a,o.inputs[_],_,c)}function Sm(s,o,a,c){const d=He(),g=Xt(),_=22+s,b=d[11],I=d[_]=Lr(b,o,function Wu(){return jt.lFrame.currentNamespace}()),S=g.firstCreatePass?function LE(s,o,a,c,d,g,_){const b=o.consts,S=kh(o,s,2,d,Ci(b,g));return Xl(o,a,S,Ci(b,_)),null!==S.attrs&&Mp(S,S.attrs,!1),null!==S.mergedAttrs&&Mp(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,g,d,0,o,a,c):g.data[_];mi(S,!0);const U=S.mergedAttrs;null!==U&&jo(b,I,U);const Z=S.classes;null!==Z&&wn(b,I,Z);const ge=S.styles;return null!==ge&&Es(b,I,ge),64!=(64&S.flags)&&Gs(g,d,I,S),0===function Lu(){return jt.lFrame.elementDepthCount}()&&ti(I,d),function Uu(){jt.lFrame.elementDepthCount++}(),Jc(S)&&(pm(g,d,S),tv(g,S,d)),null!==c&&gm(d,S),Sm}function Tm(){let s=Gn();Ta()?Aa():(s=s.parent,mi(s,!1));const o=s;!function sl(){jt.lFrame.elementDepthCount--}();const a=Xt();return a.firstCreatePass&&(qu(a,s),Tu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Yu(s){return 0!=(16&s.flags)}(o)&&hv(a,o,He(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ud(s){return 0!=(32&s.flags)}(o)&&hv(a,o,He(),o.stylesWithoutHost,!1),Tm}function fv(s,o,a,c){return Sm(s,o,a,c),Tm(),fv}function da(s,o,a){const c=He(),d=Xt(),g=s+22,_=d.firstCreatePass?function Op(s,o,a,c,d){const g=o.consts,_=Ci(g,c),b=kh(o,s,8,"ng-container",_);return null!==_&&Mp(b,_,!0),Xl(o,a,b,Ci(g,d)),null!==o.queries&&o.queries.elementStart(o,b),b}(g,d,c,o,a):d.data[g];mi(_,!0);const b=c[g]=c[11].createComment("");return Gs(d,c,b,_),ti(b,c),Jc(_)&&(pm(d,c,_),tv(d,_,c)),null!=a&&gm(c,_),da}function ha(){let s=Gn();const o=Xt();return Ta()?Aa():(s=s.parent,mi(s,!1)),o.firstCreatePass&&(qu(o,s),Tu(s)&&o.queries.elementEnd(s)),ha}function UE(){return He()}function gv(s){return!!s&&"function"==typeof s.then}function Am(s){return!!s&&"function"==typeof s.subscribe}const Fp=Am;function mv(s,o,a,c){const d=He(),g=Xt(),_=Gn();return function Up(s,o,a,c,d,g,_,b){const I=Jc(c),U=s.firstCreatePass&&kE(s),Z=o[8],ge=sv(o);let Ce=!0;if(3&c.type||b){const it=Wr(c,o),bt=b?b(it):it,Ot=ge.length,$e=b?En=>b(zn(En[c.index])):c.index;let Vt=null;if(!b&&I&&(Vt=function Lp(s,o,a,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===c){const b=o[7],I=d[g+2];return b.length>I?b[I]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=g,Vt.__ngLastListenerFn__=g,Ce=!1;else{g=vv(c,o,Z,g,!1);const En=a.listen(bt,d,g);ge.push(g,En),U&&U.push(d,$e,Ot,Ot+1)}}else g=vv(c,o,Z,g,!1);const Be=c.outputs;let Qe;if(Ce&&null!==Be&&(Qe=Be[d])){const it=Qe.length;if(it)for(let bt=0;bt<it;bt+=2){const Hn=o[Qe[bt]][Qe[bt+1]].subscribe(g),yd=ge.length;ge.push(g,Hn),U&&U.push(d,c.index,yd,-(yd+1))}}}(g,d,d[11],_,s,o,0,c),mv}function Gh(s,o,a,c){try{return!1!==a(c)}catch(d){return Lh(s,d),!1}}function vv(s,o,a,c,d){return function g(_){if(_===Function)return c;Tp(2&s.flags?rn(s.index,o):o);let I=Gh(o,0,c,_),S=g.__ngNextListenerFn__;for(;S;)I=Gh(o,0,S,_)&&I,S=S.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function _v(s=1){return function oo(s){return(jt.lFrame.contextLView=function Gu(s,o){for(;s>0;)o=o[15],s--;return o}(s,jt.lFrame.contextLView))[8]}(s)}function Tv(s,o=""){const a=He(),c=Xt(),d=s+22,g=c.firstCreatePass?kh(c,d,1,o,null):c.data[d],_=a[d]=function oh(s,o){return s.createText(o)}(a[11],o);Gs(c,a,_,g),mi(g,!1)}function Av(s){return mu("",s,""),Av}function mu(s,o,a){const c=He(),d=function Ac(s,o,a,c){return _i(s,io(),a)?o+ee(a)+c:xt}(c,s,o,a);return d!==xt&&du(c,dr(),d),mu}function Lc(s,o,a,c,d){const g=He(),_=Rc(g,s,o,a,c,d);return _!==xt&&du(g,dr(),_),Lc}const So=void 0;var Kh=["en",[["a","p"],["AM","PM"],So],[["AM","PM"],So,So],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],So,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],So,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",So,"{1} 'at' {0}",So],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bv(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Uc={};function od(s){const o=function gb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Hm(o);if(a)return a;const c=o.split("-")[0];if(a=Hm(c),a)return a;if("en"===c)return Kh;throw new K(701,!1)}function Hv(s){return od(s)[Ct.PluralCase]}function Hm(s){return s in Uc||(Uc[s]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[s]),Uc[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const Zh="en-US";let zv=Zh;class Bc{}class e0{}function __(s,o){return new w_(s,o??null)}class w_ extends Bc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wm(this);const c=_n(o);this._bootstrapComponents=oa(c.bootstrap),this._r3Injector=Eh(o,a,[{provide:Bc,useValue:this},{provide:fp,useValue:this.componentFactoryResolver}],N(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class t0 extends e0{constructor(o){super(),this.moduleType=o}create(o){return new w_(this.moduleType,o)}}class cD extends Bc{constructor(o,a,c){super(),this.componentFactoryResolver=new wm(this),this.instance=null;const d=new nm([...o,{provide:Bc,useValue:this},{provide:fp,useValue:this.componentFactoryResolver}],a||eu(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Kp(s,o,a=null){return new cD(s,o,a).injector}let E_=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=My(0,a.type),d=c.length>0?Kp([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Ze({token:s,providedIn:"environment",factory:()=>new s(Q(qi))}),s})();function b_(s){s.getStandaloneInjector=o=>o.get(E_).getOrCreateStandaloneInjector(s)}function Qp(s,o,a){const c=Wn()+s,d=He();return d[c]===xt?la(d,c,a?o.call(a):o()):function Hh(s,o){return s[o]}(d,c)}function Ub(s,o,a,c){return r0(He(),Wn(),s,o,a,c)}function r0(s,o,a,c,d,g){const _=o+a;return _i(s,_,d)?la(s,_+1,g?c.call(g,d):c(d)):function nf(s,o){const a=s[o];return a===xt?void 0:a}(s,_+1)}function T_(s,o){const a=Xt();let c;const d=s+22;a.firstCreatePass?(c=function u0(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const g=c.factory||(c.factory=Fi(c.type)),_=hn(Dh);try{const b=La(!1),I=g();return La(b),function Dm(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,He(),d,I),I}finally{hn(_)}}function c0(s,o,a){const c=s+22,d=He(),g=ls(d,c);return function Jp(s,o){return s[1].data[o].pure}(d,c)?r0(d,Wn(),o,g.transform,a,g):g.transform(a)}function l0(s){return o=>{setTimeout(s,void 0,o)}}const ga=class vD extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),_=c;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),g=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(g=l0(g),d&&(d=l0(d)),_&&(_=l0(_)));const b=super.subscribe({next:d,error:g,complete:_});return o instanceof O.w0&&o.add(b),b}};function jb(){return this._results[Jl()]()}class R_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Jl(),c=R_.prototype;c[a]||(c[a]=jb)}get changes(){return this._changes||(this._changes=new ga)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=hr(o);(this._changesDetected=!function pn(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let eg=(()=>{class s{}return s.__NG_ELEMENT_ID__=M_,s})();const _D=eg,wD=class extends _D{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=bp(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),fm(c,d,o),new Bh(d)}};function M_(){return d0(Gn(),He())}function d0(s,o){return 4&s.type?new wD(o,s,Ll(s,o)):null}let h0=(()=>{class s{}return s.__NG_ELEMENT_ID__=Jn,s})();function Jn(){return $b(Gn(),He())}const p1=h0,ED=class extends p1{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Ll(this._hostTNode,this._hostLView)}get injector(){return new po(this._hostTNode,this._hostLView)}get parentInjector(){const o=ec(this._hostTNode,this._hostLView);if(Vd(o)){const a=Fa(o,this._hostLView),c=xr(o);return new po(a[1].data[c+8],a)}return new po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=_r(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,d),_}createComponent(o,a,c,d,g){const _=o&&!function mo(s){return"function"==typeof s}(o);let b;if(_)b=a;else{const Z=a||{};b=Z.index,c=Z.injector,d=Z.projectableNodes,g=Z.environmentInjector||Z.ngModuleRef}const I=_?o:new ca(be(o)),S=c||this.parentInjector;if(!g&&null==I.ngModule){const ge=(_?S:this.parentInjector).get(qi,null);ge&&(g=ge)}const U=I.create(S,d,void 0,g);return this.insert(U.hostView,b),U}insert(o,a){const c=o._lView,d=c[1];if(function Nu(s){return Xr(s[3])}(c)){const U=this.indexOf(o);if(-1!==U)this.detach(U);else{const Z=c[3],ge=new ED(Z,Z[6],Z[3]);ge.detach(ge.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function Ka(s,o,a,c){const d=10+c,g=a.length;c>0&&(a[d-1][4]=o),c<g-10?(o[4]=a[d],Rn(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function $g(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=64}(d,c,_,g);const b=tp(g,_),I=c[11],S=wo(I,_[7]);return null!==S&&function Ml(s,o,a,c,d,g){c[0]=d,c[6]=o,pc(s,c,a,1,d,g)}(d,_[6],I,c,S,b),o.attachToViewContainerRef(),Rn(f0(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=_r(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Za(this._lContainer,a);c&&(Bi(f0(this._lContainer),a),ch(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Za(this._lContainer,a);return c&&null!=Bi(f0(this._lContainer),a)?new Bh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function _r(s){return s[8]}function f0(s){return s[8]||(s[8]=[])}function $b(s,o){let a;const c=o[s.index];if(Xr(c))a=c;else{let d;if(8&s.type)d=zn(c);else{const g=o[11];d=g.createComment("");const _=Wr(s,o);ta(g,wo(g,_),d,function Jf(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=Fh(c,o,d,s),Ss(o,a)}return new ED(a,s,o)}class k_{constructor(o){this.queryList=o,this.matches=null}clone(){return new k_(this.queryList)}setDirty(){this.queryList.setDirty()}}class P_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new P_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==rg(o,a).matches&&this.queries[a].setDirty()}}class Gb{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Wb{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new Wb(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class N_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new N_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,ID(a,g)),this.matchTNodeWithReadOption(o,a,$o(a,o,g,!1,!1))}else c===eg?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,$o(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===pp||d===h0||d===eg&&4&a.type)this.addMatch(a.index,-2);else{const g=$o(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ID(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function ma(s,o,a,c){return-1===a?function qb(s,o){return 11&s.type?Ll(s,o):4&s.type?d0(s,o):null}(o,s):-2===a?function vu(s,o,a){return a===pp?Ll(o,s):a===eg?d0(o,s):a===h0?$b(o,s):void 0}(s,o,c):fs(s,s[1],a,o)}function xD(s,o,a,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,_=a.matches,b=[];for(let I=0;I<_.length;I+=2){const S=_[I];b.push(S<0?null:ma(o,g[S],_[I+1],a.metadata.read))}d.matches=b}return d.matches}function _u(s,o,a,c){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const _=xD(s,o,d,a);for(let b=0;b<g.length;b+=2){const I=g[b];if(I>0)c.push(_[b/2]);else{const S=g[b+1],U=o[-I];for(let Z=10;Z<U.length;Z++){const ge=U[Z];ge[17]===ge[3]&&_u(ge[1],ge,S,c)}if(null!==U[9]){const Z=U[9];for(let ge=0;ge<Z.length;ge++){const Ce=Z[ge];_u(Ce[1],Ce,S,c)}}}}}return c}function tg(s){const o=He(),a=Xt(),c=dl();Pa(c+1);const d=rg(a,c);if(s.dirty&&function Pu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?_u(a,o,c,[]):xD(a,o,d,c);s.reset(g,e1),s.notifyOnChanges()}return!0}return!1}function Kb(s,o,a,c){const d=Xt();if(d.firstCreatePass){const g=Gn();(function Yb(s,o,a){null===s.queries&&(s.queries=new Wb),s.queries.track(new N_(o,a))})(d,new Gb(o,a,c),g.index),function dd(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function ng(s,o,a){const c=new R_(4==(4&a));nv(s,o,c,c.destroy),null===o[19]&&(o[19]=new P_),o[19].queries.push(new k_(c))}(d,He(),a)}function O_(){return function Zb(s,o){return s[19].queries[o].queryList}(He(),dl())}function rg(s,o){return s.queries.getByIndex(o)}function sf(s,o){return d0(s,o)}function ig(...s){}const gd=new Sn("Application Initializer");let lf=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ig,this.reject=ig,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(gv(g))a.push(g);else if(Fp(g)){const _=new Promise((b,I)=>{g.subscribe({complete:b,error:I})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Q(gd,8))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const FD=new Sn("AppId",{providedIn:"root",factory:function LD(){return`${I0()}${I0()}${I0()}`}});function I0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bu=new Sn("Platform Initializer"),UD=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cI=new Sn("appBootstrapListener"),BD=new Sn("AnimationModuleType");let VD=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const x0=new Sn("LocaleId",{providedIn:"root",factory:()=>xe(x0,ot.Optional|ot.SkipSelf)||function HD(){return typeof $localize<"u"&&$localize.locale||Zh}()}),T1=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $D{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let z_=(()=>{class s{compileModuleSync(a){return new t0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=oa(_n(a).declarations).reduce((_,b)=>{const I=be(b);return I&&_.push(new ca(I)),_},[]);return new $D(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const D0=(()=>Promise.resolve(0))();function G_(s){typeof Zone>"u"?D0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class As{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ga(!1),this.onMicrotaskEmpty=new ga(!1),this.onStable=new ga(!1),this.onError=new ga(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hI(){let s=un.requestAnimationFrame,o=un.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function fI(s){const o=()=>{!function ki(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(un,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,S0(s),s.isCheckStableRunning=!0,es(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),S0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,_,b)=>{try{return df(s),a.invokeTask(d,g,_,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),hf(s)}},onInvoke:(a,c,d,g,_,b,I)=>{try{return df(s),a.invoke(d,g,_,b,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),hf(s)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,S0(s),es(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!As.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(As.isInAngularZone())throw new K(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,md,ig,ig);try{return g.runTask(_,a,c)}finally{g.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const md={};function es(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function S0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function df(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hf(s){s._nesting--,es(s)}class Pi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ga,this.onMicrotaskEmpty=new ga,this.onStable=new ga,this.onError=new ga}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const pI=new Sn(""),T0=new Sn("");let Iu,ff=(()=>{class s{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Iu||(function W_(s){Iu=s}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{As.assertNotInAngularZone(),G_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Q(As),Q(Hc),Q(T0))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac}),s})(),Hc=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Iu?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),jc=null;const gI=new Sn("AllowMultipleToken"),q_=new Sn("PlatformDestroyListeners");class jr{constructor(o,a){this.name=o,this.token=a}}function yI(s,o,a=[]){const c=`Platform: ${o}`,d=new Sn(c);return(g=[])=>{let _=pf();if(!_||_.injector.get(gI,!1)){const b=[...a,...g,{provide:d,useValue:!0}];s?s(b):function WD(s){if(jc&&!jc.get(gI,!1))throw new K(400,!1);jc=s;const o=s.get(K_);(function mI(s){const o=s.get(bu,null);o&&o.forEach(a=>a())})(s)}(function $c(s=[],o){return $l.create({name:o,providers:[{provide:vh,useValue:"platform"},{provide:q_,useValue:new Set([()=>jc=null])},...s]})}(b,c))}return function og(s){const o=pf();if(!o)throw new K(401,!1);return o}()}}function pf(){return jc?.get(K_)??null}let K_=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function va(s,o){let a;return a="noop"===s?new Pi:("zone.js"===s?void 0:s)||new As(o),a}(c?.ngZone,function vI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:As,useValue:d}];return d.run(()=>{const _=$l.create({providers:g,parent:this.injector,name:a.moduleType.name}),b=a.create(_),I=b.injector.get(nt,null);if(!I)throw new K(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:U=>{I.handleError(U)}});b.onDestroy(()=>{ag(this._modules,b),S.unsubscribe()})}),function k0(s,o,a){try{const c=a();return gv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,d,()=>{const S=b.injector.get(lf);return S.runInitializers(),S.donePromise.then(()=>(function ad(s){Ae(s,"Expected localeId to be defined"),"string"==typeof s&&(zv=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(x0,Zh)||Zh),this._moduleDoBootstrap(b),b))})})}bootstrapModule(a,c=[]){const d=Z_({},c);return function GD(s,o,a){const c=new t0(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(gf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new K(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(q_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Q($l))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Z_(s,o){return Array.isArray(o)?o.reduce(Z_,s):{...s,...o}}let gf=(()=>{class s{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),_=new k.y(b=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{As.assertNotInAngularZone(),G_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{As.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,Y.T)(g,_.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Vr;if(!this._injector.get(lf).done)throw!d&&Jt(a),new K(405,false);let _;_=d?a:this._injector.get(fp).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const b=function R0(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Bc),S=_.create($l.NULL,[],c||_.selector,b),U=S.location.nativeElement,Z=S.injector.get(pI,null);return Z?.registerApplication(U),S.onDestroy(()=>{this.detachView(S.hostView),ag(this.components,S),Z?.unregisterApplication(U)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ag(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(cI,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ag(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new K(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Q(As),Q(qi),Q(nt))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ag(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let YD=!0,_I=!1;function Y_(){return _I=!0,YD}function M1(){if(_I)throw new Error("Cannot enable prod mode after platform setup.");YD=!1}let P1=(()=>{class s{}return s.__NG_ELEMENT_ID__=N1,s})();function N1(s){return function O1(s,o,a){if(Ca(s)&&!a){const c=rn(s.index,o);return new Bh(c,c)}return 47&s.type?new Bh(o[16],o):null}(Gn(),He(),16==(16&s))}class nw{constructor(){}supports(o){return kp(o)}create(o){return new F0(o)}}const rw=(s,o)=>o;class F0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||rw}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const _=!c||a&&a.currentIndex<II(c,d,g)?a:c,b=II(_,d,g),I=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const S=b-d,U=I-d;if(S!=U){for(let ge=0;ge<S;ge++){const Ce=ge<g.length?g[ge]:g[ge]=0,Be=Ce+ge;U<=Be&&Be<S&&(g[ge]=Ce+1)}g[_.previousIndex]=U-S}}b!==I&&o(_,b,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!kp(o))throw new K(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)g=o[b],_=this._trackByFn(b,g),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,g,_,b)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,b),c=!0),a=a._next}else d=0,function DC(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Jl()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,b=>{_=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,b,_,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new iw(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new bI),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class iw{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class bI{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new sw,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function II(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class xI{constructor(){}supports(o){return o instanceof Map||av(o)}create(){return new JD}}class JD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||av(o)))throw new K(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const c=new eS(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class eS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mf(){return new L0([new nw])}let L0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||mf()),deps:[[s,new Si,new Kn]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new K(901,!1)}}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:mf}),s})();function aw(){return new uw([new xI])}let uw=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||aw()),deps:[[s,new Si,new Kn]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new K(901,!1)}}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:aw}),s})();const cw=yI(null,"core",[]);let CI=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Q(gf))},s.\u0275mod=zt({type:s}),s.\u0275inj=Ye({}),s})();function lw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Le,Ee,M)=>{"use strict";M.d(Ee,{Z:()=>K});var h=M(2090),O=M(4859),k=M(9681),Y=M(1877);class ie{constructor(ee,H){this._delegate=ee,this.firebase=H,(0,k._addComponent)(ee,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this._delegate.automaticDataCollectionEnabled=ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ee=>{this._delegate.checkDestroyed(),ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ee,H=k._DEFAULT_ENTRY_NAME){var X;this._delegate.checkDestroyed();const _e=this._delegate.container.getProvider(ee);return!_e.isInitialized()&&"EXPLICIT"===(null===(X=_e.getComponent())||void 0===X?void 0:X.instantiationMode)&&_e.initialize(),_e.getImmediate({identifier:H})}_removeServiceInstance(ee,H=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ee).clearInstance(H)}_addComponent(ee){(0,k._addComponent)(this._delegate,ee)}_addOrOverwriteComponent(ee){(0,k._addOrOverwriteComponent)(this._delegate,ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const J=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function B(){const ve=function N(ve){const ee={},H={__esModule:!0,initializeApp:function ae(le,j={}){const pe=k.initializeApp(le,j);if((0,h.r3)(ee,pe.name))return ee[pe.name];const z=new ve(pe,H);return ee[pe.name]=z,z},app:_e,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function re(le){const j=le.name,pe=j.replace("-compat","");if(k._registerComponent(le)&&"PUBLIC"===le.type){const z=(te=_e())=>{if("function"!=typeof te[pe])throw J.create("invalid-app-argument",{appName:j});return te[pe]()};void 0!==le.serviceProps&&(0,h.ZB)(z,le.serviceProps),H[pe]=z,ve.prototype[pe]=function(...te){return this._getService.bind(this,j).apply(this,le.multipleInstances?te:[])}}return"PUBLIC"===le.type?H[pe]:null},removeApp:function X(le){delete ee[le]},useAsService:function ne(le,j){return"serverAuth"===j?null:j},modularAPIs:k}};function _e(le){if(!(0,h.r3)(ee,le=le||k._DEFAULT_ENTRY_NAME))throw J.create("no-app",{appName:le});return ee[le]}return H.default=H,Object.defineProperty(H,"apps",{get:function ce(){return Object.keys(ee).map(le=>ee[le])}}),_e.App=ve,H}(ie);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function ee(H){(0,h.ZB)(ve,H)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ve}(),R=new Y.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){R.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&R.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const K=P;!function G(ve){(0,k.registerVersion)("@firebase/app-compat","0.1.39",ve)}()},9681:(Le,Ee,M)=>{"use strict";M.r(Ee),M.d(Ee,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>Mn,_DEFAULT_ENTRY_NAME:()=>Ae,_addComponent:()=>et,_addOrOverwriteComponent:()=>Ze,_apps:()=>De,_clearComponents:()=>en,_components:()=>Se,_getProvider:()=>Ye,_registerComponent:()=>Mt,_removeServiceInstance:()=>wt,deleteApp:()=>bi,getApp:()=>ur,getApps:()=>wr,initializeApp:()=>Mr,onLog:()=>er,registerVersion:()=>jn,setLogLevel:()=>hn});var h=M(5861),O=M(4859),k=M(1877),Y=M(2090),ie=M(8766);class q{constructor(Ve){this.container=Ve}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function J(pt){return"VERSION"===pt.getComponent()?.type}(ht)){const Nt=ht.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(ht=>ht).join(" ")}}const N="@firebase/app",B="0.8.4",P=new k.Yd("@firebase/app"),Ae="[DEFAULT]",Ie={[N]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},De=new Map,Se=new Map;function et(pt,Ve){try{pt.container.addComponent(Ve)}catch(ht){P.debug(`Component ${Ve.name} failed to register with FirebaseApp ${pt.name}`,ht)}}function Ze(pt,Ve){pt.container.addOrOverwriteComponent(Ve)}function Mt(pt){const Ve=pt.name;if(Se.has(Ve))return P.debug(`There were multiple attempts to register component ${Ve}.`),!1;Se.set(Ve,pt);for(const ht of De.values())et(ht,pt);return!0}function Ye(pt,Ve){const ht=pt.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),pt.container.getProvider(Ve)}function wt(pt,Ve,ht=Ae){Ye(pt,Ve).clearInstance(ht)}function en(){Se.clear()}const yn=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bn{constructor(Ve,ht,Nt){this._isDeleted=!1,this._options=Object.assign({},Ve),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ve){this._isDeleted=Ve}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const Mn="9.14.0";function Mr(pt,Ve={}){let ht=pt;"object"!=typeof Ve&&(Ve={name:Ve});const Nt=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},Ve),Pt=Nt.name;if("string"!=typeof Pt||!Pt)throw yn.create("bad-app-name",{appName:String(Pt)});if(ht||(ht=(0,Y.aH)()),!ht)throw yn.create("no-options");const zt=De.get(Pt);if(zt){if((0,Y.vZ)(ht,zt.options)&&(0,Y.vZ)(Nt,zt.config))return zt;throw yn.create("duplicate-app",{appName:Pt})}const fe=new O.H0(Pt);for(const ye of Se.values())fe.addComponent(ye);const ue=new bn(ht,Nt,fe);return De.set(Pt,ue),ue}function ur(pt=Ae){const Ve=De.get(pt);if(!Ve&&pt===Ae)return Mr();if(!Ve)throw yn.create("no-app",{appName:pt});return Ve}function wr(){return Array.from(De.values())}function bi(pt){return ot.apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(pt){const Ve=pt.name;De.has(Ve)&&(De.delete(Ve),yield Promise.all(pt.container.getProviders().map(ht=>ht.delete())),pt.isDeleted=!0)})).apply(this,arguments)}function jn(pt,Ve,ht){var Nt;let Pt=null!==(Nt=Ie[pt])&&void 0!==Nt?Nt:pt;ht&&(Pt+=`-${ht}`);const zt=Pt.match(/\s|\//),fe=Ve.match(/\s|\//);if(zt||fe){const ue=[`Unable to register library "${Pt}" with version "${Ve}":`];return zt&&ue.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),zt&&fe&&ue.push("and"),fe&&ue.push(`version name "${Ve}" contains illegal characters (whitespace or "/")`),void P.warn(ue.join(" "))}Mt(new O.wA(`${Pt}-version`,()=>({library:Pt,version:Ve}),"VERSION"))}function er(pt,Ve){if(null!==pt&&"function"!=typeof pt)throw yn.create("invalid-log-argument");(0,k.Am)(pt,Ve)}function hn(pt){(0,k.Ub)(pt)}const kn="firebase-heartbeat-store";let xn=null;function fn(){return xn||(xn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(pt,Ve)=>{0===Ve&&pt.createObjectStore(kn)}}).catch(pt=>{throw yn.create("idb-open",{originalErrorMessage:pt.message})})),xn}function yt(){return(yt=(0,h.Z)(function*(pt){var Ve;try{return(yield fn()).transaction(kn).objectStore(kn).get(Cn(pt))}catch(ht){if(ht instanceof Y.ZR)P.warn(ht.message);else{const Nt=yn.create("idb-get",{originalErrorMessage:null===(Ve=ht)||void 0===Ve?void 0:Ve.message});P.warn(Nt.message)}}})).apply(this,arguments)}function un(pt,Ve){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(pt,Ve){var ht;try{const Pt=(yield fn()).transaction(kn,"readwrite");return yield Pt.objectStore(kn).put(Ve,Cn(pt)),Pt.done}catch(Nt){if(Nt instanceof Y.ZR)P.warn(Nt.message);else{const Pt=yn.create("idb-set",{originalErrorMessage:null===(ht=Nt)||void 0===ht?void 0:ht.message});P.warn(Pt.message)}}})).apply(this,arguments)}function Cn(pt){return`${pt.name}!${pt.options.appId}`}class Ii{constructor(Ve){this.container=Ve,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new tn(ht),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var Ve=this;return(0,h.Z)(function*(){const Nt=Ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=cn();if(null===Ve._heartbeatsCache&&(Ve._heartbeatsCache=yield Ve._heartbeatsCachePromise),Ve._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Ve._heartbeatsCache.heartbeats.some(zt=>zt.date===Pt))return Ve._heartbeatsCache.heartbeats.push({date:Pt,agent:Nt}),Ve._heartbeatsCache.heartbeats=Ve._heartbeatsCache.heartbeats.filter(zt=>{const fe=new Date(zt.date).valueOf();return Date.now()-fe<=2592e6}),Ve._storage.overwrite(Ve._heartbeatsCache)})()}getHeartbeatsHeader(){var Ve=this;return(0,h.Z)(function*(){if(null===Ve._heartbeatsCache&&(yield Ve._heartbeatsCachePromise),null===Ve._heartbeatsCache||0===Ve._heartbeatsCache.heartbeats.length)return"";const ht=cn(),{heartbeatsToSend:Nt,unsentEntries:Pt}=function fi(pt,Ve=1024){const ht=[];let Nt=pt.slice();for(const Pt of pt){const zt=ht.find(fe=>fe.agent===Pt.agent);if(zt){if(zt.dates.push(Pt.date),tr(ht)>Ve){zt.dates.pop();break}}else if(ht.push({agent:Pt.agent,dates:[Pt.date]}),tr(ht)>Ve){ht.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:Nt}}(Ve._heartbeatsCache.heartbeats),zt=(0,Y.L)(JSON.stringify({version:2,heartbeats:Nt}));return Ve._heartbeatsCache.lastSentHeartbeatDate=ht,Pt.length>0?(Ve._heartbeatsCache.heartbeats=Pt,yield Ve._storage.overwrite(Ve._heartbeatsCache)):(Ve._heartbeatsCache.heartbeats=[],Ve._storage.overwrite(Ve._heartbeatsCache)),zt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class tn{constructor(Ve){this.app=Ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ve=this;return(0,h.Z)(function*(){return(yield Ve._canUseIndexedDBPromise)&&(yield function St(pt){return yt.apply(this,arguments)}(Ve.app))||{heartbeats:[]}})()}overwrite(Ve){var ht=this;return(0,h.Z)(function*(){var Nt;if(yield ht._canUseIndexedDBPromise){const zt=yield ht.read();return un(ht.app,{lastSentHeartbeatDate:null!==(Nt=Ve.lastSentHeartbeatDate)&&void 0!==Nt?Nt:zt.lastSentHeartbeatDate,heartbeats:Ve.heartbeats})}})()}add(Ve){var ht=this;return(0,h.Z)(function*(){var Nt;if(yield ht._canUseIndexedDBPromise){const zt=yield ht.read();return un(ht.app,{lastSentHeartbeatDate:null!==(Nt=Ve.lastSentHeartbeatDate)&&void 0!==Nt?Nt:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...Ve.heartbeats]})}})()}}function tr(pt){return(0,Y.L)(JSON.stringify({version:2,heartbeats:pt})).length}!function Er(pt){Mt(new O.wA("platform-logger",Ve=>new q(Ve),"PRIVATE")),Mt(new O.wA("heartbeat",Ve=>new Ii(Ve),"PRIVATE")),jn(N,B,pt),jn(N,B,"esm2017"),jn("fire-js","")}("")},4859:(Le,Ee,M)=>{"use strict";M.d(Ee,{H0:()=>N,wA:()=>k});var h=M(5861),O=M(2090);class k{constructor(P,R,F){this.name=P,this.instanceFactory=R,this.type=F,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(P){return this.instantiationMode=P,this}setMultipleInstances(P){return this.multipleInstances=P,this}setServiceProps(P){return this.serviceProps=P,this}setInstanceCreatedCallback(P){return this.onInstanceCreated=P,this}}const Y="[DEFAULT]";class ie{constructor(P,R){this.name=P,this.container=R,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(P){const R=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(R)){const F=new O.BH;if(this.instancesDeferred.set(R,F),this.isInitialized(R)||this.shouldAutoInitialize())try{const $=this.getOrInitializeService({instanceIdentifier:R});$&&F.resolve($)}catch{}}return this.instancesDeferred.get(R).promise}getImmediate(P){var R;const F=this.normalizeInstanceIdentifier(P?.identifier),$=null!==(R=P?.optional)&&void 0!==R&&R;if(!this.isInitialized(F)&&!this.shouldAutoInitialize()){if($)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:F})}catch(G){if($)return null;throw G}}getComponent(){return this.component}setComponent(P){if(P.name!==this.name)throw Error(`Mismatching Component ${P.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=P,this.shouldAutoInitialize()){if(function J(B){return"EAGER"===B.instantiationMode}(P))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[R,F]of this.instancesDeferred.entries()){const $=this.normalizeInstanceIdentifier(R);try{const G=this.getOrInitializeService({instanceIdentifier:$});F.resolve(G)}catch{}}}}clearInstance(P=Y){this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)}delete(){var P=this;return(0,h.Z)(function*(){const R=Array.from(P.instances.values());yield Promise.all([...R.filter(F=>"INTERNAL"in F).map(F=>F.INTERNAL.delete()),...R.filter(F=>"_delete"in F).map(F=>F._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(P=Y){return this.instances.has(P)}getOptions(P=Y){return this.instancesOptions.get(P)||{}}initialize(P={}){const{options:R={}}=P,F=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(F))throw Error(`${this.name}(${F}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $=this.getOrInitializeService({instanceIdentifier:F,options:R});for(const[G,K]of this.instancesDeferred.entries())F===this.normalizeInstanceIdentifier(G)&&K.resolve($);return $}onInit(P,R){var F;const $=this.normalizeInstanceIdentifier(R),G=null!==(F=this.onInitCallbacks.get($))&&void 0!==F?F:new Set;G.add(P),this.onInitCallbacks.set($,G);const K=this.instances.get($);return K&&P(K,$),()=>{G.delete(P)}}invokeOnInitCallbacks(P,R){const F=this.onInitCallbacks.get(R);if(F)for(const $ of F)try{$(P,R)}catch{}}getOrInitializeService({instanceIdentifier:P,options:R={}}){let F=this.instances.get(P);if(!F&&this.component&&(F=this.component.instanceFactory(this.container,{instanceIdentifier:(B=P,B===Y?void 0:B),options:R}),this.instances.set(P,F),this.instancesOptions.set(P,R),this.invokeOnInitCallbacks(F,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,F)}catch{}var B;return F||null}normalizeInstanceIdentifier(P=Y){return this.component?this.component.multipleInstances?P:Y:P}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(P){this.name=P,this.providers=new Map}addComponent(P){const R=this.getProvider(P.name);if(R.isComponentSet())throw new Error(`Component ${P.name} has already been registered with ${this.name}`);R.setComponent(P)}addOrOverwriteComponent(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)}getProvider(P){if(this.providers.has(P))return this.providers.get(P);const R=new ie(P,this);return this.providers.set(P,R),R}getProviders(){return Array.from(this.providers.values())}}},1877:(Le,Ee,M)=>{"use strict";M.d(Ee,{Am:()=>B,Ub:()=>N,Yd:()=>J,in:()=>O});const h=[];var O=(()=>{return(P=O||(O={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",O;var P})();const k={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},Y=O.INFO,ie={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},q=(P,R,...F)=>{if(R<P.logLevel)return;const $=(new Date).toISOString(),G=ie[R];if(!G)throw new Error(`Attempted to log a message with an invalid logType (value: ${R})`);console[G](`[${$}]  ${P.name}:`,...F)};class J{constructor(R){this.name=R,this._logLevel=Y,this._logHandler=q,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(R){if(!(R in O))throw new TypeError(`Invalid value "${R}" assigned to \`logLevel\``);this._logLevel=R}setLogLevel(R){this._logLevel="string"==typeof R?k[R]:R}get logHandler(){return this._logHandler}set logHandler(R){if("function"!=typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R}get userLogHandler(){return this._userLogHandler}set userLogHandler(R){this._userLogHandler=R}debug(...R){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...R),this._logHandler(this,O.DEBUG,...R)}log(...R){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...R),this._logHandler(this,O.VERBOSE,...R)}info(...R){this._userLogHandler&&this._userLogHandler(this,O.INFO,...R),this._logHandler(this,O.INFO,...R)}warn(...R){this._userLogHandler&&this._userLogHandler(this,O.WARN,...R),this._logHandler(this,O.WARN,...R)}error(...R){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...R),this._logHandler(this,O.ERROR,...R)}}function N(P){h.forEach(R=>{R.setLogLevel(P)})}function B(P,R){for(const F of h){let $=null;R&&R.level&&($=k[R.level]),F.userLogHandler=null===P?null:(G,K,...ve)=>{const ee=ve.map(H=>{if(null==H)return null;if("string"==typeof H)return H;if("number"==typeof H||"boolean"==typeof H)return H.toString();if(H instanceof Error)return H.message;try{return JSON.stringify(H)}catch{return null}}).filter(H=>H).join(" ");K>=($??G.logLevel)&&P({level:O[K].toLowerCase(),message:ee,args:ve,type:G.name})}}}},8766:(Le,Ee,M)=>{"use strict";M.d(Ee,{Lj:()=>ae,X3:()=>_e});var h=M(5861);let k,Y;const J=new WeakMap,N=new WeakMap,B=new WeakMap,P=new WeakMap,R=new WeakMap;let G={get(j,pe,z){if(j instanceof IDBTransaction){if("done"===pe)return N.get(j);if("objectStoreNames"===pe)return j.objectStoreNames||B.get(j);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return H(j[pe])},set:(j,pe,z)=>(j[pe]=z,!0),has:(j,pe)=>j instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in j};function ee(j){return"function"==typeof j?function ve(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...pe){return j.apply(X(this),pe),H(J.get(this))}:function(...pe){return H(j.apply(X(this),pe))}:function(pe,...z){const te=j.call(X(this),pe,...z);return B.set(te,pe.sort?pe.sort():[pe]),H(te)}}(j):(j instanceof IDBTransaction&&function $(j){if(N.has(j))return;const pe=new Promise((z,te)=>{const he=()=>{j.removeEventListener("complete",se),j.removeEventListener("error",Ne),j.removeEventListener("abort",Ne)},se=()=>{z(),he()},Ne=()=>{te(j.error||new DOMException("AbortError","AbortError")),he()};j.addEventListener("complete",se),j.addEventListener("error",Ne),j.addEventListener("abort",Ne)});N.set(j,pe)}(j),((j,pe)=>pe.some(z=>j instanceof z))(j,function ie(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,G):j)}function H(j){if(j instanceof IDBRequest)return function F(j){const pe=new Promise((z,te)=>{const he=()=>{j.removeEventListener("success",se),j.removeEventListener("error",Ne)},se=()=>{z(H(j.result)),he()},Ne=()=>{te(j.error),he()};j.addEventListener("success",se),j.addEventListener("error",Ne)});return pe.then(z=>{z instanceof IDBCursor&&J.set(z,j)}).catch(()=>{}),R.set(pe,j),pe}(j);if(P.has(j))return P.get(j);const pe=ee(j);return pe!==j&&(P.set(j,pe),R.set(pe,j)),pe}const X=j=>R.get(j);function _e(j,pe,{blocked:z,upgrade:te,blocking:he,terminated:se}={}){const Ne=indexedDB.open(j,pe),Re=H(Ne);return te&&Ne.addEventListener("upgradeneeded",Ge=>{te(H(Ne.result),Ge.oldVersion,Ge.newVersion,H(Ne.transaction))}),z&&Ne.addEventListener("blocked",()=>z()),Re.then(Ge=>{se&&Ge.addEventListener("close",()=>se()),he&&Ge.addEventListener("versionchange",()=>he())}).catch(()=>{}),Re}function ae(j,{blocked:pe}={}){const z=indexedDB.deleteDatabase(j);return pe&&z.addEventListener("blocked",()=>pe()),H(z).then(()=>{})}const ce=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],ne=new Map;function le(j,pe){if(!(j instanceof IDBDatabase)||pe in j||"string"!=typeof pe)return;if(ne.get(pe))return ne.get(pe);const z=pe.replace(/FromIndex$/,""),te=pe!==z,he=re.includes(z);if(!(z in(te?IDBIndex:IDBObjectStore).prototype)||!he&&!ce.includes(z))return;const se=function(){var Ne=(0,h.Z)(function*(Re,...Ge){const lt=this.transaction(Re,he?"readwrite":"readonly");let Ae=lt.store;return te&&(Ae=Ae.index(Ge.shift())),(yield Promise.all([Ae[z](...Ge),he&&lt.done]))[0]});return function(Ge){return Ne.apply(this,arguments)}}();return ne.set(pe,se),se}!function K(j){G=j(G)}(j=>({...j,get:(pe,z,te)=>le(pe,z)||j.get(pe,z,te),has:(pe,z)=>!!le(pe,z)||j.has(pe,z)}))},5861:(Le,Ee,M)=>{"use strict";function h(k,Y,ie,q,J,N,B){try{var P=k[N](B),R=P.value}catch(F){return void ie(F)}P.done?Y(R):Promise.resolve(R).then(q,J)}function O(k){return function(){var Y=this,ie=arguments;return new Promise(function(q,J){var N=k.apply(Y,ie);function B(R){h(N,q,J,B,P,"next",R)}function P(R){h(N,q,J,B,P,"throw",R)}B(void 0)})}}M.d(Ee,{Z:()=>O})}},Le=>{Le(Le.s=7067)}]);