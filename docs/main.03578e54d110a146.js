"use strict";(self.webpackChunkbt_planning_poker=self.webpackChunkbt_planning_poker||[]).push([[179],{2011:(dt,Ae,L)=>{L.d(Ae,{Dh:()=>pe,GT:()=>fe,cc:()=>Me,hO:()=>Le,on:()=>j,pX:()=>se,xv:()=>ge});var m=L(4650),X=L(127),k=L(5813);dt=L.hmd(dt);const ae=["ngOnDestroy"],se=(me,nt,lt,xe={})=>new Proxy(me,{get:(ve,be)=>lt.runOutsideAngular(()=>{var Ve;if(me[be])return!(null===(Ve=xe?.spy)||void 0===Ve)&&Ve.get&&xe.spy.get(be,me[be]),me[be];if(ae.indexOf(be)>-1)return()=>{};const $e=nt.toPromise().then(B=>{const ye=B&&B[be];return"function"==typeof ye?ye.bind(B):ye&&ye.then?ye.then(W=>lt.run(()=>W)):lt.run(()=>ye)});return new Proxy(()=>{},{get:(B,ye)=>$e[ye],apply:(B,ye,W)=>$e.then(J=>{var re;const te=J&&J(...W);return!(null===(re=xe?.spy)||void 0===re)&&re.apply&&xe.spy.apply(be,W,te),te})})})}),fe=(me,nt)=>{nt.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(xe=>{Object.defineProperty(me.prototype,xe,Object.getOwnPropertyDescriptor(lt.prototype||lt,xe))})})};class le{constructor(nt){return nt}}const pe=new m.OlP("angularfire2.app.options"),ge=new m.OlP("angularfire2.app.name");function j(me,nt,lt){const ve="object"==typeof lt&&lt||{};ve.name=ve.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ve=X.Z.apps.filter($e=>$e&&$e.name===ve.name)[0]||nt.runOutsideAngular(()=>X.Z.initializeApp(me,ve));try{JSON.stringify(me)!==JSON.stringify(Ve.options)&&H("error",`${Ve.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ve)}const H=(me,...nt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[me](...nt)},Z={provide:le,useFactory:j,deps:[pe,m.R0b,[new m.FiY,ge]]};let Le=(()=>{class me{constructor(lt){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",m.q4F.full,lt.toString())}static initializeApp(lt,xe){return{ngModule:me,providers:[{provide:pe,useValue:lt},{provide:ge,useValue:xe}]}}}return me.\u0275fac=function(lt){return new(lt||me)(m.LFG(m.Lbi))},me.\u0275mod=m.oAB({type:me}),me.\u0275inj=m.cJS({providers:[Z]}),me})();function Me(me,nt,lt,xe,ve){const[,be,Ve]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===me)||[];if(be)return function Ie(me,nt){try{return me.toString()===nt.toString()}catch{return me===nt}}(ve,Ve)||(_e("error",`${nt} was already initialized on the ${lt} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ve,was:Ve})),be;{const $e=xe();return globalThis.\u0275AngularfireInstanceCache.push([me,$e,ve]),$e}}const st=!!dt.hot,_e=(me,...nt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[me](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Ae,L)=>{L.d(Ae,{q4:()=>Yr,iC:()=>Fi,fc:()=>Qo,HU:()=>Ko,vb:()=>xt,JM:()=>fi});var m=L(4650),X=L(5867),k=L(5861),ae=L(9681),se=L(2090),fe=L(4859),le=L(1877),pe=L(8766);const ge="@firebase/installations",j="0.5.16",Z=`w:${j}`,Le="FIS_v2",nt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function be(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(D,C){const F=(yield C.json()).error;return nt.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function B(D,{refreshToken:C}){const M=$e(D);return M.append("Authorization",function re(D){return`${Le} ${D}`}(C)),M}function ye(D){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function te(D,C){return ke.apply(this,arguments)}function ke(){return(ke=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:M}){const F=xe(D),Q=$e(D),ie=C.getImmediate({optional:!0});if(ie){const Ct=yield ie.getHeartbeatsHeader();Ct&&Q.append("x-firebase-client",Ct)}const Be={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:Le,appId:D.appId,sdkVersion:Z})},Xe=yield ye(()=>fetch(F,Be));if(Xe.ok){const Ct=yield Xe.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:ve(Ct.authToken)}}throw yield be("Create Installation",Xe)})).apply(this,arguments)}function Ne(D){return new Promise(C=>{setTimeout(C,D)})}const tn=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function cn(D){return function ht(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return tn.test(M)?M:""}catch{return""}}function wn(D){return`${D.appName}!${D.appId}`}const Yt=new Map;function nn(D,C){const M=wn(D);fn(M,C),function Ji(D,C){const M=function Ur(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=D=>{fn(D.data.key,D.data.fid)}),_i}();M&&M.postMessage({key:D,fid:C}),function zr(){0===Yt.size&&_i&&(_i.close(),_i=null)}()}(M,C)}function fn(D,C){const M=Yt.get(D);if(M)for(const F of M)F(C)}let _i=null;const si="firebase-installations-store";let oi=null;function Da(){return oi||(oi=(0,pe.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(si)}})),oi}function Ye(D,C){return xr.apply(this,arguments)}function xr(){return(xr=(0,k.Z)(function*(D,C){const M=wn(D),Q=(yield Da()).transaction(si,"readwrite"),ie=Q.objectStore(si),De=yield ie.get(M);return yield ie.put(C,M),yield Q.done,(!De||De.fid!==C.fid)&&nn(D,C.fid),C})).apply(this,arguments)}function Ds(D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,k.Z)(function*(D){const C=wn(D),F=(yield Da()).transaction(si,"readwrite");yield F.objectStore(si).delete(C),yield F.done})).apply(this,arguments)}function ai(D,C){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(D,C){const M=wn(D),Q=(yield Da()).transaction(si,"readwrite"),ie=Q.objectStore(si),De=yield ie.get(M),Be=C(De);return void 0===Be?yield ie.delete(M):yield ie.put(Be,M),yield Q.done,Be&&(!De||De.fid!==Be.fid)&&nn(D,Be.fid),Be})).apply(this,arguments)}function Fn(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(D){let C;const M=yield ai(D.appConfig,F=>{const Q=mn(F),ie=Et(D,Q);return C=ie.registrationPromise,ie.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function mn(D){return Ot(D||{fid:Ze(),registrationStatus:0})}function Et(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(nt.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function ct(D,C){return un.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:_r(D)}:{installationEntry:C}}function un(){return(un=(0,k.Z)(function*(D,C){try{const M=yield te(D,C);return Ye(D.appConfig,M)}catch(M){throw lt(M)&&409===M.customData.serverCode?yield Ds(D.appConfig):yield Ye(D.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function _r(D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,k.Z)(function*(D){let C=yield qr(D.appConfig);for(;1===C.registrationStatus;)yield Ne(100),C=yield qr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Fn(D);return F||M}return C})).apply(this,arguments)}function qr(D){return ai(D,C=>{if(!C)throw nt.create("installation-not-found");return Ot(C)})}function Ot(D){return function Ts(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function sn(D,C){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},M){const F=on(D,M),Q=B(D,M),ie=C.getImmediate({optional:!0});if(ie){const Ct=yield ie.getHeartbeatsHeader();Ct&&Q.append("x-firebase-client",Ct)}const Be={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},Xe=yield ye(()=>fetch(F,Be));if(Xe.ok)return ve(yield Xe.json());throw yield be("Generate Auth Token",Xe)})).apply(this,arguments)}function on(D,{fid:C}){return`${xe(D)}/${C}/authTokens:generate`}function Yn(D){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,k.Z)(function*(D,C=!1){let M;const F=yield ai(D.appConfig,ie=>{if(!$t(ie))throw nt.create("not-registered");const De=ie.authToken;if(!C&&G(De))return ie;if(1===De.requestStatus)return M=it(D,C),ie;{if(!navigator.onLine)throw nt.create("app-offline");const Be=K(ie);return M=At(D,Be),Be}});return M?yield M:F.authToken})).apply(this,arguments)}function it(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,k.Z)(function*(D,C){let M=yield rt(D.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield rt(D.appConfig);const F=M.authToken;return 0===F.requestStatus?Yn(D,C):F})).apply(this,arguments)}function rt(D){return ai(D,C=>{if(!$t(C))throw nt.create("not-registered");return function Ee(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function At(D,C){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(D,C){try{const M=yield sn(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield Ye(D.appConfig,F),M}catch(M){if(!lt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ye(D.appConfig,F)}else yield Ds(D.appConfig);throw M}})).apply(this,arguments)}function $t(D){return void 0!==D&&2===D.registrationStatus}function G(D){return 2===D.requestStatus&&!function V(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function K(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function ze(){return(ze=(0,k.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield Fn(C);return F?F.catch(console.error):Yn(C).catch(console.error),M.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,k.Z)(function*(D,C=!1){const M=D;return yield gn(M),(yield Yn(M,C)).token})).apply(this,arguments)}function gn(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,k.Z)(function*(D){const{registrationPromise:C}=yield Fn(D);C&&(yield C)})).apply(this,arguments)}function Cs(D){return nt.create("missing-app-config-values",{valueName:D})}const Po="installations",Dn=D=>{const C=D.getProvider("app").getImmediate(),M=function En(D){if(!D||!D.options)throw Cs("App Configuration");if(!D.name)throw Cs("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw Cs(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Js=D=>{const C=D.getProvider("app").getImmediate(),M=(0,ae._getProvider)(C,Po).getImmediate();return{getId:()=>function Y(D){return ze.apply(this,arguments)}(M),getToken:Q=>function ft(D){return Jt.apply(this,arguments)}(M,Q)}};(function Au(){(0,ae._registerComponent)(new fe.wA(Po,Dn,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",Js,"PRIVATE"))})(),(0,ae.registerVersion)(ge,j),(0,ae.registerVersion)(ge,j,"esm2017");const Pi="@firebase/remote-config",zn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Af{constructor(C,M,F,Q){this.client=C,this.storage=M,this.storageCache=F,this.logger=Q}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Q=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Q}.`),Q}fetch(C){var M=this;return(0,k.Z)(function*(){const[F,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Q;C.eTag=Q&&Q.eTag;const ie=yield M.client.fetch(C),De=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&De.push(M.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(De),ie})()}}function nc(D=navigator){return D.languages&&D.languages[0]||D.language}class rc{constructor(C,M,F,Q,ie,De){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=Q,this.apiKey=ie,this.appId=De}fetch(C){var M=this;return(0,k.Z)(function*(){var F,Q,ie;const[De,Be]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},_t={sdk_version:M.sdkVersion,app_instance_id:De,app_instance_id_token:Be,app_id:M.appId,language_code:nc()},bn={method:"POST",headers:Lt,body:JSON.stringify(_t)},Wn=fetch(Ct,bn),Nr=new Promise(($s,js)=>{C.signal.addEventListener(()=>{const Zd=new Error("The operation was aborted.");Zd.name="AbortError",js(Zd)})});let Vs;try{yield Promise.race([Wn,Nr]),Vs=yield Wn}catch($s){let js="fetch-client-network";throw"AbortError"===(null===(F=$s)||void 0===F?void 0:F.name)&&(js="fetch-timeout"),zn.create(js,{originalErrorMessage:null===(Q=$s)||void 0===Q?void 0:Q.message})}let go=Vs.status;const Jo=Vs.headers.get("ETag")||void 0;let Xr,Bs;if(200===Vs.status){let $s;try{$s=yield Vs.json()}catch(js){throw zn.create("fetch-client-parse",{originalErrorMessage:null===(ie=js)||void 0===ie?void 0:ie.message})}Xr=$s.entries,Bs=$s.state}if("INSTANCE_STATE_UNSPECIFIED"===Bs?go=500:"NO_CHANGE"===Bs?go=304:("NO_TEMPLATE"===Bs||"EMPTY_CONFIG"===Bs)&&(Xr={}),304!==go&&200!==go)throw zn.create("fetch-status",{httpStatus:go});return{status:go,eTag:Jo,config:Xr}})()}}class bg{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,k.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var Q=this;return(0,k.Z)(function*(){yield function Xn(D,C){return new Promise((M,F)=>{const Q=Math.max(C-Date.now(),0),ie=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(ie),F(zn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const ie=yield Q.client.fetch(C);return yield Q.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Ad(D){if(!(D instanceof se.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ie))throw ie;const De={throttleEndTimeMillis:Date.now()+(0,se.$s)(F),backoffCount:F+1};return yield Q.storage.setThrottleMetadata(De),Q.attemptFetch(C,De)}})()}}class xd{constructor(C,M,F,Q,ie){this.app=C,this._client=M,this._storageCache=F,this._storage=Q,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ic(D,C){var M;const F=D.target.error||void 0;return zn.create(C,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const Ms="app_namespace_store";class Cg{constructor(C,M,F,Q=function Tg(){return new Promise((D,C)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Q=>{C(ic(Q,"storage-open"))},F.onsuccess=Q=>{D(Q.target.result)},F.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Ms,{keyPath:"compositeKey"})}}catch(F){C(zn.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,k.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Q,ie)=>{var De;const Xe=F.transaction([Ms],"readonly").objectStore(Ms),Ct=M.createCompositeKey(C);try{const Lt=Xe.get(Ct);Lt.onerror=_t=>{ie(ic(_t,"storage-get"))},Lt.onsuccess=_t=>{const bn=_t.target.result;Q(bn?bn.value:void 0)}}catch(Lt){ie(zn.create("storage-get",{originalErrorMessage:null===(De=Lt)||void 0===De?void 0:De.message}))}})})()}set(C,M){var F=this;return(0,k.Z)(function*(){const Q=yield F.openDbPromise;return new Promise((ie,De)=>{var Be;const Ct=Q.transaction([Ms],"readwrite").objectStore(Ms),Lt=F.createCompositeKey(C);try{const _t=Ct.put({compositeKey:Lt,value:M});_t.onerror=bn=>{De(ic(bn,"storage-set"))},_t.onsuccess=()=>{ie()}}catch(_t){De(zn.create("storage-set",{originalErrorMessage:null===(Be=_t)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var M=this;return(0,k.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Q,ie)=>{var De;const Xe=F.transaction([Ms],"readwrite").objectStore(Ms),Ct=M.createCompositeKey(C);try{const Lt=Xe.delete(Ct);Lt.onerror=_t=>{ie(ic(_t,"storage-delete"))},Lt.onsuccess=()=>{Q()}}catch(Lt){ie(zn.create("storage-delete",{originalErrorMessage:null===(De=Lt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Rd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Q=C.storage.getActiveConfig(),ie=yield M;ie&&(C.lastFetchStatus=ie);const De=yield F;De&&(C.lastSuccessfulFetchTimestampMillis=De);const Be=yield Q;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ru(){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Rs(){(0,ae._registerComponent)(new fe.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),Q=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zn.create("registration-window");if(!(0,se.hl)())throw zn.create("indexed-db-unavailable");const{projectId:ie,apiKey:De,appId:Be}=F.options;if(!ie)throw zn.create("registration-project-id");if(!De)throw zn.create("registration-api-key");if(!Be)throw zn.create("registration-app-id");const Xe=new Cg(Be,F.name,M=M||"firebase"),Ct=new Rd(Xe),Lt=new le.Yd(Pi);Lt.logLevel=le.in.ERROR;const _t=new rc(Q,ae.SDK_VERSION,M,ie,De,Be),bn=new bg(_t,Xe),Wn=new Af(bn,Xe,Ct,Lt),Nr=new xd(F,Wn,Ct,Xe,Lt);return function Un(D){const C=(0,se.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Nr),Nr},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Pi,"0.3.15"),(0,ae.registerVersion)(Pi,"0.3.15","esm2017")}();const Ni="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sa="google.c.a.c_id",Pu="google.c.a.c_l",sc="google.c.a.ts",Rf="google.c.a.e";var rs=(()=>{return(D=rs||(rs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",rs;var D})();function ui(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kr(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Q=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)Q[ie]=F.charCodeAt(ie);return Q}const No="fcm_token_details_db",wr="fcm_token_object_Store";function Pf(D){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(No))return null;let C=null;return(yield(0,pe.X3)(No,5,{upgrade:(F=(0,k.Z)(function*(Q,ie,De,Be){var Xe;if(ie<2||!Q.objectStoreNames.contains(wr))return;const Ct=Be.objectStore(wr),Lt=yield Ct.index("fcmSenderId").get(D);if(yield Ct.clear(),Lt)if(2===ie){const _t=Lt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;C={token:_t.fcmToken,createTime:null!==(Xe=_t.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:ui(_t.vapidKey)}}}else if(3===ie){const _t=Lt;C={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ui(_t.auth),p256dh:ui(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ui(_t.vapidKey)}}}else if(4===ie){const _t=Lt;C={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ui(_t.auth),p256dh:ui(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ui(_t.vapidKey)}}}}),function(ie,De,Be,Xe){return F.apply(this,arguments)})})).close(),yield(0,pe.Lj)(No),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),An(C)?C:null;var F}),Nf.apply(this,arguments)}function An(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const li="firebase-messaging-store";let Rr=null;function ku(){return Rr||(Rr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(li)}})),Rr}function ko(D){return is.apply(this,arguments)}function is(){return(is=(0,k.Z)(function*(D){const C=Ei(D),F=yield(yield ku()).transaction(li).objectStore(li).get(C);if(F)return F;{const Q=yield Pf(D.appConfig.senderId);if(Q)return yield Wt(D,Q),Q}})).apply(this,arguments)}function Wt(D,C){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,k.Z)(function*(D,C){const M=Ei(D),Q=(yield ku()).transaction(li,"readwrite");return yield Q.objectStore(li).put(C,M),yield Q.done,C})).apply(this,arguments)}function to(D){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(D){const C=Ei(D),F=(yield ku()).transaction(li,"readwrite");yield F.objectStore(li).delete(C),yield F.done})).apply(this,arguments)}function Ei({appConfig:D}){return D.appId}const Tn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(D,C){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,k.Z)(function*(D,C){var M;const F=yield ac(D),Q=Te(C),ie={method:"POST",headers:F,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(ss(D.appConfig),ie)).json()}catch(Be){throw Tn.create("token-subscribe-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(De.error)throw Tn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw Tn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Of(D,C){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(D,C){var M;const F=yield ac(D),Q=Te(C.subscriptionOptions),ie={method:"PATCH",headers:F,body:JSON.stringify(Q)};let De;try{De=yield(yield fetch(`${ss(D.appConfig)}/${C.token}`,ie)).json()}catch(Be){throw Tn.create("token-update-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(De.error)throw Tn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw Tn.create("token-update-no-token");return De.token})).apply(this,arguments)}function Bu(D,C){return oc.apply(this,arguments)}function oc(){return(oc=(0,k.Z)(function*(D,C){var M;const Q={method:"DELETE",headers:yield ac(D)};try{const De=yield(yield fetch(`${ss(D.appConfig)}/${C}`,Q)).json();if(De.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(ie){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(M=ie)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ss({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ac(D){return xa.apply(this,arguments)}function xa(){return(xa=(0,k.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Te({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const Q={web:{endpoint:M,auth:C,p256dh:D}};return F!==ns&&(Q.web.applicationPubKey=F),Q}const zt=6048e5;function $u(D){return ju.apply(this,arguments)}function ju(){return(ju=(0,k.Z)(function*(D){const C=yield uc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ui(C.getKey("auth")),p256dh:ui(C.getKey("p256dh"))},F=yield ko(D.firebaseDependencies);if(F){if(Od(F.subscriptionOptions,M))return Date.now()>=F.createTime+zt?Oo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Bu(D.firebaseDependencies,F.token)}catch(Q){console.warn(Q)}return Ma(D.firebaseDependencies,M)}return Ma(D.firebaseDependencies,M)})).apply(this,arguments)}function xn(D){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,k.Z)(function*(D){const C=yield ko(D.firebaseDependencies);C&&(yield Bu(D.firebaseDependencies,C.token),yield to(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Oo(D,C){return ci.apply(this,arguments)}function ci(){return(ci=(0,k.Z)(function*(D,C){try{const M=yield Of(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Wt(D.firebaseDependencies,F),M}catch(M){throw yield xn(D),M}})).apply(this,arguments)}function Ma(D,C){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*(D,C){const F={token:yield Nt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Wt(D,F),F.token})).apply(this,arguments)}function uc(D,C){return lc.apply(this,arguments)}function lc(){return(lc=(0,k.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kr(C)})})).apply(this,arguments)}function Od(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Pa(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Mn(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const Q=C.notification.image;Q&&(D.notification.image=Q);const ie=C.notification.icon;ie&&(D.notification.icon=ie)}(C,D),function ki(D,C){!C.data||(D.data=C.data)}(C,D),function cc(D,C){var M,F,Q,ie,De;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const Be=null!==(Q=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Q?Q:null===(ie=C.notification)||void 0===ie?void 0:ie.click_action;Be&&(D.fcmOptions.link=Be);const Xe=null===(De=C.fcmOptions)||void 0===De?void 0:De.analytics_label;Xe&&(D.fcmOptions.analyticsLabel=Xe)}(C,D),C}function no(D){return"object"==typeof D&&!!D&&Sa in D}function os(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function Na(D){return Tn.create("missing-app-config-values",{valueName:D})}os("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),os("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ag{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Sg(D){if(!D||!D.options)throw Na("App Configuration Object");if(!D.name)throw Na("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw Na(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Q,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function dc(D){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,k.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:ts}),D.swRegistration.update().catch(()=>{})}catch(M){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=M)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function ka(D,C){return hc.apply(this,arguments)}function hc(){return(hc=(0,k.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield dc(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Oa(D,C){return fc.apply(this,arguments)}function fc(){return(fc=(0,k.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=ns)})).apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(D,C){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield Oa(D,C?.vapidKey),yield ka(D,C?.serviceWorkerRegistration),$u(D)})).apply(this,arguments)}function pc(D,C,M){return gc.apply(this,arguments)}function gc(){return(gc=(0,k.Z)(function*(D,C,M){const F=mc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Sa],message_name:M[Pu],message_time:M[sc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mc(D){switch(D){case rs.NOTIFICATION_CLICKED:return"notification_open";case rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ro(){return(ro=(0,k.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===rs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Pa(M)):D.onMessageHandler.next(Pa(M)));const F=M.data;no(F)&&"1"===F[Rf]&&(yield pc(D,M.messageType,F))})).apply(this,arguments)}const io="@firebase/messaging",er=D=>{const C=new Ag(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ld(D,C){return ro.apply(this,arguments)}(C,M)),C},Zr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function zu(D,C){return qu.apply(this,arguments)}(C,F)}};function Fd(){return yc.apply(this,arguments)}function yc(){return(yc=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function yn(){(0,ae._registerComponent)(new fe.wA("messaging",er,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Zr,"PRIVATE")),(0,ae.registerVersion)(io,"0.11.0"),(0,ae.registerVersion)(io,"0.11.0","esm2017")}();const Fo="analytics",Bd="firebase_id",oo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qu="https://www.googletagmanager.com/gtag/js",Rn=new le.Yd("@firebase/analytics");function Yu(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function Ju(D,C){const M=document.createElement("script");M.src=`${Qu}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function Ff(D,C,M,F,Q,ie){return ao.apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(D,C,M,F,Q,ie){const De=F[Q];try{if(De)yield C[De];else{const Xe=(yield Yu(M)).find(Ct=>Ct.measurementId===Q);Xe&&(yield C[Xe.appId])}}catch(Be){Rn.error(Be)}D("config",Q,ie)})).apply(this,arguments)}function Uo(D,C,M,F,Q){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(D,C,M,F,Q){try{let ie=[];if(Q&&Q.send_to){let De=Q.send_to;Array.isArray(De)||(De=[De]);const Be=yield Yu(M);for(const Xe of De){const Ct=Be.find(_t=>_t.measurementId===Xe),Lt=Ct&&C[Ct.appId];if(!Lt){ie=[];break}ie.push(Lt)}}0===ie.length&&(ie=Object.values(C)),yield Promise.all(ie),D("event",F,Q||{})}catch(ie){Rn.error(ie)}})).apply(this,arguments)}function jd(D){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(Qu)&&M.src.includes(D))return M;return null}const dr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Va=new class Oi{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Gd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ba(D){return vc.apply(this,arguments)}function vc(){return(vc=(0,k.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,Q={method:"GET",headers:Gd(F)},ie=oo.replace("{app-id}",M),De=yield fetch(ie,Q);if(200!==De.status&&304!==De.status){let Be="";try{const Xe=yield De.json();null!==(C=Xe.error)&&void 0!==C&&C.message&&(Be=Xe.error.message)}catch{}throw dr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Be})}return De.json()})).apply(this,arguments)}function Vn(D){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,k.Z)(function*(D,C=Va,M){const{appId:F,apiKey:Q,measurementId:ie}=D.options;if(!F)throw dr.create("no-app-id");if(!Q){if(ie)return{measurementId:ie,appId:F};throw dr.create("no-api-key")}const De=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new nl;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==M?M:6e4),el({appId:F,apiKey:Q,measurementId:ie},De,Be,C)})).apply(this,arguments)}function el(D,C,M){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,Q=Va){var ie,De;const{appId:Be,measurementId:Xe}=D;try{yield $a(F,C)}catch(Ct){if(Xe)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null===(ie=Ct)||void 0===ie?void 0:ie.message}]`),{appId:Be,measurementId:Xe};throw Ct}try{const Ct=yield Ba(D);return Q.deleteThrottleMetadata(Be),Ct}catch(Ct){const Lt=Ct;if(!tl(Lt)){if(Q.deleteThrottleMetadata(Be),Xe)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:Be,measurementId:Xe};throw Ct}const _t=503===Number(null===(De=Lt?.customData)||void 0===De?void 0:De.httpStatus)?(0,se.$s)(M,Q.intervalMillis,30):(0,se.$s)(M,Q.intervalMillis),bn={throttleEndTimeMillis:Date.now()+_t,backoffCount:M+1};return Q.setThrottleMetadata(Be,bn),Rn.debug(`Calling attemptFetch again in ${_t} millis`),el(D,bn,F,Q)}})).apply(this,arguments)}function $a(D,C){return new Promise((M,F)=>{const Q=Math.max(C-Date.now(),0),ie=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(ie),F(dr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function tl(D){if(!(D instanceof se.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class nl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let ks,Ha;function Os(){return(Os=(0,k.Z)(function*(D,C,M,F,Q){if(Q&&Q.global)D("event",M,F);else{const ie=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function ho(D){Ha=D}function Ec(D){ks=D}function Ls(){return sl.apply(this,arguments)}function sl(){return(sl=(0,k.Z)(function*(){var D;if(!(0,se.hl)())return Rn.warn(dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(C){return Rn.warn(dr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function $o(){return($o=(0,k.Z)(function*(D,C,M,F,Q,ie,De){var Be;const Xe=Vn(D);Xe.then(Wn=>{M[Wn.measurementId]=Wn.appId,D.options.measurementId&&Wn.measurementId!==D.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wn=>Rn.error(Wn)),C.push(Xe);const Ct=Ls().then(Wn=>{if(Wn)return F.getId()}),[Lt,_t]=yield Promise.all([Xe,Ct]);jd(ie)||Ju(ie,Lt.measurementId),Ha&&(Q("consent","default",Ha),ho(void 0)),Q("js",new Date);const bn=null!==(Be=De?.config)&&void 0!==Be?Be:{};return bn.origin="firebase",bn.update=!0,null!=_t&&(bn[Bd]=_t),Q("config",Lt.measurementId,bn),ks&&(Q("set",ks),Ec(void 0)),Lt.measurementId})).apply(this,arguments)}class ol{constructor(C){this.app=C}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},Fs=[];const jo={};let Go,fo,Ho="dataLayer",Ga=!1;function Yy(D,C,M){!function xg(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Q)=>`(${Q+1}) ${F}`).join(" "),M=dr.create("invalid-analytics-context",{errorInfo:C});Rn.warn(M.message)}}();const F=D.options.appId;if(!F)throw dr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw dr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[F])throw dr.create("already-exists",{id:F});if(!Ga){!function $d(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ho);const{wrappedGtag:ie,gtagCore:De}=function La(D,C,M,F,Q){let ie=function(...De){window[F].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ie=window[Q]),window[Q]=function Xu(D,C,M,F){function ie(){return(ie=(0,k.Z)(function*(De,Be,Xe){try{"event"===De?yield Uo(D,C,M,Be,Xe):"config"===De?yield Ff(D,C,M,F,Be,Xe):"consent"===De?D("consent","update",Xe):D("set",Be)}catch(Ct){Rn.error(Ct)}})).apply(this,arguments)}return function Q(De,Be,Xe){return ie.apply(this,arguments)}}(ie,D,C,M),{gtagCore:ie,wrappedGtag:window[Q]}}(Qr,Fs,jo,Ho,"gtag");fo=ie,Go=De,Ga=!0}return Qr[F]=function Bo(D,C,M,F,Q,ie,De){return $o.apply(this,arguments)}(D,Fs,jo,C,Go,Ho,M),new ol(D)}function Xy(){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const us="@firebase/analytics";!function pr(){(0,ae._registerComponent)(new fe.wA(Fo,(C,{options:M})=>Yy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function D(C){try{const M=C.getProvider(Fo).getImmediate();return{logEvent:(F,Q,ie)=>function fr(D,C,M,F){D=(0,se.m9)(D),function zd(D,C,M,F,Q){return Os.apply(this,arguments)}(fo,Qr[D.app.options.appId],C,M,F).catch(Q=>Rn.error(Q))}(M,F,Q,ie)}}catch(M){throw dr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(us,"0.8.4"),(0,ae.registerVersion)(us,"0.8.4","esm2017")}();var Je=L(4408),Li=L(7565);const zo=new class Us extends Li.v{}(class In extends Je.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):(C.flush(this),0)}});var qo=L(4986),qn=L(8505),ls=L(5363),pt=L(9468);const Yr=new m.GfV("7.5.0"),cs="__angularfire_symbol__analyticsIsSupportedValue",di="__angularfire_symbol__analyticsIsSupported",ul="__angularfire_symbol__remoteConfigIsSupportedValue",za="__angularfire_symbol__remoteConfigIsSupported",Jr="__angularfire_symbol__messagingIsSupportedValue",Wd="__angularfire_symbol__messagingIsSupported";function fi(D,C,M){if(C){if(1===C.length)return C[0];const ie=C.filter(De=>De.app===M);if(1===ie.length)return ie[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=Xy().then(D=>globalThis[cs]=D).catch(()=>globalThis[cs]=!1)),globalThis[Wd]||(globalThis[Wd]=Fd().then(D=>globalThis[Jr]=D).catch(()=>globalThis[Jr]=!1)),globalThis[za]||(globalThis[za]=Ru().then(D=>globalThis[ul]=D).catch(()=>globalThis[ul]=!1));const xt=(D,C)=>{const M=C?[C]:(0,X.C6)(),F=[];return M.forEach(Q=>{Q.container.getProvider(D).instances.forEach(De=>{F.includes(De)||F.push(De)})}),F};function Wa(){}class tr{constructor(C,M=zo){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const Q=this.zone;return this.delegate.schedule(function(De){Q.runGuarded(()=>{C.apply(this,[De])})},M,F)}}class ot{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),M.pipe((0,qn.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ko=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new tr(Zone.current)),this.insideAngular=M.run(()=>new tr(Zone.current,qo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function It(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Qo(D){return D.pipe((0,ls.Q)(It().outsideAngular))}function Fi(D){return It(),function Kd(D){return function(M){return(M=M.lift(new ot(D.ngZone))).pipe((0,pt.R)(D.outsideAngular),(0,ls.Q)(D.insideAngular))}}(It())(D)}},2090:(dt,Ae,L)=>{L.d(Ae,{$s:()=>rt,BH:()=>Ht,G6:()=>be,L:()=>pe,LL:()=>Yt,Pz:()=>tn,Sg:()=>Ze,UG:()=>Ie,US:()=>fe,ZB:()=>H,ZR:()=>wn,aH:()=>ht,b$:()=>me,eu:()=>$e,hl:()=>Ve,jU:()=>st,m9:()=>$t,ne:()=>jn,pd:()=>Mi,r3:()=>vi,ru:()=>_e,tV:()=>ge,uI:()=>Me,vZ:()=>Ye,w1:()=>lt,xO:()=>Qn,xb:()=>oi,z$:()=>Le,zI:()=>B,zd:()=>ai});const ae=function(G){const V=[];let K=0;for(let Ee=0;Ee<G.length;Ee++){let Y=G.charCodeAt(Ee);Y<128?V[K++]=Y:Y<2048?(V[K++]=Y>>6|192,V[K++]=63&Y|128):55296==(64512&Y)&&Ee+1<G.length&&56320==(64512&G.charCodeAt(Ee+1))?(Y=65536+((1023&Y)<<10)+(1023&G.charCodeAt(++Ee)),V[K++]=Y>>18|240,V[K++]=Y>>12&63|128,V[K++]=Y>>6&63|128,V[K++]=63&Y|128):(V[K++]=Y>>12|224,V[K++]=Y>>6&63|128,V[K++]=63&Y|128)}return V},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,V){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let Y=0;Y<G.length;Y+=3){const ze=G[Y],ft=Y+1<G.length,Jt=ft?G[Y+1]:0,gn=Y+2<G.length,qt=gn?G[Y+2]:0;let jt=(15&Jt)<<2|qt>>6,lr=63&qt;gn||(lr=64,ft||(jt=64)),Ee.push(K[ze>>2],K[(3&ze)<<4|Jt>>4],K[jt],K[lr])}return Ee.join("")},encodeString(G,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(G):this.encodeByteArray(ae(G),V)},decodeString(G,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(G):function(G){const V=[];let K=0,Ee=0;for(;K<G.length;){const Y=G[K++];if(Y<128)V[Ee++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const ze=G[K++];V[Ee++]=String.fromCharCode((31&Y)<<6|63&ze)}else if(Y>239&&Y<365){const gn=((7&Y)<<18|(63&G[K++])<<12|(63&G[K++])<<6|63&G[K++])-65536;V[Ee++]=String.fromCharCode(55296+(gn>>10)),V[Ee++]=String.fromCharCode(56320+(1023&gn))}else{const ze=G[K++],ft=G[K++];V[Ee++]=String.fromCharCode((15&Y)<<12|(63&ze)<<6|63&ft)}}return V.join("")}(this.decodeStringToByteArray(G,V))},decodeStringToByteArray(G,V){this.init_();const K=V?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let Y=0;Y<G.length;){const ze=K[G.charAt(Y++)],Jt=Y<G.length?K[G.charAt(Y)]:0;++Y;const qt=Y<G.length?K[G.charAt(Y)]:64;++Y;const Ge=Y<G.length?K[G.charAt(Y)]:64;if(++Y,null==ze||null==Jt||null==qt||null==Ge)throw Error();Ee.push(ze<<2|Jt>>4),64!==qt&&(Ee.push(Jt<<4&240|qt>>2),64!==Ge&&Ee.push(qt<<6&192|Ge))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},pe=function(G){return function(G){const V=ae(G);return fe.encodeByteArray(V,!0)}(G).replace(/\./g,"")},ge=function(G){try{return fe.decodeString(G,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function H(G,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return V}for(const K in V)!V.hasOwnProperty(K)||!Z(K)||(G[K]=H(G[K],V[K]));return G}function Z(G){return"__proto__"!==G}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function st(){return"object"==typeof self&&self.self===self}function _e(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lt(){const G=Le();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function be(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){return"object"==typeof indexedDB}function $e(){return new Promise((G,V)=>{try{let K=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(Ee);Y.onsuccess=()=>{Y.result.close(),K||self.indexedDB.deleteDatabase(Ee),G(!0)},Y.onupgradeneeded=()=>{K=!1},Y.onerror=()=>{var ze;V((null===(ze=Y.error)||void 0===ze?void 0:ze.message)||"")}}catch(K){V(K)}})}function B(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=G&&ge(G[1]);return V&&JSON.parse(V)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},ht=()=>{var G;return null===(G=te())||void 0===G?void 0:G.config},tn=G=>{var V;return null===(V=te())||void 0===V?void 0:V[`_${G}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,K)=>{this.resolve=V,this.reject=K})}wrapCallback(V){return(K,Ee)=>{K?this.reject(K):this.resolve(Ee),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(K):V(K,Ee))}}}function Ze(G,V){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=V||"demo-project",Y=G.iat||0,ze=G.sub||G.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:Y,exp:Y+3600,auth_time:Y,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},G);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(ft)),""].join(".")}class wn extends Error{constructor(V,K,Ee){super(K),this.code=V,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(V,K,Ee){this.service=V,this.serviceName=K,this.errors=Ee}create(V,...K){const Ee=K[0]||{},Y=`${this.service}/${V}`,ze=this.errors[V],ft=ze?function nn(G,V){return G.replace(Fr,(K,Ee)=>{const Y=V[Ee];return null!=Y?String(Y):`<${Ee}?>`})}(ze,Ee):"Error";return new wn(Y,`${this.serviceName}: ${ft} (${Y}).`,Ee)}}const Fr=/\{\$([^}]+)}/g;function vi(G,V){return Object.prototype.hasOwnProperty.call(G,V)}function oi(G){for(const V in G)if(Object.prototype.hasOwnProperty.call(G,V))return!1;return!0}function Ye(G,V){if(G===V)return!0;const K=Object.keys(G),Ee=Object.keys(V);for(const Y of K){if(!Ee.includes(Y))return!1;const ze=G[Y],ft=V[Y];if(xr(ze)&&xr(ft)){if(!Ye(ze,ft))return!1}else if(ze!==ft)return!1}for(const Y of Ee)if(!K.includes(Y))return!1;return!0}function xr(G){return null!==G&&"object"==typeof G}function Qn(G){const V=[];for(const[K,Ee]of Object.entries(G))Array.isArray(Ee)?Ee.forEach(Y=>{V.push(encodeURIComponent(K)+"="+encodeURIComponent(Y))}):V.push(encodeURIComponent(K)+"="+encodeURIComponent(Ee));return V.length?"&"+V.join("&"):""}function ai(G){const V={};return G.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[Y,ze]=Ee.split("=");V[decodeURIComponent(Y)]=decodeURIComponent(ze)}}),V}function Mi(G){const V=G.indexOf("?");if(!V)return"";const K=G.indexOf("#",V);return G.substring(V,K>0?K:void 0)}function jn(G,V){const K=new mn(G,V);return K.subscribe.bind(K)}class mn{constructor(V,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{V(this)}).catch(Ee=>{this.error(Ee)})}next(V){this.forEachObserver(K=>{K.next(V)})}error(V){this.forEachObserver(K=>{K.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,K,Ee){let Y;if(void 0===V&&void 0===K&&void 0===Ee)throw new Error("Missing Observer.");Y=function ct(G,V){if("object"!=typeof G||null===G)return!1;for(const K of V)if(K in G&&"function"==typeof G[K])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:K,complete:Ee},void 0===Y.next&&(Y.next=un),void 0===Y.error&&(Y.error=un),void 0===Y.complete&&(Y.complete=un);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),ze}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,V)}sendOne(V,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{K(this.observers[V])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function un(){}function rt(G,V=1e3,K=2){const Ee=V*Math.pow(K,G),Y=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+Y)}function $t(G){return G&&G._delegate?G._delegate:G}},1020:(dt,Ae,L)=>{var m=L(4650);let X=null;function k(){return X}const le=new m.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ge(){return(0,m.LFG)(H)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let H=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Le(){return new H((0,m.LFG)(le))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function st(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(nt)},providedIn:"root"}),n})();const me=new m.OlP("appBaseHref");let nt=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+st(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+st(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+st(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(me,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lt=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+st(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+st(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(me,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Ve(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+st(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=st,n.joinWithSlash=Me,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(m.LFG(_e))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ve(){return new xe((0,m.LFG)(_e))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}let ln=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ta{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ta(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),xs(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xs(n,e){n.context.$implicit=e.item}let Un=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ec,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ec{constructor(){this.$implicit=null,this.ngIf=null}}function cr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}const Ms=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let xf=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function Xn(n,e){return new m.vHH(2100,!1)}();return t.replace(Ms,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"titlecase",type:n,pure:!0,standalone:!0}),n})(),Aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function wr(n){return"server"===n}let Nu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new kf((0,m.LFG)(le),window)}),n})();class kf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=li(this.window.history)||li(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function li(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro extends class Ld extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){X||(X=n)}(new ro)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wu(){return io=io||document.querySelector("base"),io?io.getAttribute("href"):null}();return null==t?null:function Zr(n){er=er||document.createElement("a"),er.setAttribute("href",n);const e=er.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let er,io=null;const yn=new m.OlP("TRANSITION_ID"),yc=[{provide:m.ip1,useFactory:function Fd(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[yn,le,m.zs3],multi:!0}];let _c=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ku=new m.OlP("EventManagerPlugins");let Ud=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ku),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Zu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let so=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Lo=(()=>{class n extends so{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vd))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Vd(n){k().remove(n)}const Fo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bd=/%COMP%/g;function Ju(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ju(n,i,t):(i=i.replace(Bd,n),t.push(i))}return t}function $d(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ao=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Uo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new jd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Hd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ju(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ud),m.LFG(Lo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Uo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Fo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(La(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(La(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Fo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Fo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$d(r)):this.eventManager.addEventListener(e,t,$d(r))}}function La(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jd extends Uo{constructor(e,t,r,i){super(e),this.component=r;const u=Ju(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Rn(n){return"_ngcontent-%COMP%".replace(Bd,n)}(i+"-"+r.id),this.hostAttr=function Yu(n){return"_nghost-%COMP%".replace(Bd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hd extends Uo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ju(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let dr=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=["alt","control","meta","shift"],Ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Fa.forEach(E=>{const T=r.indexOf(E);T>-1&&(r.splice(T,1),c+=E+".")}),c+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=Ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fa.forEach(c=>{c!==i&&(0,Oi[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const nl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function el(){ro.makeCurrent()},multi:!0},{provide:le,useFactory:function $a(){return(0,m.RDi)(document),document},deps:[]}]),ks=new m.OlP(""),zd=[{provide:m.rWj,useClass:class Lf{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Os=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function lo(){return new m.qLn},deps:[]},{provide:Ku,useClass:dr,multi:!0,deps:[le,m.R0b,m.Lbi]},{provide:Ku,useClass:Va,multi:!0,deps:[le]},{provide:ao,useClass:ao,deps:[Ud,Lo,m.AFp]},{provide:m.FYo,useExisting:ao},{provide:so,useExisting:Lo},{provide:Lo,useClass:Lo,deps:[le]},{provide:Ud,useClass:Ud,deps:[Ku,m.R0b]},{provide:class ko{},useClass:_c,deps:[]},[]];let rl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:yn,useExisting:m.AFp},yc]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ks,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Os,...zd],imports:[Aa,m.hGG]}),n})(),as=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Vo(){return new as((0,m.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fr=L(2011),po=L(4986),us=L(9751),rn=L(8996),pr=L(7669);function Je(...n){const e=(0,pr.yG)(n);return(0,rn.D)(n,e)}var In=L(5813),Li=L(8189);function zo(...n){return function Us(){return(0,Li.J)(1)}()((0,rn.D)(n,(0,pr.yG)(n)))}var Pr=L(4482);function qo(...n){const e=(0,pr.yG)(n);return(0,Pr.e)((t,r)=>{(e?zo(n,t,e):zo(n,t)).subscribe(r)})}var qn=L(5403);function ls(){return(0,Pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,qn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var pt=L(4004);function Yr(n,e,t,r,i){return(u,c)=>{let f=t,y=e,E=0;u.subscribe((0,qn.x)(c,T=>{const x=E++;y=f?n(y,T,x):(f=!0,T),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function cs(n,e){return(0,Pr.e)(Yr(n,e,arguments.length>=2,!0))}var di=L(4671);function za(n,e){return n===e}function Jr(n,e){return(0,Pr.e)((t,r)=>{let i=0;t.subscribe((0,qn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}L(1277);var ot,Wo=L(3942),ce=L(5861),hi=L(9681),qa=L(4859),fi=L(1877),xt=L(2090),Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={},Ko=Ko||{},It=Wa||self;function Zo(){}function pi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fi="closure_uid_"+(1e9*Math.random()>>>0),Kd=0;function Bn(n,e,t){return n.call.apply(n.bind,arguments)}function Vf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function D(n,e,t){return(D=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bn:Vf).apply(null,arguments)}function C(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function M(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function F(){this.s=this.s,this.o=this.o}F.prototype.s=!1,F.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Yo(n){Object.prototype.hasOwnProperty.call(n,Fi)&&n[Fi]||(n[Fi]=++Kd)}(this)},F.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ie=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function De(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Be(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(pi(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function Xe(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",Zo,e),It.removeEventListener("test",Zo,e)}catch{}return n}();function Lt(n){return/^[\s\xa0]*$/.test(n)}var _t=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bn(n,e){return n<e?-1:n>e?1:0}function Wn(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Nr(n){return-1!=Wn().indexOf(n)}function Vs(n){return Vs[" "](n),n}Vs[" "]=Zo;var Qd,n,Jo=Nr("Opera"),Xr=Nr("Trident")||Nr("MSIE"),Bs=Nr("Edge"),$s=Bs||Xr,js=Nr("Gecko")&&!(-1!=Wn().toLowerCase().indexOf("webkit")&&!Nr("Edge"))&&!(Nr("Trident")||Nr("MSIE"))&&!Nr("Edge"),Zd=-1!=Wn().toLowerCase().indexOf("webkit")&&!Nr("Edge");function Bf(){var n=It.document;return n?n.documentMode:void 0}e:{var $f="",Yd=(n=Wn(),js?/rv:([^\);]+)(\)|;)/.exec(n):Bs?/Edge\/([\d\.]+)/.exec(n):Xr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Zd?/WebKit\/(\S+)/.exec(n):Jo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yd&&($f=Yd?Yd[1]:""),Xr){var ll=Bf();if(null!=ll&&ll>parseFloat($f)){Qd=String(ll);break e}}Qd=$f}var bc={};var Rg=It.document&&Xr&&(Bf()||parseInt(Qd,10))||void 0;function Xd(n,e){if(Xe.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(js){e:{try{Vs(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:i_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xd.X.h.call(this)}}M(Xd,Xe);var i_={2:"touch",3:"pen",4:"mouse"};Xd.prototype.h=function(){Xd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dc="closure_listenable_"+(1e6*Math.random()|0),jf=0;function Pg(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++jf,this.ba=this.ea=!1}function Hf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Tc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function s_(n){const e={};for(const t in n)e[t]=n[t];return e}const o_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function a_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<o_.length;u++)t=o_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eh(n){this.src=n,this.g={},this.h=0}function Ng(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=ie(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Hf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gf(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}eh.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Gf(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Pg(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var th="closure_lm_"+(1e6*Math.random()|0),Cc={};function Sc(n,e,t,r,i){if(r&&r.once)return ds(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sc(n,e[u],t,r,i);return null}return t=Kf(t),n&&n[Dc]?n.N(e,t,Qo(r)?!!r.capture:!!r,i):zf(n,e,t,!1,r,i)}function zf(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Qo(i)?!!i.capture:!!i,f=cl(n);if(f||(n[th]=f=new eh(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function nh(){const e=kg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ct||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(rh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ds(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ds(n,e[u],t,r,i);return null}return t=Kf(t),n&&n[Dc]?n.O(e,t,Qo(r)?!!r.capture:!!r,i):zf(n,e,t,!0,r,i)}function qf(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)qf(n,e[u],t,r,i);else r=Qo(r)?!!r.capture:!!r,t=Kf(t),n&&n[Dc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gf(u=n.g[e],t,r,i))&&(Hf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=cl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gf(e,t,r,i)),(t=-1<n?e[n]:null)&&Wf(t))}function Wf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Dc])Ng(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(rh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cl(e))?(Ng(t,n),0==t.h&&(t.src=null,e[th]=null)):Hf(n)}}}function rh(n){return n in Cc?Cc[n]:Cc[n]="on"+n}function kg(n,e){if(n.ba)n=!0;else{e=new Xd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Wf(n),n=t.call(r,e)}return n}function cl(n){return(n=n[th])instanceof eh?n:null}var ih="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kf(n){return"function"==typeof n?n:(n[ih]||(n[ih]=function(e){return n.handleEvent(e)}),n[ih])}function Er(){F.call(this),this.i=new eh(this),this.P=this,this.I=null}function Ir(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Xe(e,n);else if(e instanceof Xe)e.target=e.target||n;else{var i=e;a_(e=new Xe(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=sh(c,r,!0,e)&&i}if(i=sh(c=e.g=n,r,!0,e)&&i,i=sh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=sh(c=e.g=t[u],r,!1,e)&&i}function sh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var f=c.listener,y=c.ha||c.src;c.ea&&Ng(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}M(Er,F),Er.prototype[Dc]=!0,Er.prototype.removeEventListener=function(n,e,t,r){qf(this,n,e,t,r)},Er.prototype.M=function(){if(Er.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hf(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Zf=It.JSON.stringify;function $r(){var n=Yf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hl,Og=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mo,n=>n.reset());class mo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jr(n){It.setTimeout(()=>{throw n},0)}function dl(n,e){hl||function u_(){var n=It.Promise.resolve(void 0);hl=function(){n.then(l_)}}(),Ac||(hl(),Ac=!0),Yf.add(n,e)}var Ac=!1,Yf=new class Qf{constructor(){this.h=this.g=null}add(e,t){const r=Og.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function l_(){for(var n;n=$r();){try{n.h.call(n.g)}catch(t){jr(t)}var e=Og;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ac=!1}function Ka(n,e){Er.call(this),this.h=n||1,this.g=e||It,this.j=D(this.lb,this),this.l=Date.now()}function Jf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function oh(n,e,t){if("function"==typeof n)t&&(n=D(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=D(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function ah(n){n.g=oh(()=>{n.g=null,n.i&&(n.i=!1,ah(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}M(Ka,Er),(ot=Ka.prototype).ca=!1,ot.R=null,ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ir(this,"tick"),this.ca&&(Jf(this),this.start()))}},ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Ka.X.M.call(this),Jf(this),delete this.g};class c_ extends F{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ah(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(n){F.call(this),this.h=n,this.g={}}M(Za,F);var uh=[];function Lg(n,e,t,r){Array.isArray(t)||(t&&(uh[0]=t.toString()),t=uh);for(var i=0;i<t.length;i++){var u=Sc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Xf(n){Tc(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wf(e)},n),n.g={}}function xc(){this.g=!0}function fl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Zf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Za.prototype.M=function(){Za.X.M.call(this),Xf(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xc.prototype.Aa=function(){this.g=!1},xc.prototype.info=function(){};var Xo={},h_=null;function Ui(){return h_=h_||new Er}function lh(n){Xe.call(this,Xo.Pa,n)}function pl(n){const e=Ui();Ir(e,new lh(e))}function Fg(n,e){Xe.call(this,Xo.STAT_EVENT,n),this.stat=e}function br(n){const e=Ui();Ir(e,new Fg(e,n))}function Ug(n,e){Xe.call(this,Xo.Qa,n),this.size=e}function Pc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Xo.Pa="serverreachability",M(lh,Xe),Xo.STAT_EVENT="statevent",M(Fg,Xe),Xo.Qa="timingevent",M(Ug,Xe);var ch={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Vg={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ya(){}function dh(){}Ya.prototype.h=null;var ep,Ja={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function hh(){Xe.call(this,"d")}function Nc(){Xe.call(this,"c")}function kc(){}function ea(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Za(this),this.O=ta,this.T=new Ka(n=$s?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Oc}function Oc(){this.i=null,this.g="",this.h=!1}M(hh,Xe),M(Nc,Xe),M(kc,Ya),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},ep=new kc;var ta=45e3,fh={},Xa={};function tp(n,e,t){n.K=1,n.v=ra(Vi(e)),n.s=t,n.P=!0,bi(n,null)}function bi(n,e){n.F=Date.now(),na(n),n.A=Vi(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),P(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Oc,n.g=b_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new c_(D(n.La,n,n.g),n.N)),Lg(n.S,n.g,"readystatechange",n.ib),e=n.H?s_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),pl(),function Qa(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var T=E[0];E=E[1];var x=T.split("_");c=2<=x.length&&"type"==x[1]?c+(T+"=")+E+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function yo(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function np(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=$g(n,t),i==Xa){4==e&&(n.o=4,br(14),r=!1),fl(n.j,n.m,null,"[Incomplete Response]");break}if(i==fh){n.o=4,br(15),fl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fl(n.j,n.m,i,null),Di(n,i)}yo(n)&&i!=Xa&&i!=fh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,br(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),I_(e),e.K=!0,br(11))):(fl(n.j,n.m,t,"[Invalid Chunked Response]"),Hs(n),eu(n))}function $g(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xa:(t=Number(e.substring(t,r)),isNaN(t)?fh:(r+=1)+t>e.length?Xa:(e=e.substr(r,t),n.C=r+t,e))}function na(n){n.V=Date.now()+n.O,Lc(n,n.O)}function Lc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pc(D(n.gb,n),e)}function gl(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function eu(n){0==n.l.G||n.I||Hw(n.l,n)}function Hs(n){gl(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jf(n.T),Xf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Di(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ir(t.h,n)))if(!n.J&&ir(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Qg(t),qg(t)}E_(t),br(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pc(D(t.cb,t),6e3));if(1>=rr(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else vh(t,11)}else if((n.J||t.g==n)&&Qg(t),!Lt(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const T=E[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const x=E[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const N=E[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const $=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var u=r.h;u.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Gs(u,u.h),u.h=null))}if(r.D){const ne=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.za=ne,dn(r.F,r.D,ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Yg(r,r.H?r.ka:null,r.V),c.J){ap(r.h,c);var f=c,y=r.J;y&&f.setTimeout(y),f.B&&(gl(f),na(f)),r.g=c}else w_(r);0<t.i.length&&Kg(t)}else"stop"!=E[0]&&"close"!=E[0]||vh(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?vh(t,7):_h(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}pl()}catch{}}function ph(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ip(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(pi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function rp(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(pi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ot=ea.prototype).setTimeout=function(n){this.O=n},ot.ib=function(n){n=n.target;const e=this.L;e&&3==sa(n)?e.l():this.La(n)},ot.La=function(n){try{if(n==this.g)e:{const T=sa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||$s||this.g&&(this.h.h||this.g.fa()||Vw(this.g)))){this.I||4!=T||7==e||pl(),gl(this);var t=this.g.aa();this.Y=t;t:if(yo(this)){var r=Vw(this.g);n="";var i=r.length,u=4==sa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),eu(this);var c="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function d_(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lt(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,br(12),Hs(this),eu(this);break e}fl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Di(this,t)}this.P?(np(this,T,c),$s&&this.i&&3==T&&(Lg(this.S,this.T,"tick",this.hb),this.T.start())):(fl(this.j,this.m,c,null),Di(this,c)),4==T&&Hs(this),this.i&&!this.I&&(4==T?Hw(this.l,this):(this.i=!1,na(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,br(12)):(this.o=0,br(13)),Hs(this),eu(this)}}}catch{}},ot.hb=function(){if(this.g){var n=sa(this.g),e=this.g.fa();this.C<e.length&&(gl(this),np(this,n,e),this.i&&4!=n&&na(this))}},ot.cancel=function(){this.I=!0,Hs(this)},ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Mc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pl(),br(17)),Hs(this),this.o=2,eu(this)):Lc(this,this.V-n)};var gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nr(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof nr){this.h=void 0!==e?e:n.h,yl(this,n.j),this.s=n.s,this.g=n.g,mh(this,n.m),this.l=n.l,e=n.i;var t=new h;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),hs(this,t),this.o=n.o}else n&&(t=String(n).match(gh))?(this.h=!!e,yl(this,t[1]||"",!0),this.s=ia(t[2]||""),this.g=ia(t[3]||"",!0),mh(this,t[4]),this.l=ia(t[5]||"",!0),hs(this,t[6]||"",!0),this.o=ia(t[7]||"")):(this.h=!!e,this.i=new h(null,this.h))}function Vi(n){return new nr(n)}function yl(n,e,t){n.j=t?ia(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hs(n,e,t){e instanceof h?(n.i=e,function de(n,e){e&&!n.j&&(g(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(w(this,r),P(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=fs(e,op)),n.i=new h(e,n.h))}function dn(n,e,t){n.i.set(e,t)}function ra(n){return dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ia(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function fs(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(fs(e,jg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(fs(e,jg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(fs(t,"/"==t.charAt(0)?f_:Fw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",fs(t,_)),n.join("")};var jg=/[#\/\?@]/g,Fw=/[#\?:]/g,f_=/[#\?]/g,op=/[#\?@]/g,_=/#/g;function h(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function g(n){n.g||(n.g=new Map,n.h=0,n.i&&function ml(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w(n,e){g(n),e=q(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function A(n,e){return g(n),e=q(n,e),n.g.has(e)}function P(n,e,t){w(n,e),0<t.length&&(n.i=null,n.g.set(q(n,e),De(t)),n.h+=t.length)}function q(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tt(n){this.l=n||St,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ga&&It.g.Ga()&&It.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=h.prototype).add=function(n,e){g(this),this.i=null,n=q(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){g(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.oa=function(){g(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ot.W=function(n){g(this);let e=[];if("string"==typeof n)A(this,n)&&(e=e.concat(this.g.get(q(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return g(this),this.i=null,A(this,n=q(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var St=10;function vt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rr(n){return n.h?1:n.g?n.g.size:0}function ir(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gs(n,e){n.g?n.g.add(e):n.h=e}function ap(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function up(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return De(n.i)}function lp(){}function p_(){this.g=new lp}function Hg(n,e,t){const r=t||"";try{ph(n,function(i,u){let c=i;Qo(i)&&(c=Zf(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _l(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tu(n){this.l=n.ac||null,this.j=n.jb||!1}function Fc(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tt.prototype.cancel=function(){if(this.i=up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lp.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},lp.prototype.parse=function(n){return It.JSON.parse(n,void 0)},M(tu,Ya),tu.prototype.g=function(){return new Fc(this.l,this.j)},tu.prototype.i=function(n){return function(){return n}}({}),M(Fc,Er);var cp=0;function yh(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function nu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ps(n)}function ps(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Fc.prototype).open=function(n,e){if(this.readyState!=cp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ps(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nu(this)),this.readyState=cp},ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yh(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nu(this):ps(this),3==this.readyState&&yh(this)}},ot.Va=function(n){this.g&&(this.response=this.responseText=n,nu(this))},ot.Ua=function(n){this.g&&(this.response=n,nu(this))},ot.ga=function(){this.g&&nu(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dp=It.JSON.parse;function Kn(n){Er.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=m_,this.K=this.L=!1}M(Kn,Er);var m_="",Uw=/^https?$/i,yA=["POST","PUT"];function vD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Gg(n),y_(n)}function Gg(n){n.D||(n.D=!0,Ir(n,"complete"),Ir(n,"error"))}function zg(n){if(n.h&&typeof Ko<"u"&&(!n.C[1]||4!=sa(n)||2!=n.aa()))if(n.v&&4==sa(n))oh(n.Ha,0,n);else if(Ir(n,"readystatechange"),4==sa(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(gh)[1]||null;if(!i&&It.self&&It.self.location){var u=It.self.location.protocol;i=u.substr(0,u.length-1)}r=!Uw.test(i?i.toLowerCase():"")}t=r}if(t)Ir(n,"complete"),Ir(n,"success");else{n.m=6;try{var c=2<sa(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",Gg(n)}}finally{y_(n)}}}function y_(n,e){if(n.g){wD(n);const t=n.g,r=n.C[0]?Zo:null;n.g=null,n.C=null,e||Ir(n,"ready");try{t.onreadystatechange=r}catch{}}}function wD(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function sa(n){return n.g?n.g.readyState:0}function Vw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case m_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Bw(n){let e="";return Tc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function __(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Bw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dn(n,e,t))}function hp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function v_(n){this.Ca=0,this.i=[],this.j=new xc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=hp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=hp("baseRetryDelayMs",5e3,n),this.bb=hp("retryDelaySeedMs",1e4,n),this.$a=hp("forwardChannelMaxRetries",2,n),this.ta=hp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tt(n&&n.concurrentRequestLimit),this.Fa=new p_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function _h(n){if(Wg(n),3==n.G){var e=n.U++,t=Vi(n.F);dn(t,"SID",n.I),dn(t,"RID",e),dn(t,"TYPE","terminate"),fp(n,t),(e=new ea(n,n.j,e,void 0)).K=2,e.v=ra(Vi(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=b_(e.l,null),e.g.da(e.v)),e.F=Date.now(),na(e)}wh(n)}function qg(n){n.g&&(I_(n),n.g.cancel(),n.g=null)}function Wg(n){qg(n),n.u&&(It.clearTimeout(n.u),n.u=null),Qg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Kg(n){vt(n.h)||n.m||(n.m=!0,dl(n.Ja,n),n.C=0)}function $w(n,e){var t;t=e?e.m:n.U++;const r=Vi(n.F);dn(r,"SID",n.I),dn(r,"RID",t),dn(r,"AID",n.T),fp(n,r),n.o&&n.s&&__(r,n.o,n.s),t=new ea(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Zg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Gs(n.h,t),tp(t,r,e)}function fp(n,e){n.ia&&Tc(n.ia,function(t,r){dn(e,r,t)}),n.l&&ph({},function(t,r){dn(e,r,t)})}function Zg(n,e,t){t=Math.min(n.i.length,t);var r=n.l?D(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let E=i[y].h;const T=i[y].g;if(E-=u,0>E)u=Math.max(0,i[y].h-100),f=!1;else try{Hg(T,c,"req"+E+"_")}catch{r&&r(T)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function w_(n){n.g||n.u||(n.Z=1,dl(n.Ia,n),n.A=0)}function E_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Pc(D(n.Ia,n),ED(n,n.A)),n.A++,0))}function I_(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function jw(n){n.g=new ea(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Vi(n.sa);dn(e,"RID","rpc"),dn(e,"SID",n.I),dn(e,"CI",n.L?"0":"1"),dn(e,"AID",n.T),dn(e,"TYPE","xmlhttp"),fp(n,e),n.o&&n.s&&__(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ra(Vi(e)),t.s=null,t.P=!0,bi(t,n)}function Qg(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function Hw(n,e){var t=null;if(n.g==e){Qg(n),I_(n),n.g=null;var r=2}else{if(!ir(n.h,e))return;t=e.D,ap(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ir(r=Ui(),new Ug(r,t)),Kg(n)}else w_(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Dr(n,e){return!(rr(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Pc(D(n.Ja,n,e),ED(n,n.C)),n.C++,0)))}(n,e)||2==r&&E_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:vh(n,5);break;case 4:vh(n,10);break;case 3:vh(n,6);break;default:vh(n,2)}}function ED(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function vh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=D(n.kb,n);t||(t=new nr("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||yl(t,"https"),ra(t)),function g_(n,e){const t=new xc;if(It.Image){const r=new Image;r.onload=C(_l,t,r,"TestLoadImage: loaded",!0,e),r.onerror=C(_l,t,r,"TestLoadImage: error",!1,e),r.onabort=C(_l,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=C(_l,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else br(2);n.G=0,n.l&&n.l.va(e),wh(n),Wg(n)}function wh(n){if(n.G=0,n.la=[],n.l){const e=up(n.h);(0!=e.length||0!=n.i.length)&&(Be(n.la,e),Be(n.la,n.i),n.h.i.length=0,De(n.i),n.i.length=0),n.l.ua()}}function Yg(n,e,t){var r=t instanceof nr?Vi(t):new nr(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mh(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new nr(null,void 0);r&&yl(u,r),e&&(u.g=e),i&&mh(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&dn(r,t,e),dn(r,"VER",n.ma),fp(n,r),r}function b_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Da&&!n.ra?new tu({jb:!0}):n.ra)).Ka(n.H),e}function D_(){}function pp(){if(Xr&&!(10<=Number(Rg)))throw Error("Environmental error: no available transport.")}function gs(n,e){Er.call(this),this.g=new v_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Lt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lt(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vl(this)}function T_(n){hh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function C_(){Nc.call(this),this.status=1}function vl(n){this.g=n}(ot=Kn.prototype).Ka=function(n){this.L=n},ot.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ep.g(),this.C=function Bg(n){return n.h||(n.h=n.i())}(this.u?this.u:ep),this.g.onreadystatechange=D(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void vD(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=ie(yA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wD(this),0<this.B&&((this.K=function _A(n){return Xr&&function n_(){return function go(n){var e=bc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=_t(String(Qd)).split("."),t=_t("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=bn(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||bn(0==i[2].length,0==u[2].length)||bn(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=D(this.qa,this)):this.A=oh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){vD(this,u)}},ot.qa=function(){typeof Ko<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ir(this,"complete"),Ir(this,"abort"),y_(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),y_(this,!0)),Kn.X.M.call(this)},ot.Ha=function(){this.s||(this.F||this.v||this.l?zg(this):this.fb())},ot.fb=function(){zg(this)},ot.aa=function(){try{return 2<sa(this)?this.g.status:-1}catch{return-1}},ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dp(e)}},ot.Ea=function(){return this.m},ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=v_.prototype).ma=8,ot.G=1,ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ea(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=s_(u),a_(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Zg(this,i,e),dn(t=Vi(this.F),"RID",n),dn(t,"CVER",22),this.D&&dn(t,"X-HTTP-Session-Id",this.D),fp(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Bw(u)))+"&"+e:this.o&&__(t,this.o,u)),Gs(this.h,i),this.Ya&&dn(t,"TYPE","init"),this.O?(dn(t,"$req",e),dn(t,"SID","null"),i.Z=!0,tp(i,t,null)):tp(i,t,e),this.G=2}}else 3==this.G&&(n?$w(this,n):0==this.i.length||vt(this.h)||$w(this))},ot.Ia=function(){if(this.u=null,jw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Pc(D(this.eb,this),n)}},ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,br(10),qg(this),jw(this))},ot.cb=function(){null!=this.v&&(this.v=null,qg(this),E_(this),br(19))},ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),br(2)):(this.j.info("Failed to ping google.com"),br(1))},(ot=D_.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Ra=function(){},pp.prototype.g=function(n,e){return new gs(n,e)},M(gs,Er),gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;br(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Yg(n,null,n.V),Kg(n)},gs.prototype.close=function(){_h(this.g)},gs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Zf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Kg(e)},gs.prototype.M=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,gs.X.M.call(this)},M(T_,hh),M(C_,Nc),M(vl,D_),vl.prototype.xa=function(){Ir(this.g,"a")},vl.prototype.wa=function(n){Ir(this.g,new T_(n))},vl.prototype.va=function(n){Ir(this.g,new C_)},vl.prototype.ua=function(){Ir(this.g,"b")},pp.prototype.createWebChannel=pp.prototype.g,gs.prototype.send=gs.prototype.u,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,ch.NO_ERROR=0,ch.TIMEOUT=8,ch.HTTP_ERROR=6,Vg.COMPLETE="complete",dh.EventType=Ja,Ja.OPEN="a",Ja.CLOSE="b",Ja.ERROR="c",Ja.MESSAGE="d",Er.prototype.listen=Er.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var vA=tr.createWebChannelTransport=function(){return new pp},ID=tr.getStatEventTarget=function(){return Ui()},gp=tr.ErrorCode=ch,Gw=tr.EventType=Vg,zw=tr.Event=Xo,wl=tr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},bD=tr.FetchXmlHttpFactory=tu,Eh=tr.WebChannel=dh,Jg=tr.XhrIo=Kn;const qw="@firebase/firestore";class Tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");let ru="9.14.0";const Bi=new fi.Yd("@firebase/firestore");function Xg(){return Bi.logLevel}function Pe(n,...e){if(Bi.logLevel<=fi.in.DEBUG){const t=e.map(Il);Bi.debug(`Firestore (${ru}): ${n}`,...t)}}function gr(n,...e){if(Bi.logLevel<=fi.in.ERROR){const t=e.map(Il);Bi.error(`Firestore (${ru}): ${n}`,...t)}}function El(n,...e){if(Bi.logLevel<=fi.in.WARN){const t=e.map(Il);Bi.warn(`Firestore (${ru}): ${n}`,...t)}}function Il(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function kt(n,e){n||at()}function Ke(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ww{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tr.UNAUTHENTICATED))}shutdown(){}}class wA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TD{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Cr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const E=c;e.enqueueRetryable((0,ce.Z)(function*(){yield E.promise,yield u(r.currentUser)}))},y=E=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Cr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new Ww(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new Tr(e)}}class mp{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class CD{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new mp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yp{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.A=t.token,new Uc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function IA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class A_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=IA(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zw(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Pn(0,0))}static max(){return new Mt(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vc{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends Vc{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Vc{construct(e,t,r){return new $n(e,t,r)}static isValidIdentifier(e){return SD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Xt.fromString(e))}static fromName(e){return new He(Xt.fromString(e).popFirst(5))}static empty(){return new He(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Xt(e.slice()))}}class em{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function x_(n){return n.fields.find(e=>2===e.kind)}function Bc(n){return n.fields.filter(e=>2!==e.kind)}em.UNKNOWN_ID=-1;class tm{constructor(e,t){this.fieldPath=e,this.kind=t}}class _p{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _p(0,ms.min())}}function $c(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new ms(i,He.empty(),e)}function oa(n){return new ms(n.readTime,n.key,-1)}class ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ms(Mt.min(),He.empty(),-1)}static max(){return new ms(Mt.max(),He.empty(),-1)}}function M_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const MD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function iu(n){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,ce.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==MD)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Qw.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const u=e.length,c=new Array(u);let f=0;for(let y=0;y<u;y++){const E=y;t(e[E]).next(T=>{c[E]=T,++f,f===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new oe((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class R_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Cr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new bh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=nm(r.target.error);this.P.reject(new bh(e,i))}}static open(e,t,r,i){try{return new R_(t,e.transaction(i,r))}catch(u){throw new bh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ND(t)}}class zs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===zs.D((0,xt.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),ei(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,xt.hl)())return!1;if(zs.N())return!0;const e=(0,xt.z$)(),t=zs.D(e),r=0<t&&t<10,i=zs.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ce.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new bh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new bh(e,f))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ce.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.F(e);const y=R_.open(u.db,e,c?"readonly":"readwrite",r),E=i(y).next(T=>(y.V(),T)).catch(T=>(y.abort(T),oe.reject(T))).toPromise();return E.catch(()=>{}),yield y.v,E}catch(y){const E=y,T="FirebaseError"!==E.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),u.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class PD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ei(this.U.delete())}}class bh extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bl(n){return"IndexedDbTransactionError"===n.name}class ND{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ei(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),ei(this.store.add(e))}get(e){return ei(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),ei(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),ei(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new oe((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=u=>{const c=nm(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}H(e,t){const r=[];return new oe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new PD(f),E=t(f.primaryKey,f.value,y);if(E instanceof oe){const T=E.catch(x=>(y.done(),oe.reject(x)));r.push(T)}y.isDone?i():null===y.G?f.continue():f.continue(y.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ei(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=nm(r.target.error);t(i)}})}let Yw=!1;function nm(n){const e=zs.D((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yw||(Yw=!0,setTimeout(()=>{throw r},0)),r}}return n}class kD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){bl(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield iu(r)}yield t.nt(6e4)}))}}class OD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return oe.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(f=>{i-=f,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=oa(u);M_(c,r)>0&&(r=c)}),new ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Jw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Xw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}$i.at=-1;class sr{constructor(e,t){this.comparator=e,this.root=t||gt.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rm(this.root,e,this.comparator,!0)}}class rm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??gt.RED,this.left=i??gt.EMPTY,this.right=u??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new gt(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1,gt.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new gt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jc(n){return n.hasNext()?n.getNext():void 0}class ys{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new ys([])}unionWith(e){let t=new vn($n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(n){if(kt(!!n),"string"==typeof n){let e=0;const t=FD.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:or(n.seconds),nanos:or(n.nanos)}}function or(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hc(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function eE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function N_(n){const e=n.mapValue.fields.__previous_value__;return eE(e)?N_(e):e}function Dh(n){const e=su(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class Gc{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}function zc(n){return null==n}function qc(n){return 0===n&&1/n==-1/0}function tE(n){return"number"==typeof n&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},k_={nullValue:"NULL_VALUE"};function Th(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eE(n)?4:iE(n)?9007199254740991:10:at()}function aa(n,e){if(n===e)return!0;const t=Th(n);if(t!==Th(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dh(n).isEqual(Dh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=su(r.timestampValue),c=su(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Hc(n.bytesValue).isEqual(Hc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return or(r.geoPointValue.latitude)===or(i.geoPointValue.latitude)&&or(r.geoPointValue.longitude)===or(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return or(r.integerValue)===or(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=or(r.doubleValue),c=or(i.doubleValue);return u===c?qc(u)===qc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Ih(n.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Jw(u)!==Jw(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!aa(u[f],c[f])))return!1;return!0}(n,e);default:return at()}var i}function Ch(n,e){return void 0!==(n.values||[]).find(t=>aa(t,e))}function Kc(n,e){if(n===e)return 0;const t=Th(n),r=Th(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=or(i.integerValue||i.doubleValue),f=or(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return nE(n.timestampValue,e.timestampValue);case 4:return nE(Dh(n),Dh(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Hc(i),f=Hc(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const E=Bt(c[y],f[y]);if(0!==E)return E}return Bt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Bt(or(i.latitude),or(u.latitude));return 0!==c?c:Bt(or(i.longitude),or(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const E=Kc(c[y],f[y]);if(E)return E}return Bt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Wc.mapValue&&u===Wc.mapValue)return 0;if(i===Wc.mapValue)return 1;if(u===Wc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=u.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let T=0;T<f.length&&T<E.length;++T){const x=Bt(f[T],E[T]);if(0!==x)return x;const N=Kc(c[f[T]],y[E[T]]);if(0!==N)return N}return Bt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw at()}}function nE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=su(n),r=su(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function _o(n){return O_(n)}function O_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=su(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=O_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${O_(r.fields[f])}`;return u+"}"}(n.mapValue):at();var e}function Cl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sh(n){return!!n&&"integerValue"in n}function vp(n){return!!n&&"arrayValue"in n}function L_(n){return!!n&&"nullValue"in n}function rE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function im(n){return!!n&&"mapValue"in n}function wp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UD(n){return"nullValue"in n?k_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cl(Tl.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function sE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cl(Tl.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wc:at()}function oE(n,e){const t=Kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function F_(n,e){const t=Kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!im(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wp(t)}setAll(e){let t=$n.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=wp(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());im(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];im(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Hr(wp(this.value))}}function sm(n){const e=[];return Dl(n.fields,(t,r)=>{const i=new $n([t]);if(im(r)){const u=sm(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new ys(e)}class Nn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Nn(e,0,Mt.min(),Mt.min(),Hr.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Mt.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Mt.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class U_{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.ht=null}}function aE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new U_(n,e,t,r,i,u,c)}function Ah(n){const e=Ke(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+_o(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_o(r)).join(",")),e.ht=t}return e.ht}function Mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!G_(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!aa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!am(n.startAt,e.startAt)&&am(n.endAt,e.endAt)}function Ep(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zc(n,e){return n.filters.filter(t=>t instanceof ti&&t.field.isEqual(e))}function qs(n,e,t){let r=k_,i=!0;for(const u of Zc(n,e)){let c=k_,f=!0;switch(u.op){case"<":case"<=":c=UD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=k_}oE({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];oE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function V_(n,e,t){let r=Wc,i=!0;for(const u of Zc(n,e)){let c=Wc,f=!0;switch(u.op){case">=":case">":c=sE(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=Wc}F_({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];F_({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new B_(e,t,r):"array-contains"===t?new H_(e,r):"in"===t?new bA(e,r):"not-in"===t?new uE(e,r):"array-contains-any"===t?new DA(e,r):new ti(e,t,r)}static lt(e,t,r){return"in"===t?new ou(e,r):new $_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Kc(t,this.value)):null!==t&&Th(this.value)===Th(t)&&this.ft(Kc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class B_ extends ti{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.ft(t)}}class ou extends ti{constructor(e,t){super(e,"in",t),this.keys=j_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $_ extends ti{constructor(e,t){super(e,"not-in",t),this.keys=j_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function j_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class H_ extends ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vp(t)&&Ch(t.arrayValue,this.value)}}class bA extends ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ch(this.value.arrayValue,t)}}class uE extends ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ch(this.value.arrayValue,t)}}class DA extends ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ch(this.value.arrayValue,r))}}class vo{constructor(e,t){this.position=e,this.inclusive=t}}class au{constructor(e,t="asc"){this.field=e,this.dir=t}}function G_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function om(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):Kc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function am(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!aa(n.position[t],e.position[t]))return!1;return!0}class Sl{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this._t=null,this.wt=null}}function lE(n,e,t,r,i,u,c,f){return new Sl(n,e,t,r,i,u,c,f)}function Rh(n){return new Sl(n)}function cE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function z_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function um(n){for(const e of n.filters)if(e.dt())return e.field;return null}function dE(n){return null!==n.collectionGroup}function Ph(n){const e=Ke(n);if(null===e._t){e._t=[];const t=um(e),r=z_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new au(t)),e._t.push(new au($n.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new au($n.keyField(),u))}}}return e._t}function ji(n){const e=Ke(n);if(!e.wt)if("F"===e.limitType)e.wt=aE(e.path,e.collectionGroup,Ph(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ph(e))t.push(new au(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vo(e.startAt.position,e.startAt.inclusive):null;e.wt=aE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ip(n,e,t){return new Sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nh(n,e){return Mh(ji(n),ji(e))&&n.limitType===e.limitType}function hE(n){return`${Ah(ji(n))}|lt:${n.limitType}`}function bp(n){return`Query(target=${function xh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${_o(r.value)}`;var r}).join(", ")}]`),zc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>_o(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>_o(t)).join(",")),`Target(${e})`}(ji(n))}; limitType=${n.limitType})`}function fE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=om(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Ph(t),r)||t.endAt&&!function(i,u,c){const f=om(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Ph(t),r)));var t,r}function VD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BD(n){return(e,t)=>{let r=!1;for(const i of Ph(n)){const u=TA(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function TA(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?Kc(f,y):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function $D(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function jD(n){return{integerValue:""+n}}function HD(n,e){return tE(e)?jD(e):$D(n,e)}class q_{constructor(){this._=void 0}}function CA(n,e,t){return n instanceof Al?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Qc?W_(n,e):n instanceof lu?K_(n,e):function(r,i){const u=uu(r,i),c=pE(u)+pE(r.yt);return Sh(u)&&Sh(r.yt)?jD(c):$D(r.It,c)}(n,e)}function SA(n,e,t){return n instanceof Qc?W_(n,e):n instanceof lu?K_(n,e):t}function uu(n,e){return n instanceof xl?Sh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Al extends q_{}class Qc extends q_{constructor(e){super(),this.elements=e}}function W_(n,e){const t=cu(e);for(const r of n.elements)t.some(i=>aa(i,r))||t.push(r);return{arrayValue:{values:t}}}class lu extends q_{constructor(e){super(),this.elements=e}}function K_(n,e){let t=cu(e);for(const r of n.elements)t=t.filter(i=>!aa(i,r));return{arrayValue:{values:t}}}class xl extends q_{constructor(e,t){super(),this.It=e,this.yt=t}}function pE(n){return or(n.integerValue||n.doubleValue)}function cu(n){return vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kh{constructor(e,t){this.field=e,this.transform=t}}class zD{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cm{}function Dp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Jc(n.key,kn.none()):new du(n.key,n.data,kn.none());{const t=n.data,r=Hr.empty();let i=new vn($n.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new ua(n.key,r,new ys(i.toArray()),kn.none())}}function Oh(n,e,t){n instanceof du?function(r,i,u){const c=r.value.clone(),f=hm(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ua?function(r,i,u){if(!lm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=hm(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(Z_(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yc(n,e,t,r){return n instanceof du?function(i,u,c,f){if(!lm(i.precondition,u))return c;const y=i.value.clone(),E=fm(i.fieldTransforms,f,u);return y.setAll(E),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ua?function(i,u,c,f){if(!lm(i.precondition,u))return c;const y=fm(i.fieldTransforms,f,u),E=u.data;return E.setAll(Z_(i)),E.setAll(y),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,lm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function Lh(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=uu(r.transform,i||null);null!=u&&(null===t&&(t=Hr.empty()),t.set(r.field,u))}return t||null}function dm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ih(t,r,(i,u)=>function GD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qc&&r instanceof Qc||t instanceof lu&&r instanceof lu?Ih(t.elements,r.elements,aa):t instanceof xl&&r instanceof xl?aa(t.yt,r.yt):t instanceof Al&&r instanceof Al);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class du extends cm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ua extends cm{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Z_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hm(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,SA(c,f,t[i]))}return r}function fm(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,CA(u,c,e))}return r}class Jc extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tp extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qD{constructor(e){this.count=e}}var kr,an;function Q_(n){switch(n){default:return at();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function gE(n){if(void 0===n)return gr("GRPC error has no .code"),he.UNKNOWN;switch(n){case kr.OK:return he.OK;case kr.CANCELLED:return he.CANCELLED;case kr.UNKNOWN:return he.UNKNOWN;case kr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case kr.INTERNAL:return he.INTERNAL;case kr.UNAVAILABLE:return he.UNAVAILABLE;case kr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case kr.NOT_FOUND:return he.NOT_FOUND;case kr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case kr.ABORTED:return he.ABORTED;case kr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case kr.DATA_LOSS:return he.DATA_LOSS;default:return at()}}(an=kr||(kr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Xw(this.inner)}size(){return this.innerSize}}const mE=new sr(He.comparator);function Hi(){return mE}const Gi=new sr(He.comparator);function Fh(...n){let e=Gi;for(const t of n)e=e.insert(t.key,t);return e}function yE(n){let e=Gi;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fu(){return Xc()}function _E(){return Xc()}function Xc(){return new hu(n=>n.toString(),(n,e)=>n.isEqual(e))}const vE=new sr(He.comparator),WD=new vn(He.comparator);function Gt(...n){let e=WD;for(const t of n)e=e.add(t);return e}const KD=new vn(Bt);function Cp(){return KD}class Sp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sp(Mt.min(),i,Cp(),Hi(),Gt())}}class Uh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uh(r,t,Gt(),Gt(),Gt())}}class pm{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class wE{constructor(e,t){this.targetId=e,this.At=t}}class Y_{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class J_{constructor(){this.Rt=0,this.bt=gm(),this.Pt=Sr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Gt(),t=Gt(),r=Gt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Uh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=gm()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ZD{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Hi(),this.qt=wo(),this.Kt=new vn(Bt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Ep(u))if(0===r){const c=new He(u.path);this.jt(t,c,Nn.newNoDocument(c,Mt.min()))}else kt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const f=this.Xt(c);if(f){if(u.current&&Ep(f.target)){const y=new He(f.target.path);null!==this.Ut.get(y)||this.ee(c,y)||this.jt(c,y,Nn.newNoDocument(y,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Gt();this.qt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const E=this.Xt(y);return!E||2===E.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Sp(e,t,this.Kt,this.Ut,r);return this.Ut=Hi(),this.qt=wo(),this.Kt=new vn(Bt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new J_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new vn(Bt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new J_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function wo(){return new sr(He.comparator)}function gm(){return new sr(He.comparator)}const QD={asc:"ASCENDING",desc:"DESCENDING"},YD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AA{constructor(e,t){this.databaseId=e,this.gt=t}}function Vh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function JD(n,e){return Vh(n,e.toTimestamp())}function Gr(n){return kt(!!n),Mt.fromTimestamp(function(e){const t=su(e);return new Pn(t.seconds,t.nanos)}(n))}function Ap(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function IE(n){const e=Xt.fromString(n);return kt(iT(e)),e}function xp(n,e){return Ap(n.databaseId,e.path)}function _s(n,e){const t=IE(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(ym(t))}function Mp(n,e){return Ap(n.databaseId,e)}function Rp(n){const e=IE(n);return 4===e.length?Xt.emptyPath():ym(e)}function mm(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ym(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function XD(n,e,t){return{name:xp(n,e),fields:t.value.mapValue.fields}}function X_(n,e,t){const r=_s(n,e.name),i=Gr(e.updateTime),u=new Hr({mapValue:{fields:e.fields}}),c=Nn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Bh(n,e){let t;if(e instanceof du)t={update:XD(n,e.key,e.value)};else if(e instanceof Jc)t={delete:xp(n,e.key)};else if(e instanceof ua)t={update:XD(n,e.key,e.data),updateMask:rT(e.fieldMask)};else{if(!(e instanceof Tp))return at();t={verify:xp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Al)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xl)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:JD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Pp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kn.updateTime(Gr(i.updateTime)):void 0!==i.exists?kn.exists(i.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(kt("REQUEST_TIME"===c.setToServerValue),f=new Al):"appendMissingElements"in c?f=new Qc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new lu(c.removeAllFromArray.values||[]):"increment"in c?f=new xl(u,c.increment):at();const y=$n.fromServerFormat(c.fieldPath);return new kh(y,f)}(n,i)):[];var i;if(e.update){const i=_s(n,e.update.name),u=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ys((e.updateMask.fieldPaths||[]).map(E=>$n.fromServerFormat(E)));return new ua(i,u,c,t,r)}return new du(i,u,t,r)}if(e.delete){const i=_s(n,e.delete);return new Jc(i,t)}if(e.verify){const i=_s(n,e.verify);return new Tp(i,t)}return at()}function Np(n,e){return{documents:[Mp(n,e.path)]}}function $h(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Mp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Mp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const E=y.map(T=>function(x){if("=="===x.op){if(rE(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NAN"}};if(L_(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(rE(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NOT_NAN"}};if(L_(x.value))return{unaryFilter:{field:Hh(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh(x.field),op:tT(x.op),value:x.value}}}(T));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(E=>{return{field:Hh((T=E).field),direction:TE(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(E=e.limit,n.gt||zc(E)?E:{value:E});var E,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function jh(n){let e=Rp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=_m(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new au(la((x=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(T){let x;return x="object"==typeof T?T.value:T,zc(x)?null:x}(t.limit));let y=null;var T;t.startAt&&(y=new vo((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new vo(T.values||[],!T.before)}(t.endAt)),lE(e,i,c,u,f,"F",y,E)}function _m(n){return n?void 0!==n.unaryFilter?[xA(n)]:void 0!==n.fieldFilter?[nT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>_m(e)).reduce((e,t)=>e.concat(t)):at():[]}function TE(n){return QD[n]}function tT(n){return YD[n]}function Hh(n){return{fieldPath:n.canonicalString()}}function la(n){return $n.fromServerFormat(n.fieldPath)}function nT(n){return ti.create(la(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function xA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=la(n.unaryFilter.field);return ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=la(n.unaryFilter.field);return ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=la(n.unaryFilter.field);return ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=la(n.unaryFilter.field);return ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function rT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CE(e)),e=sT(n.get(t),e);return CE(e)}function sT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function CE(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:at()}u=c+2}return new Xt(r)}const ev=["userId","batchId"];function vm(n,e){return[n,Ti(e)]}function wm(n,e,t){return[n,Ti(e),t]}const oT={},aT=["prefixPath","collectionGroup","readTime","documentId"],uT=["prefixPath","collectionGroup","documentId"],lT=["collectionGroup","readTime","prefixPath","documentId"],cT=["canonicalId","targetId"],dT=["targetId","path"],Em=["path","targetId"],ed=["collectionId","parent"],MA=["indexId","uid"],kp=["uid","sequenceNumber"],hT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fT=["indexId","uid","orderedDocumentKey"],tv=["userId","collectionPath","documentId"],pT=["userId","collectionPath","largestBatchId"],ca=["userId","collectionGroup","largestBatchId"],Gh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gi=[...Gh,"documentOverlays"],Ml=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Op=Ml,Ws=[...Op,"indexConfiguration","indexState","indexEntries"];class Lp extends RD{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Zn(n,e){const t=Ke(n);return zs.M(t.ie,e)}class Rl{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Oh(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_E();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(i.key)?null:f;const y=Dp(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Ih(this.mutations,e.mutations,(t,r)=>dm(t,r))&&Ih(this.baseMutations,e.baseMutations,(t,r)=>dm(t,r))}}class Pl{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=vE;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Pl(e,t,r,i)}}class Nl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vs{constructor(e,t,r,i,u=Mt.min(),c=Mt.min(),f=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class td{constructor(e){this.re=e}}function nd(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:xp(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kl(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:kl(e.version)}}var i,u;return r}function gu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ol(n){const e=new Pn(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Ll(n,e){const t=(e.baseMutations||[]).map(u=>Pp(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Pp(n.re,u)),i=Pn.fromMillis(e.localWriteTimeMs);return new Rl(e.batchId,i,t,r)}function qh(n){const e=Ol(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ol(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=ji(Rh(Rp(i.documents[0])))):r=ji(jh(n.query)),new vs(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function nv(n,e){const t=kl(e.snapshotVersion),r=kl(e.lastLimboFreeSnapshotVersion);let i;i=Ep(e.target)?Np(n.re,e.target):$h(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ah(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Im(n){const e=jh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ip(e,e.limit,"L"):e}function bm(n,e){return new Nl(e.largestBatchId,Pp(n.re,e.overlayMutation))}function rv(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function iv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kl(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class gT{getBundleMetadata(e,t){return SE(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ol(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return SE(e).put({bundleId:(r=t).id,createTime:kl(Gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Im(i.bundledQuery),readTime:Ol(i.readTime)};var i})}saveNamedQuery(e,t){return sv(e).put({name:(r=t).name,readTime:kl(Gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SE(n){return Zn(n,"bundles")}function sv(n){return Zn(n,"namedQueries")}class Dm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Dm(e,t.uid||"")}getOverlay(e,t){return Wh(e).get(rv(this.userId,t)).next(r=>r?bm(this.It,r):null)}getOverlays(e,t){const r=fu();return oe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new Nl(t,c);i.push(this.ue(e,f))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ti(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Wh(e).Y("collectionPathOverlayIndex",f))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=fu(),u=Ti(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wh(e).W("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const E=bm(this.It,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=fu();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wh(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,E,T)=>{const x=bm(this.It,E);u.size()<i||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return Wh(e).put(function(r,i,u){const[c,f,y]=rv(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Bh(r.re,u.mutation)}}(this.It,this.userId,t))}}function Wh(n){return Zn(n,"documentOverlays")}class mu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(or(e.integerValue));else if("doubleValue"in e){const r=or(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),qc(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Hc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?iE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):at()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),He.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function ov(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function AE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=ov(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}mu.Te=new mu;class Tm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=AE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=AE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Cm{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class av{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Fp{constructor(){this.Be=new Tm,this.Le=new Cm(this.Be),this.Ue=new av(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class da{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new da(this.indexId,this.documentKey,this.arrayValue,r)}}function ha(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uv(n.arrayValue,e.arrayValue),0!==t?t:(t=uv(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function uv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=x_(e);if(void 0!==t&&!this.ze(t))return!1;const r=Bc(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lv{constructor(){this.Ye=new Sm}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ms.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Sm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Xt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Xt.comparator)).toArray()}}const Up=new Uint8Array(0);class cv{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Sm,this.Ze=new hu(r=>Ah(r),(r,i)=>Mh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ti(i)};return dv(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zw(t),""],!1,!0);return dv(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Eo(c.parent))}return r})}addFieldIndex(e,t){const r=Bp(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Kh(e);return u.next(f=>{c.put(iv(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Bp(e),i=Kh(e),u=Vp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Vp(e);let i=!0;const u=new Map;return oe.forEach(this.tn(t),c=>this.en(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=Gt();const f=[];return oe.forEach(u,(y,E)=>{var T;Pe("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Ah(t)}`);const x=function(Qe,We){const wt=x_(We);if(void 0===wt)return null;for(const bt of Zc(Qe,wt.fieldPath))switch(bt.op){case"array-contains-any":return bt.value.arrayValue.values||[];case"array-contains":return[bt.value]}return null}(E,y),N=function(Qe,We){const wt=new Map;for(const bt of Bc(We))for(const Qt of Zc(Qe,bt.fieldPath))switch(Qt.op){case"==":case"in":wt.set(bt.fieldPath.canonicalString(),Qt.value);break;case"not-in":case"!=":return wt.set(bt.fieldPath.canonicalString(),Qt.value),Array.from(wt.values())}return null}(E,y),U=function(Qe,We){const wt=[];let bt=!0;for(const Qt of Bc(We)){const Lr=0===Qt.kind?qs(Qe,Qt.fieldPath,Qe.startAt):V_(Qe,Qt.fieldPath,Qe.startAt);wt.push(Lr.value),bt&&(bt=Lr.inclusive)}return new vo(wt,bt)}(E,y),$=function(Qe,We){const wt=[];let bt=!0;for(const Qt of Bc(We)){const Lr=0===Qt.kind?V_(Qe,Qt.fieldPath,Qe.endAt):qs(Qe,Qt.fieldPath,Qe.endAt);wt.push(Lr.value),bt&&(bt=Lr.inclusive)}return new vo(wt,bt)}(E,y),ne=this.nn(y,E,U),ue=this.nn(y,E,$),je=this.sn(y,E,N),et=this.rn(y.indexId,x,ne,U.inclusive,ue,$.inclusive,je);return oe.forEach(et,Qe=>r.J(Qe,t.limit).next(We=>{We.forEach(wt=>{const bt=He.fromSegments(wt.documentKey);c.has(bt)||(c=c.add(bt),f.push(bt))})}))}).next(()=>f)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),E=y/(null!=t?t.length:1),T=[];for(let x=0;x<y;++x){const N=t?this.on(t[x/E]):Up,U=this.un(e,N,r[x%E],i),$=this.cn(e,N,u[x%E],c),ne=f.map(ue=>this.un(e,N,ue,!0));T.push(...this.createRange(U,$,ne))}return T}un(e,t,r,i){const u=new da(e,He.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new da(e,He.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new xE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.We(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new vn($n.comparator),y=!1;for(const E of c.filters){const T=E;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:f=f.add(T.field))}for(const E of c.orderBy)E.field.isKeyField()||(f=f.add(E.field));return f.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Fp;for(const i of Bc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);mu.Te.ce(u,c)}return r.$e()}on(e){const t=new Fp;return mu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Fp;return mu.Te.ce(Cl(this.databaseId,t),r.qe(function(i){const u=Bc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Fp);let u=0;for(const c of Bc(e)){const f=r[u++];for(const y of i)if(this.ln(t,c.fieldPath)&&vp(f))i=this.fn(i,c,f);else{const E=y.qe(c.kind);mu.Te.ce(f,E)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new Fp;y.seed(f.$e()),mu.Te.ce(c,y.qe(t.kind)),u.push(y)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ti&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bp(e),i=Kh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return oe.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(E,T){const x=T?new _p(T.sequenceNumber,new ms(Ol(T.readTime),new He(Eo(T.documentKey)),T.largestBatchId)):_p.empty(),N=E.fields.map(([U,$])=>new tm($n.fromServerFormat(U),$));return new em(E.indexId,E.collectionGroup,N,x)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Bp(e),u=Kh(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>oe.forEach(f,y=>u.put(iv(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?oe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),oe.forEach(f,y=>this.wn(e,i,y).next(E=>{const T=this.mn(u,y);return E.isEqual(T)?oe.resolve():this.gn(e,u,y,E,T)}))))})}yn(e,t,r,i){return Vp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Vp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Vp(e);let u=new vn(ha);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,f)=>{u=u.add(new da(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}mn(e,t){let r=new vn(ha);const i=this.an(t,e);if(null==i)return r;const u=x_(t);if(null!=u){const c=e.data.field(u.fieldPath);if(vp(c))for(const f of c.arrayValue.values||[])r=r.add(new da(t.indexId,e.key,this.on(f),i))}else r=r.add(new da(t.indexId,e.key,Up,i));return r}gn(e,t,r,i,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,E,T,x){const N=f.getIterator(),U=y.getIterator();let $=jc(N),ne=jc(U);for(;$||ne;){let ue=!1,je=!1;if($&&ne){const et=E($,ne);et<0?je=!0:et>0&&(ue=!0)}else null!=$?je=!0:ue=!0;ue?(T(ne),ne=jc(U)):je?(x($),$=jc(N)):($=jc(N),ne=jc(U))}}(i,u,ha,f=>{c.push(this.yn(e,t,r,f))},f=>{c.push(this.pn(e,t,r,f))}),oe.waitFor(c)}_n(e){let t=1;return Kh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>ha(c,f)).filter((c,f,y)=>!f||0!==ha(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=ha(c,e),y=ha(c,t);if(0===f)i[0]=e.Ke();else if(f>0&&y<0)i.push(c),i.push(c.Ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Up,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Up,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hv)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||at())).next(hv)}}function dv(n){return Zn(n,"collectionParents")}function Vp(n){return Zn(n,"indexEntries")}function Bp(n){return Zn(n,"indexConfiguration")}function Kh(n){return Zn(n,"indexState")}function hv(n){kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;M_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ms(e.readTime,e.documentKey,t)}const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ME(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Z({range:c},(T,x,N)=>(f++,N.delete()));u.push(y.next(()=>{kt(1===f)}));const E=[];for(const T of t.mutations){const x=wm(e,T.key.path,t.batchId);u.push(i.delete(x)),E.push(T.key)}return oe.waitFor(u).next(()=>E)}function Am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class $p{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){kt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new $p(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=rd(e),c=yu(e);return c.add({}).next(f=>{kt("number"==typeof f);const y=new Rl(f,t,r,i),E=function(N,U,$){const ne=$.baseMutations.map(je=>Bh(N.re,je)),ue=$.mutations.map(je=>Bh(N.re,je));return{userId:U,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:ne,mutations:ue}}(this.It,this.userId,y),T=[];let x=new vn((N,U)=>Bt(N.canonicalString(),U.canonicalString()));for(const N of i){const U=wm(this.userId,N.key.path,f);x=x.add(N.key.path.popLast()),T.push(c.put(E)),T.push(u.put(U,oT))}return x.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[f]=y.keys()}),oe.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return yu(e).get(t).next(r=>r?(kt(r.userId===this.userId),Ll(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yu(e).Z({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(kt(f.batchId>=r),u=Ll(this.It,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ll(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return rd(e).Z({range:i},(c,f,y)=>{const[E,T,x]=c,N=Eo(T);if(E===this.userId&&t.path.isEqual(N))return yu(e).get(x).next(U=>{if(!U)throw at();kt(U.userId===this.userId),u.push(Ll(this.It,U))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Bt);const i=[];return t.forEach(u=>{const c=vm(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=rd(e).Z({range:f},(E,T,x)=>{const[N,U,$]=E,ne=Eo(U);N===this.userId&&u.path.isEqual(ne)?r=r.add($):x.done()});i.push(y)}),oe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=vm(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new vn(Bt);return rd(e).Z({range:c},(y,E,T)=>{const[x,N,U]=y,$=Eo(N);x===this.userId&&r.isPrefixOf($)?$.length===i&&(f=f.add(U)):T.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(yu(e).get(u).next(c=>{if(null===c)throw at();kt(c.userId===this.userId),r.push(Ll(this.It,c))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ME(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return rd(e).Z({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Eo(u[1]);i.push(y)}else f.done()}).next(()=>{kt(0===i.length)})})}containsKey(e,t){return xm(e,this.userId,t)}Rn(e){return pv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xm(n,e,t){const r=vm(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return rd(n).Z({range:u,X:!0},(f,y,E)=>{const[T,x,N]=f;T===e&&x===i&&(c=!0),E.done()}).next(()=>c)}function yu(n){return Zn(n,"mutations")}function rd(n){return Zn(n,"documentMutations")}function pv(n){return Zn(n,"mutationQueues")}class Fl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fl(0)}static vn(){return new Fl(-1)}}class RE{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Fl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>id(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return id(e).Z((c,f)=>{const y=qh(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>oe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return id(e).Z((r,i)=>{const u=qh(i);t(u)})}Vn(e){return gv(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}Sn(e,t){return gv(e).put("targetGlobalKey",t)}Dn(e,t){return id(e).put(nv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ah(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return id(e).Z({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const E=qh(f);Mh(t,E.target)&&(u=E,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=_u(e);return t.forEach(c=>{const f=Ti(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=_u(e);return oe.forEach(t,u=>{const c=Ti(u.path);return oe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_u(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_u(e);let u=Gt();return i.Z({range:r,X:!0},(c,f,y)=>{const E=Eo(c[1]),T=new He(E);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),i=IDBKeyRange.bound([r],[Zw(r)],!1,!0);let u=0;return _u(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,f],y,E)=>{0!==c&&(u++,E.done())}).next(()=>u>0)}se(e,t){return id(e).get(t).next(r=>r?qh(r):null)}}function id(n){return Zn(n,"targets")}function gv(n){return Zn(n,"targetGlobal")}function _u(n){return Zn(n,"targetDocuments")}function mT([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class yT{constructor(e){this.xn=e,this.buffer=new vn(mT),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _T{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bl(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield iu(r)}yield t.Fn(3e5)}))}}class PE{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve($i.at);const r=new yT(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,f,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),Xg()<=fi.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${x} documents in `+(E-y)+`ms\nTotal Duration: ${E-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class vT{constructor(e,t){this.db=e,this.garbageCollector=new PE(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ar(e,r)}removeReference(e,t,r){return ar(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ar(e,t)}Gn(e,t){return function(r,i){let u=!1;return pv(r).tt(c=>xm(r,c,i).next(f=>(f&&(u=!0),oe.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,f)=>{if(f<=t){const y=this.Gn(e,c).next(E=>{if(!E)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),_u(e).delete([0,Ti(c.path)])))});i.push(y)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ar(e,t)}Kn(e,t){const r=_u(e);let i,u=$i.at;return r.Z({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:E})=>{0===c?(u!==$i.at&&t(new He(Eo(i)),u),u=E,i=y):u=$i.at}).next(()=>{u!==$i.at&&t(new He(Eo(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ar(n,e){return _u(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class mv{constructor(){this.changes=new hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wT{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ul(e).put(r)}removeEntry(e,t,r){return Ul(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],gu(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Ul(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Ul(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,u)=>{r={document:this.jn(t,u),size:Am(u)}}).next(()=>r)}getEntries(e,t){let r=Hi();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=Hi(),i=new sr(He.comparator);return this.zn(e,t,(u,c)=>{const f=this.jn(u,c);r=r.insert(u,f),i=i.insert(u,Am(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let i=new vn(LE);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Zh(i.first()),Zh(i.last())),c=i.getIterator();let f=c.getNext();return Ul(e).Z({index:"documentKeyIndex",range:u},(y,E,T)=>{const x=He.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&LE(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,E),f=c.hasNext()?c.getNext():null),f?T.j(Zh(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),gu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ul(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=Hi();for(const y of c){const E=this.jn(He.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(E.key,E)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=Hi();const c=sd(t,r),f=sd(t,ms.max());return Ul(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,E,T)=>{const x=this.jn(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);u=u.insert(x.key,x),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new kE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return OE(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Qn(e,t){return OE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function zh(n,e){let t;if(e.document)t=X_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=Ol(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=He.fromSegments(e.unknownDocument.path),i=Ol(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Pn(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Nn.newInvalidDocument(e)}}function NE(n){return new wT(n)}class kE extends mv{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new hu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((u,c)=>Bt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=nd(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Am(y)-f.size,t.push(this.Yn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=nd(this.Yn.It,c.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function OE(n){return Zn(n,"remoteDocumentGlobal")}function Ul(n){return Zn(n,"remoteDocumentsV14")}function Zh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sd(n,e){const t=e.documentKey.path.toArray();return[n,gu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function LE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Bt(t[u],r[u]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class ET{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Yc(r.mutation,i,ys.empty(),Pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=fu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Fh();return u.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=fu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let u=Hi();const c=Xc(),f=Xc();return t.forEach((y,E)=>{const T=r.get(E.key);i.has(E.key)&&(void 0===T||T.mutation instanceof ua)?u=u.insert(E.key,E):void 0!==T&&(c.set(E.key,T.mutation.getFieldMask()),Yc(T.mutation,E,T.mutation.getFieldMask(),Pn.now()))}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((E,T)=>c.set(E,T)),t.forEach((E,T)=>{var x;return f.set(E,new ET(T,null!==(x=c.get(E))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Xc();let i=new sr((c,f)=>c-f),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let T=r.get(y)||ys.empty();T=f.applyToLocalView(E,T),r.set(y,T);const x=(i.get(f.batchId)||Gt()).add(y);i=i.insert(f.batchId,x)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,T=y.value,x=_E();T.forEach(N=>{if(!u.has(N)){const U=Dp(t.get(N),r.get(N));null!==U&&x.set(N,U),u=u.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,x))}return oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):oe.resolve(fu());let f=-1,y=u;return c.next(E=>oe.forEach(E,(T,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),u.get(T)?oe.resolve():this.getBaseDocument(e,T,x).next(N=>{y=y.insert(T,N)}))).next(()=>this.populateOverlays(e,E,u)).next(()=>this.computeViews(e,y,E,Gt())).next(T=>({batchId:f,changes:yE(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let i=Fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Fh();return this.indexManager.getCollectionParents(e,i).next(c=>oe.forEach(c,f=>{const y=(E=t,T=f.child(i),new Sl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((T,x)=>{u=u.insert(T,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((f,y)=>{const E=y.getKey();null===i.get(E)&&(i=i.insert(E,Nn.newInvalidDocument(E)))});let c=Fh();return i.forEach((f,y)=>{const E=u.get(f);void 0!==E&&Yc(E.mutation,y,ys.empty(),Pn.now()),fE(t,y)&&(c=c.insert(f,y))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(Nn.newInvalidDocument(t))}}class IT{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Gr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Im(r.bundledQuery),readTime:Gr(r.readTime)}),oe.resolve();var r}}class FE{constructor(){this.overlays=new sr(He.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fu();return oe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=fu(),u=t.length+1,c=new He(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new sr((E,T)=>E-T);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let T=u.get(E.largestBatchId);null===T&&(T=fu(),u=u.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const f=fu(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,T)=>f.set(E,T)),!(f.size()>=i)););return oe.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Nl(t,r));let u=this.es.get(t);void 0===u&&(u=Gt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class UE{constructor(){this.ns=new vn(Or.ss),this.rs=new vn(Or.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Or(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Or(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new He(new Xt([])),r=new Or(t,e),i=new Or(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new He(new Xt([])),r=new Or(t,e),i=new Or(t,e+1);let u=Gt();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Or(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Or{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return He.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||He.comparator(e.key,t.key)}}class VE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(Or.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new Rl(u,t,r,i);this.mutationQueue.push(c);for(const f of i)this.gs=this.gs.add(new Or(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Or(t,0),i=new Or(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const f=this.ys(c._s);u.push(f)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Bt);return t.forEach(i=>{const u=new Or(i,0),c=new Or(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],f=>{r=r.add(f._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Or(new He(u),0);let f=new vn(Bt);return this.gs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y._s)),!0)},c),oe.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,i=>{const u=new Or(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Or(t,0),i=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fa{constructor(e){this.Es=e,this.docs=new sr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Hi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Nn.newInvalidDocument(i))}),oe.resolve(r)}getAllFromCollection(e,t,r){let i=Hi();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||M_(oa(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bT(this)}getSize(e){return oe.resolve(this.size)}}class bT extends mv{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class DT{constructor(e){this.persistence=e,this.Rs=new hu(t=>Ah(t),Mh),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new UE,this.targetCount=0,this.vs=Fl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),oe.waitFor(u).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class Io{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new $i(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new DT(this),this.indexManager=new lv,this.remoteDocumentCache=new fa(r=>this.referenceDelegate.xs(r)),this.It=new td(t),this.Ns=new IT(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new VE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new bo(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class bo extends RD{constructor(e){super(),this.currentSequenceNumber=e}}class qi{constructor(e){this.persistence=e,this.Fs=new UE,this.$s=null}static Bs(e){return new qi(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const i=He.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class BE{constructor(e){this.It=e}$(e,t,r,i){const u=new R_("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ev,{unique:!0}),f.createObjectStore("documentMutations"),_v(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),_v(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").W().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ev,{unique:!0});const T=y.store("mutations"),x=E.map(N=>T.put(N));return oe.waitFor(x)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:tv});y.createIndex("collectionPathOverlayIndex",pT,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",ca,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:aT});y.createIndex("documentKeyIndex",uT),y.createIndex("collectionGroupIndex",lT)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:MA}).createIndex("sequenceNumberIndex",kp,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:hT}).createIndex("documentKeyIndex",fT,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Am(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>oe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(f=>oe.forEach(f,y=>{kt(y.userId===u.userId);const E=Ll(this.It,y);return ME(e,u.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,f)=>{const y=new Xt(c),E=[0,Ti(y)];u.push(t.get(E).next(T=>T?oe.resolve():t.put({targetId:0,path:Ti(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:ed});const r=t.store("collectionParents"),i=new Sm,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:Ti(y)})}};return t.store("remoteDocuments").Z({X:!0},(c,f)=>{const y=new Xt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,f,y],E)=>{const T=Eo(f);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=qh(i),c=nv(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(E=c,E.document?new He(Xt.fromString(E.document.name).popFirst(5)):E.noDocument?He.fromSegments(E.noDocument.path):E.unknownDocument?He.fromSegments(E.unknownDocument.path):at()).path.toArray();var E;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(T))}).next(()=>oe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=NE(this.It),u=new Io(qi.Bs,this.It.re);return r.W().next(c=>{const f=new Map;return c.forEach(y=>{var E;let T=null!==(E=f.get(y.userId))&&void 0!==E?E:Gt();Ll(this.It,y).keys().forEach(x=>T=T.add(x)),f.set(y.userId,T)}),oe.forEach(f,(y,E)=>{const T=new Tr(E),x=Dm.oe(this.It,T),N=u.getIndexManager(T),U=$p.oe(T,this.It,N,u.referenceDelegate);return new yv(i,U,x,N).recalculateAndSaveOverlaysForDocumentKeys(new Lp(t,$i.at),y).next()})})}}function _v(n){n.createObjectStore("targetDocuments",{keyPath:dT}).createIndex("documentTargetsIndex",Em,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cT,{unique:!0}),n.createObjectStore("targetGlobal")}const vv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wv{constructor(e,t,r,i,u,c,f,y,E,T,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=f,this.Js=E,this.Ys=T,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!wv.C())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vT(this,i),this.ii=t+"main",this.It=new td(y),this.ri=new zs(this.ii,this.Xs,new BE(this.It)),this.Cs=new RE(this.referenceDelegate,this.It),this.remoteDocumentCache=NE(this.It),this.Ns=new gT,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,vv);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new $i(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ce.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(bl(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return jp(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return Mm(e).delete(this.clientId)}yi(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zn(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return oe.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):jp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,vv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mm(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lp(t,$i.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Mm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return $p.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cv(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Dm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?Ws:14===c?Op:13===c?Ml:12===c?gi:11===c?Gh:void at();var c;let f;return this.ri.runTransaction(e,i,u,y=>(f=new Lp(y,this.Ss?this.Ss.next():$i.at),"readwrite-primary"===t?this.fi(f).next(E=>!!E||this.di(f)).next(E=>{if(!E)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(he.FAILED_PRECONDITION,MD);return r(f)}).next(E=>this.wi(f).next(()=>E)):this.Vi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Vi(e){return jp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,vv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jp(e).put("owner",t)}static C(){return zs.C()}_i(e){const t=jp(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jp(n){return Zn(n,"owner")}function Mm(n){return Zn(n,"clientMetadata")}function Hp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class od{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Gt(),i=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new od(e,t.fromCache,r,i)}}class $E{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(cE(t))return oe.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ip(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Gt(...u);return this.Ni.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.Fi(t,f);return this.$i(t,E,c,y.readTime)?this.ki(e,Ip(t,null,"F")):this.Bi(e,E,t,y)}))})))}Oi(e,t,r,i){return cE(t)||i.isEqual(Mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):(Xg()<=fi.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bp(t)),this.Bi(e,c,t,$c(i,-1)))})}Fi(e,t){let r=new vn(BD(e));return t.forEach((i,u)=>{fE(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return Xg()<=fi.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",bp(t)),this.Ni.getDocumentsMatchingQuery(e,t,ms.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class jE{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new sr(Bt),this.qi=new hu(u=>Ah(u),Mh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function HE(n,e,t,r){return new jE(n,e,t,r)}function Ev(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ce.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=Gt();for(const E of i){c.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of u){f.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(E=>({ji:E,removedBatchIds:c,addedBatchIds:f}))})})}),Rm.apply(this,arguments)}function Pm(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,E){const T=y.batch,x=T.keys();let N=oe.resolve();return x.forEach(U=>{N=N.next(()=>E.getEntry(f,U)).next($=>{const ne=y.docVersions.get(U);kt(null!==ne),$.version.compareTo(ne)<0&&(T.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),E.addEntry($)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(f,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Gt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function GE(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function zE(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((T,x)=>{const N=i.get(x);if(!N)return;f.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,x)));let U=N.withSequenceNumber(u.currentSequenceNumber);var $,ne,ue;e.targetMismatches.has(x)?U=U.withResumeToken(Sr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(x,U),ne=U,ue=T,(0===($=N).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(u,U))});let y=Hi(),E=Gt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),f.push(Iv(u,c,e.documentUpdates).next(T=>{y=T.Wi,E=T.zi})),!r.isEqual(Mt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(T)}return oe.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,E)).next(()=>y)}).then(u=>(t.Ui=i,u))}function Iv(n,e,t){let r=Gt(),i=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Hi();return t.forEach((f,y)=>{const E=u.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Mt.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{Wi:c,zi:i}})}function bv(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vl(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,oe.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new vs(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ad(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ce.Z)(function*(n,e,t){const r=Ke(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!bl(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Nm.apply(this,arguments)}function Gp(n,e,t){const r=Ke(n);let i=Mt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,E){const T=Ke(f),x=T.qi.get(E);return void 0!==x?oe.resolve(T.Ui.get(x)):T.Cs.getTargetData(y,E)}(r,c,ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Mt.min(),t?u:Gt())).next(f=>(Cv(r,VD(e),f),{documents:f,Hi:u})))}function Dv(n,e){const t=Ke(n),r=Ke(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Tv(n,e){const t=Ke(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,$c(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Cv(t,e,i),i))}function Cv(n,e,t){let r=n.Ki.get(e)||Mt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function km(){return km=(0,ce.Z)(function*(n,e,t,r){const i=Ke(n);let u=Gt(),c=Hi();for(const E of t){const T=e.Ji(E.metadata.name);E.document&&(u=u.add(T));const x=e.Yi(E);x.setReadTime(e.Xi(E.metadata.readTime)),c=c.insert(T,x)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield Vl(i,(E=r,ji(Rh(Xt.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>Iv(E,f,c).next(T=>(f.apply(E),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Cs.addMatchingKeys(E,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,T.Wi,T.zi)).next(()=>T.Wi)))}),km.apply(this,arguments)}function TT(n,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,ce.Z)(function*(n,e,t=Gt()){const r=yield Vl(n,ji(Im(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Gr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const f=r.withResumeToken(Sr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(u,f).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),Sv.apply(this,arguments)}function WE(n,e){return`firestore_clients_${n}_${e}`}function KE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Av(n,e){return`firestore_targets_${n}_${e}`}class Om{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new Om(e,t,i.state,u):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new zp(e,r.state,i):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Cp();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=tE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Lm(e,u):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xv(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Mv{constructor(){this.activeTargetIds=Cp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rv{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new sr(Bt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=WE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Mv),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(WE(e.persistenceKey,i));if(u){const c=Lm.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Av(this.persistenceKey,e));if(r){const i=zp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Av(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=$i.at;if(null!=u)try{const f=JSON.parse(u);kt("number"==typeof f),c=f}catch(f){gr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==$i.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Om(this.currentUser,e,t,r),u=KE(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=KE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Av(this.persistenceKey,e),u=new zp(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Lm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Om.Zi(new Tr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return zp.Zi(i,t)}yr(e){return xv.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Br(c,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Cp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ZE{constructor(){this.Lr=new Mv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Mv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CT{qr(e){}shutdown(){}}class QE{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ST={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AT{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class xT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);Pe("RestConnection","Sending: ",c,r);const f={};return this.lo(f,i,u),this.fo(e,c,f,r).then(y=>(Pe("RestConnection","Received: ",y),y),y=>{throw El("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ru,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${ST[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const f=new Jg;f.setWithCredentials(!0),f.listenOnce(Gw.COMPLETE,()=>{var E;try{switch(f.getLastErrorCode()){case gp.NO_ERROR:const T=f.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(T)),u(T);break;case gp.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:const x=f.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",f.getResponseText()),x>0){let N=f.getResponseJson();Array.isArray(N)&&(N=N[0]);const U=null===(E=N)||void 0===E?void 0:E.error;if(U&&U.status&&U.message){const $=function(ne){const ue=ne.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ue)>=0?ue:he.UNKNOWN}(U.status);c(new Re($,U.message))}else c(new Re(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Re(he.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vA(),c=ID(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new bD({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=i.join("");Pe("Connection","Creating WebChannel: "+y,f);const E=u.createWebChannel(y,f);let T=!1,x=!1;const N=new AT({Hr:$=>{x?Pe("Connection","Not sending because WebChannel is closed:",$):(T||(Pe("Connection","Opening WebChannel transport."),E.open(),T=!0),Pe("Connection","WebChannel sending:",$),E.send($))},Jr:()=>E.close()}),U=($,ne,ue)=>{$.listen(ne,je=>{try{ue(je)}catch(et){setTimeout(()=>{throw et},0)}})};return U(E,Eh.EventType.OPEN,()=>{x||Pe("Connection","WebChannel transport opened.")}),U(E,Eh.EventType.CLOSE,()=>{x||(x=!0,Pe("Connection","WebChannel transport closed"),N.io())}),U(E,Eh.EventType.ERROR,$=>{x||(x=!0,El("Connection","WebChannel transport errored:",$),N.io(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),U(E,Eh.EventType.MESSAGE,$=>{var ne;if(!x){const ue=$.data[0];kt(!!ue);const je=ue,et=je.error||(null===(ne=je[0])||void 0===ne?void 0:ne.error);if(et){Pe("Connection","WebChannel received error:",et);const Qe=et.status;let We=function(bt){const Qt=kr[bt];if(void 0!==Qt)return gE(Qt)}(Qe),wt=et.message;void 0===We&&(We=he.INTERNAL,wt="Unknown error status: "+Qe+" with message "+et.message),x=!0,N.io(new Re(We,wt)),E.close()}else Pe("Connection","WebChannel received:",ue),N.ro(ue)}}),U(c,zw.STAT_EVENT,$=>{$.stat===wl.PROXY?Pe("Connection","Detected buffering proxy"):$.stat===wl.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function YE(){return typeof window<"u"?window:null}function qp(){return typeof document<"u"?document:null}function Qh(n){return new AA(n,!0)}class Fm{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Pv{constructor(e,t,r,i,u,c,f,y){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Fm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ce.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ce.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ce.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ce.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JE extends Pv{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function DE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:at(),i=e.targetChange.targetIds||[],u=function(y,E){return y.gt?(kt(void 0===E||"string"==typeof E),Sr.fromBase64String(E||"")):(kt(void 0===E||E instanceof Uint8Array),Sr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const E=void 0===y.code?he.UNKNOWN:gE(y.code);return new Re(E,y.message||"")}(c);t=new Y_(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=_s(n,r.document.name),u=Gr(r.document.updateTime),c=new Hr({mapValue:{fields:r.document.fields}}),f=Nn.newFoundDocument(i,u,c);t=new pm(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=_s(n,r.document),u=r.readTime?Gr(r.readTime):Mt.min(),c=Nn.newNoDocument(i,u);t=new pm([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=_s(n,r.document);t=new pm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,u=new qD(r.count||0);t=new wE(r.targetId,u)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Gr(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=mm(this.It),t.addTarget=function(i,u){let c;const f=u.target;return c=Ep(f)?{documents:Np(i,f)}:{query:$h(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=EE(i,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=Vh(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function eT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=mm(this.It),t.removeTarget=e,this.Bo(t)}}class XE extends Pv{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function pu(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let u=Gr(r.updateTime?r.updateTime:i);return u.isEqual(Mt.min())&&(u=Gr(i)),new zD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.Zo(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=mm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bh(this.It,r))};this.Bo(t)}}class eI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(he.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class nI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(gr(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class rI{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(f=>{r.enqueueAndForget((0,ce.Z)(function*(){var y;mt(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ce.Z)(function*(E){const T=Ke(E);T._u.add(4),yield Yh(T),T.gu.set("Unknown"),T._u.delete(4),yield Do(T)}),function(E){return y.apply(this,arguments)})(c))}))}),this.gu=new nI(r,i)}}function Do(n){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ce.Z)(function*(n){if(mt(n))for(const e of n.wu)yield e(!0)}),Nv.apply(this,arguments)}function Yh(n){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,ce.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Bl.apply(this,arguments)}function kv(n,e){const t=Ke(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),sI(t)?Vm(t):pa(t).ko()&&iI(t,e))}function ud(n,e){const t=Ke(n),r=pa(t);t.du.delete(e),r.ko()&&Ov(t,e),0===t.du.size&&(r.ko()?r.Fo():mt(t)&&t.gu.set("Unknown"))}function iI(n,e){n.yu.Mt(e.targetId),pa(n).zo(e)}function Ov(n,e){n.yu.Mt(e),pa(n).Ho(e)}function Vm(n){n.yu=new ZD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),pa(n).start(),n.gu.uu()}function sI(n){return mt(n)&&!pa(n).No()&&n.du.size>0}function mt(n){return 0===Ke(n)._u.size}function oI(n){n.yu=void 0}function MT(n){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,ce.Z)(function*(n){n.du.forEach((e,t)=>{iI(n,e)})}),Lv.apply(this,arguments)}function Jh(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ce.Z)(function*(n,e){oI(n),sI(n)?(n.gu.hu(e),Vm(n)):n.gu.set("Unknown")}),Fv.apply(this,arguments)}function Bm(n,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,ce.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Y_&&2===e.state&&e.cause)try{yield(r=(0,ce.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.du.delete(f),i.yu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield On(n,r)}else if(e instanceof pm?n.yu.Gt(e):e instanceof wE?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield GE(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.du.get(y);E&&i.du.set(y,E.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.du.get(f);if(!y)return;i.du.set(f,y.withResumeToken(Sr.EMPTY_BYTE_STRING,y.snapshotVersion)),Ov(i,f);const E=new vs(y.target,f,1,y.sequenceNumber);iI(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield On(n,r)}var r}),Xh.apply(this,arguments)}function On(n,e,t){return aI.apply(this,arguments)}function aI(){return aI=(0,ce.Z)(function*(n,e,t){if(!bl(e))throw e;n._u.add(1),yield Yh(n),n.gu.set("Offline"),t||(t=()=>GE(n.localStore)),n.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Do(n)}))}),aI.apply(this,arguments)}function Uv(n,e){return e().catch(t=>On(n,t,e))}function ld(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ce.Z)(function*(n){const e=Ke(n),t=Ks(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uI(e);)try{const i=yield bv(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,lI(e,i)}catch(i){yield On(e,i)}Bv(e)&&$v(e)}),Vv.apply(this,arguments)}function uI(n){return mt(n)&&n.fu.length<10}function lI(n,e){n.fu.push(e);const t=Ks(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Bv(n){return mt(n)&&!Ks(n).No()&&n.fu.length>0}function $v(n){Ks(n).start()}function RT(n){return jv.apply(this,arguments)}function jv(){return jv=(0,ce.Z)(function*(n){Ks(n).eu()}),jv.apply(this,arguments)}function PT(n){return cd.apply(this,arguments)}function cd(){return cd=(0,ce.Z)(function*(n){const e=Ks(n);for(const t of n.fu)e.Xo(t.mutations)}),cd.apply(this,arguments)}function NT(n,e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,ce.Z)(function*(n,e,t){const r=n.fu.shift(),i=Pl.from(r,e,t);yield Uv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ld(n)}),Hv.apply(this,arguments)}function kT(n,e){return ef.apply(this,arguments)}function ef(){return ef=(0,ce.Z)(function*(n,e){var t;e&&Ks(n).Yo&&(yield(t=(0,ce.Z)(function*(r,i){if(Q_(u=i.code)&&u!==he.ABORTED){const c=r.fu.shift();Ks(r).Mo(),yield Uv(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ld(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Bv(n)&&$v(n)}),ef.apply(this,arguments)}function Gv(n,e){return $m.apply(this,arguments)}function $m(){return $m=(0,ce.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=mt(t);t._u.add(3),yield Yh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Do(t)}),$m.apply(this,arguments)}function jm(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,ce.Z)(function*(n,e){const t=Ke(n);e?(t._u.delete(2),yield Do(t)):e||(t._u.add(2),yield Yh(t),t.gu.set("Unknown"))}),zv.apply(this,arguments)}function pa(n){return n.pu||(n.pu=function(e,t,r){const i=Ke(e);return i.su(),new JE(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:MT.bind(null,n),Zr:Jh.bind(null,n),Wo:Bm.bind(null,n)}),n.wu.push(function(){var e=(0,ce.Z)(function*(t){t?(n.pu.Mo(),sI(n)?Vm(n):n.gu.set("Unknown")):(yield n.pu.stop(),oI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ks(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ke(e);return i.su(),new XE(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:RT.bind(null,n),Zr:kT.bind(null,n),tu:PT.bind(null,n),Zo:NT.bind(null,n)}),n.wu.push(function(){var e=(0,ce.Z)(function*(t){t?(n.Iu.Mo(),yield ld(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class qv{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new qv(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(n,e){if(gr("AsyncQueue",`${e}: ${n}`),bl(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class nf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Fh(),this.sortedSet=new sr(this.comparator)}static emptySet(e){return new nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new nf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Wv{constructor(){this.Tu=new sr(He.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dd{constructor(e,t,r,i,u,c,f,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new dd(e,t,nf.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cI{constructor(){this.Au=void 0,this.listeners=[]}}class OT{constructor(){this.queries=new hu(e=>hE(e),Nh),this.onlineState="Unknown",this.Ru=new Set}}function Hm(n,e){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,ce.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new cI),i)try{u.Au=yield t.onListen(r)}catch(c){const f=tf(c,`Initialization of query '${bp(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&hI(t)}),Kv.apply(this,arguments)}function Zv(n,e){return dI.apply(this,arguments)}function dI(){return dI=(0,ce.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dI.apply(this,arguments)}function RA(n,e){const t=Ke(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Pu(i)&&(r=!0);c.Au=i}}r&&hI(t)}function PA(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function hI(n){n.Ru.forEach(e=>{e.next()})}class Gm{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class zm{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class fI{constructor(e){this.It=e}Ji(e){return _s(this.It,e)}Yi(e){return e.metadata.exists?X_(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gr(e)}}class LT{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qv(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Xt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new fI(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Gt()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ce.Z)(function*(){const t=yield function qE(n,e,t,r){return km.apply(this,arguments)}(e.localStore,new fI(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield TT(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Qv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rf{constructor(e){this.key=e}}class pI{constructor(e){this.key=e}}class gI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=BD(e),this.Qu=new nf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Wv,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,x)=>{const N=i.get(T),U=fE(this.query,x)?x:null,$=!!N&&this.mutatedKeys.has(N.key),ne=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ue=!1;N&&U?N.data.isEqual(U.data)?$!==ne&&(r.track({type:3,doc:U}),ue=!0):this.Hu(N,U)||(r.track({type:2,doc:U}),ue=!0,(y&&this.Gu(U,y)>0||E&&this.Gu(U,E)<0)&&(f=!0)):!N&&U?(r.track({type:0,doc:U}),ue=!0):N&&!U&&(r.track({type:1,doc:N}),ue=!0,(y||E)&&(f=!0)),ue&&(U?(c=c.add(U),u=ne?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,$i:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((E,T)=>function(x,N){const U=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return U(x)-U(N)}(E.type,T.type)||this.Gu(E.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==u.length||y?{snapshot:new dd(this.query,e.Qu,i,u,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Wv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new pI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new rf(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return dd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class FT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UT{constructor(e){this.key=e,this.nc=!1}}class VT{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new hu(f=>hE(f),Nh),this.rc=new Map,this.oc=new Set,this.uc=new sr(He.comparator),this.cc=new Map,this.ac=new UE,this.hc={},this.lc=new Map,this.fc=Fl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function mI(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ce.Z)(function*(n,e){const t=Jm(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield Vl(t.localStore,ji(e));t.isPrimaryClient&&kv(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Jv(t,e,r,"current"===f,c.resumeToken)}return i}),Yv.apply(this,arguments)}function Jv(n,e,t,r,i){return hd.apply(this,arguments)}function hd(){return hd=(0,ce.Z)(function*(n,e,t,r,i){n._c=(x,N,U)=>{return($=(0,ce.Z)(function*(ne,ue,je,et){let Qe=ue.view.Wu(je);Qe.$i&&(Qe=yield Gp(ne.localStore,ue.query,!1).then(({documents:bt})=>ue.view.Wu(bt,Qe)));const We=et&&et.targetChanges.get(ue.targetId),wt=ue.view.applyChanges(Qe,ne.isPrimaryClient,We);return r0(ne,ue.targetId,wt.Xu),wt.snapshot}),function(ne,ue,je,et){return $.apply(this,arguments)})(n,x,N,U);var $};const u=yield Gp(n.localStore,e,!0),c=new gI(e,u.Hi),f=c.Wu(u.documents),y=Uh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=c.applyChanges(f,n.isPrimaryClient,y);r0(n,t,E.Xu);const T=new FT(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),hd.apply(this,arguments)}function BT(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,ce.Z)(function*(n,e){const t=Ke(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Nh(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ad(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ud(t.remoteStore,r.targetId),sf(t,r.targetId)}).catch(iu))):(sf(t,r.targetId),yield ad(t.localStore,r.targetId,!0))}),qm.apply(this,arguments)}function Wm(){return Wm=(0,ce.Z)(function*(n,e,t){const r=p0(n);try{const i=yield function(u,c){const f=Ke(u),y=Pn.now(),E=c.reduce((N,U)=>N.add(U.key),Gt());let T,x;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let U=Hi(),$=Gt();return f.Gi.getEntries(N,E).next(ne=>{U=ne,U.forEach((ue,je)=>{je.isValidDocument()||($=$.add(ue))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,U)).next(ne=>{T=ne;const ue=[];for(const je of c){const et=Lh(je,T.get(je.key).overlayedDocument);null!=et&&ue.push(new ua(je.key,et,sm(et.value.mapValue),kn.exists(!0)))}return f.mutationQueue.addMutationBatch(N,y,ue,c)}).next(ne=>{x=ne;const ue=ne.applyToLocalDocumentSet(T,$);return f.documentOverlayCache.saveOverlays(N,ne.batchId,ue)})}).then(()=>({batchId:x.batchId,changes:yE(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.hc[u.currentUser.toKey()];y||(y=new sr(Bt)),y=y.insert(c,f),u.hc[u.currentUser.toKey()]=y}(r,i.batchId,t),yield vu(r,i.changes),yield ld(r.remoteStore)}catch(i){const u=tf(i,"Failed to persist write");t.reject(u)}}),Wm.apply(this,arguments)}function yI(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,ce.Z)(function*(n,e){const t=Ke(n);try{const r=yield zE(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?kt(c.nc):i.removedDocuments.size>0&&(kt(c.nc),c.nc=!1))}),yield vu(t,r,e)}catch(r){yield iu(r)}}),Km.apply(this,arguments)}function _I(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const f=c.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Ke(u);f.onlineState=c;let y=!1;f.queries.forEach((E,T)=>{for(const x of T.listeners)x.bu(c)&&(y=!0)}),y&&hI(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xv(n,e,t){return e0.apply(this,arguments)}function e0(){return e0=(0,ce.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new sr(He.comparator);c=c.insert(u,Nn.newNoDocument(u,Mt.min()));const f=Gt().add(u),y=new Sp(Mt.min(),new Map,new vn(Bt),c,f);yield yI(r,y),r.uc=r.uc.remove(u),r.cc.delete(e),s0(r)}else yield ad(r.localStore,e,!1).then(()=>sf(r,e,t)).catch(iu)}),e0.apply(this,arguments)}function vI(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,ce.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield Pm(t.localStore,e);Qm(t,r,null),n0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vu(t,i)}catch(i){yield iu(i)}}),Zm.apply(this,arguments)}function jT(n,e,t){return t0.apply(this,arguments)}function t0(){return t0=(0,ce.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(u,c){const f=Ke(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,c).next(T=>(kt(null!==T),E=T.keys(),f.mutationQueue.removeMutationBatch(y,T))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(r.localStore,e);Qm(r,e,t),n0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vu(r,i)}catch(i){yield iu(i)}}),t0.apply(this,arguments)}function Wp(){return Wp=(0,ce.Z)(function*(n,e){const t=Ke(n);mt(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ke(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=tf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Wp.apply(this,arguments)}function n0(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Qm(n,e,t){const r=Ke(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||wI(n,r)})}function wI(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ud(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),s0(n))}function r0(n,e,t){for(const r of t)r instanceof rf?(n.ac.addReference(r.key,e),GT(n,r)):r instanceof pI?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||wI(n,r.key)):at()}function GT(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.oc.add(r),s0(n))}function s0(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new He(Xt.fromString(e)),r=n.fc.next();n.cc.set(r,new UT(t)),n.uc=n.uc.insert(t,r),kv(n.remoteStore,new vs(ji(Rh(t.path)),r,2,$i.at))}}function vu(n,e,t){return o0.apply(this,arguments)}function o0(){return o0=(0,ce.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[],c=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,y)=>{c.push(r._c(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const T=od.Ci(y.targetId,E);u.push(T)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(f=(0,ce.Z)(function*(y,E){const T=Ke(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>oe.forEach(E,N=>oe.forEach(N.Si,U=>T.persistence.referenceDelegate.addReference(x,N.targetId,U)).next(()=>oe.forEach(N.Di,U=>T.persistence.referenceDelegate.removeReference(x,N.targetId,U)))))}catch(x){if(!bl(x))throw x;Pe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const N=x.targetId;if(!x.fromCache){const U=T.Ui.get(N),ne=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ui=T.Ui.insert(N,ne)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,u))}),o0.apply(this,arguments)}function zT(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,ce.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield Ev(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(f=>{f.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vu(t,r.ji)}var i}),Ym.apply(this,arguments)}function EI(n,e){const t=Ke(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let i=Gt();const u=t.rc.get(e);if(!u)return i;for(const c of u){const f=t.ic.get(c);i=i.unionWith(f.view.ju)}return i}}function qT(n,e){return a0.apply(this,arguments)}function a0(){return a0=(0,ce.Z)(function*(n,e){const t=Ke(n),r=yield Gp(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&r0(t,e.targetId,i.Xu),i}),a0.apply(this,arguments)}function II(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,ce.Z)(function*(n,e){const t=Ke(n);return Tv(t.localStore,e).then(r=>vu(t,r))}),u0.apply(this,arguments)}function WT(n,e,t,r){return l0.apply(this,arguments)}function l0(){return l0=(0,ce.Z)(function*(n,e,t,r){const i=Ke(n),u=yield function(c,f){const y=Ke(c),E=Ke(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Tn(T,f).next(x=>x?y.localDocuments.getDocuments(T,x):oe.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield ld(i.remoteStore):"acknowledged"===t||"rejected"===t?(Qm(i,e,r||null),n0(i,e),f=e,Ke(Ke(i.localStore).mutationQueue).An(f)):at(),yield vu(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),l0.apply(this,arguments)}function Kp(){return Kp=(0,ce.Z)(function*(n,e){const t=Ke(n);if(Jm(t),p0(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield d0(t,r.toArray());t.dc=!0,yield jm(t.remoteStore,!0);for(const u of i)kv(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(sf(t,c),ad(t.localStore,c,!0))),ud(t.remoteStore,c)}),yield i,yield d0(t,r),function(u){const c=Ke(u);c.cc.forEach((f,y)=>{ud(c.remoteStore,y)}),c.ac.fs(),c.cc=new Map,c.uc=new sr(He.comparator)}(t),t.dc=!1,yield jm(t.remoteStore,!1)}}),Kp.apply(this,arguments)}function d0(n,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ce.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[];for(const c of e){let f;const y=r.rc.get(c);if(y&&0!==y.length){f=yield Vl(r.localStore,ji(y[0]));for(const E of y){const T=r.ic.get(E),x=yield qT(r,T);x.snapshot&&u.push(x.snapshot)}}else{const E=yield Dv(r.localStore,c);f=yield Vl(r.localStore,E),yield Jv(r,bI(E),c,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(u),i}),Zp.apply(this,arguments)}function bI(n){return lE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KT(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function h0(n,e,t,r){return f0.apply(this,arguments)}function f0(){return f0=(0,ce.Z)(function*(n,e,t,r){const i=Ke(n);if(i.dc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Tv(i.localStore,VD(u[0])),f=Sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Sr.EMPTY_BYTE_STRING);yield vu(i,c,f);break}case"rejected":yield ad(i.localStore,e,!0),sf(i,e,r);break;default:at()}}),f0.apply(this,arguments)}function ZT(n,e,t){return $l.apply(this,arguments)}function $l(){return $l=(0,ce.Z)(function*(n,e,t){const r=Jm(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield Dv(r.localStore,i),c=yield Vl(r.localStore,u);yield Jv(r,bI(u),c.targetId,!1,c.resumeToken),kv(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield ad(r.localStore,i,!1).then(()=>{ud(r.remoteStore,i),sf(r,i)}).catch(iu))}}),$l.apply(this,arguments)}function Jm(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xv.bind(null,e),e.sc.Wo=RA.bind(null,e.eventManager),e.sc.wc=PA.bind(null,e.eventManager),e}function p0(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jT.bind(null,e),e}class g0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ce.Z)(function*(){t.It=Qh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return HE(this.persistence,new $E,e.initialUser,this.It)}yc(e){return new Io(qi.Bs,this.It)}gc(e){return new ZE}terminate(){var e=this;return(0,ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xm extends g0{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ce.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield p0(r.Ac.syncEngine),yield ld(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return HE(this.persistence,new $E,e.initialUser,this.It)}Tc(e,t){return new _T(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new OD(t,this.persistence);return new kD(e.asyncQueue,r)}yc(e){const t=Hp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new wv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,YE(),qp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ZE}}class QT extends Xm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ce.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Rv&&(r.sharedClientState.syncEngine={Fr:WT.bind(null,i),$r:h0.bind(null,i),Br:ZT.bind(null,i),vi:KT.bind(null,i),Mr:II.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ce.Z)(function*(c){yield function c0(n,e){return Kp.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=YE();if(!Rv.C(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qp{initialize(e,t){var r=this;return(0,ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_I(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zT.bind(null,r.syncEngine),yield jm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OT}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),r=new xT(e.databaseInfo);return new eI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>_I(this.syncEngine,f,0),c=QE.C()?new QE:new CT,new rI(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,E){const T=new VT(r,i,u,c,f,y);return E&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ce.Z)(function*(t){const r=Ke(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Yh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function m0(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y0(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ey(n){if(!He.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _0(n){if(He.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yp(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function v0(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const DI=new Map;class TI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,y0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Kw;switch(t.type){case"gapi":return new CD(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DI.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),DI.delete(e),t.terminate())}(this),Promise.resolve()}}class Cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class Ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class To extends Ci{constructor(e,t,r){super(e,t,Rh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new He(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function SI(n,e,...t){if(n=(0,xt.m9)(n),m0("collection","path",e),n instanceof Jp){const r=Xt.fromString(e,...t);return _0(r),new To(n,null,r)}{if(!(n instanceof Cn||n instanceof To))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return _0(r),new To(n.firestore,null,r)}}function w0(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=A_.R()),m0("doc","path",e),n instanceof Jp){const r=Xt.fromString(e,...t);return ey(r),new Cn(n,null,new He(r))}{if(!(n instanceof Cn||n instanceof To))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return ey(r),new Cn(n.firestore,n instanceof To?n.converter:null,new He(r))}}function JT(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Cn||n instanceof To)&&(e instanceof Cn||e instanceof To)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function E0(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof Ci&&e instanceof Ci&&n.firestore===e.firestore&&Nh(n._query,e._query)&&n.converter===e.converter}function AI(n,e=10240){let t=0;return{read:()=>(0,ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xI{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Cr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new zm(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ce.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ce.Z)(function*(u,c){const f=Ke(u),y=mm(f.It)+"/documents",E={documents:c.map(U=>xp(f.It,U))},T=yield f._o("BatchGetDocuments",y,E,c.length),x=new Map;T.forEach(U=>{const $=function bE(n,e){return"found"in e?function(t,r){kt(!!r.found);const i=_s(t,r.found.name),u=Gr(r.found.updateTime),c=new Hr({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const i=_s(t,r.missing),u=Gr(r.readTime);return Nn.newNoDocument(i,u)}(n,e):at()}(f.It,U);x.set($.key.toString(),$)});const N=[];return c.forEach(U=>{const $=x.get(U.toString());kt(!!$),N.push($)}),N}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=He.fromPath(i);e.mutations.push(new Tp(u,e.precondition(u)))}),yield(r=(0,ce.Z)(function*(i,u){const c=Ke(i),f=mm(c.It)+"/documents",y={writes:u.map(E=>Bh(c.It,E))};yield c.ao("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?kn.exists(!1):kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nC{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Fm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ce.Z)(function*(){const t=new tC(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!zc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Q_(t)}return!1}}class rC{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=A_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ce.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=tf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function MI(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ce.Z)(function*(u){r.isEqual(u)||(yield Ev(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),I0.apply(this,arguments)}function af(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ny(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Gv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Gv(e.remoteStore,u)),n.onlineComponents=e}),ty.apply(this,arguments)}function ny(n){return ry.apply(this,arguments)}function ry(){return ry=(0,ce.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield MI(n,new g0)),n.offlineComponents}),ry.apply(this,arguments)}function eg(n){return iy.apply(this,arguments)}function iy(){return iy=(0,ce.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield af(n,new Qp)),n.onlineComponents}),iy.apply(this,arguments)}function b0(n){return ny(n).then(e=>e.persistence)}function sy(n){return ny(n).then(e=>e.localStore)}function RI(n){return eg(n).then(e=>e.remoteStore)}function oy(n){return eg(n).then(e=>e.syncEngine)}function uf(n){return D0.apply(this,arguments)}function D0(){return D0=(0,ce.Z)(function*(n){const e=yield eg(n),t=e.eventManager;return t.onListen=mI.bind(null,e.syncEngine),t.onUnlisten=BT.bind(null,e.syncEngine),t}),D0.apply(this,arguments)}function ay(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(i,u,c,f,y){const E=new Xp({next:x=>{u.enqueueAndForget(()=>Zv(i,T));const N=x.docs.has(c);!N&&x.fromCache?y.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&x.fromCache&&f&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new Gm(Rh(c.path),E,{includeMetadataChanges:!0,Nu:!0});return Hm(i,T)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}function NI(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(i,u,c,f,y){const E=new Xp({next:x=>{u.enqueueAndForget(()=>Zv(i,T)),x.fromCache&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new Gm(c,E,{includeMetadataChanges:!0,Nu:!0});return Hm(i,T)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}class aC{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Fm(this,"async_queue_retry"),this.Wc=()=>{const t=qp();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=qp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Cr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ce.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!bl(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=qv.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ce.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function C0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends Jp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new aC,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cy(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||cy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cy(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Gc(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new rC(n._authCredentials,n._appCheckCredentials,n._queue,r)}function OI(n,e,t){const r=new Cr;return n.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield MI(n,t),yield af(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===he.FAILED_PRECONDITION||c.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;El("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function UI(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Sr.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eu{constructor(e){this._methodName=e}}class rg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const hC=/^__.*__$/;class VI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class M0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class ig{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return gy(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(BI(this.sa)&&hC.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class $I{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Qh(e)}da(e,t,r,i=!1){return new ig({sa:e,methodName:t,fa:r,path:$n.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function fd(n){const e=n._freezeSettings(),t=Qh(n._databaseId);return new $I(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sg(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);P0("Data must be an object, but it was:",c,r);const f=HI(r,c);let y,E;if(u.merge)y=new ys(c.fieldMask),E=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const N=fy(e,x,t);if(!c.contains(N))throw new Re(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);my(T,N)||T.push(N)}y=new ys(T),E=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,E=c.fieldTransforms;return new VI(new Hr(f),y,E)}class lf extends Eu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function mi(n,e,t){return new ig({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class jl extends Eu{_toFieldTransform(e){return new kh(e.path,new Al)}isEqual(e){return e instanceof jl}}class fC extends Eu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=mi(this,e,!0),r=this._a.map(u=>Co(u,t)),i=new Qc(r);return new kh(e.path,i)}isEqual(e){return this===e}}class pC extends Eu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=mi(this,e,!0),r=this._a.map(u=>Co(u,t)),i=new lu(r);return new kh(e.path,i)}isEqual(e){return this===e}}class FA extends Eu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new xl(e.It,HD(e.It,this.wa));return new kh(e.path,t)}isEqual(e){return this===e}}function jI(n,e,t,r){const i=n.da(1,e,t);P0("Data must be an object, but it was:",i,r);const u=[],c=Hr.empty();Dl(r,(y,E)=>{const T=py(e,y,t);E=(0,xt.m9)(E);const x=i.ca(T);if(E instanceof lf)u.push(T);else{const N=Co(E,x);null!=N&&(u.push(T),c.set(T,N))}});const f=new ys(u);return new M0(c,f,i.fieldTransforms)}function dy(n,e,t,r,i,u){const c=n.da(1,e,t),f=[fy(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)f.push(fy(e,u[N])),y.push(u[N+1]);const E=[],T=Hr.empty();for(let N=f.length-1;N>=0;--N)if(!my(E,f[N])){const U=f[N];let $=y[N];$=(0,xt.m9)($);const ne=c.ca(U);if($ instanceof lf)E.push(U);else{const ue=Co($,ne);null!=ue&&(E.push(U),T.set(U,ue))}}const x=new ys(E);return new M0(T,x,c.fieldTransforms)}function R0(n,e,t,r=!1){return Co(t,n.da(r?4:3,e))}function Co(n,e){if(hy(n=(0,xt.m9)(n)))return P0("Unsupported field value:",e,n),HI(n,e);if(n instanceof Eu)return function(t,r){if(!BI(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=Co(c,r.aa(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HD(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Pn.fromDate(t);return{timestampValue:Vh(r.It,i)}}if(t instanceof Pn){const i=new Pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vh(r.It,i)}}if(t instanceof rg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ma)return{bytesValue:EE(r.It,t._byteString)};if(t instanceof Cn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ap(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Yp(t)}`)}(n,e)}function HI(n,e){const t={};return Xw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dl(n,(r,i)=>{const u=Co(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function hy(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof rg||n instanceof ma||n instanceof Cn||n instanceof Eu)}function P0(n,e,t){if(!hy(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Yp(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function fy(n,e,t){if((e=(0,xt.m9)(e))instanceof wu)return e._internalPath;if("string"==typeof e)return py(n,e);throw gy("Field path arguments must be of type string or ",n,!1,void 0,t)}const gC=new RegExp("[~\\*/\\[\\]]");function py(n,e,t){if(e.search(gC)>=0)throw gy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wu(...e.split("."))._internalPath}catch{throw gy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gy(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(he.INVALID_ARGUMENT,f+n+y)}function my(n,e){return n.some(t=>t.isEqual(e))}class cf{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GI extends cf{data(){return super.data()}}function pd(n,e){return"string"==typeof e?py(n,e):e instanceof wu?e._internalPath:e._delegate._internalPath}function yy(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}function Iu(n,...e){for(const t of e)n=t._apply(n);return n}class mC extends _y{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=fd(e.firestore),r=function(i,u,c,f,y,E,T){let x;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){L0(T,E);const U=[];for(const $ of T)U.push(ZI(f,i,$));x={arrayValue:{values:U}}}else x=ZI(f,i,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||L0(T,E),x=R0(c,"where",T,"in"===E||"not-in"===E);const N=ti.create(y,E,x);return function(U,$){if($.dt()){const ue=um(U);if(null!==ue&&!ue.isEqual($.field))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ue.toString()}' and '${$.field.toString()}'`);const je=z_(U);null!==je&&F0(0,$.field,je)}const ne=function(ue,je){for(const et of ue.filters)if(je.indexOf(et.op)>=0)return et.op;return null}(U,function(ue){switch(ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}($.op));if(null!==ne)throw new Re(he.INVALID_ARGUMENT,ne===$.op?`Invalid query. You cannot use more than one '${$.op.toString()}' filter.`:`Invalid query. You cannot use '${$.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ci(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class df extends _y{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new au(i,u);return function(f,y){if(null===z_(f)){const E=um(f);null!==E&&F0(0,E,y.field)}}(r,c),c}(e._query,this.ma,this.pa);return new Ci(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Sl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class N0 extends _y{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ci(e.firestore,e.converter,Ip(e._query,this.Ia,this.Ta))}}class qI extends _y{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=O0(e,this.type,this.Ea,this.Aa);return new Ci(e.firestore,e.converter,(i=t,new Sl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class WI extends _y{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=O0(e,this.type,this.Ea,this.Aa);return new Ci(e.firestore,e.converter,(i=t,new Sl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function O0(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof cf)return function(i,u,c,f,y){if(!f)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const T of Ph(i))if(T.field.isKeyField())E.push(Cl(u,f.key));else{const x=f.data.field(T.field);if(eE(x))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const N=T.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(x)}return new vo(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=fd(n.firestore);return function(u,c,f,y,E,T){const x=u.explicitOrderBy;if(E.length>x.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let U=0;U<E.length;U++){const $=E[U];if(x[U].field.isKeyField()){if("string"!=typeof $)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof $}`);if(!dE(u)&&-1!==$.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${$}' contains a slash.`);const ne=u.path.child(Xt.fromString($));if(!He.isDocumentKey(ne))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const ue=new He(ne);N.push(Cl(c,ue))}else{const ne=R0(f,y,$);N.push(ne)}}return new vo(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZI(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dE(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!He.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cl(n,new He(r))}if(t instanceof Cn)return Cl(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(t)}.`)}function L0(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function F0(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class U0{convertValue(e,t="none"){switch(Th(e)){case 0:return null;case 1:return e.booleanValue;case 2:return or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return Dl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new rg(or(e.latitude),or(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=N_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){const t=su(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);kt(iT(r));const i=new Tl(r.get(1),r.get(3)),u=new He(r.popFirst(5));return i.isEqual(t)||gr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function vy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class QI extends U0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class gd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends cf{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hf extends ya{data(e={}){return super.data(e)}}class bu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hf(this._firestore,this._userDataWriter,r.key,r,new gd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new hf(r._firestore,r._userDataWriter,c.doc.key,c.doc,new gd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new hf(r._firestore,r._userDataWriter,c.doc.key,c.doc,new gd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),E=u.indexOf(c.doc.key)),{type:YI(c.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function JI(n,e){return n instanceof ya&&e instanceof ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bu&&e instanceof bu&&n._firestore===e._firestore&&E0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class md extends U0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function EC(n,e,t){n=Kt(n,Cn);const r=Kt(n.firestore,Ln),i=vy(n.converter,e,t);return yd(r,[sg(fd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kn.none())])}function IC(n,e,t,...r){n=Kt(n,Cn);const i=Kt(n.firestore,Ln),u=fd(i);let c;return c="string"==typeof(e=(0,xt.m9)(e))||e instanceof wu?dy(u,"updateDoc",n._key,e,t,r):jI(u,"updateDoc",n._key,e),yd(i,[c.toMutation(n._key,kn.exists(!0))])}function og(n,...e){var t,r,i;n=(0,xt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||C0(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(C0(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,E,T;if(n instanceof Cn)E=Kt(n.firestore,Ln),T=Rh(n._key.path),y={next:x=>{e[c]&&e[c](ff(E,n,x))},error:e[c+1],complete:e[c+2]};else{const x=Kt(n,Ci);E=Kt(x.firestore,Ln),T=x._query;const N=new md(E);y={next:U=>{e[c]&&e[c](new bu(E,N,x,U))},error:e[c+1],complete:e[c+2]},yy(n._query)}return function(x,N,U,$){const ne=new Xp($),ue=new Gm(N,ne,U);return x.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Hm(yield uf(x),ue)})),()=>{ne.bc(),x.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Zv(yield uf(x),ue)}))}}(ur(E),T,f,y)}function yd(n,e){return function(t,r){const i=new Cr;return t.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function $T(n,e,t){return Wm.apply(this,arguments)}(yield oy(t),r,i)})),i.promise}(ur(n),e)}function ff(n,e,t){const r=t.docs.get(e._key),i=new md(n);return new ya(n,i,e._key,r,new gd(t.hasPendingWrites,t.fromCache),e.converter)}const WA={maxAttempts:5};class wy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fd(e)}set(e,t,r){this._verifyNotCommitted();const i=Du(e,this._firestore),u=vy(i.converter,t,r),c=sg(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Du(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof wu?dy(this._dataReader,"WriteBatch.update",u._key,t,r,i):jI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Du(e,this._firestore);return this._mutations=this._mutations.concat(new Jc(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Du(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class TC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fd(e)}get(e){const t=Du(e,this._firestore),r=new QI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new cf(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new cf(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Du(e,this._firestore),u=vy(i.converter,t,r),c=sg(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Du(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof wu?dy(this._dataReader,"Transaction.update",u._key,t,r,i):jI(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Du(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Du(e,this._firestore),r=new md(this._firestore);return super.get(e).then(i=>new ya(this._firestore,r,t._key,i._document,new gd(!1,!1),t.converter))}}function V0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tb(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function RC(){if(!function LD(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ru=hi.SDK_VERSION,(0,hi._registerComponent)(new qa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Ln(new TD(t.getProvider("auth-internal")),new yp(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(f.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,hi.registerVersion)(qw,"3.7.3",n),(0,hi.registerVersion)(qw,"3.7.3","esm2017")}();class ag{constructor(e){this._delegate=e}static fromBase64String(e){return RC(),new ag(ma.fromBase64String(e))}static fromUint8Array(e){return tb(),new ag(ma.fromUint8Array(e))}toBase64(){return RC(),this._delegate.toBase64()}toUint8Array(){return tb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Iy(n){return function nb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YA{enableIndexedDbPersistence(e,t){return function kI(n,e){UI(n=Kt(n,Ln));const t=ur(n),r=n._freezeSettings(),i=new Qp;return OI(t,i,new Xm(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lC(n){UI(n=Kt(n,Ln));const e=ur(n),t=n._freezeSettings(),r=new Qp;return OI(e,r,new QT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function LA(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(t=(0,ce.Z)(function*(r){if(!zs.C())return Promise.resolve();const i=r+"main";yield zs.delete(i)}),function(r){return t.apply(this,arguments)})(Hp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Zs{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&El("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function CI(n,e,t,r={}){var i;const u=(n=Kt(n,Jp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&El("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Tr.MOCK_USER;else{c=(0,xt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Tr(y)}n._authCredentials=new wA(new Ww(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function A0(n){return function iC(n){return n.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield b0(n),t=yield RI(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i._u.delete(0),Do(i)}(t)}))}(ur(n=Kt(n,Ln)))}(this._delegate)}disableNetwork(){return function LI(n){return function tg(n){return n.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield b0(n),t=yield RI(n);return e.setNetworkEnabled(!1),(r=(0,ce.Z)(function*(i){const u=Ke(i);u._u.add(0),yield Yh(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ur(n=Kt(n,Ln)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,y0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function S0(n){return function(e){const t=new Cr;return e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function HT(n,e){return Wp.apply(this,arguments)}(yield oy(e),t)})),t.promise}(ur(n=Kt(n,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function qA(n,e){return function T0(n,e){const t=new Xp(e);return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return r=yield uf(n),i=t,Ke(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return r=yield uf(n),i=t,void Ke(r).Ru.delete(i);var r,i}))}}(ur(n=Kt(n,Ln)),C0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mf(this,SI(this._delegate,e))}catch(t){throw Si(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wi(this,w0(this._delegate,e))}catch(t){throw Si(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ai(this,function YT(n,e){if(n=Kt(n,Jp),m0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ci(n,null,(t=e,new Sl(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Si(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function eb(n,e,t){n=Kt(n,Ln);const r=Object.assign(Object.assign({},WA),t);return function(i){if(i.maxAttempts<1)throw new Re(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const f=new Cr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const y=yield function PI(n){return eg(n).then(e=>e.datastore)}(i);new nC(i.asyncQueue,y,c,u,f).run()})),f.promise}(ur(n),i=>e(new TC(n,i)),r)}(this._delegate,t=>e(new rb(this,t)))}batch(){return ur(this._delegate),new ws(new wy(this._delegate,e=>yd(this._delegate,e)))}loadBundle(e){return function x0(n,e){const t=ur(n=Kt(n,Ln)),r=new uy;return function ng(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,E){if(y instanceof Uint8Array)return AI(y,E);if(y instanceof ArrayBuffer)return AI(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new xI(y,c);var y}(t,Qh(e));n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function NA(n,e,t){const r=Ke(n);var i;(i=(0,ce.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(N,U){const $=Ke(N),ne=Gr(U.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",ue=>$.Ns.getBundleMetadata(ue,U.id)).then(ue=>!!ue&&ue.createTime.compareTo(ne)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=y).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(Qv(y));const E=new LT(y,u.localStore,c.It);let T=yield c.mc();for(;T;){const N=yield E.Fu(T);N&&f._updateProgress(N),T=yield c.mc()}const x=yield E.complete();return yield vu(u,x.Lu,void 0),yield function(N,U){const $=Ke(N);return $.persistence.runTransaction("Save bundle","readwrite",ne=>$.Ns.saveBundleMetadata(ne,U))}(u.localStore,y),f._completeWith(x.progress),Promise.resolve(x.Bu)}catch(y){return El("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var N}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oy(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function cC(n,e){return function oC(n,e){return n.asyncQueue.enqueue((0,ce.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield sy(n),e)}))}(ur(n=Kt(n,Ln)),e).then(t=>t?new Ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ai(this,t):null)}}class by extends U0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(new ma(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wi.forKey(t,this.firestore,null)}}class rb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new by(e)}get(e){const t=Hl(e);return this._delegate.get(t).then(r=>new pf(this._firestore,new ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Hl(e);return r?(V0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Hl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Hl(e);return this._delegate.delete(t),this}}class ws{constructor(e){this._delegate=e}set(e,t,r){const i=Hl(e);return r?(V0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Hl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Hl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _d{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_d.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new _d(e,new by(e),t),i.set(t,u)),u}}_d.INSTANCES=new WeakMap;class Wi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new by(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wi(t,new Cn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Wi(t,new Cn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mf(this.firestore,SI(this._delegate,e))}catch(t){throw Si(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Cn&&JT(this._delegate,e)}set(e,t){t=V0("DocumentReference.set",t);try{return t?EC(this._delegate,e,t):EC(this._delegate,e)}catch(r){throw Si(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IC(this._delegate,e):IC(this._delegate,e,t,...r)}catch(i){throw Si(i,"updateDoc()","DocumentReference.update()")}}delete(){return function GA(n){return yd(Kt(n.firestore,Ln),[new Jc(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=ib(e),r=Dy(e,i=>new pf(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return og(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XI(n){n=Kt(n,Cn);const e=Kt(n.firestore,Ln),t=ur(e),r=new md(e);return function sC(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(r=(0,ce.Z)(function*(i,u,c){try{const f=yield function(y,E){const T=Ke(y);return T.persistence.runTransaction("read document","readonly",x=>T.localDocuments.getDocument(x,E))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=tf(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield sy(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ya(e,r,n._key,i,new gd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function BA(n){n=Kt(n,Cn);const e=Kt(n.firestore,Ln);return ay(ur(e),n._key,{source:"server"}).then(t=>ff(e,n,t))}(this._delegate):function wC(n){n=Kt(n,Cn);const e=Kt(n.firestore,Ln);return ay(ur(e),n._key).then(t=>ff(e,n,t))}(this._delegate),t.then(r=>new pf(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wi(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function Si(n,e,t){return n.message=n.message.replace(e,t),n}function ib(n){for(const e of n)if("object"==typeof e&&!Iy(e))return e;return{}}function Dy(n,e){var t,r;let i;return i=Iy(n[0])?n[0]:Iy(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JI(this._delegate,e._delegate)}}class gf extends pf{data(e){const t=this._delegate.data(e);return function DD(n,e){n||at()}(void 0!==t),t}}class Ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new by(e)}where(e,t,r){try{return new Ai(this.firestore,Iu(this._delegate,function zI(n,e,t){const r=e,i=pd("where",n);return new mC(i,r,t)}(e,t,r)))}catch(i){throw Si(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ai(this.firestore,Iu(this._delegate,function yC(n,e="asc"){const t=e,r=pd("orderBy",n);return new df(r,t)}(e,t)))}catch(r){throw Si(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ai(this.firestore,Iu(this._delegate,function k0(n){return v0("limit",n),new N0("limit",n,"F")}(e)))}catch(t){throw Si(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ai(this.firestore,Iu(this._delegate,function UA(n){return v0("limitToLast",n),new N0("limitToLast",n,"L")}(e)))}catch(t){throw Si(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ai(this.firestore,Iu(this._delegate,function VA(...n){return new qI("startAt",n,!0)}(...e)))}catch(t){throw Si(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ai(this.firestore,Iu(this._delegate,function _C(...n){return new qI("startAfter",n,!1)}(...e)))}catch(t){throw Si(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ai(this.firestore,Iu(this._delegate,function vC(...n){return new WI("endBefore",n,!1)}(...e)))}catch(t){throw Si(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ai(this.firestore,Iu(this._delegate,function KI(...n){return new WI("endAt",n,!0)}(...e)))}catch(t){throw Si(t,"endAt()","Query.endAt()")}}isEqual(e){return E0(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function jA(n){n=Kt(n,Ci);const e=Kt(n.firestore,Ln),t=ur(e),r=new md(e);return function ga(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(r=(0,ce.Z)(function*(i,u,c){try{const f=yield Gp(i,u,!0),y=new gI(u,f.Hi),E=y.Wu(f.documents),T=y.applyChanges(E,!1);c.resolve(T.snapshot)}catch(f){const y=tf(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield sy(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bu(e,r,n,i))}(this._delegate):"server"===e?.source?function HA(n){n=Kt(n,Ci);const e=Kt(n.firestore,Ln),t=ur(e),r=new md(e);return NI(t,n._query,{source:"server"}).then(i=>new bu(e,r,n,i))}(this._delegate):function $A(n){n=Kt(n,Ci);const e=Kt(n.firestore,Ln),t=ur(e),r=new md(e);return yy(n._query),NI(t,n._query).then(i=>new bu(e,r,n,i))}(this._delegate),t.then(r=>new Ty(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ib(e),r=Dy(e,i=>new Ty(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return og(this._delegate,t,r)}withConverter(e){return new Ai(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}class sb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ty{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gf(this._firestore,r))})}isEqual(e){return JI(this._delegate,e._delegate)}}class mf extends Ai{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wi(this.firestore,e):null}doc(e){try{return new Wi(this.firestore,void 0===e?w0(this._delegate):w0(this._delegate,e))}catch(t){throw Si(t,"doc()","CollectionReference.doc()")}}add(e){return function zA(n,e){const t=Kt(n.firestore,Ln),r=w0(n),i=vy(n.converter,e);return yd(t,[sg(fd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wi(this.firestore,t))}isEqual(e){return JT(this._delegate,e._delegate)}withConverter(e){return new mf(this.firestore,this._delegate.withConverter(e?_d.getInstance(this.firestore,e):null))}}function Hl(n){return Kt(n,Cn)}class $0{constructor(...e){this._delegate=new wu(...e)}static documentId(){return new $0($n.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof wu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CC(){return new jl("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tu(e)}static delete(){const e=function KA(){return new lf("deleteField")}();return e._methodName="FieldValue.delete",new Tu(e)}static arrayUnion(...e){const t=function SC(...n){return new fC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tu(t)}static arrayRemove(...e){const t=function AC(...n){return new pC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tu(t)}static increment(e){const t=function Ey(n){return new FA("increment",n)}(e);return t._methodName="FieldValue.increment",new Tu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gl={Firestore:Zs,GeoPoint:rg,Timestamp:Pn,Blob:ag,Transaction:rb,WriteBatch:ws,DocumentReference:Wi,DocumentSnapshot:pf,Query:Ai,QueryDocumentSnapshot:gf,QuerySnapshot:Ty,CollectionReference:mf,FieldPath:$0,FieldValue:Tu,setLogLevel:function B0(n){!function S_(n){Bi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function j0(n){(function ob(n,e){n.INTERNAL.registerComponent(new qa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Gl)))})(n,(e,t)=>new Zs(e,t,new YA)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Wo.Z);var ni=L(7579),PC=L(6451),H0=L(5363),G0=L(8421);function Ar(n,e){return(0,Pr.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,qn.x)(r,y=>{i?.unsubscribe();let E=0;const T=u++;(0,G0.Xf)(n(y,T)).subscribe(i=(0,qn.x)(r,x=>r.next(e?e(y,x,T,E++):x),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var NC=L(6063);class kC extends ni.x{constructor(e=1/0,t=1/0,r=NC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var ab=L(3099);function OC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ab.B)({connector:()=>new kC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const ug=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zl=L(515);function Cy(n){return n<=0?()=>zl.E:(0,Pr.e)((e,t)=>{let r=0;e.subscribe((0,qn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yf(n){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function z0(n=lb){return(0,Pr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lb(){return new ug}function _a(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Jr((i,u)=>n(i,u,r)):di.y,Cy(1),t?yf(e):z0(()=>new ug))}var Sy=L(576);function q0(n,e){return(0,Sy.m)(e)?Ar(()=>n,e):Ar(()=>n)}var _f=L(9468);L(5867);const K0=new Map,dg={activated:!1,tokenObservers:[]},UC={initialized:!1,enabled:!1};function ri(n){return K0.get(n)||Object.assign({},dg)}function va(){return UC}class My{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ce.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function rx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function X0(n){if(!ri(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function tw(n,e){return nw.apply(this,arguments)}function nw(){return nw=(0,ce.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const U=yield c.getHeartbeatsHeader();U&&(u["X-Firebase-Client"]=U)}const f={method:"POST",body:JSON.stringify(e),headers:u};let y,E;try{y=yield fetch(n,f)}catch(U){throw Ki.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==y.status)throw Ki.create("fetch-status-error",{httpStatus:y.status});try{E=yield y.json()}catch(U){throw Ki.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=E.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const x=1e3*Number(T[1]),N=Date.now();return{token:E.token,expireTimeMillis:N+x,issuedAtTimeMillis:N}}),nw.apply(this,arguments)}function gb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const vf="firebase-app-check-store";let rw=null;function iw(){return rw||(rw=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(Ki.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(vf,{keyPath:"compositeKey"})}}catch(r){e(Ki.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),rw)}function ow(){return ow=(0,ce.Z)(function*(n,e){const r=(yield iw()).transaction(vf,"readwrite"),u=r.objectStore(vf).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var E;f(Ki.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})}),ow.apply(this,arguments)}const Ny=new fi.Yd("@firebase/app-check");function _b(n,e){return(0,xt.hl)()?function jC(n,e){return function GC(n,e){return ow.apply(this,arguments)}(function zC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ny.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WC(){return va().enabled}function KC(){return wb.apply(this,arguments)}function wb(){return wb=(0,ce.Z)(function*(){const n=va();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wb.apply(this,arguments)}const ux={error:"UNKNOWN_ERROR"};function s(n){return xt.US.encodeString(JSON.stringify(n),!1)}function o(n){return a.apply(this,arguments)}function a(){return a=(0,ce.Z)(function*(n,e=!1){const t=n.app;X0(t);const r=ri(t);let u,i=r.token;if(i&&!b(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(b(y)?i=y:yield _b(t,void 0))}if(!e&&i&&b(i))return{token:i.token};let f,c=!1;if(WC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tw(gb(t,yield KC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield _b(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield ri(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Ny.warn(y.message):Ny.error(y),u=y}return i?u?f=b(i)?{token:i.token,internalError:u}:S(u):(f={token:i.token},r.token=i,yield _b(t,i)):f=S(u),c&&I(t,f),f}),a.apply(this,arguments)}function d(n,e){const t=ri(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function p(n){const{app:e}=n,t=ri(e);let r=t.tokenRefresher;r||(r=function v(n){const{app:e}=n;return new My((0,ce.Z)(function*(){let r;if(r=ri(e).token?yield o(n,!0):yield o(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function I(n,e){const t=ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function b(n){return n.expireTimeMillis-Date.now()>0}function S(n){return{token:s(ux),error:n}}class R{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ri(this.app);for(const t of e)d(this.app,t.next);return Promise.resolve()}}const lx="app-check-internal";!function AP(){(0,hi._registerComponent)(new qa.wA("app-check",n=>function O(n,e){return new R(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lx).initialize()})),(0,hi._registerComponent)(new qa.wA(lx,n=>function z(n){return{getToken:e=>o(n,e),addTokenListener:e=>function l(n,e,t,r){const{app:i}=n,u=ri(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&b(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),p(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>p(n))}(n,"INTERNAL",e),removeTokenListener:e=>d(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,hi.registerVersion)("@firebase/app-check","0.5.17")}();class Ib{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var dx=L(127);const hx=new m.OlP("angularfire2.auth.use-emulator"),fx=new m.OlP("angularfire2.auth.settings"),px=new m.OlP("angularfire2.auth.tenant-id"),gx=new m.OlP("angularfire2.auth.langugage-code"),mx=new m.OlP("angularfire2.auth.use-device-language"),yx=new m.OlP("angularfire.auth.persistence"),_x=(n,e,t,r,i,u,c,f)=>(0,fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[E,T]of Object.entries(c))y.settings[E]=T;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let vx=(()=>{class n{constructor(t,r,i,u,c,f,y,E,T,x,N,U){const $=new ni.x,ne=Je(void 0).pipe((0,H0.Q)(c.outsideAngular),Ar(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1277)))),(0,pt.U)(()=>(0,fr.on)(t,u,r)),(0,pt.U)(ue=>_x(ue,u,f,E,T,x,y,N)),OC({bufferSize:1,refCount:!1}));if(wr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{ne.pipe(_a()).subscribe();const je=ne.pipe(Ar(We=>We.getRedirectResult().then(wt=>wt,()=>null)),In.iC,OC({bufferSize:1,refCount:!1})),et=ne.pipe(Ar(We=>new us.y(wt=>({unsubscribe:u.runOutsideAngular(()=>We.onAuthStateChanged(bt=>wt.next(bt),bt=>wt.error(bt),()=>wt.complete()))})))),Qe=ne.pipe(Ar(We=>new us.y(wt=>({unsubscribe:u.runOutsideAngular(()=>We.onIdTokenChanged(bt=>wt.next(bt),bt=>wt.error(bt),()=>wt.complete()))}))));this.authState=je.pipe(q0(et),(0,_f.R)(c.outsideAngular),(0,H0.Q)(c.insideAngular)),this.user=je.pipe(q0(Qe),(0,_f.R)(c.outsideAngular),(0,H0.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ar(We=>We?(0,rn.D)(We.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(Ar(We=>We?(0,rn.D)(We.getIdTokenResult()):Je(null))),this.credential=(0,PC.T)(je,$,this.authState.pipe(Jr(We=>!We))).pipe((0,pt.U)(We=>We?.user?We:null),(0,_f.R)(c.outsideAngular),(0,H0.Q)(c.insideAngular))}return(0,fr.pX)(this,ne,u,{spy:{apply:(ue,je,et)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&et.then(Qe=>$.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fr.Dh),m.LFG(fr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(hx,8),m.LFG(fx,8),m.LFG(px,8),m.LFG(gx,8),m.LFG(mx,8),m.LFG(yx,8),m.LFG(Ib,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function wx(n,e){return function kP(n,e=po.z){return new us.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JC(n,e){return wx(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function bb(n,e){return JC(n,e).pipe(qo(void 0),ls(),(0,pt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(T=>T.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function Ex(n,e,t){return bb(n,t).pipe(cs((r,i)=>function LP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function FP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function ul(n,e=di.y){return n=n??za,(0,Pr.e)((t,r)=>{let i,u=!0;t.subscribe((0,qn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XC(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Ix(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class bx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qo(void 0),ls(),Jr(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(cs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return JC(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new Dx(this.ref.doc(e),this.afs)}}class Dx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=Sx(r,t);return new bx(i,u,this.afs)}snapshotChanges(){return function OP(n,e){return wx(n,e).pipe(qo(void 0),ls(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(In.iC)}}class UP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bb(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Jr(t=>t.length>0),In.iC):bb(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(cs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return JC(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),In.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(In.iC)}}const Tx=new m.OlP("angularfire2.enableFirestorePersistence"),Cx=new m.OlP("angularfire2.firestore.persistenceSettings"),VP=new m.OlP("angularfire2.firestore.settings"),BP=new m.OlP("angularfire2.firestore.use-emulator");function Sx(n,e=(t=>t)){return{query:e(n),ref:n}}let Ax=(()=>{class n{constructor(t,r,i,u,c,f,y,E,T,x,N,U,$,ne,ue,je,et){this.schedulers=y;const Qe=(0,fr.on)(t,f,r),We=T;x&&_x(Qe,f,N,$,ne,ue,U,je),[this.firestore,this.persistenceEnabled$]=(0,fr.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const wt=f.runOutsideAngular(()=>Qe.firestore());if(u&&wt.settings(u),We&&wt.useEmulator(...We),i&&!wr(c)){const bt=()=>{try{return(0,rn.D)(wt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Qt){return typeof console<"u"&&console.warn(Qt),Je(!1)}};return[wt,f.runOutsideAngular(bt)]}return[wt,Je(!1)]},[u,We,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=Sx(i,r),f=this.schedulers.ngZone.run(()=>u);return new bx(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new UP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Dx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fr.Dh),m.LFG(fr.xv,8),m.LFG(Tx,8),m.LFG(VP,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(Cx,8),m.LFG(BP,8),m.LFG(vx,8),m.LFG(hx,8),m.LFG(fx,8),m.LFG(px,8),m.LFG(gx,8),m.LFG(mx,8),m.LFG(yx,8),m.LFG(Ib,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$P=(()=>{class n{constructor(){dx.Z.registerVersion("angularfire",In.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Tx,useValue:!0},{provide:Cx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Ax]}),n})();const xx="firebasestorage.googleapis.com",Mx="storageBucket";class mr extends xt.ZR{constructor(e,t,r=0){super(eS(e),`Firebase Storage: ${t} (${eS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function eS(n){return"storage/"+n}function tS(){return new mr("unknown","An unknown error occurred, please check the error payload for server response.")}function Rx(){return new mr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Px(){return new mr("canceled","User canceled the upload/download.")}function Nx(){return new mr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vy(n){return new mr("invalid-argument",n)}function kx(){return new mr("app-deleted","The Firebase app was deleted.")}function Ox(n){return new mr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dw(n,e){return new mr("invalid-format","String does not match format '"+n+"': "+e)}function hw(n){throw new mr("internal-error","Internal error: "+n)}class Zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Zi.makeFromUrl(e,t)}catch{return new Zi(e,"")}if(""===r.path)return r;throw function JP(n){return new mr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(We){We.path_=decodeURIComponent(We.path)}const x=t.replace(/[.]/g,"\\."),Qe=[{regex:f,indices:{bucket:1,path:3},postModify:function u(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===xx?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let We=0;We<Qe.length;We++){const wt=Qe[We],bt=wt.regex.exec(e);if(bt){let Lr=bt[wt.indices.path];Lr||(Lr=""),r=new Zi(bt[wt.indices.bucket],Lr),wt.postModify(r);break}}if(null==r)throw function YP(n){return new mr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class rN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Db(n){return"string"==typeof n||n instanceof String}function Lx(n){return nS()&&n instanceof Blob}function nS(){return typeof Blob<"u"&&!(0,xt.UG)()}function rS(n,e,t,r){if(r<e)throw Vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vy(`Invalid value for '${n}'. Expected ${t} or less.`)}function wd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Fx(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(wf||(wf={})),wf))();function Ux(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class lN{constructor(e,t,r,i,u,c,f,y,E,T,x,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=x,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,$)=>{this.resolve_=U,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function oN(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==f){const y=tS();y.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,y):y)}else c(i.canceled?this.appDelete_?kx():Px():Rx())};this.canceled_?t(0,new Tb(!1,null,!0)):this.backoffId_=function iN(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function y(){return 2===f}let E=!1;function T(...ue){E||(E=!0,e.apply(null,ue))}function x(ue){i=setTimeout(()=>{i=null,n(U,y())},ue)}function N(){u&&clearTimeout(u)}function U(ue,...je){if(E)return void N();if(ue)return N(),void T.call(null,ue,...je);if(y()||c)return N(),void T.call(null,ue,...je);let Qe;r<64&&(r*=2),1===f?(f=2,Qe=0):Qe=1e3*(r+Math.random()),x(Qe)}let $=!1;function ne(ue){$||($=!0,N(),!E&&(null!==i?(ue||(f=2),clearTimeout(i),x(0)):ue||(f=1)))}return x(0),u=setTimeout(()=>{c=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new Tb(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===wf.NO_ERROR,y=u.getStatus();if((!f||Ux(y,this.additionalRetryCodes_))&&this.retry){const T=u.getErrorCode()===wf.ABORT;return void r(!1,new Tb(!1,null,T))}const E=-1!==this.successCodes_.indexOf(y);r(!0,new Tb(E,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Tb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mN(...n){const e=function gN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(nS())return new Blob(n);throw new mr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const So={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iS{constructor(e,t){this.data=e,this.contentType=t||null}}function sS(n,e){switch(n){case So.RAW:return new iS(Vx(e));case So.BASE64:case So.BASE64URL:return new iS(Bx(n,e));case So.DATA_URL:return new iS(function wN(n){const e=new $x(n);return e.base64?Bx(So.BASE64,e.rest):function vN(n){let e;try{e=decodeURIComponent(n)}catch{throw dw(So.DATA_URL,"Malformed data URL.")}return Vx(e)}(e.rest)}(e),function EN(n){return new $x(n).contentType}(e))}throw tS()}function Vx(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Bx(n,e){switch(n){case So.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw dw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case So.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw dw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function _N(n){if(typeof atob>"u")throw function nN(n){return new mr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:dw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class $x{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw dw(So.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function IN(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ql{constructor(e,t){let r=0,i="";Lx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Lx(this.data_)){const i=function yN(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ql(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ql(r,!0)}}static getBlob(...e){if(nS()){const t=e.map(r=>r instanceof ql?r.data_:r);return new ql(mN.apply(null,t))}{const t=e.map(c=>Db(c)?sS(So.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new ql(i,!0)}}uploadData(){return this.data_}}function oS(n){let e;try{e=JSON.parse(n)}catch{return null}return function uN(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function jx(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function TN(n,e){return e}class Es{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||TN}}let Cb=null;function fw(){if(Cb)return Cb;const n=[];n.push(new Es("bucket")),n.push(new Es("generation")),n.push(new Es("metageneration")),n.push(new Es("name","fullPath",!0));const t=new Es("name");t.xform=function e(u,c){return function CN(n){return!Db(n)||n.length<2?n:jx(n)}(c)},n.push(t);const i=new Es("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Es("timeCreated")),n.push(new Es("updated")),n.push(new Es("md5Hash",null,!0)),n.push(new Es("cacheControl",null,!0)),n.push(new Es("contentDisposition",null,!0)),n.push(new Es("contentEncoding",null,!0)),n.push(new Es("contentLanguage",null,!0)),n.push(new Es("contentType",null,!0)),n.push(new Es("metadata","customMetadata",!0)),Cb=n,Cb}function Hx(n,e,t){const r=oS(e);return null===r?null:function AN(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function SN(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Zi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function aS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const Gx="prefixes";class Wl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kl(n){if(!n)throw tS()}function Sb(n,e){return function t(r,i){const u=Hx(n,i,e);return Kl(null!==u),u}}function By(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function ZP(){return new mr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function KP(){return new mr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function WP(n){return new mr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function QP(n){return new mr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function pw(n){const e=By(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function qP(n){return new mr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function qx(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Wl(i,"GET",Sb(n,t),c);return f.errorHandler=pw(e),f}function kN(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=wd(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,T=new Wl(f,"GET",function PN(n,e){return function t(r,i){const u=function RN(n,e,t){const r=oS(t);return null===r?null:function MN(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Gx])for(const i of t[Gx]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Zi(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Zi(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Kl(null!==u),u}}(n,e.bucket),E);return T.urlParams=u,T.errorHandler=By(e),T}function Kx(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function UN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Ab{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function uS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Kl(!1)}return Kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const jN={STATE_CHANGED:"state_changed"},Is={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lS(n){switch(n){case"running":case"pausing":case"canceling":return Is.RUNNING;case"paused":return Is.PAUSED;case"success":return Is.SUCCESS;case"canceled":return Is.CANCELED;default:return Is.ERROR}}class HN{constructor(e,t,r){if(function aN(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function $y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class zN extends class GN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw hw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Cu(){return new zN}class Jx{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=fw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(Ux(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Rx()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function VN(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=Kx(e,r,i),f={name:c.fullPath},y=wd(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=aS(c,t),$=new Wl(y,"POST",function U(ne){let ue;uS(ne);try{ue=ne.getResponseHeader("X-Goog-Upload-URL")}catch{Kl(!1)}return Kl(Db(ue)),ue},n.maxUploadRetryTime);return $.urlParams=f,$.headers=T,$.body=x,$.errorHandler=By(e),$}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function BN(n,e,t,r){const y=new Wl(t,"POST",function u(E){const T=uS(E,["active","final"]);let x=null;try{x=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Kl(!1)}x||Kl(!1);const N=Number(x);return Kl(!isNaN(N)),new Ab(N,r.size(),"final"===T)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=By(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Cu,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Ab(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function $N(n,e,t,r,i,u,c,f){const y=new Ab(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function eN(){return new mr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=y.total-y.current;let T=E;i>0&&(T=Math.min(T,i));const x=y.current;let U="";U=0===T?"finalize":E===T?"upload, finalize":"upload";const $={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${y.current}`},ne=r.slice(x,x+T);if(null===ne)throw Nx();const Qe=new Wl(t,"POST",function ue(We,wt){const bt=uS(We,["active","final"]),Qt=y.current+T,Lr=r.size();let Mo;return Mo="final"===bt?Sb(e,u)(We,wt):null,new Ab(Qt,Lr,"final"===bt,Mo)},e.maxUploadRetryTime);return Qe.headers=$,Qe.body=ne.uploadData(),Qe.progressCallback=f||null,Qe.errorHandler=By(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Cu,i,u,!1);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=qx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Zx(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let Qe="";for(let We=0;We<2;We++)Qe+=Math.random().toString().slice(2);return Qe}();c["Content-Type"]="multipart/related; boundary="+y;const E=Kx(e,r,i),T=aS(E,t),U=ql.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+y+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===U)throw Nx();const $={name:E.fullPath},ne=wd(u,n.host,n._protocol),je=n.maxUploadRetryTime,et=new Wl(ne,"POST",Sb(n,t),je);return et.urlParams=$,et.headers=c,et.body=U.uploadData(),et.errorHandler=By(e),et}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Px(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new HN(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lS(this._state)){case Is.SUCCESS:$y(this._resolve.bind(null,this.snapshot))();break;case Is.CANCELED:case Is.ERROR:$y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lS(this._state)){case Is.RUNNING:case Is.PAUSED:e.next&&$y(e.next.bind(e,this.snapshot))();break;case Is.SUCCESS:e.complete&&$y(e.complete.bind(e))();break;default:e.error&&$y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hg{constructor(e,t){this._service=e,this._location=t instanceof Zi?t:Zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hg(e,t)}get root(){const e=new Zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jx(this._location.path)}get storage(){return this._service}get parent(){const e=function bN(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Zi(this._location.bucket,e);return new hg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ox(e)}}function eM(n,e,t){return cS.apply(this,arguments)}function cS(){return cS=(0,ce.Z)(function*(n,e,t){const i=yield tM(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield eM(n,e,i.nextPageToken))}),cS.apply(this,arguments)}function tM(n,e){null!=e&&"number"==typeof e.maxResults&&rS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=kN(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Cu)}function rk(n){n._throwIfRoot("getDownloadURL");const e=function ON(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Wl(i,"GET",function NN(n,e){return function t(r,i){const u=Hx(n,i,e);return Kl(null!==u),function xN(n,e,t,r){const i=oS(e);if(null===i||!Db(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(E=>{const x=n.fullPath;return wd("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+Fx({alt:"media",token:E})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=pw(e),f}(n.storage,n._location,fw());return n.storage.makeRequestWithTokens(e,Cu).then(t=>{if(null===t)throw function tN(){return new mr("no-download-url","The given file does not have any download URLs.")}();return t})}function nM(n,e){const t=function DN(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Zi(n._location.bucket,t);return new hg(n.storage,r)}function rM(n,e){if(n instanceof dS){const t=n;if(null==t._bucket)throw function XP(){return new mr("no-default-bucket","No default bucket found. Did you set the '"+Mx+"' property when initializing the app?")}();const r=new hg(t,t._bucket);return null!=e?rM(r,e):r}return void 0!==e?nM(n,e):n}function ak(n,e){if(e&&function sk(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof dS)return function ok(n,e){return new hg(n,e)}(n,e);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}return rM(n,e)}function iM(n,e){const t=e?.[Mx];return null==t?null:Zi.makeFromBucketSpec(t,n)}class dS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=xx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Zi.makeFromBucketSpec(i,this._host):iM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Zi.makeFromBucketSpec(this._url,e):iM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new rN(kx());{const c=function pN(n,e,t,r,i,u,c=!0){const f=Fx(n.urlParams),y=n.url+f,E=Object.assign({},n.headers);return function hN(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function cN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function dN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,u),function fN(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,r),new lN(y,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,ce.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const sM="@firebase/storage";function uM(n,e){return ak(n=(0,xt.m9)(n),e)}function yk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new dS(t,r,i,e,hi.SDK_VERSION)}!function _k(){(0,hi._registerComponent)(new qa.wA("storage",yk,"PUBLIC").setMultipleInstances(!0)),(0,hi.registerVersion)(sM,"0.9.14",""),(0,hi.registerVersion)(sM,"0.9.14","esm2017")}();class xb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new xb(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new xb(c,this,this._ref)):{next:t.next?c=>t.next(new xb(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class dM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ed(e,this._service))}get items(){return this._delegate.items.map(e=>new Ed(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ed{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function mk(n,e){return nM(n,e)}(this._delegate,e);return new Ed(t,this.storage)}get root(){return new Ed(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ed(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new cM(function lk(n,e,t){return function JN(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Jx(n,new ql(e),t)}(n=(0,xt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=So.RAW,r){this._throwIfRoot("putString");const i=sS(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new cM(new Jx(this._delegate,new ql(i.data,!0),u),this)}listAll(){return function fk(n){return function ek(n){const e={prefixes:[],items:[]};return eM(n,e).then(()=>e)}(n=(0,xt.m9)(n))}(this._delegate).then(e=>new dM(e,this.storage))}list(e){return function hk(n,e){return tM(n=(0,xt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new dM(t,this.storage))}getMetadata(){return function ck(n){return function tk(n){n._throwIfRoot("getMetadata");const e=qx(n.storage,n._location,fw());return n.storage.makeRequestWithTokens(e,Cu)}(n=(0,xt.m9)(n))}(this._delegate)}updateMetadata(e){return function dk(n,e){return function nk(n,e){n._throwIfRoot("updateMetadata");const t=function LN(n,e,t,r){const u=wd(e.fullServerUrl(),n.host,n._protocol),f=aS(t,r),E=n.maxOperationRetryTime,T=new Wl(u,"PATCH",Sb(n,r),E);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=pw(e),T}(n.storage,n._location,e,fw());return n.storage.makeRequestWithTokens(t,Cu)}(n=(0,xt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function pk(n){return rk(n=(0,xt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function gk(n){return function ik(n){n._throwIfRoot("deleteObject");const e=function FN(n,e){const r=wd(e.fullServerUrl(),n.host,n._protocol),f=new Wl(r,"DELETE",function c(y,E){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=pw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Cu)}(n=(0,xt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ox(e)}}class hM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fM(e))throw Vy("ref() expected a child path but got a URL, use refFromURL instead.");return new Ed(uM(this._delegate,e),this)}refFromURL(e){if(!fM(e))throw Vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zi.makeFromUrl(e,this._delegate.host)}catch{throw Vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ed(uM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function lM(n,e,t,r={}){!function uk(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,xt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function fM(n){return/^[A-Za-z]+:\/\//.test(n)}function Ik(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new hM(t,r)}function pM(n){const e=function Dk(n){return new us.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function jP(n,e=po.z){return(0,Pr.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const E=u;u=null,r.next(E)}};function y(){const E=c+n,T=e.now();if(T<E)return i=this.schedule(void 0,E-T),void r.add(i);f()}t.subscribe((0,qn.x)(r,E=>{u=E,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Mb(n){return{getDownloadURL:()=>Je(void 0).pipe(In.fc,Ar(()=>n.getDownloadURL()),In.iC),getMetadata:()=>Je(void 0).pipe(In.fc,Ar(()=>n.getMetadata()),In.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>Mb(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>pM(n.put(e,t)),putString:(e,t,r)=>pM(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function bk(n){const e={TaskState:Is,TaskEvent:jN,StringFormat:So,Storage:hM,Reference:Ed};n.INTERNAL.registerComponent(new qa.wA("storage-compat",Ik,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Wo.Z);const Tk=new m.OlP("angularfire2.storageBucket"),Ck=new m.OlP("angularfire2.storage.maxUploadRetryTime"),Sk=new m.OlP("angularfire2.storage.maxOperationRetryTime"),Ak=new m.OlP("angularfire2.storage.use-emulator");let xk=(()=>{class n{constructor(t,r,i,u,c,f,y,E,T,x){const N=(0,fr.on)(t,c,r);this.storage=(0,fr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const U=c.runOutsideAngular(()=>N.storage(i||void 0)),$=T;return $&&U.useEmulator(...$),y&&U.setMaxUploadRetryTime(y),E&&U.setMaxOperationRetryTime(E),U},[y,E])}ref(t){return Mb(this.storage.ref(t))}refFromURL(t){return Mb(this.storage.refFromURL(t))}upload(t,r,i){return Mb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fr.Dh),m.LFG(fr.xv,8),m.LFG(Tk,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(Ck,8),m.LFG(Sk,8),m.LFG(Ak,8),m.LFG(Ib,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),Rk=(()=>{class n{constructor(){dx.Z.registerVersion("angularfire",In.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[xk],imports:[Mk]}),n})();class gM{}const Id="*";function mM(n,e){return{type:7,name:n,definitions:e,options:{}}}function Rb(n,e=null){return{type:4,styles:e,timings:n}}function yM(n,e=null){return{type:2,steps:n,options:e}}function jy(n){return{type:6,styles:n,offset:null}}function Pb(n,e,t){return{type:0,name:n,styles:e,options:t}}function Nb(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function _M(n){Promise.resolve().then(n)}class gw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_M(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class vM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?_M(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function wM(n){return new m.vHH(3e3,!1)}function f1(){return typeof window<"u"&&typeof window.document<"u"}function fS(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ef(n){switch(n.length){case 0:return new gw;case 1:return n[0];default:return new vM(n)}}function EM(n,e,t,r,i=new Map,u=new Map){const c=[],f=[];let y=-1,E=null;if(r.forEach(T=>{const x=T.get("offset"),N=x==y,U=N&&E||new Map;T.forEach(($,ne)=>{let ue=ne,je=$;if("offset"!==ne)switch(ue=e.normalizePropertyName(ue,c),je){case"!":je=i.get(ne);break;case Id:je=u.get(ne);break;default:je=e.normalizeStyleValue(ne,ue,je,c)}U.set(ue,je)}),N||f.push(U),E=U,y=x}),c.length)throw function t1(n){return new m.vHH(3502,!1)}();return f}function pS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&gS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&gS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&gS(t,"destroy",n)))}}function gS(n,e,t){const u=mS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function mS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Ao(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function IM(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let yS=(n,e)=>!1,bM=(n,e,t)=>[],DM=null;function _S(n){const e=n.parentNode||n.host;return e===DM?null:e}(fS()||typeof Element<"u")&&(f1()?(DM=(()=>document.documentElement)(),yS=(n,e)=>{for(;e;){if(e===n)return!0;e=_S(e)}return!1}):yS=(n,e)=>n.contains(e),bM=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let fg=null,TM=!1;const CM=yS,SM=bM;let AM=(()=>{class n{validateStyleProperty(t){return function g1(n){fg||(fg=function m1(){return typeof document<"u"?document.body:null}()||{},TM=!!fg.style&&"WebkitAppearance"in fg.style);let e=!0;return fg.style&&!function p1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in fg.style,!e&&TM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return CM(t,r)}getParentElement(t){return _S(t)}query(t,r,i){return SM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new gw(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),vS=(()=>{class n{}return n.NOOP=new AM,n})();const wS="ng-enter",kb="ng-leave",Ob="ng-trigger",Lb=".ng-trigger",MM="ng-animating",ES=".ng-animating";function bd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:IS(parseFloat(e[1]),e[2])}function IS(n,e){return"s"===e?1e3*n:n}function Fb(n,e,t){return n.hasOwnProperty("duration")?n:function v1(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(wM()),{duration:0,delay:0,easing:""};i=IS(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=IS(parseFloat(y),f[4]));const E=f[5];E&&(c=E)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function Nk(){return new m.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function kk(){return new m.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,wM())}return{duration:i,delay:u,easing:c}}(n,e,t)}function mw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function RM(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function If(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function NM(n,e,t){return t?e+":"+t+";":""}function kM(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=NM(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=NM(0,b1(t),n.style[t]));n.setAttribute("style",e)}function Zl(n,e,t){n.style&&(e.forEach((r,i)=>{const u=DS(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),fS()&&kM(n))}function pg(n,e){n.style&&(e.forEach((t,r)=>{const i=DS(r);n.style[i]=""}),fS()&&kM(n))}function yw(n){return Array.isArray(n)?1==n.length?n[0]:yM(n):n}const bS=new RegExp("{{\\s*(.+?)\\s*}}","g");function OM(n){let e=[];if("string"==typeof n){let t;for(;t=bS.exec(n);)e.push(t[1]);bS.lastIndex=0}return e}function _w(n,e,t){const r=n.toString(),i=r.replace(bS,(u,c)=>{let f=e[c];return null==f&&(t.push(function Lk(n){return new m.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function Ub(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const I1=/-+([a-z0-9])/g;function DS(n){return n.replace(I1,(...e)=>e[1].toUpperCase())}function b1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Fk(n){return new m.vHH(3004,!1)}()}}function LM(n,e){return window.getComputedStyle(n)[e]}function x1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function M1(n,e,t){if(":"==n[0]){const y=function R1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Yk(n){return new m.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Qk(n){return new m.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(FM(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(FM(c,i))}(r,t,e)):t.push(n),t}const jb=new Set(["true","1"]),Hb=new Set(["false","0"]);function FM(n,e){const t=jb.has(n)||Hb.has(n),r=jb.has(e)||Hb.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?jb.has(n):Hb.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?jb.has(e):Hb.has(e)),c&&f}}const P1=new RegExp("s*:selfs*,?","g");function TS(n,e,t,r){return new N1(n).build(e,t,r)}class N1{constructor(e){this._driver=e}build(e,t,r){const i=new L1(t);return this._resetContextStyleTimingState(i),xo(this,yw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Vk(){return new m.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,E=y.name;E.toString().split(/\s*,\s*/).forEach(T=>{y.name=T,u.push(this.visitState(y,t))}),y.name=E}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function Bk(){return new m.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{OM(y).forEach(E=>{c.hasOwnProperty(E)||u.add(E)})})}),u.size&&(Ub(u.values()),t.errors.push(function $k(n,e){return new m.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=xo(this,yw(e.animation),t);return{type:1,matchers:x1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:gg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>xo(this,r,t)),options:gg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=xo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:gg(e.options)}}visitAnimate(e,t){const r=function U1(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return CS(Fb(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=CS(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=Fb(t,e);return CS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:jy({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const E={};r.easing&&(E.easing=r.easing),c=jy(E)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===Id?r.push(f):t.errors.push(new m.vHH(3002,!1)):r.push(RM(f));let u=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!u))for(let y of f.values())if(y.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),T=E.get(y);let x=!0;T&&(u!=i&&u>=T.startTime&&i<=T.endTime&&(t.errors.push(function Hk(n,e,t,r,i){return new m.vHH(3010,!1)}()),x=!1),u=T.startTime),x&&E.set(y,{startTime:u,endTime:i}),t.options&&function E1(n,e,t){const r=e.params||{},i=OM(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function Ok(n){return new m.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Gk(){return new m.vHH(3011,!1)}()),r;let u=0;const c=[];let f=!1,y=!1,E=0;const T=e.steps.map(je=>{const et=this._makeStyleAst(je,t);let Qe=null!=et.offset?et.offset:function F1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(et.styles),We=0;return null!=Qe&&(u++,We=et.offset=Qe),y=y||We<0||We>1,f=f||We<E,E=We,c.push(We),et});y&&t.errors.push(function zk(){return new m.vHH(3012,!1)}()),f&&t.errors.push(function qk(){return new m.vHH(3200,!1)}());const x=e.steps.length;let N=0;u>0&&u<x?t.errors.push(function Wk(){return new m.vHH(3202,!1)}()):0==u&&(N=1/(x-1));const U=x-1,$=t.currentTime,ne=t.currentAnimateTimings,ue=ne.duration;return T.forEach((je,et)=>{const Qe=N>0?et==U?1:N*et:c[et],We=Qe*ue;t.currentTime=$+ne.delay+We,ne.duration=We,this._validateStyleAst(je,t),je.offset=Qe,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:xo(this,yw(e.animation),t),options:gg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:gg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function k1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(P1,"")),n=n.replace(/@\*/g,Lb).replace(/@\w+/g,t=>Lb+"-"+t.slice(1)).replace(/:animating/g,ES),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Ao(t.collectedStyles,t.currentQuerySelector,new Map);const f=xo(this,yw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:gg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Kk(){return new m.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Fb(e.timings,t.errors,!0);return{type:12,animation:xo(this,yw(e.animation),t),timings:r,options:null}}}class L1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gg(n){return n?(n=mw(n)).params&&(n.params=function O1(n){return n?mw(n):null}(n.params)):n={},n}function CS(n,e,t){return{duration:n,delay:e,easing:t}}function SS(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class Gb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $1=new RegExp(":enter","g"),H1=new RegExp(":leave","g");function AS(n,e,t,r,i,u=new Map,c=new Map,f,y,E=[]){return(new G1).buildKeyframes(n,e,t,r,i,u,c,f,y,E)}class G1{buildKeyframes(e,t,r,i,u,c,f,y,E,T=[]){E=E||new Gb;const x=new xS(e,t,E,i,u,T,[]);x.options=y;const N=y.delay?bd(y.delay):0;x.currentTimeline.delayNextStep(N),x.currentTimeline.setStyles([c],null,x.errors,y),xo(this,r,x);const U=x.timelines.filter($=>$.containsAnimation());if(U.length&&f.size){let $;for(let ne=U.length-1;ne>=0;ne--){const ue=U[ne];if(ue.element===t){$=ue;break}}$&&!$.allowOnlyTimelineStyles()&&$.setStyles([f],null,x.errors,y)}return U.length?U.map($=>$.buildKeyframes()):[SS(t,[],[],[],0,N,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:bd(_w(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?bd(r.duration):null,f=null!=r.delay?bd(r.delay):null;return 0!==c&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,E.duration+E.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zb);const c=bd(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>xo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?bd(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),xo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Fb(t.params?_w(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?bd(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zb);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((E,T)=>{t.currentQueryIndex=T;const x=t.createSubContext(e.options,E);u&&x.delayNextStep(u),E===t.element&&(y=x.currentTimeline),xo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const T=t.currentTimeline;y&&T.delayNextStep(y);const x=T.currentTime;xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const zb={};class xS{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new qb(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=bd(r.duration)),null!=r.delay&&(i.delay=bd(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=_w(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new xS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=zb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new z1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace($1,"."+this._enterClassName)).replace(H1,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),f.push(...E)}return!u&&0==f.length&&c.push(function Zk(n){return new m.vHH(3014,!1)}()),f}}class qb{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new qb(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Id),this._currentKeyframe.set(t,Id);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function q1(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Id)}else If(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of c){const E=_w(y,u,r);this._pendingStyles.set(f,E),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Id),this._updateStyle(f,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const E=If(f,new Map,this._backFill);E.forEach((T,x)=>{"!"===T?e.add(x):T===Id&&t.add(x)}),r||E.set("offset",y/this.duration),i.push(E)});const u=e.size?Ub(e.values()):[],c=t.size?Ub(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return SS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class z1 extends qb{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=If(e[0]);y.set("offset",0),u.push(y);const E=If(e[0]);E.set("offset",BM(f)),u.push(E);const T=e.length-1;for(let x=1;x<=T;x++){let N=If(e[x]);const U=N.get("offset");N.set("offset",BM((t+U*r)/c)),u.push(N)}r=c,t=0,i="",e=u}return SS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function BM(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class MS{}const W1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class K1 extends MS{normalizePropertyName(e,t){return DS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(W1.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function Uk(n,e){return new m.vHH(3005,!1)}())}return c+u}}function $M(n,e,t,r,i,u,c,f,y,E,T,x,N){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:E,postStyleProps:T,totalTime:x,errors:N}}const RS={};class jM{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Z1(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,f,y,E,T){const x=[],N=this.ast.options&&this.ast.options.params||RS,$=this.buildStyles(r,f&&f.params||RS,x),ne=y&&y.params||RS,ue=this.buildStyles(i,ne,x),je=new Set,et=new Map,Qe=new Map,We="void"===i,wt={params:Q1(ne,N),delay:this.ast.options?.delay},bt=T?[]:AS(e,t,this.ast.animation,u,c,$,ue,wt,E,x);let Qt=0;if(bt.forEach(Mo=>{Qt=Math.max(Mo.duration+Mo.delay,Qt)}),x.length)return $M(t,this._triggerName,r,i,We,$,ue,[],[],et,Qe,Qt,x);bt.forEach(Mo=>{const Cd=Mo.element,mP=Ao(et,Cd,new Set);Mo.preStyleProps.forEach(Eg=>mP.add(Eg));const Ow=Ao(Qe,Cd,new Set);Mo.postStyleProps.forEach(Eg=>Ow.add(Eg)),Cd!==t&&je.add(Cd)});const Lr=Ub(je.values());return $M(t,this._triggerName,r,i,We,$,ue,bt,Lr,et,Qe,Qt)}}function Q1(n,e){const t=mw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Y1{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=mw(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,f)=>{c&&(c=_w(c,i,t));const y=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,y,c,t),r.set(y,c)})}),r}}class X1{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Y1(i.style,i.options&&i.options.params||{},r))}),HM(this.states,"true","1"),HM(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new jM(e,i,this.states))}),this.fallbackTransition=function eO(n,e,t){return new jM(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function HM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const tO=new Gb;class nO{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=TS(this._driver,t,r,[]);if(r.length)throw function n1(n){return new m.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=EM(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const f=new Map;if(u?(c=AS(this._driver,t,u,wS,kb,new Map,new Map,r,tO,i),c.forEach(T=>{const x=Ao(f,T.element,new Map);T.postStyleProps.forEach(N=>x.set(N,null))})):(i.push(function r1(){return new m.vHH(3300,!1)}()),c=[]),i.length)throw function i1(n){return new m.vHH(3504,!1)}();f.forEach((T,x)=>{T.forEach((N,U)=>{T.set(U,this._driver.computeStyle(x,U,Id))})});const E=Ef(c.map(T=>{const x=f.get(T.element);return this._buildPlayer(T,new Map,x)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function s1(n){return new m.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=mS(t,"","","");return pS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const GM="ng-animate-queued",PS="ng-animate-disabled",aO=[],zM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},uO={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wa="__ng_removed";class NS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function hO(n){return n??null}(r?e.value:e),r){const u=mw(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const vw="void",kS=new NS(vw);class lO{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ea(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function o1(n,e){return new m.vHH(3302,!1)}();if(null==r||0==r.length)throw function a1(n){return new m.vHH(3303,!1)}();if(!function fO(n){return"start"==n||"done"==n}(r))throw function u1(n,e){return new m.vHH(3400,!1)}();const u=Ao(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Ao(this._engine.statesByElement,e,new Map);return f.has(t)||(Ea(e,Ob),Ea(e,Ob+"-"+t),f.set(t,kS)),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function l1(n){return new m.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new OS(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ea(e,Ob),Ea(e,Ob+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const E=new NS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),f.set(t,E),y||(y=kS),E.value!==vw&&y.value===E.value){if(!function mO(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,E.params)){const ne=[],ue=u.matchStyles(y.value,y.params,ne),je=u.matchStyles(E.value,E.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{pg(e,ue),Zl(e,je)})}return}const N=Ao(this._engine.playersByElement,e,[]);N.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let U=u.matchTransition(y.value,E.value,e,E.params),$=!1;if(!U){if(!i)return;U=u.fallbackTransition,$=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:y,toState:E,player:c,isFallbackTransition:$}),$||(Ea(e,GM),c.onStart(()=>{Hy(e,GM)})),c.onDone(()=>{let ne=this.players.indexOf(c);ne>=0&&this.players.splice(ne,1);const ue=this._engine.playersByElement.get(e);if(ue){let je=ue.indexOf(c);je>=0&&ue.splice(je,1)}}),this.players.push(c),N.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Lb,!0);r.forEach(i=>{if(i[wa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(u.forEach((y,E)=>{if(c.set(E,y.value),this._triggers.has(E)){const T=this.trigger(e,E,vw,i);T&&f.push(T)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Ef(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers.get(c).fallbackTransition,E=r.get(c)||kS,T=new NS(vw),x=new OS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:E,toState:T,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[wa];(!u||u===zM)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ea(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=mS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,pS(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class cO{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new lO(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const E=r.indexOf(y);r.splice(E+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(Wb(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Wb(t))return;const u=t[wa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ea(e,PS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hy(e,PS))}removeNode(e,t,r,i){if(Wb(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[wa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return Wb(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,Lb,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ES,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ef(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[wa];if(t&&t.setForRemoval){if(e[wa]=zM,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(PS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ea(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ef(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function c1(n){return new m.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Gb,i=[],u=new Map,c=[],f=new Map,y=new Map,E=new Map,T=new Set;this.disabledNodes.forEach(yt=>{T.add(yt);const Pt=this.driver.query(yt,".ng-animate-queued",!0);for(let Ft=0;Ft<Pt.length;Ft++)T.add(Pt[Ft])});const x=this.bodyNode,N=Array.from(this.statesByElement.keys()),U=KM(N,this.collectedEnterElements),$=new Map;let ne=0;U.forEach((yt,Pt)=>{const Ft=wS+ne++;$.set(Pt,Ft),yt.forEach(pn=>Ea(pn,Ft))});const ue=[],je=new Set,et=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Pt=this.collectedLeaveElements[yt],Ft=Pt[wa];Ft&&Ft.setForRemoval&&(ue.push(Pt),je.add(Pt),Ft.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(pn=>je.add(pn)):et.add(Pt))}const Qe=new Map,We=KM(N,Array.from(je));We.forEach((yt,Pt)=>{const Ft=kb+ne++;Qe.set(Pt,Ft),yt.forEach(pn=>Ea(pn,Ft))}),e.push(()=>{U.forEach((yt,Pt)=>{const Ft=$.get(Pt);yt.forEach(pn=>Hy(pn,Ft))}),We.forEach((yt,Pt)=>{const Ft=Qe.get(Pt);yt.forEach(pn=>Hy(pn,Ft))}),ue.forEach(yt=>{this.processLeaveNode(yt)})});const wt=[],bt=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Ft=>{const pn=Ft.player,yi=Ft.element;if(wt.push(pn),this.collectedEnterElements.length){const Yi=yi[wa];if(Yi&&Yi.setForMove){if(Yi.previousTriggersValues&&Yi.previousTriggersValues.has(Ft.triggerName)){const Ig=Yi.previousTriggersValues.get(Ft.triggerName),ba=this.statesByElement.get(Ft.element);if(ba&&ba.has(Ft.triggerName)){const _D=ba.get(Ft.triggerName);_D.value=Ig,ba.set(Ft.triggerName,_D)}}return void pn.destroy()}}const Yl=!x||!this.driver.containsElement(x,yi),Ro=Qe.get(yi),Cf=$.get(yi),yr=this._buildInstruction(Ft,r,Cf,Ro,Yl);if(yr.errors&&yr.errors.length)return void bt.push(yr);if(Yl)return pn.onStart(()=>pg(yi,yr.fromStyles)),pn.onDestroy(()=>Zl(yi,yr.toStyles)),void i.push(pn);if(Ft.isFallbackTransition)return pn.onStart(()=>pg(yi,yr.fromStyles)),pn.onDestroy(()=>Zl(yi,yr.toStyles)),void i.push(pn);const vP=[];yr.timelines.forEach(Yi=>{Yi.stretchStartingKeyframe=!0,this.disabledNodes.has(Yi.element)||vP.push(Yi)}),yr.timelines=vP,r.append(yi,yr.timelines),c.push({instruction:yr,player:pn,element:yi}),yr.queriedElements.forEach(Yi=>Ao(f,Yi,[]).push(pn)),yr.preStyleProps.forEach((Yi,Ig)=>{if(Yi.size){let ba=y.get(Ig);ba||y.set(Ig,ba=new Set),Yi.forEach((_D,mA)=>ba.add(mA))}}),yr.postStyleProps.forEach((Yi,Ig)=>{let ba=E.get(Ig);ba||E.set(Ig,ba=new Set),Yi.forEach((_D,mA)=>ba.add(mA))})});if(bt.length){const yt=[];bt.forEach(Pt=>{yt.push(function d1(n,e){return new m.vHH(3505,!1)}())}),wt.forEach(Pt=>Pt.destroy()),this.reportError(yt)}const Qt=new Map,Lr=new Map;c.forEach(yt=>{const Pt=yt.element;r.has(Pt)&&(Lr.set(Pt,Pt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,Qt))}),i.forEach(yt=>{const Pt=yt.element;this._getPreviousPlayers(Pt,!1,yt.namespaceId,yt.triggerName,null).forEach(pn=>{Ao(Qt,Pt,[]).push(pn),pn.destroy()})});const Mo=ue.filter(yt=>QM(yt,y,E)),Cd=new Map;WM(Cd,this.driver,et,E,Id).forEach(yt=>{QM(yt,y,E)&&Mo.push(yt)});const Ow=new Map;U.forEach((yt,Pt)=>{WM(Ow,this.driver,new Set(yt),y,"!")}),Mo.forEach(yt=>{const Pt=Cd.get(yt),Ft=Ow.get(yt);Cd.set(yt,new Map([...Array.from(Pt?.entries()??[]),...Array.from(Ft?.entries()??[])]))});const Eg=[],yP=[],_P={};c.forEach(yt=>{const{element:Pt,player:Ft,instruction:pn}=yt;if(r.has(Pt)){if(T.has(Pt))return Ft.onDestroy(()=>Zl(Pt,pn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(pn.totalTime),void i.push(Ft);let yi=_P;if(Lr.size>1){let Ro=Pt;const Cf=[];for(;Ro=Ro.parentNode;){const yr=Lr.get(Ro);if(yr){yi=yr;break}Cf.push(Ro)}Cf.forEach(yr=>Lr.set(yr,yi))}const Yl=this._buildAnimation(Ft.namespaceId,pn,Qt,u,Ow,Cd);if(Ft.setRealPlayer(Yl),yi===_P)Eg.push(Ft);else{const Ro=this.playersByElement.get(yi);Ro&&Ro.length&&(Ft.parentPlayer=Ef(Ro)),i.push(Ft)}}else pg(Pt,pn.fromStyles),Ft.onDestroy(()=>Zl(Pt,pn.toStyles)),yP.push(Ft),T.has(Pt)&&i.push(Ft)}),yP.forEach(yt=>{const Pt=u.get(yt.element);if(Pt&&Pt.length){const Ft=Ef(Pt);yt.setRealPlayer(Ft)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<ue.length;yt++){const Pt=ue[yt],Ft=Pt[wa];if(Hy(Pt,kb),Ft&&Ft.hasAnimation)continue;let pn=[];if(f.size){let Yl=f.get(Pt);Yl&&Yl.length&&pn.push(...Yl);let Ro=this.driver.query(Pt,ES,!0);for(let Cf=0;Cf<Ro.length;Cf++){let yr=f.get(Ro[Cf]);yr&&yr.length&&pn.push(...yr)}}const yi=pn.filter(Yl=>!Yl.destroyed);yi.length?pO(this,Pt,yi):this.processLeaveNode(Pt)}return ue.length=0,Eg.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Pt=this.players.indexOf(yt);this.players.splice(Pt,1)}),yt.play()}),Eg}elementContainsData(e,t){let r=!1;const i=t[wa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==vw;f.forEach(E=>{E.queued||!y&&E.triggerName!=i||c.push(E)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,T=E!==u,x=Ao(r,E,[]);this._getPreviousPlayers(E,T,c,f,t.toState).forEach(U=>{const $=U.getRealPlayer();$.beforeDestroy&&$.beforeDestroy(),U.destroy(),x.push(U)})}pg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,E=[],T=new Set,x=new Set,N=t.timelines.map($=>{const ne=$.element;T.add(ne);const ue=ne[wa];if(ue&&ue.removedBeforeQueried)return new gw($.duration,$.delay);const je=ne!==y,et=function gO(n){const e=[];return ZM(n,e),e}((r.get(ne)||aO).map(Qt=>Qt.getRealPlayer())).filter(Qt=>!!Qt.element&&Qt.element===ne),Qe=u.get(ne),We=c.get(ne),wt=EM(0,this._normalizer,0,$.keyframes,Qe,We),bt=this._buildPlayer($,wt,et);if($.subTimeline&&i&&x.add(ne),je){const Qt=new OS(e,f,ne);Qt.setRealPlayer(bt),E.push(Qt)}return bt});E.forEach($=>{Ao(this.playersByQueriedElement,$.element,[]).push($),$.onDone(()=>function dO(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,$.element,$))}),T.forEach($=>Ea($,MM));const U=Ef(N);return U.onDestroy(()=>{T.forEach($=>Hy($,MM)),Zl(y,t.toStyles)}),x.forEach($=>{Ao(i,$,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new gw(e.duration,e.delay)}}class OS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new gw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>pS(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ao(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Wb(n){return n&&1===n.nodeType}function qM(n,e){const t=n.style.display;return n.style.display=e??"none",t}function WM(n,e,t,r,i){const u=[];t.forEach(y=>u.push(qM(y)));const c=[];r.forEach((y,E)=>{const T=new Map;y.forEach(x=>{const N=e.computeStyle(E,x,i);T.set(x,N),(!N||0==N.length)&&(E[wa]=uO,c.push(E))}),n.set(E,T)});let f=0;return t.forEach(y=>qM(y,u[f++])),c}function KM(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const E=f.parentNode;return y=t.has(E)?E:i.has(E)?1:c(E),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function Ea(n,e){n.classList?.add(e)}function Hy(n,e){n.classList?.remove(e)}function pO(n,e,t){Ef(t).onDone(()=>n.processLeaveNode(e))}function ZM(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof vM?ZM(r.players,e):e.push(r)}}function QM(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class Kb{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new cO(e,t,r),this._timelineEngine=new nO(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],T=TS(this._driver,u,y,[]);if(y.length)throw function e1(n,e){return new m.vHH(3404,!1)}();f=function J1(n,e,t){return new X1(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=IM(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=IM(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _O=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Zl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zl(this._element,this._initialStyles),this._endStyles&&(Zl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(pg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pg(this._element,this._endStyles),this._endStyles=null),Zl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function LS(n){let e=null;return n.forEach((t,r)=>{(function vO(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class YM{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:LM(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class wO{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return CM(e,t)}getParentElement(e){return _S(e)}query(e,t,r){return SM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const E=new Map,T=c.filter(U=>U instanceof YM);(function D1(n,e){return 0===n||0===e})(r,i)&&T.forEach(U=>{U.currentSnapshot.forEach(($,ne)=>E.set(ne,$))});let x=function w1(n){return n.length?n[0]instanceof Map?n:n.map(e=>RM(e)):[]}(t).map(U=>If(U));x=function T1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(f=>c.set(f,LM(n,f)))}}return e}(e,x,E);const N=function yO(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=LS(e[0]),e.length>1&&(r=LS(e[e.length-1]))):e instanceof Map&&(t=LS(e)),t||r?new _O(n,t,r):null}(e,x);return new YM(e,x,y,N)}}let EO=(()=>{class n extends gM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?yM(t):t;return JM(this._renderer,null,r,"register",[i]),new IO(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class IO extends class Pk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new bO(this._id,e,t||{},this._renderer)}}class bO{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return JM(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function JM(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const XM="@.disabled";let DO=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=c?.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new eR("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,T)),T}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=T=>{Array.isArray(T)?T.forEach(y):this.engine.registerTrigger(c,f,t,T.name,T)};return r.data.animation.forEach(y),new TO(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(Kb),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class eR{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==XM?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class TO extends eR{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==XM?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function CO(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function SO(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let AO=(()=>{class n extends Kb{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(vS),m.LFG(MS),m.LFG(m.z2F))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const tR=[{provide:gM,useClass:EO},{provide:MS,useFactory:function xO(){return new K1}},{provide:Kb,useClass:AO},{provide:m.FYo,useFactory:function MO(n,e,t){return new DO(n,e,t)},deps:[ao,Kb,m.R0b]}],FS=[{provide:vS,useFactory:()=>new wO},{provide:m.QbO,useValue:"BrowserAnimations"},...tR],nR=[{provide:vS,useClass:AM},{provide:m.QbO,useValue:"NoopAnimations"},...tR];let RO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?nR:FS}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:FS,imports:[rl]}),n})();const rR_firebaseConfig={apiKey:"AIzaSyBQujecS6EtrN0HG8TCyW9DurdU5jgFKsk",authDomain:"planning-poker-bbt.firebaseapp.com",databaseURL:"https://planning-poker-bbt-default-rtdb.firebaseio.com",projectId:"planning-poker-bbt",storageBucket:"planning-poker-bbt.appspot.com",messagingSenderId:"851619405106",appId:"1:851619405106:web:57c50f725eb9bf7ba64b2b",measurementId:"G-RW1DGDDRN4"};var Qb=L(727);class Su extends ni.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:PO}=Array,{getPrototypeOf:NO,prototype:kO,keys:OO}=Object;const{isArray:UO}=Array;var jO=L(9672);function iR(...n){const e=(0,pr.yG)(n),t=(0,pr.jO)(n),{args:r,keys:i}=function LO(n){if(1===n.length){const e=n[0];if(PO(e))return{args:e,keys:null};if(function FO(n){return n&&"object"==typeof n&&NO(n)===kO}(e)){const t=OO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,rn.D)([],e);const u=new us.y(function HO(n,e,t=di.y){return r=>{sR(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)sR(e,()=>{const E=(0,rn.D)(n[y],e);let T=!1;E.subscribe((0,qn.x)(r,x=>{u[y]=x,T||(T=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function $O(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):di.y));return t?u.pipe(function BO(n){return(0,pt.U)(e=>function VO(n,e){return UO(e)?n(...e):n(e)}(n,e))}(t)):u}function sR(n,e,t){n?(0,jO.f)(t,n,e):e()}function oR(n){return new us.y(e=>{(0,G0.Xf)(n()).subscribe(e)})}var GO=L(9635);function ww(n,e){const t=(0,Sy.m)(n)?n:()=>n,r=i=>i.error(t());return new us.y(e?i=>e.schedule(r,0,i):r)}function US(){return(0,Pr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aR extends us.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qb.w0.EMPTY)}return e}refCount(){return US()(this)}}var bs=L(5577);function mg(n,e){return(0,Sy.m)(e)?(0,bs.z)(n,e,1):(0,bs.z)(n,1)}var Qi=L(8505);function bf(n){return(0,Pr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,qn.x)(t,void 0,void 0,c=>{u=(0,G0.Xf)(n(c,bf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function VS(n){return n<=0?()=>zl.E:(0,Pr.e)((e,t)=>{let r=[];e.subscribe((0,qn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function uR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Jr((i,u)=>n(i,u,r)):di.y,VS(1),t?yf(e):z0(()=>new ug))}function BS(n){return(0,Pr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",Ew=Symbol("RouteTitle");class WO{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gy(n){return new WO(n)}function KO(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ql(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!lR(n[i],e[i]))return!1;return!0}function lR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function cR(n){return Array.prototype.concat.apply([],n)}function dR(n){return n.length>0?n[n.length-1]:null}function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Df(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,rn.D)(Promise.resolve(n)):Je(n)}const YO={exact:function pR(n,e,t){if(!_g(n.segments,e.segments)||!Yb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pR(n.children[r],e.children[r],t))return!1;return!0},subset:gR},hR={exact:function JO(n,e){return Ql(n,e)},subset:function XO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lR(n[t],e[t]))},ignored:()=>!0};function fR(n,e,t){return YO[t.paths](n.root,e.root,t.matrixParams)&&hR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gR(n,e,t){return mR(n,e,e.segments,t)}function mR(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_g(i,t)||e.hasChildren()||!Yb(i,t,r))}if(n.segments.length===t.length){if(!_g(n.segments,t)||!Yb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!gR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(_g(n.segments,i)&&Yb(n.segments,i,r)&&n.children[Zt])&&mR(n.children[Zt],e,u,r)}}function Yb(n,e,t){return e.every((r,i)=>hR[t](n[i].parameters,r.parameters))}class yg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gy(this.queryParams)),this._queryParamMap}toString(){return nL.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jb(this)}}class Iw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gy(this.parameters)),this._parameterMap}toString(){return wR(this)}}function _g(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let yR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new jS},providedIn:"root"}),n})();class jS{parse(e){const t=new dL(e);return new yg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bw(e.root,!0)}`,r=function sL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Xb(t)}=${Xb(i)}`).join("&"):`${Xb(t)}=${Xb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function rL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const nL=new jS;function Jb(n){return n.segments.map(e=>wR(e)).join("/")}function bw(n,e){if(!n.hasChildren())return Jb(n);if(e){const t=n.children[Zt]?bw(n.children[Zt],!1):"",r=[];return xi(n.children,(i,u)=>{u!==Zt&&r.push(`${u}:${bw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tL(n,e){let t=[];return xi(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),xi(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[bw(n.children[Zt],!1)]:[`${i}:${bw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${Jb(n)}/${t[0]}`:`${Jb(n)}/(${t.join("//")})`}}function _R(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xb(n){return _R(n).replace(/%3B/gi,";")}function HS(n){return _R(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eD(n){return decodeURIComponent(n)}function vR(n){return eD(n.replace(/\+/g,"%20"))}function wR(n){return`${HS(n.path)}${function iL(n){return Object.keys(n).map(e=>`;${HS(e)}=${HS(n[e])}`).join("")}(n.parameters)}`}const oL=/^[^\/()?;=#]+/;function tD(n){const e=n.match(oL);return e?e[0]:""}const aL=/^[^=?&#]+/,lL=/^[^&#]+/;class dL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new en(e,t)),r}parseSegment(){const e=tD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new Iw(eD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tD(this.remaining);i&&(r=i,this.capture(r))}e[eD(t)]=eD(r)}parseQueryParam(e){const t=function uL(n){const e=n.match(aL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function cL(n){const e=n.match(lL);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=vR(t),u=vR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Zt]:new en([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function GS(n){return n.segments.length>0?new en([],{[Zt]:n}):n}function nD(n){const e={};for(const r of Object.keys(n.children)){const u=nD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function hL(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function vg(n){return n instanceof yg}function gL(n,e,t,r,i){if(0===t.length)return zy(e.root,e.root,e.root,r,i);const u=function bR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return xi(u.outlets,(y,E)=>{f[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new IR(t,e,r)}(t);return u.toRoot()?zy(e.root,e.root,new en([],{}),r,i):function c(y){const E=function yL(n,e,t,r){if(n.isAbsolute)return new qy(e.root,!0,0);if(-1===r)return new qy(t,t===e.root,0);return function DR(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new qy(r,!1,i-u)}(t,r+(Dw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,y),T=E.processChildren?Cw(E.segmentGroup,E.index,u.commands):qS(E.segmentGroup,E.index,u.commands);return zy(e.root,E.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Dw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Tw(n){return"object"==typeof n&&null!=n&&n.outlets}function zy(n,e,t,r,i){let c,u={};r&&xi(r,(y,E)=>{u[E]=Array.isArray(y)?y.map(T=>`${T}`):`${y}`}),c=n===e?t:ER(n,e,t);const f=GS(nD(c));return new yg(f,u,i)}function ER(n,e,t){const r={};return xi(n.children,(i,u)=>{r[u]=i===e?t:ER(i,e,t)}),new en(n.segments,r)}class IR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dw(r[0]))throw new m.vHH(4003,!1);const i=r.find(Tw);if(i&&i!==dR(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qS(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return Cw(n,e,t);const r=function vL(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(Tw(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!CR(y,E,c))return u;r+=2}else{if(!CR(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new en(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new en(n.segments.slice(r.pathIndex),n.children),Cw(u,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?WS(n,e,t):r.match?Cw(n,0,i):WS(n,e,t)}function Cw(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function _L(n){return Tw(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return xi(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=qS(n.children[c],e,u))}),xi(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new en(n.segments,i)}}function WS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Tw(u)){const y=wL(u.outlets);return new en(r,y)}if(0===i&&Dw(t[0])){r.push(new Iw(n.segments[e].path,TR(t[0]))),i++;continue}const c=Tw(u)?u.outlets[Zt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&Dw(f)?(r.push(new Iw(c,TR(f))),i+=2):(r.push(new Iw(c,{})),i++)}return new en(r,{})}function wL(n){const e={};return xi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=WS(new en([],{}),0,t))}),e}function TR(n){const e={};return xi(n,(t,r)=>e[r]=`${t}`),e}function CR(n,e,t){return n==t.path&&Ql(e,t.parameters)}class Dd{constructor(e,t){this.id=e,this.url=t}}class KS extends Dd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wg extends Dd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rD extends Dd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SR extends Dd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class EL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bL extends Dd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class DL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TL extends Dd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class AL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ML{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ZS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ZS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QS(e,this._root).map(t=>t.value)}}function ZS(n,e){if(n===e.value)return e;for(const t of e.children){const r=ZS(n,t);if(r)return r}return null}function QS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=QS(n,t);if(r.length)return r.unshift(e),r}return[]}class Td{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class MR extends xR{constructor(e,t){super(e),this.snapshot=t,YS(this,e)}toString(){return this.snapshot.toString()}}function RR(n,e){const t=function NL(n,e){const c=new iD([],{},{},"",{},Zt,e,null,n.root,-1,{});return new NR("",new Td(c,[]))}(n,e),r=new Su([new Iw("",{})]),i=new Su({}),u=new Su({}),c=new Su({}),f=new Su(""),y=new Tf(r,i,c,f,u,Zt,e,t.root);return y.snapshot=t.root,new MR(new Td(y,[]),t)}class Tf{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,pt.U)(E=>E[Ew]))??Je(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Gy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Gy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function kL(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class iD{constructor(e,t,r,i,u,c,f,y,E,T,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.[Ew],this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=T,this._correctedLastPathIndex=N??T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class NR extends xR{constructor(e,t){super(t),this.url=e,YS(this,t)}toString(){return kR(this._root)}}function YS(n,e){e.value._routerState=n,e.children.forEach(t=>YS(n,t))}function kR(n){const e=n.children.length>0?` { ${n.children.map(kR).join(", ")} } `:"";return`${n.value}${e}`}function JS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ql(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ql(e.params,t.params)||n.params.next(t.params),function ZO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ql(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ql(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function XS(n,e){const t=Ql(n.params,e.params)&&function eL(n,e){return _g(n,e)&&n.every((t,r)=>Ql(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||XS(n.parent,e.parent))}function Sw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Sw(n,r,i);return Sw(n,r)})}(n,e,t);return new Td(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Sw(n,f)),c}}const r=function FL(n){return new Tf(new Su(n.url),new Su(n.params),new Su(n.queryParams),new Su(n.fragment),new Su(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Sw(n,u));return new Td(r,i)}}const eA="ngNavigationCancelingError";function OR(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=vg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LR(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function LR(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[eA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function FR(n){return UR(n)&&vg(n.url)}function UR(n){return n&&n[eA]}class UL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Aw,this.attachRef=null}}let Aw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new UL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sD=!1;let tA=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,sD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,sD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,sD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,sD);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new VL(t,f,i.injector);if(r&&function BL(n){return!!n.resolveComponentFactory}(r)){const E=r.resolveComponentFactory(c);this.activated=i.createComponent(E,i.length,y)}else this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Aw),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class VL{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tf?this.route:e===Aw?this.childContexts:this.parent.get(e,t)}}let nA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[tA],encapsulation:2}),n})();function VR(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function iA(n){const e=n.children&&n.children.map(iA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=nA),t}function Ia(n){return n.outlet||Zt}function BR(n,e){const t=n.filter(r=>Ia(r)===e);return t.push(...n.filter(r=>Ia(r)!==e)),t}function xw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zL{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),JS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wy(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),xi(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Wy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Wy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wy(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new RL(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(JS(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),JS(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=xw(i.snapshot),y=f?.get(m._Vd)??null;c.attachRef=null,c.route=i,c.resolver=y,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class $R{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oD{constructor(e,t){this.component=e,this.route=t}}function qL(n,e,t){const r=n._root;return Mw(r,e?e._root:null,t,[r.value])}function Ky(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Mw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Wy(e);return n.children.forEach(c=>{(function KL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function ZL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_g(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_g(n.url,e.url)||!Ql(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!XS(n,e)||!Ql(n.queryParams,e.queryParams);default:return!XS(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new $R(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Mw(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new oD(f.outlet.component,c))}else c&&Rw(e,f,i),i.canActivateChecks.push(new $R(r)),Mw(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),xi(u,(c,f)=>Rw(c,t.getContext(f),i)),i}function Rw(n,e,t){const r=Wy(n),i=n.value;xi(r,(u,c)=>{Rw(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new oD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Pw(n){return"function"==typeof n}function sA(n){return n instanceof ug||"EmptyError"===n?.name}const aD=Symbol("INITIAL_VALUE");function Zy(){return Ar(n=>iR(n.map(e=>e.pipe(Cy(1),qo(aD)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===aD)return aD;if(!1===t||t instanceof yg)return t}return!0}),Jr(e=>e!==aD),Cy(1)))}function jR(n){return(0,GO.z)((0,Qi.b)(e=>{if(vg(e))throw OR(0,e)}),(0,pt.U)(e=>!0===e))}const oA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HR(n,e,t,r,i){const u=aA(n,e,t);return u.matched?function hF(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const f=Ky(c,n);return Df(function tF(n){return n&&Pw(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Zy(),jR()):Je(!0)}(r=VR(e,r),e,t).pipe((0,pt.U)(c=>!0===c?u:{...oA})):Je(u)}function aA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...oA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||KO)(t,n,e);if(!i)return{...oA};const u={};xi(i.posParams,(f,y)=>{u[y]=f.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function uD(n,e,t,r,i="corrected"){if(t.length>0&&function gF(n,e,t){return t.some(r=>lD(n,e,r)&&Ia(r)!==Zt)}(n,t,r)){const c=new en(e,function pF(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ia(u)!==Zt){const c=new en([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ia(u)]=c}return i}(n,e,r,new en(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function mF(n,e,t){return t.some(r=>lD(n,e,r))}(n,t,r)){const c=new en(n.segments,function fF(n,e,t,r,i,u){const c={};for(const f of r)if(lD(n,t,f)&&!i[Ia(f)]){const y=new en([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ia(f)]=y}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new en(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function lD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function GR(n,e,t,r){return!!(Ia(n)===r||r!==Zt&&lD(e,t,n))&&("**"===n.path||aA(e,n,t).matched)}function zR(n,e,t){return 0===e.length&&!n.children[t]}const cD=!1;class dD{constructor(e){this.segmentGroup=e||null}}class qR{constructor(e){this.urlTree=e}}function Nw(n){return ww(new dD(n))}function WR(n){return ww(new qR(n))}class wF{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=uD(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,pt.U)(u=>this.createUrlTree(nD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bf(u=>{if(u instanceof qR)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof dD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,pt.U)(i=>this.createUrlTree(nD(i),e.queryParams,e.fragment))).pipe(bf(i=>{throw i instanceof dD?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,cD)}createUrlTree(e,t,r){const i=GS(e);return new yg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new en([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,rn.D)(i).pipe(mg(u=>{const c=r.children[u],f=BR(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,pt.U)(y=>({segment:y,outlet:u})))}),cs((u,c)=>(u[c.outlet]=c.segment,u),{}),uR())}expandSegment(e,t,r,i,u,c){return(0,rn.D)(r).pipe(mg(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(bf(E=>{if(E instanceof dD)return Je(null);throw E}))),_a(f=>!!f),bf((f,y)=>{if(sA(f))return zR(t,i,u)?Je(new en([],{})):Nw(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return GR(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Nw(t):Nw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?WR(u):this.lineralizeSegments(r,u).pipe((0,bs.z)(c=>{const f=new en(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:E,positionalParamSegments:T}=aA(t,i,u);if(!f)return Nw(t);const x=this.applyRedirectCommands(y,i.redirectTo,T);return i.redirectTo.startsWith("/")?WR(x):this.lineralizeSegments(i,x).pipe((0,bs.z)(N=>this.expandSegment(e,t,r,N.concat(E),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=VR(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new en(i,{})))):Je(new en(i,{}))):HR(t,r,i,e).pipe(Ar(({matched:c,consumedSegments:f,remainingSegments:y})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,bs.z)(T=>{const x=T.injector??e,N=T.routes,{segmentGroup:U,slicedSegments:$}=uD(t,f,y,N),ne=new en(U.segments,U.children);if(0===$.length&&ne.hasChildren())return this.expandChildren(x,N,ne).pipe((0,pt.U)(Qe=>new en(f,Qe)));if(0===N.length&&0===$.length)return Je(new en(f,{}));const ue=Ia(r)===u;return this.expandSegment(x,ne,N,$,ue?Zt:u,!0).pipe((0,pt.U)(et=>new en(f.concat(et.segments),et.children)))})):Nw(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function dF(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const f=Ky(c,n);return Df(function YL(n){return n&&Pw(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Zy(),jR())}(e,t,r).pipe((0,bs.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Qi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function _F(n){return ww(LR(cD,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[Zt])return ww(new m.vHH(4e3,cD));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new yg(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xi(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return xi(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new en(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,cD);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class IF{}class TF{constructor(e,t,r,i,u,c,f,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=y}recognize(){const e=uD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new iD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Td(r,t),u=new NR(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=PR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(mg(i=>{const u=r.children[i],c=BR(t,i);return this.processSegmentGroup(e,c,u,i)}),cs((i,u)=>i&&u?(i.push(...u),i):null),function zO(n,e=!1){return(0,Pr.e)((t,r)=>{let i=0;t.subscribe((0,qn.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),yf(null),uR(),(0,pt.U)(i=>{if(null===i)return null;const u=KR(i);return function CF(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,rn.D)(t).pipe(mg(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),_a(c=>!!c),bf(c=>{if(sA(c))return zR(r,i,u)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!GR(t,r,i,u))return Je(null);let c;if("**"===t.path){const f=i.length>0?dR(i).parameters:{},y=QR(r)+i.length;c=Je({snapshot:new iD(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JR(t),Ia(t),t.component??t._loadedComponent??null,t,ZR(r),y,XR(t),y),consumedSegments:[],remainingSegments:[]})}else c=HR(r,t,i,e).pipe((0,pt.U)(({matched:f,consumedSegments:y,remainingSegments:E,parameters:T})=>{if(!f)return null;const x=QR(r)+y.length;return{snapshot:new iD(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JR(t),Ia(t),t.component??t._loadedComponent??null,t,ZR(r),x,XR(t),x),consumedSegments:y,remainingSegments:E}}));return c.pipe(Ar(f=>{if(null===f)return Je(null);const{snapshot:y,consumedSegments:E,remainingSegments:T}=f;e=t._injector??e;const x=t._loadedInjector??e,N=function SF(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:$}=uD(r,E,T,N.filter(ue=>void 0===ue.redirectTo),this.relativeLinkResolution);if(0===$.length&&U.hasChildren())return this.processChildren(x,N,U).pipe((0,pt.U)(ue=>null===ue?null:[new Td(y,ue)]));if(0===N.length&&0===$.length)return Je([new Td(y,[])]);const ne=Ia(t)===u;return this.processSegment(x,N,U,$,ne?Zt:u).pipe((0,pt.U)(ue=>null===ue?null:[new Td(y,ue)]))}))}}function AF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function KR(n){const e=[],t=new Set;for(const r of n){if(!AF(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=KR(r.children);e.push(new Td(r.value,i))}return e.filter(r=>!t.has(r))}function ZR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function QR(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function JR(n){return n.data||{}}function XR(n){return n.resolve||{}}function eP(n){return"string"==typeof n.title||null===n.title}function uA(n){return Ar(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,pt.U)(()=>e)):Je(e)})}let tP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Ew]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(nP)},providedIn:"root"}),n})(),nP=(()=>{class n extends tP{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(as))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LF{}class UF extends class FF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fD=new m.OlP("",{providedIn:"root",factory:()=>({})}),lA=new m.OlP("ROUTES");let cA=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Df(t.loadComponent()).pipe((0,Qi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),BS(()=>{this.componentLoaders.delete(t)})),i=new aR(r,()=>new ni.x).pipe(US());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E,T=!1;Array.isArray(f)?E=f:(y=f.create(t).injector,E=cR(y.get(lA,[],m.XFs.Self|m.XFs.Optional)));return{routes:E.map(iA),injector:y}}),BS(()=>{this.childrenLoaders.delete(r)})),c=new aR(u,()=>new ni.x).pipe(US());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Df(t()).pipe((0,bs.z)(r=>r instanceof m.YKP||Array.isArray(r)?Je(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class BF{}class $F{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jF(n){throw n}function HF(n,e,t){return e.parse("/")}const GF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function iP(){const n=(0,m.f3M)(yR),e=(0,m.f3M)(Aw),t=(0,m.f3M)(xe),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),u=(0,m.f3M)(lA,{optional:!0})??[],c=(0,m.f3M)(fD,{optional:!0})??{},f=(0,m.f3M)(nP),y=(0,m.f3M)(tP,{optional:!0}),E=(0,m.f3M)(BF,{optional:!0}),T=(0,m.f3M)(LF,{optional:!0}),x=new ii(null,n,e,t,r,i,cR(u));return E&&(x.urlHandlingStrategy=E),T&&(x.routeReuseStrategy=T),x.titleStrategy=y??f,function qF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,x),x}let ii=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ni.x,this.errorHandler=jF,this.malformedUriErrorHandler=HF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new $F,this.routeReuseStrategy=new UF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(cA),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new SL(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new CL(N)),this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function QO(){return new yg(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RR(this.currentUrlTree,this.rootComponentType),this.transitions=new Su({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Jr(i=>0!==i.id),(0,pt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ar(i=>{let u=!1,c=!1;return Je(i).pipe((0,Qi.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ar(f=>{const y=this.browserUrlTree.toString(),E=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return sP(f.source)&&(this.browserUrlTree=f.extractedUrl),Je(f).pipe(Ar(x=>{const N=this.transitions.getValue();return r.next(new KS(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),N!==this.transitions.getValue()?zl.E:Promise.resolve(x)}),function EF(n,e,t,r){return Ar(i=>function vF(n,e,t,r,i){return new wF(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,pt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qi.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function MF(n,e,t,r,i,u){return(0,bs.z)(c=>function DF(n,e,t,r,i,u,c="emptyOnly",f="legacy"){return new TF(n,e,t,r,i,c,f,u).recognize().pipe(Ar(y=>null===y?function bF(n){return new us.y(e=>e.error(n))}(new IF):Je(y)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,pt.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qi.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(U,x)}this.browserUrlTree=x.urlAfterRedirects}const N=new EL(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(N)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:U,source:$,restoredState:ne,extras:ue}=f,je=new KS(N,this.serializeUrl(U),$,ne);r.next(je);const et=RR(U,this.rootComponentType).snapshot;return Je(i={...f,targetSnapshot:et,urlAfterRedirects:U,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),zl.E}),(0,Qi.b)(f=>{const y=new IL(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,pt.U)(f=>i={...f,guards:qL(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function rF(n,e){return(0,bs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Je({...t,guardsResult:!0}):function iF(n,e,t,r){return(0,rn.D)(n).pipe((0,bs.z)(i=>function cF(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(f=>{const y=xw(e)??i,E=Ky(f,y);return Df(function eF(n){return n&&Pw(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(_a())})).pipe(Zy()):Je(!0)}(i.component,i.route,t,e,r)),_a(i=>!0!==i,!0))}(c,r,i,n).pipe((0,bs.z)(f=>f&&function QL(n){return"boolean"==typeof n}(f)?function sF(n,e,t,r){return(0,rn.D)(e).pipe(mg(i=>zo(function aF(n,e){return null!==n&&e&&e(new AL(n)),Je(!0)}(i.route.parent,r),function oF(n,e){return null!==n&&e&&e(new ML(n)),Je(!0)}(i.route,r),function lF(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function WL(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>oR(()=>Je(c.guards.map(y=>{const E=xw(c.node)??t,T=Ky(y,E);return Df(function XL(n){return n&&Pw(n.canActivateChild)}(T)?T.canActivateChild(r,n):E.runInContext(()=>T(r,n))).pipe(_a())})).pipe(Zy())));return Je(u).pipe(Zy())}(n,i.path,t),function uF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(u=>oR(()=>{const c=xw(e)??t,f=Ky(u,c);return Df(function JL(n){return n&&Pw(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(_a())}));return Je(i).pipe(Zy())}(n,i.route,t))),_a(i=>!0!==i,!0))}(r,u,n,e):Je(f)),(0,pt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Qi.b)(f=>{if(i.guardsResult=f.guardsResult,vg(f.guardsResult))throw OR(0,f.guardsResult);const y=new bL(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Jr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),uA(f=>{if(f.guards.canActivateChecks.length)return Je(f).pipe((0,Qi.b)(y=>{const E=new DL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),Ar(y=>{let E=!1;return Je(y).pipe(function RF(n,e){return(0,bs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let u=0;return(0,rn.D)(i).pipe(mg(c=>function PF(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!eP(i)&&(u[Ew]=i.title),function NF(n,e,t,r){const i=function kF(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const u={};return(0,rn.D)(i).pipe((0,bs.z)(c=>function OF(n,e,t,r){const i=xw(e)??r,u=Ky(n,i);return Df(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(_a(),(0,Qi.b)(f=>{u[c]=f}))),VS(1),function qO(n){return(0,pt.U)(()=>n)}(u),bf(c=>sA(c)?zl.E:ww(c)))}(u,n,e,r).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=PR(n,t).resolve,i&&eP(i)&&(n.data[Ew]=i.title),null)))}(c.route,r,n,e)),(0,Qi.b)(()=>u++),VS(1),(0,bs.z)(c=>u===i.length?Je(t):zl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qi.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,Qi.b)(y=>{const E=new TL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),uA(f=>{const y=E=>{const T=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,Qi.b)(x=>{E.component=x}),(0,pt.U)(()=>{})));for(const x of E.children)T.push(...y(x));return T};return iR(y(f.targetSnapshot.root)).pipe(yf(),Cy(1))}),uA(()=>this.afterPreactivation()),(0,pt.U)(f=>{const y=function OL(n,e,t){const r=Sw(n,e._root,t?t._root:void 0);return new MR(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:y}}),(0,Qi.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new zL(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Qi.b)({next(){u=!0},complete(){u=!0}}),BS(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),bf(f=>{if(c=!0,UR(f)){FR(f)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new rD(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(y),FR(f)){const E=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sP(i.source)};this.scheduleNavigation(E,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new SR(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(f))}catch(E){i.reject(E)}}return zl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(iA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,E=i||this.routerState.root,T=y?this.currentUrlTree.fragment:c;let x=null;switch(f){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),gL(E,this.currentUrlTree,t,x,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function WF(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...GF}:!1===r?{...zF}:r,vg(t))return fR(this.currentUrlTree,t,i);const u=this.parseUrl(t);return fR(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let f,y,E;c?(f=c.resolve,y=c.reject,E=c.promise):E=new Promise((N,U)=>{f=N,y=U});const T=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:T,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new rD(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return iP()},providedIn:"root"}),n})();function sP(n){return"imperative"!==n}let gD=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ni.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ii),m.Y36(Tf),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class oP{}let QF=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Jr(t=>t instanceof wg),mg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,f=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,rn.D)(i).pipe((0,Li.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=i.pipe((0,bs.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,rn.D)([u,c]).pipe((0,Li.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ii),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(oP),m.LFG(cA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hA=new m.OlP("");let aP=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof KS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof AR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new AR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Qy(n,e){return{\u0275kind:n,\u0275providers:e}}function fA(n){return[{provide:lA,multi:!0,useValue:n}]}function lP(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(ii),i=n.get(cP);1===n.get(pA)&&r.initialNavigation(),n.get(dP,null,m.XFs.Optional)?.setUpPreloading(),n.get(hA,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const cP=new m.OlP("",{factory:()=>new ni.x}),pA=new m.OlP("",{providedIn:"root",factory:()=>1});const dP=new m.OlP("");function eU(n){return Qy(0,[{provide:dP,useExisting:QF},{provide:oP,useExisting:n}])}const hP=new m.OlP("ROUTER_FORROOT_GUARD"),tU=[xe,{provide:yR,useClass:jS},{provide:ii,useFactory:iP},Aw,{provide:Tf,useFactory:function uP(n){return n.routerState.root},deps:[ii]},cA];function nU(){return new m.PXZ("Router",ii)}let fP=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tU,[],fA(t),{provide:hP,useFactory:oU,deps:[[ii,new m.FiY,new m.tp0]]},{provide:fD,useValue:r||{}},r?.useHash?{provide:_e,useClass:lt}:{provide:_e,useClass:nt},{provide:hA,useFactory:()=>{const n=(0,m.f3M)(ii),e=(0,m.f3M)(Nu),t=(0,m.f3M)(fD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new aP(n,e,t)}},r?.preloadingStrategy?eU(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:nU},r?.initialNavigation?aU(r):[],[{provide:pP,useFactory:lP},{provide:m.tb,multi:!0,useExisting:pP}]]}}static forChild(t){return{ngModule:n,providers:[fA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(hP,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[nA]}),n})();function oU(n){return"guarded"}function aU(n){return["disabled"===n.initialNavigation?Qy(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(ii);return()=>{e.setUpLocationChangeListener()}}},{provide:pA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qy(2,[{provide:pA,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(ii),f=e.get(cP);(function i(u){e.get(ii).events.pipe(Jr(f=>f instanceof wg||f instanceof rD||f instanceof SR),(0,pt.U)(f=>f instanceof wg||f instanceof rD&&(0===f.code||1===f.code)&&null),Jr(f=>null!==f),Cy(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||f.closed?Je(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const pP=new m.OlP("");var lU=L(2961);function kw(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const u=new lU.Hp({next:c=>{r(c),u.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ug)}});n.subscribe(u)})}let gA=(()=>{class n{constructor(t){this.firestore=t,this.mainCollectionName="rooms"}newRoom(t){t.name=t.name.toLocaleLowerCase(),this.firestore.collection(this.mainCollectionName).doc().set(t)}getRoomAsync(t){var r=this;return(0,ce.Z)(function*(){let i=r.firestore.collection(r.mainCollectionName,u=>u.where("name","==",t)).valueChanges().pipe((0,pt.U)(u=>u.length>0?u[0]:null));return yield kw(i)})()}userExists(t){return this.firestore.collection(this.mainCollectionName).get().pipe((0,pt.U)(r=>{let u=!1;return r.docs.forEach(c=>{c.data().users.forEach(y=>{console.log(y),u||(u=y.name==t)})}),u}))}updateUserAsync(t,r){var i=this;return(0,ce.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,pt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,ce.Z)(function*(T){let x=T.id,N=T.data();if(t==N.name){let U=N.users.findIndex($=>$.name==r.name);N.users.splice(U,1),N.users.push(r),yield i.updateRoomByIdAsync(x,N),y=!0}});return function(T){return E.apply(this,arguments)}}()),y}));return yield kw(u)})()}removeUserAsync(t,r){var i=this;return(0,ce.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,pt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,ce.Z)(function*(T){let x=T.id,N=T.data();if(t==N.name){let U=N.users.findIndex($=>$.name==r);N.users.splice(U,1),yield i.updateRoomByIdAsync(x,N),y=!0}});return function(T){return E.apply(this,arguments)}}()),y}));return yield kw(u)})()}AddUserAsync(t,r){var i=this;return(0,ce.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,pt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,ce.Z)(function*(T){let x=T.id,N=T.data();if(t==N.name){let U=N.users.findIndex($=>$.name==r.name);U>=0&&N.users.splice(U,1),N.users.push(r),yield i.updateRoomByIdAsync(x,N),y=!0}});return function(T){return E.apply(this,arguments)}}()),y}));return yield kw(u)})()}updateRoomByIdAsync(t,r){var i=this;return(0,ce.Z)(function*(){return yield i.firestore.collection(i.mainCollectionName).doc(t).update(r)})()}revealCardAsync(t,r){var i=this;return(0,ce.Z)(function*(){let u=i.firestore.collection(i.mainCollectionName).get().pipe((0,pt.U)(c=>{let y=!1;return c.docs.forEach(function(){var E=(0,ce.Z)(function*(T){let x=T.id,N=T.data();t==N.name&&(N.revealCards=r,yield i.updateRoomByIdAsync(x,N),y=!0)});return function(T){return E.apply(this,arguments)}}()),y}));return yield kw(u)})()}getAllRooms(){return this.firestore.collection(this.mainCollectionName).valueChanges()}listenRoomChanges(t){return this.firestore.collection(this.mainCollectionName).valueChanges().pipe((0,pt.U)(r=>{for(const i of r)if(i.name==t)return i;return{}}))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ax))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gP=(()=>{class n{constructor(){this.storage=window.localStorage}set(t,r){return!!this.storage&&(this.storage.setItem(t,JSON.stringify(r)),!0)}get(t){if(this.storage){let r=this.storage.getItem(t)||JSON.stringify({});return JSON.parse(r)}return null}remove(t){return!!this.storage&&(this.storage.removeItem(t),!0)}clear(){return!!this.storage&&(this.storage.clear(),!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cU(n,e){if(1&n&&(m.ynx(0),m.TgZ(1,"div",5),m._UZ(2,"div",6),m.qZA(),m.TgZ(3,"div",7),m._UZ(4,"div",8),m.qZA(),m.TgZ(5,"div",9),m._UZ(6,"div",6),m.qZA(),m.BQk()),2&n){const t=m.oxw().$implicit;m.xp6(1),m.uIk("data-content",t)}}const dU=function(n){return{active:n}},hU=function(){return{"hide-card":!1}};function fU(n,e){if(1&n){const t=m.EpF();m.ynx(0),m.TgZ(1,"div",2),m.NdJ("click",function(){const u=m.CHM(t).$implicit,c=m.oxw();return m.KtG(c.onCardSelect(u))}),m.TgZ(2,"div",3),m.YNc(3,cU,7,1,"ng-container",4),m.qZA()(),m.BQk()}if(2&n){const t=e.$implicit,r=m.oxw();m.xp6(1),m.Q6J("ngClass",m.VKq(3,dU,r.cardSelected.value==t)),m.xp6(1),m.Q6J("ngClass",m.DdM(5,hU)),m.xp6(1),m.Q6J("ngIf",!0)}}let pU=(()=>{class n{constructor(t){this.firestoreService=t,this.cardTypes=["club","diamond","heart","spade"],this.randomCardTypes=[],this.cardSelected={},this.cardValues=["0","1","2","3","5","8","9","20","40","100"]}ngOnInit(){this.generateRandomCardTypes()}generateRandomCardTypes(){this.cardValues.forEach(t=>{let r=Math.floor(Math.random()*this.cardTypes.length);this.randomCardTypes.push(this.cardTypes[r])})}onCardSelect(t){t!=this.cardSelected.value?(this.cardSelected={value:t},this.user.selectedCard=t,this.firestoreService.updateUserAsync(this.roomName,this.user)):this.cardSelected={}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(gA))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-poker-card"]],inputs:{cardValues:"cardValues",roomName:"roomName",user:"user"},decls:2,vars:1,consts:[[1,"cards"],[4,"ngFor","ngForOf"],[1,"card",3,"ngClass","click"],[1,"playing-card","spade",3,"ngClass"],[4,"ngIf"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,fU,4,6,"ng-container",1),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",r.cardValues))},dependencies:[ln,Xi,Un],styles:['.cards[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:absolute;left:46%;bottom:120px;height:200px;background-color:brown}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;position:absolute;transform:translateZ(0);transform-origin:50% 200%;transition:all .35s ease-in}.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.cards[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{animation:move .35s cubic-bezier(0,-.5,.5,1) forwards 1}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-27.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-22.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-17.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(4){transform:rotate(-12.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(5){transform:rotate(-7.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(6){transform:rotate(-2.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(7){transform:rotate(2.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(8){transform:rotate(7.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(9){transform:rotate(12.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(10){transform:rotate(17.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(11){transform:rotate(22.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(12){transform:rotate(27.5deg)}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:nth-child(13){transform:rotate(32.5deg)}@keyframes move{to{transform:translateY(-110px)}}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:absolute;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:absolute}.bottom[_ngcontent-%COMP%]{bottom:0;right:0;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}']}),n})();const gU=function(n){return{"active-flip-card":n}};let mU=(()=>{class n{constructor(){this.revealCardEvent=new m.vpe,this.user={name:"",selectedCard:"0"},this.revealCard=!1}ngOnInit(){this.revealCardEvent.subscribe(t=>this.revealCard=t)}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["single-card"]],inputs:{revealCardEvent:"revealCardEvent",user:"user"},decls:19,vars:5,consts:[[2,"max-width","150px","overflow-x","hidden"],[1,"flip-card",3,"ngClass"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"cards"],[1,"card"],[1,"playing-card","spade","hide-card"],[1,"flip-card-back"],[1,"playing-card","spade"],[1,"corner-detail"],[1,"spade-small"],[1,"spade-main"],[1,"stalk"],[1,"corner-detail","bottom"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"small"),m._uU(2),m.qZA()(),m.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),m._UZ(8,"div",6),m.qZA()()(),m.TgZ(9,"div",7)(10,"div",4)(11,"div",5)(12,"div",8)(13,"div",9),m._UZ(14,"div",10),m.qZA(),m.TgZ(15,"div",11),m._UZ(16,"div",12),m.qZA(),m.TgZ(17,"div",13),m._UZ(18,"div",10),m.qZA()()()()()()()),2&t&&(m.xp6(2),m.Oqu(r.user.name),m.xp6(1),m.Q6J("ngClass",m.VKq(3,gU,r.revealCard)),m.xp6(10),m.uIk("data-content",r.user.selectedCard))},dependencies:[ln],styles:['.cards[_ngcontent-%COMP%]   .hide-card[_ngcontent-%COMP%]{background-image:var(--back-card-url);background-size:150px 230px;background-repeat:no-repeat}.box-canvas[_ngcontent-%COMP%]{position:relative;margin:8% auto;display:block;width:600px;height:600px;background:var(--background-color)}.playing-card[_ngcontent-%COMP%]{background:white;width:150px;height:230px;border:1px solid #b4b4b4;border-radius:5%}.spade[_ngcontent-%COMP%]{right:120px;top:5px}.diamond[_ngcontent-%COMP%]{right:160px}.club[_ngcontent-%COMP%]{right:200px}.heart[_ngcontent-%COMP%]{right:240px}.spade-main[_ngcontent-%COMP%]{position:relative;top:100px;left:30px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:before{content:"";position:absolute;left:40px;width:50px;height:50px;border-radius:50%;background:black}.spade-main[_ngcontent-%COMP%]:after{content:"";position:absolute;left:18px;top:-19px;width:54px;height:54px;background:black;transform:rotate(45deg)}.stalk[_ngcontent-%COMP%]{position:absolute;top:40px;left:30px;height:0;width:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid black}.corner-detail[_ngcontent-%COMP%]{position:relative}.bottom[_ngcontent-%COMP%]{top:85%;transform:rotate(180deg)}.diamond[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before, .heart[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:before{color:red}.corner-detail[_ngcontent-%COMP%]:before{content:attr(data-content);position:absolute;left:14px;top:10px;font-family:sans-serif;font-size:22px}.diamond-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:12px;background:red;width:20px;height:25px;clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%)}.spade[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after, .club[_ngcontent-%COMP%]   .corner-detail[_ngcontent-%COMP%]:after{content:"";position:absolute;top:55px;left:18px;height:0;width:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid black}.spade-small[_ngcontent-%COMP%], .club-small[_ngcontent-%COMP%]{position:absolute;top:45px;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:before, .club-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:10px;width:14px;height:14px;border-radius:50%;background:black}.spade-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-5px;width:14px;height:14px;background:black;transform:rotate(45deg)}.club-small[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:-8px;width:14px;height:14px;background:black;border-radius:50%}.heart-small[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:before{content:"";position:absolute;left:11px;width:14px;height:14px;border-radius:50%;background:red}.heart-small[_ngcontent-%COMP%]:after{content:"";position:absolute;top:9px;left:0;width:0;height:0;border-left:13px solid transparent;border-right:12px solid transparent;border-top:13px solid red}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:150px;height:230px;perspective:1000px}.flip-card-inner[_ngcontent-%COMP%]{text-align:center;transition:transform .6s;transform-style:preserve-3d;box-shadow:0 4px 8px #0003}.active-flip-card[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{border-radius:5%;z-index:2}.flip-card-back[_ngcontent-%COMP%]{border-radius:5%;transform:rotateY(180deg);z-index:1}']}),n})(),yU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-loading"]],decls:16,vars:0,consts:[[1,"loading"],[1,"loading-text"],[1,"loading-text-words"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"span",2),m._uU(3,"L"),m.qZA(),m.TgZ(4,"span",2),m._uU(5,"O"),m.qZA(),m.TgZ(6,"span",2),m._uU(7,"A"),m.qZA(),m.TgZ(8,"span",2),m._uU(9,"D"),m.qZA(),m.TgZ(10,"span",2),m._uU(11,"I"),m.qZA(),m.TgZ(12,"span",2),m._uU(13,"N"),m.qZA(),m.TgZ(14,"span",2),m._uU(15,"G"),m.qZA()()())},styles:['@import"https://fonts.googleapis.com/css?family=Quattrocento+Sans";.loading[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999}.loading-text[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;text-align:center;width:100%;height:100px;line-height:100px}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;color:#fff;font-family:Quattrocento Sans,sans-serif}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){filter:blur(0px);animation:blur-text 1.5s 0s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){filter:blur(0px);animation:blur-text 1.5s .2s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){filter:blur(0px);animation:blur-text 1.5s .4s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){filter:blur(0px);animation:blur-text 1.5s .6s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){filter:blur(0px);animation:blur-text 1.5s .8s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){filter:blur(0px);animation:blur-text 1.5s 1s infinite linear alternate}.loading-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){filter:blur(0px);animation:blur-text 1.5s 1.2s infinite linear alternate}@keyframes blur-text{0%{filter:blur(0px)}to{filter:blur(4px)}}']}),n})();function _U(n,e){1&n&&m._UZ(0,"img",10),2&n&&m.Q6J("@Fading",void 0)}function vU(n,e){1&n&&m._UZ(0,"img",11),2&n&&m.Q6J("@Fading",void 0)}function wU(n,e){1&n&&m._UZ(0,"img",12),2&n&&m.Q6J("@Fading",void 0)}function EU(n,e){1&n&&m._UZ(0,"img",13),2&n&&m.Q6J("@Fading",void 0)}function IU(n,e){1&n&&m._UZ(0,"img",14),2&n&&m.Q6J("@Fading",void 0)}function bU(n,e){1&n&&m._UZ(0,"img",15),2&n&&m.Q6J("@Fading",void 0)}function DU(n,e){1&n&&m._UZ(0,"img",16),2&n&&m.Q6J("@Fading",void 0)}function TU(n,e){1&n&&m._UZ(0,"img",17),2&n&&m.Q6J("@Fading",void 0)}function CU(n,e){1&n&&m._UZ(0,"img",18),2&n&&m.Q6J("@Fading",void 0)}function SU(n,e){1&n&&m._UZ(0,"img",19),2&n&&m.Q6J("@Fading",void 0)}let AU=(()=>{class n{constructor(){this.value=0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-point-react"]],inputs:{value:"value"},decls:11,vars:10,consts:[["src","./assets/img/mr_incredible_0.png",4,"ngIf"],["src","./assets/img/mr_incredible_1.png",4,"ngIf"],["src","./assets/img/mr_incredible_2.png",4,"ngIf"],["src","./assets/img/mr_incredible_3.png",4,"ngIf"],["src","./assets/img/mr_incredible_4.png",4,"ngIf"],["src","./assets/img/mr_incredible_5.png",4,"ngIf"],["src","./assets/img/mr_incredible_6.png",4,"ngIf"],["src","./assets/img/mr_incredible_7.png",4,"ngIf"],["src","./assets/img/mr_incredible_8.png",4,"ngIf"],["src","./assets/img/mr_incredible_9.png",4,"ngIf"],["src","./assets/img/mr_incredible_0.png"],["src","./assets/img/mr_incredible_1.png"],["src","./assets/img/mr_incredible_2.png"],["src","./assets/img/mr_incredible_3.png"],["src","./assets/img/mr_incredible_4.png"],["src","./assets/img/mr_incredible_5.png"],["src","./assets/img/mr_incredible_6.png"],["src","./assets/img/mr_incredible_7.png"],["src","./assets/img/mr_incredible_8.png"],["src","./assets/img/mr_incredible_9.png"]],template:function(t,r){1&t&&(m.TgZ(0,"div"),m.YNc(1,_U,1,1,"img",0),m.YNc(2,vU,1,1,"img",1),m.YNc(3,wU,1,1,"img",2),m.YNc(4,EU,1,1,"img",3),m.YNc(5,IU,1,1,"img",4),m.YNc(6,bU,1,1,"img",5),m.YNc(7,DU,1,1,"img",6),m.YNc(8,TU,1,1,"img",7),m.YNc(9,CU,1,1,"img",8),m.YNc(10,SU,1,1,"img",9),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngIf",r.value<=1),m.xp6(1),m.Q6J("ngIf",r.value>1&&r.value<=3),m.xp6(1),m.Q6J("ngIf",r.value>3&&r.value<=5),m.xp6(1),m.Q6J("ngIf",r.value>5&&r.value<=8),m.xp6(1),m.Q6J("ngIf",r.value>8&&r.value<=9),m.xp6(1),m.Q6J("ngIf",r.value>9&&r.value<=20),m.xp6(1),m.Q6J("ngIf",r.value>20&&r.value<=30),m.xp6(1),m.Q6J("ngIf",r.value>30&&r.value<=40),m.xp6(1),m.Q6J("ngIf",r.value>40&&r.value<=70),m.xp6(1),m.Q6J("ngIf",r.value>70))},dependencies:[Un],styles:["div[_ngcontent-%COMP%]{position:relative;width:100vw;display:flex;justify-content:center}img[_ngcontent-%COMP%]{width:100px;position:fixed}"],data:{animation:[mM("Fading",[Pb("void",jy({opacity:0})),Pb("*",jy({opacity:1})),Nb(":enter",Rb("300ms ease-out")),Nb(":leave",Rb("300ms ease-in"))])]}}),n})();function xU(n,e){1&n&&(m.ynx(0),m._UZ(1,"app-loading"),m.BQk())}function MU(n,e){if(1&n&&(m.TgZ(0,"div")(1,"div",9),m._UZ(2,"single-card",10),m.qZA()()),2&n){const t=e.$implicit,r=m.oxw(2);m.Q6J("@Fading",void 0),m.xp6(2),m.Q6J("revealCardEvent",r.revealCard)("user",t)}}function RU(n,e){if(1&n&&(m.TgZ(0,"div")(1,"div",11)(2,"span",12),m._uU(3),m.qZA()(),m.TgZ(4,"div",13),m._UZ(5,"app-point-react",14),m.qZA()()),2&n){const t=m.oxw(2);m.Q6J("@Fading",void 0),m.xp6(3),m.Oqu(t.average),m.xp6(2),m.Q6J("value",t.average)}}function PU(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"div",2),m.YNc(2,MU,3,3,"div",3),m.qZA(),m.YNc(3,RU,6,3,"div",4),m.TgZ(4,"div",5)(5,"div",6),m._UZ(6,"app-poker-card",7),m.qZA(),m.TgZ(7,"div"),m._UZ(8,"br")(9,"br"),m.TgZ(10,"button",8),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.revealCards())}),m._uU(11,"Virar"),m.qZA(),m.TgZ(12,"button",8),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.hideCards())}),m._uU(13,"Desvirar"),m.qZA(),m._UZ(14,"br")(15,"br"),m.qZA()()()}if(2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngForOf",t.users),m.xp6(1),m.Q6J("ngIf",t.reveal),m.xp6(3),m.Q6J("roomName",t.roomName)("user",t.user)}}let NU=(()=>{class n{constructor(t,r,i,u){this.router=t,this.activatedroute=r,this.firestoreService=i,this.locaStorageService=u,this.roomChanges=new Qb.w0,this.loading=!0,this.roomName="",this.users=[],this.revealCard=new m.vpe,this.reveal=!1,this.average=0}ngOnInit(){this.roomName=this.activatedroute.snapshot.paramMap.get("roomName"),this.checkIfRoomExists()}ngOnDestroy(){this.handleUserExiting()}checkIfRoomExists(){var t=this;return(0,ce.Z)(function*(){let r=yield t.firestoreService.getRoomAsync(t.roomName);t.user=t.locaStorageService.get("user-data"),null!=r&&t.user.name?(r.users.findIndex(i=>i.name==t.user?.name)<0&&(yield t.firestoreService.AddUserAsync(t.roomName,t.user)),t.revealCard.subscribe(i=>{t.reveal=i}),t.roomChanges=t.firestoreService.listenRoomChanges(t.roomName).subscribe({next:i=>{for(const c of i.users)if(i.users.length-1<t.users.length&&(t.users=t.users.filter(f=>i.users.map(y=>y.name).includes(f.name))),c.name!=t.user?.name){let f=t.users.find(y=>y.name==c.name);f?f.selectedCard=c.selectedCard:t.users.push(c)}let u=0;i.users.forEach(c=>{isNaN(Number(c.selectedCard))?u+=.5:u+=Number(c.selectedCard)}),t.average=Math.trunc(u/i.users.length),t.revealCard.emit(i.revealCards)}}),t.loading=!1):t.router.navigate(["/"])})()}handleUserExiting(){var t=this;return(0,ce.Z)(function*(){let r=t.locaStorageService.get("user-data");t.roomChanges.unsubscribe(),yield t.firestoreService.removeUserAsync(t.roomName,r.name)})()}revealCards(){this.firestoreService.revealCardAsync(this.roomName,!0)}hideCards(){this.firestoreService.revealCardAsync(this.roomName,!1)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ii),m.Y36(Tf),m.Y36(gA),m.Y36(gP))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-room"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["showRoom",""],[1,"grid-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"current-player"],[2,"position","relative"],[3,"roomName","user"],[3,"click"],[1,"grid-item"],[3,"revealCardEvent","user"],[1,"average"],[2,"font-size","2rem"],[2,"width","100vw","display","flex","justify-content","center"],[3,"value"]],template:function(t,r){if(1&t&&(m.YNc(0,xU,2,0,"ng-container",0),m.YNc(1,PU,16,4,"ng-template",null,1,m.W1O)),2&t){const i=m.MAs(2);m.Q6J("ngIf",r.loading)("ngIfElse",i)}},dependencies:[Xi,Un,pU,mU,yU,AU],styles:[".average[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px}.current-player[_ngcontent-%COMP%]{display:flex;justify-content:center;position:fixed;bottom:0;left:46%}"],data:{animation:[mM("Fading",[Pb("void",jy({opacity:0})),Pb("*",jy({opacity:1})),Nb(":enter",Rb("800ms ease-out")),Nb(":leave",Rb("800ms ease-in"))])]}}),n})();const kU=function(n){return[n]};function OU(n,e){if(1&n&&(m.ynx(0),m.TgZ(1,"li",6)(2,"h3"),m._uU(3),m.ALo(4,"titlecase"),m.qZA()(),m.BQk()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(4,kU,"room/"+t)),m.xp6(2),m.Oqu(m.lcZ(4,2,t))}}function LU(n,e){if(1&n){const t=m.EpF();m.ynx(0),m.TgZ(1,"div")(2,"h1"),m._uU(3,"Salas"),m.qZA(),m.TgZ(4,"ul"),m.YNc(5,OU,5,6,"ng-container",2),m.qZA(),m._UZ(6,"br")(7,"hr")(8,"br"),m.TgZ(9,"div")(10,"label",3),m._uU(11,"Nova sala"),m.qZA(),m._UZ(12,"br")(13,"input",4),m.TgZ(14,"button",5),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.createNewRoom())}),m._uU(15,"Criar"),m.qZA()()(),m.BQk()}if(2&n){const t=m.oxw();m.xp6(5),m.Q6J("ngForOf",t.rooms)}}function FU(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"label",7),m._uU(2,"Informe um nome de usu\xe1rio"),m.qZA(),m._UZ(3,"br")(4,"input",8),m.TgZ(5,"button",5),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.saveUserName())}),m._uU(6,"Salvar"),m.qZA()()}}const UU=[{path:"",component:(()=>{class n{constructor(t,r,i){this.router=t,this.localStorage=r,this.firestoreService=i,this.rooms=[],this.getAllRooms=new Qb.w0}ngOnInit(){this.getAllRooms=this.firestoreService.getAllRooms().subscribe(t=>this.rooms=t.map(r=>r.name)),this.userData=this.localStorage.get("user-data")}ngOnDestroy(){this.getAllRooms.unsubscribe()}createNewRoom(){let t=document.getElementById("new-room").value;if(this.rooms.includes(t.toLowerCase()))confirm(`Uma sala com o nome ${t}, j\xe1 existe. Deseja ser redirecionado?`)&&this.router.navigate([`room/${t}`]);else{let r=this.localStorage.get("user-data");this.firestoreService.newRoom({name:t,revealCards:!1,calc:0,users:[{name:r.name||"",selectedCard:"0"}]})}}saveUserName(){let t=document.getElementById("user-name").value;this.firestoreService.userExists(t).subscribe(r=>{r?alert("Nome de usu\xe1rio j\xe1 cadastrado, escolha outro!"):(this.userData={name:t,selectedCard:"0"},this.localStorage.set("user-data",this.userData))})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ii),m.Y36(gP),m.Y36(gA))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["setUserName",""],[4,"ngFor","ngForOf"],["for","new-room"],["type","text","name","","id","new-room"],[3,"click"],[2,"cursor","pointer",3,"routerLink"],["for","user-name"],["type","text","name","","id","user-name"]],template:function(t,r){if(1&t&&(m.YNc(0,LU,16,1,"ng-container",0),m.YNc(1,FU,7,0,"ng-template",null,1,m.W1O)),2&t){const i=m.MAs(2);m.Q6J("ngIf",null==r.userData?null:r.userData.name)("ngIfElse",i)}},dependencies:[Xi,Un,gD,xf]}),n})()},{path:"room/:roomName",component:NU}];let VU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[fP.forRoot(UU),fP]}),n})(),BU=(()=>{class n{constructor(){this.title="Planning Poker"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[tA]}),n})(),$U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[BU]}),n.\u0275inj=m.cJS({imports:[fr.hO.initializeApp(rR_firebaseConfig),$P.enablePersistence(),Rk,RO,rl,VU]}),n})();(0,m.G48)(),nl().bootstrapModule($U).catch(n=>console.error(n))},5867:(dt,Ae,L)=>{L.d(Ae,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=L(9681);(0,m.registerVersion)("firebase","9.14.0","app")},127:(dt,Ae,L)=>{L.d(Ae,{Z:()=>m.Z});var m=L(3942);m.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(dt,Ae,L)=>{L.r(Ae);var m=L(5861),X=L(3942),k=L(2090),ae=L(9681),se=L(1877),fe=L(655),le=L(4859);const Ie=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},st=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new se.Yd("@firebase/auth");function lt(_,...h){nt.logLevel<=se.in.ERROR&&nt.error(`Auth (${ae.SDK_VERSION}): ${_}`,...h)}function xe(_,...h){throw $e(_,...h)}function ve(_,...h){return $e(_,...h)}function be(_,h,g){const w=Object.assign(Object.assign({},st()),{[h]:g});return new k.LL("auth","Firebase",w).create(h,{appName:_.name})}function Ve(_,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&xe(_,"argument-error"),be(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(_,...h){if("string"!=typeof _){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return _e.create(_,...h)}function B(_,h,...g){if(!_)throw $e(h,...g)}function ye(_){const h="INTERNAL ASSERTION FAILED: "+_;throw lt(h),new Error(h)}function W(_,h){_||ye(h)}const J=new Map;function re(_){W(_ instanceof Function,"Expected a class definition");let h=J.get(_);return h?(W(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,J.set(_,h),h)}function Ne(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ht(){return"http:"===tn()||"https:"===tn()}function tn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(h,g){this.shortDelay=h,this.longDelay=g,W(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wn(_,h){W(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Yt{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Fr=new cn(3e4,6e4);function Ut(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function fn(_,h,g,w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,m.Z)(function*(_,h,g,w,A={}){return _i(_,A,(0,m.Z)(function*(){let P={},q={};w&&("GET"===h?q=w:P={body:JSON.stringify(w)});const de=(0,k.xO)(Object.assign({key:_.config.apiKey},q)).slice(1),Ue=yield _._getAdditionalHeaders();return Ue["Content-Type"]="application/json",_.languageCode&&(Ue["X-Firebase-Locale"]=_.languageCode),Yt.fetch()(vi(_,_.config.apiHost,g,de),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function _i(_,h,g){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,m.Z)(function*(_,h,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},nn),h);try{const A=new si(_),P=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield P.json();if("needConfirmation"in q)throw oi(_,"account-exists-with-different-credential",q);if(P.ok&&!("errorMessage"in q))return q;{const de=P.ok?q.errorMessage:q.error.message,[Ue,tt]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw oi(_,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw oi(_,"email-already-in-use",q);if("USER_DISABLED"===Ue)throw oi(_,"user-disabled",q);const St=w[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw be(_,St,tt);xe(_,St)}}catch(A){if(A instanceof k.ZR)throw A;xe(_,"network-request-failed")}})).apply(this,arguments)}function zr(_,h,g,w){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(_,h,g,w,A={}){const P=yield fn(_,h,g,w,A);return"mfaPendingCredential"in P&&xe(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function vi(_,h,g,w){const A=`${h}${g}?${w}`;return _.config.emulator?wn(_.config,A):`${_.config.apiScheme}://${A}`}class si{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(ve(this.auth,"network-request-failed")),Fr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oi(_,h,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=ve(_,h,w);return A.customData._tokenResponse=g,A}function Ye(){return(Ye=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function xr(_,h){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qn(_,h){return ai.apply(this,arguments)}function ai(){return(ai=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Mi(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function mn(){return(mn=(0,m.Z)(function*(_,h=!1){const g=(0,k.m9)(_),w=yield g.getIdToken(h),A=ct(w);B(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,q=P?.sign_in_provider;return{claims:A,token:w,authTime:Mi(Et(A.auth_time)),issuedAtTime:Mi(Et(A.iat)),expirationTime:Mi(Et(A.exp)),signInProvider:q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(_){return 1e3*Number(_)}function ct(_){var h;const[g,w,A]=_.split(".");if(void 0===g||void 0===w||void 0===A)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,k.tV)(w);return P?JSON.parse(P):(lt("Failed to decode base64 JWT payload"),null)}catch(P){return lt("Caught error parsing JWT payload as JSON",null===(h=P)||void 0===h?void 0:h.toString()),null}}function _r(_,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(_,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&qr(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function qr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Ot{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class Ts{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(_){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(_){var h;const g=_.auth,w=yield _.getIdToken(),A=yield _r(_,Qn(g,{idToken:w}));B(A?.users.length,g,"internal-error");const P=A.users[0];_._notifyReloadListener(P);const q=null!==(h=P.providerUserInfo)&&void 0!==h&&h.length?it(P.providerUserInfo):[],de=Vr(_.providerData,q),St=!!_.isAnonymous&&!(_.email&&P.passwordHash||de?.length),vt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:de,metadata:new Ts(P.createdAt,P.lastLoginAt),isAnonymous:St};Object.assign(_,vt)})).apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(_){const h=(0,k.m9)(_);yield sn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Vr(_,h){return[..._.filter(w=>!h.some(A=>A.providerId===w.providerId)),...h]}function it(_){return _.map(h=>{var{providerId:g}=h,w=(0,fe._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function rt(){return(rt=(0,m.Z)(function*(_,h){const g=yield _i(_,{},(0,m.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:P}=_.config,q=vi(_,A,"/v1/token",`key=${P}`),de=yield _._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(q,{method:"POST",headers:de,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){B(h.idToken,"internal-error"),B(typeof h.idToken<"u","internal-error"),B(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function un(_){const h=ct(_);return B(h,"internal-error"),B(typeof h.exp<"u","internal-error"),B(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,m.Z)(function*(){return B(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:q}=yield function Ce(_,h){return rt.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(A,P,Number(q))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:A,expirationTime:P}=g,q=new At;return w&&(B("string"==typeof w,"internal-error",{appName:h}),q.refreshToken=w),A&&(B("string"==typeof A,"internal-error",{appName:h}),q.accessToken=A),P&&(B("number"==typeof P,"internal-error",{appName:h}),q.expirationTime=P),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Tt(_,h){B("string"==typeof _||typeof _>"u","internal-error",{appName:h})}class $t{constructor(h){var{uid:g,auth:w,stsTokenManager:A}=h,P=(0,fe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Ts(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,m.Z)(function*(){const w=yield _r(g,g.stsTokenManager.getToken(g.auth,h));return B(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function jn(_){return mn.apply(this,arguments)}(this,h)}reload(){return function on(_){return Yn.apply(this,arguments)}(this)}_assign(h){this!==h&&(B(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new $t(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,m.Z)(function*(){let A=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield sn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const g=yield h.getIdToken();return yield _r(h,function Da(_,h){return Ye.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,A,P,q,de,Ue,tt,St;const vt=null!==(w=g.displayName)&&void 0!==w?w:void 0,rr=null!==(A=g.email)&&void 0!==A?A:void 0,ir=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,Gs=null!==(q=g.photoURL)&&void 0!==q?q:void 0,ap=null!==(de=g.tenantId)&&void 0!==de?de:void 0,up=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,lp=null!==(tt=g.createdAt)&&void 0!==tt?tt:void 0,p_=null!==(St=g.lastLoginAt)&&void 0!==St?St:void 0,{uid:Hg,emailVerified:g_,isAnonymous:_l,providerData:tu,stsTokenManager:Fc}=g;B(Hg&&Fc,h,"internal-error");const cp=At.fromJSON(this.name,Fc);B("string"==typeof Hg,h,"internal-error"),Tt(vt,h.name),Tt(rr,h.name),B("boolean"==typeof g_,h,"internal-error"),B("boolean"==typeof _l,h,"internal-error"),Tt(ir,h.name),Tt(Gs,h.name),Tt(ap,h.name),Tt(up,h.name),Tt(lp,h.name),Tt(p_,h.name);const yh=new $t({uid:Hg,auth:h,email:rr,emailVerified:g_,displayName:vt,isAnonymous:_l,photoURL:Gs,phoneNumber:ir,tenantId:ap,stsTokenManager:cp,createdAt:lp,lastLoginAt:p_});return tu&&Array.isArray(tu)&&(yh.providerData=tu.map(nu=>Object.assign({},nu))),up&&(yh._redirectEventId=up),yh}static _fromIdTokenResponse(h,g,w=!1){return(0,m.Z)(function*(){const A=new At;A.updateFromServerResponse(g);const P=new $t({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:w});return yield sn(P),P})()}}const V=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,m.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function K(_,h,g){return`firebase:${_}:${h}:${g}`}class Ee{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:A,name:P}=this.auth;this.fullUserKey=K(this.userKey,A.apiKey,P),this.fullPersistenceKey=K("persistence",A.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?$t._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,m.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new Ee(re(V),h,w);const A=(yield Promise.all(g.map(function(){var tt=(0,m.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let P=A[0]||re(V);const q=K(w,h.config.apiKey,h.name);let de=null;for(const tt of g)try{const St=yield tt._get(q);if(St){const vt=$t._fromJSON(h,St);tt!==P&&(de=vt),P=tt;break}}catch{}const Ue=A.filter(tt=>tt._shouldAllowMigration);return P._shouldAllowMigration&&Ue.length?(P=Ue[0],de&&(yield P._set(q,de.toJSON())),yield Promise.all(g.map(function(){var tt=(0,m.Z)(function*(St){if(St!==P)try{yield St._remove(q)}catch{}});return function(St){return tt.apply(this,arguments)}}())),new Ee(P,h,w)):new Ee(P,h,w)})()}}function Y(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(gn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ze(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Fe(h))return"Blackberry";if(Ge(h))return"Webos";if(ft(h))return"Safari";if((h.includes("chrome/")||Jt(h))&&!h.includes("edge/"))return"Chrome";if(qt(h))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ze(_=(0,k.z$)()){return/firefox\//i.test(_)}function ft(_=(0,k.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Jt(_=(0,k.z$)()){return/crios\//i.test(_)}function gn(_=(0,k.z$)()){return/iemobile/i.test(_)}function qt(_=(0,k.z$)()){return/android/i.test(_)}function Fe(_=(0,k.z$)()){return/blackberry/i.test(_)}function Ge(_=(0,k.z$)()){return/webos/i.test(_)}function jt(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ys(_=(0,k.z$)()){return jt(_)||qt(_)||Ge(_)||Fe(_)||/windows phone/i.test(_)||gn(_)}function Cs(_,h=[]){let g;switch(_){case"Browser":g=Y((0,k.z$)());break;case"Worker":g=`${Y((0,k.z$)())}-${_}`;break;default:g=_}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${w}`}class Po{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=P=>new Promise((q,de)=>{try{q(h(P))}catch(Ue){de(Ue)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,m.Z)(function*(){var w;if(g.auth.currentUser===h)return;const A=[];try{for(const P of g.queue)yield P(h),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const q of A)try{q()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class Vt{constructor(h,g,w){this.app=h,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Js(this),this.idTokenSubscription=new Js(this),this.beforeStateQueue=new Po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=re(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,P;if(!w._deleted&&(w.persistenceManager=yield Ee.create(w,h),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,m.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let P=A,q=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Ue=P?._redirectEventId,tt=yield g.tryRedirectSignIn(h);(!de||de===Ue)&&tt?.user&&(P=tt.user,q=!0)}if(!P)return g.directlySetCurrentUser(null);if(!P._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(P)}catch(de){P=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return P?g.reloadAndSetCurrentUserOrClear(P):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===P._redirectEventId?g.directlySetCurrentUser(P):g.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(h){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,m.Z)(function*(){var w;try{yield sn(h)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&B(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&B(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(re(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,m.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&re(h)||g._popupRedirectResolver;B(w,g,"argument-error"),g.redirectPersistenceManager=yield Ee.create(g,[re(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,m.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,m.Z)(function*(){if(h===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,A){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return B(q,this,"internal-error"),q.then(()=>P(this.currentUser)),"function"==typeof g?h.addObserver(g,w,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Cs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Dn(_){return(0,k.m9)(_)}class Js{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Ss(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class vr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,g){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function zn(_,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:resetPassword",Ut(_,h))})).apply(this,arguments)}function ln(_,h){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Xl(_,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:update",Ut(_,h))})).apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithPassword",Ut(_,h))})).apply(this,arguments)}function xs(_,h){return wi.apply(this,arguments)}function wi(){return(wi=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:sendOobCode",Ut(_,h))})).apply(this,arguments)}function Un(_,h){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(_,h){return xs(_,h)})).apply(this,arguments)}function cr(_,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(_,h){return xs(_,h)})).apply(this,arguments)}function Mu(_,h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,m.Z)(function*(_,h){return xs(_,h)})).apply(this,arguments)}function tc(_,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,m.Z)(function*(_,h){return xs(_,h)})).apply(this,arguments)}function Sd(){return(Sd=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithEmailLink",Ut(_,h))})).apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithEmailLink",Ut(_,h))})).apply(this,arguments)}class rc extends vr{constructor(h,g,w,A=null){super("password",w),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new rc(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new rc(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Ta(_,h){return Xi.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Sf(_,h){return Sd.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return ln(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Af(_,h){return nc.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Xn(_,h){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithIdp",Ut(_,h))})).apply(this,arguments)}class es extends vr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new es(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A}=g,P=(0,fe._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const q=new es(w,A);return q.idToken=P.idToken||void 0,q.accessToken=P.accessToken||void 0,q.secret=P.secret,q.nonce=P.nonce,q.pendingToken=P.pendingToken||null,q}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Xn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Xn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function Dg(_,h){return xd.apply(this,arguments)}function xd(){return(xd=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:sendVerificationCode",Ut(_,h))})).apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,h))})).apply(this,arguments)}function Md(){return(Md=(0,m.Z)(function*(_,h){const g=yield zr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,h));if(g.temporaryProof)throw oi(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Tg={USER_NOT_FOUND:"user-not-found"};function Rd(){return(Rd=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ut(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Tg)})).apply(this,arguments)}class Rs extends vr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Rs({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Rs({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function ic(_,h){return Ms.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function xf(_,h){return Md.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Cg(_,h){return Rd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:P}=h;return w||g||A||P?new Rs({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:P}):null}}class Ru{constructor(h){var g,w,A,P,q,de;const Ue=(0,k.zd)((0,k.pd)(h)),tt=null!==(g=Ue.apiKey)&&void 0!==g?g:null,St=null!==(w=Ue.oobCode)&&void 0!==w?w:null,vt=function Pd(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);B(tt&&St&&vt,"argument-error"),this.apiKey=tt,this.operation=vt,this.code=St,this.continueUrl=null!==(P=Ue.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(de=Ue.tenantId)&&void 0!==de?de:null}static parseLink(h){const g=function Nd(_){const h=(0,k.zd)((0,k.pd)(_)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||h||_}(h);try{return new Ru(g)}catch{return null}}}let Ni=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return rc._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Ru.parseLink(w);return B(A,"argument-error"),rc._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ts{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ns extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class eo extends ns{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return B("providerId"in g&&"signInMethod"in g,"argument-error"),es._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return B(h.idToken||h.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return eo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return eo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:P,nonce:q,providerId:de}=h;if(!w&&!A&&!g&&!P||!de)return null;try{return new eo(de)._credential({idToken:g,accessToken:w,nonce:q,pendingToken:P})}catch{return null}}}let Sa=(()=>{class _ extends ns{constructor(){super("facebook.com")}static credential(g){return es._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Pu=(()=>{class _ extends ns{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return es._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),sc=(()=>{class _ extends ns{constructor(){super("github.com")}static credential(g){return es._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Aa extends vr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Xn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Xn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A,pendingToken:P}=g;return w&&A&&P&&w===A?new Aa(w,P):null}static _create(h,g){return new Aa(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends ts{constructor(h){B(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ui.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ui.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Aa.fromJSON(h);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return Aa._create(w,g)}catch{return null}}}let Kr=(()=>{class _ extends ns{constructor(){super("twitter.com")}static credential(g,w){return es._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function No(_,h){return kd.apply(this,arguments)}function kd(){return(kd=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signUp",Ut(_,h))})).apply(this,arguments)}class wr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,A=!1){return(0,m.Z)(function*(){const P=yield $t._fromIdTokenResponse(h,w,A),q=Pf(w);return new wr({user:P,providerId:q,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const A=Pf(w);return new wr({user:h,providerId:A,_tokenResponse:w,operationType:g})})()}}function Pf(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function An(){return(An=(0,m.Z)(function*(_){var h;const g=Dn(_);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new wr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield No(g,{returnSecureToken:!0}),A=yield wr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Nu extends k.ZR{constructor(h,g,w,A){var P;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:h.name,tenantId:null!==(P=h.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,A){return new Nu(h,g,w,A)}}function kf(_,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Nu._fromErrorAndOperation(_,P,h,w):P})}function li(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function ku(){return(ku=(0,m.Z)(function*(_,h){const g=(0,k.m9)(_);yield Wt(!0,g,h);const{providerUserInfo:w}=yield xr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=li(w||[]);return g.providerData=g.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ko(_,h){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(_,h,g=!1){const w=yield _r(_,h._linkToIdToken(_.auth,yield _.getIdToken()),g);return wr._forOperation(_,"link",w)})).apply(this,arguments)}function Wt(_,h,g){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(_,h,g){yield sn(h);const A=!1===_?"provider-already-linked":"no-such-provider";B(li(h.providerData).has(g)===_,h.auth,A)})).apply(this,arguments)}function to(_,h){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(_,h,g=!1){var w;const{auth:A}=_,P="reauthenticate";try{const q=yield _r(_,kf(A,P,h,_),g);B(q.idToken,A,"internal-error");const de=ct(q.idToken);B(de,A,"internal-error");const{sub:Ue}=de;return B(_.uid===Ue,A,"user-mismatch"),wr._forOperation(_,P,q)}catch(q){throw"auth/user-not-found"===(null===(w=q)||void 0===w?void 0:w.code)&&xe(A,"user-mismatch"),q}})).apply(this,arguments)}function Ei(_,h){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,m.Z)(function*(_,h,g=!1){const w="signIn",A=yield kf(_,w,h),P=yield wr._fromIdTokenResponse(_,w,A);return g||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Tn(_,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,m.Z)(function*(_,h){return Ei(Dn(_),h)})).apply(this,arguments)}function Uu(_,h){return Of.apply(this,arguments)}function Of(){return(Of=(0,m.Z)(function*(_,h){const g=(0,k.m9)(_);return yield Wt(!1,g,h.providerId),ko(g,h)})).apply(this,arguments)}function Vu(_,h){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,m.Z)(function*(_,h){return to((0,k.m9)(_),h)})).apply(this,arguments)}function oc(_,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(_,h){return zr(_,"POST","/v1/accounts:signInWithCustomToken",Ut(_,h))})).apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(_,h){const g=Dn(_),w=yield oc(g,{token:h,returnSecureToken:!0}),A=yield wr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Te{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?zt._fromServerResponse(h,g):xe(h,"internal-error")}}class zt extends Te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new zt(g)}}function $u(_,h,g){var w;B((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),B(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function xn(){return(xn=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_),A={requestType:"PASSWORD_RESET",email:h};g&&$u(w,A,g),yield cr(w,A)})).apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(_,h,g){yield zn((0,k.m9)(_),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(_,h){yield Xl((0,k.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ra(_,h){return uc.apply(this,arguments)}function uc(){return(uc=(0,m.Z)(function*(_,h){const g=(0,k.m9)(_),w=yield zn(g,{oobCode:h}),A=w.requestType;switch(B(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(w.mfaInfo,g,"internal-error");default:B(w.email,g,"internal-error")}let P=null;return w.mfaInfo&&(P=Te._fromServerResponse(Dn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function Od(){return(Od=(0,m.Z)(function*(_,h){const{data:g}=yield Ra((0,k.m9)(_),h);return g.email})).apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(_,h,g){const w=Dn(_),A=yield No(w,{returnSecureToken:!0,email:h,password:g}),P=yield wr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_),A={requestType:"EMAIL_SIGNIN",email:h};B(g.handleCodeInApp,w,"argument-error"),g&&$u(w,A,g),yield Mu(w,A)})).apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_),A=Ni.credentialWithLink(h,g||Ne());return B(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Tn(w,A)})).apply(this,arguments)}function Ag(_,h){return dc.apply(this,arguments)}function dc(){return(dc=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:createAuthUri",Ut(_,h))})).apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(_,h){const w={identifier:h,continueUri:ht()?Ne():"http://localhost"},{signinMethods:A}=yield Ag((0,k.m9)(_),w);return A||[]})).apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(_,h){const g=(0,k.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&$u(g.auth,A,h);const{email:P}=yield Un(g.auth,A);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};g&&$u(w.auth,P,g);const{email:q}=yield tc(w.auth,P);q!==_.email&&(yield _.reload())})).apply(this,arguments)}function qu(_,h){return pc.apply(this,arguments)}function pc(){return(pc=(0,m.Z)(function*(_,h){return fn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function mc(){return(mc=(0,m.Z)(function*(_,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,k.m9)(_),P={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield _r(w,qu(w.auth,P));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const de=w.providerData.find(({providerId:Ue})=>"password"===Ue);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function io(_,h,g){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,m.Z)(function*(_,h,g){const{auth:w}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(P.email=h),g&&(P.password=g);const q=yield _r(_,ln(w,P));yield _._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Zr{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class yn extends Zr{constructor(h,g,w,A){super(h,g,w),this.username=A}}class Fd extends Zr{constructor(h,g){super(h,"facebook.com",g)}}class yc extends yn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Lf extends Zr{constructor(h,g){super(h,"google.com",g)}}class _c extends yn{constructor(h,g,w){super(h,"twitter.com",g,w)}}function Ku(_){const{user:h,_tokenResponse:g}=_;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function er(_){var h,g;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const q=null===(g=null===(h=ct(_.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new Zr(P,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new Fd(P,A);case"github.com":return new yc(P,A);case"google.com":return new Lf(P,A);case"twitter.com":return new _c(P,A,_.screenName||null);case"custom":case"anonymous":return new Zr(P,null);default:return new Zr(P,w,A)}}(g)}class oo{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new oo("enroll",h,g)}static _fromMfaPendingCredential(h){return new oo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return oo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return oo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Qu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=Dn(h),A=g.customData._serverResponse,P=(A.mfaInfo||[]).map(de=>Te._fromServerResponse(w,de));B(A.mfaPendingCredential,w,"internal-error");const q=oo._fromMfaPendingCredential(A.mfaPendingCredential);return new Qu(q,P,function(){var de=(0,m.Z)(function*(Ue){const tt=yield Ue._process(w,q);delete A.mfaInfo,delete A.mfaPendingCredential;const St=Object.assign(Object.assign({},A),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(g.operationType){case"signIn":const vt=yield wr._fromIdTokenResponse(w,g.operationType,St);return yield w._updateCurrentUser(vt.user),vt;case"reauthenticate":return B(g.user,w,"internal-error"),wr._forOperation(g.user,g.operationType,St);default:xe(w,"internal-error")}});return function(Ue){return de.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,m.Z)(function*(){return g.signInResolver(h)})()}}function Yu(_,h){return fn(_,"POST","/v2/accounts/mfaEnrollment:start",Ut(_,h))}class Ff{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Te._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Ff(h)}getSession(){var h=this;return(0,m.Z)(function*(){return oo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,m.Z)(function*(){const A=h,P=yield w.getSession(),q=yield _r(w.user,A._process(w.user.auth,P,g));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(h){var g=this;return(0,m.Z)(function*(){var w;const A="string"==typeof h?h:h.uid,P=yield g.user.getIdToken(),q=yield _r(g.user,function $d(_,h){return fn(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(_,h))}(g.user.auth,{idToken:P,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:de})=>de!==A),yield g.user._updateTokensIfNecessary(q);try{yield g.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(w=de)||void 0===w?void 0:w.code))throw de}})()}}const ao=new WeakMap,uo="__sak";class Xu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class _ extends Xu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function La(){const _=(0,k.z$)();return ft(_)||jt(_)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ys(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),P=this.localCache[w];A!==P&&g(w,P,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((de,Ue,tt)=>{this.notifyListeners(de,tt)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(A);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const P=()=>{const de=this.storage.getItem(A);!w&&this.localCache[A]===de||this.notifyListeners(A,de)},q=this.storage.getItem(A);!function Jn(){return(0,k.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,P=this;return(0,m.Z)(function*(){yield A().call(P,g,w),P.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,m.Z)(function*(){const P=yield w().call(A,g);return A.localCache[g]=JSON.stringify(P),P})()}_remove(g){var w=()=>super._remove,A=this;return(0,m.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),Oi=(()=>{class _ extends Xu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let Gd=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(P=>P.isListeningto(g));if(w)return w;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const A=g,{eventId:P,eventType:q,data:de}=A.data,Ue=w.handlersMap[q];if(!Ue?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:q});const tt=Array.from(Ue).map(function(){var vt=(0,m.Z)(function*(rr){return rr(A.origin,de)});return function(rr){return vt.apply(this,arguments)}}()),St=yield function Va(_){return Promise.all(_.map(function(){var h=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(tt);A.ports[0].postMessage({status:"done",eventId:P,eventType:q,response:St})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Ba(_="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return _+g}class vc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var A=this;return(0,m.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let q,de;return new Promise((Ue,tt)=>{const St=Ba("",20);P.port1.start();const vt=setTimeout(()=>{tt(new Error("unsupported_event"))},w);de={messageChannel:P,onMessage(rr){const ir=rr;if(ir.data.eventId===St)switch(ir.data.status){case"ack":clearTimeout(vt),q=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(ir.data.response);break;default:clearTimeout(vt),clearTimeout(q),tt(new Error("invalid_response"))}}},A.handlers.add(de),P.port1.addEventListener("message",de.onMessage),A.target.postMessage({eventType:h,eventId:St,data:g},[P.port2])}).finally(()=>{de&&A.removeMessageHandler(de)})})()}}function Vn(){return window}function el(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function $a(){return($a=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ks="firebaseLocalStorageDb",Os="firebaseLocalStorage",rl="fbase_key";class co{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ja(_,h){return _.transaction([Os],h?"readwrite":"readonly").objectStore(Os)}function Vo(){const _=indexedDB.open(ks,1);return new Promise((h,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Os,{keyPath:rl})}catch(A){g(A)}}),_.addEventListener("success",(0,m.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Os)?h(w):(w.close(),yield function qd(){const _=indexedDB.deleteDatabase(ks);return new co(_).toPromise()}(),h(yield Vo()))}))})}function as(_,h,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,m.Z)(function*(_,h,g){const w=ja(_,!0).put({[rl]:h,value:g});return new co(w).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(_,h){const g=ja(_,!1).get(h),w=yield new co(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ho(_,h){const g=ja(_,!0).delete(h);return new co(g).toPromise()}const Bo=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Vo()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const P=yield w._openDb();return yield g(P)}catch(P){if(A++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return el()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Gd._getInstance(function nl(){return el()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(A,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(A,P){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function lo(){return $a.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new vc(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function tl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Vo();return yield as(g,uo,"1"),yield ho(g,uo),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(P=>as(P,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=yield w._withRetries(P=>function il(_,h){return Ha.apply(this,arguments)}(P,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(A=>ho(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(q=>{const de=ja(q,!1).getAll();return new co(de).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:q,value:de}of w)P.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(de)&&(g.notifyListeners(q,de),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!P.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function $o(_,h){return fn(_,"POST","/v2/accounts/mfaSignIn:start",Ut(_,h))}function Fs(){return(Fs=(0,m.Z)(function*(_){return(yield fn(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ho(_){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=h,w.onerror=A=>{const P=ve("internal-error");P.customData=A,g(P)},w.type="text/javascript",w.charset="UTF-8",function jo(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(w)})}function al(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ga=1e12;class _n{constructor(h){this.auth=h,this.counter=Ga,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new xg(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Ga;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ga))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(h||Ga))||void 0===w||w.execute(),""})()}}class xg{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;B(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yy(_){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mg=al("rcb"),Jy=new cn(3e4,6e4);class Uf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Vn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return B(function Lw(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Vn().grecaptcha):new Promise((w,A)=>{const P=Vn().setTimeout(()=>{A(ve(h,"network-request-failed"))},Jy.get());Vn()[Mg]=()=>{Vn().clearTimeout(P),delete Vn()[Mg];const de=Vn().grecaptcha;if(!de)return void A(ve(h,"internal-error"));const Ue=de.render;de.render=(tt,St)=>{const vt=Ue(tt,St);return this.counter++,vt},this.hostLanguage=g,w(de)},Ho(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Mg,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),A(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Vn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ic{load(h){return(0,m.Z)(function*(){return new _n(h)})()}clearedOneInstance(){}}const e_="recaptcha",t_={theme:"light",type:"image"};class hr{constructor(h,g=Object.assign({},t_),w){this.parameters=g,this.type=e_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(w),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;B(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ic:new Uf,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(P=>{const q=de=>{!de||(h.tokenChangeListeners.delete(q),P(de))};h.tokenChangeListeners.add(q),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=Vn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){B(ht()&&!el(),h.auth,"internal-error"),yield function fr(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Qr(_){return Fs.apply(this,arguments)}(h.auth);B(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class po{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Rs._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function rn(){return(rn=(0,m.Z)(function*(_,h,g){const w=Dn(_),A=yield Us(w,h,(0,k.m9)(g));return new po(A,P=>Tn(w,P))})).apply(this,arguments)}function Je(){return(Je=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_);yield Wt(!1,w,"phone");const A=yield Us(w.auth,h,(0,k.m9)(g));return new po(A,P=>Uu(w,P))})).apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_),A=yield Us(w.auth,h,(0,k.m9)(g));return new po(A,P=>Vu(w,P))})).apply(this,arguments)}function Us(_,h,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,m.Z)(function*(_,h,g){var w;const A=yield g.verify();try{let P;if(B("string"==typeof A,_,"argument-error"),B(g.type===e_,_,"argument-error"),P="string"==typeof h?{phoneNumber:h}:h,"session"in P){const q=P.session;if("phoneNumber"in P)return B("enroll"===q.type,_,"internal-error"),(yield Yu(_,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{B("signin"===q.type,_,"internal-error");const de=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return B(de,_,"missing-multi-factor-info"),(yield $o(_,{mfaPendingCredential:q.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Dg(_,{phoneNumber:P.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(_,h){yield ko((0,k.m9)(_),h)})).apply(this,arguments)}let qn=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Dn(g)}verifyPhoneNumber(g,w){return Us(this.auth,g,(0,k.m9)(w))}static credential(g,w){return Rs._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?Rs._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ls(_,h){return h?re(h):(B(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class pt extends vr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Xn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Xn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Xn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Yr(_){return Ei(_.auth,new pt(_),_.bypassAuthState)}function cs(_){const{auth:h,user:g}=_;return B(g,h,"internal-error"),to(g,new pt(_),_.bypassAuthState)}function di(_){return ul.apply(this,arguments)}function ul(){return(ul=(0,m.Z)(function*(_){const{auth:h,user:g}=_;return B(g,h,"internal-error"),ko(g,new pt(_),_.bypassAuthState)})).apply(this,arguments)}class za{constructor(h,g,w,A,P=!1){this.auth=h,this.resolver=w,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,m.Z)(function*(w,A){h.pendingPromise={resolve:w,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(P){h.reject(P)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:P,tenantId:q,error:de,type:Ue}=h;if(de)return void g.reject(de);const tt={auth:g.auth,requestUri:w,sessionId:A,tenantId:q||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(tt))}catch(St){g.reject(St)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Yr;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return cs;default:xe(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jr=new cn(2e3,1e4);function Wo(){return(Wo=(0,m.Z)(function*(_,h,g){const w=Dn(_);Ve(_,h,ts);const A=ls(w,g);return new xt(w,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function hi(){return(hi=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_);Ve(w.auth,h,ts);const A=ls(w.auth,g);return new xt(w.auth,"reauthViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_);Ve(w.auth,h,ts);const A=ls(w.auth,g);return new xt(w.auth,"linkViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}let xt=(()=>{class _ extends za{constructor(g,w,A,P,q){super(g,w,P,q),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return B(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const w=Ba();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Jr.get())};g()}}return _.currentPopupAction=null,_})();const tr=new Map;class ot extends za{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=tr.get(g.auth._key());if(!w){try{const P=(yield function Ko(_,h){return It.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(P)}catch(A){w=()=>Promise.reject(A)}tr.set(g.auth._key(),w)}return g.bypassAuthState||tr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const A=yield w.auth._redirectUserForId(h.eventId);if(A)return w.user=A,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function It(){return(It=(0,m.Z)(function*(_,h){const g=Kd(h),w=Fi(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Zo(_,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(_,h){return Fi(_)._set(Kd(h),"true")})).apply(this,arguments)}function Yo(_,h){tr.set(_._key(),h)}function Fi(_){return re(_._redirectPersistence)}function Kd(_){return K("pendingRedirect",_.config.apiKey,_.name)}function D(){return(D=(0,m.Z)(function*(_,h,g){const w=Dn(_);Ve(_,h,ts);const A=ls(w,g);return yield Zo(A,w),A._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_);Ve(w.auth,h,ts);const A=ls(w.auth,g);yield Zo(A,w.auth);const P=yield _t(w);return A._openRedirect(w.auth,h,"reauthViaRedirect",P)})).apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(_,h,g){const w=(0,k.m9)(_);Ve(w.auth,h,ts);const A=ls(w.auth,g);yield Wt(!1,w,h.providerId),yield Zo(A,w.auth);const P=yield _t(w);return A._openRedirect(w.auth,h,"linkViaRedirect",P)})).apply(this,arguments)}function Xe(){return(Xe=(0,m.Z)(function*(_,h){return yield Dn(_)._initializationPromise,Ct(_,h,!1)})).apply(this,arguments)}function Ct(_,h){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(_,h,g=!1){const w=Dn(_),A=ls(w,h),q=yield new ot(w,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,h)),q})).apply(this,arguments)}function _t(_){return bn.apply(this,arguments)}function bn(){return(bn=(0,m.Z)(function*(_){const h=Ba(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Nr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Jo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return go(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!go(h)){const A=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vs(h))}saveEventToCache(h){this.cachedEventUids.add(Vs(h)),this.lastProcessedEventTime=Date.now()}}function Vs(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function go({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===h?.code}function Xr(_){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(_,h={}){return fn(_,"GET","/v1/projects",h)})).apply(this,arguments)}const $s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,js=/^https?/;function Bf(){return(Bf=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Xr(_);for(const g of h)try{if(Qd(g))return}catch{}xe(_,"unauthorized-domain")})).apply(this,arguments)}function Qd(_){const h=Ne(),{protocol:g,hostname:w}=new URL(h);if(_.startsWith("chrome-extension://")){const q=new URL(_);return""===q.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===w}if(!js.test(g))return!1;if($s.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const $f=new cn(3e4,6e4);function Yd(){const _=Vn().___jsl;if(_?.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let bc=null;function n_(_){return bc=bc||function ll(_){return new Promise((h,g)=>{var w,A,P;function q(){Yd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Yd(),g(ve(_,"network-request-failed"))},timeout:$f.get()})}if(null!==(A=null===(w=Vn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(P=Vn().gapi)||void 0===P||!P.load){const de=al("iframefcb");return Vn()[de]=()=>{gapi.load?q():g(ve(_,"network-request-failed"))},Ho(`https://apis.google.com/js/api.js?onload=${de}`).catch(Ue=>g(Ue))}q()}}).catch(h=>{throw bc=null,h})}(_),bc}const Jd=new cn(5e3,15e3),Xd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dc(_){const h=_.config;B(h.authDomain,_,"auth-domain-config-required");const g=h.emulator?wn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:_.name,v:ae.SDK_VERSION},A=i_.get(_.config.apiHost);A&&(w.eid=A);const P=_._getFrameworks();return P.length&&(w.fw=P.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function Pg(){return Pg=(0,m.Z)(function*(_){const h=yield n_(_),g=Vn().gapi;return B(g,_,"internal-error"),h.open({where:document.body,url:Dc(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xd,dontclear:!0},w=>new Promise(function(){var A=(0,m.Z)(function*(P,q){yield w.restyle({setHideOnLeave:!1});const de=ve(_,"network-request-failed"),Ue=Vn().setTimeout(()=>{q(de)},Jd.get());function tt(){Vn().clearTimeout(Ue),P(w)}w.ping(tt).then(tt,()=>{q(de)})});return function(P,q){return A.apply(this,arguments)}}()))}),Pg.apply(this,arguments)}const Hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class eh{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sc(_,h,g,w,A,P){B(_.config.authDomain,_,"auth-domain-config-required"),B(_.config.apiKey,_,"invalid-api-key");const q={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:ae.SDK_VERSION,eventId:A};if(h instanceof ts){h.setDefaultLanguage(_.languageCode),q.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,tt]of Object.entries(P||{}))q[Ue]=tt}if(h instanceof ns){const Ue=h.getScopes().filter(tt=>""!==tt);Ue.length>0&&(q.scopes=Ue.join(","))}_.tenantId&&(q.tid=_.tenantId);const de=q;for(const Ue of Object.keys(de))void 0===de[Ue]&&delete de[Ue];return`${function zf({config:_}){return _.emulator?wn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(de).slice(1)}`}const nh="webStorageSupport";class rh extends class Wf{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new rh(h)}_finalizeEnroll(h,g,w){return function Ju(_,h){return fn(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(_,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function ol(_,h){return fn(_,"POST","/v2/accounts/mfaSignIn:finalize",Ut(_,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kg=(()=>{class _{constructor(){}static assertion(g){return rh._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var cl="@firebase/auth",ih="0.20.11";class Kf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var A;h((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mo(){return window}function hl(){return(hl=(0,m.Z)(function*(_,h,g){var w;const{BuildInfo:A}=mo();W(h.sessionId,"AuthEvent did not contain a session ID");const P=yield oh(h.sessionId),q={};return jt()?q.ibi=A.packageName:qt()?q.apn=A.packageName:xe(_,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=P,Sc(_,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function Ac(){return(Ac=(0,m.Z)(function*(_){const{BuildInfo:h}=mo(),g={};jt()?g.iosBundleId=h.packageName:qt()?g.androidPackageName=h.packageName:xe(_,"operation-not-supported-in-this-environment"),yield Xr(_,g)})).apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(_,h,g){const{cordova:w}=mo();let A=()=>{};try{yield new Promise((P,q)=>{let de=null;function Ue(){var vt;P();const rr=null===(vt=w.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof rr&&rr(),"function"==typeof g?.close&&g.close()}function tt(){de||(de=window.setTimeout(()=>{q(ve(_,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===document?.visibilityState&&tt()}h.addPassiveListener(Ue),document.addEventListener("resume",tt,!1),qt()&&document.addEventListener("visibilitychange",St,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",St,!1),de&&window.clearTimeout(de)}})}finally{A()}})).apply(this,arguments)}function oh(_){return ah.apply(this,arguments)}function ah(){return(ah=(0,m.Z)(function*(_){const h=c_(_),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function c_(_){if(W(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),g=new Uint8Array(h);for(let w=0;w<_.length;w++)g[w]=_.charCodeAt(w);return g}(0,k.Pz)("authIdTokenMaxAge"),function Ir(_){(0,ae._registerComponent)(new le.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:P,authDomain:q}=w.options;return((de,Ue)=>{B(P&&!P.includes(":"),"invalid-api-key",{appName:de.name}),B(!q?.includes(":"),"argument-error",{appName:de.name});const tt={apiKey:P,authDomain:q,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cs(_)},St=new Vt(de,Ue,tt);return function ke(_,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(re);h?.errorMap&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(w,h?.popupRedirectResolver)}(St,g),St})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new le.wA("auth-internal",h=>{const g=Dn(h.getProvider("auth").getImmediate());return new Kf(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(cl,ih,function Er(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ae.registerVersion)(cl,ih,"esm2017")}("Browser");class uh extends Nr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function xc(_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,m.Z)(function*(_){const h=yield Mc()._get(Rc(_));return h&&(yield Mc()._remove(Rc(_))),h})).apply(this,arguments)}function fl(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);_.push(h.charAt(w))}return _.join("")}function Mc(){return re(Fa)}function Rc(_){return K("authEvent",_.config.apiKey,_.name)}function Ui(_){if(!_?.includes("?"))return{};const[h,...g]=_.split("?");return(0,k.zd)(g.join("?"))}function br(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Ya(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function dh(_=(0,k.z$)()){return!("file:"!==Ya()&&"ionic:"!==Ya()&&"capacitor:"!==Ya()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function kc(){try{const _=self.localStorage,h=Ba();if(_)return _.setItem(h,"1"),_.removeItem(h),!function ep(_=(0,k.z$)()){return function hh(){return(0,k.w1)()&&11===document?.documentMode}()||function Nc(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch{return ea()&&(0,k.hl)()}return!1}function ea(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Oc(){return(function Bg(){return"http:"===Ya()||"https:"===Ya()}()||(0,k.ru)()||dh())&&!function Ja(){return(0,k.b$)()||(0,k.UG)()}()&&kc()&&!ea()}function ta(){return dh()&&typeof document<"u"}function Xa(){return(Xa=(0,m.Z)(function*(){return!!ta()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const bi={LOCAL:"local",NONE:"none",SESSION:"session"},yo=B,np="persistence";function na(_){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,m.Z)(function*(_){yield _._initializationPromise;const h=eu(),g=K(np,_.config.apiKey,_.name);h&&h.setItem(g,_._getPersistence())})).apply(this,arguments)}function eu(){var _;try{return(null===(_=function tp(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Hs=B;class Di{constructor(){this.browserResolver=re(class ds{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oi,this._completeRedirectFn=Ct,this._overrideRedirectResult=Yo}_openPopup(h,g,w,A){var P=this;return(0,m.Z)(function*(){var q;W(null===(q=P.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const de=Sc(h,g,w,Ne(),A);return function Ng(_,h,g,w=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const Ue=Object.assign(Object.assign({},Hf),{width:w.toString(),height:A.toString(),top:P,left:q}),tt=(0,k.z$)().toLowerCase();g&&(de=Jt(tt)?"_blank":g),ze(tt)&&(h=h||"http://localhost",Ue.scrollbars="yes");const St=Object.entries(Ue).reduce((rr,[ir,Gs])=>`${rr}${ir}=${Gs},`,"");if(function Wr(_=(0,k.z$)()){var h;return jt(_)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(tt)&&"_self"!==de)return function Gf(_,h){const g=document.createElement("a");g.href=_,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",de),new eh(null);const vt=window.open(h||"",de,St);B(vt,_,"popup-blocked");try{vt.focus()}catch{}return new eh(vt)}(h,de,Ba())})()}_openRedirect(h,g,w,A){var P=this;return(0,m.Z)(function*(){return yield P._originValidation(h),function Ii(_){Vn().location.href=_}(Sc(h,g,w,Ne(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:P}=this.eventManagers[g];return A?Promise.resolve(A):(W(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,m.Z)(function*(){const w=yield function jf(_){return Pg.apply(this,arguments)}(h),A=new Nr(h);return w.register("authEvent",P=>(B(P?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=w,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(nh,{type:nh},A=>{var P;const q=null===(P=A?.[0])||void 0===P?void 0:P[nh];void 0!==q&&g(!!q),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Zd(_){return Bf.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ys()||ft()||jt()}}),this.cordovaResolver=re(class pl{constructor(){this._redirectPersistence=Oi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ct,this._overrideRedirectResult=Yo}_initialize(h){var g=this;return(0,m.Z)(function*(){const w=h._key();let A=g.eventManagers.get(w);return A||(A=new uh(h),g.eventManagers.set(w,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,A){var P=this;return(0,m.Z)(function*(){!function Jf(_){var h,g,w,A,P,q,de,Ue,tt,St;const vt=mo();B("function"==typeof(null===(h=vt?.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(typeof(null===(g=vt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(P=null===(A=null===(w=vt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Ue=null===(de=null===(q=vt?.cordova)||void 0===q?void 0:q.plugins)||void 0===de?void 0:de.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(St=null===(tt=vt?.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===St?void 0:St.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield P._initialize(h);yield q.initialized(),q.resetRedirect(),function Qo(){tr.clear()}(),yield P._originValidation(h);const de=function Lg(_,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:fl(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(h,w,A);yield function Xf(_,h){return Mc()._set(Rc(_),h)}(h,de);const Ue=yield function dl(_,h,g){return hl.apply(this,arguments)}(h,de,g),tt=yield function Yf(_){const{cordova:h}=mo();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let A=null;w?h.plugins.browsertab.openUrl(_):A=h.InAppBrowser.open(_,function lr(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(A)})})}(Ue);return function l_(_,h,g){return Ka.apply(this,arguments)}(h,q,tt)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function u_(_){return Ac.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:P}=mo(),q=setTimeout((0,m.Z)(function*(){yield xc(h),g.onEvent(br())}),500),de=function(){var St=(0,m.Z)(function*(vt){clearTimeout(q);const rr=yield xc(h);let ir=null;rr&&vt?.url&&(ir=function d_(_,h){var g,w;const A=function h_(_){const h=Ui(_),g=h.link?decodeURIComponent(h.link):void 0,w=Ui(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ui(A).link||A||w||g||_}(h);if(A.includes("/__/auth/callback")){const P=Ui(A),q=P.firebaseError?function Xo(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,de=null===(w=null===(g=q?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ue=de?ve(de):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(rr,vt.url)),g.onEvent(ir||br())});return function(rr){return St.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,de);const Ue=A,tt=`${P.packageName.toLowerCase()}://`;mo().handleOpenURL=function(){var St=(0,m.Z)(function*(vt){if(vt.toLowerCase().startsWith(tt)&&de({url:vt}),"function"==typeof Ue)try{Ue(vt)}catch(rr){console.error(rr)}});return function(vt){return St.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Oi,this._completeRedirectFn=Ct,this._overrideRedirectResult=Yo}_initialize(h){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,A){var P=this;return(0,m.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(h,g,w,A)})()}_openRedirect(h,g,w,A){var P=this;return(0,m.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(h,g,w,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return ta()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const g=yield function fh(){return Xa.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function rp(_){return _.unwrap()}function ph(_){return ml(_)}function ml(_){const{_tokenResponse:h}=_ instanceof k.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return qn.credentialFromResult(_);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Pu;break;case"facebook.com":w=Sa;break;case"github.com":w=sc;break;case"twitter.com":w=Kr;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:q,pendingToken:de,nonce:Ue}=h;return P||q||A||de?de?g.startsWith("saml.")?Aa._create(g,de):es._fromParams({providerId:g,signInMethod:g,pendingToken:de,idToken:A,accessToken:P}):new eo(g).credential({idToken:A,accessToken:P,rawNonce:Ue}):null}return _ instanceof k.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function nr(_,h){return h.catch(g=>{throw g instanceof k.ZR&&function gh(_,h){var g,w;const A=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new mh(_,function Rn(_,h){var g;const w=(0,k.m9)(_),A=h;return B(h.customData.operationType,w,"argument-error"),B(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Qu._fromError(w,A)}(_,h));else if(A){const P=ml(h),q=h;P&&(q.credential=P,q.tenantId=A.tenantId||void 0,q.email=A.email||void 0,q.phoneNumber=A.phoneNumber||void 0)}}(_,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:ph(g),additionalUserInfo:Ku(g),user:hs.getOrCreate(A)}})}function Vi(_,h){return yl.apply(this,arguments)}function yl(){return(yl=(0,m.Z)(function*(_,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>nr(_,g.confirm(w))}})).apply(this,arguments)}class mh{constructor(h,g){this.resolver=g,this.auth=function ip(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return nr(rp(this.auth),this.resolver.resolveSignIn(h))}}class hs{constructor(h){this._delegate=h,this.multiFactor=function Uo(_){const h=(0,k.m9)(_);return ao.has(h)||ao.set(h,Ff._fromUser(h)),ao.get(h)}(h)}static getOrCreate(h){return hs.USER_MAP.has(h)||hs.USER_MAP.set(h,new hs(h)),hs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,m.Z)(function*(){return nr(g.auth,Uu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,m.Z)(function*(){return Vi(w.auth,function pr(_,h,g){return Je.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,m.Z)(function*(){return nr(g.auth,function qa(_,h,g){return fi.apply(this,arguments)}(g._delegate,h,Di))})()}linkWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield na(Dn(g.auth)),function Q(_,h,g){return function ie(_,h,g){return De.apply(this,arguments)}(_,h,g)}(g._delegate,h,Di)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,m.Z)(function*(){return nr(g.auth,Vu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Vi(this.auth,function In(_,h,g){return Li.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return nr(this.auth,function ce(_,h,g){return hi.apply(this,arguments)}(this._delegate,h,Di))}reauthenticateWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield na(Dn(g.auth)),function C(_,h,g){return function M(_,h,g){return F.apply(this,arguments)}(_,h,g)}(g._delegate,h,Di)})()}sendEmailVerification(h){return function hc(_,h){return Oa.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,m.Z)(function*(){return yield function Rr(_,h){return ku.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Ld(_,h){return io((0,k.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function ro(_,h){return io((0,k.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Pr(_,h){return qo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function gc(_,h){return mc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function fc(_,h,g){return zu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hs.USER_MAP=new WeakMap;const dn=B;let ra=(()=>{class _{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;dn(A,"invalid-api-key",{appName:g.name}),dn(A,"invalid-api-key",{appName:g.name});const P=typeof window<"u"?Di:void 0;this._delegate=w.initialize({options:{persistence:fs(A,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Au(_,h,g){const w=Dn(_);B(w._canInitEmulator,w,"emulator-config-failed"),B(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const A=!!g?.disableWarnings,P=Pi(h),{host:q,port:de}=function Gn(_){const h=Pi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const P=A[1];return{host:P,port:Ss(w.substr(P.length+1))}}{const[P,q]=w.split(":");return{host:P,port:Ss(q)}}}(h);w.config.emulator={url:`${P}//${q}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:de,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function As(){function _(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,w)}applyActionCode(g){return function ci(_,h){return Ma.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ra(this._delegate,g)}confirmPasswordReset(g,w){return function Hu(_,h,g){return Oo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,m.Z)(function*(){return nr(A._delegate,function Pa(_,h,g){return Mn.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Gu(_,h){return ka.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function os(_,h){return"EMAIL_SIGNIN"===Ru.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){dn(Oc(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(_,h){return Xe.apply(this,arguments)}(g._delegate,Di);return w?nr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ug(_,h){Dn(_)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:P,error:q,complete:de}=ia(g,w,A);return this._delegate.onAuthStateChanged(P,q,de)}onIdTokenChanged(g,w,A){const{next:P,error:q,complete:de}=ia(g,w,A);return this._delegate.onIdTokenChanged(P,q,de)}sendSignInLinkToEmail(g,w){return function cc(_,h,g){return no.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function ju(_,h,g){return xn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let A;switch(function $g(_,h){yo(Object.values(bi).includes(h),_,"invalid-persistence-type"),(0,k.b$)()?yo(h!==bi.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?yo(h===bi.NONE,_,"unsupported-persistence-type"):ea()?yo(h===bi.NONE||h===bi.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):yo(h===bi.NONE||kc(),_,"unsupported-persistence-type")}(w._delegate,g),g){case bi.SESSION:A=Oi;break;case bi.LOCAL:A=(yield re(Bo)._isAvailable())?Bo:Fa;break;case bi.NONE:A=V;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return nr(this._delegate,function Nf(_){return An.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return nr(this._delegate,Tn(this._delegate,g))}signInWithCustomToken(g){return nr(this._delegate,function ac(_,h){return xa.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return nr(this._delegate,function ki(_,h,g){return Tn((0,k.m9)(_),Ni.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return nr(this._delegate,function Sg(_,h,g){return Na.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Vi(this._delegate,function us(_,h,g){return rn.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return dn(Oc(),w._delegate,"operation-not-supported-in-this-environment"),nr(w._delegate,function Wd(_,h,g){return Wo.apply(this,arguments)}(w._delegate,g,Di))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return dn(Oc(),w._delegate,"operation-not-supported-in-this-environment"),yield na(w._delegate),function Bn(_,h,g){return function Vf(_,h,g){return D.apply(this,arguments)}(_,h,g)}(w._delegate,g,Di)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function lc(_,h){return Od.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=bi,_})();function ia(_,h,g){let w=_;"function"!=typeof _&&({next:w,error:h,complete:g}=_);const A=w;return{next:q=>A(q&&hs.getOrCreate(q)),error:h,complete:g}}function fs(_,h){const g=function gl(_,h){const g=eu();if(!g)return[];const w=K(np,_,h);switch(g.getItem(w)){case bi.NONE:return[V];case bi.LOCAL:return[Bo,Oi];case bi.SESSION:return[Oi];default:return[]}}(_,h);if(typeof self<"u"&&!g.includes(Bo)&&g.push(Bo),typeof window<"u")for(const w of[Fa,Oi])g.includes(w)||g.push(w);return g.includes(V)||g.push(V),g}class sp{constructor(){this.providerId="phone",this._delegate=new qn(rp(X.Z.auth()))}static credential(h,g){return qn.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}sp.PHONE_SIGN_IN_METHOD=qn.PHONE_SIGN_IN_METHOD,sp.PROVIDER_ID=qn.PROVIDER_ID;const jg=B;class Fw{constructor(h,g,w=X.Z.app()){var A;jg(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new hr(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function op(_){_.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new ra(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:Sa,GithubAuthProvider:sc,GoogleAuthProvider:Pu,OAuthProvider:eo,SAMLAuthProvider:ui,PhoneAuthProvider:sp,PhoneMultiFactorGenerator:kg,RecaptchaVerifier:Fw,TwitterAuthProvider:Kr,Auth:ra,AuthCredential:vr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(dt,Ae,L)=>{L.d(Ae,{y:()=>pe});var m=L(2961),X=L(727),k=L(8822),ae=L(9635),se=L(2416),fe=L(576),le=L(2806);let pe=(()=>{class Z{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ie=new Z;return Ie.source=this,Ie.operator=Me,Ie}subscribe(Me,Ie,st){const _e=function H(Z){return Z&&Z instanceof m.Lv||function j(Z){return Z&&(0,fe.m)(Z.next)&&(0,fe.m)(Z.error)&&(0,fe.m)(Z.complete)}(Z)&&(0,X.Nn)(Z)}(Me)?Me:new m.Hp(Me,Ie,st);return(0,le.x)(()=>{const{operator:me,source:nt}=this;_e.add(me?me.call(_e,nt):nt?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ie){Me.error(Ie)}}forEach(Me,Ie){return new(Ie=ge(Ie))((st,_e)=>{const me=new m.Hp({next:nt=>{try{Me(nt)}catch(lt){_e(lt),me.unsubscribe()}},error:_e,complete:st});this.subscribe(me)})}_subscribe(Me){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Me)}[k.L](){return this}pipe(...Me){return(0,ae.U)(Me)(this)}toPromise(Me){return new(Me=ge(Me))((Ie,st)=>{let _e;this.subscribe(me=>_e=me,me=>st(me),()=>Ie(_e))})}}return Z.create=Le=>new Z(Le),Z})();function ge(Z){var Le;return null!==(Le=Z??se.v.Promise)&&void 0!==Le?Le:Promise}},7579:(dt,Ae,L)=>{L.d(Ae,{x:()=>le});var m=L(9751),X=L(727);const ae=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),fe=L(2806);let le=(()=>{class ge extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Z=new pe(this,this);return Z.operator=H,Z}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(H)}})}error(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Z}=this;for(;Z.length;)Z.shift().error(H)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Z,isStopped:Le,observers:Me}=this;return Z||Le?X.Lc:(this.currentObservers=null,Me.push(H),new X.w0(()=>{this.currentObservers=null,(0,se.P)(Me,H)}))}_checkFinalizedStatuses(H){const{hasError:Z,thrownError:Le,isStopped:Me}=this;Z?H.error(Le):Me&&H.complete()}asObservable(){const H=new m.y;return H.source=this,H}}return ge.create=(j,H)=>new pe(j,H),ge})();class pe extends le{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,Z;null===(Z=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Z||Z.call(H,j)}error(j){var H,Z;null===(Z=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Z||Z.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,Z;return null!==(Z=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==Z?Z:X.Lc}}},2961:(dt,Ae,L)=>{L.d(Ae,{Hp:()=>st,Lv:()=>Z});var m=L(576),X=L(727),k=L(2416),ae=L(7849);function se(){}const fe=ge("C",void 0,void 0);function ge(xe,ve,be){return{kind:xe,value:ve,error:be}}var j=L(3410),H=L(2806);class Z extends X.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,X.Nn)(ve)&&ve.add(this)):this.destination=lt}static create(ve,be,Ve){return new st(ve,be,Ve)}next(ve){this.isStopped?nt(function pe(xe){return ge("N",xe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?nt(function le(xe){return ge("E",void 0,xe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?nt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(xe,ve){return Le.call(xe,ve)}class Ie{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:be}=this;if(be.next)try{be.next(ve)}catch(Ve){_e(Ve)}}error(ve){const{partialObserver:be}=this;if(be.error)try{be.error(ve)}catch(Ve){_e(Ve)}else _e(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(be){_e(be)}}}class st extends Z{constructor(ve,be,Ve){let $e;if(super(),(0,m.m)(ve)||!ve)$e={next:ve??void 0,error:be??void 0,complete:Ve??void 0};else{let B;this&&k.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),$e={next:ve.next&&Me(ve.next,B),error:ve.error&&Me(ve.error,B),complete:ve.complete&&Me(ve.complete,B)}):$e=ve}this.destination=new Ie($e)}}function _e(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(xe):(0,ae.h)(xe)}function nt(xe,ve){const{onStoppedNotification:be}=k.v;be&&j.z.setTimeout(()=>be(xe,ve))}const lt={closed:!0,next:se,error:function me(xe){throw xe},complete:se}},727:(dt,Ae,L)=>{L.d(Ae,{Lc:()=>fe,w0:()=>se,Nn:()=>le});var m=L(576);const k=(0,L(3888).d)(ge=>function(H){ge(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Z,Le)=>`${Le+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=L(8737);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Me of H)Me.remove(this);else H.remove(this);const{initialTeardown:Z}=this;if((0,m.m)(Z))try{Z()}catch(Me){j=Me instanceof k?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{pe(Me)}catch(Ie){j=j??[],Ie instanceof k?j=[...j,...Ie.errors]:j.push(Ie)}}if(j)throw new k(j)}}add(j){var H;if(j&&j!==this)if(this.closed)pe(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ae.P)(H,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const ge=new se;return ge.closed=!0,ge})();const fe=se.EMPTY;function le(ge){return ge instanceof se||ge&&"closed"in ge&&(0,m.m)(ge.remove)&&(0,m.m)(ge.add)&&(0,m.m)(ge.unsubscribe)}function pe(ge){(0,m.m)(ge)?ge():ge.unsubscribe()}},2416:(dt,Ae,L)=>{L.d(Ae,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Ae,L)=>{L.d(Ae,{E:()=>X});const X=new(L(9751).y)(se=>se.complete())},8996:(dt,Ae,L)=>{L.d(Ae,{D:()=>ve});var m=L(8421),X=L(5363),k=L(9468),fe=L(9751),pe=L(2202),ge=L(576),j=L(9672);function Z(be,Ve){if(!be)throw new Error("Iterable cannot be null");return new fe.y($e=>{(0,j.f)($e,Ve,()=>{const B=be[Symbol.asyncIterator]();(0,j.f)($e,Ve,()=>{B.next().then(ye=>{ye.done?$e.complete():$e.next(ye.value)})},0,!0)})})}var Le=L(3670),Me=L(8239),Ie=L(1144),st=L(6495),_e=L(2206),me=L(4532),nt=L(3260);function ve(be,Ve){return Ve?function xe(be,Ve){if(null!=be){if((0,Le.c)(be))return function ae(be,Ve){return(0,m.Xf)(be).pipe((0,k.R)(Ve),(0,X.Q)(Ve))}(be,Ve);if((0,Ie.z)(be))return function le(be,Ve){return new fe.y($e=>{let B=0;return Ve.schedule(function(){B===be.length?$e.complete():($e.next(be[B++]),$e.closed||this.schedule())})})}(be,Ve);if((0,Me.t)(be))return function se(be,Ve){return(0,m.Xf)(be).pipe((0,k.R)(Ve),(0,X.Q)(Ve))}(be,Ve);if((0,_e.D)(be))return Z(be,Ve);if((0,st.T)(be))return function H(be,Ve){return new fe.y($e=>{let B;return(0,j.f)($e,Ve,()=>{B=be[pe.h](),(0,j.f)($e,Ve,()=>{let ye,W;try{({value:ye,done:W}=B.next())}catch(J){return void $e.error(J)}W?$e.complete():$e.next(ye)},0,!0)}),()=>(0,ge.m)(B?.return)&&B.return()})}(be,Ve);if((0,nt.L)(be))return function lt(be,Ve){return Z((0,nt.Q)(be),Ve)}(be,Ve)}throw(0,me.z)(be)}(be,Ve):(0,m.Xf)(be)}},8421:(dt,Ae,L)=>{L.d(Ae,{Xf:()=>Le});var m=L(655),X=L(1144),k=L(8239),ae=L(9751),se=L(3670),fe=L(2206),le=L(4532),pe=L(6495),ge=L(3260),j=L(576),H=L(7849),Z=L(8822);function Le(xe){if(xe instanceof ae.y)return xe;if(null!=xe){if((0,se.c)(xe))return function Me(xe){return new ae.y(ve=>{const be=xe[Z.L]();if((0,j.m)(be.subscribe))return be.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,X.z)(xe))return function Ie(xe){return new ae.y(ve=>{for(let be=0;be<xe.length&&!ve.closed;be++)ve.next(xe[be]);ve.complete()})}(xe);if((0,k.t)(xe))return function st(xe){return new ae.y(ve=>{xe.then(be=>{ve.closed||(ve.next(be),ve.complete())},be=>ve.error(be)).then(null,H.h)})}(xe);if((0,fe.D)(xe))return me(xe);if((0,pe.T)(xe))return function _e(xe){return new ae.y(ve=>{for(const be of xe)if(ve.next(be),ve.closed)return;ve.complete()})}(xe);if((0,ge.L)(xe))return function nt(xe){return me((0,ge.Q)(xe))}(xe)}throw(0,le.z)(xe)}function me(xe){return new ae.y(ve=>{(function lt(xe,ve){var be,Ve,$e,B;return(0,m.mG)(this,void 0,void 0,function*(){try{for(be=(0,m.KL)(xe);!(Ve=yield be.next()).done;)if(ve.next(Ve.value),ve.closed)return}catch(ye){$e={error:ye}}finally{try{Ve&&!Ve.done&&(B=be.return)&&(yield B.call(be))}finally{if($e)throw $e.error}}ve.complete()})})(xe,ve).catch(be=>ve.error(be))})}},6451:(dt,Ae,L)=>{L.d(Ae,{T:()=>fe});var m=L(8189),X=L(8421),k=L(515),ae=L(7669),se=L(8996);function fe(...le){const pe=(0,ae.yG)(le),ge=(0,ae._6)(le,1/0),j=le;return j.length?1===j.length?(0,X.Xf)(j[0]):(0,m.J)(ge)((0,se.D)(j,pe)):k.E}},5403:(dt,Ae,L)=>{L.d(Ae,{x:()=>X});var m=L(2961);function X(ae,se,fe,le,pe){return new k(ae,se,fe,le,pe)}class k extends m.Lv{constructor(se,fe,le,pe,ge,j){super(se),this.onFinalize=ge,this.shouldUnsubscribe=j,this._next=fe?function(H){try{fe(H)}catch(Z){se.error(Z)}}:super._next,this._error=pe?function(H){try{pe(H)}catch(Z){se.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(dt,Ae,L)=>{L.d(Ae,{U:()=>k});var m=L(4482),X=L(5403);function k(ae,se){return(0,m.e)((fe,le)=>{let pe=0;fe.subscribe((0,X.x)(le,ge=>{le.next(ae.call(se,ge,pe++))}))})}},8189:(dt,Ae,L)=>{L.d(Ae,{J:()=>k});var m=L(5577),X=L(4671);function k(ae=1/0){return(0,m.z)(X.y,ae)}},5577:(dt,Ae,L)=>{L.d(Ae,{z:()=>pe});var m=L(4004),X=L(8421),k=L(4482),ae=L(9672),se=L(5403),le=L(576);function pe(ge,j,H=1/0){return(0,le.m)(j)?pe((Z,Le)=>(0,m.U)((Me,Ie)=>j(Z,Me,Le,Ie))((0,X.Xf)(ge(Z,Le))),H):("number"==typeof j&&(H=j),(0,k.e)((Z,Le)=>function fe(ge,j,H,Z,Le,Me,Ie,st){const _e=[];let me=0,nt=0,lt=!1;const xe=()=>{lt&&!_e.length&&!me&&j.complete()},ve=Ve=>me<Z?be(Ve):_e.push(Ve),be=Ve=>{Me&&j.next(Ve),me++;let $e=!1;(0,X.Xf)(H(Ve,nt++)).subscribe((0,se.x)(j,B=>{Le?.(B),Me?ve(B):j.next(B)},()=>{$e=!0},void 0,()=>{if($e)try{for(me--;_e.length&&me<Z;){const B=_e.shift();Ie?(0,ae.f)(j,Ie,()=>be(B)):be(B)}xe()}catch(B){j.error(B)}}))};return ge.subscribe((0,se.x)(j,ve,()=>{lt=!0,xe()})),()=>{st?.()}}(Z,Le,ge,H)))}},5363:(dt,Ae,L)=>{L.d(Ae,{Q:()=>ae});var m=L(9672),X=L(4482),k=L(5403);function ae(se,fe=0){return(0,X.e)((le,pe)=>{le.subscribe((0,k.x)(pe,ge=>(0,m.f)(pe,se,()=>pe.next(ge),fe),()=>(0,m.f)(pe,se,()=>pe.complete(),fe),ge=>(0,m.f)(pe,se,()=>pe.error(ge),fe)))})}},3099:(dt,Ae,L)=>{L.d(Ae,{B:()=>se});var m=L(8421),X=L(7579),k=L(2961),ae=L(4482);function se(le={}){const{connector:pe=(()=>new X.x),resetOnError:ge=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=le;return Z=>{let Le,Me,Ie,st=0,_e=!1,me=!1;const nt=()=>{Me?.unsubscribe(),Me=void 0},lt=()=>{nt(),Le=Ie=void 0,_e=me=!1},xe=()=>{const ve=Le;lt(),ve?.unsubscribe()};return(0,ae.e)((ve,be)=>{st++,!me&&!_e&&nt();const Ve=Ie=Ie??pe();be.add(()=>{st--,0===st&&!me&&!_e&&(Me=fe(xe,H))}),Ve.subscribe(be),!Le&&st>0&&(Le=new k.Hp({next:$e=>Ve.next($e),error:$e=>{me=!0,nt(),Me=fe(lt,ge,$e),Ve.error($e)},complete:()=>{_e=!0,nt(),Me=fe(lt,j),Ve.complete()}}),(0,m.Xf)(ve).subscribe(Le))})(Z)}}function fe(le,pe,...ge){if(!0===pe)return void le();if(!1===pe)return;const j=new k.Hp({next:()=>{j.unsubscribe(),le()}});return pe(...ge).subscribe(j)}},9468:(dt,Ae,L)=>{L.d(Ae,{R:()=>X});var m=L(4482);function X(k,ae=0){return(0,m.e)((se,fe)=>{fe.add(k.schedule(()=>se.subscribe(fe),ae))})}},8505:(dt,Ae,L)=>{L.d(Ae,{b:()=>se});var m=L(576),X=L(4482),k=L(5403),ae=L(4671);function se(fe,le,pe){const ge=(0,m.m)(fe)||le||pe?{next:fe,error:le,complete:pe}:fe;return ge?(0,X.e)((j,H)=>{var Z;null===(Z=ge.subscribe)||void 0===Z||Z.call(ge);let Le=!0;j.subscribe((0,k.x)(H,Me=>{var Ie;null===(Ie=ge.next)||void 0===Ie||Ie.call(ge,Me),H.next(Me)},()=>{var Me;Le=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),H.complete()},Me=>{var Ie;Le=!1,null===(Ie=ge.error)||void 0===Ie||Ie.call(ge,Me),H.error(Me)},()=>{var Me,Ie;Le&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(Ie=ge.finalize)||void 0===Ie||Ie.call(ge)}))}):ae.y}},4408:(dt,Ae,L)=>{L.d(Ae,{o:()=>se});var m=L(727);class X extends m.w0{constructor(le,pe){super()}schedule(le,pe=0){return this}}const k={setInterval(fe,le,...pe){const{delegate:ge}=k;return ge?.setInterval?ge.setInterval(fe,le,...pe):setInterval(fe,le,...pe)},clearInterval(fe){const{delegate:le}=k;return(le?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=L(8737);class se extends X{constructor(le,pe){super(le,pe),this.scheduler=le,this.work=pe,this.pending=!1}schedule(le,pe=0){var ge;if(this.closed)return this;this.state=le;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,pe)),this.pending=!0,this.delay=pe,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(H,this.id,pe),this}requestAsyncId(le,pe,ge=0){return k.setInterval(le.flush.bind(le,this),ge)}recycleAsyncId(le,pe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return pe;null!=pe&&k.clearInterval(pe)}execute(le,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(le,pe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,pe){let j,ge=!1;try{this.work(le)}catch(H){ge=!0,j=H||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:le,scheduler:pe}=this,{actions:ge}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ge,this),null!=le&&(this.id=this.recycleAsyncId(pe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Ae,L)=>{L.d(Ae,{v:()=>k});var m=L(6063);class X{constructor(se,fe=X.now){this.schedulerActionCtor=se,this.now=fe}schedule(se,fe=0,le){return new this.schedulerActionCtor(this,se).schedule(le,fe)}}X.now=m.l.now;class k extends X{constructor(se,fe=X.now){super(se,fe),this.actions=[],this._active=!1}flush(se){const{actions:fe}=this;if(this._active)return void fe.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=fe.shift());if(this._active=!1,le){for(;se=fe.shift();)se.unsubscribe();throw le}}}},4986:(dt,Ae,L)=>{L.d(Ae,{z:()=>k});var m=L(4408);const k=new(L(7565).v)(m.o)},6063:(dt,Ae,L)=>{L.d(Ae,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(dt,Ae,L)=>{L.d(Ae,{z:()=>m});const m={setTimeout(X,k,...ae){const{delegate:se}=m;return se?.setTimeout?se.setTimeout(X,k,...ae):setTimeout(X,k,...ae)},clearTimeout(X){const{delegate:k}=m;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(dt,Ae,L)=>{L.d(Ae,{h:()=>X});const X=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Ae,L)=>{L.d(Ae,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Ae,L)=>{L.d(Ae,{_6:()=>fe,jO:()=>ae,yG:()=>se});var m=L(576);function k(le){return le[le.length-1]}function ae(le){return(0,m.m)(k(le))?le.pop():void 0}function se(le){return function X(le){return le&&(0,m.m)(le.schedule)}(k(le))?le.pop():void 0}function fe(le,pe){return"number"==typeof k(le)?le.pop():pe}},8737:(dt,Ae,L)=>{function m(X,k){if(X){const ae=X.indexOf(k);0<=ae&&X.splice(ae,1)}}L.d(Ae,{P:()=>m})},3888:(dt,Ae,L)=>{function m(X){const ae=X(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Ae,{d:()=>m})},2806:(dt,Ae,L)=>{L.d(Ae,{O:()=>ae,x:()=>k});var m=L(2416);let X=null;function k(se){if(m.v.useDeprecatedSynchronousErrorHandling){const fe=!X;if(fe&&(X={errorThrown:!1,error:null}),se(),fe){const{errorThrown:le,error:pe}=X;if(X=null,le)throw pe}}else se()}function ae(se){m.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=se)}},9672:(dt,Ae,L)=>{function m(X,k,ae,se=0,fe=!1){const le=k.schedule(function(){ae(),fe?X.add(this.schedule(null,se)):this.unsubscribe()},se);if(X.add(le),!fe)return le}L.d(Ae,{f:()=>m})},4671:(dt,Ae,L)=>{function m(X){return X}L.d(Ae,{y:()=>m})},1144:(dt,Ae,L)=>{L.d(Ae,{z:()=>m});const m=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(dt,Ae,L)=>{L.d(Ae,{D:()=>X});var m=L(576);function X(k){return Symbol.asyncIterator&&(0,m.m)(k?.[Symbol.asyncIterator])}},576:(dt,Ae,L)=>{function m(X){return"function"==typeof X}L.d(Ae,{m:()=>m})},3670:(dt,Ae,L)=>{L.d(Ae,{c:()=>k});var m=L(8822),X=L(576);function k(ae){return(0,X.m)(ae[m.L])}},6495:(dt,Ae,L)=>{L.d(Ae,{T:()=>k});var m=L(2202),X=L(576);function k(ae){return(0,X.m)(ae?.[m.h])}},8239:(dt,Ae,L)=>{L.d(Ae,{t:()=>X});var m=L(576);function X(k){return(0,m.m)(k?.then)}},3260:(dt,Ae,L)=>{L.d(Ae,{L:()=>ae,Q:()=>k});var m=L(655),X=L(576);function k(se){return(0,m.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:pe,done:ge}=yield(0,m.qq)(le.read());if(ge)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(pe)}}finally{le.releaseLock()}})}function ae(se){return(0,X.m)(se?.getReader)}},4482:(dt,Ae,L)=>{L.d(Ae,{A:()=>X,e:()=>k});var m=L(576);function X(ae){return(0,m.m)(ae?.lift)}function k(ae){return se=>{if(X(se))return se.lift(function(fe){try{return ae(fe,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(dt,Ae,L)=>{L.d(Ae,{U:()=>k,z:()=>X});var m=L(4671);function X(...ae){return k(ae)}function k(ae){return 0===ae.length?m.y:1===ae.length?ae[0]:function(fe){return ae.reduce((le,pe)=>pe(le),fe)}}},7849:(dt,Ae,L)=>{L.d(Ae,{h:()=>k});var m=L(2416),X=L(3410);function k(ae){X.z.setTimeout(()=>{const{onUnhandledError:se}=m.v;if(!se)throw ae;se(ae)})}},4532:(dt,Ae,L)=>{function m(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ae,{z:()=>m})},655:(dt,Ae,L)=>{function ae(W,J){var re={};for(var te in W)Object.prototype.hasOwnProperty.call(W,te)&&J.indexOf(te)<0&&(re[te]=W[te]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(W);ke<te.length;ke++)J.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(W,te[ke])&&(re[te[ke]]=W[te[ke]])}return re}function pe(W,J,re,te){return new(re||(re=Promise))(function(Ne,ht){function tn(cn){try{Ze(te.next(cn))}catch(wn){ht(wn)}}function Ht(cn){try{Ze(te.throw(cn))}catch(wn){ht(wn)}}function Ze(cn){cn.done?Ne(cn.value):function ke(Ne){return Ne instanceof re?Ne:new re(function(ht){ht(Ne)})}(cn.value).then(tn,Ht)}Ze((te=te.apply(W,J||[])).next())})}function _e(W){return this instanceof _e?(this.v=W,this):new _e(W)}function me(W,J,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=re.apply(W,J||[]),Ne=[];return ke={},ht("next"),ht("throw"),ht("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ht(Yt){te[Yt]&&(ke[Yt]=function(nn){return new Promise(function(Fr,Ut){Ne.push([Yt,nn,Fr,Ut])>1||tn(Yt,nn)})})}function tn(Yt,nn){try{!function Ht(Yt){Yt.value instanceof _e?Promise.resolve(Yt.value.v).then(Ze,cn):wn(Ne[0][2],Yt)}(te[Yt](nn))}catch(Fr){wn(Ne[0][3],Fr)}}function Ze(Yt){tn("next",Yt)}function cn(Yt){tn("throw",Yt)}function wn(Yt,nn){Yt(nn),Ne.shift(),Ne.length&&tn(Ne[0][0],Ne[0][1])}}function lt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,J=W[Symbol.asyncIterator];return J?J.call(W):(W=function Z(W){var J="function"==typeof Symbol&&Symbol.iterator,re=J&&W[J],te=0;if(re)return re.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&te>=W.length&&(W=void 0),{value:W&&W[te++],done:!W}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),re={},te("next"),te("throw"),te("return"),re[Symbol.asyncIterator]=function(){return this},re);function te(Ne){re[Ne]=W[Ne]&&function(ht){return new Promise(function(tn,Ht){!function ke(Ne,ht,tn,Ht){Promise.resolve(Ht).then(function(Ze){Ne({value:Ze,done:tn})},ht)}(tn,Ht,(ht=W[Ne](ht)).done,ht.value)})}}}L.d(Ae,{FC:()=>me,KL:()=>lt,_T:()=>ae,mG:()=>pe,qq:()=>_e})},4650:(dt,Ae,L)=>{L.d(Ae,{$8M:()=>ol,$Z:()=>Mh,AFp:()=>bC,ALo:()=>b0,AaK:()=>pe,BQk:()=>ha,CHM:()=>$u,CRH:()=>M0,CZH:()=>ff,CqO:()=>Up,D6c:()=>aw,DdM:()=>Xp,EJc:()=>ZA,EpF:()=>xE,F4k:()=>Sm,FYo:()=>A_,FiY:()=>Be,G48:()=>JA,GfV:()=>Pn,JOm:()=>ds,KtG:()=>ju,LFG:()=>Bn,LSH:()=>Zg,Lbi:()=>TC,Lck:()=>p0,MAs:()=>Wh,MMx:()=>Qp,NdJ:()=>cv,OlP:()=>_n,Oqu:()=>bv,PXZ:()=>Ar,Q6J:()=>mu,QGY:()=>lv,QP$:()=>Jt,QbO:()=>CC,Qsj:()=>Bt,R0b:()=>ws,RDi:()=>_,Rgc:()=>ng,SBq:()=>yp,Sil:()=>V0,Suo:()=>VI,TTD:()=>ns,TgZ:()=>Tm,VKq:()=>xI,W1O:()=>lf,X6Q:()=>W0,XFs:()=>Ye,Xpm:()=>Ce,Xts:()=>Yg,Y36:()=>xh,YKP:()=>Jm,YNc:()=>sv,Yjl:()=>Ee,Yz7:()=>nn,Z0I:()=>Ji,ZZ4:()=>Py,_UZ:()=>av,_Vd:()=>mp,_c5:()=>ow,_uU:()=>Iv,aQg:()=>sw,c2e:()=>SC,cJS:()=>Ut,cg1:()=>ud,dDg:()=>mf,dqk:()=>un,eFA:()=>ub,eoX:()=>Hl,f3M:()=>D,g9A:()=>Du,h0i:()=>$l,hGG:()=>mb,iGM:()=>rg,ifc:()=>ct,ip1:()=>yd,jDz:()=>y0,kL8:()=>Ov,lG2:()=>K,lcZ:()=>oy,lqb:()=>Bi,lri:()=>sb,oAB:()=>$t,oxw:()=>fv,q4F:()=>Mt,qLn:()=>He,qZA:()=>Cm,rWj:()=>Ty,sBO:()=>ex,sIi:()=>kp,s_b:()=>ly,soG:()=>Ey,tb:()=>eb,tp0:()=>Ct,uIk:()=>Lp,vHH:()=>Ie,vpe:()=>ga,wAp:()=>mt,xp6:()=>vn,ynx:()=>da,z2F:()=>_f,zSh:()=>Eh,zs3:()=>Gc});var m=L(7579),X=L(727),k=L(9751),ae=L(6451),se=L(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=fe({__forward_ref__:fe});function H(s){return s.__forward_ref__=H,s.toString=function(){return pe(this())},s}function Z(s){return function Le(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}(s)?s():s}class Ie extends Error{constructor(o,a){super(function st(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new Ie(-201,!1)}function Ht(s,o){null==s&&function Ze(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ut(s){return{providers:s.providers||[],imports:s.imports||[]}}function fn(s){return _i(s,vi)||_i(s,oi)}function Ji(s){return null!==fn(s)}function _i(s,o){return s.hasOwnProperty(o)?s[o]:null}function Qs(s){return s&&(s.hasOwnProperty(si)||s.hasOwnProperty(Da))?s[si]:null}const vi=fe({\u0275prov:fe}),si=fe({\u0275inj:fe}),oi=fe({ngInjectableDef:fe}),Da=fe({ngInjectorDef:fe});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let xr;function Qn(s){const o=xr;return xr=s,o}function ai(s,o,a){const l=fn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ye.Optional?null:void 0!==o?o:void ve(pe(s))}function Fn(s){return{toString:s}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),ct=(()=>{return(s=ct||(ct={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ct;var s})();const un=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qr={},Ot=[],Ts=fe({\u0275cmp:fe}),sn=fe({\u0275dir:fe}),Ri=fe({\u0275pipe:fe}),on=fe({\u0275mod:fe}),Yn=fe({\u0275fac:fe}),Vr=fe({__NG_ELEMENT_ID__:fe});let it=0;function Ce(s){return Fn(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ot,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ct.Emulated,id:"c"+it++,styles:s.styles||Ot,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,v=s.features;return d.inputs=V(s.inputs,l),d.outputs=V(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(At).filter(Tt):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(ft).filter(Tt):null,d})}function At(s){return Y(s)||ze(s)}function Tt(s){return null!==s}function $t(s){return Fn(()=>({type:s.type,bootstrap:s.bootstrap||Ot,declarations:s.declarations||Ot,imports:s.imports||Ot,exports:s.exports||Ot,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function V(s,o){if(null==s)return qr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const K=Ce;function Ee(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Y(s){return s[Ts]||null}function ze(s){return s[sn]||null}function ft(s){return s[Ri]||null}function Jt(s){const o=Y(s)||ze(s)||ft(s);return null!==o&&o.standalone}function gn(s,o){const a=s[on]||null;if(!a&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return a}function cr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Br(s){return Array.isArray(s)&&!0===s[1]}function Mu(s){return 0!=(8&s.flags)}function Ca(s){return 2==(2&s.flags)}function tc(s){return 1==(1&s.flags)}function Mr(s){return null!==s.template}function Sf(s){return 0!=(256&s[2])}function Ni(s,o){return s.hasOwnProperty(Yn)?s[Yn]:null}class ts{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ns(){return eo}function eo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Pu),Sa}function Sa(){const s=Rf(this),o=s?.current;if(o){const a=s.previous;if(a===qr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Pu(s,o,a,l){const d=Rf(s)||function Aa(s,o){return s[sc]=o}(s,{previous:qr,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[a],b=v[I];p[I]=new ts(b&&b.currentValue,o,v===qr),s[l]=o}ns.ngInherit=!0;const sc="__ngSimpleChanges__";function Rf(s){return s[sc]||null}function An(s){for(;Array.isArray(s);)s=s[0];return s}function Rr(s,o){return An(o[s.index])}function ko(s,o){return s.data[o]}function is(s,o){return s[o]}function Wt(s,o){const a=o[s];return cr(a)?a:a[0]}function to(s){return 64==(64&s[2])}function Ei(s,o){return null==o?null:s[o]}function Fu(s){s[18]=0}function Tn(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Nt={lFrame:gc(null),bindingsEnabled:!0};function ss(){return Nt.bindingsEnabled}function Te(){return Nt.lFrame.lView}function zt(){return Nt.lFrame.tView}function $u(s){return Nt.lFrame.contextLView=s,s[8]}function ju(s){return Nt.lFrame.contextLView=null,s}function xn(){let s=Hu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Hu(){return Nt.lFrame.currentTNode}function ci(s,o){const a=Nt.lFrame;a.currentTNode=s,a.isParent=o}function Ma(){return Nt.lFrame.isParent}function Ra(){Nt.lFrame.isParent=!1}function Mn(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function no(){return Nt.lFrame.bindingIndex++}function Ag(s,o){const a=Nt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Gu(o)}function Gu(s){Nt.lFrame.currentDirectiveIndex=s}function hc(){return Nt.lFrame.currentQueryIndex}function Oa(s){Nt.lFrame.currentQueryIndex=s}function fc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function zu(s,o,a){if(a&Ye.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&Ye.Host||(d=fc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const l=Nt.lFrame=pc();return l.currentTNode=o,l.lView=s,!0}function qu(s){const o=pc(),a=s[1];Nt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function pc(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?gc(s):o}function gc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function mc(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ld=mc;function ro(){const s=mc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function er(){return Nt.lFrame.selectedIndex}function Zr(s){Nt.lFrame.selectedIndex=s}function yn(){const s=Nt.lFrame;return ko(s.tView,s.selectedIndex)}function Zu(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),I&&((s.contentHooks||(s.contentHooks=[])).push(a,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function so(s,o,a){Fo(s,o,3,a)}function Lo(s,o,a,l){(3&s[2])===a&&Fo(s,o,a,l)}function Vd(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Fo(s,o,a,l){const p=l??-1,v=o.length-1;let I=0;for(let b=void 0!==l?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[18]+=65536),(I<p||-1==p)&&(Bd(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Bd(s,o,a,l){const d=a[l]<0,p=a[l+1],I=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Ns{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Uo(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],v=a[l++],I=a[l++];s.setAttribute(o,v,I,p)}else{const p=d,v=a[++l];Xu(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),l++}}return l}function uo(s){return 3===s||4===s||6===s}function Xu(s){return 64===s.charCodeAt(0)}function La(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||jd(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function jd(s,o,a,l,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function Hd(s){return-1!==s}function dr(s){return 32767&s}function Ua(s,o){let a=function Fa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Oi=!0;function Va(s){const o=Oi;return Oi=s,o}let Vn=0;const Ii={};function lo(s,o){const a=tl(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,$a(l.data,s),$a(o,null),$a(l.blueprint,null));const d=nl(s,o),p=s.injectorIndex;if(Hd(d)){const v=dr(d),I=Ua(d,o),b=I[1].data;for(let S=0;S<8;S++)o[p+S]=I[v+S]|b[v+S]}return o[p+8]=d,p}function $a(s,o){s.push(0,0,0,0,0,0,0,0,o)}function tl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function nl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=$o(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ks(s,o,a){!function el(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Vr)&&(l=a[Vr]),null==l&&(l=a[Vr]=Vn++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Os(s,o,a){if(a&Ye.Optional||void 0!==s)return s;ve()}function rl(s,o,a,l){if(a&Ye.Optional&&void 0===l&&(l=null),0==(a&(Ye.Self|Ye.Host))){const d=s[9],p=Qn(void 0);try{return d?d.get(o,l,a&Ye.Optional):ai(o,l,a&Ye.Optional)}finally{Qn(p)}}return Os(l,0,a)}function co(s,o,a,l=Ye.Default,d){if(null!==s){if(1024&o[2]){const v=function Bo(s,o,a,l,d){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=ja(p,v,a,l|Ye.Self,Ii);if(I!==Ii)return I;let b=p.parent;if(!b){const S=v[21];if(S){const R=S.get(a,Ii,l);if(R!==Ii)return R}b=$o(v),v=v[15]}p=b}return d}(s,o,a,l,Ii);if(v!==Ii)return v}const p=ja(s,o,a,l,Ii);if(p!==Ii)return p}return rl(o,a,l,d)}function ja(s,o,a,l,d){const p=function wc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Vr)?s[Vr]:void 0;return"number"==typeof o?o>=0?255&o:Ec:o}(a);if("function"==typeof p){if(!zu(o,s,l))return l&Ye.Host?Os(d,0,l):rl(o,a,l,d);try{const v=p(l);if(null!=v||l&Ye.Optional)return v;ve()}finally{Ld()}}else if("number"==typeof p){let v=null,I=tl(s,o),b=-1,S=l&Ye.Host?o[16][6]:null;for((-1===I||l&Ye.SkipSelf)&&(b=-1===I?nl(s,o):o[I+8],-1!==b&&Ha(l,!1)?(v=o[1],I=dr(b),o=Ua(b,o)):I=-1);-1!==I;){const R=o[1];if(il(p,I,R.data)){const O=qd(I,o,a,v,l,S);if(O!==Ii)return O}b=o[I+8],-1!==b&&Ha(l,o[1].data[I+8]===S)&&il(p,I,o)?(v=R,I=dr(b),o=Ua(b,o)):I=-1}}return d}function qd(s,o,a,l,d,p){const v=o[1],I=v.data[s+8],R=Vo(I,v,a,null==l?Ca(I)&&Oi:l!=v&&0!=(3&I.type),d&Ye.Host&&p===I);return null!==R?as(o,v,R,I):Ii}function Vo(s,o,a,l,d){const p=s.providerIndexes,v=o.data,I=1048575&p,b=s.directiveStart,R=p>>20,z=d?I+R:s.directiveEnd;for(let ee=l?I:I+R;ee<z;ee++){const we=v[ee];if(ee<b&&a===we||ee>=b&&we.type===a)return ee}if(d){const ee=v[b];if(ee&&Mr(ee)&&ee.type===a)return b}return null}function as(s,o,a,l){let d=s[a];const p=o.data;if(function oo(s){return s instanceof Ns}(d)){const v=d;v.resolving&&function nt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${a}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}(p[a]));const I=Va(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Qn(v.injectImpl):null;zu(s,l,Ye.Default);try{d=s[a]=v.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Ud(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=eo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==b&&Qn(b),Va(I),v.resolving=!1,Ld()}}return d}function il(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ha(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class ho{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return co(this._tNode,this._lView,o,l,a)}}function Ec(){return new ho(xn(),Te())}function $o(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function ol(s){return function zd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(uo(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(xn(),s)}const Fs="__parameters__";function Go(s,o,a){return Fn(()=>{const l=function al(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,S,R){const O=b.hasOwnProperty(Fs)?b[Fs]:Object.defineProperty(b,Fs,{value:[]})[Fs];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(v),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class _n{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=nn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),pr(l,o)):o!==s&&o.push(l)}return o}function Je(s,o){s.forEach(a=>Array.isArray(a)?Je(a,o):o(a))}function In(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Li(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const tr={},ot="__NG_DI_FLAG__",Ko="ngTempTokenPath",Zo=/\n/gm,Qo="__source";let Yo;function Fi(s){const o=Yo;return Yo=s,o}function Kd(s,o=Ye.Default){if(void 0===Yo)throw new Ie(-203,!1);return null===Yo?ai(s,void 0,o):Yo.get(s,o&Ye.Optional?null:void 0,o)}function Bn(s,o=Ye.Default){return(function Ds(){return xr}()||Kd)(Z(s),o)}function D(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Bn(s,o)}function C(s){const o=[];for(let a=0;a<s.length;a++){const l=Z(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ie(900,!1);let d,p=Ye.Default;for(let v=0;v<l.length;v++){const I=l[v],b=F(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push(Bn(d,p))}else o.push(Bn(l))}return o}function M(s,o){return s[ot]=o,s.prototype[ot]=o,s}function F(s){return s[ot]}const Be=M(Go("Optional"),8),Ct=M(Go("SkipSelf"),4);var ds=(()=>((ds=ds||{})[ds.Important=1]="Important",ds[ds.DashCase=2]="DashCase",ds))();const cl=new Map;let ih=0;const mo="__ngContext__";function jr(s,o){cr(o)?(s[mo]=o[20],function Er(s){cl.set(s[20],s)}(o)):s[mo]=o}function uh(s,o){return undefined(s,o)}function Qa(s){const o=s[3];return Br(o)?o[3]:o}function Mc(s){return Xo(s[13])}function Rc(s){return Xo(s[4])}function Xo(s){for(;null!==s&&!Br(s);)s=s[4];return s}function Ui(s,o,a,l,d){if(null!=l){let p,v=!1;Br(l)?p=l:cr(l)&&(v=!0,l=l[0]);const I=An(l);0===s&&null!==a?null==d?fh(o,a,I):ta(o,a,I,d||null,!0):1===s&&null!==a?ta(o,a,I,d||null,!0):2===s?function ph(s,o,a){const l=yo(s,o);l&&function tp(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function yl(s,o,a,l,d){const p=a[7];p!==An(a)&&Ui(o,s,l,p,d);for(let I=10;I<a.length;I++){const b=a[I];ml(b[1],b,s,o,l,p)}}(o,s,p,a,d)}}function br(s,o,a){return s.createElement(o,a)}function dh(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Tn(d,-1)),a.splice(l,1)}function Ja(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&dh(d,l),o>0&&(s[a-1][4]=l[4]);const p=Li(s,10+o);!function Ug(s,o){ml(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function hh(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ml(s,o,a,3,null,null),function Vg(s){let o=s[13];if(!o)return Nc(s[1],s);for(;o;){let a=null;if(cr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)cr(o)&&Nc(o[1],o),o=o[3];null===o&&(o=s),cr(o)&&Nc(o[1],o),a=o&&o[4]}o=a}}(o)}}function Nc(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function kc(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ns)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];try{b.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function ep(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],I="function"==typeof v?v(o):An(o[v]),b=l[d=a[p+2]],S=a[p+3];"boolean"==typeof S?I.removeEventListener(a[p],b,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Br(o[3])){a!==o[3]&&dh(a,o);const l=o[19];null!==l&&l.detachView(s)}!function sh(s){cl.delete(s[20])}(o)}}function ea(s,o,a){return function Oc(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===ct.None||d===ct.Emulated)return null}return Rr(l,a)}(s,o.parent,a)}function ta(s,o,a,l,d){s.insertBefore(o,a,l,d)}function fh(s,o,a){s.appendChild(o,a)}function Xa(s,o,a,l,d){null!==l?ta(s,o,a,l,d):fh(s,o,a)}function yo(s,o){return s.parentNode(o)}let op,Lc=function na(s,o,a){return 40&s.type?Rr(s,a):null};function Hs(s,o,a,l){const d=ea(s,l,o),p=o[11],I=function $g(s,o,a){return Lc(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)Xa(p,d,a[b],I,!1);else Xa(p,d,a,I,!1)}function Di(s,o){if(null!==o){const a=o.type;if(3&a)return Rr(o,s);if(4&a)return ip(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Di(s,l);{const d=s[o.index];return Br(d)?ip(-1,d):An(d)}}if(32&a)return uh(o,s)()||An(s[o.index]);{const l=rp(s,o);return null!==l?Array.isArray(l)?l[0]:Di(Qa(s[16]),l):Di(s,o.next)}}return null}function rp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ip(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Di(l,d)}return o[7]}function gh(s,o,a,l,d,p,v){for(;null!=a;){const I=l[a.index],b=a.type;if(v&&0===o&&(I&&jr(An(I),l),a.flags|=4),64!=(64&a.flags))if(8&b)gh(s,o,a.child,l,d,p,!1),Ui(o,s,d,I,p);else if(32&b){const S=uh(a,l);let R;for(;R=S();)Ui(o,s,d,R,p);Ui(o,s,d,I,p)}else 16&b?Vi(s,o,l,a,d,p):Ui(o,s,d,I,p);a=v?a.projectionNext:a.next}}function ml(s,o,a,l,d,p){gh(a,l,s.firstChild,o,d,p,!1)}function Vi(s,o,a,l,d,p){const v=a[16],b=v[6].projection[l.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Ui(o,s,d,b[S],p);else gh(s,o,b,v[3],d,p,!0)}function hs(s,o,a){s.setAttribute(o,"style",a)}function dn(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function _(s){op=s}class de{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const yh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Dr=(()=>((Dr=Dr||{})[Dr.NONE=0]="NONE",Dr[Dr.HTML=1]="HTML",Dr[Dr.STYLE=2]="STYLE",Dr[Dr.SCRIPT=3]="SCRIPT",Dr[Dr.URL=4]="URL",Dr[Dr.RESOURCE_URL=5]="RESOURCE_URL",Dr))();function Zg(s){const o=function wh(){const s=Te();return s&&s[12]}();return o?o.sanitize(Dr.URL,s)||"":function Gs(s,o){const a=function ap(s){return s instanceof de&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function ir(s){return s instanceof de?s.changingThisBreaksApplicationSecurity:s}(s):function nu(s){return(s=String(s)).match(yh)?s:"unsafe:"+s}(_e(s))}const Yg=new _n("ENVIRONMENT_INITIALIZER"),b_=new _n("INJECTOR",-1),D_=new _n("INJECTOR_DEF_TYPES");class pp{get(o,a=tr){if(a===tr){const l=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw l.name="NullInjectorError",l}return a}}function gs(...s){return{\u0275providers:T_(0,s)}}function T_(s,...o){const a=[],l=new Set;let d;return Je(o,p=>{const v=p;vl(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&C_(d,a),a}function C_(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Je(d,p=>{o.push(p)})}}function vl(s,o,a,l){if(!(s=Z(s)))return!1;let d=null,p=Qs(s);const v=!p&&Y(s);if(p||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(p=Qs(b),!p)return!1;d=b}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of b)vl(S,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let S;l.add(d);try{Je(p.imports,R=>{vl(R,o,a,l)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&C_(S,o)}if(!I){const S=Ni(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Ot},{provide:D_,useValue:d,multi:!0},{provide:Yg,useValue:()=>Bn(d),multi:!0})}const b=p.providers;null==b||I||Je(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}const ID=fe({provide:String,useValue:fe});function gp(s){return null!==s&&"object"==typeof s&&ID in s}function wl(s){return"function"==typeof s}const Eh=new _n("Set Injector scope."),Jg={},qw={};let Tr;function ru(){return void 0===Tr&&(Tr=new pp),Tr}class Bi{}class Xg extends Bi{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,he(o,v=>this.processProvider(v)),this.records.set(b_,Il(void 0,this)),d.has("environment")&&this.records.set(Bi,Il(void 0,this));const p=this.records.get(Eh);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(D_.multi,Ot,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Fi(this),l=Qn(void 0);try{return o()}finally{Fi(a),Qn(l)}}get(o,a=tr,l=Ye.Default){this.assertNotDestroyed();const d=Fi(this),p=Qn(void 0);try{if(!(l&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function DD(s){return"function"==typeof s||"object"==typeof s&&s instanceof _n}(o)&&fn(o);I=b&&this.injectableDefInScope(b)?Il(S_(o),Jg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&Ye.Self?ru():this.parent).get(o,a=l&Ye.Optional&&a===tr?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ko]=v[Ko]||[]).unshift(pe(o)),d)throw v;return function Q(s,o,a,l){const d=s[Ko];throw o[Qo]&&d.unshift(o[Qo]),s.message=function ie(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=pe(o);if(Array.isArray(o))d=o.map(pe).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Zo,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Ko]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Qn(p),Fi(d)}}resolveInjectorInitializers(){const o=Fi(this),a=Qn(void 0);try{const l=this.get(Yg.multi,Ot,Ye.Self);for(const d of l)d()}finally{Fi(o),Qn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(pe(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=wl(o=Z(o))?o:Z(o&&o.provide);const l=function gr(s){return gp(s)?Il(void 0,s.useValue):Il(function El(s,o,a){let l;if(wl(s)){const d=Z(s);return Ni(d)||S_(d)}if(gp(s))l=()=>Z(s.useValue);else if(function zw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...C(s.deps||[]));else if(function Gw(s){return!(!s||!s.useExisting)}(s))l=()=>Bn(Z(s.useExisting));else{const d=Z(s&&(s.useClass||s.provide));if(!function at(s){return!!s.deps}(s))return Ni(d)||S_(d);l=()=>new d(...C(s.deps))}return l}(s),Jg)}(o);if(wl(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Il(void 0,Jg,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Jg&&(a.value=qw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function kt(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function S_(s){const o=fn(s),a=null!==o?o.factory:Ni(s);if(null!==a)return a;if(s instanceof _n)throw new Ie(204,!1);if(s instanceof Function)return function Pe(s){const o=s.length;if(o>0)throw function Us(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function Ur(s){const o=s&&(s[vi]||s[oi]);if(o){const a=function zr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ie(204,!1)}function Il(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Ke(s){return!!s.\u0275providers}function he(s,o){for(const a of s)Array.isArray(a)?he(a,o):Ke(a)?he(a.\u0275providers,o):o(a)}class Cr{}class TD{resolveComponentFactory(o){throw function Ww(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let mp=(()=>{class s{}return s.NULL=new TD,s})();function CD(){return Uc(xn(),Te())}function Uc(s,o){return new yp(Rr(s,o))}let yp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=CD,s})();function EA(s){return s instanceof yp?s.nativeElement:s}class A_{}let Bt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Ih(){const s=Te(),a=Wt(xn().index,s);return(cr(a)?a:s)[11]}(),s})(),Zw=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class Pn{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Mt=new Pn("14.2.12"),Vc={};function $n(s){return s.ngOriginalError}class He{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&$n(o);for(;a&&$n(a);)a=$n(a);return a||null}}function oa(s){return s instanceof Function?s():s}function oe(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const zs="ng-template";function PD(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==oe(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function bh(s){return 4===s.type&&s.value!==zs}function bl(s,o,a){return o===(4!==s.type||a?s.value:zs)}function ND(s,o,a){let l=4;const d=s.attrs||[],p=function OD(s){for(let o=0;o<s.length;o++)if(uo(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&l){if(l=2|1&l,""!==b&&!bl(s,b,a)||""===b&&1===o.length){if(ei(l))return!1;v=!0}}else{const S=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!PD(s.attrs,S,a)){if(ei(l))return!1;v=!0}continue}const O=Yw(8&l?"class":b,d,bh(s),a);if(-1===O){if(ei(l))return!1;v=!0;continue}if(""!==S){let z;z=O>p?"":d[O+1].toLowerCase();const ee=8&l?z:null;if(ee&&-1!==oe(ee,S,0)||2&l&&S!==z){if(ei(l))return!1;v=!0}}}}else{if(!v&&!ei(l)&&!ei(b))return!1;if(v&&ei(b))continue;v=!1,l=b|1&l}}return ei(l)||v}function ei(s){return 0==(1&s)}function Yw(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function $i(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function nm(s,o,a=!1){for(let l=0;l<o.length;l++)if(ND(s,o[l],a))return!0;return!1}function Dl(s,o){return s?":not("+o.trim()+")":o}function Xw(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const I=s[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ei(v)&&(o+=Dl(p,d),d=""),l=v,p=p||!ei(l);a++}return""!==d&&(o+=Dl(p,d)),o}const gt={};function vn(s){P_(zt(),Te(),er()+s,!1)}function P_(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&so(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Lo(o,p,0,a)}Zr(a)}function N_(s,o=null,a=null,l){const d=Dh(s,o,a,l);return d.resolveInjectorInitializers(),d}function Dh(s,o=null,a=null,l,d=new Set){const p=[a||Ot,gs(s)];return l=l||("object"==typeof s?void 0:pe(s)),new Xg(p,o||ru(),l||null,d)}let Gc=(()=>{class s{static create(a,l){if(Array.isArray(a))return N_({name:""},l,a,"");{const d=a.name??"";return N_({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=tr,s.NULL=new pp,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>Bn(b_)}),s.__NG_ELEMENT_ID__=-1,s})();function xh(s,o=Ye.Default){const a=Te();return null===a?Bn(s,o):co(xn(),a,Z(s),o)}function Mh(){throw new Error("invalid")}function kn(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=s.data[p];Oa(d),v.contentQueries(2,o[p],p)}}}function Dp(s,o,a,l,d,p,v,I,b,S,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|l,(null!==R||s&&1024&s[2])&&(O[2]|=1024),Fu(O),O[3]=O[15]=s,O[8]=a,O[10]=v||s&&s[10],O[11]=I||s&&s[11],O[12]=b||s&&s[12]||null,O[9]=S||s&&s[9]||null,O[6]=p,O[20]=function Kf(){return ih++}(),O[21]=R,O[16]=2==o.type?s[16]:O,O}function Oh(s,o,a,l,d){let p=s.data[o];if(null===p)p=function Yc(s,o,a,l,d){const p=Hu(),v=Ma(),b=s.data[o]=function gE(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,a,l,d),function Sg(){return Nt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function Oo(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ci(p,!0),p}function Lh(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function dm(s,o,a){qu(o);try{const l=s.viewQuery;null!==l&&ym(1,l,a);const d=s.template;null!==d&&ua(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&kn(s,o),s.staticViewQueries&&ym(2,s.viewQuery,a);const p=s.components;null!==p&&function cm(s,o){for(let a=0;a<o.length;a++)IE(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,ro()}}function du(s,o,a,l){const d=o[2];if(128!=(128&d)){qu(o);try{Fu(o),function cc(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&ua(s,o,a,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&so(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Lo(o,S,0,null),Vd(o,0)}if(function JD(s){for(let o=Mc(s);null!==o;o=Rc(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(512&d[2])&&Tn(p,1),d[2]|=512}}}(o),function EE(s){for(let o=Mc(s);null!==o;o=Rc(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];to(l)&&du(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&kn(s,o),v){const S=s.contentCheckHooks;null!==S&&so(o,S)}else{const S=s.contentHooks;null!==S&&Lo(o,S,1),Vd(o,1)}!function zD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Zr(~d);else{const p=d,v=a[++l],I=a[++l];Ag(v,p),I(2,o[p])}}}finally{Zr(-1)}}(s,o);const I=s.components;null!==I&&function lm(s,o){for(let a=0;a<o.length;a++)Gr(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&ym(2,b,l),v){const S=s.viewCheckHooks;null!==S&&so(o,S)}else{const S=s.viewHooks;null!==S&&Lo(o,S,2),Vd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Tn(o[3],-1))}finally{ro()}}}function ua(s,o,a,l,d){const p=er(),v=2&l;try{Zr(-1),v&&o.length>22&&P_(s,o,22,!1),a(l,d)}finally{Zr(p)}}function Z_(s,o,a){if(Mu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function hm(s,o,a){!ss()||(function Gt(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||lo(a,o),jr(l,o);const v=a.initialInputs;for(let I=d;I<p;I++){const b=s.data[I],S=Mr(b);S&&ZD(o,a,b);const R=as(o,s,I,a);jr(R,o),null!==v&&QD(0,I-d,R,b,0,v),S&&(Wt(a.index,o)[8]=R)}}(s,o,a,Rr(a,o)),128==(128&a.flags)&&function KD(s,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,v=function dc(){return Nt.lFrame.currentDirectiveIndex}();try{Zr(p);for(let I=l;I<d;I++){const b=s.data[I],S=o[I];Gu(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Cp(b,S)}}finally{Zr(-1),Gu(v)}}(s,o,a))}function fm(s,o,a=Rr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],I=-1===v?a(o,s):s[v];s[d++]=I}}}function Jc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Tp(s,o,a,l,d,p,v,I,b,S){const R=22+l,O=R+d,z=function qD(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:gt);return a}(R,O),ee="function"==typeof S?S():S;return z[1]={type:s,blueprint:z,template:a,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function Q_(s,o,a,l){const d=X_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&bE(s).push(l,d.length-1))}function hu(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function mE(s,o){const l=o.directiveEnd,d=s.data,p=o.attrs,v=[];let I=null,b=null;for(let S=o.directiveStart;S<l;S++){const R=d[S],O=R.inputs,z=null===p||bh(o)?null:YD(O,p);v.push(z),I=hu(O,S,I),b=hu(R.outputs,S,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=b}function Fh(s,o){const a=Wt(o,s);16&a[2]||(a[2]|=32)}function Xc(s,o,a,l){let d=!1;if(ss()){const p=function Sp(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];nm(a,v.selectors,!1)&&(d||(d=[]),ks(lo(a,o),s,v.type),Mr(v)?(Uh(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,Y_(a,s.data.length,p.length);for(let R=0;R<p.length;R++){const O=p[R];O.providersResolver&&O.providersResolver(O)}let I=!1,b=!1,S=Lh(s,o,p.length,null);for(let R=0;R<p.length;R++){const O=p[R];a.mergedAttrs=La(a.mergedAttrs,O.hostAttrs),J_(s,a,o,S,O),wE(S,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const z=O.type.prototype;!I&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),I=!0),!b&&(z.ngOnChanges||z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),S++}mE(s,a)}v&&function pm(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ie(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=La(a.mergedAttrs,a.attrs),d}function vE(s,o,a,l,d,p){const v=p.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function WD(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=b&&I.push(b),I.push(l,d,v)}}function Cp(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Uh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function wE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Mr(o)&&(a[""]=s)}}function Y_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function J_(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=Ni(d.type)),v=new Ns(p,Mr(d),xh);s.blueprint[l]=v,a[l]=v,vE(s,o,0,l,Lh(s,a,d.hostVars,gt),d)}function ZD(s,o,a){const l=Rr(o,s),d=Jc(a),p=s[10],v=_s(s,Dp(s,d,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));s[o.index]=v}function wo(s,o,a,l,d,p){const v=Rr(s,o);!function gm(s,o,a,l,d,p,v){if(null==p)s.removeAttribute(o,d,a);else{const I=null==v?_e(p):v(p,l||"",d);s.setAttribute(o,d,I,a)}}(o[11],v,p,s.value,a,l,d)}function QD(s,o,a,l,d,p){const v=p[o];if(null!==v){const I=l.setInput;for(let b=0;b<v.length;){const S=v[b++],R=v[b++],O=v[b++];null!==I?l.setInput(a,O,S,R):a[R]=O}}}function YD(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Vh(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function Gr(s,o){const a=Wt(o,s);if(to(a)){const l=a[1];48&a[2]?du(l,a,l.template,a[8]):a[5]>0&&Ap(a)}}function Ap(s){for(let l=Mc(s);null!==l;l=Rc(l))for(let d=10;d<l.length;d++){const p=l[d];if(to(p))if(512&p[2]){const v=p[1];du(v,p,v.template,p[8])}else p[5]>0&&Ap(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Wt(a[l],s);to(d)&&d[5]>0&&Ap(d)}}function IE(s,o){const a=Wt(o,s),l=a[1];(function xp(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),dm(l,a,a[8])}function _s(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Mp(s){for(;s;){s[2]|=32;const o=Qa(s);if(Sf(s)&&!o)return s;s=o}return null}function Rp(s,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{du(s,o,s.template,a)}catch(v){throw l&&Bh(o,v),v}finally{d.end&&d.end()}}function ym(s,o,a){Oa(0),o(s,a)}function X_(s){return s[7]||(s[7]=[])}function bE(s){return s.cleanup||(s.cleanup=[])}function Bh(s,o){const a=s[9],l=a?a.get(He,null):null;l&&l.handleError(o)}function Pp(s,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],I=a[p++],b=o[v],S=s.data[v];null!==S.setInput?S.setInput(b,d,l,I):b[I]=d}}function pu(s,o,a){const l=function li(s,o){return An(o[s])}(o,s);!function pl(s,o,a){s.setValue(o,a)}(s[11],l,a)}function Np(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=ge(d,I):2==p&&(l=ge(l,I+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function $h(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(An(p)),Br(p))for(let I=10;I<p.length;I++){const b=p[I],S=b[1].firstChild;null!==S&&$h(b[1],b,S,l)}const v=a.type;if(8&v)$h(s,o,a.child,l);else if(32&v){const I=uh(a,o);let b;for(;b=I();)l.push(b)}else if(16&v){const I=rp(o,a);if(Array.isArray(I))l.push(...I);else{const b=Qa(o[16]);$h(b[1],b,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class jh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return $h(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Br(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ja(o,l),Li(a,l))}this._attachedToViewContainer=!1}hh(this._lView[1],this._lView)}onDestroy(o){Q_(this._lView[1],this._lView,null,o)}markForCheck(){Mp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Rp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ch(s,o){ml(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class eT extends jh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Rp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class _m extends mp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Y(o);return new la(a,this.ngModule)}}function TE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Hh{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Vc,l);return d!==Vc||a===Vc?d:this.parentInjector.get(o,a,l)}}class la extends Cr{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function sr(s){return s.map(Xw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return TE(this.componentDef.inputs)}get outputs(){return TE(this.componentDef.outputs)}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof Bi?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Hh(o,p):o,I=v.get(A_,null);if(null===I)throw new Ie(407,!1);const b=v.get(Zw,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=l?function an(s,o,a){return s.selectRootElement(o,a===ct.ShadowDom)}(S,l,this.componentDef.encapsulation):br(S,R,function tT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,ee=Tp(0,null,null,1,0,null,null,null,null,null),we=Dp(null,ee,null,z,null,null,I,S,b,v,null);let Oe,qe;qu(we);try{const ut=function Ti(s,o,a,l,d,p){const v=a[1];a[22]=s;const b=Oh(v,22,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(Np(b,S,!0),null!==s&&(Uo(d,s,S),null!==b.classes&&dn(d,s,b.classes),null!==b.styles&&hs(d,s,b.styles)));const R=l.createRenderer(s,o),O=Dp(a,Jc(o),null,o.onPush?32:16,a[22],b,l,R,p||null,null,null);return v.firstCreatePass&&(ks(lo(b,a),v,o.type),Uh(v,b),Y_(b,a.length,1)),_s(a,O),a[22]=O}(O,this.componentDef,we,I,S);if(O)if(l)Uo(S,O,["ng-version",Mt.full]);else{const{attrs:Dt,classes:Se}=function rm(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!ei(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Dt&&Uo(S,O,Dt),Se&&Se.length>0&&dn(S,O,Se.join(" "))}if(qe=ko(ee,22),void 0!==a){const Dt=qe.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Rt=a[Se];Dt.push(null!=Rt?Array.from(Rt):null)}}Oe=function sT(s,o,a,l){const d=a[1],p=function _E(s,o,a){const l=xn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),J_(s,l,o,Lh(s,o,1,null),a),mE(s,l));const d=as(o,s,l.directiveStart,l);jr(d,o);const p=Rr(l,o);return p&&jr(p,o),d}(d,a,o);if(s[8]=a[8]=p,null!==l)for(const I of l)I(p,o);if(o.contentQueries){const I=xn();o.contentQueries(1,p,I.directiveStart)}const v=xn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zr(v.index),vE(a[1],v,0,v.directiveStart,v.directiveEnd,o),Cp(o,p)),p}(ut,this.componentDef,we,[CE]),dm(ee,we,null)}finally{ro()}return new rT(this.componentType,Oe,Uc(qe,we),we,qe)}}class rT extends class Re{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new eT(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;Pp(p[1],p,d,o,a),Fh(p,this._tNode.index)}}get injector(){return new ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function CE(){const s=xn();Zu(Te()[1],s)}let Em=null;function ed(){if(!Em){const s=un.Symbol;if(s&&s.iterator)Em=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Em=l)}}}return Em}function kp(s){return!!tv(s)&&(Array.isArray(s)||!(s instanceof Map)&&ed()in s)}function tv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ca(s,o,a){return s[o]=a}function gi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Lp(s,o,a,l){const d=Te();return gi(d,no(),o)&&(zt(),wo(yn(),d,s,o,a,l)),Lp}function sv(s,o,a,l,d,p,v,I){const b=Te(),S=zt(),R=s+22,O=S.firstCreatePass?function SE(s,o,a,l,d,p,v,I,b){const S=o.consts,R=Oh(o,s,4,v||null,Ei(S,I));Xc(o,a,R,Ei(S,b)),Zu(o,R);const O=R.tViews=Tp(2,R,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,S,b,o,a,l,d,p,v):S.data[R];ci(O,!1);const z=b[11].createComment("");Hs(S,b,z,O),jr(z,b),_s(b,b[R]=Vh(z,b,z,O)),tc(O)&&hm(S,b,O),null!=v&&fm(b,O,I)}function Wh(s){return is(function lc(){return Nt.lFrame.contextLView}(),22+s)}function mu(s,o,a){const l=Te();return gi(l,no(),o)&&function Gi(s,o,a,l,d,p,v,I){const b=Rr(o,a);let R,S=o.inputs;!I&&null!=S&&(R=S[l])?(Pp(s,a,R,l,d),Ca(o)&&Fh(a,o.index)):3&o.type&&(l=function Hi(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,p.setProperty(b,l,d))}(zt(),yn(),l,s,o,l[11],a,!1),mu}function ov(s,o,a,l,d){const v=d?"class":"style";Pp(s,a,o.inputs[v],v,l)}function Tm(s,o,a,l){const d=Te(),p=zt(),v=22+s,I=d[11],b=d[v]=br(I,o,function Ku(){return Nt.lFrame.currentNamespace}()),S=p.firstCreatePass?function AE(s,o,a,l,d,p,v){const I=o.consts,S=Oh(o,s,2,d,Ei(I,p));return Xc(o,a,S,Ei(I,v)),null!==S.attrs&&Np(S,S.attrs,!1),null!==S.mergedAttrs&&Np(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,p,d,0,o,a,l):p.data[v];ci(S,!0);const R=S.mergedAttrs;null!==R&&Uo(I,b,R);const O=S.classes;null!==O&&dn(I,b,O);const z=S.styles;return null!==z&&hs(I,b,z),64!=(64&S.flags)&&Hs(p,d,b,S),0===function Vu(){return Nt.lFrame.elementDepthCount}()&&jr(b,d),function Bu(){Nt.lFrame.elementDepthCount++}(),tc(S)&&(hm(p,d,S),Z_(p,S,d)),null!==l&&fm(d,S),Tm}function Cm(){let s=xn();Ma()?Ra():(s=s.parent,ci(s,!1));const o=s;!function oc(){Nt.lFrame.elementDepthCount--}();const a=zt();return a.firstCreatePass&&(Zu(a,s),Mu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ju(s){return 0!=(16&s.flags)}(o)&&ov(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function $d(s){return 0!=(32&s.flags)}(o)&&ov(a,o,Te(),o.stylesWithoutHost,!1),Cm}function av(s,o,a,l){return Tm(s,o,a,l),Cm(),av}function da(s,o,a){const l=Te(),d=zt(),p=s+22,v=d.firstCreatePass?function Fp(s,o,a,l,d){const p=o.consts,v=Ei(p,l),I=Oh(o,s,8,"ng-container",v);return null!==v&&Np(I,v,!0),Xc(o,a,I,Ei(p,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(p,d,l,o,a):d.data[p];ci(v,!0);const I=l[p]=l[11].createComment("");return Hs(d,l,I,v),jr(I,l),tc(v)&&(hm(d,l,v),Z_(d,v,l)),null!=a&&fm(l,v),da}function ha(){let s=xn();const o=zt();return Ma()?Ra():(s=s.parent,ci(s,!1)),o.firstCreatePass&&(Zu(o,s),Mu(s)&&o.queries.elementEnd(s)),ha}function xE(){return Te()}function lv(s){return!!s&&"function"==typeof s.then}function Sm(s){return!!s&&"function"==typeof s.subscribe}const Up=Sm;function cv(s,o,a,l){const d=Te(),p=zt(),v=xn();return function Bp(s,o,a,l,d,p,v,I){const b=tc(l),R=s.firstCreatePass&&bE(s),O=o[8],z=X_(o);let ee=!0;if(3&l.type||I){const qe=Rr(l,o),ut=I?I(qe):qe,Dt=z.length,Se=I?hn=>I(An(hn[l.index])):l.index;let Rt=null;if(!I&&b&&(Rt=function Vp(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const I=o[7],b=d[p+2];return I.length>b?I[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,l.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=p,Rt.__ngLastListenerFn__=p,ee=!1;else{p=hv(l,o,O,p,!1);const hn=a.listen(ut,d,p);z.push(p,hn),R&&R.push(d,Se,Dt,Dt+1)}}else p=hv(l,o,O,p,!1);const we=l.outputs;let Oe;if(ee&&null!==we&&(Oe=we[d])){const qe=Oe.length;if(qe)for(let ut=0;ut<qe;ut+=2){const Sn=o[Oe[ut]][Oe[ut+1]].subscribe(p),vd=z.length;z.push(p,Sn),R&&R.push(d,l.index,vd,-(vd+1))}}}(p,d,d[11],v,s,o,0,l),cv}function Kh(s,o,a,l){try{return!1!==a(l)}catch(d){return Bh(s,d),!1}}function hv(s,o,a,l,d){return function p(v){if(v===Function)return l;Mp(2&s.flags?Wt(s.index,o):o);let b=Kh(o,0,l,v),S=p.__ngNextListenerFn__;for(;S;)b=Kh(o,0,S,v)&&b,S=S.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function fv(s=1){return function io(s){return(Nt.lFrame.contextLView=function Wu(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function Iv(s,o=""){const a=Te(),l=zt(),d=s+22,p=l.firstCreatePass?Oh(l,d,1,o,null):l.data[d],v=a[d]=function lh(s,o){return s.createText(o)}(a[11],o);Hs(l,a,v,p),ci(p,!1)}function bv(s){return Vl("",s,""),bv}function Vl(s,o,a){const l=Te(),d=function Rl(s,o,a,l){return gi(s,no(),a)?o+_e(a)+l:gt}(l,s,o,a);return d!==gt&&pu(l,er(),d),Vl}const Do=void 0;var Yh=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Nv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Bl={};function ud(s){const o=function oI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Vm(o);if(a)return a;const l=o.split("-")[0];if(a=Vm(l),a)return a;if("en"===l)return Yh;throw new Ie(701,!1)}function Ov(s){return ud(s)[mt.PluralCase]}function Vm(s){return s in Bl||(Bl[s]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[s]),Bl[s]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Jh="en-US";let Uv=Jh;class $l{}class Jm{}function p0(s,o){return new g0(s,o??null)}class g0 extends $l{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _m(this);const l=gn(o);this._bootstrapComponents=oa(l.bootstrap),this._r3Injector=Dh(o,a,[{provide:$l,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xm extends Jm{constructor(o){super(),this.moduleType=o}create(o){return new g0(this.moduleType,o)}}class QT extends $l{constructor(o,a,l){super(),this.componentFactoryResolver=new _m(this),this.instance=null;const d=new Xg([...o,{provide:$l,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],a||ru(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Qp(s,o,a=null){return new QT(s,o,a).injector}let m0=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=T_(0,a.type),d=l.length>0?Qp([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(Bn(Bi))}),s})();function y0(s){s.getStandaloneInjector=o=>o.get(m0).getOrCreateStandaloneInjector(s)}function Xp(s,o,a){const l=Mn()+s,d=Te();return d[l]===gt?ca(d,l,a?o.call(a):o()):function Gh(s,o){return s[o]}(d,l)}function xI(s,o,a,l){return ty(Te(),Mn(),s,o,a,l)}function ty(s,o,a,l,d,p){const v=o+a;return gi(s,v,d)?ca(s,v+1,p?l.call(p,d):l(d)):function af(s,o){const a=s[o];return a===gt?void 0:a}(s,v+1)}function b0(s,o){const a=zt();let l;const d=s+22;a.firstCreatePass?(l=function sy(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=Ni(l.type)),v=Qn(xh);try{const I=Va(!1),b=p();return Va(I),function Dm(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Te(),d,b),b}finally{Qn(v)}}function oy(s,o,a){const l=s+22,d=Te(),p=is(d,l);return function tg(s,o){return s[1].data[o].pure}(d,l)?ty(d,Mn(),o,p.transform,a,p):p.transform(a)}function ay(s){return o=>{setTimeout(s,void 0,o)}}const ga=class sC extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),v=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=ay(p),d&&(d=ay(d)),v&&(v=ay(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof X.w0&&o.add(I),I}};function NI(){return this._results[ed()]()}class T0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ed(),l=T0.prototype;l[a]||(l[a]=NI)}get changes(){return this._changes||(this._changes=new ga)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=pr(o);(this._changesDetected=!function rn(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ng=(()=>{class s{}return s.__NG_ELEMENT_ID__=C0,s})();const oC=ng,aC=class extends oC{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Dp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),dm(l,d,o),new jh(d)}};function C0(){return uy(xn(),Te())}function uy(s,o){return 4&s.type?new aC(o,s,Uc(s,o)):null}let ly=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ln,s})();function Ln(){return kI(xn(),Te())}const OA=ly,uC=class extends OA{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Uc(this._hostTNode,this._hostLView)}get injector(){return new ho(this._hostTNode,this._hostLView)}get parentInjector(){const o=nl(this._hostTNode,this._hostLView);if(Hd(o)){const a=Ua(o,this._hostLView),l=dr(o);return new ho(a[1].data[l+8],a)}return new ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ur(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(o,a,l,d,p){const v=o&&!function po(s){return"function"==typeof s}(o);let I;if(v)I=a;else{const O=a||{};I=O.index,l=O.injector,d=O.projectableNodes,p=O.environmentInjector||O.ngModuleRef}const b=v?o:new la(Y(o)),S=l||this.parentInjector;if(!p&&null==b.ngModule){const z=(v?S:this.parentInjector).get(Bi,null);z&&(p=z)}const R=b.create(S,d,void 0,p);return this.insert(R.hostView,I),R}insert(o,a){const l=o._lView,d=l[1];if(function Lu(s){return Br(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],z=new uC(O,O[6],O[3]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Ya(s,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],In(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Bg(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,l,v,p);const I=ip(p,v),b=l[11],S=yo(b,v[7]);return null!==S&&function Pc(s,o,a,l,d,p){l[0]=d,l[6]=o,ml(s,l,a,1,d,p)}(d,v[6],b,l,S,I),o.attachToViewContainerRef(),In(cy(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ur(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ja(this._lContainer,a);l&&(Li(cy(this._lContainer),a),hh(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ja(this._lContainer,a);return l&&null!=Li(cy(this._lContainer),a)?new jh(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function ur(s){return s[8]}function cy(s){return s[8]||(s[8]=[])}function kI(s,o){let a;const l=o[s.index];if(Br(l))a=l;else{let d;if(8&s.type)d=An(l);else{const p=o[11];d=p.createComment("");const v=Rr(s,o);ta(p,yo(p,v),d,function np(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=a=Vh(l,o,d,s),_s(o,a)}return new uC(a,s,o)}class S0{constructor(o){this.queryList=o,this.matches=null}clone(){return new S0(this.queryList)}setDirty(){this.queryList.setDirty()}}class A0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new A0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==sg(o,a).matches&&this.queries[a].setDirty()}}class LI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class FI{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new FI(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class x0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new x0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,cC(a,p)),this.matchTNodeWithReadOption(o,a,Vo(a,o,p,!1,!1))}else l===ng?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Vo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===yp||d===ly||d===ng&&4&a.type)this.addMatch(a.index,-2);else{const p=Vo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function cC(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ma(s,o,a,l){return-1===a?function UI(s,o){return 11&s.type?Uc(s,o):4&s.type?uy(s,o):null}(o,s):-2===a?function wu(s,o,a){return a===yp?Uc(o,s):a===ng?uy(o,s):a===ly?kI(o,s):void 0}(s,o,l):as(s,s[1],a,o)}function dC(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=s.data,v=a.matches,I=[];for(let b=0;b<v.length;b+=2){const S=v[b];I.push(S<0?null:ma(o,p[S],v[b+1],a.metadata.read))}d.matches=I}return d.matches}function Eu(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const v=dC(s,o,d,a);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)l.push(v[I/2]);else{const S=p[I+1],R=o[-b];for(let O=10;O<R.length;O++){const z=R[O];z[17]===z[3]&&Eu(z[1],z,S,l)}if(null!==R[9]){const O=R[9];for(let z=0;z<O.length;z++){const ee=O[z];Eu(ee[1],ee,S,l)}}}}}return l}function rg(s){const o=Te(),a=zt(),l=hc();Oa(l+1);const d=sg(a,l);if(s.dirty&&function Ou(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Eu(a,o,l,[]):dC(a,o,d,l);s.reset(p,EA),s.notifyOnChanges()}return!0}return!1}function VI(s,o,a,l){const d=zt();if(d.firstCreatePass){const p=xn();(function $I(s,o,a){null===s.queries&&(s.queries=new FI),s.queries.track(new x0(o,a))})(d,new LI(o,a,l),p.index),function fd(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function ig(s,o,a){const l=new T0(4==(4&a));Q_(s,o,l,l.destroy),null===o[19]&&(o[19]=new A0),o[19].queries.push(new S0(l))}(d,Te(),a)}function M0(){return function BI(s,o){return s[19].queries[o].queryList}(Te(),hc())}function sg(s,o){return s.queries.getByIndex(o)}function lf(s,o){return uy(s,o)}function og(...s){}const yd=new _n("Application Initializer");let ff=(()=>{class s{constructor(a){this.appInits=a,this.resolve=og,this.reject=og,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(lv(p))a.push(p);else if(Up(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Bn(yd,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bC=new _n("AppId",{providedIn:"root",factory:function DC(){return`${wy()}${wy()}${wy()}`}});function wy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Du=new _n("Platform Initializer"),TC=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eb=new _n("appBootstrapListener"),CC=new _n("AnimationModuleType");let SC=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ey=new _n("LocaleId",{providedIn:"root",factory:()=>D(Ey,Ye.Optional|Ye.SkipSelf)||function AC(){return typeof $localize<"u"&&$localize.locale||Jh}()}),ZA=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class MC{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let V0=(()=>{class s{compileModuleSync(a){return new Xm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=oa(gn(a).declarations).reduce((v,I)=>{const b=Y(I);return b&&v.push(new la(b)),v},[]);return new MC(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const by=(()=>Promise.resolve(0))();function B0(s){typeof Zone>"u"?by.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ws{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ga(!1),this.onMicrotaskEmpty=new ga(!1),this.onStable=new ga(!1),this.onError=new ga(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function rb(){let s=un.requestAnimationFrame,o=un.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ib(s){const o=()=>{!function Si(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(un,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Dy(s),s.isCheckStableRunning=!0,Wi(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Dy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,I)=>{try{return pf(s),a.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),gf(s)}},onInvoke:(a,l,d,p,v,I,b)=>{try{return pf(s),a.invoke(d,p,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),gf(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Dy(s),Wi(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new Ie(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,_d,og,og);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const _d={};function Wi(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Dy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function pf(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gf(s){s._nesting--,Wi(s)}class Ai{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ga,this.onMicrotaskEmpty=new ga,this.onStable=new ga,this.onError=new ga}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const sb=new _n(""),Ty=new _n("");let Tu,mf=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tu||(function $0(s){Tu=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),B0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Bn(ws),Bn(Hl),Bn(Ty))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Hl=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Tu?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Gl=null;const ob=new _n("AllowMultipleToken"),j0=new _n("PlatformDestroyListeners");class Ar{constructor(o,a){this.name=o,this.token=a}}function ub(s,o,a=[]){const l=`Platform: ${o}`,d=new _n(l);return(p=[])=>{let v=yf();if(!v||v.injector.get(ob,!1)){const I=[...a,...p,{provide:d,useValue:!0}];s?s(I):function NC(s){if(Gl&&!Gl.get(ob,!1))throw new Ie(400,!1);Gl=s;const o=s.get(z0);(function ab(s){const o=s.get(Du,null);o&&o.forEach(a=>a())})(s)}(function zl(s=[],o){return Gc.create({name:o,providers:[{provide:Eh,useValue:"platform"},{provide:j0,useValue:new Set([()=>Gl=null])},...s]})}(I,l))}return function ug(s){const o=yf();if(!o)throw new Ie(401,!1);return o}()}}function yf(){return Gl?.get(z0)??null}let z0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function _a(s,o){let a;return a="noop"===s?new Ai:("zone.js"===s?void 0:s)||new ws(o),a}(l?.ngZone,function lb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:ws,useValue:d}];return d.run(()=>{const v=Gc.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(v),b=I.injector.get(He,null);if(!b)throw new Ie(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{b.handleError(R)}});I.onDestroy(()=>{lg(this._modules,I),S.unsubscribe()})}),function Sy(s,o,a){try{const l=a();return lv(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const S=I.injector.get(ff);return S.runInitializers(),S.donePromise.then(()=>(function ld(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(Uv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ey,Jh)||Jh),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const d=q0({},l);return function PC(s,o,a){const l=new Xm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(_f);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(j0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Bn(Gc))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function q0(s,o){return Array.isArray(o)?o.reduce(q0,s):{...s,...o}}let _f=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new k.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),B0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(p,v.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Cr;if(!this._injector.get(ff).done)throw!d&&Jt(a),new Ie(405,false);let v;v=d?a:this._injector.get(mp).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function G0(s){return s.isBoundToModule}(v)?void 0:this._injector.get($l),S=v.create(Gc.NULL,[],l||v.selector,I),R=S.location.nativeElement,O=S.injector.get(sb,null);return O?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),lg(this.components,S),O?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;lg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(eb,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>lg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Bn(ws),Bn(Bi),Bn(He))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function lg(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let FC=!0,cb=!1;function W0(){return cb=!0,FC}function JA(){if(cb)throw new Error("Cannot enable prod mode after platform setup.");FC=!1}let ex=(()=>{class s{}return s.__NG_ELEMENT_ID__=tx,s})();function tx(s){return function nx(s,o,a){if(Ca(s)&&!a){const l=Wt(s.index,o);return new jh(l,l)}return 47&s.type?new jh(o[16],o):null}(xn(),Te(),16==(16&s))}class X0{constructor(){}supports(o){return kp(o)}create(o){return new Ry(o)}}const ew=(s,o)=>o;class Ry{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ew}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<pb(l,d,p)?a:l,I=pb(v,d,p),b=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const S=I-d,R=b-d;if(S!=R){for(let z=0;z<S;z++){const ee=z<p.length?p[z]:p[z]=0,we=ee+z;R<=we&&we<S&&(p[z]=ee+1)}p[v.previousIndex]=R-S}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!kp(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,I),l=!0),a=a._next}else d=0,function fT(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[ed()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new tw(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new fb),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tw{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class fb{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new nw,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pb(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class gb{constructor(){}supports(o){return o instanceof Map||tv(o)}create(){return new BC}}class BC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||tv(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new $C(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class $C{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vf(){return new Py([new X0])}let Py=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||vf()),deps:[[s,new Ct,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ie(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:vf}),s})();function iw(){return new sw([new gb])}let sw=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||iw()),deps:[[s,new Ct,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ie(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:iw}),s})();const ow=ub(null,"core",[]);let mb=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Bn(_f))},s.\u0275mod=$t({type:s}),s.\u0275inj=Ut({}),s})();function aw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(dt,Ae,L)=>{L.d(Ae,{Z:()=>Ie});var m=L(2090),X=L(4859),k=L(9681),ae=L(1877);class se{constructor(_e,me){this._delegate=_e,this.firebase=me,(0,k._addComponent)(_e,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(_e,me=k._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(_e);return!lt.isInitialized()&&"EXPLICIT"===(null===(nt=lt.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:me})}_removeServiceInstance(_e,me=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(me)}_addComponent(_e){(0,k._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,k._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ge(){const st=function pe(st){const _e={},me={__esModule:!0,initializeApp:function xe($e,B={}){const ye=k.initializeApp($e,B);if((0,m.r3)(_e,ye.name))return _e[ye.name];const W=new st(ye,me);return _e[ye.name]=W,W},app:lt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function be($e){const B=$e.name,ye=B.replace("-compat","");if(k._registerComponent($e)&&"PUBLIC"===$e.type){const W=(J=lt())=>{if("function"!=typeof J[ye])throw le.create("invalid-app-argument",{appName:B});return J[ye]()};void 0!==$e.serviceProps&&(0,m.ZB)(W,$e.serviceProps),me[ye]=W,st.prototype[ye]=function(...J){return this._getService.bind(this,B).apply(this,$e.multipleInstances?J:[])}}return"PUBLIC"===$e.type?me[ye]:null},removeApp:function nt($e){delete _e[$e]},useAsService:function Ve($e,B){return"serverAuth"===B?null:B},modularAPIs:k}};function lt($e){if(!(0,m.r3)(_e,$e=$e||k._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:$e});return _e[$e]}return me.default=me,Object.defineProperty(me,"apps",{get:function ve(){return Object.keys(_e).map($e=>_e[$e])}}),lt.App=st,me}(se);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function _e(me){(0,m.ZB)(st,me)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),st}(),H=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=j;!function Me(st){(0,k.registerVersion)("@firebase/app-compat","0.1.39",st)}()},9681:(dt,Ae,L)=>{L.r(Ae),L.d(Ae,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Qs,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>nn,_apps:()=>cn,_clearComponents:()=>Ji,_components:()=>wn,_getProvider:()=>Ut,_registerComponent:()=>Fr,_removeServiceInstance:()=>fn,deleteApp:()=>Da,getApp:()=>si,getApps:()=>oi,initializeApp:()=>vi,onLog:()=>Ds,registerVersion:()=>xr,setLogLevel:()=>Qn});var m=L(5861),X=L(4859),k=L(1877),ae=L(2090),se=L(8766);class fe{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function le(it){return"VERSION"===it.getComponent()?.type}(rt)){const At=rt.getImmediate();return`${At.library}/${At.version}`}return null}).filter(rt=>rt).join(" ")}}const pe="@firebase/app",j=new k.Yd("@firebase/app"),Ht="[DEFAULT]",Ze={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,wn=new Map;function Yt(it,Ce){try{it.container.addComponent(Ce)}catch(rt){j.debug(`Component ${Ce.name} failed to register with FirebaseApp ${it.name}`,rt)}}function nn(it,Ce){it.container.addOrOverwriteComponent(Ce)}function Fr(it){const Ce=it.name;if(wn.has(Ce))return j.debug(`There were multiple attempts to register component ${Ce}.`),!1;wn.set(Ce,it);for(const rt of cn.values())Yt(rt,it);return!0}function Ut(it,Ce){const rt=it.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),it.container.getProvider(Ce)}function fn(it,Ce,rt=Ht){Ut(it,Ce).clearInstance(rt)}function Ji(){wn.clear()}const Ur=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zr{constructor(Ce,rt,At){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}const Qs="9.14.0";function vi(it,Ce={}){let rt=it;"object"!=typeof Ce&&(Ce={name:Ce});const At=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},Ce),Tt=At.name;if("string"!=typeof Tt||!Tt)throw Ur.create("bad-app-name",{appName:String(Tt)});if(rt||(rt=(0,ae.aH)()),!rt)throw Ur.create("no-options");const $t=cn.get(Tt);if($t){if((0,ae.vZ)(rt,$t.options)&&(0,ae.vZ)(At,$t.config))return $t;throw Ur.create("duplicate-app",{appName:Tt})}const G=new X.H0(Tt);for(const K of wn.values())G.addComponent(K);const V=new zr(rt,At,G);return cn.set(Tt,V),V}function si(it=Ht){const Ce=cn.get(it);if(!Ce&&it===Ht)return vi();if(!Ce)throw Ur.create("no-app",{appName:it});return Ce}function oi(){return Array.from(cn.values())}function Da(it){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,m.Z)(function*(it){const Ce=it.name;cn.has(Ce)&&(cn.delete(Ce),yield Promise.all(it.container.getProviders().map(rt=>rt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function xr(it,Ce,rt){var At;let Tt=null!==(At=Ze[it])&&void 0!==At?At:it;rt&&(Tt+=`-${rt}`);const $t=Tt.match(/\s|\//),G=Ce.match(/\s|\//);if($t||G){const V=[`Unable to register library "${Tt}" with version "${Ce}":`];return $t&&V.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),$t&&G&&V.push("and"),G&&V.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void j.warn(V.join(" "))}Fr(new X.wA(`${Tt}-version`,()=>({library:Tt,version:Ce}),"VERSION"))}function Ds(it,Ce){if(null!==it&&"function"!=typeof it)throw Ur.create("invalid-log-argument");(0,k.Am)(it,Ce)}function Qn(it){(0,k.Ub)(it)}const Fn="firebase-heartbeat-store";let jn=null;function mn(){return jn||(jn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(it,Ce)=>{0===Ce&&it.createObjectStore(Fn)}}).catch(it=>{throw Ur.create("idb-open",{originalErrorMessage:it.message})})),jn}function ct(){return(ct=(0,m.Z)(function*(it){var Ce;try{return(yield mn()).transaction(Fn).objectStore(Fn).get(Hn(it))}catch(rt){if(rt instanceof ae.ZR)j.warn(rt.message);else{const At=Ur.create("idb-get",{originalErrorMessage:null===(Ce=rt)||void 0===Ce?void 0:Ce.message});j.warn(At.message)}}})).apply(this,arguments)}function un(it,Ce){return _r.apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(it,Ce){var rt;try{const Tt=(yield mn()).transaction(Fn,"readwrite");return yield Tt.objectStore(Fn).put(Ce,Hn(it)),Tt.done}catch(At){if(At instanceof ae.ZR)j.warn(At.message);else{const Tt=Ur.create("idb-set",{originalErrorMessage:null===(rt=At)||void 0===rt?void 0:rt.message});j.warn(Tt.message)}}})).apply(this,arguments)}function Hn(it){return`${it.name}!${it.options.appId}`}class Ts{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new on(rt),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ce=this;return(0,m.Z)(function*(){const At=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=sn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Ce._heartbeatsCache.heartbeats.some($t=>$t.date===Tt))return Ce._heartbeatsCache.heartbeats.push({date:Tt,agent:At}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter($t=>{const G=new Date($t.date).valueOf();return Date.now()-G<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,m.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const rt=sn(),{heartbeatsToSend:At,unsentEntries:Tt}=function Ri(it,Ce=1024){const rt=[];let At=it.slice();for(const Tt of it){const $t=rt.find(G=>G.agent===Tt.agent);if($t){if($t.dates.push(Tt.date),Yn(rt)>Ce){$t.dates.pop();break}}else if(rt.push({agent:Tt.agent,dates:[Tt.date]}),Yn(rt)>Ce){rt.pop();break}At=At.slice(1)}return{heartbeatsToSend:rt,unsentEntries:At}}(Ce._heartbeatsCache.heartbeats),$t=(0,ae.L)(JSON.stringify({version:2,heartbeats:At}));return Ce._heartbeatsCache.lastSentHeartbeatDate=rt,Tt.length>0?(Ce._heartbeatsCache.heartbeats=Tt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),$t})()}}function sn(){return(new Date).toISOString().substring(0,10)}class on{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,m.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Et(it){return ct.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var rt=this;return(0,m.Z)(function*(){var At;if(yield rt._canUseIndexedDBPromise){const $t=yield rt.read();return un(rt.app,{lastSentHeartbeatDate:null!==(At=Ce.lastSentHeartbeatDate)&&void 0!==At?At:$t.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var rt=this;return(0,m.Z)(function*(){var At;if(yield rt._canUseIndexedDBPromise){const $t=yield rt.read();return un(rt.app,{lastSentHeartbeatDate:null!==(At=Ce.lastSentHeartbeatDate)&&void 0!==At?At:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...Ce.heartbeats]})}})()}}function Yn(it){return(0,ae.L)(JSON.stringify({version:2,heartbeats:it})).length}!function Vr(it){Fr(new X.wA("platform-logger",Ce=>new fe(Ce),"PRIVATE")),Fr(new X.wA("heartbeat",Ce=>new Ts(Ce),"PRIVATE")),xr(pe,"0.8.4",it),xr(pe,"0.8.4","esm2017"),xr("fire-js","")}("")},4859:(dt,Ae,L)=>{L.d(Ae,{H0:()=>pe,wA:()=>k});var m=L(5861),X=L(2090);class k{constructor(j,H,Z){this.name=j,this.instanceFactory=H,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ae="[DEFAULT]";class se{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const Z=new X.BH;if(this.instancesDeferred.set(H,Z),this.isInitialized(H)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:H});Le&&Z.resolve(Le)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const Z=this.normalizeInstanceIdentifier(j?.identifier),Le=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function le(ge){return"EAGER"===ge.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[H,Z]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(H);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});Z.resolve(Me)}catch{}}}}clearInstance(j=ae){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...H.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ae){return this.instances.has(j)}getOptions(j=ae){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,Z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Z,options:H});for(const[Me,Ie]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Me)&&Ie.resolve(Le);return Le}onInit(j,H){var Z;const Le=this.normalizeInstanceIdentifier(H),Me=null!==(Z=this.onInitCallbacks.get(Le))&&void 0!==Z?Z:new Set;Me.add(j),this.onInitCallbacks.set(Le,Me);const Ie=this.instances.get(Le);return Ie&&j(Ie,Le),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,H){const Z=this.onInitCallbacks.get(H);if(Z)for(const Le of Z)try{Le(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let Z=this.instances.get(j);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=j,ge===ae?void 0:ge),options:H}),this.instances.set(j,Z),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(Z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Z)}catch{}var ge;return Z||null}normalizeInstanceIdentifier(j=ae){return this.component?this.component.multipleInstances?j:ae:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new se(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Ae,L)=>{L.d(Ae,{Am:()=>ge,Ub:()=>pe,Yd:()=>le,in:()=>X});const m=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,se={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},fe=(j,H,...Z)=>{if(H<j.logLevel)return;const Le=(new Date).toISOString(),Me=se[H];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Me](`[${Le}]  ${j.name}:`,...Z)};class le{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function pe(j){m.forEach(H=>{H.setLogLevel(j)})}function ge(j,H){for(const Z of m){let Le=null;H&&H.level&&(Le=k[H.level]),Z.userLogHandler=null===j?null:(Me,Ie,...st)=>{const _e=st.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ie>=(Le??Me.logLevel)&&j({level:X[Ie].toLowerCase(),message:_e,args:st,type:Me.name})}}}},8766:(dt,Ae,L)=>{L.d(Ae,{Lj:()=>xe,X3:()=>lt});var m=L(5861);let k,ae;const le=new WeakMap,pe=new WeakMap,ge=new WeakMap,j=new WeakMap,H=new WeakMap;let Me={get(B,ye,W){if(B instanceof IDBTransaction){if("done"===ye)return pe.get(B);if("objectStoreNames"===ye)return B.objectStoreNames||ge.get(B);if("store"===ye)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return me(B[ye])},set:(B,ye,W)=>(B[ye]=W,!0),has:(B,ye)=>B instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in B};function _e(B){return"function"==typeof B?function st(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...ye){return B.apply(nt(this),ye),me(le.get(this))}:function(...ye){return me(B.apply(nt(this),ye))}:function(ye,...W){const J=B.call(nt(this),ye,...W);return ge.set(J,ye.sort?ye.sort():[ye]),me(J)}}(B):(B instanceof IDBTransaction&&function Le(B){if(pe.has(B))return;const ye=new Promise((W,J)=>{const re=()=>{B.removeEventListener("complete",te),B.removeEventListener("error",ke),B.removeEventListener("abort",ke)},te=()=>{W(),re()},ke=()=>{J(B.error||new DOMException("AbortError","AbortError")),re()};B.addEventListener("complete",te),B.addEventListener("error",ke),B.addEventListener("abort",ke)});pe.set(B,ye)}(B),((B,ye)=>ye.some(W=>B instanceof W))(B,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Me):B)}function me(B){if(B instanceof IDBRequest)return function Z(B){const ye=new Promise((W,J)=>{const re=()=>{B.removeEventListener("success",te),B.removeEventListener("error",ke)},te=()=>{W(me(B.result)),re()},ke=()=>{J(B.error),re()};B.addEventListener("success",te),B.addEventListener("error",ke)});return ye.then(W=>{W instanceof IDBCursor&&le.set(W,B)}).catch(()=>{}),H.set(ye,B),ye}(B);if(j.has(B))return j.get(B);const ye=_e(B);return ye!==B&&(j.set(B,ye),H.set(ye,B)),ye}const nt=B=>H.get(B);function lt(B,ye,{blocked:W,upgrade:J,blocking:re,terminated:te}={}){const ke=indexedDB.open(B,ye),Ne=me(ke);return J&&ke.addEventListener("upgradeneeded",ht=>{J(me(ke.result),ht.oldVersion,ht.newVersion,me(ke.transaction))}),W&&ke.addEventListener("blocked",()=>W()),Ne.then(ht=>{te&&ht.addEventListener("close",()=>te()),re&&ht.addEventListener("versionchange",()=>re())}).catch(()=>{}),Ne}function xe(B,{blocked:ye}={}){const W=indexedDB.deleteDatabase(B);return ye&&W.addEventListener("blocked",()=>ye()),me(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Ve=new Map;function $e(B,ye){if(!(B instanceof IDBDatabase)||ye in B||"string"!=typeof ye)return;if(Ve.get(ye))return Ve.get(ye);const W=ye.replace(/FromIndex$/,""),J=ye!==W,re=be.includes(W);if(!(W in(J?IDBIndex:IDBObjectStore).prototype)||!re&&!ve.includes(W))return;const te=function(){var ke=(0,m.Z)(function*(Ne,...ht){const tn=this.transaction(Ne,re?"readwrite":"readonly");let Ht=tn.store;return J&&(Ht=Ht.index(ht.shift())),(yield Promise.all([Ht[W](...ht),re&&tn.done]))[0]});return function(ht){return ke.apply(this,arguments)}}();return Ve.set(ye,te),te}!function Ie(B){Me=B(Me)}(B=>({...B,get:(ye,W,J)=>$e(ye,W)||B.get(ye,W,J),has:(ye,W)=>!!$e(ye,W)||B.has(ye,W)}))},5861:(dt,Ae,L)=>{function m(k,ae,se,fe,le,pe,ge){try{var j=k[pe](ge),H=j.value}catch(Z){return void se(Z)}j.done?ae(H):Promise.resolve(H).then(fe,le)}function X(k){return function(){var ae=this,se=arguments;return new Promise(function(fe,le){var pe=k.apply(ae,se);function ge(H){m(pe,fe,le,ge,j,"next",H)}function j(H){m(pe,fe,le,ge,j,"throw",H)}ge(void 0)})}}L.d(Ae,{Z:()=>X})}},dt=>{dt(dt.s=1020)}]);